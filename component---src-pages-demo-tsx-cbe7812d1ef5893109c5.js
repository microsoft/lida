/*! For license information please see component---src-pages-demo-tsx-cbe7812d1ef5893109c5.js.LICENSE.txt */
(self.webpackChunklida=self.webpackChunklida||[]).push([[514],{47462:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(1413),i=n(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},o=n(37041),u=function(t,e){return i.createElement(o.Z,(0,r.Z)((0,r.Z)({},t),{},{ref:e,icon:a}))};u.displayName="RightOutlined";var s=i.forwardRef(u)},81819:function(t,e){"use strict";var n=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],a=this._events["*"]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],u=o.callback;o.once&&(r.splice(a,1),0===r.length&&delete e._events[t],i--,a--),u.apply(e,n)}};o(i),o(a)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();e.Z=n},50138:function(t,e,n){"use strict";var r=n(79900),i=n(81819),a=n(55013),o=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=(0,a.CD)(r,e),n}return(0,r.ZT)(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(i.Z);e.Z=o},91319:function(t,e,n){"use strict";n.d(e,{Z:function(){return U}});var r,i,a=n(79900),o=n(23537),u=n(25765),s=n(55013),l=n(48238),c=0,f=0,h=0,d=0,p=0,g=0,v="object"==typeof performance&&performance.now?performance:Date,m="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function y(){return p||(m(x),p=v.now()+g)}function x(){p=0}function b(){this._call=this._time=this._next=null}function w(t,e,n){var r=new b;return r.restart(t,e,n),r}function S(){p=(d=v.now())+g,c=f=0;try{!function(){y(),++c;for(var t,e=r;e;)(t=p-e._time)>=0&&e._call.call(null,t),e=e._next;--c}()}finally{c=0,function(){var t,e,n=r,a=1/0;for(;n;)n._call?(a>n._time&&(a=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:r=e);i=t,C(a)}(),p=0}}function k(){var t=v.now(),e=t-d;e>1e3&&(g-=e,d=t)}function C(t){c||(f&&(f=clearTimeout(f)),t-p>24?(t<1/0&&(f=setTimeout(S,t-v.now()-g)),h&&(h=clearInterval(h))):(h||(d=v.now(),h=setInterval(k,1e3)),c=1,m(S)))}b.prototype=w.prototype={constructor:b,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?y():+n)+(null==e?0:+e),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=n,C()},stop:function(){this._call&&(this._call=null,this._time=1/0,C())}};var E=n(23713),M=n(79739),O=n(74205),A=n(47696),_=[1,0,0,0,1,0,0,0,1];function D(t,e,n){var r,i=e.startTime;if(n<i+e.delay||e._paused)return!1;var a=e.duration,o=e.easing,u=(0,O._)(o);if(n=n-i-e.delay,e.repeat)r=u(r=n%a/a);else{if(!((r=n/a)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;r=u(r)}if(e.onFrame){var s=e.onFrame(r);t.attr(s)}else!function(t,e,n){var r={},i=e.fromAttrs,a=e.toAttrs;if(!t.destroyed){var o,u;for(var s in a)if(!(0,l.Xy)(i[s],a[s]))if("path"===s){var c=a[s],f=i[s];c.length>f.length?(c=A.parsePathString(a[s]),f=A.parsePathString(i[s]),f=A.fillPathByDiff(f,c),f=A.formatPath(f,c),e.fromAttrs.path=f,e.toAttrs.path=c):e.pathFormatted||(c=A.parsePathString(a[s]),f=A.parsePathString(i[s]),f=A.formatPath(f,c),e.fromAttrs.path=f,e.toAttrs.path=c,e.pathFormatted=!0),r[s]=[];for(var h=0;h<c.length;h++){for(var d=c[h],p=f[h],g=[],v=0;v<d.length;v++)(0,l.hj)(d[v])&&p&&(0,l.hj)(p[v])?(o=(0,E.Z)(p[v],d[v]),g.push(o(n))):g.push(d[v]);r[s].push(g)}}else if("matrix"===s){var m=(0,M.Z)(i[s]||_,a[s]||_)(n);r[s]=m}else["fill","stroke","fillStyle","strokeStyle"].includes(s)&&(u=a[s],/^[r,R,L,l]{1}[\s]*\(/.test(u))?r[s]=a[s]:(0,l.mf)(a[s])||(o=(0,E.Z)(i[s],a[s]),r[s]=o(n));t.attr(r)}}(t,e,r);return!1}var T=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this;this.timer=w((function(i){if(r.current=i,r.animators.length>0){for(var a=r.animators.length-1;a>=0;a--)if((t=r.animators[a]).destroyed)r.removeAnimator(a);else{if(!t.isAnimatePaused())for(var o=(e=t.get("animations")).length-1;o>=0;o--)n=e[o],D(t,n,i)&&(e.splice(o,1),!1,n.callback&&n.callback());0===e.length&&r.removeAnimator(a)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),F=T,I=n(43860),P=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function j(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function B(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),t.isCanvas()&&i)return;if(r&&(0,s.UY)(t,r))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}var L=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");(0,s.S6)(P,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");(0,s.S6)(P,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,a){var o=new I.Z(t,e);return o.fromShape=i,o.toShape=a,o.x=n.x,o.y=n.y,o.clientX=n.clientX,o.clientY=n.clientY,o.propagationPath.push(r),o},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),r=e.getPointByEvent(t);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],a=!1;if(i)i.call(this,n,r,e);else{var o=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(a=!0,o&&this._emitEvent(t,e,n,o,o,null),this._emitEvent(t,e,n,null,o,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(a||(this.currentShape=r),r&&!r.get("destroyed")){var u=this.canvas;u.get("el").style.cursor=r.attr("cursor")||u.get("cursor")}},t.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,a);else{var o=this.mousedownPoint;if(o){var u=this.mousedownShape,s=n.timeStamp-this.mousedownTimeStamp,l=o.clientX-t.clientX,c=o.clientY-t.clientY;s>120||l*l+c*c>40?u&&u.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,t,a),this.mousedownShape=null,this.mousedownPoint=null):!u&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,i,a){var o=this._getEventObj(t,e,n,r,i,a);if(r){o.shape=r,j(r,t,o);for(var u=r.getParent();u;)u.emitDelegation(t,o),o.propagationStopped||B(u,t,o),o.propagationPath.push(u),u=u.getParent()}else{j(this.canvas,t,o)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),R=L,Z=(0,o.qY)(),N=Z&&"firefox"===Z.name,z=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return(0,a.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");(0,s.HD)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new R({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new F(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");s.jU&&(n.style.width=t+"px",n.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");s.jU&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(N&&!(0,s.kK)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,s.kK)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),n=e.x,r=e.y;return this.getPointByClient(n,r)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(u.Z),U=z},25765:function(t,e,n){"use strict";var r=n(79900),i=n(48238),a=n(86755),o=n(55013),u={},s="_INDEX";function l(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){l(t,e)}))}}function c(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){c(t,e)}))}}var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,a=[],u=[],s=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return s.length>0?((0,o.S6)(s,(function(t){var e=t.getBBox();a.push(e.minX,e.maxX),u.push(e.minY,e.maxY)})),t=(0,i.VV)(a),e=(0,i.Fp)(a),n=(0,i.VV)(u),r=(0,i.Fp)(u)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,a=[],u=[],s=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return s.length>0?((0,o.S6)(s,(function(t){var e=t.getCanvasBBox();a.push(e.minX,e.maxX),u.push(e.minY,e.maxY)})),t=(0,i.VV)(a),e=(0,i.Fp)(a),n=(0,i.VV)(u),r=(0,i.Fp)(u)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){var e=this.getChildren();(0,o.S6)(e,(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];(0,o.Kn)(n)?r=n:r.type=n;var i=u[r.type];i||(i=(0,o.jC)(r.type),u[r.type]=i);var a=this.getShapeBase(),s=new a[i](r);return this.add(s),s},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=t[0],i=t[1];if((0,o.mf)(r))n=new r(i||{parent:this});else{var a=r||{},u=this.getGroupBase();n=new u(a)}return this.add(n),n},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,n){if(!(0,o.pP)(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,t,e,n);else{var a=[t,e,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},e.prototype._findShape=function(t,e,n,r){for(var i=null,a=t.length-1;a>=0;a--){var u=t[a];if((0,o.pP)(u)&&(u.isGroup()?i=u.getShape(e,n,r):u.isHit(e,n)&&(i=u)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=t.getParent();i&&function(t,e,n){void 0===n&&(n=!0),n?e.destroy():(e.set("parent",null),e.set("canvas",null)),(0,o.As)(t.getChildren(),e)}(i,t,!1),t.set("parent",this),e&&l(t,e),r&&c(t,r),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t,e=this.getChildren();(0,o.S6)(e,(function(t,e){return t[s]=e,t})),e.sort((t=function(t,e){return t.get("zIndex")-e.get("zIndex")},function(e,n){var r=t(e,n);return 0===r?e[s]-n[s]:r})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[],n=this.getChildren();return(0,o.S6)(n,(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},e.prototype.find=function(t){var e=null,n=this.getChildren();return(0,o.S6)(n,(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(a.Z);e.Z=f},86755:function(t,e,n){"use strict";var r=n(79900),i=n(48238),a=n(12579),o=n(55013),u=n(16225),s=n(50138),l=a.vs,c="matrix",f=["zIndex","capture","visible","type"],h=["repeat"];function d(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}function p(t,e){var n={},r=e.attr();return(0,i.S6)(t,(function(t,e){-1!==h.indexOf(e)||(0,i.Xy)(r[e],t)||(n[e]=t)})),n}function g(t,e){if(e.onFrame)return t;var n=e.startTime,r=e.delay,a=e.duration,o=Object.prototype.hasOwnProperty;return(0,i.S6)(t,(function(t){n+r<t.startTime+t.delay+t.duration&&a>t.delay&&(0,i.S6)(e.toAttrs,(function(e,n){o.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))})),t}var v=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var r=n.getDefaultAttrs();return(0,i.CD)(r,e.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return(0,r.ZT)(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],a=e[1];if(!r)return this.attrs;if((0,i.Kn)(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,a),this.afterAttrsChange(((t={})[r]=a,t)),this):this.attrs[r]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?((0,o.As)(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(c,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(c)},e.prototype.setMatrix=function(t){this.attr(c,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?(0,u.xq)(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?(0,u.xq)(t,e):e||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?(0,u.rG)(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var n=(0,u.U_)(e);if(n)return(0,u.rG)(n,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var r=this.getShapeBase()[(0,i.jC)(t.type)];r&&(n=new r({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};(0,i.S6)(e,(function(t,r){(0,i.kJ)(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)(0,i.kJ)(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]}));var r=new(0,this.constructor)({attrs:n});return(0,i.S6)(f,(function(e){r.set(e,t.get(e))})),r},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var a,o,u,s,l,c=t[0],f=t[1],h=t[2],v=void 0===h?"easeLinear":h,m=t[3],y=void 0===m?i.ZT:m,x=t[4],b=void 0===x?0:x;(0,i.mf)(c)?(a=c,c={}):(0,i.Kn)(c)&&c.onFrame&&(a=c.onFrame,o=c.repeat),(0,i.Kn)(f)?(f=(l=f).duration,v=l.easing||"easeLinear",b=l.delay||0,o=l.repeat||o||!1,y=l.callback||i.ZT,u=l.pauseCallback||i.ZT,s=l.resumeCallback||i.ZT):((0,i.hj)(y)&&(b=y,y=null),(0,i.mf)(v)?(y=v,v="easeLinear"):v=v||"easeLinear");var w=p(c,this),S={fromAttrs:d(w,this),toAttrs:w,duration:f,easing:v,repeat:o,callback:y,pauseCallback:u,resumeCallback:s,delay:b,startTime:n.getTime(),id:(0,i.EL)(),onFrame:a,pathFormatted:!1};r.length>0?r=g(r,S):n.addAnimator(this),r.push(S),this.set("animations",r),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0);var n=this.get("animations");(0,i.S6)(n,(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return(0,i.S6)(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return(0,i.S6)(e,(function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var n,r=this,a=e.propagationPath;this.getEvents();"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var u=function(t){var u=a[t],l=u.get("name");if(l){if((u.isGroup()||u.isCanvas&&u.isCanvas())&&n&&(0,o.UY)(u,n))return"break";(0,i.kJ)(l)?(0,i.S6)(l,(function(t){r.emitDelegateEvent(u,t,e)})):s.emitDelegateEvent(u,l,e)}},s=this,l=0;l<a.length;l++){if("break"===u(l))break}},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix(),r=l(n,[["t",t,e]]);return this.setMatrix(r),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=this.getMatrix(),r=l(n,[["s",t,e||t]]);return this.setMatrix(r),this},e.prototype.rotate=function(t){var e=this.getMatrix(),n=l(e,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=e.y,i=this.getMatrix(),a=l(i,[["t",-n,-r],["r",t],["t",n,r]]);return this.setMatrix(a),this},e.prototype.rotateAtPoint=function(t,e,n){var r=this.getMatrix(),i=l(r,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(i),this},e}(s.Z);e.Z=v},30838:function(t,e,n){"use strict";var r=n(79900),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e},e}(n(25765).Z);e.Z=i},1921:function(t,e,n){"use strict";var r=n(79900),i=n(86755),a=n(16225),o=function(t){function e(e){return t.call(this,e)||this}return(0,r.ZT)(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;if(e){var u=(0,a.rG)(e,[t.minX,t.minY]),s=(0,a.rG)(e,[t.maxX,t.minY]),l=(0,a.rG)(e,[t.minX,t.maxY]),c=(0,a.rG)(e,[t.maxX,t.maxY]);n=Math.min(u[0],s[0],l[0],c[0]),i=Math.max(u[0],s[0],l[0],c[0]),r=Math.min(u[1],s[1],l[1],c[1]),o=Math.max(u[1],s[1],l[1],c[1])}var f=this.attrs;if(f.shadowColor){var h=f.shadowBlur,d=void 0===h?0:h,p=f.shadowOffsetX,g=void 0===p?0:p,v=f.shadowOffsetY,m=void 0===v?0:v,y=n-d+g,x=i+d+g,b=r-d+m,w=o+d+m;n=Math.min(n,y),i=Math.max(i,x),r=Math.min(r,b),o=Math.max(o,w)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1],a=(i=this.invertFromMatrix(i))[0],o=i[1],u=this._isInBBox(a,o);if(this.isOnlyHitBox())return u;if(u&&!this.isClipped(a,o)){if(this.isInShape(a,o))return!0;if(n&&n.isHit(a,o))return!0;if(r&&r.isHit(a,o))return!0}return!1},e}(i.Z);e.Z=o},74205:function(t,e,n){"use strict";n.d(e,{_:function(){return N},C:function(){return z}});var r={};function i(t){return+t}function a(t){return t*t}function o(t){return t*(2-t)}function u(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function s(t){return t*t*t}function l(t){return--t*t*t+1}function c(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}n.r(r),n.d(r,{easeBack:function(){return P},easeBackIn:function(){return F},easeBackInOut:function(){return P},easeBackOut:function(){return I},easeBounce:function(){return _},easeBounceIn:function(){return A},easeBounceInOut:function(){return D},easeBounceOut:function(){return _},easeCircle:function(){return E},easeCircleIn:function(){return k},easeCircleInOut:function(){return E},easeCircleOut:function(){return C},easeCubic:function(){return c},easeCubicIn:function(){return s},easeCubicInOut:function(){return c},easeCubicOut:function(){return l},easeElastic:function(){return L},easeElasticIn:function(){return B},easeElasticInOut:function(){return R},easeElasticOut:function(){return L},easeExp:function(){return S},easeExpIn:function(){return b},easeExpInOut:function(){return S},easeExpOut:function(){return w},easeLinear:function(){return i},easePoly:function(){return d},easePolyIn:function(){return f},easePolyInOut:function(){return d},easePolyOut:function(){return h},easeQuad:function(){return u},easeQuadIn:function(){return a},easeQuadInOut:function(){return u},easeQuadOut:function(){return o},easeSin:function(){return y},easeSinIn:function(){return v},easeSinInOut:function(){return y},easeSinOut:function(){return m}});var f=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),h=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),d=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),p=Math.PI,g=p/2;function v(t){return 1==+t?1:1-Math.cos(t*g)}function m(t){return Math.sin(t*g)}function y(t){return(1-Math.cos(p*t))/2}function x(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function b(t){return x(1-+t)}function w(t){return 1-x(t)}function S(t){return((t*=2)<=1?x(1-t):2-x(t-1))/2}function k(t){return 1-Math.sqrt(1-t*t)}function C(t){return Math.sqrt(1- --t*t)}function E(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var M=4/11,O=7.5625;function A(t){return 1-_(1-t)}function _(t){return(t=+t)<M?O*t*t:t<.7272727272727273?O*(t-=.5454545454545454)*t+.75:t<.9090909090909091?O*(t-=.8181818181818182)*t+.9375:O*(t-=.9545454545454546)*t+.984375}function D(t){return((t*=2)<=1?1-_(1-t):_(t-1)+1)/2}var T=1.70158,F=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(T),I=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(T),P=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(T),j=2*Math.PI,B=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=j);function i(t){return e*x(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*j)},i.period=function(n){return t(e,n)},i}(1,.3),L=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=j);function i(t){return 1-e*x(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*j)},i.period=function(n){return t(e,n)},i}(1,.3),R=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=j);function i(t){return((t=2*t-1)<0?e*x(-t)*Math.sin((r-t)/n):2-e*x(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*j)},i.period=function(n){return t(e,n)},i}(1,.3),Z={};function N(t){return Z[t.toLowerCase()]||r[t]}function z(t,e){Z[t.toLowerCase()]=e}},62969:function(t,e,n){"use strict";n.d(e,{b:function(){return a},W:function(){return i}});var r=new Map;function i(t,e){r.set(t,e)}function a(t){return r.get(t)}function o(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function u(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}var s=n(58609);function l(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function c(t,e){var n=t.get("startArrowShape"),r=t.get("endArrowShape");return n&&(e=l(e,n.getCanvasBBox())),r&&(e=l(e,r.getCanvasBBox())),e}var f=n(88482);var h=n(85687),d=n(48238);function p(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),u=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.acos((a+o-u)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!s||0===Math.sin(s)||(0,d.vQ)(s,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(s/2-l)*(e/2*(1/Math.sin(s/2)))-e/2||0,yExtra:Math.cos(c-s/2)*(e/2*(1/Math.sin(s/2)))-e/2||0}}i("rect",o),i("image",o),i("circle",u),i("marker",u),i("polyline",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var a=e[i];n.push(a[0]),r.push(a[1])}var o=s.Zr.getBBoxByArray(n,r),u=o.x,l=o.y,f={minX:u,minY:l,maxX:u+o.width,maxY:l+o.height};return{x:(f=c(t,f)).minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}})),i("polygon",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var a=e[i];n.push(a[0]),r.push(a[1])}return s.Zr.getBBoxByArray(n,r)})),i("text",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.text,a=e.fontSize,o=e.lineHeight,u=e.font;u||(u=(0,f.$O)(e));var s,l=(0,f.mY)(i,u);if(l){var c=e.textAlign,h=e.textBaseline,d=(0,f.FE)(i,a,o),p={x:n,y:r-d};c&&("end"===c||"right"===c?p.x-=l:"center"===c&&(p.x-=l/2)),h&&("top"===h?p.y+=d:"middle"===h&&(p.y+=d/2)),s={x:p.x,y:p.y,width:l,height:d}}else s={x:n,y:r,width:0,height:0};return s})),i("path",(function(t){var e=t.attr(),n=e.path,r=e.stroke?e.lineWidth:0,i=function(t,e){for(var n=[],r=[],i=[],a=0;a<t.length;a++){var o=(y=t[a]).currentPoint,u=y.params,l=y.prePoint,c=void 0;switch(y.command){case"Q":c=s.lD.box(l[0],l[1],u[1],u[2],u[3],u[4]);break;case"C":c=s.Ll.box(l[0],l[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var f=y.arcParams;c=s.wN.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:n.push(o[0]),r.push(o[1])}c&&(y.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&("L"===y.command||"M"===y.command)&&y.prePoint&&y.nextPoint&&i.push(y)}n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),r=r.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var h=(0,d.VV)(n),g=(0,d.VV)(r),v=(0,d.Fp)(n),m=(0,d.Fp)(r);if(0===i.length)return{x:h,y:g,width:v-h,height:m-g};for(a=0;a<i.length;a++){var y;(o=(y=i[a]).currentPoint)[0]===h?h-=p(y,e).xExtra:o[0]===v&&(v+=p(y,e).xExtra),o[1]===g?g-=p(y,e).yExtra:o[1]===m&&(m+=p(y,e).yExtra)}return{x:h,y:g,width:v-h,height:m-g}}(t.get("segments")||(0,h.zx)(n),r),a=i.x,o=i.y,u={minX:a,minY:o,maxX:a+i.width,maxY:o+i.height};return{x:(u=c(t,u)).minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}})),i("line",(function(t){var e=t.attr(),n=e.x1,r=e.y1,i=e.x2,a=e.y2,o={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,a),maxY:Math.max(r,a)};return{x:(o=c(t,o)).minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}})),i("ellipse",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,a=e.ry;return{x:n-i,y:r-a,width:2*i,height:2*a}}))},43860:function(t,e){"use strict";var n=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();e.Z=n},82854:function(t,e,n){"use strict";n.r(e),n.d(e,{AbstractCanvas:function(){return c.Z},AbstractGroup:function(){return f.Z},AbstractShape:function(){return h.Z},Base:function(){return l.Z},Event:function(){return s.Z},PathUtil:function(){return r},assembleFont:function(){return p.$O},getBBoxMethod:function(){return d.b},getOffScreenContext:function(){return m.L},getTextHeight:function(){return p.FE},invert:function(){return v.U_},isAllowCapture:function(){return g.pP},multiplyVec2:function(){return v.rG},registerBBox:function(){return d.W},registerEasing:function(){return y.C},version:function(){return x}});var r=n(47696),i=n(87194),a={};for(var o in i)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(o)<0&&(a[o]=function(t){return i[t]}.bind(0,o));n.d(e,a);var u=n(5228);a={};for(var o in u)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(o)<0&&(a[o]=function(t){return u[t]}.bind(0,o));n.d(e,a);var s=n(43860),l=n(50138),c=n(91319),f=n(30838),h=n(1921),d=n(62969),p=n(88482),g=n(55013),v=n(16225),m=n(84822),y=n(74205),x="0.5.11"},5228:function(){},87194:function(){},16225:function(t,e,n){"use strict";function r(t,e){var n=[],r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=e[0],d=e[1],p=e[2],g=e[3],v=e[4],m=e[5],y=e[6],x=e[7],b=e[8];return n[0]=h*r+d*o+p*l,n[1]=h*i+d*u+p*c,n[2]=h*a+d*s+p*f,n[3]=g*r+v*o+m*l,n[4]=g*i+v*u+m*c,n[5]=g*a+v*s+m*f,n[6]=y*r+x*o+b*l,n[7]=y*i+x*u+b*c,n[8]=y*a+x*s+b*f,n}function i(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function a(t){var e=[],n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=c*o-u*l,h=-c*a+u*s,d=l*a-o*s,p=n*f+r*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*r+i*l)*p,e[2]=(u*r-i*o)*p,e[3]=h*p,e[4]=(c*n-i*s)*p,e[5]=(-u*n+i*a)*p,e[6]=d*p,e[7]=(-l*n+r*s)*p,e[8]=(o*n-r*a)*p,e):null}n.d(e,{U_:function(){return a},rG:function(){return i},xq:function(){return r}})},84822:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=null;function i(){if(!r){var t=document.createElement("canvas");t.width=1,t.height=1,r=t.getContext("2d")}return r}},47696:function(t,e,n){"use strict";n.r(e),n.d(e,{catmullRomToBezier:function(){return s},fillPath:function(){return D},fillPathByDiff:function(){return I},formatPath:function(){return B},intersection:function(){return O},parsePathArray:function(){return v},parsePathString:function(){return u},pathToAbsolute:function(){return c},pathToCurve:function(){return p},rectPath:function(){return S}});var r=n(48238),i="\t\n\v\f\r   ᠎             　\u2028\u2029",a=new RegExp("([a-z])["+i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+i+"]*,?["+i+"]*)+)","ig"),o=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+i+"]*,?["+i+"]*","ig"),u=function(t){if(!t)return null;if((0,r.kJ)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(a,(function(r,i,a){var u=[],s=i.toLowerCase();if(a.replace(o,(function(t,e){e&&u.push(+e)})),"m"===s&&u.length>2&&(n.push([i].concat(u.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===u.length&&n.push([i,u[0]]),"r"===s)n.push([i].concat(u));else for(;u.length>=e[s]&&(n.push([i].concat(u.splice(0,e[s]))),e[s]););return t})),n},s=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var a=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?a[3]={x:+t[0],y:+t[1]}:i-2===r&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},l=function(t,e,n,r,i){var a=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var o=Math.PI/180,u=t+n*Math.cos(-r*o),s=t+n*Math.cos(-i*o);a=[["M",u,e+n*Math.sin(-r*o)],["A",n,n,0,+(i-r>180),0,s,e+n*Math.sin(-i*o)]]}else a=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return a},c=function(t){if(!(t=u(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,a=0,o=0,c=0,f=0;"M"===t[0][0]&&(o=i=+t[0][1],c=a=+t[0][2],f++,r[0]=["M",i,a]);for(var h=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),d=void 0,p=void 0,g=f,v=t.length;g<v;g++){if(r.push(d=[]),(e=(p=t[g])[0])!==e.toUpperCase())switch(d[0]=e.toUpperCase(),d[0]){case"A":d[1]=p[1],d[2]=p[2],d[3]=p[3],d[4]=p[4],d[5]=p[5],d[6]=+p[6]+i,d[7]=+p[7]+a;break;case"V":d[1]=+p[1]+a;break;case"H":d[1]=+p[1]+i;break;case"R":for(var m=2,y=(n=[i,a].concat(p.slice(1))).length;m<y;m++)n[m]=+n[m]+i,n[++m]=+n[m]+a;r.pop(),r=r.concat(s(n,h));break;case"O":r.pop(),(n=l(i,a,p[1],p[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(l(i,a,p[1],p[2],p[3])),d=["U"].concat(r[r.length-1].slice(-2));break;case"M":o=+p[1]+i,c=+p[2]+a;break;default:for(m=1,y=p.length;m<y;m++)d[m]=+p[m]+(m%2?i:a)}else if("R"===e)n=[i,a].concat(p.slice(1)),r.pop(),r=r.concat(s(n,h)),d=["R"].concat(p.slice(-2));else if("O"===e)r.pop(),(n=l(i,a,p[1],p[2])).push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(l(i,a,p[1],p[2],p[3])),d=["U"].concat(r[r.length-1].slice(-2));else for(var x=0,b=p.length;x<b;x++)d[x]=p[x];if("O"!==(e=e.toUpperCase()))switch(d[0]){case"Z":i=+o,a=+c;break;case"H":i=d[1];break;case"V":a=d[1];break;case"M":o=d[d.length-2],c=d[d.length-1];break;default:i=d[d.length-2],a=d[d.length-1]}}return r},f=function(t,e,n,r){return[t,e,n,r,n,r]},h=function(t,e,n,r,i,a){var o=1/3,u=2/3;return[o*t+u*n,o*e+u*r,o*i+u*n,o*a+u*r,i,a]},d=function t(e,n,r,i,a,o,u,s,l,c){r===i&&(r+=1);var f,h,d,p,g,v=120*Math.PI/180,m=Math.PI/180*(+a||0),y=[],x=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(c)h=c[0],d=c[1],p=c[2],g=c[3];else{e=(f=x(e,n,-m)).x,n=f.y,s=(f=x(s,l,-m)).x,l=f.y,e===s&&n===l&&(s+=1,l+=1);var b=(e-s)/2,w=(n-l)/2,S=b*b/(r*r)+w*w/(i*i);S>1&&(r*=S=Math.sqrt(S),i*=S);var k=r*r,C=i*i,E=(o===u?-1:1)*Math.sqrt(Math.abs((k*C-k*w*w-C*b*b)/(k*w*w+C*b*b)));p=E*r*w/i+(e+s)/2,g=E*-i*b/r+(n+l)/2,h=Math.asin(((n-g)/i).toFixed(9)),d=Math.asin(((l-g)/i).toFixed(9)),h=e<p?Math.PI-h:h,d=s<p?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),u&&h>d&&(h-=2*Math.PI),!u&&d>h&&(d-=2*Math.PI)}var M=d-h;if(Math.abs(M)>v){var O=d,A=s,_=l;d=h+v*(u&&d>h?1:-1),y=t(s=p+r*Math.cos(d),l=g+i*Math.sin(d),r,i,a,0,u,A,_,[d,O,p,g])}M=d-h;var D=Math.cos(h),T=Math.sin(h),F=Math.cos(d),I=Math.sin(d),P=Math.tan(M/4),j=4/3*r*P,B=4/3*i*P,L=[e,n],R=[e+j*T,n-B*D],Z=[s+j*I,l-B*F],N=[s,l];if(R[0]=2*L[0]-R[0],R[1]=2*L[1]-R[1],c)return[R,Z,N].concat(y);for(var z=[],U=0,H=(y=[R,Z,N].concat(y).join().split(",")).length;U<H;U++)z[U]=U%2?x(y[U-1],y[U],m).y:x(y[U],y[U+1],m).x;return z},p=function(t,e){var n,r=c(t),i=e&&c(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=[],s=[],l="",p="",g=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(d.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(h(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(h(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(f(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(f(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(f(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(f(e.x,e.y,e.X,e.Y))}return t},v=function(t,e){if(t[e].length>7){t[e].shift();for(var a=t[e];a.length;)u[e]="A",i&&(s[e]="A"),t.splice(e++,0,["C"].concat(a.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},m=function(t,e,a,o,u){t&&e&&"M"===t[u][0]&&"M"!==e[u][0]&&(e.splice(u,0,["M",o.x,o.y]),a.bx=0,a.by=0,a.x=t[u][1],a.y=t[u][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var y=0;y<n;y++){r[y]&&(l=r[y][0]),"C"!==l&&(u[y]=l,y&&(p=u[y-1])),r[y]=g(r[y],a,p),"A"!==u[y]&&"C"===l&&(u[y]="C"),v(r,y),i&&(i[y]&&(l=i[y][0]),"C"!==l&&(s[y]=l,y&&(p=s[y-1])),i[y]=g(i[y],o,p),"A"!==s[y]&&"C"===l&&(s[y]="C"),v(i,y)),m(r,i,a,o,y),m(i,r,o,a,y);var x=r[y],b=i&&i[y],w=x.length,S=i&&b.length;a.x=x[w-2],a.y=x[w-1],a.bx=parseFloat(x[w-4])||a.x,a.by=parseFloat(x[w-3])||a.y,o.bx=i&&(parseFloat(b[S-4])||o.x),o.by=i&&(parseFloat(b[S-3])||o.y),o.x=i&&b[S-2],o.y=i&&b[S-1]}return i?[r,i]:r},g=/,?([a-z]),?/gi,v=function(t){return t.join(",").replace(g,"$1")},m=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},y=function(t,e,n,r,i,a,o,u,s){null===s&&(s=1);for(var l=(s=s>1?1:s<0?0:s)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,d=0;d<12;d++){var p=l*c[d]+l,g=m(p,t,n,i,o),v=m(p,e,r,a,u),y=g*g+v*v;h+=f[d]*Math.sqrt(y)}return l*h},x=function(t,e,n,r,i,a,o,u){for(var s,l,c,f,h=[],d=[[],[]],p=0;p<2;++p)if(0===p?(l=6*t-12*n+6*i,s=-3*t+9*n-9*i+3*o,c=3*n-3*t):(l=6*e-12*r+6*a,s=-3*e+9*r-9*a+3*u,c=3*r-3*e),Math.abs(s)<1e-12){if(Math.abs(l)<1e-12)continue;(f=-c/l)>0&&f<1&&h.push(f)}else{var g=l*l-4*c*s,v=Math.sqrt(g);if(!(g<0)){var m=(-l+v)/(2*s);m>0&&m<1&&h.push(m);var y=(-l-v)/(2*s);y>0&&y<1&&h.push(y)}}for(var x,b=h.length,w=b;b--;)x=1-(f=h[b]),d[0][b]=x*x*x*t+3*x*x*f*n+3*x*f*f*i+f*f*f*o,d[1][b]=x*x*x*e+3*x*x*f*r+3*x*f*f*a+f*f*f*u;return d[0][w]=t,d[1][w]=e,d[0][w+1]=o,d[1][w+1]=u,d[0].length=d[1].length=w+2,{min:{x:Math.min.apply(0,d[0]),y:Math.min.apply(0,d[1])},max:{x:Math.max.apply(0,d[0]),y:Math.max.apply(0,d[1])}}},b=function(t,e,n,r,i,a,o,u){if(!(Math.max(t,n)<Math.min(i,o)||Math.min(t,n)>Math.max(i,o)||Math.max(e,r)<Math.min(a,u)||Math.min(e,r)>Math.max(a,u))){var s=(t-n)*(a-u)-(e-r)*(i-o);if(s){var l=((t*r-e*n)*(i-o)-(t-n)*(i*u-a*o))/s,c=((t*r-e*n)*(a-u)-(e-r)*(i*u-a*o))/s,f=+l.toFixed(2),h=+c.toFixed(2);if(!(f<+Math.min(t,n).toFixed(2)||f>+Math.max(t,n).toFixed(2)||f<+Math.min(i,o).toFixed(2)||f>+Math.max(i,o).toFixed(2)||h<+Math.min(e,r).toFixed(2)||h>+Math.max(e,r).toFixed(2)||h<+Math.min(a,u).toFixed(2)||h>+Math.max(a,u).toFixed(2)))return{x:l,y:c}}}},w=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},S=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return a.parsePathArray=v,a},k=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:S(t,e,n,r),vb:[t,e,n,r].join(" ")}},C=function(t,e,n,i,a,o,u,s){(0,r.kJ)(t)||(t=[t,e,n,i,a,o,u,s]);var l=x.apply(null,t);return k(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},E=function(t,e,n,r,i,a,o,u,s){var l=1-s,c=Math.pow(l,3),f=Math.pow(l,2),h=s*s,d=h*s,p=t+2*s*(n-t)+h*(i-2*n+t),g=e+2*s*(r-e)+h*(a-2*r+e),v=n+2*s*(i-n)+h*(o-2*i+n),m=r+2*s*(a-r)+h*(u-2*a+r);return{x:c*t+3*f*s*n+3*l*s*s*i+d*o,y:c*e+3*f*s*r+3*l*s*s*a+d*u,m:{x:p,y:g},n:{x:v,y:m},start:{x:l*t+s*n,y:l*e+s*r},end:{x:l*i+s*o,y:l*a+s*u},alpha:90-180*Math.atan2(p-v,g-m)/Math.PI}},M=function(t,e,n){if(!function(t,e){return t=k(t),e=k(e),w(e,t.x,t.y)||w(e,t.x2,t.y)||w(e,t.x,t.y2)||w(e,t.x2,t.y2)||w(t,e.x,e.y)||w(t,e.x2,e.y)||w(t,e.x,e.y2)||w(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(C(t),C(e)))return n?0:[];for(var r=~~(y.apply(0,t)/8),i=~~(y.apply(0,e)/8),a=[],o=[],u={},s=n?0:[],l=0;l<r+1;l++){var c=E.apply(0,t.concat(l/r));a.push({x:c.x,y:c.y,t:l/r})}for(l=0;l<i+1;l++){c=E.apply(0,e.concat(l/i));o.push({x:c.x,y:c.y,t:l/i})}for(l=0;l<r;l++)for(var f=0;f<i;f++){var h=a[l],d=a[l+1],p=o[f],g=o[f+1],v=Math.abs(d.x-h.x)<.001?"y":"x",m=Math.abs(g.x-p.x)<.001?"y":"x",x=b(h.x,h.y,d.x,d.y,p.x,p.y,g.x,g.y);if(x){if(u[x.x.toFixed(4)]===x.y.toFixed(4))continue;u[x.x.toFixed(4)]=x.y.toFixed(4);var S=h.t+Math.abs((x[v]-h[v])/(d[v]-h[v]))*(d.t-h.t),M=p.t+Math.abs((x[m]-p[m])/(g[m]-p[m]))*(g.t-p.t);S>=0&&S<=1&&M>=0&&M<=1&&(n?s+=1:s.push({x:x.x,y:x.y,t1:S,t2:M}))}}return s},O=function(t,e){return function(t,e,n){var r,i,a,o,u,s,l,c,f,h;t=p(t),e=p(e);for(var d=n?0:[],g=0,v=t.length;g<v;g++){var m=t[g];if("M"===m[0])r=u=m[1],i=s=m[2];else{"C"===m[0]?(f=[r,i].concat(m.slice(1)),r=f[6],i=f[7]):(f=[r,i,r,i,u,s,u,s],r=u,i=s);for(var y=0,x=e.length;y<x;y++){var b=e[y];if("M"===b[0])a=l=b[1],o=c=b[2];else{"C"===b[0]?(h=[a,o].concat(b.slice(1)),a=h[6],o=h[7]):(h=[a,o,a,o,l,c,l,c],a=l,o=c);var w=M(f,h,n);if(n)d+=w;else{for(var S=0,k=w.length;S<k;S++)w[S].segment1=g,w[S].segment2=y,w[S].bez1=f,w[S].bez2=h;d=d.concat(w)}}}}}return d}(t,e)};function A(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var a=[],o=0;o<e.length-1;o++)0===o&&n.push(e[0]),o===e.length-2&&r.push(e[o+1]),a[o]=[(1-i)*e[o][0]+i*e[o+1][0],(1-i)*e[o][1]+i*e[o+1][1]];t(a,i)}}(t,e),{left:n,right:r.reverse()}}var _=function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,n){var r=[[t[1],t[2]]];n=n||2;var i=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/n,u=0;u<n-1;u++){var s=A(a,o/(1-o*u));i.push(s.left),a=s.right}return i.push(a),i.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])}))}(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var a=0;a<=n-1;a++)r.push(i)}return r},D=function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,a=[];if(1===t.length&&"M"===t[0][0]){for(var o=0;o<r-n;o++)t.push(t[0]);return t}for(o=0;o<r;o++){var u=Math.floor(i*o);a[u]=(a[u]||0)+1}var s=a.reduce((function(e,r,i){return i===n?e.concat(t[n]):e.concat(_(t[i],t[i+1],r))}),[]);return s.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||s.push("Z"),s},T=function(t,e){if(t.length!==e.length)return!1;var n=!0;return(0,r.S6)(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n};function F(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var I=function(t,e){var n=function(t,e){var n,r,i=t.length,a=e.length,o=0;if(0===i||0===a)return null;for(var u=[],s=0;s<=i;s++)u[s]=[],u[s][0]={min:s};for(var l=0;l<=a;l++)u[0][l]={min:l};for(s=1;s<=i;s++)for(n=t[s-1],l=1;l<=a;l++){r=e[l-1],o=T(n,r)?0:1;var c=u[s-1][l].min+1,f=u[s][l-1].min+1,h=u[s-1][l-1].min+o;u[s][l]=F(c,f,h)}return u}(t,e),r=t.length,i=e.length,a=[],o=1,u=1;if(n[r][i].min!==r){for(var s=1;s<=r;s++){var l=n[s][s].min;u=s;for(var c=o;c<=i;c++)n[s][c].min<l&&(l=n[s][c].min,u=c);o=u,n[s][o].type&&a.push({index:s-1,type:n[s][o].type})}for(s=a.length-1;s>=0;s--)o=a[s].index,"add"===a[s].type?t.splice(o,0,[].concat(t[o])):t.splice(o,1)}var f=i-(r=t.length);if(r<i)for(s=0;s<f;s++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function P(t,e,n){for(var r,i=[].concat(t),a=1/(n+1),o=j(e)[0],u=1;u<=n;u++)a*=u,0===(r=Math.floor(t.length*a))?i.unshift([o[0]*a+t[r][0]*(1-a),o[1]*a+t[r][1]*(1-a)]):i.splice(r,0,[o[0]*a+t[r][0]*(1-a),o[1]*a+t[r][1]*(1-a)]);return i}function j(t){var e=[];switch(t[0]){case"M":case"L":case"T":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var B=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=j(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=P(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=P(n,t[r-1],2)}t[r]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=P(n,t[r-1],1)}t[r]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[r]=e[r]}return t}},88482:function(t,e,n){"use strict";n.d(e,{$O:function(){return u},FE:function(){return a},mY:function(){return o}});var r=n(55013),i=n(84822);function a(t,e,n){var i=1;if((0,r.HD)(t)&&(i=t.split("\n").length),i>1){var a=function(t,e){return e?e-t:.14*t}(e,n);return e*i+a*(i-1)}return e}function o(t,e){var n=(0,i.L)(),a=0;if((0,r.kK)(t)||""===t)return a;if(n.save(),n.font=e,(0,r.HD)(t)&&t.includes("\n")){var o=t.split("\n");(0,r.S6)(o,(function(t){var e=n.measureText(t).width;a<e&&(a=e)}))}else a=n.measureText(t).width;return n.restore(),a}function u(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}},55013:function(t,e,n){"use strict";n.d(e,{As:function(){return i},CD:function(){return r.CD},HD:function(){return r.HD},Kn:function(){return r.Kn},S6:function(){return r.S6},UY:function(){return o},jC:function(){return r.jC},jU:function(){return a},kK:function(){return r.UM},mf:function(){return r.mf},pP:function(){return u}});var r=n(48238);function i(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var a="undefined"!=typeof window&&void 0!==window.document;function o(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function u(t){return t.cfg.visible&&t.cfg.capture}},58609:function(t,e,n){"use strict";n.d(e,{wN:function(){return T},Ll:function(){return C},x1:function(){return f},aH:function(){return L},lD:function(){return y},Zr:function(){return r}});var r={};n.r(r),n.d(r,{distance:function(){return a},getBBoxByArray:function(){return u},getBBoxRange:function(){return s},isNumberEqual:function(){return o},piMod:function(){return l}});var i=n(48238);function a(t,e,n,r){var i=t-n,a=e-r;return Math.sqrt(i*i+a*a)}function o(t,e){return Math.abs(t-e)<.001}function u(t,e){var n=(0,i.VV)(t),r=(0,i.VV)(e);return{x:n,y:r,width:(0,i.Fp)(t)-n,height:(0,i.Fp)(e)-r}}function s(t,e,n,r){return{minX:(0,i.VV)([t,n]),maxX:(0,i.Fp)([t,n]),minY:(0,i.VV)([e,r]),maxY:(0,i.Fp)([e,r])}}function l(t){return(t+2*Math.PI)%(2*Math.PI)}var c=n(17647),f={box:function(t,e,n,r){return u([t,n],[e,r])},length:function(t,e,n,r){return a(t,e,n,r)},pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var u=(n-t)*(i-t)+(r-e)*(o-e);return u<0?a(t,e,i,o):u>(n-t)*(n-t)+(r-e)*(r-e)?a(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,a){var o=[n-t,r-e];if(c.I6(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-e)*(a-e));var u=[-o[1],o[0]];c.Fv(u,u);var s=[i-t,a-e];return Math.abs(c.AK(s,u))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function h(t,e,n,r,i,o){var u,s=1/0,l=[n,r],c=20;o&&o>200&&(c=o/10);for(var f=1/c,h=f/10,d=0;d<=c;d++){var p=d*f,g=[i.apply(null,t.concat([p])),i.apply(null,e.concat([p]))];(x=a(l[0],l[1],g[0],g[1]))<s&&(u=p,s=x)}if(0===u)return{x:t[0],y:e[0]};if(1===u){var v=t.length;return{x:t[v-1],y:e[v-1]}}s=1/0;for(d=0;d<32&&!(h<1e-4);d++){var m=u-h,y=u+h,x=(g=[i.apply(null,t.concat([m])),i.apply(null,e.concat([m]))],a(l[0],l[1],g[0],g[1]));if(m>=0&&x<s)u=m,s=x;else{var b=[i.apply(null,t.concat([y])),i.apply(null,e.concat([y]))],w=a(l[0],l[1],b[0],b[1]);y<=1&&w<s?(u=y,s=w):h*=.5}}return{x:i.apply(null,t.concat([u])),y:i.apply(null,e.concat([u]))}}function d(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function p(t,e,n){var r=t+n-2*e;if(o(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function g(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function v(t,e,n,r,i,a,o){var u=d(t,n,i,o),s=d(e,r,a,o),l=f.pointAt(t,e,n,r,o),c=f.pointAt(n,r,i,a,o);return[[t,e,l.x,l.y,u,s],[u,s,c.x,c.y,i,a]]}function m(t,e,n,r,i,o,u){if(0===u)return(a(t,e,n,r)+a(n,r,i,o)+a(t,e,i,o))/2;var s=v(t,e,n,r,i,o,.5),l=s[0],c=s[1];return l.push(u-1),c.push(u-1),m.apply(null,l)+m.apply(null,c)}var y={box:function(t,e,n,r,i,a){var o=p(t,n,i)[0],s=p(e,r,a)[0],l=[t,i],c=[e,a];return void 0!==o&&l.push(d(t,n,i,o)),void 0!==s&&c.push(d(e,r,a,s)),u(l,c)},length:function(t,e,n,r,i,a){return m(t,e,n,r,i,a,3)},nearestPoint:function(t,e,n,r,i,a,o,u){return h([t,n,i],[e,r,a],o,u,d)},pointDistance:function(t,e,n,r,i,o,u,s){var l=this.nearestPoint(t,e,n,r,i,o,u,s);return a(l.x,l.y,u,s)},interpolationAt:d,pointAt:function(t,e,n,r,i,a,o){return{x:d(t,n,i,o),y:d(e,r,a,o)}},divide:function(t,e,n,r,i,a,o){return v(t,e,n,r,i,a,o)},tangentAngle:function(t,e,n,r,i,a,o){var u=g(t,n,i,o),s=g(e,r,a,o);return l(Math.atan2(s,u))}};function x(t,e,n,r,i){var a=1-i;return a*a*a*t+3*e*i*a*a+3*n*i*i*a+r*i*i*i}function b(t,e,n,r,i){var a=1-i;return 3*(a*a*(e-t)+2*a*i*(n-e)+i*i*(r-n))}function w(t,e,n,r){var i,a,u,s=-3*t+9*e-9*n+3*r,l=6*t-12*e+6*n,c=3*e-3*t,f=[];if(o(s,0))o(l,0)||(i=-c/l)>=0&&i<=1&&f.push(i);else{var h=l*l-4*s*c;o(h,0)?f.push(-l/(2*s)):h>0&&(a=(-l-(u=Math.sqrt(h)))/(2*s),(i=(-l+u)/(2*s))>=0&&i<=1&&f.push(i),a>=0&&a<=1&&f.push(a))}return f}function S(t,e,n,r,i,a,o,u,s){var l=x(t,n,i,o,s),c=x(e,r,a,u,s),h=f.pointAt(t,e,n,r,s),d=f.pointAt(n,r,i,a,s),p=f.pointAt(i,a,o,u,s),g=f.pointAt(h.x,h.y,d.x,d.y,s),v=f.pointAt(d.x,d.y,p.x,p.y,s);return[[t,e,h.x,h.y,g.x,g.y,l,c],[l,c,v.x,v.y,p.x,p.y,o,u]]}function k(t,e,n,r,i,o,u,s,l){if(0===l)return function(t,e){for(var n=0,r=t.length,i=0;i<r;i++)n+=a(t[i],e[i],t[(i+1)%r],e[(i+1)%r]);return n/2}([t,n,i,u],[e,r,o,s]);var c=S(t,e,n,r,i,o,u,s,.5),f=c[0],h=c[1];return f.push(l-1),h.push(l-1),k.apply(null,f)+k.apply(null,h)}var C={extrema:w,box:function(t,e,n,r,i,a,o,s){for(var l=[t,o],c=[e,s],f=w(t,n,i,o),h=w(e,r,a,s),d=0;d<f.length;d++)l.push(x(t,n,i,o,f[d]));for(d=0;d<h.length;d++)c.push(x(e,r,a,s,h[d]));return u(l,c)},length:function(t,e,n,r,i,a,o,u){return k(t,e,n,r,i,a,o,u,3)},nearestPoint:function(t,e,n,r,i,a,o,u,s,l,c){return h([t,n,i,o],[e,r,a,u],s,l,x,c)},pointDistance:function(t,e,n,r,i,o,u,s,l,c,f){var h=this.nearestPoint(t,e,n,r,i,o,u,s,l,c,f);return a(h.x,h.y,l,c)},interpolationAt:x,pointAt:function(t,e,n,r,i,a,o,u,s){return{x:x(t,n,i,o,s),y:x(e,r,a,u,s)}},divide:function(t,e,n,r,i,a,o,u,s){return S(t,e,n,r,i,a,o,u,s)},tangentAngle:function(t,e,n,r,i,a,o,u,s){var c=b(t,n,i,o,s),f=b(e,r,a,u,s);return l(Math.atan2(f,c))}};n(25438);function E(t,e){var n=Math.abs(t);return e>0?n:-1*n}var M=function(t,e,n,r,i,a){var o=n,u=r;if(0===o||0===u)return{x:t,y:e};for(var s,l,c=i-t,f=a-e,h=Math.abs(c),d=Math.abs(f),p=o*o,g=u*u,v=Math.PI/4,m=0;m<4;m++){s=o*Math.cos(v),l=u*Math.sin(v);var y=(p-g)*Math.pow(Math.cos(v),3)/o,x=(g-p)*Math.pow(Math.sin(v),3)/u,b=s-y,w=l-x,S=h-y,k=d-x,C=Math.hypot(w,b),M=Math.hypot(k,S);v+=C*Math.asin((b*k-w*S)/(C*M))/Math.sqrt(p+g-s*s-l*l),v=Math.min(Math.PI/2,Math.max(0,v))}return{x:t+E(s,c),y:e+E(l,f)}};function O(t,e,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+t}function A(t,e,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+e}function _(t,e,n){return{x:t*Math.cos(n),y:e*Math.sin(n)}}function D(t,e,n){var r=Math.cos(n),i=Math.sin(n);return[t*r-e*i,t*i+e*r]}var T={box:function(t,e,n,r,i,a,o){for(var u=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),s=1/0,l=-1/0,c=[a,o],f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var h=u+f;a<o?a<h&&h<o&&c.push(h):o<h&&h<a&&c.push(h)}for(f=0;f<c.length;f++){var d=O(t,0,n,r,i,c[f]);d<s&&(s=d),d>l&&(l=d)}var p=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),g=1/0,v=-1/0,m=[a,o];for(f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var y=p+f;a<o?a<y&&y<o&&m.push(y):o<y&&y<a&&m.push(y)}for(f=0;f<m.length;f++){var x=A(0,e,n,r,i,m[f]);x<g&&(g=x),x>v&&(v=x)}return{x:s,y:g,width:l-s,height:v-g}},length:function(t,e,n,r,i,a,o){},nearestPoint:function(t,e,n,r,i,a,o,u,s){var l=D(u-t,s-e,-i),c=l[0],f=l[1],h=M(0,0,n,r,c,f),d=function(t,e,n,r){return(Math.atan2(r*t,n*e)+2*Math.PI)%(2*Math.PI)}(n,r,h.x,h.y);d<a?h=_(n,r,a):d>o&&(h=_(n,r,o));var p=D(h.x,h.y,i);return{x:p[0]+t,y:p[1]+e}},pointDistance:function(t,e,n,r,i,o,u,s,l){var c=this.nearestPoint(t,e,n,r,s,l);return a(c.x,c.y,s,l)},pointAt:function(t,e,n,r,i,a,o,u){var s=(o-a)*u+a;return{x:O(t,0,n,r,i,s),y:A(0,e,n,r,i,s)}},tangentAngle:function(t,e,n,r,i,a,o,u){var s=(o-a)*u+a,c=function(t,e,n,r,i,a,o,u){return-1*n*Math.cos(i)*Math.sin(u)-r*Math.sin(i)*Math.cos(u)}(0,0,n,r,i,0,0,s),f=function(t,e,n,r,i,a,o,u){return-1*n*Math.sin(i)*Math.sin(u)+r*Math.cos(i)*Math.cos(u)}(0,0,n,r,i,0,0,s);return l(Math.atan2(f,c))}};function F(t){for(var e=0,n=[],r=0;r<t.length-1;r++){var i=t[r],o=t[r+1],u=a(i[0],i[1],o[0],o[1]),s={from:i,to:o,length:u};n.push(s),e+=u}return{segments:n,totalLength:e}}function I(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=a(r[0],r[1],i[0],i[1])}return e}function P(t,e){if(e>1||e<0||t.length<2)return null;var n=F(t),r=n.segments,i=n.totalLength;if(0===i)return{x:t[0][0],y:t[0][1]};for(var a=0,o=null,u=0;u<r.length;u++){var s=r[u],l=s.from,c=s.to,h=s.length/i;if(e>=a&&e<=a+h){var d=(e-a)/h;o=f.pointAt(l[0],l[1],c[0],c[1],d);break}a+=h}return o}function j(t,e){if(e>1||e<0||t.length<2)return 0;for(var n=F(t),r=n.segments,i=n.totalLength,a=0,o=0,u=0;u<r.length;u++){var s=r[u],l=s.from,c=s.to,f=s.length/i;if(e>=a&&e<=a+f){o=Math.atan2(c[1]-l[1],c[0]-l[0]);break}a+=f}return o}function B(t,e,n){for(var r=1/0,i=0;i<t.length-1;i++){var a=t[i],o=t[i+1],u=f.pointDistance(a[0],a[1],o[0],o[1],e,n);u<r&&(r=u)}return r}var L={box:function(t){for(var e=[],n=[],r=0;r<t.length;r++){var i=t[r];e.push(i[0]),n.push(i[1])}return u(e,n)},length:function(t){return I(t)},pointAt:function(t,e){return P(t,e)},pointDistance:function(t,e,n){return B(t,e,n)},tangentAngle:function(t,e){return j(t,e)}}},12579:function(t,e,n){"use strict";n.d(e,{Dg:function(){return l},lh:function(){return u},m$:function(){return a},vs:function(){return s},zu:function(){return o}});var r=n(20593),i=n(17647);function a(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.vc(i,n),r.Jp(t,i,e)}function o(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.Us(i,n),r.Jp(t,i,e)}function u(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.xJ(i,n),r.Jp(t,i,e)}function s(t,e){for(var n,i,s,l=t?[].concat(t):[1,0,0,0,1,0,0,0,1],c=0,f=e.length;c<f;c++){var h=e[c];switch(h[0]){case"t":a(l,l,[h[1],h[2]]);break;case"s":u(l,l,[h[1],h[2]]);break;case"r":o(l,l,h[1]);break;case"m":n=l,i=l,s=h[1],r.Jp(n,s,i)}}return l}function l(t,e,n){var r=i.EU(t,e),a=function(t,e){return t[0]*e[1]-e[0]*t[1]}(t,e)>=0;return n?a?2*Math.PI-r:r:a?r:2*Math.PI-r}},85687:function(t,e,n){"use strict";n.d(e,{e9:function(){return s},Wq:function(){return D},tr:function(){return h},wb:function(){return g},zx:function(){return S}});var r=n(48238),i=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi;var o=function(t){var e=t||[];return(0,r.kJ)(e)?e:(0,r.HD)(e)?(e=e.match(i),(0,r.S6)(e,(function(t,n){if((t=t.match(a))[0].length>1){var i=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=i}(0,r.S6)(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0},u=n(17647);var s=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!e,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);var s,l,c,f=function(t,e,n,r){var i,a,o,s,l,c,f,h=[],d=!!r;if(d){o=r[0],s=r[1];for(var p=0,g=t.length;p<g;p+=1){var v=t[p];o=u.VV([0,0],o,v),s=u.Fp([0,0],s,v)}}p=0;for(var m=t.length;p<m;p+=1)if(v=t[p],0!==p||n)if(p!==m-1||n){i=t[[p?p-1:m-1,p-1][n?0:1]],a=t[n?(p+1)%m:p+1];var y=[0,0];y=u.lu(y,a,i),y=u.bA(y,y,e);var x=u.TE(v,i),b=u.TE(v,a),w=x+b;0!==w&&(x/=w,b/=w);var S=u.bA([0,0],y,-x),k=u.bA([0,0],y,b);c=u.IH([0,0],v,S),l=u.IH([0,0],v,k),l=u.VV([0,0],l,u.Fp([0,0],a,v)),l=u.Fp([0,0],l,u.VV([0,0],a,v)),S=u.lu([0,0],l,v),S=u.bA([0,0],S,-x/b),c=u.IH([0,0],v,S),c=u.VV([0,0],c,u.Fp([0,0],i,v)),c=u.Fp([0,0],c,u.VV([0,0],i,v)),k=u.lu([0,0],v,c),k=u.bA([0,0],k,b/x),l=u.IH([0,0],v,k),d&&(c=u.Fp([0,0],c,o),c=u.VV([0,0],c,s),l=u.Fp([0,0],l,o),l=u.VV([0,0],l,s)),h.push(f),h.push(c),f=l}else c=v,h.push(f),h.push(c);else f=v;return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,d=[];for(a=0;a<h-1;a+=1)s=f[2*a],l=f[2*a+1],c=i[a+1],d.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=f[h],l=f[h+1],c=i[0],d.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),d};var l="\t\n\v\f\r   ᠎             　\u2028\u2029",c=new RegExp("([a-z])["+l+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+l+"]*,?["+l+"]*)+)","ig"),f=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+l+"]*,?["+l+"]*","ig");function h(t){if(!t)return null;if((0,r.kJ)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(c,(function(t,r,i){var a=[],o=r.toLowerCase();if(i.replace(f,(function(t,e){e&&a.push(+e)})),"m"===o&&a.length>2&&(n.push([r].concat(a.splice(0,2))),o="l",r="m"===r?"l":"L"),"o"===o&&1===a.length&&n.push([r,a[0]]),"r"===o)n.push([r].concat(a));else for(;a.length>=e[o]&&(n.push([r].concat(a.splice(0,e[o]))),e[o]););return""})),n}var d=/[a-z]/;function p(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function g(t){var e=h(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,r=0;r<e.length;r++){var i=e[r][0];if(d.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return e;var a=[],o=0,u=0,s=0,l=0,c=0,f=e[0];"M"!==f[0]&&"m"!==f[0]||(s=o=+f[1],l=u=+f[2],c++,a[0]=["M",o,u]);r=c;for(var g=e.length;r<g;r++){var v=e[r],m=a[r-1],y=[],x=(i=v[0]).toUpperCase();if(i!==x)switch(y[0]=x,x){case"A":y[1]=v[1],y[2]=v[2],y[3]=v[3],y[4]=v[4],y[5]=v[5],y[6]=+v[6]+o,y[7]=+v[7]+u;break;case"V":y[1]=+v[1]+u;break;case"H":y[1]=+v[1]+o;break;case"M":s=+v[1]+o,l=+v[2]+u,y[1]=s,y[2]=l;break;default:for(var b=1,w=v.length;b<w;b++)y[b]=+v[b]+(b%2?o:u)}else y=e[r];switch(x){case"Z":o=+s,u=+l;break;case"H":y=["L",o=y[1],u];break;case"V":y=["L",o,u=y[1]];break;case"T":o=y[1],u=y[2];var S=p([m[1],m[2]],[m[3],m[4]]);y=["Q",S[0],S[1],o,u];break;case"S":o=y[y.length-2],u=y[y.length-1];var k=m.length,C=p([m[k-4],m[k-3]],[m[k-2],m[k-1]]);y=["C",C[0],C[1],y[1],y[2],o,u];break;case"M":s=y[y.length-2],l=y[y.length-1];break;default:o=y[y.length-2],u=y[y.length-1]}a.push(y)}return a}Math.PI;function v(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function m(t,e){return v(t)*v(e)?(t[0]*e[0]+t[1]*e[1])/(v(t)*v(e)):1}function y(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(m(t,e))}function x(t,e){return t[0]===e[0]&&t[1]===e[1]}function b(t,e){var n=e[1],i=e[2],a=(0,r.wQ)((0,r.c$)(e[3]),2*Math.PI),o=e[4],u=e[5],s=t[0],l=t[1],c=e[6],f=e[7],h=Math.cos(a)*(s-c)/2+Math.sin(a)*(l-f)/2,d=-1*Math.sin(a)*(s-c)/2+Math.cos(a)*(l-f)/2,p=h*h/(n*n)+d*d/(i*i);p>1&&(n*=Math.sqrt(p),i*=Math.sqrt(p));var g=n*n*(d*d)+i*i*(h*h),v=g?Math.sqrt((n*n*(i*i)-g)/g):1;o===u&&(v*=-1),isNaN(v)&&(v=0);var b=i?v*n*d/i:0,w=n?v*-i*h/n:0,S=(s+c)/2+Math.cos(a)*b-Math.sin(a)*w,k=(l+f)/2+Math.sin(a)*b+Math.cos(a)*w,C=[(h-b)/n,(d-w)/i],E=[(-1*h-b)/n,(-1*d-w)/i],M=y([1,0],C),O=y(C,E);return m(C,E)<=-1&&(O=Math.PI),m(C,E)>=1&&(O=0),0===u&&O>0&&(O-=2*Math.PI),1===u&&O<0&&(O+=2*Math.PI),{cx:S,cy:k,rx:x(t,[c,f])?0:n,ry:x(t,[c,f])?0:i,startAngle:M,endAngle:M+O,xRotation:a,arcFlag:o,sweepFlag:u}}function w(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function S(t){for(var e=[],n=null,r=null,i=null,a=0,u=(t=o(t)).length,s=0;s<u;s++){var l=t[s];r=t[s+1];var c=l[0],f={command:c,prePoint:n,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var h=b(n,l);f.arcParams=h}if("Z"===c)n=i,r=t[a+1];else{var d=l.length;n=[l[d-2],l[d-1]]}r&&"Z"===r[0]&&(r=t[a],e[a]&&(e[a].prePoint=n)),f.currentPoint=n,e[a]&&x(n,e[a].currentPoint)&&(e[a].prePoint=f.prePoint);var p=r?[r[r.length-2],r[r.length-1]]:null;f.nextPoint=p;var g=f.prePoint;if(["L","H","V"].includes(c))f.startTangent=[g[0]-n[0],g[1]-n[1]],f.endTangent=[n[0]-g[0],n[1]-g[1]];else if("Q"===c){var v=[l[1],l[2]];f.startTangent=[g[0]-v[0],g[1]-v[1]],f.endTangent=[n[0]-v[0],n[1]-v[1]]}else if("T"===c){v=w((S=e[s-1]).currentPoint,g);"Q"===S.command?(f.command="Q",f.startTangent=[g[0]-v[0],g[1]-v[1]],f.endTangent=[n[0]-v[0],n[1]-v[1]]):(f.command="TL",f.startTangent=[g[0]-n[0],g[1]-n[1]],f.endTangent=[n[0]-g[0],n[1]-g[1]])}else if("C"===c){var m=[l[1],l[2]],y=[l[3],l[4]];f.startTangent=[g[0]-m[0],g[1]-m[1]],f.endTangent=[n[0]-y[0],n[1]-y[1]],0===f.startTangent[0]&&0===f.startTangent[1]&&(f.startTangent=[m[0]-y[0],m[1]-y[1]]),0===f.endTangent[0]&&0===f.endTangent[1]&&(f.endTangent=[y[0]-m[0],y[1]-m[1]])}else if("S"===c){var S;m=w((S=e[s-1]).currentPoint,g),y=[l[1],l[2]];"C"===S.command?(f.command="C",f.startTangent=[g[0]-m[0],g[1]-m[1]],f.endTangent=[n[0]-y[0],n[1]-y[1]]):(f.command="SQ",f.startTangent=[g[0]-y[0],g[1]-y[1]],f.endTangent=[n[0]-y[0],n[1]-y[1]])}else if("A"===c){var k=.001,C=f.arcParams||{},E=C.cx,M=void 0===E?0:E,O=C.cy,A=void 0===O?0:O,_=C.rx,D=void 0===_?0:_,T=C.ry,F=void 0===T?0:T,I=C.sweepFlag,P=void 0===I?0:I,j=C.startAngle,B=void 0===j?0:j,L=C.endAngle,R=void 0===L?0:L;0===P&&(k*=-1);var Z=D*Math.cos(B-k)+M,N=F*Math.sin(B-k)+A;f.startTangent=[Z-i[0],N-i[1]];var z=D*Math.cos(B+R+k)+M,U=F*Math.sin(B+R-k)+A;f.endTangent=[g[0]-z,g[1]-U]}e.push(f)}return e}function k(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function C(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function E(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],u=t[(a+1)%i];if(C(o,u,[e,n]))return!0;k(o[1]-n)>0!=k(u[1]-n)>0&&k(e-(n-o[1])*(o[0]-u[0])/(o[1]-u[1])-o[0])<0&&(r=!r)}return r}var M=function(t,e,n){return t>=e&&t<=n};function O(t){for(var e=[],n=t.length,r=0;r<n-1;r++){var i=t[r],a=t[r+1];e.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=t[0],u=t[n-1];e.push({from:{x:u[0],y:u[1]},to:{x:o[0],y:o[1]}})}return e}function A(t,e){var n=!1;return(0,r.S6)(t,(function(t){if(function(t,e,n,r){var i=n.x-t.x,a=n.y-t.y,o=e.x-t.x,u=e.y-t.y,s=r.x-n.x,l=r.y-n.y,c=o*l-u*s,f=null;if(c*c>.001*(o*o+u*u)*(s*s+l*l)){var h=(i*l-a*s)/c,d=(i*u-a*o)/c;M(h,0,1)&&M(d,0,1)&&(f={x:t.x+h*o,y:t.y+h*u})}return f}(t.from,t.to,e.from,e.to))return n=!0,!1})),n}function _(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function D(t,e){if(t.length<2||e.length<2)return!1;var n,i,a=_(t),o=_(e);if(n=a,(i=o).minX>n.maxX||i.maxX<n.minX||i.minY>n.maxY||i.maxY<n.minY)return!1;var u=!1;if((0,r.S6)(e,(function(e){if(E(t,e[0],e[1]))return u=!0,!1})),u)return!0;if((0,r.S6)(t,(function(t){if(E(e,t[0],t[1]))return u=!0,!1})),u)return!0;var s=O(t),l=O(e),c=!1;return(0,r.S6)(l,(function(t){if(A(s,t))return c=!0,!1})),c}},48238:function(t,e,n){"use strict";n.d(e,{Ct:function(){return Wt},f0:function(){return At},uZ:function(){return U},VS:function(){return pt},d9:function(){return gt},FX:function(){return i},Ds:function(){return vt},b$:function(){return xt},e5:function(){return o},S6:function(){return d},yW:function(){return B},hX:function(){return a},sE:function(){return y},cx:function(){return x},Wx:function(){return b},ri:function(){return H},xH:function(){return w},U5:function(){return J},U2:function(){return _t},Lo:function(){return Ht},rx:function(){return C},ru:function(){return z},vM:function(){return Z},Ms:function(){return N},wH:function(){return K},YM:function(){return P},q9:function(){return i},cq:function(){return bt},kJ:function(){return f},jn:function(){return ot},J_:function(){return ut},kK:function(){return ht},xb:function(){return St},Xy:function(){return kt},mf:function(){return l},BD:function(){return g},UM:function(){return c},Ft:function(){return st},hj:function(){return W},vQ:function(){return V},Kn:function(){return h},PO:function(){return m},HD:function(){return D},P9:function(){return s},o8:function(){return ft},XP:function(){return p},Z$:function(){return j},vl:function(){return et},UI:function(){return Ct},Q8:function(){return Mt},Fp:function(){return S},UT:function(){return G},HP:function(){return mt},VV:function(){return k},F:function(){return X},CD:function(){return At},wQ:function(){return Y},ZT:function(){return Rt},CE:function(){return It},ei:function(){return Ft},u4:function(){return A},Od:function(){return _},U7:function(){return dt},t8:function(){return Dt},dp:function(){return Zt},G:function(){return L},MR:function(){return T},ng:function(){return nt},P2:function(){return Pt},qo:function(){return jt},c$:function(){return $},BB:function(){return tt},jj:function(){return F},EL:function(){return Lt},jC:function(){return rt},VO:function(){return Q},I:function(){return I}});var r=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},i=function(t,e){return!!r(t)&&t.indexOf(e)>-1},a=function(t,e){if(!r(t))return t;for(var n=[],i=0;i<t.length;i++){var a=t[i];e(a,i)&&n.push(a)}return n},o=function(t,e){return void 0===e&&(e=[]),a(t,(function(t){return!i(e,t)}))},u={}.toString,s=function(t,e){return u.call(t)==="[object "+e+"]"},l=function(t){return s(t,"Function")},c=function(t){return null==t},f=function(t){return Array.isArray?Array.isArray(t):s(t,"Array")},h=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};var d=function(t,e){if(t)if(f(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(h(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break},p=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return d(t,(function(n,r){l(t)&&"prototype"===r||e.push(r)})),e};var g=function(t,e){var n=p(e),r=n.length;if(c(t))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(e[a]!==t[a]||!(a in t))return!1}return!0},v=function(t){return"object"==typeof t&&null!==t},m=function(t){if(!v(t)||!s(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};var y=function(t,e){if(!f(t))return null;var n;if(l(e)&&(n=e),m(e)&&(n=function(t){return g(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null};var x=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1},b=function(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r][e];if(!c(i)){n=f(i)?i[0]:i;break}}return n},w=function(t){if(!f(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},S=function(t){if(f(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},k=function(t){if(f(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},C=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(f(t[0])){for(var n=[],r=0;r<t.length;r++)n=n.concat(t[r]);e=n}var i=S(e);return{min:k(e),max:i}},E=Array.prototype,M=(E.splice,E.indexOf,Array.prototype.splice),O=function(t,e){if(!r(t))return[];for(var n=t?e.length:0,i=n-1;n--;){var a=void 0,o=e[n];n!==i&&o===a||(a=o,M.call(t,o,1))}return t},A=function(t,e,n){if(!f(t)&&!m(t))return t;var r=n;return d(t,(function(t,n){r=e(r,t,n)})),r},_=function(t,e){var n=[];if(!r(t))return n;for(var i=-1,a=[],o=t.length;++i<o;){var u=t[i];e(u,i,t)&&(n.push(u),a.push(i))}return O(t,a),n},D=function(t){return s(t,"String")};var T=function(t,e){var n;if(l(e))n=function(t,n){return e(t)-e(n)};else{var r=[];D(e)?r.push(e):f(e)&&(r=e),n=function(t,e){for(var n=0;n<r.length;n+=1){var i=r[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t};function F(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var a=t[r];e.has(a)||(n.push(a),e.set(a,!0))}return n}var I=function(t,e){for(var n=[],r={},i=0;i<t.length;i++){var a=t[i][e];if(!c(a)){f(a)||(a=[a]);for(var o=0;o<a.length;o++){var u=a[o];r[u]||(n.push(u),r[u]=!0)}}}return n};function P(t){if(r(t))return t[0]}function j(t){if(r(t)){return t[t.length-1]}}var B=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0},L=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1},R=Object.prototype.hasOwnProperty;var Z=function(t,e){if(!e||!f(t))return{};for(var n,r={},i=l(e)?e:function(t){return t[e]},a=0;a<t.length;a++){var o=t[a];n=i(o),R.call(r,n)?r[n].push(o):r[n]=[o]}return r};function N(t,e){if(!e)return{0:t};if(!l(e)){var n=f(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return Z(t,e)}var z=function(t,e){if(!e)return[t];var n=N(t,e),r=[];for(var i in n)r.push(n[i]);return r};var U=function(t,e,n){return t<e?e:t>n?n:t},H=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))},W=function(t){return s(t,"Number")};Number.isInteger&&Number.isInteger;function V(t,e,n){return void 0===n&&(n=1e-5),Math.abs(t-e)<n}var G=function(t,e){if(f(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var a=t[i],o=l(e)?e(a):a[e];o>r&&(n=a,r=o)}return n}},X=function(t,e){if(f(t)){for(var n,r=1/0,i=0;i<t.length;i++){var a=t[i],o=l(e)?e(a):a[e];o<r&&(n=a,r=o)}return n}},Y=function(t,e){return(t%e+e)%e},q=(Math.PI,parseInt,Math.PI/180),$=function(t){return q*t},J=d,K=function(t,e){return t.hasOwnProperty(e)},Q=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return d(t,(function(n,r){l(t)&&"prototype"===r||e.push(n)})),e},tt=function(t){return c(t)?"":t.toString()},et=function(t){return tt(t).toLowerCase()};var nt=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t},rt=function(t){var e=tt(t);return e.charAt(0).toUpperCase()+e.substring(1)},it={}.toString,at=function(t){return it.call(t).replace(/^\[object /,"").replace(/]$/,"")},ot=function(t){return s(t,"Boolean")},ut=function(t){return s(t,"Date")};var st=function(t){return null===t},lt=Object.prototype,ct=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||lt)},ft=function(t){return void 0===t},ht=function(t){return t instanceof Element||t instanceof HTMLDocument};function dt(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function pt(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}var gt=function t(e){if("object"!=typeof e||null===e)return e;var n;if(f(e)){n=[];for(var r=0,i=e.length;r<i;r++)"object"==typeof e[r]&&null!=e[r]?n[r]=t(e[r]):n[r]=e[r]}else for(var a in n={},e)"object"==typeof e[a]&&null!=e[a]?n[a]=t(e[a]):n[a]=e[a];return n};var vt=function(t,e,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||t.apply(i,a)},u=n&&!r;clearTimeout(r),r=setTimeout(o,e),u&&t.apply(i,a)}},mt=function(t,e){if(!l(t))throw new TypeError("Expected a function");var n=function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=e?e.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var u=t.apply(this,r);return o.set(a,u),u};return n.cache=new Map,n};function yt(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(e.hasOwnProperty(i)){var a=e[i];null!==a&&m(a)?(m(t[i])||(t[i]={}),n<r?yt(t[i],a,n+1,r):t[i]=e[i]):f(a)?(t[i]=[],t[i]=t[i].concat(a)):void 0!==a&&(t[i]=a)}}var xt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)yt(t,e[r]);return t},bt=function(t,e){if(!r(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,a=0;a<t.length;a++)if(t[a]===e){i=a;break}return i},wt=Object.prototype.hasOwnProperty;var St=function(t){if(c(t))return!0;if(r(t))return!t.length;var e=at(t);if("Map"===e||"Set"===e)return!t.size;if(ct(t))return!Object.keys(t).length;for(var n in t)if(wt.call(t,n))return!1;return!0},kt=function t(e,n){if(e===n)return!0;if(!e||!n)return!1;if(D(e)||D(n))return!1;if(r(e)||r(n)){if(e.length!==n.length)return!1;for(var i=!0,a=0;a<e.length&&(i=t(e[a],n[a]));a++);return i}if(v(e)||v(n)){var o=Object.keys(e),u=Object.keys(n);if(o.length!==u.length)return!1;for(i=!0,a=0;a<o.length&&(i=t(e[o[a]],n[o[a]]));a++);return i}return!1},Ct=function(t,e){if(!r(t))return t;for(var n=[],i=0;i<t.length;i++){var a=t[i];n.push(e(a,i))}return n},Et=function(t){return t},Mt=function(t,e){void 0===e&&(e=Et);var n={};return h(t)&&!c(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n};function Ot(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function At(t,e,n,r){return e&&Ot(t,e),n&&Ot(t,n),r&&Ot(t,r),t}var _t=function(t,e,n){for(var r=0,i=D(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t},Dt=function(t,e,n){var r=t,i=D(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(h(r[t])||(r[t]=W(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t},Tt=Object.prototype.hasOwnProperty,Ft=function(t,e){if(null===t||!m(t))return{};var n={};return d(e,(function(e){Tt.call(t,e)&&(n[e]=t[e])})),n},It=function(t,e){return A(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})},Pt=function(t,e,n){var r,i,a,o,u=0;n||(n={});var s=function(){u=!1===n.leading?0:Date.now(),r=null,o=t.apply(i,a),r||(i=a=null)},l=function(){var l=Date.now();u||!1!==n.leading||(u=l);var c=e-(l-u);return i=this,a=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),u=l,o=t.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(s,c)),o};return l.cancel=function(){clearTimeout(r),u=0,r=i=a=null},l},jt=function(t){return r(t)?Array.prototype.slice.call(t):[]},Bt={},Lt=function(t){return Bt[t=t||"g"]?Bt[t]+=1:Bt[t]=1,t+Bt[t]},Rt=function(){};function Zt(t){return c(t)?0:r(t)?t.length:Object.keys(t).length}var Nt,zt=n(79900),Ut=mt((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return Nt||(Nt=document.createElement("canvas").getContext("2d")),Nt.font=[a,o,i,n+"px",r].join(" "),Nt.measureText(D(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),(0,zt.pr)([t],Q(e)).join("")})),Ht=function(t,e,n,r){void 0===r&&(r="...");var i,a,o=Ut(r,n),u=D(t)?t:tt(t),s=e,l=[];if(Ut(t,n)<=e)return t;for(;i=u.substr(0,16),!((a=Ut(i,n))+o>s&&a>s);)if(l.push(i),s-=a,!(u=u.substr(16)))return l.join("");for(;i=u.substr(0,1),!((a=Ut(i,n))+o>s);)if(l.push(i),s-=a,!(u=u.substr(1)))return l.join("");return""+l.join("")+r},Wt=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}()},70769:function(t,e,n){"use strict";var r=n(44925),i=n(67294),a=["title","titleId"];var o=i.forwardRef((function(t,e){var n=t.title,o=t.titleId,u=(0,r.Z)(t,a);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":o},u),n?i.createElement("title",{id:o},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"}))}));e.Z=o},9796:function(t,e,n){"use strict";var r=n(44925),i=n(67294),a=["title","titleId"];var o=i.forwardRef((function(t,e){var n=t.title,o=t.titleId,u=(0,r.Z)(t,a);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":o},u),n?i.createElement("title",{id:o},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"}))}));e.Z=o},94730:function(t,e,n){"use strict";var r=n(44925),i=n(67294),a=["title","titleId"];var o=i.forwardRef((function(t,e){var n=t.title,o=t.titleId,u=(0,r.Z)(t,a);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":o},u),n?i.createElement("title",{id:o},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"}))}));e.Z=o},70966:function(t,e,n){"use strict";var r=n(44925),i=n(67294),a=["title","titleId"];var o=i.forwardRef((function(t,e){var n=t.title,o=t.titleId,u=(0,r.Z)(t,a);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":o},u),n?i.createElement("title",{id:o},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}));e.Z=o},11005:function(t,e,n){"use strict";var r=n(44925),i=n(67294),a=["title","titleId"];var o=i.forwardRef((function(t,e){var n=t.title,o=t.titleId,u=(0,r.Z)(t,a);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":o},u),n?i.createElement("title",{id:o},n):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z"}))}));e.Z=o},16235:function(t,e,n){"use strict";var r=n(4942);e.Z=function(t){var e;return(0,r.Z)({},t.componentCls,(e={},(0,r.Z)(e,"".concat(t.antCls,"-motion-collapse-legacy"),{overflow:"hidden","&-active":{transition:"height ".concat(t.motionDurationMid," ").concat(t.motionEaseInOut,",\n        opacity ").concat(t.motionDurationMid," ").concat(t.motionEaseInOut," !important")}}),(0,r.Z)(e,"".concat(t.antCls,"-motion-collapse"),{overflow:"hidden",transition:"height ".concat(t.motionDurationMid," ").concat(t.motionEaseInOut,",\n        opacity ").concat(t.motionDurationMid," ").concat(t.motionEaseInOut," !important")}),e))}},53746:function(t){var e=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var e,n,r;try{e=Map}catch(u){e=function(){}}try{n=Set}catch(u){n=function(){}}try{r=Promise}catch(u){r=function(){}}function i(a,u,s,l,c){"object"==typeof u&&(s=u.depth,l=u.prototype,c=u.includeNonEnumerable,u=u.circular);var f=[],h=[],d="undefined"!=typeof Buffer;return void 0===u&&(u=!0),void 0===s&&(s=1/0),function a(s,p){if(null===s)return null;if(0===p)return s;var g,v;if("object"!=typeof s)return s;if(t(s,e))g=new e;else if(t(s,n))g=new n;else if(t(s,r))g=new r((function(t,e){s.then((function(e){t(a(e,p-1))}),(function(t){e(a(t,p-1))}))}));else if(i.__isArray(s))g=[];else if(i.__isRegExp(s))g=new RegExp(s.source,o(s)),s.lastIndex&&(g.lastIndex=s.lastIndex);else if(i.__isDate(s))g=new Date(s.getTime());else{if(d&&Buffer.isBuffer(s))return g=Buffer.allocUnsafe?Buffer.allocUnsafe(s.length):new Buffer(s.length),s.copy(g),g;t(s,Error)?g=Object.create(s):void 0===l?(v=Object.getPrototypeOf(s),g=Object.create(v)):(g=Object.create(l),v=l)}if(u){var m=f.indexOf(s);if(-1!=m)return h[m];f.push(s),h.push(g)}for(var y in t(s,e)&&s.forEach((function(t,e){var n=a(e,p-1),r=a(t,p-1);g.set(n,r)})),t(s,n)&&s.forEach((function(t){var e=a(t,p-1);g.add(e)})),s){var x;v&&(x=Object.getOwnPropertyDescriptor(v,y)),x&&null==x.set||(g[y]=a(s[y],p-1))}if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(s);for(y=0;y<b.length;y++){var w=b[y];(!(k=Object.getOwnPropertyDescriptor(s,w))||k.enumerable||c)&&(g[w]=a(s[w],p-1),k.enumerable||Object.defineProperty(g,w,{enumerable:!1}))}}if(c){var S=Object.getOwnPropertyNames(s);for(y=0;y<S.length;y++){var k,C=S[y];(k=Object.getOwnPropertyDescriptor(s,C))&&k.enumerable||(g[C]=a(s[C],p-1),Object.defineProperty(g,C,{enumerable:!1}))}}return g}(a,s)}function a(t){return Object.prototype.toString.call(t)}function o(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return i.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},i.__objToStr=a,i.__isDate=function(t){return"object"==typeof t&&"[object Date]"===a(t)},i.__isArray=function(t){return"object"==typeof t&&"[object Array]"===a(t)},i.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===a(t)},i.__getRegExpFlags=o,i}();t.exports&&(t.exports=e)},34627:function(t,e,n){"use strict";n.d(e,{B8:function(){return C},Il:function(){return i},J5:function(){return o},SU:function(){return k},Ss:function(){return E},Ym:function(){return I},ZP:function(){return b},xV:function(){return a}});var r=n(2077);function i(){}var a=.7,o=1/a,u="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,f=new RegExp("^rgb\\(".concat(u,",").concat(u,",").concat(u,"\\)$")),h=new RegExp("^rgb\\(".concat(l,",").concat(l,",").concat(l,"\\)$")),d=new RegExp("^rgba\\(".concat(u,",").concat(u,",").concat(u,",").concat(s,"\\)$")),p=new RegExp("^rgba\\(".concat(l,",").concat(l,",").concat(l,",").concat(s,"\\)$")),g=new RegExp("^hsl\\(".concat(s,",").concat(l,",").concat(l,"\\)$")),v=new RegExp("^hsla\\(".concat(s,",").concat(l,",").concat(l,",").concat(s,"\\)$")),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function x(){return this.rgb().formatRgb()}function b(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=c.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?w(e):3===n?new E(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?S(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?S(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=f.exec(t))?new E(e[1],e[2],e[3],1):(e=h.exec(t))?new E(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=d.exec(t))?S(e[1],e[2],e[3],e[4]):(e=p.exec(t))?S(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g.exec(t))?T(e[1],e[2]/100,e[3]/100,1):(e=v.exec(t))?T(e[1],e[2]/100,e[3]/100,e[4]):m.hasOwnProperty(t)?w(m[t]):"transparent"===t?new E(NaN,NaN,NaN,0):null}function w(t){return new E(t>>16&255,t>>8&255,255&t,1)}function S(t,e,n,r){return r<=0&&(t=e=n=NaN),new E(t,e,n,r)}function k(t){return t instanceof i||(t=b(t)),t?new E((t=t.rgb()).r,t.g,t.b,t.opacity):new E}function C(t,e,n,r){return 1===arguments.length?k(t):new E(t,e,n,null==r?1:r)}function E(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function M(){return"#".concat(D(this.r)).concat(D(this.g)).concat(D(this.b))}function O(){var t=A(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(_(this.r),", ").concat(_(this.g),", ").concat(_(this.b)).concat(1===t?")":", ".concat(t,")"))}function A(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function _(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function D(t){return((t=_(t))<16?"0":"")+t.toString(16)}function T(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new P(t,e,n,r)}function F(t){if(t instanceof P)return new P(t.h,t.s,t.l,t.opacity);if(t instanceof i||(t=b(t)),!t)return new P;if(t instanceof P)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),o=Math.max(e,n,r),u=NaN,s=o-a,l=(o+a)/2;return s?(u=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+a:2-o-a,u*=60):s=l>0&&l<1?0:u,new P(u,s,l,t.opacity)}function I(t,e,n,r){return 1===arguments.length?F(t):new P(t,e,n,null==r?1:r)}function P(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function j(t){return(t=(t||0)%360)<0?t+360:t}function B(t){return Math.max(0,Math.min(1,t||0))}function L(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}(0,r.Z)(i,b,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return F(this).formatHsl()},formatRgb:x,toString:x}),(0,r.Z)(E,C,(0,r.l)(i,{brighter:function(t){return t=null==t?o:Math.pow(o,t),new E(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?a:Math.pow(a,t),new E(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new E(_(this.r),_(this.g),_(this.b),A(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatHex8:function(){return"#".concat(D(this.r)).concat(D(this.g)).concat(D(this.b)).concat(D(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:O,toString:O})),(0,r.Z)(P,I,(0,r.l)(i,{brighter:function(t){return t=null==t?o:Math.pow(o,t),new P(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?a:Math.pow(a,t),new P(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new E(L(t>=240?t-240:t+120,i,r),L(t,i,r),L(t<120?t+240:t-120,i,r),this.opacity)},clamp:function(){return new P(j(this.h),B(this.s),B(this.l),A(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=A(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(j(this.h),", ").concat(100*B(this.s),"%, ").concat(100*B(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}))},2077:function(t,e,n){"use strict";function r(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}n.d(e,{Z:function(){return r},l:function(){return i}})},79739:function(t,e,n){"use strict";n.d(e,{M:function(){return o},Z:function(){return a}});var r=n(23713),i=n(3256);function a(t,e){return((0,i.v)(e)?i.Z:o)(t,e)}function o(t,e){var n,i=e?e.length:0,a=t?Math.min(i,t.length):0,o=new Array(a),u=new Array(i);for(n=0;n<a;++n)o[n]=(0,r.Z)(t[n],e[n]);for(;n<i;++n)u[n]=e[n];return function(t){for(n=0;n<a;++n)u[n]=o[n](t);return u}}},49763:function(t,e,n){"use strict";function r(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function i(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],o=t[i+1],u=i>0?t[i-1]:2*a-o,s=i<e-1?t[i+2]:2*o-a;return r((n-i/e)*e,u,a,o,s)}}n.d(e,{Z:function(){return i},t:function(){return r}})},52283:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(49763);function i(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),a=t[(i+e-1)%e],o=t[i%e],u=t[(i+1)%e],s=t[(i+2)%e];return(0,r.t)((n-i/e)*e,a,o,u,s)}}},4301:function(t,e,n){"use strict";n.d(e,{ZP:function(){return u},wx:function(){return a},yi:function(){return o}});var r=n(80546);function i(t,e){return function(n){return t+n*e}}function a(t,e){var n=e-t;return n?i(t,n>180||n<-180?n-360*Math.round(n/360):n):(0,r.Z)(isNaN(t)?e:t)}function o(t){return 1==(t=+t)?u:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):(0,r.Z)(isNaN(e)?n:e)}}function u(t,e){var n=e-t;return n?i(t,n):(0,r.Z)(isNaN(t)?e:t)}},80546:function(t,e){"use strict";e.Z=function(t){return function(){return t}}},66276:function(t,e,n){"use strict";function r(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}n.d(e,{Z:function(){return r}})},44922:function(t,e,n){"use strict";function r(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}n.d(e,{Z:function(){return r}})},3256:function(t,e,n){"use strict";function r(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function i(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.d(e,{Z:function(){return r},v:function(){return i}})},51861:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(23713);function i(t,e){var n,i={},a={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=(0,r.Z)(t[n],e[n]):a[n]=e[n];return function(t){for(n in i)a[n]=i[n](t);return a}}},65713:function(t,e,n){"use strict";n.d(e,{YD:function(){return l},hD:function(){return s}});var r=n(34627),i=n(49763),a=n(52283),o=n(4301);function u(t){return function(e){var n,i,a=e.length,o=new Array(a),u=new Array(a),s=new Array(a);for(n=0;n<a;++n)i=(0,r.B8)(e[n]),o[n]=i.r||0,u[n]=i.g||0,s[n]=i.b||0;return o=t(o),u=t(u),s=t(s),i.opacity=1,function(t){return i.r=o(t),i.g=u(t),i.b=s(t),i+""}}}e.ZP=function t(e){var n=(0,o.yi)(e);function i(t,e){var i=n((t=(0,r.B8)(t)).r,(e=(0,r.B8)(e)).r),a=n(t.g,e.g),u=n(t.b,e.b),s=(0,o.ZP)(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=a(e),t.b=u(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);var s=u(i.Z),l=u(a.Z)},95147:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(44922),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a=new RegExp(i.source,"g");function o(t,e){var n,o,u,s=i.lastIndex=a.lastIndex=0,l=-1,c=[],f=[];for(t+="",e+="";(n=i.exec(t))&&(o=a.exec(e));)(u=o.index)>s&&(u=e.slice(s,u),c[l]?c[l]+=u:c[++l]=u),(n=n[0])===(o=o[0])?c[l]?c[l]+=o:c[++l]=o:(c[++l]=null,f.push({i:l,x:(0,r.Z)(n,o)})),s=a.lastIndex;return s<e.length&&(u=e.slice(s),c[l]?c[l]+=u:c[++l]=u),c.length<2?f[0]?function(t){return function(e){return t(e)+""}}(f[0].x):function(t){return function(){return t}}(e):(e=f.length,function(t){for(var n,r=0;r<e;++r)c[(n=f[r]).i]=n.x(t);return c.join("")})}},23713:function(t,e,n){"use strict";n.d(e,{Z:function(){return h}});var r=n(34627),i=n(65713),a=n(79739),o=n(66276),u=n(44922),s=n(51861),l=n(95147),c=n(80546),f=n(3256);function h(t,e){var n,h=typeof e;return null==e||"boolean"===h?(0,c.Z)(e):("number"===h?u.Z:"string"===h?(n=(0,r.ZP)(e))?(e=n,i.ZP):l.Z:e instanceof r.ZP?i.ZP:e instanceof Date?o.Z:(0,f.v)(e)?f.Z:Array.isArray(e)?a.M:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?s.Z:u.Z)(t,e)}},71547:function(t,e){!function(t){"use strict";function e(t,e){return n(t)||r(t,e)||i()}function n(t){if(Array.isArray(t))return t}function r(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e,n,r){t=t.filter((function(t,r){var i=e(t,r),a=n(t,r);return null!=i&&isFinite(i)&&null!=a&&isFinite(a)})),r&&t.sort((function(t,n){return e(t)-e(n)}));for(var i,a,o,u=t.length,s=new Float64Array(u),l=new Float64Array(u),c=0,f=0,h=0;h<u;)o=t[h],s[h]=i=+e(o,h,t),l[h]=a=+n(o,h,t),c+=(i-c)/++h,f+=(a-f)/h;for(var d=0;d<u;++d)s[d]-=c,l[d]-=f;return[s,l,c,f]}function o(t,e,n,r){for(var i=0,a=0,o=t.length;a<o;a++){var u=t[a],s=+e(u,a,t),l=+n(u,a,t);null!=s&&isFinite(s)&&null!=l&&isFinite(l)&&r(s,l,i++)}}function u(t,e,n,r,i){var a=0,u=0;return o(t,e,n,(function(t,e){var n=e-i(t),o=e-r;a+=n*n,u+=o*o})),1-a/u}function s(t){return 180*Math.atan2(t[1][1]-t[0][1],t[1][0]-t[0][0])/Math.PI}function l(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}function c(t,e,n){for(var r=Math.log(e-t)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),a=1e4,o=[c(t),c(e)],u=0;f(o)&&u<a;);return o;function c(t){return[t,n(t)]}function f(t){u++;for(var e=t.length,n=!1,r=0;r<e-1;r++){var a=t[r],o=l([a,t[r+1]]),f=c(o[0]),h=s([a,o]),d=s([a,f]);Math.abs(h-d)>i&&(t.splice(r+1,0,f),n=!0)}return n}}function f(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-a*t,a]}function h(){var t,n=function(t){return t[0]},r=function(t){return t[1]};function i(i){var a=0,s=0,l=0,h=0,d=0,p=0,g=t?+t[0]:1/0,v=t?+t[1]:-1/0;o(i,n,r,(function(e,n){var r=Math.log(n),i=e*n;++a,s+=(n-s)/a,h+=(i-h)/a,p+=(e*i-p)/a,l+=(n*r-l)/a,d+=(i*r-d)/a,t||(e<g&&(g=e),e>v&&(v=e))}));var m=e(f(h/s,l/s,d/s,p/s),2),y=m[0],x=m[1];y=Math.exp(y);var b=function(t){return y*Math.exp(x*t)},w=c(g,v,b);return w.a=y,w.b=x,w.predict=b,w.rSquared=u(i,n,r,s,b),w}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(n=t,i):n},i.y=function(t){return arguments.length?(r=t,i):r},i}function d(){var t,n=function(t){return t[0]},r=function(t){return t[1]};function i(i){var a=0,s=0,l=0,c=0,h=0,d=t?+t[0]:1/0,p=t?+t[1]:-1/0;o(i,n,r,(function(e,n){++a,s+=(e-s)/a,l+=(n-l)/a,c+=(e*n-c)/a,h+=(e*e-h)/a,t||(e<d&&(d=e),e>p&&(p=e))}));var g=e(f(s,l,c,h),2),v=g[0],m=g[1],y=function(t){return m*t+v},x=[[d,y(d)],[p,y(p)]];return x.a=m,x.b=v,x.predict=y,x.rSquared=u(i,n,r,l,y),x}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(n=t,i):n},i.y=function(t){return arguments.length?(r=t,i):r},i}function p(t){t.sort((function(t,e){return t-e}));var e=t.length/2;return e%1==0?(t[e-1]+t[e])/2:t[Math.floor(e)]}var g=2,v=1e-12;function m(){var t=function(t){return t[0]},n=function(t){return t[1]},r=.3;function i(i){for(var o=e(a(i,t,n,!0),4),u=o[0],s=o[1],l=o[2],c=o[3],h=u.length,d=Math.max(2,~~(r*h)),m=new Float64Array(h),w=new Float64Array(h),S=new Float64Array(h).fill(1),k=-1;++k<=g;){for(var C=[0,d-1],E=0;E<h;++E){for(var M=u[E],O=C[0],A=C[1],_=M-u[O]>u[A]-M?O:A,D=0,T=0,F=0,I=0,P=0,j=1/Math.abs(u[_]-M||1),B=O;B<=A;++B){var L=u[B],R=s[B],Z=y(Math.abs(M-L)*j)*S[B],N=L*Z;D+=Z,T+=N,F+=R*Z,I+=R*N,P+=L*N}var z=e(f(T/D,F/D,I/D,P/D),2),U=z[0],H=z[1];m[E]=U+H*M,w[E]=Math.abs(s[E]-m[E]),x(u,E+1,C)}if(k===g)break;var W=p(w);if(Math.abs(W)<v)break;for(var V,G,X=0;X<h;++X)V=w[X]/(6*W),S[X]=V>=1?v:(G=1-V*V)*G}return b(u,m,l,c)}return i.bandwidth=function(t){return arguments.length?(r=t,i):r},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(t){return arguments.length?(n=t,i):n},i}function y(t){return(t=1-t*t*t)*t*t}function x(t,e,n){var r=t[e],i=n[0],a=n[1]+1;if(!(a>=t.length))for(;e>i&&t[a]-r<=r-t[i];)n[0]=++i,n[1]=a,++a}function b(t,e,n,r){for(var i,a=t.length,o=[],u=0,s=0,l=[];u<a;++u)i=t[u]+n,l[0]===i?l[1]+=(e[u]-l[1])/++s:(s=0,l[1]+=r,l=[i,e[u]],o.push(l));return l[1]+=r,o}function w(){var t,n=function(t){return t[0]},r=function(t){return t[1]},i=Math.E;function a(a){var s=0,l=0,h=0,d=0,p=0,g=t?+t[0]:1/0,v=t?+t[1]:-1/0,m=Math.log(i);o(a,n,r,(function(e,n){var r=Math.log(e)/m;++s,l+=(r-l)/s,h+=(n-h)/s,d+=(r*n-d)/s,p+=(r*r-p)/s,t||(e<g&&(g=e),e>v&&(v=e))}));var y=e(f(l,h,d,p),2),x=y[0],b=y[1],w=function(t){return b*Math.log(t)/m+x},S=c(g,v,w);return S.a=b,S.b=x,S.predict=w,S.rSquared=u(a,n,r,h,w),S}return a.domain=function(e){return arguments.length?(t=e,a):t},a.x=function(t){return arguments.length?(n=t,a):n},a.y=function(t){return arguments.length?(r=t,a):r},a.base=function(t){return arguments.length?(i=t,a):i},a}function S(){var t,n=function(t){return t[0]},r=function(t){return t[1]};function i(i){var s,l,f,h,d=e(a(i,n,r),4),p=d[0],g=d[1],v=d[2],m=d[3],y=p.length,x=0,b=0,w=0,S=0,k=0;for(s=0;s<y;)l=p[s],f=g[s++],x+=((h=l*l)-x)/s,b+=(h*l-b)/s,w+=(h*h-w)/s,S+=(l*f-S)/s,k+=(h*f-k)/s;var C=0,E=0,M=t?+t[0]:1/0,O=t?+t[1]:-1/0;o(i,n,r,(function(e,n){E++,C+=(n-C)/E,t||(e<M&&(M=e),e>O&&(O=e))}));var A=w-x*x,_=x*A-b*b,D=(k*x-S*b)/_,T=(S*A-k*b)/_,F=-D*x,I=function(t){return D*(t-=v)*t+T*t+F+m},P=c(M,O,I);return P.a=D,P.b=T-2*D*v,P.c=F-T*v+D*v*v+m,P.predict=I,P.rSquared=u(i,n,r,C,I),P}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(n=t,i):n},i.y=function(t){return arguments.length?(r=t,i):r},i}function k(){var t,n=function(t){return t[0]},r=function(t){return t[1]},i=3;function s(s){if(1===i){var l=d().x(n).y(r).domain(t)(s);return l.coefficients=[l.b,l.a],delete l.a,delete l.b,l}if(2===i){var f=S().x(n).y(r).domain(t)(s);return f.coefficients=[f.c,f.b,f.a],delete f.a,delete f.b,delete f.c,f}var h,p,g,v,m,y=e(a(s,n,r),4),x=y[0],b=y[1],w=y[2],k=y[3],M=x.length,O=[],A=[],_=i+1,D=0,T=0,F=t?+t[0]:1/0,I=t?+t[1]:-1/0;for(o(s,n,r,(function(e,n){++T,D+=(n-D)/T,t||(e<F&&(F=e),e>I&&(I=e))})),h=0;h<_;++h){for(g=0,v=0;g<M;++g)v+=Math.pow(x[g],h)*b[g];for(O.push(v),m=new Float64Array(_),p=0;p<_;++p){for(g=0,v=0;g<M;++g)v+=Math.pow(x[g],h+p);m[p]=v}A.push(m)}A.push(O);var P=E(A),j=function(t){t-=w;var e=k+P[0]+P[1]*t+P[2]*t*t;for(h=3;h<_;++h)e+=P[h]*Math.pow(t,h);return e},B=c(F,I,j);return B.coefficients=C(_,P,-w,k),B.predict=j,B.rSquared=u(s,n,r,D,j),B}return s.domain=function(e){return arguments.length?(t=e,s):t},s.x=function(t){return arguments.length?(n=t,s):n},s.y=function(t){return arguments.length?(r=t,s):r},s.order=function(t){return arguments.length?(i=t,s):i},s}function C(t,e,n,r){var i,a,o,u,s=Array(t);for(i=0;i<t;++i)s[i]=0;for(i=t-1;i>=0;--i)for(o=e[i],u=1,s[i]+=o,a=1;a<=i;++a)u*=(i+1-a)/a,s[i-a]+=o*Math.pow(n,a)*u;return s[0]+=r,s}function E(t){var e,n,r,i,a,o=t.length-1,u=[];for(e=0;e<o;++e){for(i=e,n=e+1;n<o;++n)Math.abs(t[e][n])>Math.abs(t[e][i])&&(i=n);for(r=e;r<o+1;++r)a=t[r][e],t[r][e]=t[r][i],t[r][i]=a;for(n=e+1;n<o;++n)for(r=o;r>=e;r--)t[r][n]-=t[r][e]*t[e][n]/t[e][e]}for(n=o-1;n>=0;--n){for(a=0,r=n+1;r<o;++r)a+=t[r][n]*u[r];u[n]=(t[o][n]-a)/t[n][n]}return u}function M(){var t,n=function(t){return t[0]},r=function(t){return t[1]};function i(i){var a=0,s=0,l=0,h=0,d=0,p=0,g=t?+t[0]:1/0,v=t?+t[1]:-1/0;o(i,n,r,(function(e,n){var r=Math.log(e),i=Math.log(n);++a,s+=(r-s)/a,l+=(i-l)/a,h+=(r*i-h)/a,d+=(r*r-d)/a,p+=(n-p)/a,t||(e<g&&(g=e),e>v&&(v=e))}));var m=e(f(s,l,h,d),2),y=m[0],x=m[1];y=Math.exp(y);var b=function(t){return y*Math.pow(t,x)},w=c(g,v,b);return w.a=y,w.b=x,w.predict=b,w.rSquared=u(i,n,r,p,b),w}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(n=t,i):n},i.y=function(t){return arguments.length?(r=t,i):r},i}t.regressionExp=h,t.regressionLinear=d,t.regressionLoess=m,t.regressionLog=w,t.regressionPoly=k,t.regressionPow=M,t.regressionQuad=S,Object.defineProperty(t,"__esModule",{value:!0})}(e)},23537:function(t,e,n){"use strict";n.d(e,{qY:function(){return h}});var r=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},i=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},a=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},o=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},u=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},s=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},l=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,c=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(t){return t?p(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new s:"undefined"!=typeof navigator?p(navigator.userAgent):"undefined"!=typeof process&&process.version?new a(process.version.slice(1)):null}function d(t){return""!==t&&c.reduce((function(e,n){var r=n[0],i=n[1];if(e)return e;var a=i.exec(t);return!!a&&[r,a]}),!1)}function p(t){var e=d(t);if(!e)return null;var n=e[0],a=e[1];if("searchbot"===n)return new u;var s=a[1]&&a[1].split(".").join("_").split("_").slice(0,3);s?s.length<3&&(s=r(r([],s,!0),function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(3-s.length),!0)):s=[];var c=s.join("."),h=function(t){for(var e=0,n=f.length;e<n;e++){var r=f[e],i=r[0];if(r[1].exec(t))return i}return null}(t),p=l.exec(t);return p&&p[1]?new o(n,c,h,p[1]):new i(n,c,h)}},2412:function(t){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(a=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!=i--;){var o=a[i];if(!t(e[o],n[o]))return!1}return!0}return e!=e&&n!=n}},16726:function(t){"use strict";t.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var n,r="boolean"==typeof e.cycles&&e.cycles,i=e.cmp&&(n=e.cmp,function(t){return function(e,r){var i={key:e,value:t[e]},a={key:r,value:t[r]};return n(i,a)}}),a=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var n,o;if(Array.isArray(e)){for(o="[",n=0;n<e.length;n++)n&&(o+=","),o+=t(e[n])||"null";return o+"]"}if(null===e)return"null";if(-1!==a.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=a.push(e)-1,s=Object.keys(e).sort(i&&i(e));for(o="",n=0;n<s.length;n++){var l=s[n],c=t(e[l]);c&&(o&&(o+=","),o+=JSON.stringify(l)+":"+c)}return a.splice(u,1),"{"+o+"}"}}(t)}},13125:function(t,e){!function(t){"use strict";function e(t,e,n,r){var i=(r=r||{}).maxIterations||100,a=r.tolerance||1e-10,o=t(e),u=t(n),s=n-e;if(o*u>0)throw"Initial bisect points must have opposite signs";if(0===o)return e;if(0===u)return n;for(var l=0;l<i;++l){var c=e+(s/=2),f=t(c);if(f*o>=0&&(e=c),Math.abs(s)<a||0===f)return c}return e+s}function n(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function r(t,e){return n(t).map((function(){return n(e)}))}function i(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n}function a(t){return Math.sqrt(i(t,t))}function o(t,e,n){for(var r=0;r<e.length;++r)t[r]=e[r]*n}function u(t,e,n,r,i){for(var a=0;a<t.length;++a)t[a]=e*n[a]+r*i[a]}function s(t,e,n){var r,i=(n=n||{}).maxIterations||200*e.length,a=n.nonZeroDelta||1.05,o=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,l=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,f=void 0!==n.chi?n.chi:2,h=void 0!==n.psi?n.psi:-.5,d=void 0!==n.sigma?n.sigma:.5,p=e.length,g=new Array(p+1);g[0]=e,g[0].fx=t(e),g[0].id=0;for(var v=0;v<p;++v){var m=e.slice();m[v]=m[v]?m[v]*a:o,g[v+1]=m,g[v+1].fx=t(m),g[v+1].id=v+1}function y(t){for(var e=0;e<t.length;e++)g[p][e]=t[e];g[p].fx=t.fx}for(var x=function(t,e){return t.fx-e.fx},b=e.slice(),w=e.slice(),S=e.slice(),k=e.slice(),C=0;C<i;++C){if(g.sort(x),n.history){var E=g.map((function(t){var e=t.slice();return e.fx=t.fx,e.id=t.id,e}));E.sort((function(t,e){return t.id-e.id})),n.history.push({x:g[0].slice(),fx:g[0].fx,simplex:E})}for(r=0,v=0;v<p;++v)r=Math.max(r,Math.abs(g[0][v]-g[1][v]));if(Math.abs(g[0].fx-g[p].fx)<s&&r<l)break;for(v=0;v<p;++v){b[v]=0;for(var M=0;M<p;++M)b[v]+=g[M][v];b[v]/=p}var O=g[p];if(u(w,1+c,b,-c,O),w.fx=t(w),w.fx<g[0].fx)u(k,1+f,b,-f,O),k.fx=t(k),k.fx<w.fx?y(k):y(w);else if(w.fx>=g[p-1].fx){var A=!1;if(w.fx>O.fx?(u(S,1+h,b,-h,O),S.fx=t(S),S.fx<O.fx?y(S):A=!0):(u(S,1-h*c,b,h*c,O),S.fx=t(S),S.fx<w.fx?y(S):A=!0),A){if(d>=1)break;for(v=1;v<g.length;++v)u(g[v],1-d,g[0],d,g[v]),g[v].fx=t(g[v])}}else y(w)}return g.sort(x),{fx:g[0].fx,x:g[0]}}function l(t,e,n,r,a,o,s){var l=n.fx,c=i(n.fxprime,e),f=l,h=l,d=c,p=0;function g(h,p,g){for(var v=0;v<16;++v)if(a=(h+p)/2,u(r.x,1,n.x,a,e),f=r.fx=t(r.x,r.fxprime),d=i(r.fxprime,e),f>l+o*a*c||f>=g)p=a;else{if(Math.abs(d)<=-s*c)return a;d*(p-h)>=0&&(p=h),h=a,g=f}return 0}a=a||1,o=o||1e-6,s=s||.1;for(var v=0;v<10;++v){if(u(r.x,1,n.x,a,e),f=r.fx=t(r.x,r.fxprime),d=i(r.fxprime,e),f>l+o*a*c||v&&f>=h)return g(p,a,h);if(Math.abs(d)<=-s*c)return a;if(d>=0)return g(a,p,f);h=f,p=a,a*=2}return a}function c(t,e,n){var r,s,c,f={x:e.slice(),fx:0,fxprime:e.slice()},h={x:e.slice(),fx:0,fxprime:e.slice()},d=e.slice(),p=1;c=(n=n||{}).maxIterations||20*e.length,f.fx=t(f.x,f.fxprime),o(r=f.fxprime.slice(),f.fxprime,-1);for(var g=0;g<c;++g){if(p=l(t,r,f,h,p),n.history&&n.history.push({x:f.x.slice(),fx:f.fx,fxprime:f.fxprime.slice(),alpha:p}),p){u(d,1,h.fxprime,-1,f.fxprime);var v=i(f.fxprime,f.fxprime);u(r,Math.max(0,i(d,h.fxprime)/v),r,-1,h.fxprime),s=f,f=h,h=s}else o(r,f.fxprime,-1);if(a(f.fxprime)<=1e-5)break}return n.history&&n.history.push({x:f.x.slice(),fx:f.fx,fxprime:f.fxprime.slice(),alpha:p}),f}function f(t,e,n){for(var r=(n=n||{}).maxIterations||100*e.length,i=n.learnRate||.001,o={x:e.slice(),fx:0,fxprime:e.slice()},s=0;s<r&&(o.fx=t(o.x,o.fxprime),n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice()}),u(o.x,1,o.x,-i,o.fxprime),!(a(o.fxprime)<=1e-5));++s);return o}function h(t,e,n){n=n||{};var r,i={x:e.slice(),fx:0,fxprime:e.slice()},u={x:e.slice(),fx:0,fxprime:e.slice()},s=n.maxIterations||100*e.length,c=n.learnRate||1,f=e.slice(),h=n.c1||.001,d=n.c2||.1,p=[];if(n.history){var g=t;t=function(t,e){return p.push(t.slice()),g(t,e)}}i.fx=t(i.x,i.fxprime);for(var v=0;v<s&&(o(f,i.fxprime,-1),c=l(t,f,i,u,c,h,d),n.history&&(n.history.push({x:i.x.slice(),fx:i.fx,fxprime:i.fxprime.slice(),functionCalls:p,learnRate:c,alpha:c}),p=[]),r=i,i=u,u=r,!(0===c||a(i.fxprime)<1e-5));++v);return i}t.bisect=e,t.nelderMead=s,t.conjugateGradient=c,t.gradientDescent=f,t.gradientDescentLineSearch=h,t.zeros=n,t.zerosM=r,t.norm2=a,t.weightedSum=u,t.scale=o}(e)},30739:function(t,e,n){"use strict";n.d(e,{WT:function(){return r}});n(25438);var r="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},20593:function(t,e,n){"use strict";n.d(e,{Jp:function(){return i},U_:function(){return r},Us:function(){return o},vc:function(){return a},xJ:function(){return u}});n(25438);function r(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],l=e[7],c=e[8],f=c*o-u*l,h=-c*a+u*s,d=l*a-o*s,p=n*f+r*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-c*r+i*l)*p,t[2]=(u*r-i*o)*p,t[3]=h*p,t[4]=(c*n-i*s)*p,t[5]=(-u*n+i*a)*p,t[6]=d*p,t[7]=(-l*n+r*s)*p,t[8]=(o*n-r*a)*p,t):null}function i(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=n[0],d=n[1],p=n[2],g=n[3],v=n[4],m=n[5],y=n[6],x=n[7],b=n[8];return t[0]=h*r+d*o+p*l,t[1]=h*i+d*u+p*c,t[2]=h*a+d*s+p*f,t[3]=g*r+v*o+m*l,t[4]=g*i+v*u+m*c,t[5]=g*a+v*s+m*f,t[6]=y*r+x*o+b*l,t[7]=y*i+x*u+b*c,t[8]=y*a+x*s+b*f,t}function a(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function o(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function u(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},17647:function(t,e,n){"use strict";n.d(e,{$X:function(){return a},AK:function(){return h},EU:function(){return p},Fp:function(){return u},Fv:function(){return f},I6:function(){return g},IH:function(){return i},TE:function(){return l},VV:function(){return o},bA:function(){return s},kE:function(){return c},kK:function(){return d},lu:function(){return y}});n(25438);var r=n(30739);function i(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function u(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function s(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function c(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function f(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function h(t,e){return t[0]*e[0]+t[1]*e[1]}function d(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function p(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),u=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(u,-1),1))}function g(t,e){return t[0]===e[0]&&t[1]===e[1]}var v,m,y=a;v=new r.WT(2),r.WT!=Float32Array&&(v[0]=0,v[1]=0),m=v},70080:function(t){"use strict";var e=/("(?:[^\\"]|\\.)*")|[:,]/g;t.exports=function(t,n){var r,i,a;return n=n||{},r=JSON.stringify([1],void 0,void 0===n.indent?2:n.indent).slice(2,-3),i=""===r?1/0:void 0===n.maxLength?80:n.maxLength,a=n.replacer,function t(n,o,u){var s,l,c,f,h,d,p,g,v,m,y,x;if(n&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0===(y=JSON.stringify(n,a)))return y;if(p=i-o.length-u,y.length<=p&&(v=y.replace(e,(function(t,e){return e||t+" "}))).length<=p)return v;if(null!=a&&(n=JSON.parse(y),a=void 0),"object"==typeof n&&null!==n){if(g=o+r,c=[],l=0,Array.isArray(n))for(m="[",s="]",p=n.length;l<p;l++)c.push(t(n[l],g,l===p-1?0:1)||"null");else for(m="{",s="}",p=(d=Object.keys(n)).length;l<p;l++)f=d[l],h=JSON.stringify(f)+": ",void 0!==(x=t(n[f],g,h.length+(l===p-1?0:1)))&&c.push(h+x);if(c.length>0)return[m,r+c.join(",\n"+g),s].join("\n"+o)}return y}(t,"",0)}},62598:function(t){"use strict";var e=t.exports;t.exports.isNumber=function(t){return"number"==typeof t},t.exports.findMin=function(t){if(0===t.length)return 1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.min(e,t[n]);return e},t.exports.findMax=function(t){if(0===t.length)return-1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.max(e,t[n]);return e},t.exports.findMinMulti=function(t){for(var n=e.findMin(t[0]),r=1;r<t.length;r++)n=Math.min(n,e.findMin(t[r]));return n},t.exports.findMaxMulti=function(t){for(var n=e.findMax(t[0]),r=1;r<t.length;r++)n=Math.max(n,e.findMax(t[r]));return n},t.exports.inside=function(t,e,n){return t<=n&&n<=e}},78525:function(t,e,n){"use strict";var r=Math.log(2),i=t.exports,a=n(62598);function o(t){return 1-Math.abs(t)}t.exports.getUnifiedMinMax=function(t,e){return i.getUnifiedMinMaxMulti([t],e)},t.exports.getUnifiedMinMaxMulti=function(t,e){e=e||{};var n=!1,r=!1,i=a.isNumber(e.width)?e.width:2,o=a.isNumber(e.size)?e.size:50,u=a.isNumber(e.min)?e.min:(n=!0,a.findMinMulti(t)),s=a.isNumber(e.max)?e.max:(r=!0,a.findMaxMulti(t)),l=(s-u)/(o-1);return n&&(u-=2*i*l),r&&(s+=2*i*l),{min:u,max:s}},t.exports.create=function(t,e){if(e=e||{},!t||0===t.length)return[];var n=a.isNumber(e.size)?e.size:50,r=a.isNumber(e.width)?e.width:2,u=i.getUnifiedMinMax(t,{size:n,width:r,min:e.min,max:e.max}),s=u.min,l=u.max-s,c=l/(n-1);if(0===l)return[{x:s,y:1}];for(var f=[],h=0;h<n;h++)f.push({x:s+h*c,y:0});var d=function(t,e){for(var n={},r=0,i=-e;i<=e;i++)r+=t(i/e),n[i]=r;return n}(o,r),p=d[r],g=d[r-1]-d[r-2],v=0;t.forEach((function(t){var e=function(t){return Math.floor((t-s)/c)}(t);if(!(e+r<0||e-r>=f.length)){var n=Math.max(e-r,0),i=e,o=Math.min(e+r,f.length-1),u=n-(e-r),l=e+r-o,h=d[-r-1+u]||0,m=d[-r-1+l]||0,y=p/(p-h-m);u>0&&(v+=y*(u-1)*g);var x=Math.max(0,e-r+1);a.inside(0,f.length-1,x)&&(f[x].y+=1*y*g),a.inside(0,f.length-1,i+1)&&(f[i+1].y-=2*y*g),a.inside(0,f.length-1,o+1)&&(f[o+1].y+=1*y*g)}}));var m=v,y=0,x=0;return f.forEach((function(t){y+=t.y,m+=y,t.y=m,x+=m})),x>0&&f.forEach((function(t){t.y/=x})),f},t.exports.getExpectedValueFromPdf=function(t){if(t&&0!==t.length){var e=0;return t.forEach((function(t){e+=t.x*t.y})),e}},t.exports.getXWithLeftTailArea=function(t,e){if(t&&0!==t.length){for(var n=0,r=0,i=0;i<t.length&&(r=i,!((n+=t[i].y)>=e));i++);return t[r].x}},t.exports.getPerplexity=function(t){if(t&&0!==t.length){var e=0;return t.forEach((function(t){var n=Math.log(t.y);isFinite(n)&&(e+=t.y*n)})),e=-e/r,Math.pow(2,e)}}},45816:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SensorTabIndex=e.SensorClassName=e.SizeSensorId=void 0;e.SizeSensorId="size-sensor-id";e.SensorClassName="size-sensor-object";e.SensorTabIndex="-1"},17636:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){t.apply(r,a)}),e)}}},4088:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=1;e.default=function(){return"".concat(n++)}},11760:function(t,e,n){"use strict";e.ak=void 0;var r=n(88435);e.ak=function(t,e){var n=(0,r.getSensor)(t);return n.bind(e),function(){n.unbind(e)}}},88435:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeSensor=e.getSensor=void 0;var r,i=(r=n(4088))&&r.__esModule?r:{default:r},a=n(6338),o=n(45816);var u={};e.getSensor=function(t){var e=t.getAttribute(o.SizeSensorId);if(e&&u[e])return u[e];var n=(0,i.default)();t.setAttribute(o.SizeSensorId,n);var r=(0,a.createSensor)(t);return u[n]=r,r};e.removeSensor=function(t){var e=t.element.getAttribute(o.SizeSensorId);t.element.removeAttribute(o.SizeSensorId),t.destroy(),e&&u[e]&&delete u[e]}},6338:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var r=n(27902),i=n(52367),a="undefined"!=typeof ResizeObserver?i.createSensor:r.createSensor;e.createSensor=a},27902:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var r,i=(r=n(17636))&&r.__esModule?r:{default:r},a=n(45816);e.createSensor=function(t){var e=void 0,n=[],r=(0,i.default)((function(){n.forEach((function(e){e(t)}))})),o=function(){e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",r),e.parentNode.removeChild(e),e=void 0,n=[])};return{element:t,bind:function(i){e||(e=function(){"static"===getComputedStyle(t).position&&(t.style.position="relative");var e=document.createElement("object");return e.onload=function(){e.contentDocument.defaultView.addEventListener("resize",r),r()},e.style.display="block",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.height="100%",e.style.width="100%",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.zIndex="-1",e.style.opacity="0",e.setAttribute("class",a.SensorClassName),e.setAttribute("tabindex",a.SensorTabIndex),e.type="text/html",t.appendChild(e),e.data="about:blank",e}()),-1===n.indexOf(i)&&n.push(i)},destroy:o,unbind:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&o()}}}},52367:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var r,i=(r=n(17636))&&r.__esModule?r:{default:r};e.createSensor=function(t){var e=void 0,n=[],r=(0,i.default)((function(){n.forEach((function(e){e(t)}))})),a=function(){e.disconnect(),n=[],e=void 0};return{element:t,bind:function(i){var a;e||((a=new ResizeObserver(r)).observe(t),r(),e=a),-1===n.indexOf(i)&&n.push(i)},destroy:a,unbind:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&a()}}}},79900:function(t,e,n){"use strict";n.d(e,{CR:function(){return c},Jh:function(){return s},XA:function(){return l},ZT:function(){return i},_T:function(){return o},ev:function(){return h},mG:function(){return u},pi:function(){return a},pr:function(){return f}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a.apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function u(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{s(r.next(t))}catch(e){a(e)}}function u(t){try{s(r.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,u)}s((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(s){u=[6,s],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}Object.create;function l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function f(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],o=0,u=a.length;o<u;o++,i++)r[i]=a[o];return r}function h(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},84944:function(t,e,n){"use strict";var r=n(82109),i=n(6790),a=n(47908),o=n(26244),u=n(19303),s=n(65417);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=a(this),n=o(e),r=s(e,0);return r.length=i(r,e,e,n,0,void 0===t?1:u(t)),r}})},33792:function(t,e,n){n(51223)("flat")},25438:function(t,e,n){var r=n(82109),i=Math.hypot,a=Math.abs,o=Math.sqrt;r({target:"Math",stat:!0,arity:2,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(t,e){for(var n,r,i=0,u=0,s=arguments.length,l=0;u<s;)l<(n=a(arguments[u++]))?(i=i*(r=l/n)*r+1,l=n):i+=n>0?(r=n/l)*r:n;return l===1/0?1/0:l*o(i)}})},81175:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return cRt}});var r={};n.r(r),n.d(r,{JsonPatchError:function(){return Aa},_areEquals:function(){return Ra},applyOperation:function(){return Ia},applyPatch:function(){return Pa},applyReducer:function(){return ja},deepClone:function(){return _a},getValueByPointer:function(){return Fa},validate:function(){return La},validator:function(){return Ba}});var i={};n.r(i),n.d(i,{compare:function(){return Ga},generate:function(){return Wa},observe:function(){return Ha},unobserve:function(){return Ua}});var a={};n.r(a),n.d(a,{aggregate:function(){return dg},bin:function(){return pg},collect:function(){return vg},compare:function(){return mg},countpattern:function(){return xg},cross:function(){return bg},density:function(){return Cg},dotbin:function(){return _g},expression:function(){return Dg},extent:function(){return Fg},facet:function(){return Pg},field:function(){return jg},filter:function(){return Lg},flatten:function(){return Rg},fold:function(){return Zg},formula:function(){return Ng},generate:function(){return zg},impute:function(){return Wg},joinaggregate:function(){return Vg},kde:function(){return Gg},key:function(){return Xg},load:function(){return qg},lookup:function(){return Jg},multiextent:function(){return Kg},multivalues:function(){return tv},params:function(){return nv},pivot:function(){return rv},prefacet:function(){return iv},project:function(){return av},proxy:function(){return ov},quantile:function(){return uv},relay:function(){return sv},sample:function(){return lv},sequence:function(){return cv},sieve:function(){return fv},subflow:function(){return Ig},timeunit:function(){return hv},tupleindex:function(){return pv},values:function(){return gv},window:function(){return bv}});var o={};n.r(o),n.d(o,{interpolate:function(){return Oy.Z},interpolateArray:function(){return _w.Z},interpolateBasis:function(){return Dw.Z},interpolateBasisClosed:function(){return Tw.Z},interpolateCubehelix:function(){return BS},interpolateCubehelixLong:function(){return LS},interpolateDate:function(){return Fw.Z},interpolateDiscrete:function(){return Iw},interpolateHcl:function(){return bS},interpolateHclLong:function(){return wS},interpolateHsl:function(){return Jw},interpolateHslLong:function(){return Kw},interpolateHue:function(){return jw},interpolateLab:function(){return yS},interpolateNumber:function(){return Ay.Z},interpolateNumberArray:function(){return Lw.Z},interpolateObject:function(){return Rw.Z},interpolateRgb:function(){return Yw.ZP},interpolateRgbBasis:function(){return Yw.hD},interpolateRgbBasisClosed:function(){return Yw.YD},interpolateRound:function(){return _y},interpolateString:function(){return Zw.Z},interpolateTransformCss:function(){return Ww},interpolateTransformSvg:function(){return Vw},interpolateZoom:function(){return Xw},piecewise:function(){return aw},quantize:function(){return RS}});var u={};n.r(u),n.d(u,{bound:function(){return g_},identifier:function(){return y_},mark:function(){return x_},overlap:function(){return b_},render:function(){return O_},viewlayout:function(){return q_}});var s={};n.r(s),n.d(s,{axisticks:function(){return Q_},datajoin:function(){return tD},encode:function(){return nD},legendentries:function(){return rD},linkpath:function(){return sD},pie:function(){return dD},scale:function(){return vD},sortitems:function(){return bD},stack:function(){return ED}});var l={};n.r(l),n.d(l,{contour:function(){return yP},geojson:function(){return wP},geopath:function(){return SP},geopoint:function(){return kP},geoshape:function(){return CP},graticule:function(){return EP},heatmap:function(){return MP},isocontour:function(){return sP},kde2d:function(){return gP},projection:function(){return AP}});var c={};n.r(c),n.d(c,{force:function(){return Cj}});var f={};n.r(f),n.d(f,{nest:function(){return LB},pack:function(){return HB},partition:function(){return VB},stratify:function(){return GB},tree:function(){return qB},treelinks:function(){return $B},treemap:function(){return QB}});var h={};n.r(h),n.d(h,{label:function(){return kL}});var d={};n.r(d),n.d(d,{loess:function(){return EL},regression:function(){return OL}});var p={};n.r(p),n.d(p,{voronoi:function(){return cR}});var g={};n.r(g),n.d(g,{wordcloud:function(){return ER}});var v={};n.r(v),n.d(v,{crossfilter:function(){return FR},resolvefilter:function(){return IR}});var m={};n.r(m),n.d(m,{Bounds:function(){return nE},CanvasHandler:function(){return IO},CanvasRenderer:function(){return RO},DATE:function(){return hl},DAY:function(){return dl},DAYOFYEAR:function(){return pl},Dataflow:function(){return kd},Debug:function(){return vo},Error:function(){return ho},EventStream:function(){return rd},Gradient:function(){return oC},GroupItem:function(){return iE},HOURS:function(){return gl},Handler:function(){return gO},Info:function(){return go},Item:function(){return rE},MILLISECONDS:function(){return yl},MINUTES:function(){return vl},MONTH:function(){return cl},Marks:function(){return QM},MultiPulse:function(){return vd},None:function(){return fo},Operator:function(){return td},Parameters:function(){return Jh},Pulse:function(){return hd},QUARTER:function(){return ll},RenderType:function(){return AA},Renderer:function(){return mO},ResourceLoader:function(){return aE},SECONDS:function(){return ml},SVGHandler:function(){return NO},SVGRenderer:function(){return fA},SVGStringRenderer:function(){return EA},Scenegraph:function(){return uO},TIME_UNITS:function(){return xl},Transform:function(){return Ed},View:function(){return XH},WEEK:function(){return fl},Warn:function(){return po},YEAR:function(){return sl},accessor:function(){return qa},accessorFields:function(){return Ja},accessorName:function(){return $a},array:function(){return Ho},ascending:function(){return Xo},bandwidthNRD:function(){return np},bin:function(){return rp},bootstrapCI:function(){return op},boundClip:function(){return BA},boundContext:function(){return ME},boundItem:function(){return tO},boundMark:function(){return nO},boundStroke:function(){return sE},changeset:function(){return qh},clampRange:function(){return Wo},codegenExpression:function(){return _N},compare:function(){return Go},constant:function(){return Jo},cumulativeLogNormal:function(){return wp},cumulativeNormal:function(){return gp},cumulativeUniform:function(){return Op},dayofyear:function(){return Ml},debounce:function(){return Ko},defaultLocale:function(){return ih},definition:function(){return Od},densityLogNormal:function(){return bp},densityNormal:function(){return pp},densityUniform:function(){return Mp},domChild:function(){return fO},domClear:function(){return hO},domCreate:function(){return lO},domFind:function(){return cO},dotbin:function(){return up},error:function(){return eo},expressionFunction:function(){return NU},extend:function(){return Qo},extent:function(){return tu},extentIndex:function(){return eu},falsy:function(){return lo},fastmap:function(){return au},field:function(){return ro},flush:function(){return ou},font:function(){return VM},fontFamily:function(){return WM},fontSize:function(){return ZM},format:function(){return aZ},formatLocale:function(){return $f},formats:function(){return oZ},hasOwnProperty:function(){return ru},id:function(){return io},identity:function(){return ao},inferType:function(){return KR},inferTypes:function(){return QR},ingest:function(){return Hh},inherits:function(){return uu},inrange:function(){return su},interpolate:function(){return Ak},interpolateColors:function(){return Ek},interpolateRange:function(){return Ck},intersect:function(){return TA},intersectBoxLine:function(){return LE},intersectPath:function(){return IE},intersectPoint:function(){return PE},intersectRule:function(){return BE},isArray:function(){return yo},isBoolean:function(){return lu},isDate:function(){return cu},isFunction:function(){return Vo},isIterable:function(){return fu},isNumber:function(){return hu},isObject:function(){return xo},isRegExp:function(){return du},isString:function(){return pu},isTuple:function(){return Nh},key:function(){return gu},lerp:function(){return vu},lineHeight:function(){return NM},loader:function(){return pZ},locale:function(){return rh},logger:function(){return mo},lruCache:function(){return mu},markup:function(){return rA},merge:function(){return yu},mergeConfig:function(){return wo},multiLineOffset:function(){return UM},one:function(){return uo},pad:function(){return bu},panLinear:function(){return Fo},panLog:function(){return Io},panPow:function(){return Po},panSymlog:function(){return jo},parse:function(){return nY},parseExpression:function(){return MN},parseSelector:function(){return iW},path:function(){return Zm},pathCurves:function(){return sC},pathEqual:function(){return RA},pathParse:function(){return pC},pathRectangle:function(){return RC},pathRender:function(){return EC},pathSymbols:function(){return _C},pathTrail:function(){return ZC},peek:function(){return Co},point:function(){return pO},projection:function(){return YI},quantileLogNormal:function(){return Sp},quantileNormal:function(){return vp},quantileUniform:function(){return Ap},quantiles:function(){return tp},quantizeInterpolator:function(){return Mk},quarter:function(){return zo},quartiles:function(){return ep},random:function(){return ip},randomInteger:function(){return lp},randomKDE:function(){return yp},randomLCG:function(){return sp},randomLogNormal:function(){return kp},randomMixture:function(){return Cp},randomNormal:function(){return mp},randomUniform:function(){return _p},read:function(){return sZ},regressionExp:function(){return Bp},regressionLinear:function(){return Pp},regressionLoess:function(){return zp},regressionLog:function(){return jp},regressionPoly:function(){return Zp},regressionPow:function(){return Lp},regressionQuad:function(){return Rp},renderModule:function(){return DA},repeat:function(){return xu},resetDefaultLocale:function(){return ah},resetSVGClipId:function(){return tE},resetSVGDefIds:function(){return ZA},responseType:function(){return uZ},runtimeContext:function(){return $U},sampleCurve:function(){return Vp},sampleLogNormal:function(){return xp},sampleNormal:function(){return dp},sampleUniform:function(){return Ep},scale:function(){return pk},sceneEqual:function(){return LA},sceneFromJSON:function(){return aO},scenePickVisit:function(){return YE},sceneToJSON:function(){return iO},sceneVisit:function(){return XE},sceneZOrder:function(){return GE},scheme:function(){return Fk},serializeXML:function(){return iA},setRandom:function(){return ap},span:function(){return wu},splitAccessPath:function(){return no},stringValue:function(){return Su},textMetrics:function(){return IM},timeBin:function(){return vc},timeFloor:function(){return Ul},timeFormatLocale:function(){return eh},timeInterval:function(){return Yl},timeOffset:function(){return Jl},timeSequence:function(){return tc},timeUnitSpecifier:function(){return kl},timeUnits:function(){return wl},toBoolean:function(){return ku},toDate:function(){return Eu},toNumber:function(){return Eo},toSet:function(){return Ou},toString:function(){return Mu},transform:function(){return Ad},transforms:function(){return Md},truncate:function(){return Au},truthy:function(){return so},tupleid:function(){return zh},typeParsers:function(){return qR},utcFloor:function(){return Vl},utcInterval:function(){return ql},utcOffset:function(){return Kl},utcSequence:function(){return ec},utcdayofyear:function(){return Fl},utcquarter:function(){return Uo},utcweek:function(){return Il},version:function(){return rY},visitArray:function(){return _u},week:function(){return Ol},writeConfig:function(){return So},zero:function(){return oo},zoomLinear:function(){return Lo},zoomLog:function(){return Ro},zoomPow:function(){return Zo},zoomSymlog:function(){return No}});var y={};n.r(y),n.d(y,{accessPathDepth:function(){return lq},accessPathWithDatum:function(){return rq},compile:function(){return yrt},contains:function(){return LY},deepEqual:function(){return _Y},deleteNestedProperty:function(){return eq},duplicate:function(){return DY},entries:function(){return JY},every:function(){return ZY},fieldIntersection:function(){return XY},flatAccessWithDatum:function(){return iq},getFirstDefined:function(){return cq},hasIntersection:function(){return VY},hash:function(){return jY},internalField:function(){return pq},isBoolean:function(){return KY},isEmpty:function(){return YY},isEqual:function(){return HY},isInternalField:function(){return gq},isNullOrFalse:function(){return BY},isNumeric:function(){return mq},keys:function(){return qY},logicalExpr:function(){return tq},mergeDeep:function(){return NY},never:function(){return TY},normalize:function(){return q5},normalizeAngle:function(){return vq},omit:function(){return IY},pick:function(){return FY},prefixGenerator:function(){return GY},removePathFromField:function(){return sq},replaceAll:function(){return uq},replacePathInField:function(){return oq},resetIdCounter:function(){return dq},setEqual:function(){return WY},some:function(){return RY},stringify:function(){return PY},titleCase:function(){return nq},unique:function(){return UY},uniqueId:function(){return hq},vals:function(){return $Y},varName:function(){return QY},version:function(){return wrt}});var x={};n.r(x),n.d(x,{dark:function(){return Ert},excel:function(){return Ort},fivethirtyeight:function(){return Frt},ggplot2:function(){return Prt},googlecharts:function(){return eit},latimes:function(){return Nrt},powerbi:function(){return pit},quartz:function(){return Hrt},urbaninstitute:function(){return Jrt},version:function(){return git},vox:function(){return Vrt}});var b={};n.r(b),n.d(b,{assign:function(){return elt},default:function(){return wlt},defaultI18n:function(){return alt},format:function(){return xlt},parse:function(){return blt},setGlobalDateI18n:function(){return ult},setGlobalDateMasks:function(){return ylt}});var w={};n.r(w),n.d(w,{Arc:function(){return Oft},DataMarker:function(){return Ift},DataRegion:function(){return jft},Html:function(){return Gft},Image:function(){return Tft},Line:function(){return kft},Region:function(){return _ft},RegionFilter:function(){return Lft},Shape:function(){return Zft},Text:function(){return Eft}});var S={};n.r(S),n.d(S,{ellipsisHead:function(){return Kft},ellipsisMiddle:function(){return tht},ellipsisTail:function(){return Qft},getDefault:function(){return Jft}});var k={};n.r(k),n.d(k,{equidistance:function(){return lht},equidistanceWithReverseBoth:function(){return cht},getDefault:function(){return aht},reserveBoth:function(){return sht},reserveFirst:function(){return oht},reserveLast:function(){return uht}});var C={};n.r(C),n.d(C,{fixedAngle:function(){return dht},getDefault:function(){return hht},unfixedAngle:function(){return pht}});var E={};n.r(E),n.d(E,{autoEllipsis:function(){return S},autoHide:function(){return k},autoRotate:function(){return C}});var M={};n.r(M),n.d(M,{Base:function(){return wht},Circle:function(){return Eht},Html:function(){return Tht},Line:function(){return kht}});var O={};n.r(O),n.d(O,{CONTAINER_CLASS:function(){return $ht},CROSSHAIR_X:function(){return rdt},CROSSHAIR_Y:function(){return idt},LIST_CLASS:function(){return Kht},LIST_ITEM_CLASS:function(){return Qht},MARKER_CLASS:function(){return tdt},NAME_CLASS:function(){return ndt},TITLE_CLASS:function(){return Jht},VALUE_CLASS:function(){return edt}});var A={};n.r(A),n.d(A,{Base:function(){return Qmt},Circle:function(){return eyt},Ellipse:function(){return iyt},Image:function(){return uyt},Line:function(){return fyt},Marker:function(){return pyt},Path:function(){return Cyt},Polygon:function(){return Oyt},Polyline:function(){return _yt},Rect:function(){return Tyt},Text:function(){return Iyt}});var _={};n.r(_),n.d(_,{Canvas:function(){return Ryt},Group:function(){return Jmt},Shape:function(){return A},getArcParams:function(){return _mt},version:function(){return Zyt}});var D={};n.r(D),n.d(D,{Base:function(){return Kyt},Circle:function(){return txt},Dom:function(){return nxt},Ellipse:function(){return ixt},Image:function(){return oxt},Line:function(){return sxt},Marker:function(){return hxt},Path:function(){return pxt},Polygon:function(){return vxt},Polyline:function(){return yxt},Rect:function(){return bxt},Text:function(){return Mxt}});var T={};n.r(T),n.d(T,{Canvas:function(){return Gxt},Group:function(){return $yt},Shape:function(){return D},version:function(){return Xxt}});var F={};n.r(F),n.d(F,{cluster:function(){return RIt},hierarchy:function(){return tTt},pack:function(){return HDt},packEnclose:function(){return CDt},packSiblings:function(){return LDt},partition:function(){return FIt},stratify:function(){return HIt},tree:function(){return $It},treemap:function(){return ePt},treemapBinary:function(){return nPt},treemapDice:function(){return TIt},treemapResquarify:function(){return iPt},treemapSlice:function(){return JIt},treemapSliceDice:function(){return rPt},treemapSquarify:function(){return tPt}});var I=n(67294),P=n(73673),j=n(44925),B=["title","titleId"];var L=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,B);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))})),R=n(15596),Z=n(4942),N=["title","titleId"];var z=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,N);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15m0-3l-3-3m0 0l-3 3m3-3V15"}))})),U=["title","titleId"];var H=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,U);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H6.911a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z"}))})),W=n(29439),V=n(64687),G=n.n(V),X=n(93433),Y=n(75900),q=n.n(Y),$=n(87462),J=n(15671),K=n(43144),Q=n(60136),tt=n(29388),et=n(74165),nt=n(71002),rt=n(15861),it=n(22765);function at(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(n){return e}}function ot(t){var e=new XMLHttpRequest;t.onProgress&&e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var n=new FormData;t.data&&Object.keys(t.data).forEach((function(e){var r=t.data[e];Array.isArray(r)?r.forEach((function(t){n.append("".concat(e,"[]"),t)})):n.append(e,r)})),t.file instanceof Blob?n.append(t.filename,t.file,t.file.name):n.append(t.filename,t.file),e.onerror=function(e){t.onError(e)},e.onload=function(){return e.status<200||e.status>=300?t.onError(function(t,e){var n="cannot ".concat(t.method," ").concat(t.action," ").concat(e.status,"'"),r=new Error(n);return r.status=e.status,r.method=t.method,r.url=t.action,r}(t,e),at(e)):t.onSuccess(at(e),e)},e.open(t.method,t.action,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var r=t.headers||{};return null!==r["X-Requested-With"]&&e.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach((function(t){null!==r[t]&&e.setRequestHeader(t,r[t])})),e.send(n),{abort:function(){e.abort()}}}var ut=+new Date,st=0;function lt(){return"rc-upload-".concat(ut,"-").concat(++st)}var ct=n(27840),ft=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=t.type||"",a=i.replace(/\/.*$/,"");return n.some((function(t){var e=t.trim();if(/^\*(\/\*)?$/.test(t))return!0;if("."===e.charAt(0)){var n=r.toLowerCase(),o=e.toLowerCase(),u=[o];return".jpg"!==o&&".jpeg"!==o||(u=[".jpg",".jpeg"]),u.some((function(t){return n.endsWith(t)}))}return/\/\*$/.test(e)?a===e.replace(/\/.*$/,""):i===e||!!/^\w+$/.test(e)&&((0,ct.ZP)(!1,"Upload takes an invalidate 'accept' type '".concat(e,"'.Skip for check.")),!0)}))}return!0};var ht=function(t,e,n){var r=function t(r,i){r.path=i||"",r.isFile?r.file((function(t){n(t)&&(r.fullPath&&!t.webkitRelativePath&&(Object.defineProperties(t,{webkitRelativePath:{writable:!0}}),t.webkitRelativePath=r.fullPath.replace(/^\//,""),Object.defineProperties(t,{webkitRelativePath:{writable:!1}})),e([t]))})):r.isDirectory&&function(t,e){var n=t.createReader(),r=[];!function t(){n.readEntries((function(n){var i=Array.prototype.slice.apply(n);r=r.concat(i),i.length?t():e(r)}))}()}(r,(function(e){e.forEach((function(e){t(e,"".concat(i).concat(r.name,"/"))}))}))};t.forEach((function(t){r(t.webkitGetAsEntry())}))},dt=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],pt=function(t){(0,Q.Z)(n,t);var e=(0,tt.Z)(n);function n(){var t;(0,J.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).state={uid:lt()},t.reqs={},t.fileInput=void 0,t._isMounted=void 0,t.onChange=function(e){var n=t.props,r=n.accept,i=n.directory,a=e.target.files,o=(0,X.Z)(a).filter((function(t){return!i||ft(t,r)}));t.uploadFiles(o),t.reset()},t.onClick=function(e){var n=t.fileInput;if(n){var r=t.props,i=r.children,a=r.onClick;if(i&&"button"===i.type){var o=n.parentNode;o.focus(),o.querySelector("button").blur()}n.click(),a&&a(e)}},t.onKeyDown=function(e){"Enter"===e.key&&t.onClick(e)},t.onFileDrop=function(e){var n=t.props.multiple;if(e.preventDefault(),"dragover"!==e.type)if(t.props.directory)ht(Array.prototype.slice.call(e.dataTransfer.items),t.uploadFiles,(function(e){return ft(e,t.props.accept)}));else{var r=(0,X.Z)(e.dataTransfer.files).filter((function(e){return ft(e,t.props.accept)}));!1===n&&(r=r.slice(0,1)),t.uploadFiles(r)}},t.uploadFiles=function(e){var n=(0,X.Z)(e),r=n.map((function(e){return e.uid=lt(),t.processFile(e,n)}));Promise.all(r).then((function(e){var n=t.props.onBatchStart;null==n||n(e.map((function(t){return{file:t.origin,parsedFile:t.parsedFile}}))),e.filter((function(t){return null!==t.parsedFile})).forEach((function(e){t.post(e)}))}))},t.processFile=function(){var e=(0,rt.Z)((0,et.Z)().mark((function e(n,r){var i,a,o,u,s,l,c,f,h;return(0,et.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.props.beforeUpload,a=n,!i){e.next=14;break}return e.prev=3,e.next=6,i(n,r);case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=!1;case 12:if(!1!==a){e.next=14;break}return e.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!=typeof(o=t.props.action)){e.next=21;break}return e.next=18,o(n);case 18:u=e.sent,e.next=22;break;case 21:u=o;case 22:if("function"!=typeof(s=t.props.data)){e.next=29;break}return e.next=26,s(n);case 26:l=e.sent,e.next=30;break;case 29:l=s;case 30:return c="object"!==(0,nt.Z)(a)&&"string"!=typeof a||!a?n:a,f=c instanceof File?c:new File([c],n.name,{type:n.type}),(h=f).uid=n.uid,e.abrupt("return",{origin:n,data:l,parsedFile:h,action:u});case 35:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}(),t.saveFileInput=function(e){t.fileInput=e},t}return(0,K.Z)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(t){var e=this,n=t.data,r=t.origin,i=t.action,a=t.parsedFile;if(this._isMounted){var o=this.props,u=o.onStart,s=o.customRequest,l=o.name,c=o.headers,f=o.withCredentials,h=o.method,d=r.uid,p=s||ot,g={action:i,filename:l,data:n,file:a,headers:c,withCredentials:f,method:h||"post",onProgress:function(t){var n=e.props.onProgress;null==n||n(t,a)},onSuccess:function(t,n){var r=e.props.onSuccess;null==r||r(t,a,n),delete e.reqs[d]},onError:function(t,n){var r=e.props.onError;null==r||r(t,n,a),delete e.reqs[d]}};u(r),this.reqs[d]=p(g)}}},{key:"reset",value:function(){this.setState({uid:lt()})}},{key:"abort",value:function(t){var e=this.reqs;if(t){var n=t.uid?t.uid:t;e[n]&&e[n].abort&&e[n].abort(),delete e[n]}else Object.keys(e).forEach((function(t){e[t]&&e[t].abort&&e[t].abort(),delete e[t]}))}},{key:"render",value:function(){var t,e=this.props,n=e.component,r=e.prefixCls,i=e.className,a=e.disabled,o=e.id,u=e.style,s=e.multiple,l=e.accept,c=e.capture,f=e.children,h=e.directory,d=e.openFileDialogOnClick,p=e.onMouseEnter,g=e.onMouseLeave,v=(0,j.Z)(e,dt),m=q()((t={},(0,Z.Z)(t,r,!0),(0,Z.Z)(t,"".concat(r,"-disabled"),a),(0,Z.Z)(t,i,i),t)),y=h?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},x=a?{}:{onClick:d?this.onClick:function(){},onKeyDown:d?this.onKeyDown:function(){},onMouseEnter:p,onMouseLeave:g,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return I.createElement(n,(0,$.Z)({},x,{className:m,role:"button",style:u}),I.createElement("input",(0,$.Z)({},(0,it.Z)(v,{aria:!0,data:!0}),{id:o,type:"file",ref:this.saveFileInput,onClick:function(t){return t.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:l},y,{multiple:s,onChange:this.onChange},null!=c?{capture:c}:{})),f)}}]),n}(I.Component),gt=pt;function vt(){}var mt=function(t){(0,Q.Z)(n,t);var e=(0,tt.Z)(n);function n(){var t;(0,J.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).uploader=void 0,t.saveUploader=function(e){t.uploader=e},t}return(0,K.Z)(n,[{key:"abort",value:function(t){this.uploader.abort(t)}},{key:"render",value:function(){return I.createElement(gt,(0,$.Z)({},this.props,{ref:this.saveUploader}))}}]),n}(I.Component);mt.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:vt,onError:vt,onSuccess:vt,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var yt=mt,xt=n(78154),bt=n(73935),wt=n.t(bt,2),St=n(67170),kt=n(83286),Ct=n(53541),Et=n(57710),Mt=n(1413),Ot={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:e}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:t}}]}},name:"file",theme:"twotone"},At=n(37041),_t=function(t,e){return I.createElement(At.Z,(0,Mt.Z)((0,Mt.Z)({},t),{},{ref:e,icon:Ot}))};_t.displayName="FileTwoTone";var Dt=I.forwardRef(_t),Tt=n(50083),Ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},It=function(t,e){return I.createElement(At.Z,(0,Mt.Z)((0,Mt.Z)({},t),{},{ref:e,icon:Ft}))};It.displayName="PaperClipOutlined";var Pt=I.forwardRef(It),jt={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:t}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:e}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:e}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:e}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:t}}]}},name:"picture",theme:"twotone"},Bt=function(t,e){return I.createElement(At.Z,(0,Mt.Z)((0,Mt.Z)({},t),{},{ref:e,icon:jt}))};Bt.displayName="PictureTwoTone";var Lt=I.forwardRef(Bt),Rt=n(77306),Zt=n(93299);function Nt(){var t=I.useReducer((function(t){return t+1}),0);return(0,W.Z)(t,2)[1]}var zt=n(51880),Ut=n(94221);function Ht(t){return Object.assign(Object.assign({},t),{lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.name,size:t.size,type:t.type,uid:t.uid,percent:0,originFileObj:t})}function Wt(t,e){var n=(0,X.Z)(e),r=n.findIndex((function(e){return e.uid===t.uid}));return-1===r?n.push(t):n[r]=t,n}function Vt(t,e){var n=void 0!==t.uid?"uid":"name";return e.filter((function(e){return e[n]===t[n]}))[0]}var Gt=function(t){return 0===t.indexOf("image/")},Xt=function(t){if(t.type&&!t.thumbUrl)return Gt(t.type);var e=t.thumbUrl||t.url||"",n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split("/"),n=e[e.length-1],r=n.split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(r)||[""])[0]}(e);return!(!/^data:image\//.test(e)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(n))||!/^data:/.test(e)&&!n},Yt=200;function qt(t){return new Promise((function(e){if(t.type&&Gt(t.type)){var n=document.createElement("canvas");n.width=Yt,n.height=Yt,n.style.cssText="position: fixed; left: 0; top: 0; width: ".concat(Yt,"px; height: ").concat(Yt,"px; z-index: 9999; display: none;"),document.body.appendChild(n);var r=n.getContext("2d"),i=new Image;if(i.onload=function(){var t=i.width,a=i.height,o=Yt,u=Yt,s=0,l=0;t>a?l=-((u=a*(Yt/t))-o)/2:s=-((o=t*(Yt/a))-u)/2,r.drawImage(i,s,l,o,u);var c=n.toDataURL();document.body.removeChild(n),e(c)},i.crossOrigin="anonymous",t.type.startsWith("image/svg+xml")){var a=new FileReader;a.addEventListener("load",(function(){a.result&&(i.src=a.result)})),a.readAsDataURL(t)}else i.src=window.URL.createObjectURL(t)}else e("")}))}var $t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},Jt=function(t,e){return I.createElement(At.Z,(0,Mt.Z)((0,Mt.Z)({},t),{},{ref:e,icon:$t}))};Jt.displayName="DeleteOutlined";var Kt=I.forwardRef(Jt),Qt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},te=function(t,e){return I.createElement(At.Z,(0,Mt.Z)((0,Mt.Z)({},t),{},{ref:e,icon:Qt}))};te.displayName="DownloadOutlined";var ee=I.forwardRef(te),ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},re=function(t,e){return I.createElement(At.Z,(0,Mt.Z)((0,Mt.Z)({},t),{},{ref:e,icon:ne}))};re.displayName="EyeOutlined";var ie=I.forwardRef(re),ae=n(86100),oe=n(52051),ue=n(1201),se=n(15663),le=n(8613),ce={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},fe=function(){var t=(0,I.useRef)([]),e=(0,I.useRef)(null);return(0,I.useEffect)((function(){var n=Date.now(),r=!1;t.current.forEach((function(t){if(t){r=!0;var i=t.style;i.transitionDuration=".3s, .3s, .3s, .06s",e.current&&n-e.current<100&&(i.transitionDuration="0s, 0s")}})),r&&(e.current=Date.now())})),t.current},he=["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"],de=function(t){var e=t.className,n=t.percent,r=t.prefixCls,i=t.strokeColor,a=t.strokeLinecap,o=t.strokeWidth,u=t.style,s=t.trailColor,l=t.trailWidth,c=t.transition,f=(0,j.Z)(t,he);delete f.gapPosition;var h=Array.isArray(n)?n:[n],d=Array.isArray(i)?i:[i],p=fe(),g=o/2,v=100-o/2,m="M ".concat("round"===a?g:0,",").concat(g,"\n         L ").concat("round"===a?v:100,",").concat(g),y="0 0 100 ".concat(o),x=0;return I.createElement("svg",(0,$.Z)({className:q()("".concat(r,"-line"),e),viewBox:y,preserveAspectRatio:"none",style:u},f),I.createElement("path",{className:"".concat(r,"-line-trail"),d:m,strokeLinecap:a,stroke:s,strokeWidth:l||o,fillOpacity:"0"}),h.map((function(t,e){var n=1;switch(a){case"round":n=1-o/100;break;case"square":n=1-o/2/100;break;default:n=1}var i={strokeDasharray:"".concat(t*n,"px, 100px"),strokeDashoffset:"-".concat(x,"px"),transition:c||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},u=d[e]||d[d.length-1];return x+=t,I.createElement("path",{key:e,className:"".concat(r,"-line-path"),d:m,strokeLinecap:a,stroke:u,strokeWidth:o,fillOpacity:"0",ref:function(t){p[e]=t},style:i})})))};de.defaultProps=ce,de.displayName="Line";var pe=n(32034),ge=0,ve=(0,pe.Z)();var me=function(t){var e=I.useState(),n=(0,W.Z)(e,2),r=n[0],i=n[1];return I.useEffect((function(){var t;i("rc_progress_".concat((ve?(t=ge,ge+=1):t="TEST_OR_SSR",t)))}),[]),t||r},ye=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function xe(t){return+t.replace("%","")}function be(t){var e=null!=t?t:[];return Array.isArray(e)?e:[e]}var we=100,Se=function(t,e,n,r,i,a,o,u,s,l){var c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,f=n/100*360*((360-a)/360),h=0===a?0:{bottom:0,top:180,left:90,right:-90}[o],d=(100-r)/100*e;return"round"===s&&100!==r&&(d+=l/2)>=e&&(d=e-.01),{stroke:"string"==typeof u?u:void 0,strokeDasharray:"".concat(e,"px ").concat(t),strokeDashoffset:d+c,transform:"rotate(".concat(i+f+h,"deg)"),transformOrigin:"0 0",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},ke=function(t){var e,n=t.id,r=t.prefixCls,i=t.steps,a=t.strokeWidth,o=t.trailWidth,u=t.gapDegree,s=void 0===u?0:u,l=t.gapPosition,c=t.trailColor,f=t.strokeLinecap,h=t.style,d=t.className,p=t.strokeColor,g=t.percent,v=(0,j.Z)(t,ye),m=me(n),y="".concat(m,"-gradient"),x=50-a/2,b=2*Math.PI*x,w=s>0?90+s/2:-90,S=b*((360-s)/360),k="object"===(0,nt.Z)(i)?i:{count:i,space:2},C=k.count,E=k.space,M=Se(b,S,0,100,w,s,l,c,f,a),O=be(g),A=be(p),_=A.find((function(t){return t&&"object"===(0,nt.Z)(t)})),D=fe();return I.createElement("svg",(0,$.Z)({className:q()("".concat(r,"-circle"),d),viewBox:"".concat(-50," ").concat(-50," ").concat(we," ").concat(we),style:h,id:n,role:"presentation"},v),_&&I.createElement("defs",null,I.createElement("linearGradient",{id:y,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(_).sort((function(t,e){return xe(t)-xe(e)})).map((function(t,e){return I.createElement("stop",{key:e,offset:t,stopColor:_[t]})})))),!C&&I.createElement("circle",{className:"".concat(r,"-circle-trail"),r:x,cx:0,cy:0,stroke:c,strokeLinecap:f,strokeWidth:o||a,style:M}),C?function(){var t=Math.round(C*(O[0]/100)),e=100/C,n=0;return new Array(C).fill(null).map((function(i,o){var u=o<=t-1?A[0]:c,f=u&&"object"===(0,nt.Z)(u)?"url(#".concat(y,")"):void 0,h=Se(b,S,n,e,w,s,l,u,"butt",a,E);return n+=100*(S-h.strokeDashoffset+E)/S,I.createElement("circle",{key:o,className:"".concat(r,"-circle-path"),r:x,cx:0,cy:0,stroke:f,strokeWidth:a,opacity:1,style:h,ref:function(t){D[o]=t}})}))}():(e=0,O.map((function(t,n){var i=A[n]||A[A.length-1],o=i&&"object"===(0,nt.Z)(i)?"url(#".concat(y,")"):void 0,u=Se(b,S,e,t,w,s,l,i,f,a);return e+=t,I.createElement("circle",{key:n,className:"".concat(r,"-circle-path"),r:x,cx:0,cy:0,stroke:o,strokeLinecap:f,strokeWidth:a,opacity:0===t?0:1,style:u,ref:function(t){D[n]=t}})})).reverse()))};ke.defaultProps=ce,ke.displayName="Circle";var Ce=ke,Ee=n(65380),Me={adjustX:1,adjustY:1},Oe=[0,0],Ae={left:{points:["cr","cl"],overflow:Me,offset:[-4,0],targetOffset:Oe},right:{points:["cl","cr"],overflow:Me,offset:[4,0],targetOffset:Oe},top:{points:["bc","tc"],overflow:Me,offset:[0,-4],targetOffset:Oe},bottom:{points:["tc","bc"],overflow:Me,offset:[0,4],targetOffset:Oe},topLeft:{points:["bl","tl"],overflow:Me,offset:[0,-4],targetOffset:Oe},leftTop:{points:["tr","tl"],overflow:Me,offset:[-4,0],targetOffset:Oe},topRight:{points:["br","tr"],overflow:Me,offset:[0,-4],targetOffset:Oe},rightTop:{points:["tl","tr"],overflow:Me,offset:[4,0],targetOffset:Oe},bottomRight:{points:["tr","br"],overflow:Me,offset:[0,4],targetOffset:Oe},rightBottom:{points:["bl","br"],overflow:Me,offset:[4,0],targetOffset:Oe},bottomLeft:{points:["tl","bl"],overflow:Me,offset:[0,4],targetOffset:Oe},leftBottom:{points:["br","bl"],overflow:Me,offset:[-4,0],targetOffset:Oe}};function _e(t){var e=t.showArrow,n=t.arrowContent,r=t.children,i=t.prefixCls,a=t.id,o=t.overlayInnerStyle,u=t.className,s=t.style;return I.createElement("div",{className:q()("".concat(i,"-content"),u),style:s},!1!==e&&I.createElement("div",{className:"".concat(i,"-arrow"),key:"arrow"},n),I.createElement("div",{className:"".concat(i,"-inner"),id:a,role:"tooltip",style:o},"function"==typeof r?r():r))}var De=function(t,e){var n=t.overlayClassName,r=t.trigger,i=void 0===r?["hover"]:r,a=t.mouseEnterDelay,o=void 0===a?0:a,u=t.mouseLeaveDelay,s=void 0===u?.1:u,l=t.overlayStyle,c=t.prefixCls,f=void 0===c?"rc-tooltip":c,h=t.children,d=t.onVisibleChange,p=t.afterVisibleChange,g=t.transitionName,v=t.animation,m=t.motion,y=t.placement,x=void 0===y?"right":y,b=t.align,w=void 0===b?{}:b,S=t.destroyTooltipOnHide,k=void 0!==S&&S,C=t.defaultVisible,E=t.getTooltipContainer,M=t.overlayInnerStyle,O=t.arrowContent,A=t.overlay,_=t.id,D=t.showArrow,T=(0,j.Z)(t,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"]),F=(0,I.useRef)(null);(0,I.useImperativeHandle)(e,(function(){return F.current}));var P=(0,Mt.Z)({},T);"visible"in t&&(P.popupVisible=t.visible);var B=!1,L=!1;if("boolean"==typeof k)B=k;else if(k&&"object"===(0,nt.Z)(k)){var R=k.keepParent;B=!0===R,L=!1===R}return I.createElement(Ee.Z,(0,$.Z)({popupClassName:n,prefixCls:f,popup:function(){return I.createElement(_e,{showArrow:D,arrowContent:O,key:"content",prefixCls:f,id:_,overlayInnerStyle:M},A)},action:i,builtinPlacements:Ae,popupPlacement:x,ref:F,popupAlign:w,getPopupContainer:E,onPopupVisibleChange:d,afterPopupVisibleChange:p,popupTransitionName:g,popupAnimation:v,popupMotion:m,defaultPopupVisible:C,destroyPopupOnHide:B,autoDestroy:L,mouseLeaveDelay:s,popupStyle:l,mouseEnterDelay:o},P),h)},Te=(0,I.forwardRef)(De),Fe={adjustX:1,adjustY:1},Ie={adjustX:0,adjustY:0},Pe=[0,0];function je(t){return"boolean"==typeof t?t?Fe:Ie:Object.assign(Object.assign({},Ie),t)}var Be=n(51882),Le=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],Re=n(85146),Ze=n(51540),Ne=n(57416),ze=function(t,e,n,r,i){var a=t/2,o=a-n*(Math.sqrt(2)-1),u=a,s=a+n*(1-1/Math.sqrt(2)),l=a-n*(1-1/Math.sqrt(2)),c=2*a-e*(1/Math.sqrt(2)),f=e*(1/Math.sqrt(2)),h=4*a-c,d=f,p=4*a-s,g=l,v=4*a-o,m=u;return{borderRadius:{_skip_check_:!0,value:"0 0 ".concat(e,"px")},pointerEvents:"none",width:2*t,height:2*t,overflow:"hidden","&::after":{content:'""',position:"absolute",width:t/Math.sqrt(2),height:t/Math.sqrt(2),bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:"0 0 ".concat(e,"px 0")},transform:"translateY(50%) rotate(-135deg)",boxShadow:i,zIndex:0,background:"transparent"},"&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:2*t,height:t/2,background:r,clipPath:"path('M ".concat(o," ").concat(u," A ").concat(n," ").concat(n," 0 0 0 ").concat(s," ").concat(l," L ").concat(c," ").concat(f," A ").concat(e," ").concat(e," 0 0 1 ").concat(h," ").concat(d," L ").concat(p," ").concat(g," A ").concat(n," ").concat(n," 0 0 0 ").concat(v," ").concat(m," Z')"),content:'""'}}};function Ue(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.map((function(t){return"".concat(e).concat(t)})).join(",")}function He(t,e){var n,r=t.componentCls,i=t.sizePopupArrow,a=t.marginXXS,o=t.borderRadiusXS,u=t.borderRadiusOuter,s=t.boxShadowPopoverArrow,l=e.colorBg,c=e.showArrowCls,f=e.contentRadius,h=function(t){var e=t.sizePopupArrow,n=t.contentRadius,r=t.borderRadiusOuter,i=t.limitVerticalRadius,a=e/2-Math.ceil(r*(Math.sqrt(2)-1)),o=(n>12?n+2:12)-a;return{dropdownArrowOffset:o,dropdownArrowOffsetVertical:i?8-a:o}}({sizePopupArrow:i,contentRadius:void 0===f?t.borderRadiusLG:f,borderRadiusOuter:u,limitVerticalRadius:e.limitVerticalRadius}),d=h.dropdownArrowOffsetVertical,p=h.dropdownArrowOffset,g=i/2+a;return(0,Z.Z)({},r,(n={},(0,Z.Z)(n,"".concat(r,"-arrow"),[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},ze(i,o,u,l,s)),{"&:before":{background:l}})]),(0,Z.Z)(n,["&-placement-top ".concat(r,"-arrow"),"&-placement-topLeft ".concat(r,"-arrow"),"&-placement-topRight ".concat(r,"-arrow")].join(","),{bottom:0,transform:"translateY(100%) rotate(180deg)"}),(0,Z.Z)(n,"&-placement-top ".concat(r,"-arrow"),{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"}),(0,Z.Z)(n,"&-placement-topLeft ".concat(r,"-arrow"),{left:{_skip_check_:!0,value:p}}),(0,Z.Z)(n,"&-placement-topRight ".concat(r,"-arrow"),{right:{_skip_check_:!0,value:p}}),(0,Z.Z)(n,["&-placement-bottom ".concat(r,"-arrow"),"&-placement-bottomLeft ".concat(r,"-arrow"),"&-placement-bottomRight ".concat(r,"-arrow")].join(","),{top:0,transform:"translateY(-100%)"}),(0,Z.Z)(n,"&-placement-bottom ".concat(r,"-arrow"),{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"}),(0,Z.Z)(n,"&-placement-bottomLeft ".concat(r,"-arrow"),{left:{_skip_check_:!0,value:p}}),(0,Z.Z)(n,"&-placement-bottomRight ".concat(r,"-arrow"),{right:{_skip_check_:!0,value:p}}),(0,Z.Z)(n,["&-placement-left ".concat(r,"-arrow"),"&-placement-leftTop ".concat(r,"-arrow"),"&-placement-leftBottom ".concat(r,"-arrow")].join(","),{right:{_skip_check_:!0,value:0},transform:"translateX(100%) rotate(90deg)"}),(0,Z.Z)(n,"&-placement-left ".concat(r,"-arrow"),{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"}),(0,Z.Z)(n,"&-placement-leftTop ".concat(r,"-arrow"),{top:d}),(0,Z.Z)(n,"&-placement-leftBottom ".concat(r,"-arrow"),{bottom:d}),(0,Z.Z)(n,["&-placement-right ".concat(r,"-arrow"),"&-placement-rightTop ".concat(r,"-arrow"),"&-placement-rightBottom ".concat(r,"-arrow")].join(","),{left:{_skip_check_:!0,value:0},transform:"translateX(-100%) rotate(-90deg)"}),(0,Z.Z)(n,"&-placement-right ".concat(r,"-arrow"),{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"}),(0,Z.Z)(n,"&-placement-rightTop ".concat(r,"-arrow"),{top:d}),(0,Z.Z)(n,"&-placement-rightBottom ".concat(r,"-arrow"),{bottom:d}),(0,Z.Z)(n,Ue(["&-placement-topLeft","&-placement-top","&-placement-topRight"],c),{paddingBottom:g}),(0,Z.Z)(n,Ue(["&-placement-bottomLeft","&-placement-bottom","&-placement-bottomRight"],c),{paddingTop:g}),(0,Z.Z)(n,Ue(["&-placement-leftTop","&-placement-left","&-placement-leftBottom"],c),{paddingRight:{_skip_check_:!0,value:g}}),(0,Z.Z)(n,Ue(["&-placement-rightTop","&-placement-right","&-placement-rightBottom"],c),{paddingLeft:{_skip_check_:!0,value:g}}),n))}var We=function(t){var e=t.componentCls;return Le.reduce((function(n,r){var i,a=t["".concat(r,"-6")];return n["&".concat(e,"-").concat(r)]=(i={},(0,Z.Z)(i,"".concat(e,"-inner"),{backgroundColor:a}),(0,Z.Z)(i,"".concat(e,"-arrow"),{"--antd-arrow-background-color":a}),i),n}),{})},Ve=function(t){var e,n=t.componentCls,r=t.tooltipMaxWidth,i=t.tooltipColor,a=t.tooltipBg,o=t.tooltipBorderRadius,u=t.zIndexPopup,s=t.controlHeight,l=t.boxShadowSecondary,c=t.paddingSM,f=t.paddingXS,h=t.tooltipRadiusOuter;return[(0,Z.Z)({},n,Object.assign(Object.assign(Object.assign(Object.assign({},(0,Ne.Wf)(t)),(e={position:"absolute",zIndex:u,display:"block","&":[{width:"max-content"},{width:"intrinsic"}],maxWidth:r,visibility:"visible","&-hidden":{display:"none"},"--antd-arrow-background-color":a},(0,Z.Z)(e,"".concat(n,"-inner"),{minWidth:s,minHeight:s,padding:"".concat(c/2,"px ").concat(f,"px"),color:i,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:a,borderRadius:o,boxShadow:l}),(0,Z.Z)(e,["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(","),(0,Z.Z)({},"".concat(n,"-inner"),{borderRadius:o>8?8:o})),(0,Z.Z)(e,"".concat(n,"-content"),{position:"relative"}),e)),We(t)),{"&-rtl":{direction:"rtl"}})),He((0,Re.TS)(t,{borderRadiusOuter:h}),{colorBg:"var(--antd-arrow-background-color)",showArrowCls:"",contentRadius:o,limitVerticalRadius:!0}),(0,Z.Z)({},"".concat(n,"-pure"),{position:"relative",maxWidth:"none"})]},Ge=function(t,e){var n=(0,Ze.Z)("Tooltip",(function(t){if(!1===e)return[];var n=t.borderRadius,r=t.colorTextLightSolid,i=t.colorBgDefault,a=t.borderRadiusOuter,o=(0,Re.TS)(t,{tooltipMaxWidth:250,tooltipColor:r,tooltipBorderRadius:n,tooltipBg:i,tooltipRadiusOuter:a>4?4:a});return[Ve(o),(0,Be._y)(t,"zoom-big-fast")]}),(function(t){return{zIndexPopup:t.zIndexPopupBase+70,colorBgDefault:t.colorBgSpotlight}}));return n(t)},Xe=new RegExp("^(".concat(["pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"].join("|"),")(-inverse)?$"));function Ye(t,e){var n=q()((0,Z.Z)({},"".concat(t,"-").concat(e),e&&Xe.test(e))),r={},i={};return e&&!Xe.test(e)&&(r.background=e,i["--antd-arrow-background-color"]=e),{className:n,overlayStyle:r,arrowStyle:i}}var qe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function $e(t,e){var n=t.type;if((!0===n.__ANT_BUTTON||"button"===t.type)&&t.props.disabled||!0===n.__ANT_SWITCH&&(t.props.disabled||t.props.loading)||!0===n.__ANT_RADIO&&t.props.disabled){var r=function(t,e){var n={},r=Object.assign({},t);return e.forEach((function(e){t&&e in t&&(n[e]=t[e],delete r[e])})),{picked:n,omitted:r}}(t.props.style,["position","left","right","top","bottom","float","display","zIndex"]),i=r.picked,a=r.omitted,o=Object.assign(Object.assign({display:"inline-block"},i),{cursor:"not-allowed",width:t.props.block?"100%":void 0}),u=Object.assign(Object.assign({},a),{pointerEvents:"none"}),s=(0,Ut.Tm)(t,{style:u,className:null});return I.createElement("span",{style:o,className:q()(t.props.className,"".concat(e,"-disabled-compatible-wrapper"))},s)}return t}var Je=I.forwardRef((function(t,e){var n,r,i=t.prefixCls,a=t.openClassName,o=t.getTooltipContainer,u=t.overlayClassName,s=t.color,l=t.overlayInnerStyle,c=t.children,f=t.afterOpenChange,h=t.afterVisibleChange,d=I.useContext(St.E_),p=d.getPopupContainer,g=d.getPrefixCls,v=d.direction;var m=(0,xt.Z)(!1,{value:null!==(n=t.open)&&void 0!==n?n:t.visible,defaultValue:null!==(r=t.defaultOpen)&&void 0!==r?r:t.defaultVisible}),y=(0,W.Z)(m,2),x=y[0],b=y[1],w=function(){var e=t.title,n=t.overlay;return!e&&!n&&0!==e},S=function(){var e=t.builtinPlacements,n=t.arrowPointAtCenter,r=void 0!==n&&n,i=t.autoAdjustOverflow;return e||function(t){var e=t.arrowWidth,n=void 0===e?4:e,r=t.horizontalArrowShift,i=void 0===r?16:r,a=t.verticalArrowShift,o=void 0===a?8:a,u=t.autoAdjustOverflow,s=t.arrowPointAtCenter,l={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(i+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(o+n)]},topRight:{points:["br","tc"],offset:[i+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(o+n)]},bottomRight:{points:["tr","bc"],offset:[i+n,4]},rightBottom:{points:["bl","cr"],offset:[4,o+n]},bottomLeft:{points:["tl","bc"],offset:[-(i+n),4]},leftBottom:{points:["br","cl"],offset:[-4,o+n]}};return Object.keys(l).forEach((function(t){l[t]=s?Object.assign(Object.assign({},l[t]),{overflow:je(u),targetOffset:Pe}):Object.assign(Object.assign({},Ae[t]),{overflow:je(u)}),l[t].ignoreShake=!0})),l}({arrowPointAtCenter:r,autoAdjustOverflow:void 0===i||i})},k=t.getPopupContainer,C=t.placement,E=void 0===C?"top":C,M=t.mouseEnterDelay,O=void 0===M?.1:M,A=t.mouseLeaveDelay,_=void 0===A?.1:A,D=t.overlayStyle,T=qe(t,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),F=g("tooltip",i),P=g(),j=t["data-popover-inject"],B=x;"open"in t||"visible"in t||!w()||(B=!1);var L,R,N=$e((0,Ut.l$)(c)&&!(0,Ut.M2)(c)?c:I.createElement("span",null,c),F),z=N.props,U=z.className&&"string"!=typeof z.className?z.className:q()(z.className,(0,Z.Z)({},a||"".concat(F,"-open"),!0)),H=Ge(F,!j),V=(0,W.Z)(H,2),G=V[0],X=V[1],Y=Ye(F,s),$=Object.assign(Object.assign({},l),Y.overlayStyle),J=Y.arrowStyle,K=q()(u,(0,Z.Z)({},"".concat(F,"-rtl"),"rtl"===v),Y.className,X);return G(I.createElement(Te,Object.assign({},T,{placement:E,mouseEnterDelay:O,mouseLeaveDelay:_,prefixCls:F,overlayClassName:K,overlayStyle:Object.assign(Object.assign({},J),D),getTooltipContainer:k||o||p,ref:e,builtinPlacements:S(),overlay:(L=t.title,R=t.overlay,0===L?L:R||L||""),visible:B,onVisibleChange:function(e){var n,r;b(!w()&&e),w()||(null===(n=t.onOpenChange)||void 0===n||n.call(t,e),null===(r=t.onVisibleChange)||void 0===r||r.call(t,e))},afterVisibleChange:null!=f?f:h,onPopupAlign:function(t,e){var n=S(),r=Object.keys(n).find((function(t){var r,i;return n[t].points[0]===(null===(r=e.points)||void 0===r?void 0:r[0])&&n[t].points[1]===(null===(i=e.points)||void 0===i?void 0:i[1])}));if(r){var i=t.getBoundingClientRect(),a={top:"50%",left:"50%"};/top|Bottom/.test(r)?a.top="".concat(i.height-e.offset[1],"px"):/Top|bottom/.test(r)&&(a.top="".concat(-e.offset[1],"px")),/left|Right/.test(r)?a.left="".concat(i.width-e.offset[0],"px"):/right|Left/.test(r)&&(a.left="".concat(-e.offset[0],"px")),t.style.transformOrigin="".concat(a.left," ").concat(a.top)}},overlayInnerStyle:$,arrowContent:I.createElement("span",{className:"".concat(F,"-arrow-content")}),motion:{motionName:(0,zt.mL)(P,"zoom-big-fast",t.transitionName),motionDeadline:1e3}}),B?(0,Ut.Tm)(N,{className:U}):N))}));Je._InternalPanelDoNotUseOrYouWillBeFired=function(t){var e=t.prefixCls,n=t.className,r=t.placement,i=void 0===r?"top":r,a=t.title,o=t.color,u=t.overlayInnerStyle,s=(0,I.useContext(St.E_).getPrefixCls)("tooltip",e),l=Ge(s,!0),c=(0,W.Z)(l,2),f=c[0],h=c[1],d=Ye(s,o),p=Object.assign(Object.assign({},u),d.overlayStyle),g=d.arrowStyle;return f(I.createElement("div",{className:q()(h,s,"".concat(s,"-pure"),"".concat(s,"-placement-").concat(i),n,d.className),style:g},I.createElement(_e,Object.assign({},t,{className:h,prefixCls:s,overlayInnerStyle:p}),a)))};var Ke=Je,Qe=n(94002);function tn(t){return!t||t<0?0:t>100?100:t}function en(t){var e=t.success,n=t.successPercent;return e&&"progress"in e&&(n=e.progress),e&&"percent"in e&&(n=e.percent),n}var nn=function(t){var e=t.percent,n=tn(en({success:t.success,successPercent:t.successPercent}));return[n,tn(tn(e)-n)]},rn=function(t){var e=t.prefixCls,n=t.width,r=void 0===n?120:n,i=t.strokeWidth,a=void 0===i?Math.max(function(t){return 3/t*100}(r),6):i,o=t.trailColor,u=void 0===o?null:o,s=t.strokeLinecap,l=void 0===s?"round":s,c=t.gapPosition,f=t.gapDegree,h=t.type,d=t.children,p=t.success,g={width:r,height:r,fontSize:.15*r+6},v=I.useMemo((function(){return f||0===f?f:"dashboard"===h?75:void 0}),[f,h]),m=c||"dashboard"===h&&"bottom"||void 0,y="[object Object]"===Object.prototype.toString.call(t.strokeColor),x=function(t){var e=t.success,n=void 0===e?{}:e,r=t.strokeColor;return[n.strokeColor||Qe.ez.green,r||null]}({success:p,strokeColor:t.strokeColor}),b=q()("".concat(e,"-inner"),(0,Z.Z)({},"".concat(e,"-circle-gradient"),y)),w=I.createElement(Ce,{percent:nn(t),strokeWidth:a,trailWidth:a,strokeColor:x,strokeLinecap:l,trailColor:u,prefixCls:e,gapDegree:v,gapPosition:m});return I.createElement("div",{className:b,style:g},r<=20?I.createElement(Ke,{title:d},w):I.createElement(I.Fragment,null,w,d))},an=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},on=function(t,e){var n,r,i=t.from,a=void 0===i?Qe.ez.blue:i,o=t.to,u=void 0===o?Qe.ez.blue:o,s=t.direction,l=void 0===s?"rtl"===e?"to left":"to right":s,c=an(t,["from","to","direction"]);if(0!==Object.keys(c).length){var f=(n=c,r=[],Object.keys(n).forEach((function(t){var e=parseFloat(t.replace(/%/g,""));isNaN(e)||r.push({key:e,value:n[t]})})),r=r.sort((function(t,e){return t.key-e.key})),r.map((function(t){var e=t.key,n=t.value;return"".concat(n," ").concat(e,"%")})).join(", "));return{backgroundImage:"linear-gradient(".concat(l,", ").concat(f,")")}}return{backgroundImage:"linear-gradient(".concat(l,", ").concat(a,", ").concat(u,")")}},un=function(t){var e=t.prefixCls,n=t.direction,r=t.percent,i=t.strokeWidth,a=t.size,o=t.strokeColor,u=t.strokeLinecap,s=void 0===u?"round":u,l=t.children,c=t.trailColor,f=void 0===c?null:c,h=t.success,d=o&&"string"!=typeof o?on(o,n):{backgroundColor:o},p="square"===s||"butt"===s?0:void 0,g={backgroundColor:f||void 0,borderRadius:p},v=Object.assign({width:"".concat(tn(r),"%"),height:i||("small"===a?6:8),borderRadius:p},d),m=en(t),y={width:"".concat(tn(m),"%"),height:i||("small"===a?6:8),borderRadius:p,backgroundColor:null==h?void 0:h.strokeColor};return I.createElement(I.Fragment,null,I.createElement("div",{className:"".concat(e,"-outer")},I.createElement("div",{className:"".concat(e,"-inner"),style:g},I.createElement("div",{className:"".concat(e,"-bg"),style:v}),void 0!==m?I.createElement("div",{className:"".concat(e,"-success-bg"),style:y}):null)),l)},sn=function(t){for(var e=t.size,n=t.steps,r=t.percent,i=void 0===r?0:r,a=t.strokeWidth,o=void 0===a?8:a,u=t.strokeColor,s=t.trailColor,l=void 0===s?null:s,c=t.prefixCls,f=t.children,h=Math.round(n*(i/100)),d="small"===e?2:14,p=new Array(n),g=0;g<n;g++){var v=Array.isArray(u)?u[g]:u;p[g]=I.createElement("div",{key:g,className:q()("".concat(c,"-steps-item"),(0,Z.Z)({},"".concat(c,"-steps-item-active"),g<=h-1)),style:{backgroundColor:g<=h-1?v:l,width:d,height:o}})}return I.createElement("div",{className:"".concat(c,"-steps-outer")},p,f)},ln=n(63346),cn=new ln.E4("antProgressActive",{"0%":{transform:"translateX(-100%) scaleX(0)",opacity:.1},"20%":{transform:"translateX(-100%) scaleX(0)",opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}}),fn=function(t){var e,n,r,i=t.componentCls,a=t.iconCls;return(0,Z.Z)({},i,Object.assign(Object.assign({},(0,Ne.Wf)(t)),(r={display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:t.fontSize,marginInlineEnd:t.marginXS,marginBottom:t.marginXS}},(0,Z.Z)(r,"".concat(i,"-outer"),{display:"inline-block",width:"100%"}),(0,Z.Z)(r,"&".concat(i,"-show-info"),(0,Z.Z)({},"".concat(i,"-outer"),{marginInlineEnd:"calc(-2em - ".concat(t.marginXS,"px)"),paddingInlineEnd:"calc(2em + ".concat(t.paddingXS,"px)")})),(0,Z.Z)(r,"".concat(i,"-inner"),{position:"relative",display:"inline-block",width:"100%",overflow:"hidden",verticalAlign:"middle",backgroundColor:t.progressRemainingColor,borderRadius:t.progressLineRadius}),(0,Z.Z)(r,"".concat(i,"-inner:not(").concat(i,"-circle-gradient)"),(0,Z.Z)({},"".concat(i,"-circle-path"),{stroke:t.colorInfo})),(0,Z.Z)(r,"&".concat(i,"-success-bg, ").concat(i,"-bg"),{position:"relative",backgroundColor:t.colorInfo,borderRadius:t.progressLineRadius,transition:"all ".concat(t.motionDurationSlow," ").concat(t.motionEaseInOutCirc)}),(0,Z.Z)(r,"".concat(i,"-success-bg"),{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:t.colorSuccess}),(0,Z.Z)(r,"".concat(i,"-text"),(0,Z.Z)({display:"inline-block",width:"2em",marginInlineStart:t.marginXS,color:t.progressInfoTextColor,lineHeight:1,whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal"},a,{fontSize:t.fontSize})),(0,Z.Z)(r,"&".concat(i,"-status-active"),(0,Z.Z)({},"".concat(i,"-bg::before"),{position:"absolute",inset:0,backgroundColor:t.colorBgContainer,borderRadius:t.progressLineRadius,opacity:0,animationName:cn,animationDuration:t.progressActiveMotionDuration,animationTimingFunction:t.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'})),(0,Z.Z)(r,"&".concat(i,"-status-exception"),(e={},(0,Z.Z)(e,"".concat(i,"-bg"),{backgroundColor:t.colorError}),(0,Z.Z)(e,"".concat(i,"-text"),{color:t.colorError}),e)),(0,Z.Z)(r,"&".concat(i,"-status-exception ").concat(i,"-inner:not(").concat(i,"-circle-gradient)"),(0,Z.Z)({},"".concat(i,"-circle-path"),{stroke:t.colorError})),(0,Z.Z)(r,"&".concat(i,"-status-success"),(n={},(0,Z.Z)(n,"".concat(i,"-bg"),{backgroundColor:t.colorSuccess}),(0,Z.Z)(n,"".concat(i,"-text"),{color:t.colorSuccess}),n)),(0,Z.Z)(r,"&".concat(i,"-status-success ").concat(i,"-inner:not(").concat(i,"-circle-gradient)"),(0,Z.Z)({},"".concat(i,"-circle-path"),{stroke:t.colorSuccess})),r)))},hn=function(t){var e,n,r=t.componentCls,i=t.iconCls;return n={},(0,Z.Z)(n,r,(e={},(0,Z.Z)(e,"".concat(r,"-circle-trail"),{stroke:t.progressRemainingColor}),(0,Z.Z)(e,"&".concat(r,"-circle ").concat(r,"-inner"),{position:"relative",lineHeight:1,backgroundColor:"transparent"}),(0,Z.Z)(e,"&".concat(r,"-circle ").concat(r,"-text"),(0,Z.Z)({position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",width:"100%",margin:0,padding:0,color:t.colorText,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translate(-50%, -50%)"},i,{fontSize:"".concat(t.fontSize/t.fontSizeSM,"em")})),(0,Z.Z)(e,"".concat(r,"-circle&-status-exception"),(0,Z.Z)({},"".concat(r,"-text"),{color:t.colorError})),(0,Z.Z)(e,"".concat(r,"-circle&-status-success"),(0,Z.Z)({},"".concat(r,"-text"),{color:t.colorSuccess})),e)),(0,Z.Z)(n,"".concat(r,"-inline-circle"),(0,Z.Z)({lineHeight:1},"".concat(r,"-inner"),{verticalAlign:"bottom"})),n},dn=function(t){var e=t.componentCls;return(0,Z.Z)({},e,(0,Z.Z)({},"".concat(e,"-steps"),{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:t.progressStepMinWidth,marginInlineEnd:t.progressStepMarginInlineEnd,backgroundColor:t.progressRemainingColor,transition:"all ".concat(t.motionDurationSlow),"&-active":{backgroundColor:t.colorInfo}}}))},pn=function(t){var e=t.componentCls,n=t.iconCls;return(0,Z.Z)({},e,(0,Z.Z)({},"".concat(e,"-small&-line, ").concat(e,"-small&-line ").concat(e,"-text ").concat(n),{fontSize:t.fontSizeSM}))},gn=(0,Ze.Z)("Progress",(function(t){var e=t.marginXXS/2,n=(0,Re.TS)(t,{progressLineRadius:100,progressInfoTextColor:t.colorText,progressDefaultColor:t.colorInfo,progressRemainingColor:t.colorFillSecondary,progressStepMarginInlineEnd:e,progressStepMinWidth:e,progressActiveMotionDuration:"2.4s"});return[fn(n),hn(n),dn(n),pn(n)]})),vn=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},mn=["normal","exception","active","success"],yn=function(t){var e,n,r=t.prefixCls,i=t.className,a=t.steps,o=t.strokeColor,u=t.percent,s=void 0===u?0:u,l=t.size,c=void 0===l?"default":l,f=t.showInfo,h=void 0===f||f,d=t.type,p=void 0===d?"line":d,g=t.status,v=t.format,m=vn(t,["prefixCls","className","steps","strokeColor","percent","size","showInfo","type","status","format"]),y=I.useMemo((function(){var e=en(t);return parseInt(void 0!==e?e.toString():s.toString(),10)}),[s,t.success,t.successPercent]),x=I.useMemo((function(){return!mn.includes(g)&&y>=100?"success":g||"normal"}),[g,y]),b=I.useContext(St.E_),w=b.getPrefixCls,S=b.direction,k=w("progress",r),C=gn(k),E=(0,W.Z)(C,2),M=E[0],O=E[1],A=I.useMemo((function(){if(!h)return null;var e,n=en(t),r=v||function(t){return"".concat(t,"%")},i="line"===p;return v||"exception"!==x&&"success"!==x?e=r(tn(s),tn(n)):"exception"===x?e=i?I.createElement(ue.Z,null):I.createElement(se.Z,null):"success"===x&&(e=i?I.createElement(ae.Z,null):I.createElement(oe.Z,null)),I.createElement("span",{className:"".concat(k,"-text"),title:"string"==typeof e?e:void 0},e)}),[h,y,x,p,k,v]),_=Array.isArray(o)?o[0]:o,D="string"==typeof o||Array.isArray(o)?o:void 0;"line"===p?n=a?I.createElement(sn,Object.assign({},t,{strokeColor:D,prefixCls:k,steps:a}),A):I.createElement(un,Object.assign({},t,{strokeColor:_,prefixCls:k,direction:S}),A):"circle"!==p&&"dashboard"!==p||(n=I.createElement(rn,Object.assign({},t,{strokeColor:_,prefixCls:k,progressStatus:x}),A));var T=q()(k,(e={},(0,Z.Z)(e,"".concat(k,"-inline-circle"),"circle"===p&&t.width<=20),(0,Z.Z)(e,"".concat(k,"-").concat(("dashboard"===p?"circle":a&&"steps")||p),!0),(0,Z.Z)(e,"".concat(k,"-status-").concat(x),!0),(0,Z.Z)(e,"".concat(k,"-show-info"),h),(0,Z.Z)(e,"".concat(k,"-").concat(c),c),(0,Z.Z)(e,"".concat(k,"-rtl"),"rtl"===S),e),i,O);return M(I.createElement("div",Object.assign({className:T,role:"progressbar"},(0,le.Z)(m,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),n))},xn=yn,bn=I.forwardRef((function(t,e){var n,r,i=t.prefixCls,a=t.className,o=t.style,u=t.locale,s=t.listType,l=t.file,c=t.items,f=t.progress,h=t.iconRender,d=t.actionIconRender,p=t.itemRender,g=t.isImgUrl,v=t.showPreviewIcon,m=t.showRemoveIcon,y=t.showDownloadIcon,x=t.previewIcon,b=t.removeIcon,w=t.downloadIcon,S=t.onPreview,k=t.onDownload,C=t.onClose,E=l.status,M=I.useState(E),O=(0,W.Z)(M,2),A=O[0],_=O[1];I.useEffect((function(){"removed"!==E&&_(E)}),[E]);var D=I.useState(!1),T=(0,W.Z)(D,2),F=T[0],P=T[1],j=I.useRef(null);I.useEffect((function(){return j.current=setTimeout((function(){P(!0)}),300),function(){j.current&&clearTimeout(j.current)}}),[]);var B=h(l),L=I.createElement("div",{className:"".concat(i,"-icon")},B);if("picture"===s||"picture-card"===s)if("uploading"===A||!l.thumbUrl&&!l.url){var R,N=q()((R={},(0,Z.Z)(R,"".concat(i,"-list-item-thumbnail"),!0),(0,Z.Z)(R,"".concat(i,"-list-item-file"),"uploading"!==A),R));L=I.createElement("div",{className:N},B)}else{var z,U=(null==g?void 0:g(l))?I.createElement("img",{src:l.thumbUrl||l.url,alt:l.name,className:"".concat(i,"-list-item-image"),crossOrigin:l.crossOrigin}):B,H=q()((z={},(0,Z.Z)(z,"".concat(i,"-list-item-thumbnail"),!0),(0,Z.Z)(z,"".concat(i,"-list-item-file"),g&&!g(l)),z));L=I.createElement("a",{className:H,onClick:function(t){return S(l,t)},href:l.url||l.thumbUrl,target:"_blank",rel:"noopener noreferrer"},U)}var V=q()("".concat(i,"-list-item"),"".concat(i,"-list-item-").concat(A)),G="string"==typeof l.linkProps?JSON.parse(l.linkProps):l.linkProps,X=m?d(("function"==typeof b?b(l):b)||I.createElement(Kt,null),(function(){return C(l)}),i,u.removeFile):null,Y=y&&"done"===A?d(("function"==typeof w?w(l):w)||I.createElement(ee,null),(function(){return k(l)}),i,u.downloadFile):null,$="picture-card"!==s&&I.createElement("span",{key:"download-delete",className:q()("".concat(i,"-list-item-actions"),{picture:"picture"===s})},Y,X),J=q()("".concat(i,"-list-item-name")),K=l.url?[I.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:J,title:l.name},G,{href:l.url,onClick:function(t){return S(l,t)}}),l.name),$]:[I.createElement("span",{key:"view",className:J,onClick:function(t){return S(l,t)},title:l.name},l.name),$],Q=v?I.createElement("a",{href:l.url||l.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:l.url||l.thumbUrl?void 0:{pointerEvents:"none",opacity:.5},onClick:function(t){return S(l,t)},title:u.previewFile},"function"==typeof x?x(l):x||I.createElement(ie,null)):null,tt="picture-card"===s&&"uploading"!==A&&I.createElement("span",{className:"".concat(i,"-list-item-actions")},Q,"done"===A&&Y,X),et=(0,I.useContext(St.E_).getPrefixCls)(),nt=I.createElement("div",{className:V},L,K,tt,F&&I.createElement(Rt.Z,{motionName:"".concat(et,"-fade"),visible:"uploading"===A,motionDeadline:2e3},(function(t){var e=t.className,n="percent"in l?I.createElement(xn,Object.assign({},f,{type:"line",percent:l.percent})):null;return I.createElement("div",{className:q()("".concat(i,"-list-item-progress"),e)},n)}))),rt=l.response&&"string"==typeof l.response?l.response:(null===(n=l.error)||void 0===n?void 0:n.statusText)||(null===(r=l.error)||void 0===r?void 0:r.message)||u.uploadError,it="error"===A?I.createElement(Ke,{title:rt,getPopupContainer:function(t){return t.parentNode}},nt):nt;return I.createElement("div",{className:q()("".concat(i,"-list-item-container"),a),style:o,ref:e},p?p(it,l,c,{download:k.bind(null,l),preview:S.bind(null,l),remove:C.bind(null,l)}):it)})),wn=bn,Sn=function(t,e){var n,r=t.listType,i=void 0===r?"text":r,a=t.previewFile,o=void 0===a?qt:a,u=t.onPreview,s=t.onDownload,l=t.onRemove,c=t.locale,f=t.iconRender,h=t.isImageUrl,d=void 0===h?Xt:h,p=t.prefixCls,g=t.items,v=void 0===g?[]:g,m=t.showPreviewIcon,y=void 0===m||m,x=t.showRemoveIcon,b=void 0===x||x,w=t.showDownloadIcon,S=void 0!==w&&w,k=t.removeIcon,C=t.previewIcon,E=t.downloadIcon,M=t.progress,O=void 0===M?{strokeWidth:2,showInfo:!1}:M,A=t.appendAction,_=t.appendActionVisible,D=void 0===_||_,T=t.itemRender,F=Nt(),P=I.useState(!1),j=(0,W.Z)(P,2),B=j[0],L=j[1];I.useEffect((function(){"picture"!==i&&"picture-card"!==i||(v||[]).forEach((function(t){"undefined"!=typeof document&&"undefined"!=typeof window&&window.FileReader&&window.File&&(t.originFileObj instanceof File||t.originFileObj instanceof Blob)&&void 0===t.thumbUrl&&(t.thumbUrl="",o&&o(t.originFileObj).then((function(e){t.thumbUrl=e||"",F()})))}))}),[i,v,o]),I.useEffect((function(){L(!0)}),[]);var R=function(t,e){if(u)return null==e||e.preventDefault(),u(t)},N=function(t){"function"==typeof s?s(t):t.url&&window.open(t.url)},z=function(t){null==l||l(t)},U=function(t){if(f)return f(t,i);var e="uploading"===t.status,n=d&&d(t)?I.createElement(Lt,null):I.createElement(Dt,null),r=e?I.createElement(Tt.Z,null):I.createElement(Pt,null);return"picture"===i?r=e?I.createElement(Tt.Z,null):n:"picture-card"===i&&(r=e?c.uploading:n),r},H=function(t,e,n,r){var i={type:"text",size:"small",title:r,onClick:function(n){e(),(0,Ut.l$)(t)&&t.props.onClick&&t.props.onClick(n)},className:"".concat(n,"-list-item-action")};if((0,Ut.l$)(t)){var a=(0,Ut.Tm)(t,Object.assign(Object.assign({},t.props),{onClick:function(){}}));return I.createElement(Zt.Z,Object.assign({},i,{icon:a}))}return I.createElement(Zt.Z,Object.assign({},i),I.createElement("span",null,t))};I.useImperativeHandle(e,(function(){return{handlePreview:R,handleDownload:N}}));var V=I.useContext(St.E_).getPrefixCls,G=V("upload",p),Y=V(),$=q()((n={},(0,Z.Z)(n,"".concat(G,"-list"),!0),(0,Z.Z)(n,"".concat(G,"-list-").concat(i),!0),n)),J=(0,X.Z)(v.map((function(t){return{key:t.uid,file:t}}))),K="picture-card"===i?"animate-inline":"animate",Q={motionDeadline:2e3,motionName:"".concat(G,"-").concat(K),keys:J,motionAppear:B},tt=(0,I.useMemo)((function(){var t=Object.assign({},(0,zt.ZP)(Y));return delete t.onAppearEnd,delete t.onEnterEnd,delete t.onLeaveEnd,t}),[Y]);return"picture-card"!==i&&(Q=Object.assign(Object.assign({},tt),Q)),I.createElement("div",{className:$},I.createElement(Rt.V,Object.assign({},Q,{component:!1}),(function(t){var e=t.key,n=t.file,r=t.className,a=t.style;return I.createElement(wn,{key:e,locale:c,prefixCls:G,className:r,style:a,file:n,items:v,progress:O,listType:i,isImgUrl:d,showPreviewIcon:y,showRemoveIcon:b,showDownloadIcon:S,removeIcon:k,previewIcon:C,downloadIcon:E,iconRender:U,actionIconRender:H,itemRender:T,onPreview:R,onDownload:N,onClose:z})})),A&&I.createElement(Rt.Z,Object.assign({},Q,{visible:D,forceRender:!0}),(function(t){var e=t.className,n=t.style;return(0,Ut.Tm)(A,(function(t){return{className:q()(t.className,e),style:Object.assign(Object.assign(Object.assign({},n),{pointerEvents:e?"none":void 0}),t.style)}}))})))};var kn=I.forwardRef(Sn),Cn=function(t){var e,n=t.componentCls,r=t.iconCls;return(0,Z.Z)({},"".concat(n,"-wrapper"),(0,Z.Z)({},"".concat(n,"-drag"),(e={position:"relative",width:"100%",height:"100%",textAlign:"center",background:t.colorFillAlter,border:"".concat(t.lineWidth,"px dashed ").concat(t.colorBorder),borderRadius:t.borderRadiusLG,cursor:"pointer",transition:"border-color ".concat(t.motionDurationSlow)},(0,Z.Z)(e,n,{padding:"".concat(t.padding,"px 0")}),(0,Z.Z)(e,"".concat(n,"-btn"),{display:"table",width:"100%",height:"100%",outline:"none"}),(0,Z.Z)(e,"".concat(n,"-drag-container"),{display:"table-cell",verticalAlign:"middle"}),(0,Z.Z)(e,"&:not(".concat(n,"-disabled):hover"),{borderColor:t.colorPrimaryHover}),(0,Z.Z)(e,"p".concat(n,"-drag-icon"),(0,Z.Z)({marginBottom:t.margin},r,{color:t.colorPrimary,fontSize:t.uploadThumbnailSize})),(0,Z.Z)(e,"p".concat(n,"-text"),{margin:"0 0 ".concat(t.marginXXS,"px"),color:t.colorTextHeading,fontSize:t.fontSizeLG}),(0,Z.Z)(e,"p".concat(n,"-hint"),{color:t.colorTextDescription,fontSize:t.fontSize}),(0,Z.Z)(e,"&".concat(n,"-disabled"),(0,Z.Z)({cursor:"not-allowed"},"p".concat(n,"-drag-icon ").concat(r,",\n            p").concat(n,"-text,\n            p").concat(n,"-hint\n          "),{color:t.colorTextDisabled})),e)))},En=function(t){var e,n,r,i,a,o=t.componentCls,u=t.antCls,s=t.iconCls,l=t.fontSize,c=t.lineHeight,f="".concat(o,"-list-item"),h="".concat(f,"-actions"),d="".concat(f,"-action"),p=Math.round(l*c);return(0,Z.Z)({},"".concat(o,"-wrapper"),(0,Z.Z)({},"".concat(o,"-list"),Object.assign(Object.assign({},(0,Ne.dF)()),(a={lineHeight:t.lineHeight},(0,Z.Z)(a,f,(n={position:"relative",height:t.lineHeight*l,marginTop:t.marginXS,fontSize:l,display:"flex",alignItems:"center",transition:"background-color ".concat(t.motionDurationSlow),"&:hover":{backgroundColor:t.controlItemBgHover}},(0,Z.Z)(n,"".concat(f,"-name"),Object.assign(Object.assign({},Ne.vS),{padding:"0 ".concat(t.paddingXS,"px"),lineHeight:c,flex:"auto",transition:"all ".concat(t.motionDurationSlow)})),(0,Z.Z)(n,h,(e={},(0,Z.Z)(e,d,{opacity:0}),(0,Z.Z)(e,"".concat(d).concat(u,"-btn-sm"),{height:p,border:0,lineHeight:1,"> span":{transform:"scale(1)"}}),(0,Z.Z)(e,"\n              ".concat(d,":focus,\n              &.picture ").concat(d,"\n            "),{opacity:1}),(0,Z.Z)(e,s,{color:t.colorTextDescription,transition:"all ".concat(t.motionDurationSlow)}),(0,Z.Z)(e,"&:hover ".concat(s),{color:t.colorText}),e)),(0,Z.Z)(n,"".concat(o,"-icon ").concat(s),{color:t.colorTextDescription,fontSize:l}),(0,Z.Z)(n,"".concat(f,"-progress"),{position:"absolute",bottom:-t.uploadProgressOffset,width:"100%",paddingInlineStart:l+t.paddingXS,fontSize:l,lineHeight:0,pointerEvents:"none","> div":{margin:0}}),n)),(0,Z.Z)(a,"".concat(f,":hover ").concat(d),{opacity:1,color:t.colorText}),(0,Z.Z)(a,"".concat(f,"-error"),(i={color:t.colorError},(0,Z.Z)(i,"".concat(f,"-name, ").concat(o,"-icon ").concat(s),{color:t.colorError}),(0,Z.Z)(i,h,(r={},(0,Z.Z)(r,"".concat(s,", ").concat(s,":hover"),{color:t.colorError}),(0,Z.Z)(r,d,{opacity:1}),r)),i)),(0,Z.Z)(a,"".concat(o,"-list-item-container"),{transition:"opacity ".concat(t.motionDurationSlow,", height ").concat(t.motionDurationSlow),"&::before":{display:"table",width:0,height:0,content:'""'}}),a))))},Mn=new ln.E4("uploadAnimateInlineIn",{from:{width:0,height:0,margin:0,padding:0,opacity:0}}),On=new ln.E4("uploadAnimateInlineOut",{to:{width:0,height:0,margin:0,padding:0,opacity:0}}),An=function(t){var e,n=t.componentCls,r="".concat(n,"-animate-inline");return[(0,Z.Z)({},"".concat(n,"-wrapper"),(e={},(0,Z.Z)(e,"".concat(r,"-appear, ").concat(r,"-enter, ").concat(r,"-leave"),{animationDuration:t.motionDurationSlow,animationTimingFunction:t.motionEaseInOutCirc,animationFillMode:"forwards"}),(0,Z.Z)(e,"".concat(r,"-appear, ").concat(r,"-enter"),{animationName:Mn}),(0,Z.Z)(e,"".concat(r,"-leave"),{animationName:On}),e)),Mn,On]},_n=n(56748),Dn=function(t){var e,n,r,i,a=t.componentCls,o=t.iconCls,u=t.uploadThumbnailSize,s=t.uploadProgressOffset,l="".concat(a,"-list"),c="".concat(l,"-item");return(0,Z.Z)({},"".concat(a,"-wrapper"),(0,Z.Z)({},"".concat(l).concat(l,"-picture, ").concat(l).concat(l,"-picture-card"),(i={},(0,Z.Z)(i,c,(n={position:"relative",height:u+2*t.lineWidth+2*t.paddingXS,padding:t.paddingXS,border:"".concat(t.lineWidth,"px ").concat(t.lineType," ").concat(t.colorBorder),borderRadius:t.borderRadiusLG,"&:hover":{background:"transparent"}},(0,Z.Z)(n,"".concat(c,"-thumbnail"),Object.assign(Object.assign({},Ne.vS),(e={width:u,height:u,lineHeight:"".concat(u+t.paddingSM,"px"),textAlign:"center",flex:"none"},(0,Z.Z)(e,o,{fontSize:t.fontSizeHeading2,color:t.colorPrimary}),(0,Z.Z)(e,"img",{display:"block",width:"100%",height:"100%",overflow:"hidden"}),e))),(0,Z.Z)(n,"".concat(c,"-progress"),{bottom:s,width:"calc(100% - ".concat(2*t.paddingSM,"px)"),marginTop:0,paddingInlineStart:u+t.paddingXS}),n)),(0,Z.Z)(i,"".concat(c,"-error"),(0,Z.Z)({borderColor:t.colorError},"".concat(c,"-thumbnail ").concat(o),(r={},(0,Z.Z)(r,"svg path[fill='#e6f7ff']",{fill:t.colorErrorBg}),(0,Z.Z)(r,"svg path[fill='#1890ff']",{fill:t.colorError}),r))),(0,Z.Z)(i,"".concat(c,"-uploading"),(0,Z.Z)({borderStyle:"dashed"},"".concat(c,"-name"),{marginBottom:s})),i)))},Tn=function(t){var e,n,r,i,a=t.componentCls,o=t.iconCls,u=t.fontSizeLG,s=t.colorTextLightSolid,l="".concat(a,"-list"),c="".concat(l,"-item"),f=t.uploadPicCardSize;return(0,Z.Z)({},"".concat(a,"-wrapper").concat(a,"-picture-card-wrapper"),Object.assign(Object.assign({},(0,Ne.dF)()),(i={display:"inline-block",width:"100%"},(0,Z.Z)(i,"".concat(a).concat(a,"-select"),(e={width:f,height:f,marginInlineEnd:t.marginXS,marginBottom:t.marginXS,textAlign:"center",verticalAlign:"top",backgroundColor:t.colorFillAlter,border:"".concat(t.lineWidth,"px dashed ").concat(t.colorBorder),borderRadius:t.borderRadiusLG,cursor:"pointer",transition:"border-color ".concat(t.motionDurationSlow)},(0,Z.Z)(e,"> ".concat(a),{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"}),(0,Z.Z)(e,"&:not(".concat(a,"-disabled):hover"),{borderColor:t.colorPrimary}),e)),(0,Z.Z)(i,"".concat(l).concat(l,"-picture-card"),(r={},(0,Z.Z)(r,"".concat(l,"-item-container"),{display:"inline-block",width:f,height:f,marginBlock:"0 ".concat(t.marginXS,"px"),marginInline:"0 ".concat(t.marginXS,"px"),verticalAlign:"top"}),(0,Z.Z)(r,"&::after",{display:"none"}),(0,Z.Z)(r,c,{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:"calc(100% - ".concat(2*t.paddingXS,"px)"),height:"calc(100% - ".concat(2*t.paddingXS,"px)"),backgroundColor:t.colorBgMask,opacity:0,transition:"all ".concat(t.motionDurationSlow),content:'" "'}}),(0,Z.Z)(r,"".concat(c,":hover"),(0,Z.Z)({},"&::before, ".concat(c,"-actions"),{opacity:1})),(0,Z.Z)(r,"".concat(c,"-actions"),(0,Z.Z)({position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:"all ".concat(t.motionDurationSlow)},"".concat(o,"-eye, ").concat(o,"-download, ").concat(o,"-delete"),{zIndex:10,width:u,margin:"0 ".concat(t.marginXXS,"px"),fontSize:u,cursor:"pointer",transition:"all ".concat(t.motionDurationSlow)})),(0,Z.Z)(r,"".concat(c,"-actions, ").concat(c,"-actions:hover"),(0,Z.Z)({},"".concat(o,"-eye, ").concat(o,"-download, ").concat(o,"-delete"),{color:new _n.C(s).setAlpha(.65).toRgbString(),"&:hover":{color:s}})),(0,Z.Z)(r,"".concat(c,"-thumbnail, ").concat(c,"-thumbnail img"),{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"}),(0,Z.Z)(r,"".concat(c,"-name"),{display:"none",textAlign:"center"}),(0,Z.Z)(r,"".concat(c,"-file + ").concat(c,"-name"),{position:"absolute",bottom:t.margin,display:"block",width:"calc(100% - ".concat(2*t.paddingXS,"px)")}),(0,Z.Z)(r,"".concat(c,"-uploading"),(n={},(0,Z.Z)(n,"&".concat(c),{backgroundColor:t.colorFillAlter}),(0,Z.Z)(n,"&::before, ".concat(o,"-eye, ").concat(o,"-download, ").concat(o,"-delete"),{display:"none"}),n)),(0,Z.Z)(r,"".concat(c,"-progress"),{bottom:t.marginXL,width:"calc(100% - ".concat(2*t.paddingXS,"px)"),paddingInlineStart:0}),r)),i)))},Fn=function(t){var e=t.componentCls;return(0,Z.Z)({},"".concat(e,"-rtl"),{direction:"rtl"})},In=n(16235),Pn=function(t){var e,n=t.componentCls,r=t.colorTextDisabled;return(0,Z.Z)({},"".concat(n,"-wrapper"),Object.assign(Object.assign({},(0,Ne.Wf)(t)),(e={},(0,Z.Z)(e,n,{outline:0,"input[type='file']":{cursor:"pointer"}}),(0,Z.Z)(e,"".concat(n,"-select"),{display:"inline-block"}),(0,Z.Z)(e,"".concat(n,"-disabled"),{color:r,cursor:"not-allowed"}),e)))},jn=(0,Ze.Z)("Upload",(function(t){var e=t.fontSizeHeading3,n=t.fontSize,r=t.lineHeight,i=t.lineWidth,a=t.controlHeightLG,o=Math.round(n*r),u=(0,Re.TS)(t,{uploadThumbnailSize:2*e,uploadProgressOffset:o/2+i,uploadPicCardSize:2.55*a});return[Pn(u),Cn(u),Dn(u),Tn(u),En(u),An(u),Fn(u),(0,In.Z)(u)]})),Bn=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{s(r.next(t))}catch(e){a(e)}}function u(t){try{s(r.throw(t))}catch(e){a(e)}}function s(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,u)}s((r=r.apply(t,e||[])).next())}))},Ln="__LIST_IGNORE_".concat(Date.now(),"__"),Rn=function(t,e){var n=t.fileList,r=t.defaultFileList,i=t.onRemove,a=t.showUploadList,o=void 0===a||a,u=t.listType,s=void 0===u?"text":u,l=t.onPreview,c=t.onDownload,f=t.onChange,h=t.onDrop,d=t.previewFile,p=t.disabled,g=t.locale,v=t.iconRender,m=t.isImageUrl,y=t.progress,x=t.prefixCls,b=t.className,w=t.type,S=void 0===w?"select":w,k=t.children,C=t.style,E=t.itemRender,M=t.maxCount,O=t.data,A=void 0===O?{}:O,_=t.multiple,D=void 0!==_&&_,T=t.action,F=void 0===T?"":T,P=t.accept,j=void 0===P?"":P,B=t.supportServerRender,L=void 0===B||B,R=I.useContext(kt.Z),N=null!=p?p:R,z=(0,xt.Z)(r||[],{value:n,postState:function(t){return null!=t?t:[]}}),U=(0,W.Z)(z,2),H=U[0],V=U[1],Y=I.useState("drop"),$=(0,W.Z)(Y,2),J=$[0],K=$[1],Q=I.useRef(null);I.useMemo((function(){var t=Date.now();(n||[]).forEach((function(e,n){e.uid||Object.isFrozen(e)||(e.uid="__AUTO__".concat(t,"_").concat(n,"__"))}))}),[n]);var tt=function(t,e,n){var r=(0,X.Z)(e);1===M?r=r.slice(-1):M&&(r=r.slice(0,M)),(0,bt.flushSync)((function(){V(r)}));var i={file:t,fileList:r};n&&(i.event=n),null==f||f(i)},et=function(t){var e=t.filter((function(t){return!t.file[Ln]}));if(e.length){var n=e.map((function(t){return Ht(t.file)})),r=(0,X.Z)(H);n.forEach((function(t){r=Wt(t,r)})),n.forEach((function(t,n){var i=t;if(e[n].parsedFile)t.status="uploading";else{var a,o=t.originFileObj;try{a=new File([o],o.name,{type:o.type})}catch(u){(a=new Blob([o],{type:o.type})).name=o.name,a.lastModifiedDate=new Date,a.lastModified=(new Date).getTime()}a.uid=t.uid,i=a}tt(i,r)}))}},nt=function(t,e,n){try{"string"==typeof t&&(t=JSON.parse(t))}catch(a){}if(Vt(e,H)){var r=Ht(e);r.status="done",r.percent=100,r.response=t,r.xhr=n;var i=Wt(r,H);tt(r,i)}},rt=function(t,e){if(Vt(e,H)){var n=Ht(e);n.status="uploading",n.percent=t.percent;var r=Wt(n,H);tt(n,r,t)}},it=function(t,e,n){if(Vt(n,H)){var r=Ht(n);r.error=t,r.response=e,r.status="error";var i=Wt(r,H);tt(r,i)}},at=function(t){var e;Promise.resolve("function"==typeof i?i(t):i).then((function(n){var r;if(!1!==n){var i=function(t,e){var n=void 0!==t.uid?"uid":"name",r=e.filter((function(e){return e[n]!==t[n]}));return r.length===e.length?null:r}(t,H);i&&(e=Object.assign(Object.assign({},t),{status:"removed"}),null==H||H.forEach((function(t){var n=void 0!==e.uid?"uid":"name";t[n]!==e[n]||Object.isFrozen(t)||(t.status="removed")})),null===(r=Q.current)||void 0===r||r.abort(e),tt(e,i))}}))},ot=function(t){K(t.type),"drop"===t.type&&(null==h||h(t))};I.useImperativeHandle(e,(function(){return{onBatchStart:et,onSuccess:nt,onProgress:rt,onError:it,fileList:H,upload:Q.current}}));var ut=I.useContext(St.E_),st=ut.getPrefixCls,lt=ut.direction,ct=st("upload",x),ft=Object.assign(Object.assign({onBatchStart:et,onError:it,onProgress:rt,onSuccess:nt},t),{data:A,multiple:D,action:F,accept:j,supportServerRender:L,prefixCls:ct,disabled:N,beforeUpload:function(e,n){return Bn(void 0,void 0,void 0,G().mark((function r(){var i,a,o,u;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.beforeUpload,a=t.transformFile,o=e,!i){r.next=13;break}return r.next=5,i(e,n);case 5:if(!1!==(u=r.sent)){r.next=8;break}return r.abrupt("return",!1);case 8:if(delete e[Ln],u!==Ln){r.next=12;break}return Object.defineProperty(e,Ln,{value:!0,configurable:!0}),r.abrupt("return",!1);case 12:"object"==typeof u&&u&&(o=u);case 13:if(!a){r.next=17;break}return r.next=16,a(o);case 16:o=r.sent;case 17:return r.abrupt("return",o);case 18:case"end":return r.stop()}}),r)})))},onChange:void 0});delete ft.className,delete ft.style,k&&!N||delete ft.id;var ht=jn(ct),dt=(0,W.Z)(ht,2),pt=dt[0],gt=dt[1],vt=function(t,e){return o?I.createElement(Ct.Z,{componentName:"Upload",defaultLocale:Et.Z.Upload},(function(n){var r="boolean"==typeof o?{}:o,i=r.showRemoveIcon,a=r.showPreviewIcon,u=r.showDownloadIcon,f=r.removeIcon,h=r.previewIcon,p=r.downloadIcon;return I.createElement(kn,{prefixCls:ct,listType:s,items:H,previewFile:d,onPreview:l,onDownload:c,onRemove:at,showRemoveIcon:!N&&i,showPreviewIcon:a,showDownloadIcon:u,removeIcon:f,previewIcon:h,downloadIcon:p,iconRender:v,locale:Object.assign(Object.assign({},n),g),isImageUrl:m,progress:y,appendAction:t,appendActionVisible:e,itemRender:E})})):t},mt=(0,Z.Z)({},"".concat(ct,"-rtl"),"rtl"===lt);if("drag"===S){var wt,Mt=q()(ct,(wt={},(0,Z.Z)(wt,"".concat(ct,"-drag"),!0),(0,Z.Z)(wt,"".concat(ct,"-drag-uploading"),H.some((function(t){return"uploading"===t.status}))),(0,Z.Z)(wt,"".concat(ct,"-drag-hover"),"dragover"===J),(0,Z.Z)(wt,"".concat(ct,"-disabled"),N),(0,Z.Z)(wt,"".concat(ct,"-rtl"),"rtl"===lt),wt),gt);return pt(I.createElement("span",{className:q()("".concat(ct,"-wrapper"),mt,b,gt)},I.createElement("div",{className:Mt,onDrop:ot,onDragOver:ot,onDragLeave:ot,style:C},I.createElement(yt,Object.assign({},ft,{ref:Q,className:"".concat(ct,"-btn")}),I.createElement("div",{className:"".concat(ct,"-drag-container")},k))),vt()))}var Ot,At=q()(ct,"".concat(ct,"-select"),(0,Z.Z)({},"".concat(ct,"-disabled"),N)),_t=(Ot=k?void 0:{display:"none"},I.createElement("div",{className:At,style:Ot},I.createElement(yt,Object.assign({},ft,{ref:Q}))));return pt("picture-card"===s?I.createElement("span",{className:q()("".concat(ct,"-wrapper"),"".concat(ct,"-picture-card-wrapper"),mt,b,gt)},vt(_t,!!k)):I.createElement("span",{className:q()("".concat(ct,"-wrapper"),mt,b,gt)},_t,vt()))};var Zn=I.forwardRef(Rn),Nn=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},zn=I.forwardRef((function(t,e){var n=t.style,r=t.height,i=Nn(t,["style","height"]);return I.createElement(Zn,Object.assign({ref:e},i,{type:"drag",style:Object.assign(Object.assign({},n),{height:r})}))}));var Un=zn,Hn=Zn;Hn.Dragger=Un,Hn.LIST_IGNORE=Ln;var Wn=Hn,Vn=n(75229),Gn=n(69663),Xn=n(28893),Yn=["title","titleId"];var qn=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,Yn);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"}))})),$n=["title","titleId"];var Jn=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,$n);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5"}))})),Kn=["title","titleId"];var Qn=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,Kn);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"}))})),tr=["title","titleId"];var er=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,tr);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"}))})),nr=["title","titleId"];var rr=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,nr);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))})),ir=n(78995),ar=n(58548),or=n(28592),ur=n(20501),sr=function(t){var e=t.summaryConfig,n=e.vizConfig,r=(e.setVizConfig,e.loadingSummary),i=null==n?void 0:n.summary,a=(0,I.useState)(!1),o=a[0],u=a[1],s=function(t){var e=t.samples.map((function(t,e){return I.createElement("span",{key:"samplesrow"+e,className:"border-secondary   border rounded p-1 px-2 block"},t)}));return I.createElement(or.D,{title:"View samples",open:!1},I.createElement("div",{className:"inline-flex gap-2 flex-wrap"},e))},l=null==i?void 0:i.fields.map((function(t,e){return I.createElement("div",{key:"colrow"+e,className:"p-2 mb-3 boprder border-secondary bg-secondary rounded   break-inside-avoid "},I.createElement("div",null," ",I.createElement("span",{className:"text-accent"},function(t,e){switch(void 0===e&&(e=4),t){case"string":return I.createElement(qn,{title:"string",className:"inline-block w-"+e+" h-"+e});case"number":return I.createElement(Jn,{title:"number",className:"inline-block w-"+e+" h-"+e});case"date":return I.createElement(Qn,{title:"date",className:"inline-block w-"+e+" h-"+e});case"category":return I.createElement(er,{title:"category",className:"inline-block w-"+e+" h-"+e});default:return I.createElement(rr,{title:"other",className:"inline-block w-"+e+" h-"+e})}}(t.properties.dtype))," ",I.createElement("span",{className:"capitalize font-semibold break-all"}," ",t.column)),I.createElement("div",{className:""},I.createElement("span",{title:"atomic type"},t.properties.dtype)," |"," ",I.createElement("span",{title:"semantic type"},t.properties.semantic_type," ")),I.createElement("div",{className:"text-xs text-secondary"},t.properties.description),I.createElement("div",{className:"text-xs text-secondary"},"# Unique values: ",t.properties.num_unique_values," "),I.createElement("div",{className:"text-xs text-secondary"},t.properties.min&&" min: "+t.properties.min," ",t.properties.max&&" , max: "+t.properties.max," ",t.properties.std&&" | std: "+t.properties.std.toFixed(3)," "),I.createElement("div",{className:"  text-xs text-secondary border border-secondpary rounded mt-2"},I.createElement(s,{samples:t.properties.samples})))}));return I.createElement("div",{className:""},i&&!r&&I.createElement(I.Fragment,null,I.createElement("div",{className:"font-semibold text-xl mt-6 mb-2"}," ",I.createElement(ir.Z,{className:"inline-block h-5"})," Data Summary"),I.createElement("div",{className:" my-2 text-secondary text-xs"},"An enriched representation of the data (with predicted semantic types and descriptions)"),I.createElement("div",{className:" mb-2"},I.createElement("span",{className:""}," ",i.name," "),I.createElement("span",{className:"ml-1 text-xs text-secondary"},i.dataset_description)),I.createElement("div",{className:"text-sm overflow-auto scroll"},i&&I.createElement(or.D,{title:"data summary | "+i.name,open:!0},I.createElement("div",null,I.createElement("div",{className:"columns-3 gap-3 md:columns-4 xl:columns-5 2xl:columns-6"},l))),!i&&I.createElement("div",null,"Upload a dataset to begin"),r&&I.createElement("div",{className:"my-2 mt-4 text-xs"}," ",I.createElement("span",{className:"text-accent inline-block mr-2"}," ",I.createElement(Xn.Z,{icon:"loading",size:5}))," ","Uploading and Summarizing the data .."," "),I.createElement("div",null,I.createElement("div",{role:"button",onClick:function(){u(!0)},className:"mt-4 inline-block duration-200 hover:text-accent"},"View raw summary?"),I.createElement(ar.Z,{title:"Raw Dataset Summary",open:o,onOk:function(){u(!1)},onCancel:function(){u(!1)}},I.createElement("div",{className:"mb-4"},"The dataset is summarized as the dictionary below."),I.createElement(ur.d,{code:JSON.stringify(i,null,2),language:"javascript"}))))))};function lr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lr(Object(n),!0).forEach((function(e){(0,Z.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fr=function(t){var e=t.config,n=e.setLoadingSummary,r=e.resetStates,i=e.setVizConfig,a=e.setError,o=e.vizConfig,u=[{name:"stocks.csv",url:"https://raw.githubusercontent.com/vega/vega-datasets/next/data/stocks.csv"},{name:"cars.json",url:"https://raw.githubusercontent.com/vega/vega-datasets/next/data/cars.json"},{name:"wheat.json",url:"https://raw.githubusercontent.com/vega/vega-datasets/next/data/wheat.json"},{name:"movies.json",url:"https://raw.githubusercontent.com/vega/vega-datasets/next/data/movies.json"},{name:"seattle-weather.csv",url:"https://raw.githubusercontent.com/vega/vega-datasets/next/data/seattle-weather.csv"},{name:"sp500.csv",url:"https://raw.githubusercontent.com/vega/vega-datasets/next/data/sp500.csv"}].map((function(t,e){return I.createElement("div",{role:"button",onClick:function(){!function(t){n(!0),r();var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({url:t})};fetch("/api/summarize/url",e).then((function(t){return t.json()})).then((function(t){t.status?(n(!1),i(cr(cr({},o),{},{summary:t.summary,goal:null}))):(a({status:!1,message:t.message}),Vn.ZP.error(t.message),n(!1))})).catch((function(t){n(!1),console.log(t),a({status:!1,message:t+""}),Vn.ZP.error(t+"")}))}(t.url)},className:"p-1 border-accent border px-2  rounded duration-300 hover:text-accent",key:"samplerow"+e},t.name)}));return I.createElement("div",null,I.createElement("div",{className:"mb-4 "},I.createElement("div",{className:"mb-2 "},I.createElement("span",{className:"font-semibold "},I.createElement(z,{className:"inline-block h-5"})," Don't have data?")," ",I.createElement("span",{className:"text-sm mb-2 ml-2 "},"Try any of the files below")),I.createElement("div",{className:"col-span-1 flex flex-wrap gap-2"},u)))},hr=n(98393),dr=["title","titleId"];var pr=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,dr);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0120.25 6v12A2.25 2.25 0 0118 20.25H6A2.25 2.25 0 013.75 18V6A2.25 2.25 0 016 3.75h1.5m9 0h-9"}))}));function gr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gr(Object(n),!0).forEach((function(e){(0,Z.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var mr=function(t){var e=t.config,n=e.goals,r=e.setVizConfig,i=e.vizConfig,a=e.loadingGoals,o=I.useState(0),u=o[0],s=o[1];I.useEffect((function(){i.goal||s(0)}),[i.goal]);var l=null==n?void 0:n.map((function(t,e){var n=u===e;return I.createElement("div",{role:"button",onClick:function(){r(vr(vr({},i),{},{goal:t})),s(e)},key:e,className:"mb-3 bg-secondary p-2 break-inside-avoid  text-sm  rounded border  "+(n?" border-accent":"border-transparent")},I.createElement("div",{className:" "}),I.createElement(I.Fragment,null,I.createElement("div",{className:"text-base leading-5 break-words"}," ",I.createElement("span",{className:"pr-2   text-base font-semibold m-1 inline-block border-r-2 border-accent "},e+1)," ",t.question),I.createElement(I.Fragment,null,I.createElement("div",{className:"  mt-2 text-accent break-all "},t.visualization),I.createElement("div",{className:"  text-gray-500 break-word"},t.rationale))))}));return I.createElement("div",{className:" mt-10"},n&&!a&&i.summary&&I.createElement("div",{className:" "},I.createElement("div",{className:"font-semibold text-xl  mb-2 text-secopndary"},I.createElement(hr.Z,{className:"inline-block h-5"})," Goal Exploration"),I.createElement("div",{className:" my-2 text-secondary text-xs"},"A list of automatically generated data exploration goals (hypothesis) based on the data summary above."),I.createElement(or.D,{title:"Goals ("+n.length+")",open:!0},I.createElement("div",{className:"columns-3 gap-3 md:columns-4 xl:columns-5 2xl:columns-6"},l)),I.createElement("div",{className:"mt-2 hidden"},I.createElement(or.Cw,{onClick:function(){Vn.ZP.info("Feature in development")}},"Story"," ",I.createElement(pr,{className:"inline-block h-5 mr-2 -mt-1"}))," ",I.createElement("span",{className:"mt-1 text-xs block"}," ","Generate a story based on these goals."," "))))},yr=n(9796),xr=["title","titleId"];var br=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,xr);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))})),wr=["title","titleId"];var Sr=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,wr);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))})),kr=n(66275),Cr=n(9648),Er=n(4108),Mr=["xxl","xl","lg","md","sm","xs"];function Or(){var t=(0,Er.dQ)(),e=(0,W.Z)(t,2)[1],n=function(t){return{xs:"(max-width: ".concat(t.screenXSMax,"px)"),sm:"(min-width: ".concat(t.screenSM,"px)"),md:"(min-width: ".concat(t.screenMD,"px)"),lg:"(min-width: ".concat(t.screenLG,"px)"),xl:"(min-width: ".concat(t.screenXL,"px)"),xxl:"(min-width: ".concat(t.screenXXL,"px)")}}(function(t){var e=t,n=[].concat(Mr).reverse();return n.forEach((function(t,r){var i=t.toUpperCase(),a="screen".concat(i,"Min"),o="screen".concat(i);if(!(e[a]<=e[o]))throw new Error("".concat(a,"<=").concat(o," fails : !(").concat(e[a],"<=").concat(e[o],")"));if(r<n.length-1){var u="screen".concat(i,"Max");if(!(e[o]<=e[u]))throw new Error("".concat(o,"<=").concat(u," fails : !(").concat(e[o],"<=").concat(e[u],")"));var s=n[r+1].toUpperCase(),l="screen".concat(s,"Min");if(!(e[u]<=e[l]))throw new Error("".concat(u,"<=").concat(l," fails : !(").concat(e[u],"<=").concat(e[l],")"))}})),t}(e));return I.useMemo((function(){var t=new Map,e=-1,r={};return{matchHandlers:{},dispatch:function(e){return r=e,t.forEach((function(t){return t(r)})),t.size>=1},subscribe:function(n){return t.size||this.register(),e+=1,t.set(e,n),n(r),e},unsubscribe:function(e){t.delete(e),t.size||this.unregister()},unregister:function(){var e=this;Object.keys(n).forEach((function(t){var r=n[t],i=e.matchHandlers[r];null==i||i.mql.removeListener(null==i?void 0:i.listener)})),t.clear()},register:function(){var t=this;Object.keys(n).forEach((function(e){var i=n[e],a=function(n){var i=n.matches;t.dispatch(Object.assign(Object.assign({},r),(0,Z.Z)({},e,i)))},o=window.matchMedia(i);o.addListener(a),t.matchHandlers[i]={mql:o,listener:a},a(o)}))},responsiveMap:n}}),[e])}var Ar=(0,I.createContext)({}),_r=function(t){var e=t.componentCls;return(0,Z.Z)({},e,{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around ":{justifyContent:"space-around"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}})},Dr=function(t){var e=t.componentCls;return(0,Z.Z)({},e,{position:"relative",maxWidth:"100%",minHeight:1})},Tr=function(t,e){return function(t,e){for(var n=t.componentCls,r=t.gridColumns,i={},a=r;a>=0;a--)0===a?(i["".concat(n).concat(e,"-").concat(a)]={display:"none"},i["".concat(n,"-push-").concat(a)]={insetInlineStart:"auto"},i["".concat(n,"-pull-").concat(a)]={insetInlineEnd:"auto"},i["".concat(n).concat(e,"-push-").concat(a)]={insetInlineStart:"auto"},i["".concat(n).concat(e,"-pull-").concat(a)]={insetInlineEnd:"auto"},i["".concat(n).concat(e,"-offset-").concat(a)]={marginInlineEnd:0},i["".concat(n).concat(e,"-order-").concat(a)]={order:0}):(i["".concat(n).concat(e,"-").concat(a)]={display:"block",flex:"0 0 ".concat(a/r*100,"%"),maxWidth:"".concat(a/r*100,"%")},i["".concat(n).concat(e,"-push-").concat(a)]={insetInlineStart:"".concat(a/r*100,"%")},i["".concat(n).concat(e,"-pull-").concat(a)]={insetInlineEnd:"".concat(a/r*100,"%")},i["".concat(n).concat(e,"-offset-").concat(a)]={marginInlineStart:"".concat(a/r*100,"%")},i["".concat(n).concat(e,"-order-").concat(a)]={order:a});return i}(t,e)},Fr=(0,Ze.Z)("Grid",(function(t){return[_r(t)]})),Ir=(0,Ze.Z)("Grid",(function(t){var e=(0,Re.TS)(t,{gridColumns:24}),n={"-sm":e.screenSMMin,"-md":e.screenMDMin,"-lg":e.screenLGMin,"-xl":e.screenXLMin,"-xxl":e.screenXXLMin};return[Dr(e),Tr(e,""),Tr(e,"-xs"),Object.keys(n).map((function(t){return function(t,e,n){return(0,Z.Z)({},"@media (min-width: ".concat(e,"px)"),Object.assign({},Tr(t,n)))}(e,n[t],t)})).reduce((function(t,e){return Object.assign(Object.assign({},t),e)}),{})]})),Pr=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function jr(t,e){var n=I.useState("string"==typeof t?t:""),r=(0,W.Z)(n,2),i=r[0],a=r[1];return I.useEffect((function(){!function(){if("string"==typeof t&&a(t),"object"==typeof t)for(var n=0;n<Mr.length;n++){var r=Mr[n];if(e[r]){var i=t[r];if(void 0!==i)return void a(i)}}}()}),[JSON.stringify(t),e]),i}var Br=I.forwardRef((function(t,e){var n,r,i,a,o,u=t.prefixCls,s=t.justify,l=t.align,c=t.className,f=t.style,h=t.children,d=t.gutter,p=void 0===d?0:d,g=t.wrap,v=Pr(t,["prefixCls","justify","align","className","style","children","gutter","wrap"]),m=I.useContext(St.E_),y=m.getPrefixCls,x=m.direction,b=I.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),w=(0,W.Z)(b,2),S=w[0],k=w[1],C=I.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),E=(0,W.Z)(C,2),M=E[0],O=E[1],A=jr(l,M),_=jr(s,M),D=(r=I.useState(!1),i=(0,W.Z)(r,2),a=i[0],o=i[1],I.useEffect((function(){o((0,Cr.fk)())}),[]),a),T=I.useRef(p),F=Or();I.useEffect((function(){var t=F.subscribe((function(t){O(t);var e=T.current||0;(!Array.isArray(e)&&"object"==typeof e||Array.isArray(e)&&("object"==typeof e[0]||"object"==typeof e[1]))&&k(t)}));return function(){return F.unsubscribe(t)}}),[]);var P,j=y("row",u),B=Fr(j),L=(0,W.Z)(B,2),R=L[0],N=L[1],z=(P=[void 0,void 0],(Array.isArray(p)?p:[p,void 0]).forEach((function(t,e){if("object"==typeof t)for(var n=0;n<Mr.length;n++){var r=Mr[n];if(S[r]&&void 0!==t[r]){P[e]=t[r];break}}else P[e]=t})),P),U=q()(j,(n={},(0,Z.Z)(n,"".concat(j,"-no-wrap"),!1===g),(0,Z.Z)(n,"".concat(j,"-").concat(_),_),(0,Z.Z)(n,"".concat(j,"-").concat(A),A),(0,Z.Z)(n,"".concat(j,"-rtl"),"rtl"===x),n),c,N),H={},V=null!=z[0]&&z[0]>0?z[0]/-2:void 0,G=null!=z[1]&&z[1]>0?z[1]/-2:void 0;if(V&&(H.marginLeft=V,H.marginRight=V),D){var X=(0,W.Z)(z,2);H.rowGap=X[1]}else G&&(H.marginTop=G,H.marginBottom=G);var Y=(0,W.Z)(z,2),$=Y[0],J=Y[1],K=I.useMemo((function(){return{gutter:[$,J],wrap:g,supportFlexGap:D}}),[$,J,g,D]);return R(I.createElement(Ar.Provider,{value:K},I.createElement("div",Object.assign({},v,{className:U,style:Object.assign(Object.assign({},H),f),ref:e}),h)))}));var Lr=Br;var Rr=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=(0,I.useRef)({}),n=Nt(),r=Or();return(0,I.useEffect)((function(){var i=r.subscribe((function(r){e.current=r,t&&n()}));return function(){return r.unsubscribe(i)}}),[]),e.current},Zr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},Nr=function(t,e){return I.createElement(At.Z,(0,Mt.Z)((0,Mt.Z)({},t),{},{ref:e,icon:Zr}))};Nr.displayName="DoubleLeftOutlined";var zr=I.forwardRef(Nr),Ur={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},Hr=function(t,e){return I.createElement(At.Z,(0,Mt.Z)((0,Mt.Z)({},t),{},{ref:e,icon:Ur}))};Hr.displayName="DoubleRightOutlined";var Wr=I.forwardRef(Hr),Vr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},Gr=function(t,e){return I.createElement(At.Z,(0,Mt.Z)((0,Mt.Z)({},t),{},{ref:e,icon:Vr}))};Gr.displayName="LeftOutlined";var Xr=I.forwardRef(Gr),Yr=n(47462),qr=function(t){var e,n="".concat(t.rootPrefixCls,"-item"),r=q()(n,"".concat(n,"-").concat(t.page),(e={},(0,Z.Z)(e,"".concat(n,"-active"),t.active),(0,Z.Z)(e,"".concat(n,"-disabled"),!t.page),(0,Z.Z)(e,t.className,!!t.className),e));return I.createElement("li",{title:t.showTitle?t.page:null,className:r,onClick:function(){t.onClick(t.page)},onKeyPress:function(e){t.onKeyPress(e,t.onClick,t.page)},tabIndex:"0"},t.itemRender(t.page,"page",I.createElement("a",{rel:"nofollow"},t.page)))},$r=13,Jr=38,Kr=40,Qr=function(t){(0,Q.Z)(n,t);var e=(0,tt.Z)(n);function n(){var t;(0,J.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).state={goInputText:""},t.buildOptionText=function(e){return"".concat(e," ").concat(t.props.locale.items_per_page)},t.changeSize=function(e){t.props.changeSize(Number(e))},t.handleChange=function(e){t.setState({goInputText:e.target.value})},t.handleBlur=function(e){var n=t.props,r=n.goButton,i=n.quickGo,a=n.rootPrefixCls,o=t.state.goInputText;r||""===o||(t.setState({goInputText:""}),e.relatedTarget&&(e.relatedTarget.className.indexOf("".concat(a,"-item-link"))>=0||e.relatedTarget.className.indexOf("".concat(a,"-item"))>=0)||i(t.getValidValue()))},t.go=function(e){""!==t.state.goInputText&&(e.keyCode!==$r&&"click"!==e.type||(t.setState({goInputText:""}),t.props.quickGo(t.getValidValue())))},t}return(0,K.Z)(n,[{key:"getValidValue",value:function(){var t=this.state.goInputText;return!t||isNaN(t)?void 0:Number(t)}},{key:"getPageSizeOptions",value:function(){var t=this.props,e=t.pageSize,n=t.pageSizeOptions;return n.some((function(t){return t.toString()===e.toString()}))?n:n.concat([e.toString()]).sort((function(t,e){return(isNaN(Number(t))?0:Number(t))-(isNaN(Number(e))?0:Number(e))}))}},{key:"render",value:function(){var t=this,e=this.props,n=e.pageSize,r=e.locale,i=e.rootPrefixCls,a=e.changeSize,o=e.quickGo,u=e.goButton,s=e.selectComponentClass,l=e.buildOptionText,c=e.selectPrefixCls,f=e.disabled,h=this.state.goInputText,d="".concat(i,"-options"),p=s,g=null,v=null,m=null;if(!a&&!o)return null;var y=this.getPageSizeOptions();if(a&&p){var x=y.map((function(e,n){return I.createElement(p.Option,{key:n,value:e.toString()},(l||t.buildOptionText)(e))}));g=I.createElement(p,{disabled:f,prefixCls:c,showSearch:!1,className:"".concat(d,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(n||y[0]).toString(),onChange:this.changeSize,getPopupContainer:function(t){return t.parentNode},"aria-label":r.page_size,defaultOpen:!1},x)}return o&&(u&&(m="boolean"==typeof u?I.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:f,className:"".concat(d,"-quick-jumper-button")},r.jump_to_confirm):I.createElement("span",{onClick:this.go,onKeyUp:this.go},u)),v=I.createElement("div",{className:"".concat(d,"-quick-jumper")},r.jump_to,I.createElement("input",{disabled:f,type:"text",value:h,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":r.page}),r.page,m)),I.createElement("li",{className:"".concat(d)},g,v)}}]),n}(I.Component);Qr.defaultProps={pageSizeOptions:["10","20","50","100"]};var ti=Qr;function ei(){}function ni(t){var e=Number(t);return"number"==typeof e&&!isNaN(e)&&isFinite(e)&&Math.floor(e)===e}function ri(t,e,n){var r=void 0===t?e.pageSize:t;return Math.floor((n.total-1)/r)+1}var ii=function(t){(0,Q.Z)(n,t);var e=(0,tt.Z)(n);function n(t){var r;(0,J.Z)(this,n),(r=e.call(this,t)).getJumpPrevPage=function(){return Math.max(1,r.state.current-(r.props.showLessItems?3:5))},r.getJumpNextPage=function(){return Math.min(ri(void 0,r.state,r.props),r.state.current+(r.props.showLessItems?3:5))},r.getItemIcon=function(t,e){var n=r.props.prefixCls,i=t||I.createElement("button",{type:"button","aria-label":e,className:"".concat(n,"-item-link")});return"function"==typeof t&&(i=I.createElement(t,(0,Mt.Z)({},r.props))),i},r.savePaginationNode=function(t){r.paginationNode=t},r.isValid=function(t){var e=r.props.total;return ni(t)&&t!==r.state.current&&ni(e)&&e>0},r.shouldDisplayQuickJumper=function(){var t=r.props,e=t.showQuickJumper;return!(t.total<=r.state.pageSize)&&e},r.handleKeyDown=function(t){t.keyCode!==Jr&&t.keyCode!==Kr||t.preventDefault()},r.handleKeyUp=function(t){var e=r.getValidValue(t);e!==r.state.currentInputValue&&r.setState({currentInputValue:e}),t.keyCode===$r?r.handleChange(e):t.keyCode===Jr?r.handleChange(e-1):t.keyCode===Kr&&r.handleChange(e+1)},r.handleBlur=function(t){var e=r.getValidValue(t);r.handleChange(e)},r.changePageSize=function(t){var e=r.state.current,n=ri(t,r.state,r.props);e=e>n?n:e,0===n&&(e=r.state.current),"number"==typeof t&&("pageSize"in r.props||r.setState({pageSize:t}),"current"in r.props||r.setState({current:e,currentInputValue:e})),r.props.onShowSizeChange(e,t),"onChange"in r.props&&r.props.onChange&&r.props.onChange(e,t)},r.handleChange=function(t){var e=r.props,n=e.disabled,i=e.onChange,a=r.state,o=a.pageSize,u=a.current,s=a.currentInputValue;if(r.isValid(t)&&!n){var l=ri(void 0,r.state,r.props),c=t;return t>l?c=l:t<1&&(c=1),"current"in r.props||r.setState({current:c}),c!==s&&r.setState({currentInputValue:c}),i(c,o),c}return u},r.prev=function(){r.hasPrev()&&r.handleChange(r.state.current-1)},r.next=function(){r.hasNext()&&r.handleChange(r.state.current+1)},r.jumpPrev=function(){r.handleChange(r.getJumpPrevPage())},r.jumpNext=function(){r.handleChange(r.getJumpNextPage())},r.hasPrev=function(){return r.state.current>1},r.hasNext=function(){return r.state.current<ri(void 0,r.state,r.props)},r.runIfEnter=function(t,e){if("Enter"===t.key||13===t.charCode){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];e.apply(void 0,r)}},r.runIfEnterPrev=function(t){r.runIfEnter(t,r.prev)},r.runIfEnterNext=function(t){r.runIfEnter(t,r.next)},r.runIfEnterJumpPrev=function(t){r.runIfEnter(t,r.jumpPrev)},r.runIfEnterJumpNext=function(t){r.runIfEnter(t,r.jumpNext)},r.handleGoTO=function(t){t.keyCode!==$r&&"click"!==t.type||r.handleChange(r.state.currentInputValue)};var i=t.onChange!==ei;"current"in t&&!i&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var a=t.defaultCurrent;"current"in t&&(a=t.current);var o=t.defaultPageSize;return"pageSize"in t&&(o=t.pageSize),a=Math.min(a,ri(o,void 0,t)),r.state={current:a,currentInputValue:a,pageSize:o},r}return(0,K.Z)(n,[{key:"componentDidUpdate",value:function(t,e){var n=this.props.prefixCls;if(e.current!==this.state.current&&this.paginationNode){var r=this.paginationNode.querySelector(".".concat(n,"-item-").concat(e.current));r&&document.activeElement===r&&r.blur()}}},{key:"getValidValue",value:function(t){var e=t.target.value,n=ri(void 0,this.state,this.props),r=this.state.currentInputValue;return""===e?e:isNaN(Number(e))?r:e>=n?n:Number(e)}},{key:"getShowSizeChanger",value:function(){var t=this.props,e=t.showSizeChanger,n=t.total,r=t.totalBoundaryShowSizeChanger;return void 0!==e?e:n>r}},{key:"renderPrev",value:function(t){var e=this.props,n=e.prevIcon,r=(0,e.itemRender)(t,"prev",this.getItemIcon(n,"prev page")),i=!this.hasPrev();return(0,I.isValidElement)(r)?(0,I.cloneElement)(r,{disabled:i}):r}},{key:"renderNext",value:function(t){var e=this.props,n=e.nextIcon,r=(0,e.itemRender)(t,"next",this.getItemIcon(n,"next page")),i=!this.hasNext();return(0,I.isValidElement)(r)?(0,I.cloneElement)(r,{disabled:i}):r}},{key:"render",value:function(){var t=this,e=this.props,n=e.prefixCls,r=e.className,i=e.style,a=e.disabled,o=e.hideOnSinglePage,u=e.total,s=e.locale,l=e.showQuickJumper,c=e.showLessItems,f=e.showTitle,h=e.showTotal,d=e.simple,p=e.itemRender,g=e.showPrevNextJumpers,v=e.jumpPrevIcon,m=e.jumpNextIcon,y=e.selectComponentClass,x=e.selectPrefixCls,b=e.pageSizeOptions,w=this.state,S=w.current,k=w.pageSize,C=w.currentInputValue;if(!0===o&&u<=k)return null;var E=ri(void 0,this.state,this.props),M=[],O=null,A=null,_=null,D=null,T=null,F=l&&l.goButton,P=c?1:2,j=S-1>0?S-1:0,B=S+1<E?S+1:E,L=Object.keys(this.props).reduce((function(e,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(e[n]=t.props[n]),e}),{}),R=h&&I.createElement("li",{className:"".concat(n,"-total-text")},h(u,[0===u?0:(S-1)*k+1,S*k>u?u:S*k]));if(d)return F&&(T="boolean"==typeof F?I.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},s.jump_to_confirm):I.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},F),T=I.createElement("li",{title:f?"".concat(s.jump_to).concat(S,"/").concat(E):null,className:"".concat(n,"-simple-pager")},T)),I.createElement("ul",(0,$.Z)({className:q()(n,"".concat(n,"-simple"),(0,Z.Z)({},"".concat(n,"-disabled"),a),r),style:i,ref:this.savePaginationNode},L),R,I.createElement("li",{title:f?s.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:q()("".concat(n,"-prev"),(0,Z.Z)({},"".concat(n,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},this.renderPrev(j)),I.createElement("li",{title:f?"".concat(S,"/").concat(E):null,className:"".concat(n,"-simple-pager")},I.createElement("input",{type:"text",value:C,disabled:a,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:"3"}),I.createElement("span",{className:"".concat(n,"-slash")},"/"),E),I.createElement("li",{title:f?s.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:q()("".concat(n,"-next"),(0,Z.Z)({},"".concat(n,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(B)),T);if(E<=3+2*P){var N={locale:s,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:f,itemRender:p};E||M.push(I.createElement(qr,(0,$.Z)({},N,{key:"noPager",page:1,className:"".concat(n,"-item-disabled")})));for(var z=1;z<=E;z+=1){var U=S===z;M.push(I.createElement(qr,(0,$.Z)({},N,{key:z,page:z,active:U})))}}else{var H=c?s.prev_3:s.prev_5,W=c?s.next_3:s.next_5;g&&(O=I.createElement("li",{title:f?H:null,key:"prev",onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:q()("".concat(n,"-jump-prev"),(0,Z.Z)({},"".concat(n,"-jump-prev-custom-icon"),!!v))},p(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(v,"prev page"))),A=I.createElement("li",{title:f?W:null,key:"next",tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:q()("".concat(n,"-jump-next"),(0,Z.Z)({},"".concat(n,"-jump-next-custom-icon"),!!m))},p(this.getJumpNextPage(),"jump-next",this.getItemIcon(m,"next page")))),D=I.createElement(qr,{locale:s,last:!0,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:E,page:E,active:!1,showTitle:f,itemRender:p}),_=I.createElement(qr,{locale:s,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:f,itemRender:p});var V=Math.max(1,S-P),G=Math.min(S+P,E);S-1<=P&&(G=1+2*P),E-S<=P&&(V=E-2*P);for(var X=V;X<=G;X+=1){var Y=S===X;M.push(I.createElement(qr,{locale:s,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:X,page:X,active:Y,showTitle:f,itemRender:p}))}S-1>=2*P&&3!==S&&(M[0]=(0,I.cloneElement)(M[0],{className:"".concat(n,"-item-after-jump-prev")}),M.unshift(O)),E-S>=2*P&&S!==E-2&&(M[M.length-1]=(0,I.cloneElement)(M[M.length-1],{className:"".concat(n,"-item-before-jump-next")}),M.push(A)),1!==V&&M.unshift(_),G!==E&&M.push(D)}var J=!this.hasPrev()||!E,K=!this.hasNext()||!E;return I.createElement("ul",(0,$.Z)({className:q()(n,r,(0,Z.Z)({},"".concat(n,"-disabled"),a)),style:i,ref:this.savePaginationNode},L),R,I.createElement("li",{title:f?s.prev_page:null,onClick:this.prev,tabIndex:J?null:0,onKeyPress:this.runIfEnterPrev,className:q()("".concat(n,"-prev"),(0,Z.Z)({},"".concat(n,"-disabled"),J)),"aria-disabled":J},this.renderPrev(j)),M,I.createElement("li",{title:f?s.next_page:null,onClick:this.next,tabIndex:K?null:0,onKeyPress:this.runIfEnterNext,className:q()("".concat(n,"-next"),(0,Z.Z)({},"".concat(n,"-disabled"),K)),"aria-disabled":K},this.renderNext(B)),I.createElement(ti,{disabled:a,locale:s,rootPrefixCls:n,selectComponentClass:y,selectPrefixCls:x,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:S,pageSize:k,pageSizeOptions:b,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:F}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n={};if("current"in t&&(n.current=t.current,t.current!==e.current&&(n.currentInputValue=n.current)),"pageSize"in t&&t.pageSize!==e.pageSize){var r=e.current,i=ri(t.pageSize,e,t);r=r>i?i:r,"current"in t||(n.current=r,n.currentInputValue=r),n.pageSize=t.pageSize}return n}}]),n}(I.Component);ii.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:ei,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:ei,locale:{items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},style:{},itemRender:function(t,e,n){return n},totalBoundaryShowSizeChanger:50};var ai=ii,oi=n(60166),ui=n(28833),si=function(t){return I.createElement(ui.Z,Object.assign({},t,{size:"small"}))},li=function(t){return I.createElement(ui.Z,Object.assign({},t,{size:"middle"}))};si.Option=ui.Z.Option,li.Option=ui.Z.Option;var ci=n(96183),fi=function(t){return{borderColor:t.inputBorderHoverColor,borderInlineEndWidth:t.lineWidth}},hi=function(t){return{borderColor:t.inputBorderHoverColor,boxShadow:"0 0 0 ".concat(t.controlOutlineWidth,"px ").concat(t.controlOutline),borderInlineEndWidth:t.lineWidth,outline:0}},di=function(t){return{color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},fi((0,Re.TS)(t,{inputBorderHoverColor:t.colorBorder})))}},pi=function(t){var e=t.inputPaddingVerticalLG,n=t.fontSizeLG,r=t.lineHeightLG,i=t.borderRadiusLG,a=t.inputPaddingHorizontalLG;return{padding:"".concat(e,"px ").concat(a,"px"),fontSize:n,lineHeight:r,borderRadius:i}},gi=function(t){return{padding:"".concat(t.inputPaddingVerticalSM,"px ").concat(t.controlPaddingHorizontalSM-1,"px"),borderRadius:t.borderRadiusSM}},vi=function(t){var e=t.componentCls,n=t.colorError,r=t.colorWarning,i=t.colorErrorOutline,a=t.colorWarningOutline,o=t.colorErrorBorderHover,u=t.colorWarningBorderHover;return{"&-status-error:not(&-disabled):not(&-borderless)&":(0,Z.Z)({borderColor:n,"&:hover":{borderColor:o},"&:focus, &-focused":Object.assign({},hi((0,Re.TS)(t,{inputBorderActiveColor:n,inputBorderHoverColor:n,controlOutline:i})))},"".concat(e,"-prefix"),{color:n}),"&-status-warning:not(&-disabled):not(&-borderless)&":(0,Z.Z)({borderColor:r,"&:hover":{borderColor:u},"&:focus, &-focused":Object.assign({},hi((0,Re.TS)(t,{inputBorderActiveColor:r,inputBorderHoverColor:r,controlOutline:a})))},"".concat(e,"-prefix"),{color:r})}},mi=function(t){return Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:"".concat(t.inputPaddingVertical,"px ").concat(t.inputPaddingHorizontal,"px"),color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,backgroundColor:t.colorBgContainer,backgroundImage:"none",borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:t.colorBorder,borderRadius:t.borderRadius,transition:"all ".concat(t.motionDurationMid)},function(t){return{"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:t,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}}(t.colorTextPlaceholder)),{"&:hover":Object.assign({},fi(t)),"&:focus, &-focused":Object.assign({},hi(t)),"&-disabled, &[disabled]":Object.assign({},di(t)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:t.controlHeight,lineHeight:t.lineHeight,verticalAlign:"bottom",transition:"all ".concat(t.motionDurationSlow,", height 0s"),resize:"vertical"},"&-lg":Object.assign({},pi(t)),"&-sm":Object.assign({},gi(t)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}})},yi=function(t){var e,n=t.componentCls,r=t.controlHeightSM,i=(r-2*t.lineWidth-16)/2;return(0,Z.Z)({},"".concat(n),Object.assign(Object.assign(Object.assign(Object.assign({},(0,Ne.Wf)(t)),mi(t)),vi(t)),{'&[type="color"]':(e={height:t.controlHeight},(0,Z.Z)(e,"&".concat(n,"-lg"),{height:t.controlHeightLG}),(0,Z.Z)(e,"&".concat(n,"-sm"),{height:r,paddingTop:i,paddingBottom:i}),e)}))},xi=function(t){var e,n=t.componentCls,r=t.inputAffixPadding,i=t.colorTextDescription,a=t.motionDurationSlow,o=t.colorIcon,u=t.colorIconHover,s=t.iconCls;return(0,Z.Z)({},"".concat(n,"-affix-wrapper"),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},mi(t)),(e={display:"inline-flex","&:not(&-disabled):hover":Object.assign(Object.assign({},fi(t)),(0,Z.Z)({zIndex:1},"".concat(n,"-search-with-button &"),{zIndex:0})),"&-focused, &:focus":{zIndex:1},"&-disabled":(0,Z.Z)({},"".concat(n,"[disabled]"),{background:"transparent"})},(0,Z.Z)(e,"> input".concat(n),{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&:focus":{boxShadow:"none !important"}}),(0,Z.Z)(e,"&::before",{width:0,visibility:"hidden",content:'"\\a0"'}),(0,Z.Z)(e,"".concat(n),{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:t.paddingXS}},"&-show-count-suffix":{color:i},"&-show-count-has-suffix":{marginInlineEnd:t.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}),e)),function(t){var e,n=t.componentCls;return e={},(0,Z.Z)(e,"".concat(n,"-clear-icon"),{margin:0,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:"color ".concat(t.motionDurationSlow),"&:hover":{color:t.colorTextTertiary},"&:active":{color:t.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:"0 ".concat(t.inputAffixPadding,"px")}}),(0,Z.Z)(e,"&-textarea-with-clear-btn",(0,Z.Z)({padding:"0 !important",border:"0 !important"},"".concat(n,"-clear-icon"),{position:"absolute",insetBlockStart:t.paddingXS,insetInlineEnd:t.paddingXS,zIndex:1})),e}(t)),(0,Z.Z)({},"".concat(s).concat(n,"-password-icon"),{color:o,cursor:"pointer",transition:"all ".concat(a),"&:hover":{color:u}})),vi(t)))},bi=function(t){var e=t.componentCls,n=t.colorError,r=t.colorSuccess,i=t.borderRadiusLG,a=t.borderRadiusSM;return(0,Z.Z)({},"".concat(e,"-group"),Object.assign(Object.assign(Object.assign({},(0,Ne.Wf)(t)),function(t){var e,n,r,i,a,o,u,s=t.componentCls,l=t.antCls;return u={position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0},(0,Z.Z)(u,"&[class*='col-']",{paddingInlineEnd:t.paddingXS,"&:last-child":{paddingInlineEnd:0}}),(0,Z.Z)(u,"&-lg ".concat(s,", &-lg > ").concat(s,"-group-addon"),Object.assign({},pi(t))),(0,Z.Z)(u,"&-sm ".concat(s,", &-sm > ").concat(s,"-group-addon"),Object.assign({},gi(t))),(0,Z.Z)(u,"&-lg ".concat(l,"-select-single ").concat(l,"-select-selector"),{height:t.controlHeightLG}),(0,Z.Z)(u,"&-sm ".concat(l,"-select-single ").concat(l,"-select-selector"),{height:t.controlHeightSM}),(0,Z.Z)(u,"> ".concat(s),{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}}),(0,Z.Z)(u,"".concat(s,"-group"),(r={},(0,Z.Z)(r,"&-addon, &-wrap",{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}}),(0,Z.Z)(r,"&-wrap > *",{display:"block !important"}),(0,Z.Z)(r,"&-addon",(n={position:"relative",padding:"0 ".concat(t.inputPaddingHorizontal,"px"),color:t.colorText,fontWeight:"normal",fontSize:t.fontSize,textAlign:"center",backgroundColor:t.colorFillAlter,border:"".concat(t.lineWidth,"px ").concat(t.lineType," ").concat(t.colorBorder),borderRadius:t.borderRadius,transition:"all ".concat(t.motionDurationSlow),lineHeight:1},(0,Z.Z)(n,"".concat(l,"-select"),(e={margin:"-".concat(t.inputPaddingVertical+1,"px -").concat(t.inputPaddingHorizontal,"px")},(0,Z.Z)(e,"&".concat(l,"-select-single:not(").concat(l,"-select-customize-input)"),(0,Z.Z)({},"".concat(l,"-select-selector"),{backgroundColor:"inherit",border:"".concat(t.lineWidth,"px ").concat(t.lineType," transparent"),boxShadow:"none"})),(0,Z.Z)(e,"&-open, &-focused",(0,Z.Z)({},"".concat(l,"-select-selector"),{color:t.colorPrimary})),e)),(0,Z.Z)(n,"".concat(l,"-cascader-picker"),(0,Z.Z)({margin:"-9px -".concat(t.inputPaddingHorizontal,"px"),backgroundColor:"transparent"},"".concat(l,"-cascader-input"),{textAlign:"start",border:0,boxShadow:"none"})),n)),(0,Z.Z)(r,"&-addon:first-child",{borderInlineEnd:0}),(0,Z.Z)(r,"&-addon:last-child",{borderInlineStart:0}),r)),(0,Z.Z)(u,"".concat(s),{float:"inline-start",width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":(0,Z.Z)({zIndex:1,borderInlineEndWidth:1},"".concat(s,"-search-with-button &"),{zIndex:0})}),(0,Z.Z)(u,"> ".concat(s,":first-child, ").concat(s,"-group-addon:first-child"),(0,Z.Z)({borderStartEndRadius:0,borderEndEndRadius:0},"".concat(l,"-select ").concat(l,"-select-selector"),{borderStartEndRadius:0,borderEndEndRadius:0})),(0,Z.Z)(u,"> ".concat(s,"-affix-wrapper"),(i={},(0,Z.Z)(i,"&:not(:first-child) ".concat(s),{borderStartStartRadius:0,borderEndStartRadius:0}),(0,Z.Z)(i,"&:not(:last-child) ".concat(s),{borderStartEndRadius:0,borderEndEndRadius:0}),i)),(0,Z.Z)(u,"> ".concat(s,":last-child, ").concat(s,"-group-addon:last-child"),(0,Z.Z)({borderStartStartRadius:0,borderEndStartRadius:0},"".concat(l,"-select ").concat(l,"-select-selector"),{borderStartStartRadius:0,borderEndStartRadius:0})),(0,Z.Z)(u,"".concat(s,"-affix-wrapper"),(0,Z.Z)({"&:not(:last-child)":(0,Z.Z)({borderStartEndRadius:0,borderEndEndRadius:0},"".concat(s,"-search &"),{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius})},"&:not(:first-child), ".concat(s,"-search &:not(:first-child)"),{borderStartStartRadius:0,borderEndStartRadius:0})),(0,Z.Z)(u,"&&-compact",Object.assign(Object.assign({display:"block"},(0,Ne.dF)()),(o={},(0,Z.Z)(o,"".concat(s,"-group-addon, ").concat(s,"-group-wrap, > ").concat(s),{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:t.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}}),(0,Z.Z)(o,"& > *",{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0}),(0,Z.Z)(o,"& > ".concat(s,"-affix-wrapper"),{display:"inline-flex"}),(0,Z.Z)(o,"& > ".concat(l,"-picker-range"),{display:"inline-flex"}),(0,Z.Z)(o,"& > *:not(:last-child)",{marginInlineEnd:-t.lineWidth,borderInlineEndWidth:t.lineWidth}),(0,Z.Z)(o,"".concat(s),{float:"none"}),(0,Z.Z)(o,"& > ".concat(l,"-select > ").concat(l,"-select-selector,\n      & > ").concat(l,"-select-auto-complete ").concat(s,",\n      & > ").concat(l,"-cascader-picker ").concat(s,",\n      & > ").concat(s,"-group-wrapper ").concat(s),{borderInlineEndWidth:t.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}),(0,Z.Z)(o,"& > ".concat(l,"-select-focused"),{zIndex:1}),(0,Z.Z)(o,"& > ".concat(l,"-select > ").concat(l,"-select-arrow"),{zIndex:1}),(0,Z.Z)(o,"& > *:first-child,\n      & > ".concat(l,"-select:first-child > ").concat(l,"-select-selector,\n      & > ").concat(l,"-select-auto-complete:first-child ").concat(s,",\n      & > ").concat(l,"-cascader-picker:first-child ").concat(s),{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius}),(0,Z.Z)(o,"& > *:last-child,\n      & > ".concat(l,"-select:last-child > ").concat(l,"-select-selector,\n      & > ").concat(l,"-cascader-picker:last-child ").concat(s,",\n      & > ").concat(l,"-cascader-picker-focused:last-child ").concat(s),{borderInlineEndWidth:t.lineWidth,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius}),(0,Z.Z)(o,"& > ".concat(l,"-select-auto-complete ").concat(s),{verticalAlign:"top"}),(0,Z.Z)(o,"".concat(s,"-group-wrapper + ").concat(s,"-group-wrapper"),(0,Z.Z)({marginInlineStart:-t.lineWidth},"".concat(s,"-affix-wrapper"),{borderRadius:0})),(0,Z.Z)(o,"".concat(s,"-group-wrapper:not(:last-child)"),(0,Z.Z)({},"&".concat(s,"-search > ").concat(s,"-group"),(a={},(0,Z.Z)(a,"& > ".concat(s,"-group-addon > ").concat(s,"-search-button"),{borderRadius:0}),(0,Z.Z)(a,"& > ".concat(s),{borderStartStartRadius:t.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:t.borderRadius}),a))),o))),u}(t)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":(0,Z.Z)({},"".concat(e,"-group-addon"),{borderRadius:i}),"&-sm":(0,Z.Z)({},"".concat(e,"-group-addon"),{borderRadius:a}),"&-status-error":(0,Z.Z)({},"".concat(e,"-group-addon"),{color:n,borderColor:n}),"&-status-warning":(0,Z.Z)({},"".concat(e,"-group-addon:last-child"),{color:r,borderColor:r})}}))},wi=function(t){var e,n,r,i=t.componentCls,a=t.antCls,o="".concat(i,"-search");return(0,Z.Z)({},o,(r={},(0,Z.Z)(r,"".concat(i),{"&:hover, &:focus":(0,Z.Z)({borderColor:t.colorPrimaryHover},"+ ".concat(i,"-group-addon ").concat(o,"-button:not(").concat(a,"-btn-primary)"),{borderInlineStartColor:t.colorPrimaryHover})}),(0,Z.Z)(r,"".concat(i,"-affix-wrapper"),{borderRadius:0}),(0,Z.Z)(r,"".concat(i,"-lg"),{lineHeight:t.lineHeightLG-2e-4}),(0,Z.Z)(r,"> ".concat(i,"-group"),(0,Z.Z)({},"> ".concat(i,"-group-addon:last-child"),(e={insetInlineStart:-1,padding:0,border:0},(0,Z.Z)(e,"".concat(o,"-button"),{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius,borderEndStartRadius:0}),(0,Z.Z)(e,"".concat(o,"-button:not(").concat(a,"-btn-primary)"),(0,Z.Z)({color:t.colorTextDescription,"&:hover":{color:t.colorPrimaryHover},"&:active":{color:t.colorPrimaryActive}},"&".concat(a,"-btn-loading::before"),{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0})),e))),(0,Z.Z)(r,"".concat(o,"-button"),{height:t.controlHeight,"&:hover, &:focus":{zIndex:1}}),(0,Z.Z)(r,"&-large ".concat(o,"-button"),{height:t.controlHeightLG}),(0,Z.Z)(r,"&-small ".concat(o,"-button"),{height:t.controlHeightSM}),(0,Z.Z)(r,"&-rtl",{direction:"rtl"}),(0,Z.Z)(r,"&".concat(i,"-compact-item"),(n={},(0,Z.Z)(n,"&:not(".concat(i,"-compact-last-item)"),(0,Z.Z)({},"".concat(i,"-group-addon"),(0,Z.Z)({},"".concat(i,"-search-button"),{marginInlineEnd:-t.lineWidth,borderRadius:0}))),(0,Z.Z)(n,"&:not(".concat(i,"-compact-first-item)"),(0,Z.Z)({},"".concat(i,",").concat(i,"-affix-wrapper"),{borderRadius:0})),(0,Z.Z)(n,"> ".concat(i,"-group-addon ").concat(i,"-search-button,\n        > ").concat(i,",\n        ").concat(i,"-affix-wrapper"),{"&:hover,&:focus,&:active":{zIndex:2}}),(0,Z.Z)(n,"> ".concat(i,"-affix-wrapper-focused"),{zIndex:2}),n)),r))};function Si(t){return(0,Re.TS)(t,{inputAffixPadding:t.paddingXXS,inputPaddingVertical:Math.max(Math.round((t.controlHeight-t.fontSize*t.lineHeight)/2*10)/10-t.lineWidth,3),inputPaddingVerticalLG:Math.ceil((t.controlHeightLG-t.fontSizeLG*t.lineHeightLG)/2*10)/10-t.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((t.controlHeightSM-t.fontSize*t.lineHeight)/2*10)/10-t.lineWidth,0),inputPaddingHorizontal:t.paddingSM-t.lineWidth,inputPaddingHorizontalSM:t.paddingXS-t.lineWidth,inputPaddingHorizontalLG:t.controlPaddingHorizontal-t.lineWidth,inputBorderHoverColor:t.colorPrimaryHover,inputBorderActiveColor:t.colorPrimaryHover})}var ki=function(t){var e,n,r=t.componentCls,i=t.inputPaddingHorizontal,a=t.paddingLG,o="".concat(r,"-textarea");return(0,Z.Z)({},o,(n={position:"relative"},(0,Z.Z)(n,"".concat(o,"-suffix"),{position:"absolute",top:0,insetInlineEnd:i,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto"}),(0,Z.Z)(n,"&-status-error,\n        &-status-warning,\n        &-status-success,\n        &-status-validating",(0,Z.Z)({},"&".concat(o,"-has-feedback"),(0,Z.Z)({},"".concat(r),{paddingInlineEnd:a}))),(0,Z.Z)(n,"&-show-count",(e={},(0,Z.Z)(e,"> ".concat(r),{height:"100%"}),(0,Z.Z)(e,"&::after",{color:t.colorTextDescription,whiteSpace:"nowrap",content:"attr(data-count)",pointerEvents:"none",float:"right"}),e)),(0,Z.Z)(n,"&-rtl",{"&::after":{float:"left"}}),n))},Ci=((0,Ze.Z)("Input",(function(t){var e=Si(t);return[yi(e),ki(e),xi(e),bi(e),wi(e),(0,ci.c)(e)]})),function(t){var e,n,r=t.componentCls;return n={},(0,Z.Z)(n,r,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,Ne.Wf)(t)),(0,Z.Z)({"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'}},"".concat(r,"-total-text"),{display:"inline-block",height:t.paginationItemSize,marginInlineEnd:t.marginXS,lineHeight:"".concat(t.paginationItemSize-2,"px"),verticalAlign:"middle"})),function(t){var e=t.componentCls;return(0,Z.Z)({},"".concat(e,"-item"),Object.assign(Object.assign((0,Z.Z)({display:"inline-block",minWidth:t.paginationItemSize,height:t.paginationItemSize,marginInlineEnd:t.marginXS,fontFamily:t.paginationFontFamily,lineHeight:"".concat(t.paginationItemSize-2,"px"),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:"transparent",border:"".concat(t.lineWidth,"px ").concat(t.lineType," transparent"),borderRadius:t.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:"0 ".concat(t.paginationItemPaddingInline,"px"),color:t.colorText,transition:"none","&:hover":{textDecoration:"none"}}},"&:not(".concat(e,"-item-active)"),{"&:hover":{transition:"all ".concat(t.motionDurationMid),backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}}),(0,Ne.Qy)(t)),{"&-active":{fontWeight:t.paginationFontWeightActive,backgroundColor:t.paginationItemBgActive,borderColor:t.colorPrimary,a:{color:t.colorPrimary},"&:hover":{borderColor:t.colorPrimaryHover},"&:hover a":{color:t.colorPrimaryHover}}}))}(t)),function(t){var e,n,r,i,a,o,u=t.componentCls;return o={},(0,Z.Z)(o,"".concat(u,"-jump-prev, ").concat(u,"-jump-next"),(i={outline:0},(0,Z.Z)(i,"".concat(u,"-item-container"),(e={position:"relative"},(0,Z.Z)(e,"".concat(u,"-item-link-icon"),{color:t.colorPrimary,fontSize:t.fontSizeSM,opacity:0,transition:"all ".concat(t.motionDurationMid),"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}}),(0,Z.Z)(e,"".concat(u,"-item-ellipsis"),{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:t.colorTextDisabled,fontFamily:"Arial, Helvetica, sans-serif",letterSpacing:t.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:t.paginationEllipsisTextIndent,opacity:1,transition:"all ".concat(t.motionDurationMid)}),e)),(0,Z.Z)(i,"&:hover",(n={},(0,Z.Z)(n,"".concat(u,"-item-link-icon"),{opacity:1}),(0,Z.Z)(n,"".concat(u,"-item-ellipsis"),{opacity:0}),n)),(0,Z.Z)(i,"&:focus-visible",Object.assign((r={},(0,Z.Z)(r,"".concat(u,"-item-link-icon"),{opacity:1}),(0,Z.Z)(r,"".concat(u,"-item-ellipsis"),{opacity:0}),r),(0,Ne.oN)(t))),i)),(0,Z.Z)(o,"\n    ".concat(u,"-prev,\n    ").concat(u,"-jump-prev,\n    ").concat(u,"-jump-next\n    "),{marginInlineEnd:t.marginXS}),(0,Z.Z)(o,"\n    ".concat(u,"-prev,\n    ").concat(u,"-next,\n    ").concat(u,"-jump-prev,\n    ").concat(u,"-jump-next\n    "),{display:"inline-block",minWidth:t.paginationItemSize,height:t.paginationItemSize,color:t.colorText,fontFamily:t.paginationFontFamily,lineHeight:"".concat(t.paginationItemSize,"px"),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:t.borderRadius,cursor:"pointer",transition:"all ".concat(t.motionDurationMid)}),(0,Z.Z)(o,"".concat(u,"-prev, ").concat(u,"-next"),(a={fontFamily:"Arial, Helvetica, sans-serif",outline:0,button:{color:t.colorText,cursor:"pointer",userSelect:"none"}},(0,Z.Z)(a,"".concat(u,"-item-link"),{display:"block",width:"100%",height:"100%",padding:0,fontSize:t.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:"".concat(t.lineWidth,"px ").concat(t.lineType," transparent"),borderRadius:t.borderRadius,outline:"none",transition:"border ".concat(t.motionDurationMid)}),(0,Z.Z)(a,"&:focus-visible ".concat(u,"-item-link"),Object.assign({},(0,Ne.oN)(t))),(0,Z.Z)(a,"&:hover ".concat(u,"-item-link"),{backgroundColor:t.colorBgTextHover}),(0,Z.Z)(a,"&:active ".concat(u,"-item-link"),{backgroundColor:t.colorBgTextActive}),(0,Z.Z)(a,"&".concat(u,"-disabled:hover"),(0,Z.Z)({},"".concat(u,"-item-link"),{backgroundColor:"transparent"})),a)),(0,Z.Z)(o,"".concat(u,"-slash"),{marginInlineEnd:t.paginationSlashMarginInlineEnd,marginInlineStart:t.paginationSlashMarginInlineStart}),(0,Z.Z)(o,"".concat(u,"-options"),{display:"inline-block",marginInlineStart:t.margin,verticalAlign:"middle","&-size-changer.-select":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:t.controlHeight,marginInlineStart:t.marginXS,lineHeight:"".concat(t.controlHeight,"px"),verticalAlign:"top",input:Object.assign(Object.assign({},mi(t)),{width:1.25*t.controlHeightLG,height:t.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:t.marginXS,marginInlineEnd:t.marginXS})}}),o}(t)),function(t){var e,n=t.componentCls;return e={},(0,Z.Z)(e,"\n    &".concat(n,"-simple ").concat(n,"-prev,\n    &").concat(n,"-simple ").concat(n,"-next\n    "),(0,Z.Z)({height:t.paginationItemSizeSM,lineHeight:"".concat(t.paginationItemSizeSM,"px"),verticalAlign:"top"},"".concat(n,"-item-link"),{height:t.paginationItemSizeSM,backgroundColor:"transparent",border:0,"&::after":{height:t.paginationItemSizeSM,lineHeight:"".concat(t.paginationItemSizeSM,"px")}})),(0,Z.Z)(e,"&".concat(n,"-simple ").concat(n,"-simple-pager"),{display:"inline-block",height:t.paginationItemSizeSM,marginInlineEnd:t.marginXS,input:{boxSizing:"border-box",height:"100%",marginInlineEnd:t.marginXS,padding:"0 ".concat(t.paginationItemPaddingInline,"px"),textAlign:"center",backgroundColor:t.paginationItemInputBg,border:"".concat(t.lineWidth,"px ").concat(t.lineType," ").concat(t.colorBorder),borderRadius:t.borderRadius,outline:"none",transition:"border-color ".concat(t.motionDurationMid),color:"inherit","&:hover":{borderColor:t.colorPrimary},"&:focus":{borderColor:t.colorPrimaryHover,boxShadow:"".concat(t.inputOutlineOffset,"px 0 ").concat(t.controlOutlineWidth,"px ").concat(t.controlOutline)},"&[disabled]":{color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,cursor:"not-allowed"}}}),e}(t)),function(t){var e,n,r=t.componentCls;return n={},(0,Z.Z)(n,"&&-mini ".concat(r,"-total-text, &&-mini ").concat(r,"-simple-pager"),{height:t.paginationItemSizeSM,lineHeight:"".concat(t.paginationItemSizeSM,"px")}),(0,Z.Z)(n,"&&-mini ".concat(r,"-item"),{minWidth:t.paginationItemSizeSM,height:t.paginationItemSizeSM,margin:0,lineHeight:"".concat(t.paginationItemSizeSM-2,"px")}),(0,Z.Z)(n,"&&-mini ".concat(r,"-item:not(").concat(r,"-item-active)"),{backgroundColor:"transparent",borderColor:"transparent"}),(0,Z.Z)(n,"&&-mini ".concat(r,"-prev, &&-mini ").concat(r,"-next"),{minWidth:t.paginationItemSizeSM,height:t.paginationItemSizeSM,margin:0,lineHeight:"".concat(t.paginationItemSizeSM,"px")}),(0,Z.Z)(n,"\n    &&-mini ".concat(r,"-prev ").concat(r,"-item-link,\n    &&-mini ").concat(r,"-next ").concat(r,"-item-link\n    "),{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:t.paginationItemSizeSM,lineHeight:"".concat(t.paginationItemSizeSM,"px")}}),(0,Z.Z)(n,"&&-mini ".concat(r,"-jump-prev, &&-mini ").concat(r,"-jump-next"),{height:t.paginationItemSizeSM,marginInlineEnd:0,lineHeight:"".concat(t.paginationItemSizeSM,"px")}),(0,Z.Z)(n,"&&-mini ".concat(r,"-options"),(e={marginInlineStart:t.paginationMiniOptionsMarginInlineStart},(0,Z.Z)(e,"&-size-changer",{top:t.paginationMiniOptionsSizeChangerTop}),(0,Z.Z)(e,"&-quick-jumper",{height:t.paginationItemSizeSM,lineHeight:"".concat(t.paginationItemSizeSM,"px"),input:Object.assign(Object.assign({},gi(t)),{width:t.paginationMiniQuickJumperInputWidth,height:t.controlHeightSM})}),e)),n}(t)),function(t){var e,n,r=t.componentCls;return n={},(0,Z.Z)(n,"".concat(r,"-disabled"),{"&, &:hover":(0,Z.Z)({cursor:"not-allowed"},"".concat(r,"-item-link"),{color:t.colorTextDisabled,cursor:"not-allowed"}),"&:focus-visible":(0,Z.Z)({cursor:"not-allowed"},"".concat(r,"-item-link"),{color:t.colorTextDisabled,cursor:"not-allowed"})}),(0,Z.Z)(n,"&".concat(r,"-disabled"),(e={cursor:"not-allowed"},(0,Z.Z)(e,"".concat(r,"-item"),{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:t.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:t.colorBorder,backgroundColor:t.paginationItemDisabledBgActive,"&:hover, &:active":{backgroundColor:t.paginationItemDisabledBgActive},a:{color:t.paginationItemDisabledColorActive}}}),(0,Z.Z)(e,"".concat(r,"-item-link"),(0,Z.Z)({color:t.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"}},"".concat(r,"-simple&"),{backgroundColor:"transparent"})),(0,Z.Z)(e,"".concat(r,"-item-link-icon"),{opacity:0}),(0,Z.Z)(e,"".concat(r,"-item-ellipsis"),{opacity:1}),(0,Z.Z)(e,"".concat(r,"-simple-pager"),{color:t.colorTextDisabled}),e)),n}(t)),(e={},(0,Z.Z)(e,"@media only screen and (max-width: ".concat(t.screenLG,"px)"),(0,Z.Z)({},"".concat(r,"-item"),{"&-after-jump-prev, &-before-jump-next":{display:"none"}})),(0,Z.Z)(e,"@media only screen and (max-width: ".concat(t.screenSM,"px)"),(0,Z.Z)({},"".concat(r,"-options"),{display:"none"})),e))),(0,Z.Z)(n,"&".concat(t.componentCls,"-rtl"),{direction:"rtl"}),n}),Ei=function(t){var e,n,r,i,a,o,u=t.componentCls;return o={},(0,Z.Z)(o,"".concat(u).concat(u,"-disabled"),(n={"&, &:hover":(0,Z.Z)({},"".concat(u,"-item-link"),{borderColor:t.colorBorder}),"&:focus-visible":(0,Z.Z)({},"".concat(u,"-item-link"),{borderColor:t.colorBorder})},(0,Z.Z)(n,"".concat(u,"-item, ").concat(u,"-item-link"),(e={backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder},(0,Z.Z)(e,"&:hover:not(".concat(u,"-item-active)"),{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,a:{color:t.colorTextDisabled}}),(0,Z.Z)(e,"&".concat(u,"-item-active"),{backgroundColor:t.paginationItemDisabledBgActive}),e)),(0,Z.Z)(n,"".concat(u,"-prev, ").concat(u,"-next"),(0,Z.Z)({"&:hover button":{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,color:t.colorTextDisabled}},"".concat(u,"-item-link"),{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder})),n)),(0,Z.Z)(o,u,(a={},(0,Z.Z)(a,"".concat(u,"-prev, ").concat(u,"-next"),(r={"&:hover button":{borderColor:t.colorPrimaryHover,backgroundColor:t.paginationItemBg}},(0,Z.Z)(r,"".concat(u,"-item-link"),{backgroundColor:t.paginationItemLinkBg,borderColor:t.colorBorder}),(0,Z.Z)(r,"&:hover ".concat(u,"-item-link"),{borderColor:t.colorPrimary,backgroundColor:t.paginationItemBg,color:t.colorPrimary}),(0,Z.Z)(r,"&".concat(u,"-disabled"),(0,Z.Z)({},"".concat(u,"-item-link"),{borderColor:t.colorBorder,color:t.colorTextDisabled})),r)),(0,Z.Z)(a,"".concat(u,"-item"),(i={backgroundColor:t.paginationItemBg,border:"".concat(t.lineWidth,"px ").concat(t.lineType," ").concat(t.colorBorder)},(0,Z.Z)(i,"&:hover:not(".concat(u,"-item-active)"),{borderColor:t.colorPrimary,backgroundColor:t.paginationItemBg,a:{color:t.colorPrimary}}),(0,Z.Z)(i,"&-active",{borderColor:t.colorPrimary}),i)),a)),o},Mi=(0,Ze.Z)("Pagination",(function(t){var e=(0,Re.TS)(t,{paginationItemSize:t.controlHeight,paginationFontFamily:t.fontFamily,paginationItemBg:t.colorBgContainer,paginationItemBgActive:t.colorBgContainer,paginationFontWeightActive:t.fontWeightStrong,paginationItemSizeSM:t.controlHeightSM,paginationItemInputBg:t.colorBgContainer,paginationMiniOptionsSizeChangerTop:0,paginationItemDisabledBgActive:t.controlItemBgActiveDisabled,paginationItemDisabledColorActive:t.colorTextDisabled,paginationItemLinkBg:t.colorBgContainer,inputOutlineOffset:"0 0",paginationMiniOptionsMarginInlineStart:t.marginXXS/2,paginationMiniQuickJumperInputWidth:1.1*t.controlHeightLG,paginationItemPaddingInline:1.5*t.marginXXS,paginationEllipsisLetterSpacing:t.marginXXS/2,paginationSlashMarginInlineStart:t.marginXXS,paginationSlashMarginInlineEnd:t.marginSM,paginationEllipsisTextIndent:"0.13em"},Si(t));return[Ci(e),t.wireframe&&Ei(e)]})),Oi=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Ai=function(t){var e=t.prefixCls,n=t.selectPrefixCls,r=t.className,i=t.size,a=t.locale,o=t.selectComponentClass,u=t.responsive,s=t.showSizeChanger,l=Oi(t,["prefixCls","selectPrefixCls","className","size","locale","selectComponentClass","responsive","showSizeChanger"]),c=Rr(u).xs,f=I.useContext(St.E_),h=f.getPrefixCls,d=f.direction,p=f.pagination,g=void 0===p?{}:p,v=h("pagination",e),m=Mi(v),y=(0,W.Z)(m,2),x=y[0],b=y[1],w=null!=s?s:g.showSizeChanger;return I.createElement(Ct.Z,{componentName:"Pagination",defaultLocale:oi.Z},(function(t){var e,s=Object.assign(Object.assign({},t),a),f="small"===i||!(!c||i||!u),p=h("select",n),g=q()((e={},(0,Z.Z)(e,"".concat(v,"-mini"),f),(0,Z.Z)(e,"".concat(v,"-rtl"),"rtl"===d),e),r,b);return x(I.createElement(ai,Object.assign({},function(){var t=I.createElement("span",{className:"".concat(v,"-item-ellipsis")},"•••"),e=I.createElement("button",{className:"".concat(v,"-item-link"),type:"button",tabIndex:-1},I.createElement(Xr,null)),n=I.createElement("button",{className:"".concat(v,"-item-link"),type:"button",tabIndex:-1},I.createElement(Yr.Z,null)),r=I.createElement("a",{className:"".concat(v,"-item-link")},I.createElement("div",{className:"".concat(v,"-item-container")},I.createElement(zr,{className:"".concat(v,"-item-link-icon")}),t)),i=I.createElement("a",{className:"".concat(v,"-item-link")},I.createElement("div",{className:"".concat(v,"-item-container")},I.createElement(Wr,{className:"".concat(v,"-item-link-icon")}),t));if("rtl"===d){var a=[n,e];e=a[0],n=a[1];var o=[i,r];r=o[0],i=o[1]}return{prevIcon:e,nextIcon:n,jumpPrevIcon:r,jumpNextIcon:i}}(),l,{prefixCls:v,selectPrefixCls:p,className:g,selectComponentClass:o||(f?si:li),locale:s,showSizeChanger:w})))}))},_i=Ai;function Di(t,e,n){var r=(n||{}).atBegin;return function(t,e,n){var r,i=n||{},a=i.noTrailing,o=void 0!==a&&a,u=i.noLeading,s=void 0!==u&&u,l=i.debounceMode,c=void 0===l?void 0:l,f=!1,h=0;function d(){r&&clearTimeout(r)}function p(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var u=this,l=Date.now()-h;function p(){h=Date.now(),e.apply(u,i)}function g(){r=void 0}f||(s||!c||r||p(),d(),void 0===c&&l>t?s?(h=Date.now(),o||(r=setTimeout(c?g:p,t))):p():!0!==o&&(r=setTimeout(c?g:p,void 0===c?t-l:t)))}return p.cancel=function(t){var e=(t||{}).upcomingOnly,n=void 0!==e&&e;d(),f=!n},p}(t,e,{debounceMode:!1!==(void 0!==r&&r)})}var Ti=new ln.E4("antSpinMove",{to:{opacity:1}}),Fi=new ln.E4("antRotate",{to:{transform:"rotate(405deg)"}}),Ii=function(t){var e,n,r,i,a;return(0,Z.Z)({},"".concat(t.componentCls),Object.assign(Object.assign({},(0,Ne.Wf)(t)),(a={position:"absolute",display:"none",color:t.colorPrimary,textAlign:"center",verticalAlign:"middle",opacity:0,transition:"transform ".concat(t.motionDurationSlow," ").concat(t.motionEaseInOutCirc),"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":(i={position:"relative"},(0,Z.Z)(i,"> div > ".concat(t.componentCls),(r={position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:t.contentHeight},(0,Z.Z)(r,"".concat(t.componentCls,"-dot"),{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-t.spinDotSize/2}),(0,Z.Z)(r,"".concat(t.componentCls,"-text"),{position:"absolute",top:"50%",width:"100%",paddingTop:(t.spinDotSize-t.fontSize)/2+2,textShadow:"0 1px 2px ".concat(t.colorBgContainer)}),(0,Z.Z)(r,"&".concat(t.componentCls,"-show-text ").concat(t.componentCls,"-dot"),{marginTop:-t.spinDotSize/2-10}),(0,Z.Z)(r,"&-sm",(e={},(0,Z.Z)(e,"".concat(t.componentCls,"-dot"),{margin:-t.spinDotSizeSM/2}),(0,Z.Z)(e,"".concat(t.componentCls,"-text"),{paddingTop:(t.spinDotSizeSM-t.fontSize)/2+2}),(0,Z.Z)(e,"&".concat(t.componentCls,"-show-text ").concat(t.componentCls,"-dot"),{marginTop:-t.spinDotSizeSM/2-10}),e)),(0,Z.Z)(r,"&-lg",(n={},(0,Z.Z)(n,"".concat(t.componentCls,"-dot"),{margin:-t.spinDotSizeLG/2}),(0,Z.Z)(n,"".concat(t.componentCls,"-text"),{paddingTop:(t.spinDotSizeLG-t.fontSize)/2+2}),(0,Z.Z)(n,"&".concat(t.componentCls,"-show-text ").concat(t.componentCls,"-dot"),{marginTop:-t.spinDotSizeLG/2-10}),n)),r)),(0,Z.Z)(i,"".concat(t.componentCls,"-container"),{position:"relative",transition:"opacity ".concat(t.motionDurationSlow),"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:t.colorBgContainer,opacity:0,transition:"all ".concat(t.motionDurationSlow),content:'""',pointerEvents:"none"}}),(0,Z.Z)(i,"".concat(t.componentCls,"-blur"),(0,Z.Z)({clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none"},"&::after",{opacity:.4,pointerEvents:"auto"})),i)},(0,Z.Z)(a,"&-tip",{color:t.spinDotDefault}),(0,Z.Z)(a,"".concat(t.componentCls,"-dot"),{position:"relative",display:"inline-block",fontSize:t.spinDotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(t.spinDotSize-t.marginXXS/2)/2,height:(t.spinDotSize-t.marginXXS/2)/2,backgroundColor:t.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:Ti,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:Fi,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}}),(0,Z.Z)(a,"&-sm ".concat(t.componentCls,"-dot"),{fontSize:t.spinDotSizeSM,i:{width:(t.spinDotSizeSM-t.marginXXS/2)/2,height:(t.spinDotSizeSM-t.marginXXS/2)/2}}),(0,Z.Z)(a,"&-lg ".concat(t.componentCls,"-dot"),{fontSize:t.spinDotSizeLG,i:{width:(t.spinDotSizeLG-t.marginXXS)/2,height:(t.spinDotSizeLG-t.marginXXS)/2}}),(0,Z.Z)(a,"&".concat(t.componentCls,"-show-text ").concat(t.componentCls,"-text"),{display:"block"}),a)))},Pi=(0,Ze.Z)("Spin",(function(t){var e=(0,Re.TS)(t,{spinDotDefault:t.colorTextDescription,spinDotSize:t.controlHeightLG/2,spinDotSizeSM:.35*t.controlHeightLG,spinDotSizeLG:t.controlHeight});return[Ii(e)]}),{contentHeight:400}),ji=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Bi=null;var Li=function(t){var e,n=t.spinPrefixCls,r=t.spinning,i=void 0===r||r,a=t.delay,o=void 0===a?0:a,u=t.className,s=t.size,l=void 0===s?"default":s,c=t.tip,f=t.wrapperClassName,h=t.style,d=t.children,p=t.hashId,g=ji(t,["spinPrefixCls","spinning","delay","className","size","tip","wrapperClassName","style","children","hashId"]),v=I.useState((function(){return i&&!function(t,e){return!!t&&!!e&&!isNaN(Number(e))}(i,o)})),m=(0,W.Z)(v,2),y=m[0],x=m[1];I.useEffect((function(){var t=Di(o,(function(){x(i)}));return t(),function(){var e;null===(e=null==t?void 0:t.cancel)||void 0===e||e.call(t)}}),[o,i]);var b=I.useMemo((function(){return void 0!==d}),[d]),w=I.useContext(St.E_).direction,S=q()(n,(e={},(0,Z.Z)(e,"".concat(n,"-sm"),"small"===l),(0,Z.Z)(e,"".concat(n,"-lg"),"large"===l),(0,Z.Z)(e,"".concat(n,"-spinning"),y),(0,Z.Z)(e,"".concat(n,"-show-text"),!!c),(0,Z.Z)(e,"".concat(n,"-rtl"),"rtl"===w),e),u,p),k=q()("".concat(n,"-container"),(0,Z.Z)({},"".concat(n,"-blur"),y)),C=(0,le.Z)(g,["indicator","prefixCls"]),E=I.createElement("div",Object.assign({},C,{style:h,className:S,"aria-live":"polite","aria-busy":y}),function(t,e){var n=e.indicator,r="".concat(t,"-dot");return null===n?null:(0,Ut.l$)(n)?(0,Ut.Tm)(n,{className:q()(n.props.className,r)}):(0,Ut.l$)(Bi)?(0,Ut.Tm)(Bi,{className:q()(Bi.props.className,r)}):I.createElement("span",{className:q()(r,"".concat(t,"-dot-spin"))},I.createElement("i",{className:"".concat(t,"-dot-item")}),I.createElement("i",{className:"".concat(t,"-dot-item")}),I.createElement("i",{className:"".concat(t,"-dot-item")}),I.createElement("i",{className:"".concat(t,"-dot-item")}))}(n,t),c?I.createElement("div",{className:"".concat(n,"-text")},c):null);return b?I.createElement("div",Object.assign({},C,{className:q()("".concat(n,"-nested-loading"),f,p)}),y&&I.createElement("div",{key:"loading"},E),I.createElement("div",{className:k,key:"container"},d)):E},Ri=function(t){var e=t.prefixCls,n=(0,I.useContext(St.E_).getPrefixCls)("spin",e),r=Pi(n),i=(0,W.Z)(r,2),a=i[0],o=i[1],u=Object.assign(Object.assign({},t),{spinPrefixCls:n,hashId:o});return a(I.createElement(Li,Object.assign({},u)))};Ri.setDefaultIndicator=function(t){Bi=t};var Zi=Ri;var Ni=function(){for(var t=arguments,e=Object.assign({},arguments.length<=0?void 0:arguments[0]),n=function(){var n=r<0||t.length<=r?void 0:t[r];n&&Object.keys(n).forEach((function(t){var r=n[t];void 0!==r&&(e[t]=r)}))},r=1;r<arguments.length;r++)n();return e},zi=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};var Ui=["xs","sm","md","lg","xl","xxl"],Hi=I.forwardRef((function(t,e){var n,r=I.useContext(St.E_),i=r.getPrefixCls,a=r.direction,o=I.useContext(Ar),u=o.gutter,s=o.wrap,l=o.supportFlexGap,c=t.prefixCls,f=t.span,h=t.order,d=t.offset,p=t.push,g=t.pull,v=t.className,m=t.children,y=t.flex,x=t.style,b=zi(t,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),w=i("col",c),S=Ir(w),k=(0,W.Z)(S,2),C=k[0],E=k[1],M={};Ui.forEach((function(e){var n,r={},i=t[e];"number"==typeof i?r.span=i:"object"==typeof i&&(r=i||{}),delete b[e],M=Object.assign(Object.assign({},M),(n={},(0,Z.Z)(n,"".concat(w,"-").concat(e,"-").concat(r.span),void 0!==r.span),(0,Z.Z)(n,"".concat(w,"-").concat(e,"-order-").concat(r.order),r.order||0===r.order),(0,Z.Z)(n,"".concat(w,"-").concat(e,"-offset-").concat(r.offset),r.offset||0===r.offset),(0,Z.Z)(n,"".concat(w,"-").concat(e,"-push-").concat(r.push),r.push||0===r.push),(0,Z.Z)(n,"".concat(w,"-").concat(e,"-pull-").concat(r.pull),r.pull||0===r.pull),(0,Z.Z)(n,"".concat(w,"-rtl"),"rtl"===a),n))}));var O=q()(w,(n={},(0,Z.Z)(n,"".concat(w,"-").concat(f),void 0!==f),(0,Z.Z)(n,"".concat(w,"-order-").concat(h),h),(0,Z.Z)(n,"".concat(w,"-offset-").concat(d),d),(0,Z.Z)(n,"".concat(w,"-push-").concat(p),p),(0,Z.Z)(n,"".concat(w,"-pull-").concat(g),g),n),v,M,E),A={};if(u&&u[0]>0){var _=u[0]/2;A.paddingLeft=_,A.paddingRight=_}if(u&&u[1]>0&&!l){var D=u[1]/2;A.paddingTop=D,A.paddingBottom=D}return y&&(A.flex=function(t){return"number"==typeof t?"".concat(t," ").concat(t," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(t)?"0 0 ".concat(t):t}(y),!1!==s||A.minWidth||(A.minWidth=0)),C(I.createElement("div",Object.assign({},b,{style:Object.assign(Object.assign({},A),x),className:O,ref:e}),m))}));var Wi=Hi,Vi=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Gi=function(t,e){var n,r=t.prefixCls,i=t.children,a=t.actions,o=t.extra,u=t.className,s=t.colStyle,l=Vi(t,["prefixCls","children","actions","extra","className","colStyle"]),c=(0,I.useContext)(ta),f=c.grid,h=c.itemLayout,d=(0,I.useContext)(St.E_).getPrefixCls,p=d("list",r),g=a&&a.length>0&&I.createElement("ul",{className:"".concat(p,"-item-action"),key:"actions"},a.map((function(t,e){return I.createElement("li",{key:"".concat(p,"-item-action-").concat(e)},t,e!==a.length-1&&I.createElement("em",{className:"".concat(p,"-item-action-split")}))}))),v=f?"div":"li",m=I.createElement(v,Object.assign({},l,f?{}:{ref:e},{className:q()("".concat(p,"-item"),(0,Z.Z)({},"".concat(p,"-item-no-flex"),!("vertical"===h?o:(I.Children.forEach(i,(function(t){"string"==typeof t&&(n=!0)})),!(n&&I.Children.count(i)>1)))),u)}),"vertical"===h&&o?[I.createElement("div",{className:"".concat(p,"-item-main"),key:"content"},i,g),I.createElement("div",{className:"".concat(p,"-item-extra"),key:"extra"},o)]:[i,g,(0,Ut.Tm)(o,{key:"extra"})]);return f?I.createElement(Wi,{ref:e,flex:1,style:s},m):m},Xi=(0,I.forwardRef)(Gi);Xi.Meta=function(t){var e=t.prefixCls,n=t.className,r=t.avatar,i=t.title,a=t.description,o=Vi(t,["prefixCls","className","avatar","title","description"]),u=(0,(0,I.useContext)(St.E_).getPrefixCls)("list",e),s=q()("".concat(u,"-item-meta"),n),l=I.createElement("div",{className:"".concat(u,"-item-meta-content")},i&&I.createElement("h4",{className:"".concat(u,"-item-meta-title")},i),a&&I.createElement("div",{className:"".concat(u,"-item-meta-description")},a));return I.createElement("div",Object.assign({},o,{className:s}),r&&I.createElement("div",{className:"".concat(u,"-item-meta-avatar")},r),(i||a)&&l)};var Yi=Xi,qi=function(t){var e,n,r=t.listBorderedCls,i=t.componentCls,a=t.paddingLG,o=t.margin,u=t.padding,s=t.listItemPaddingSM,l=t.marginLG,c=t.borderRadiusLG;return n={},(0,Z.Z)(n,"".concat(r),(e={border:"".concat(t.lineWidth,"px ").concat(t.lineType," ").concat(t.colorBorder),borderRadius:c},(0,Z.Z)(e,"".concat(i,"-header,").concat(i,"-footer,").concat(i,"-item"),{paddingInline:a}),(0,Z.Z)(e,"".concat(i,"-pagination"),{margin:"".concat(o,"px ").concat(l,"px")}),e)),(0,Z.Z)(n,"".concat(r).concat(i,"-sm"),(0,Z.Z)({},"".concat(i,"-item,").concat(i,"-header,").concat(i,"-footer"),{padding:s})),(0,Z.Z)(n,"".concat(r).concat(i,"-lg"),(0,Z.Z)({},"".concat(i,"-item,").concat(i,"-header,").concat(i,"-footer"),{padding:"".concat(u,"px ").concat(a,"px")})),n},$i=function(t){var e,n,r,i,a=t.componentCls,o=t.screenSM,u=t.screenMD,s=t.marginLG,l=t.marginSM,c=t.margin;return i={},(0,Z.Z)(i,"@media screen and (max-width:".concat(u,")"),(e={},(0,Z.Z)(e,"".concat(a),(0,Z.Z)({},"".concat(a,"-item"),(0,Z.Z)({},"".concat(a,"-item-action"),{marginInlineStart:s}))),(0,Z.Z)(e,"".concat(a,"-vertical"),(0,Z.Z)({},"".concat(a,"-item"),(0,Z.Z)({},"".concat(a,"-item-extra"),{marginInlineStart:s}))),e)),(0,Z.Z)(i,"@media screen and (max-width: ".concat(o,")"),(r={},(0,Z.Z)(r,"".concat(a),(0,Z.Z)({},"".concat(a,"-item"),(0,Z.Z)({flexWrap:"wrap"},"".concat(a,"-action"),{marginInlineStart:l}))),(0,Z.Z)(r,"".concat(a,"-vertical"),(0,Z.Z)({},"".concat(a,"-item"),(n={flexWrap:"wrap-reverse"},(0,Z.Z)(n,"".concat(a,"-item-main"),{minWidth:t.contentWidth}),(0,Z.Z)(n,"".concat(a,"-item-extra"),{margin:"auto auto ".concat(c,"px")}),n))),r)),i},Ji=function(t){var e,n,r,i,a,o,u=t.componentCls,s=t.antCls,l=t.controlHeight,c=t.minHeight,f=t.paddingSM,h=t.marginLG,d=t.padding,p=t.listItemPadding,g=t.colorPrimary,v=t.listItemPaddingSM,m=t.listItemPaddingLG,y=t.paddingXS,x=t.margin,b=t.colorText,w=t.colorTextDescription,S=t.motionDurationSlow,k=t.lineWidth;return o={},(0,Z.Z)(o,"".concat(u),Object.assign(Object.assign({},(0,Ne.Wf)(t)),(i={position:"relative","*":{outline:"none"}},(0,Z.Z)(i,"".concat(u,"-header, ").concat(u,"-footer"),{background:"transparent",paddingBlock:f}),(0,Z.Z)(i,"".concat(u,"-pagination"),(0,Z.Z)({marginBlockStart:h,textAlign:"end"},"".concat(s,"-pagination-options"),{textAlign:"start"})),(0,Z.Z)(i,"".concat(u,"-spin"),{minHeight:c,textAlign:"center"}),(0,Z.Z)(i,"".concat(u,"-items"),{margin:0,padding:0,listStyle:"none"}),(0,Z.Z)(i,"".concat(u,"-item"),(r={display:"flex",alignItems:"center",justifyContent:"space-between",padding:p,color:b},(0,Z.Z)(r,"".concat(u,"-item-meta"),(e={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},(0,Z.Z)(e,"".concat(u,"-item-meta-avatar"),{marginInlineEnd:d}),(0,Z.Z)(e,"".concat(u,"-item-meta-content"),{flex:"1 0",width:0,color:b}),(0,Z.Z)(e,"".concat(u,"-item-meta-title"),{marginBottom:t.marginXXS,color:b,fontSize:t.fontSize,lineHeight:t.lineHeight,"> a":(0,Z.Z)({color:b,transition:"all ".concat(S)},"&:hover",{color:g})}),(0,Z.Z)(e,"".concat(u,"-item-meta-description"),{color:w,fontSize:t.fontSize,lineHeight:t.lineHeight}),e)),(0,Z.Z)(r,"".concat(u,"-item-action"),(n={flex:"0 0 auto",marginInlineStart:t.marginXXL,padding:0,fontSize:0,listStyle:"none"},(0,Z.Z)(n,"& > li",(0,Z.Z)({position:"relative",display:"inline-block",padding:"0 ".concat(y,"px"),color:w,fontSize:t.fontSize,lineHeight:t.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),(0,Z.Z)(n,"".concat(u,"-item-action-split"),{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:k,height:Math.ceil(t.fontSize*t.lineHeight)-2*t.marginXXS,transform:"translateY(-50%)",backgroundColor:t.colorSplit}),n)),r)),(0,Z.Z)(i,"".concat(u,"-empty"),{padding:"".concat(d,"px 0"),color:w,fontSize:t.fontSizeSM,textAlign:"center"}),(0,Z.Z)(i,"".concat(u,"-empty-text"),{padding:d,color:t.colorTextDisabled,fontSize:t.fontSize,textAlign:"center"}),(0,Z.Z)(i,"".concat(u,"-item-no-flex"),{display:"block"}),i))),(0,Z.Z)(o,"".concat(u,"-grid ").concat(s,"-col > ").concat(u,"-item"),{display:"block",maxWidth:"100%",marginBlockEnd:x,paddingBlock:0,borderBlockEnd:"none"}),(0,Z.Z)(o,"".concat(u,"-vertical ").concat(u,"-item"),(a={alignItems:"initial"},(0,Z.Z)(a,"".concat(u,"-item-main"),{display:"block",flex:1}),(0,Z.Z)(a,"".concat(u,"-item-extra"),{marginInlineStart:h}),(0,Z.Z)(a,"".concat(u,"-item-meta"),(0,Z.Z)({marginBlockEnd:d},"".concat(u,"-item-meta-title"),{marginBlockEnd:f,color:b,fontSize:t.fontSizeLG,lineHeight:t.lineHeightLG})),(0,Z.Z)(a,"".concat(u,"-item-action"),{marginBlockStart:d,marginInlineStart:"auto","> li":(0,Z.Z)({padding:"0 ".concat(d,"px")},"&:first-child",{paddingInlineStart:0})}),a)),(0,Z.Z)(o,"".concat(u,"-split ").concat(u,"-item"),(0,Z.Z)({borderBlockEnd:"".concat(t.lineWidth,"px ").concat(t.lineType," ").concat(t.colorSplit)},"&:last-child",{borderBlockEnd:"none"})),(0,Z.Z)(o,"".concat(u,"-split ").concat(u,"-header"),{borderBlockEnd:"".concat(t.lineWidth,"px ").concat(t.lineType," ").concat(t.colorSplit)}),(0,Z.Z)(o,"".concat(u,"-split").concat(u,"-empty ").concat(u,"-footer"),{borderTop:"".concat(t.lineWidth,"px ").concat(t.lineType," ").concat(t.colorSplit)}),(0,Z.Z)(o,"".concat(u,"-loading ").concat(u,"-spin-nested-loading"),{minHeight:l}),(0,Z.Z)(o,"".concat(u,"-split").concat(u,"-something-after-last-item ").concat(s,"-spin-container > ").concat(u,"-items > ").concat(u,"-item:last-child"),{borderBlockEnd:"".concat(t.lineWidth,"px ").concat(t.lineType," ").concat(t.colorSplit)}),(0,Z.Z)(o,"".concat(u,"-lg ").concat(u,"-item"),{padding:m}),(0,Z.Z)(o,"".concat(u,"-sm ").concat(u,"-item"),{padding:v}),(0,Z.Z)(o,"".concat(u,":not(").concat(u,"-vertical)"),(0,Z.Z)({},"".concat(u,"-item-no-flex"),(0,Z.Z)({},"".concat(u,"-item-action"),{float:"right"}))),o},Ki=(0,Ze.Z)("List",(function(t){var e=(0,Re.TS)(t,{listBorderedCls:"".concat(t.componentCls,"-bordered"),minHeight:t.controlHeightLG,listItemPadding:"".concat(t.paddingContentVertical,"px ").concat(t.paddingContentHorizontalLG,"px"),listItemPaddingSM:"".concat(t.paddingContentVerticalSM,"px ").concat(t.paddingContentHorizontal,"px"),listItemPaddingLG:"".concat(t.paddingContentVerticalLG,"px ").concat(t.paddingContentHorizontalLG,"px")});return[Ji(e),qi(e),$i(e)]}),{contentWidth:220}),Qi=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},ta=I.createContext({});ta.Consumer;function ea(t){var e,n=t.pagination,r=void 0!==n&&n,i=t.prefixCls,a=t.bordered,o=void 0!==a&&a,u=t.split,s=void 0===u||u,l=t.className,c=t.children,f=t.itemLayout,h=t.loadMore,d=t.grid,p=t.dataSource,g=void 0===p?[]:p,v=t.size,m=t.header,y=t.footer,x=t.loading,b=void 0!==x&&x,w=t.rowKey,S=t.renderItem,k=t.locale,C=Qi(t,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),E=r&&"object"==typeof r?r:{},M=I.useState(E.defaultCurrent||1),O=(0,W.Z)(M,2),A=O[0],_=O[1],D=I.useState(E.defaultPageSize||10),T=(0,W.Z)(D,2),F=T[0],P=T[1],j=I.useContext(St.E_),B=j.getPrefixCls,L=j.renderEmpty,R=j.direction,N=function(t){return function(e,n){_(e),P(n),r&&r[t]&&r[t](e,n)}},z=N("onChange"),U=N("onShowSizeChange"),H=B("list",i),V=Ki(H),G=(0,W.Z)(V,2),Y=G[0],$=G[1],J=b;"boolean"==typeof J&&(J={spinning:J});var K=J&&J.spinning,Q="";switch(v){case"large":Q="lg";break;case"small":Q="sm"}var tt=q()(H,(e={},(0,Z.Z)(e,"".concat(H,"-vertical"),"vertical"===f),(0,Z.Z)(e,"".concat(H,"-").concat(Q),Q),(0,Z.Z)(e,"".concat(H,"-split"),s),(0,Z.Z)(e,"".concat(H,"-bordered"),o),(0,Z.Z)(e,"".concat(H,"-loading"),K),(0,Z.Z)(e,"".concat(H,"-grid"),!!d),(0,Z.Z)(e,"".concat(H,"-something-after-last-item"),!!(h||r||y)),(0,Z.Z)(e,"".concat(H,"-rtl"),"rtl"===R),e),l,$),et=Ni({current:1,total:0},{total:g.length,current:A,pageSize:F},r||{}),nt=Math.ceil(et.total/et.pageSize);et.current>nt&&(et.current=nt);var rt=r?I.createElement("div",{className:"".concat(H,"-pagination")},I.createElement(_i,Object.assign({},et,{onChange:z,onShowSizeChange:U}))):null,it=(0,X.Z)(g);r&&g.length>(et.current-1)*et.pageSize&&(it=(0,X.Z)(g).splice((et.current-1)*et.pageSize,et.pageSize));var at=Object.keys(d||{}).some((function(t){return["xs","sm","md","lg","xl","xxl"].includes(t)})),ot=Rr(at),ut=I.useMemo((function(){for(var t=0;t<Mr.length;t+=1){var e=Mr[t];if(ot[e])return e}}),[ot]),st=I.useMemo((function(){if(d){var t=ut&&d[ut]?d[ut]:d.column;return t?{width:"".concat(100/t,"%"),maxWidth:"".concat(100/t,"%")}:void 0}}),[null==d?void 0:d.column,ut]),lt=K&&I.createElement("div",{style:{minHeight:53}});if(it.length>0){var ct=it.map((function(t,e){return function(t,e){return S?((n="function"==typeof w?w(t):w?t[w]:t.key)||(n="list-item-".concat(e)),I.createElement(I.Fragment,{key:n},S(t,e))):null;var n}(t,e)}));lt=d?I.createElement(Lr,{gutter:d.gutter},I.Children.map(ct,(function(t){return I.createElement("div",{key:null==t?void 0:t.key,style:st},t)}))):I.createElement("ul",{className:"".concat(H,"-items")},ct)}else c||K||(lt=function(t,e){return I.createElement("div",{className:"".concat(t,"-empty-text")},k&&k.emptyText||e("List"))}(H,L||kr.Z));var ft=et.position||"bottom",ht=I.useMemo((function(){return{grid:d,itemLayout:f}}),[JSON.stringify(d),f]);return Y(I.createElement(ta.Provider,{value:ht},I.createElement("div",Object.assign({className:tt},C),("top"===ft||"both"===ft)&&rt,m&&I.createElement("div",{className:"".concat(H,"-header")},m),I.createElement(Zi,Object.assign({},J),lt,c),y&&I.createElement("div",{className:"".concat(H,"-footer")},y),h||("bottom"===ft||"both"===ft)&&rt)))}ea.Item=Yi;var na=ea,ra=n(14416),ia=["title","titleId"];var aa=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,ia);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 01.778-.332 48.294 48.294 0 005.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"}))})),oa=["title","titleId"];var ua=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,oa);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"}))})),sa=n(94730),la=n(70769),ca=n(70966),fa=n(85763),ha=n(97326),da=n(82963),pa=n(61120),ga={};function va(t,e){void 0===t&&(t=ga),void 0===e&&(e=ga);var n=Object.keys(t),r=Object.keys(e);return t===e||n.length===r.length&&n.every((function(n){return t[n]===e[n]}))}var ma=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ya=Object.prototype.hasOwnProperty;function xa(t,e){return ya.call(t,e)}function ba(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var r=[];for(var i in t)xa(t,i)&&r.push(i);return r}function wa(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function Sa(t){for(var e,n=0,r=t.length;n<r;){if(!((e=t.charCodeAt(n))>=48&&e<=57))return!1;n++}return!0}function ka(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function Ca(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Ea(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(Ea(t[e]))return!0}else if("object"==typeof t)for(var r=ba(t),i=r.length,a=0;a<i;a++)if(Ea(t[r[a]]))return!0;return!1}function Ma(t,e){var n=[t];for(var r in e){var i="object"==typeof e[r]?JSON.stringify(e[r],null,2):e[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}var Oa=function(t){function e(e,n,r,i,a){var o=this.constructor,u=t.call(this,Ma(e,{name:n,index:r,operation:i,tree:a}))||this;return u.name=n,u.index=r,u.operation=i,u.tree=a,Object.setPrototypeOf(u,o.prototype),u.message=Ma(e,{name:n,index:r,operation:i,tree:a}),u}return ma(e,t),e}(Error),Aa=Oa,_a=wa,Da={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){var r=Fa(n,this.path);r&&(r=wa(r));var i=Ia(n,{op:"remove",path:this.from}).removed;return Ia(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){var r=Fa(n,this.from);return Ia(n,{op:"add",path:this.path,value:wa(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:Ra(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},Ta={add:function(t,e,n){return Sa(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){return{newDocument:n,removed:t.splice(e,1)[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:Da.move,copy:Da.copy,test:Da.test,_get:Da._get};function Fa(t,e){if(""==e)return t;var n={op:"_get",path:e};return Ia(t,n),n.value}function Ia(t,e,n,r,i,a){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=0),n&&("function"==typeof n?n(e,0,t,e.path):Ba(e,0)),""===e.path){var o={newDocument:t};if("add"===e.op)return o.newDocument=e.value,o;if("replace"===e.op)return o.newDocument=e.value,o.removed=t,o;if("move"===e.op||"copy"===e.op)return o.newDocument=Fa(t,e.from),"move"===e.op&&(o.removed=t),o;if("test"===e.op){if(o.test=Ra(t,e.value),!1===o.test)throw new Aa("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return o.newDocument=t,o}if("remove"===e.op)return o.removed=t,o.newDocument=null,o;if("_get"===e.op)return e.value=t,o;if(n)throw new Aa("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,t);return o}r||(t=wa(t));var u=(e.path||"").split("/"),s=t,l=1,c=u.length,f=void 0,h=void 0,d=void 0;for(d="function"==typeof n?n:Ba;;){if((h=u[l])&&-1!=h.indexOf("~")&&(h=Ca(h)),i&&("__proto__"==h||"prototype"==h&&l>0&&"constructor"==u[l-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===s[h]?f=u.slice(0,l).join("/"):l==c-1&&(f=e.path),void 0!==f&&d(e,0,t,f)),l++,Array.isArray(s)){if("-"===h)h=s.length;else{if(n&&!Sa(h))throw new Aa("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,t);Sa(h)&&(h=~~h)}if(l>=c){if(n&&"add"===e.op&&h>s.length)throw new Aa("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,t);if(!1===(o=Ta[e.op].call(e,s,h,t)).test)throw new Aa("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return o}}else if(l>=c){if(!1===(o=Da[e.op].call(e,s,h,t)).test)throw new Aa("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return o}if(s=s[h],n&&l<c&&(!s||"object"!=typeof s))throw new Aa("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,e,t)}}function Pa(t,e,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(e))throw new Aa("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=wa(t));for(var a=new Array(e.length),o=0,u=e.length;o<u;o++)a[o]=Ia(t,e[o],n,!0,i,o),t=a[o].newDocument;return a.newDocument=t,a}function ja(t,e,n){var r=Ia(t,e);if(!1===r.test)throw new Aa("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function Ba(t,e,n,r){if("object"!=typeof t||null===t||Array.isArray(t))throw new Aa("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(!Da[t.op])throw new Aa("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n);if("string"!=typeof t.path)throw new Aa("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new Aa('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if(("move"===t.op||"copy"===t.op)&&"string"!=typeof t.from)throw new Aa("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new Aa("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&Ea(t.value))throw new Aa("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n)if("add"==t.op){var i=t.path.split("/").length,a=r.split("/").length;if(i!==a+1&&i!==a)throw new Aa("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==r)throw new Aa("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if("move"===t.op||"copy"===t.op){var o=La([{op:"_get",path:t.from,value:void 0}],n);if(o&&"OPERATION_PATH_UNRESOLVABLE"===o.name)throw new Aa("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}function La(t,e,n){try{if(!Array.isArray(t))throw new Aa("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Pa(wa(e),wa(t),n||!0);else{n=n||Ba;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof Aa)return i;throw i}}function Ra(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n,r,i,a=Array.isArray(t),o=Array.isArray(e);if(a&&o){if((r=t.length)!=e.length)return!1;for(n=r;0!=n--;)if(!Ra(t[n],e[n]))return!1;return!0}if(a!=o)return!1;var u=Object.keys(t);if((r=u.length)!==Object.keys(e).length)return!1;for(n=r;0!=n--;)if(!e.hasOwnProperty(u[n]))return!1;for(n=r;0!=n--;)if(!Ra(t[i=u[n]],e[i]))return!1;return!0}return t!=t&&e!=e}var Za=new WeakMap,Na=function(t){this.observers=new Map,this.obj=t},za=function(t,e){this.callback=t,this.observer=e};function Ua(t,e){e.unobserve()}function Ha(t,e){var n,r=function(t){return Za.get(t)}(t);if(r){var i=function(t,e){return t.observers.get(e)}(r,e);n=i&&i.observer}else r=new Na(t),Za.set(t,r);if(n)return n;if(n={},r.value=wa(t),e){n.callback=e,n.next=null;var a=function(){Wa(n)},o=function(){clearTimeout(n.next),n.next=setTimeout(a)};"undefined"!=typeof window&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return n.patches=[],n.object=t,n.unobserve=function(){Wa(n),clearTimeout(n.next),function(t,e){t.observers.delete(e.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(e,new za(e,n)),n}function Wa(t,e){void 0===e&&(e=!1);var n=Za.get(t.object);Va(n.value,t.object,t.patches,"",e),t.patches.length&&Pa(n.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function Va(t,e,n,r,i){if(e!==t){"function"==typeof e.toJSON&&(e=e.toJSON());for(var a=ba(e),o=ba(t),u=!1,s=o.length-1;s>=0;s--){var l=t[f=o[s]];if(!xa(e,f)||void 0===e[f]&&void 0!==l&&!1===Array.isArray(e))Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+ka(f),value:wa(l)}),n.push({op:"remove",path:r+"/"+ka(f)}),u=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}),!0);else{var c=e[f];"object"==typeof l&&null!=l&&"object"==typeof c&&null!=c&&Array.isArray(l)===Array.isArray(c)?Va(l,c,n,r+"/"+ka(f),i):l!==c&&(!0,i&&n.push({op:"test",path:r+"/"+ka(f),value:wa(l)}),n.push({op:"replace",path:r+"/"+ka(f),value:wa(c)}))}}if(u||a.length!=o.length)for(s=0;s<a.length;s++){var f;xa(t,f=a[s])||void 0===e[f]||n.push({op:"add",path:r+"/"+ka(f),value:wa(e[f])})}}}function Ga(t,e,n){void 0===n&&(n=!1);var r=[];return Va(t,e,r,"",n),r}Object.assign({},r,i,{JsonPatchError:Oa,deepClone:wa,escapePathComponent:ka,unescapePathComponent:Ca});var Xa=n(70080),Ya=n.n(Xa);function qa(t,e,n){return t.fields=e||[],t.fname=n,t}function $a(t){return null==t?null:t.fname}function Ja(t){return null==t?null:t.fields}function Ka(t){return 1===t.length?Qa(t[0]):to(t)}var Qa=function(t){return function(e){return e[t]}},to=function(t){var e=t.length;return function(n){for(var r=0;r<e;++r)n=n[t[r]];return n}};function eo(t){throw Error(t)}function no(t){var e,n,r,i=[],a=t.length,o=null,u=0,s="";function l(){i.push(s+t.substring(e,n)),s="",e=n+1}for(t+="",e=n=0;n<a;++n)if("\\"===(r=t[n]))s+=t.substring(e,n),s+=t.substring(++n,++n),e=n;else if(r===o)l(),o=null,u=-1;else{if(o)continue;e===u&&'"'===r||e===u&&"'"===r?(e=n+1,o=r):"."!==r||u?"["===r?(n>e&&l(),u=e=n+1):"]"===r&&(u||eo("Access path missing open bracket: "+t),u>0&&l(),u=0,e=n+1):n>e?l():e=n+1}return u&&eo("Access path missing closing bracket: "+t),o&&eo("Access path missing closing quote: "+t),n>e&&(n++,l()),i}function ro(t,e,n){var r=no(t);return t=1===r.length?r[0]:t,qa((n&&n.get||Ka)(r),[t],e||t)}var io=ro("id"),ao=qa((function(t){return t}),[],"identity"),oo=qa((function(){return 0}),[],"zero"),uo=qa((function(){return 1}),[],"one"),so=qa((function(){return!0}),[],"true"),lo=qa((function(){return!1}),[],"false");function co(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}var fo=0,ho=1,po=2,go=3,vo=4;function mo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:co,r=t||fo;return{level:function(t){return arguments.length?(r=+t,this):r},error:function(){return r>=ho&&n(e||"error","ERROR",arguments),this},warn:function(){return r>=po&&n(e||"warn","WARN",arguments),this},info:function(){return r>=go&&n(e||"log","INFO",arguments),this},debug:function(){return r>=vo&&n(e||"log","DEBUG",arguments),this}}}var yo=Array.isArray;function xo(t){return t===Object(t)}var bo=function(t){return"__proto__"!==t};function wo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){for(var n in e)if("signals"===n)t.signals=ko(t.signals,e.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;So(t,n,e[n],r)}return t}),{})}function So(t,e,n,r){var i,a;if(bo(e))if(xo(n)&&!yo(n))for(i in a=xo(t[e])?t[e]:t[e]={},n)r&&(!0===r||r[i])?So(a,i,n[i]):bo(i)&&(a[i]=n[i]);else t[e]=n}function ko(t,e){if(null==t)return e;var n={},r=[];function i(t){n[t.name]||(n[t.name]=1,r.push(t))}return e.forEach(i),t.forEach(i),r}function Co(t){return t[t.length-1]}function Eo(t){return null==t||""===t?null:+t}var Mo=function(t){return function(e){return t*Math.exp(e)}},Oo=function(t){return function(e){return Math.log(t*e)}},Ao=function(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}},_o=function(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}},Do=function(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}};function To(t,e,n,r){var i=n(t[0]),a=n(Co(t)),o=(a-i)*e;return[r(i-o),r(a-o)]}function Fo(t,e){return To(t,e,Eo,ao)}function Io(t,e){var n=Math.sign(t[0]);return To(t,e,Oo(n),Mo(n))}function Po(t,e,n){return To(t,e,Do(n),Do(1/n))}function jo(t,e,n){return To(t,e,Ao(n),_o(n))}function Bo(t,e,n,r,i){var a=r(t[0]),o=r(Co(t)),u=null!=e?r(e):(a+o)/2;return[i(u+(a-u)*n),i(u+(o-u)*n)]}function Lo(t,e,n){return Bo(t,e,n,Eo,ao)}function Ro(t,e,n){var r=Math.sign(t[0]);return Bo(t,e,n,Oo(r),Mo(r))}function Zo(t,e,n,r){return Bo(t,e,n,Do(r),Do(1/r))}function No(t,e,n,r){return Bo(t,e,n,Ao(r),_o(r))}function zo(t){return 1+~~(new Date(t).getMonth()/3)}function Uo(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Ho(t){return null!=t?yo(t)?t:[t]:[]}function Wo(t,e,n){var r,i=t[0],a=t[1];return a<i&&(r=a,a=i,i=r),(r=a-i)>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]}function Vo(t){return"function"==typeof t}function Go(t,e,n){n=n||{},e=Ho(e)||[];var r=[],i=[],a={},o=n.comparator||Yo;return Ho(t).forEach((function(t,o){null!=t&&(r.push("descending"===e[o]?-1:1),i.push(t=Vo(t)?t:ro(t,null,n)),(Ja(t)||[]).forEach((function(t){return a[t]=1})))})),0===i.length?null:qa(o(i,r),Object.keys(a))}var Xo=function(t,e){return(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e==e?-1:e!=e&&t==t?1:0)},Yo=function(t,e){return 1===t.length?qo(t[0],e[0]):$o(t,e,t.length)},qo=function(t,e){return function(n,r){return Xo(t(n),t(r))*e}},$o=function(t,e,n){return e.push(0),function(r,i){for(var a,o=0,u=-1;0===o&&++u<n;)a=t[u],o=Xo(a(r),a(i));return o*e[u]}};function Jo(t){return Vo(t)?t:function(){return t}}function Ko(t,e){var n;return function(r){n&&clearTimeout(n),n=setTimeout((function(){return e(r),n=null}),t)}}function Qo(t){for(var e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r])t[n]=e[n];return t}function tu(t,e){var n,r,i,a,o=0;if(t&&(n=t.length))if(null==e){for(r=t[o];o<n&&(null==r||r!=r);r=t[++o]);for(i=a=r;o<n;++o)null!=(r=t[o])&&(r<i&&(i=r),r>a&&(a=r))}else{for(r=e(t[o]);o<n&&(null==r||r!=r);r=e(t[++o]));for(i=a=r;o<n;++o)null!=(r=e(t[o]))&&(r<i&&(i=r),r>a&&(a=r))}return[i,a]}function eu(t,e){var n,r,i,a,o,u=t.length,s=-1;if(null==e){for(;++s<u;)if(null!=(r=t[s])&&r>=r){n=i=r;break}if(s===u)return[-1,-1];for(a=o=s;++s<u;)null!=(r=t[s])&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}else{for(;++s<u;)if(null!=(r=e(t[s],s,t))&&r>=r){n=i=r;break}if(s===u)return[-1,-1];for(a=o=s;++s<u;)null!=(r=e(t[s],s,t))&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}return[a,o]}var nu=Object.prototype.hasOwnProperty;function ru(t,e){return nu.call(t,e)}var iu={};function au(t){var e,n={};function r(t){return ru(n,t)&&n[t]!==iu}var i={size:0,empty:0,object:n,has:r,get:function(t){return r(t)?n[t]:void 0},set:function(t,e){return r(t)||(++i.size,n[t]===iu&&--i.empty),n[t]=e,this},delete:function(t){return r(t)&&(--i.size,++i.empty,n[t]=iu),this},clear:function(){i.size=i.empty=0,i.object=n={}},test:function(t){return arguments.length?(e=t,i):e},clean:function(){var t={},r=0;for(var a in n){var o=n[a];o===iu||e&&e(o)||(t[a]=o,++r)}i.size=r,i.empty=0,i.object=n=t}};return t&&Object.keys(t).forEach((function(e){i.set(e,t[e])})),i}function ou(t,e,n,r,i,a){if(!n&&0!==n)return a;var o,u=+n,s=t[0],l=Co(t);l<s&&(o=s,s=l,l=o),o=Math.abs(e-s);var c=Math.abs(l-e);return o<c&&o<=u?r:c<=u?i:a}function uu(t,e,n){var r=t.prototype=Object.create(e.prototype);return Object.defineProperty(r,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),Qo(r,n)}function su(t,e,n,r){var i,a=e[0],o=e[e.length-1];return a>o&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=t:a<t)&&(r?t<=o:t<o)}function lu(t){return"boolean"==typeof t}function cu(t){return"[object Date]"===Object.prototype.toString.call(t)}function fu(t){return t&&Vo(t[Symbol.iterator])}function hu(t){return"number"==typeof t}function du(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function pu(t){return"string"==typeof t}function gu(t,e,n){t&&(t=e?Ho(t).map((function(t){return t.replace(/\\(.)/g,"$1")})):Ho(t));var r,i=t&&t.length,a=n&&n.get||Ka,o=function(t){return a(e?[t]:no(t))};if(i)if(1===i){var u=o(t[0]);r=function(t){return""+u(t)}}else{var s=t.map(o);r=function(t){for(var e=""+s[0](t),n=0;++n<i;)e+="|"+s[n](t);return e}}else r=function(){return""};return qa(r,t,"key")}function vu(t,e){var n=t[0],r=Co(t),i=+e;return i?1===i?r:n+i*(r-n):n}function mu(t){var e,n,r;t=+t||1e4;var i=function(){e={},n={},r=0},a=function(i,a){return++r>t&&(n=e,e={},r=1),e[i]=a};return i(),{clear:i,has:function(t){return ru(e,t)||ru(n,t)},get:function(t){return ru(e,t)?e[t]:ru(n,t)?a(t,n[t]):void 0},set:function(t,n){return ru(e,t)?e[t]=n:a(t,n)}}}function yu(t,e,n,r){var i=e.length,a=n.length;if(!a)return e;if(!i)return n;for(var o=r||new e.constructor(i+a),u=0,s=0,l=0;u<i&&s<a;++l)o[l]=t(e[u],n[s])>0?n[s++]:e[u++];for(;u<i;++u,++l)o[l]=e[u];for(;s<a;++s,++l)o[l]=n[s];return o}function xu(t,e){for(var n="";--e>=0;)n+=t;return n}function bu(t,e,n,r){var i=n||" ",a=t+"",o=e-a.length;return o<=0?a:"left"===r?xu(i,o)+a:"center"===r?xu(i,~~(o/2))+a+xu(i,Math.ceil(o/2)):a+xu(i,o)}function wu(t){return t&&Co(t)-t[0]||0}function Su(t){return yo(t)?"["+t.map(Su)+"]":xo(t)||pu(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function ku(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t}var Cu=function(t){return hu(t)||cu(t)?t:Date.parse(t)};function Eu(t,e){return e=e||Cu,null==t||""===t?null:e(t)}function Mu(t){return null==t||""===t?null:t+""}function Ou(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return e}function Au(t,e,n,r){var i=null!=r?r:"…",a=t+"",o=a.length,u=Math.max(0,e-i.length);return o<=e?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function _u(t,e,n){if(t)if(e)for(var r=t.length,i=0;i<r;++i){var a=e(t[i]);a&&n(a,i,t)}else t.forEach(n)}var Du={},Tu={};function Fu(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Iu(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Pu(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function ju(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Pu(-e,6):e>9999?"+"+Pu(e,6):Pu(e,4))+"-"+Pu(t.getUTCMonth()+1,2)+"-"+Pu(t.getUTCDate(),2)+(a?"T"+Pu(n,2)+":"+Pu(r,2)+":"+Pu(i,2)+"."+Pu(a,3)+"Z":i?"T"+Pu(n,2)+":"+Pu(r,2)+":"+Pu(i,2)+"Z":r||n?"T"+Pu(n,2)+":"+Pu(r,2)+"Z":"")}function Bu(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,u=0,s=a<=0,l=!1;function c(){if(s)return Tu;if(l)return l=!1,Du;var e,r,i=o;if(34===t.charCodeAt(i)){for(;o++<a&&34!==t.charCodeAt(o)||34===t.charCodeAt(++o););return(e=o)>=a?s=!0:10===(r=t.charCodeAt(o++))?l=!0:13===r&&(l=!0,10===t.charCodeAt(o)&&++o),t.slice(i+1,e-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=t.charCodeAt(e=o++)))l=!0;else if(13===r)l=!0,10===t.charCodeAt(o)&&++o;else if(r!==n)continue;return t.slice(i,e)}return s=!0,t.slice(i,a)}for(10===t.charCodeAt(a-1)&&--a,13===t.charCodeAt(a-1)&&--a;(r=c())!==Tu;){for(var f=[];r!==Du&&r!==Tu;)f.push(r),r=c();e&&null==(f=e(f,u++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?ju(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Fu(t);return function(r,i){return e(n(r),i,t)}}(t,e):Fu(t)}));return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=Iu(e)),[n.map(o).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Iu(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}function Lu(t){return t}function Ru(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return Zu(t,e)}))}:Zu(t,e)}function Zu(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,a=Nu(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function Nu(t,e){var n=function(t){if(null==t)return Lu;var e,n,r=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,u){u||(e=n=0);var s=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+a,c[1]=(n+=t[1])*i+o;s<l;)c[s]=t[s],++s;return c}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],a=0,o=i.length;a<o;++a)e.push(n(i[a],a));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,o)}function a(t){return n(t)}function o(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function u(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(u)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=a(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(a);break;case"LineString":n=o(e.arcs);break;case"MultiLineString":n=e.arcs.map(o);break;case"Polygon":n=s(e.arcs);break;case"MultiPolygon":n=e.arcs.map(s);break;default:return null}return{type:r,coordinates:n}}(e)}function zu(t,e){var n={},r={},i={},a=[],o=-1;function u(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),a.push(i)}}return e.forEach((function(n,r){var i,a=t.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=e[++o],e[o]=n,e[r]=i)})),e.forEach((function(e){var n,a,o=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),u=o[0],s=o[1];if(n=i[u])if(delete i[n.end],n.push(e),n.end=s,a=r[s]){delete r[a.start];var l=a===n?n:n.concat(a);r[l.start=n.start]=i[l.end=a.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[s])if(delete r[n.start],n.unshift(e),n.start=u,a=i[u]){delete i[a.end];var c=a===n?n:a.concat(n);r[c.start=a.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=u]=i[n.end=s]=n})),u(i,r),u(r,i),e.forEach((function(t){n[t<0?~t:t]||a.push([t])})),a}function Uu(t){return Nu(t,Hu.apply(this,arguments))}function Hu(t,e,n){var r,i,a;if(arguments.length>1)r=Wu(t,e,n);else for(i=0,r=new Array(a=t.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:zu(t,r)}}function Wu(t,e,n){var r,i=[],a=[];function o(t){var e=t<0?~t:t;(a[e]||(a[e]=[])).push({i:t,g:r})}function u(t){t.forEach(o)}function s(t){t.forEach(u)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":u(e.arcs);break;case"MultiLineString":case"Polygon":s(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(s)}(e.arcs)}}(e),a.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}var Vu=Math.sqrt(50),Gu=Math.sqrt(10),Xu=Math.sqrt(2);function Yu(t,e,n){var r,i,a,o,u=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=qu(t,e,n))||!isFinite(o))return[];if(o>0){var s=Math.round(t/o),l=Math.round(e/o);for(s*o<t&&++s,l*o>e&&--l,a=new Array(i=l-s+1);++u<i;)a[u]=(s+u)*o}else{o=-o;var c=Math.round(t*o),f=Math.round(e*o);for(c/o<t&&++c,f/o>e&&--f,a=new Array(i=f-c+1);++u<i;)a[u]=(c+u)/o}return r&&a.reverse(),a}function qu(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Vu?10:a>=Gu?5:a>=Xu?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Vu?10:a>=Gu?5:a>=Xu?2:1)}function $u(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Vu?i*=10:a>=Gu?i*=5:a>=Xu&&(i*=2),e<t?-i:i}var Ju,Ku=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qu(t){if(!(e=Ku.exec(t)))throw new Error("invalid format: "+t);var e;return new ts({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ts(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function es(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ns(t){return(t=es(Math.abs(t)))?t[1]:NaN}function rs(t,e){var n=es(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Qu.prototype=ts.prototype,ts.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var is={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return rs(100*t,e)},r:rs,s:function(t,e){var n=es(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Ju=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+es(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function as(t){return t}var os,us,ss,ls=Array.prototype.map,cs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function fs(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?as:(e=ls.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(t.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?as:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(ls.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"−":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Qu(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,v=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):is[y]||(void 0===v&&(v=12),m=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var x="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?a:/[%p]/.test(y)?s:"",w=is[y],S=/[defgprs%]/.test(y);function k(t){var i,a,s,h=x,k=b;if("c"===y)k=w(t)+k,t="";else{var C=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:w(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),C&&0==+t&&"+"!==f&&(C=!1),h=(C?"("===f?f:l:"-"===f||"("===f?"":f)+h,k=("s"===y?cs[8+Ju/3]:"")+k+(C&&"("===f?")":""),S)for(i=-1,a=t.length;++i<a;)if(48>(s=t.charCodeAt(i))||s>57){k=(46===s?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var E=h.length+t.length+k.length,M=E<p?new Array(p-E+1).join(e):"";switch(g&&d&&(t=r(M+t,M.length?p-k.length:1/0),M=""),n){case"<":t=h+t+k+M;break;case"=":t=h+M+t+k;break;case"^":t=M.slice(0,E=M.length>>1)+h+t+k+M.slice(E);break;default:t=M+h+t+k}return u(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n=f(((t=Qu(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ns(e)/3))),i=Math.pow(10,-r),a=cs[8+r/3];return function(t){return n(i*t)+a}}}}!function(t){os=fs(t),us=os.format,ss=os.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var hs=new Date,ds=new Date;function ps(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,u=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return u;do{u.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return u},i.filter=function(n){return ps((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return hs.setTime(+e),ds.setTime(+r),t(hs),t(ds),Math.floor(n(hs,ds))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var gs=1e3,vs=6e4,ms=36e5,ys=864e5,xs=6048e5,bs=2592e6,ws=31536e6,Ss=ps((function(t){return t.setHours(0,0,0,0)}),(function(t,e){return t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*vs)/ys}),(function(t){return t.getDate()-1})),ks=(Ss.range,ps((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/ys}),(function(t){return t.getUTCDate()-1}))),Cs=(ks.range,ps((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/ys}),(function(t){return Math.floor(t/ys)})));Cs.range;function Es(t){return ps((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*vs)/xs}))}var Ms=Es(0),Os=Es(1),As=Es(2),_s=Es(3),Ds=Es(4),Ts=Es(5),Fs=Es(6);Ms.range,Os.range,As.range,_s.range,Ds.range,Ts.range,Fs.range;function Is(t){return ps((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/xs}))}var Ps=Is(0),js=Is(1),Bs=Is(2),Ls=Is(3),Rs=Is(4),Zs=Is(5),Ns=Is(6),zs=(Ps.range,js.range,Bs.range,Ls.range,Rs.range,Zs.range,Ns.range,ps((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));zs.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ps((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};zs.range;var Us=ps((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Us.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ps((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};Us.range;var Hs=ps((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Ws=(Hs.range,ps((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),Vs=(Ws.range,ps((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*gs-t.getMinutes()*vs)}),(function(t,e){t.setTime(+t+e*ms)}),(function(t,e){return(e-t)/ms}),(function(t){return t.getHours()}))),Gs=(Vs.range,ps((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*ms)}),(function(t,e){return(e-t)/ms}),(function(t){return t.getUTCHours()}))),Xs=(Gs.range,ps((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*gs)}),(function(t,e){t.setTime(+t+e*vs)}),(function(t,e){return(e-t)/vs}),(function(t){return t.getMinutes()}))),Ys=(Xs.range,ps((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*vs)}),(function(t,e){return(e-t)/vs}),(function(t){return t.getUTCMinutes()}))),qs=(Ys.range,ps((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*gs)}),(function(t,e){return(e-t)/gs}),(function(t){return t.getUTCSeconds()}))),$s=(qs.range,ps((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));$s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ps((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):$s:null};var Js,Ks,Qs,tl,el,nl,rl;$s.range;function il(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function al(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ol(t){var e,n,r;function i(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==e(r,r))return a;do{var o=i+a>>>1;n(t[o],r)<0?i=o+1:a=o}while(i<a)}return i}return 2!==t.length?(e=il,n=function(e,n){return il(t(e),n)},r=function(e,n){return t(e)-n}):(e=t===il||t===al?t:ul,n=t,r=t),{left:i,center:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,o=i(t,e,n,a-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==e(r,r))return a;do{var o=i+a>>>1;n(t[o],r)<=0?i=o+1:a=o}while(i<a)}return i}}}function ul(){return 0}var sl="year",ll="quarter",cl="month",fl="week",hl="date",dl="day",pl="dayofyear",gl="hours",vl="minutes",ml="seconds",yl="milliseconds",xl=[sl,ll,cl,fl,hl,dl,pl,gl,vl,ml,yl],bl=xl.reduce((function(t,e,n){return t[e]=1+n,t}),{});function wl(t){var e=Ho(t).slice(),n={};return e.length||eo("Missing time unit."),e.forEach((function(t){ru(bl,t)?n[t]=1:eo("Invalid time unit: ".concat(t,"."))})),(n[fl]||n[dl]?1:0)+(n[ll]||n[cl]||n[hl]?1:0)+(n[pl]?1:0)>1&&eo("Incompatible time units: ".concat(t)),e.sort((function(t,e){return bl[t]-bl[e]})),e}var Sl=(Js={},(0,Z.Z)(Js,sl,"%Y "),(0,Z.Z)(Js,ll,"Q%q "),(0,Z.Z)(Js,cl,"%b "),(0,Z.Z)(Js,hl,"%d "),(0,Z.Z)(Js,fl,"W%U "),(0,Z.Z)(Js,dl,"%a "),(0,Z.Z)(Js,pl,"%j "),(0,Z.Z)(Js,gl,"%H:00"),(0,Z.Z)(Js,vl,"00:%M"),(0,Z.Z)(Js,ml,":%S"),(0,Z.Z)(Js,yl,".%L"),(0,Z.Z)(Js,"".concat(sl,"-").concat(cl),"%Y-%m "),(0,Z.Z)(Js,"".concat(sl,"-").concat(cl,"-").concat(hl),"%Y-%m-%d "),(0,Z.Z)(Js,"".concat(gl,"-").concat(vl),"%H:%M"),Js);function kl(t,e){var n,r,i=Qo({},Sl,e),a=wl(t),o=a.length,u="",s=0;for(s=0;s<o;)for(n=a.length;n>s;--n)if(null!=i[r=a.slice(s,n).join("-")]){u+=i[r],s=n;break}return u.trim()}var Cl=new Date;function El(t){return Cl.setFullYear(t),Cl.setMonth(0),Cl.setDate(1),Cl.setHours(0,0,0,0),Cl}function Ml(t){return Al(new Date(t))}function Ol(t){return _l(new Date(t))}function Al(t){return Ss.count(El(t.getFullYear())-1,t)}function _l(t){return Ms.count(El(t.getFullYear())-1,t)}function Dl(t){return El(t).getDay()}function Tl(t,e,n,r,i,a,o){if(0<=t&&t<100){var u=new Date(-1,e,n,r,i,a,o);return u.setFullYear(t),u}return new Date(t,e,n,r,i,a,o)}function Fl(t){return Pl(new Date(t))}function Il(t){return jl(new Date(t))}function Pl(t){var e=Date.UTC(t.getUTCFullYear(),0,1);return ks.count(e-1,t)}function jl(t){var e=Date.UTC(t.getUTCFullYear(),0,1);return Ps.count(e-1,t)}function Bl(t){return Cl.setTime(Date.UTC(t,0,1)),Cl.getUTCDay()}function Ll(t,e,n,r,i,a,o){if(0<=t&&t<100){var u=new Date(Date.UTC(-1,e,n,r,i,a,o));return u.setUTCFullYear(n.y),u}return new Date(Date.UTC(t,e,n,r,i,a,o))}function Rl(t,e,n,r,i){var a=e||1,o=Co(t),u=function(t,e,i){return function(t,e,n,r){var i=n<=1?t:r?function(e,i){return r+n*Math.floor((t(e,i)-r)/n)}:function(e,r){return n*Math.floor(t(e,r)/n)};return e?function(t,n){return e(i(t,n),n)}:i}(n[i=i||t],r[i],t===o&&a,e)},s=new Date,l=Ou(t),c=l[sl]?u(sl):Jo(2012),f=l[cl]?u(cl):l[ll]?u(ll):oo,h=l[fl]&&l[dl]?u(dl,1,fl+dl):l[fl]?u(fl,1):l[dl]?u(dl,1):l[hl]?u(hl,1):l[pl]?u(pl,1):uo,d=l[gl]?u(gl):oo,p=l[vl]?u(vl):oo,g=l[ml]?u(ml):oo,v=l[yl]?u(yl):oo;return function(t){s.setTime(+t);var e=c(s);return i(e,f(s),h(s,e),d(s),p(s),g(s),v(s))}}function Zl(t,e,n){return e+7*t-(n+6)%7}var Nl=(Ks={},(0,Z.Z)(Ks,sl,(function(t){return t.getFullYear()})),(0,Z.Z)(Ks,ll,(function(t){return Math.floor(t.getMonth()/3)})),(0,Z.Z)(Ks,cl,(function(t){return t.getMonth()})),(0,Z.Z)(Ks,hl,(function(t){return t.getDate()})),(0,Z.Z)(Ks,gl,(function(t){return t.getHours()})),(0,Z.Z)(Ks,vl,(function(t){return t.getMinutes()})),(0,Z.Z)(Ks,ml,(function(t){return t.getSeconds()})),(0,Z.Z)(Ks,yl,(function(t){return t.getMilliseconds()})),(0,Z.Z)(Ks,pl,(function(t){return Al(t)})),(0,Z.Z)(Ks,fl,(function(t){return _l(t)})),(0,Z.Z)(Ks,fl+dl,(function(t,e){return Zl(_l(t),t.getDay(),Dl(e))})),(0,Z.Z)(Ks,dl,(function(t,e){return Zl(1,t.getDay(),Dl(e))})),Ks),zl=(Qs={},(0,Z.Z)(Qs,ll,(function(t){return 3*t})),(0,Z.Z)(Qs,fl,(function(t,e){return Zl(t,0,Dl(e))})),Qs);function Ul(t,e){return Rl(t,e||1,Nl,zl,Tl)}var Hl=(tl={},(0,Z.Z)(tl,sl,(function(t){return t.getUTCFullYear()})),(0,Z.Z)(tl,ll,(function(t){return Math.floor(t.getUTCMonth()/3)})),(0,Z.Z)(tl,cl,(function(t){return t.getUTCMonth()})),(0,Z.Z)(tl,hl,(function(t){return t.getUTCDate()})),(0,Z.Z)(tl,gl,(function(t){return t.getUTCHours()})),(0,Z.Z)(tl,vl,(function(t){return t.getUTCMinutes()})),(0,Z.Z)(tl,ml,(function(t){return t.getUTCSeconds()})),(0,Z.Z)(tl,yl,(function(t){return t.getUTCMilliseconds()})),(0,Z.Z)(tl,pl,(function(t){return Pl(t)})),(0,Z.Z)(tl,fl,(function(t){return jl(t)})),(0,Z.Z)(tl,dl,(function(t,e){return Zl(1,t.getUTCDay(),Bl(e))})),(0,Z.Z)(tl,fl+dl,(function(t,e){return Zl(jl(t),t.getUTCDay(),Bl(e))})),tl),Wl=(el={},(0,Z.Z)(el,ll,(function(t){return 3*t})),(0,Z.Z)(el,fl,(function(t,e){return Zl(t,0,Bl(e))})),el);function Vl(t,e){return Rl(t,e||1,Hl,Wl,Ll)}var Gl=(nl={},(0,Z.Z)(nl,sl,zs),(0,Z.Z)(nl,ll,Hs.every(3)),(0,Z.Z)(nl,cl,Hs),(0,Z.Z)(nl,fl,Ms),(0,Z.Z)(nl,hl,Ss),(0,Z.Z)(nl,dl,Ss),(0,Z.Z)(nl,pl,Ss),(0,Z.Z)(nl,gl,Vs),(0,Z.Z)(nl,vl,Xs),(0,Z.Z)(nl,ml,qs),(0,Z.Z)(nl,yl,$s),nl),Xl=(rl={},(0,Z.Z)(rl,sl,Us),(0,Z.Z)(rl,ll,Ws.every(3)),(0,Z.Z)(rl,cl,Ws),(0,Z.Z)(rl,fl,Ps),(0,Z.Z)(rl,hl,ks),(0,Z.Z)(rl,dl,ks),(0,Z.Z)(rl,pl,ks),(0,Z.Z)(rl,gl,Gs),(0,Z.Z)(rl,vl,Ys),(0,Z.Z)(rl,ml,qs),(0,Z.Z)(rl,yl,$s),rl);function Yl(t){return Gl[t]}function ql(t){return Xl[t]}function $l(t,e,n){return t?t.offset(e,n):void 0}function Jl(t,e,n){return $l(Yl(t),e,n)}function Kl(t,e,n){return $l(ql(t),e,n)}function Ql(t,e,n,r){return t?t.range(e,n,r):void 0}function tc(t,e,n,r){return Ql(Yl(t),e,n,r)}function ec(t,e,n,r){return Ql(ql(t),e,n,r)}var nc=1e3,rc=6e4,ic=36e5,ac=864e5,oc=2592e6,uc=31536e6,sc=[sl,cl,hl,gl,vl,ml,yl],lc=sc.slice(0,-1),cc=lc.slice(0,-1),fc=cc.slice(0,-1),hc=fc.slice(0,-1),dc=[sl,cl],pc=[sl],gc=[[lc,1,nc],[lc,5,5e3],[lc,15,15e3],[lc,30,3e4],[cc,1,rc],[cc,5,3e5],[cc,15,9e5],[cc,30,18e5],[fc,1,ic],[fc,3,108e5],[fc,6,216e5],[fc,12,432e5],[hc,1,ac],[[sl,fl],1,6048e5],[dc,1,oc],[dc,3,7776e6],[pc,1,uc]];function vc(t){var e,n,r=t.extent,i=t.maxbins||40,a=Math.abs(wu(r))/i,o=ol((function(t){return t[2]})).right(gc,a);return o===gc.length?(e=pc,n=$u(r[0]/uc,r[1]/uc,i)):o?(e=(o=gc[a/gc[o-1][2]<gc[o][2]/a?o-1:o])[0],n=o[1]):(e=sc,n=Math.max($u(r[0],r[1],i),1)),{units:e,step:n}}function mc(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function yc(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function xc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function bc(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,s=t.shortMonths,l=Pc(i),c=jc(i),f=Pc(a),h=jc(a),d=Pc(o),p=jc(o),g=Pc(u),v=jc(u),m=Pc(s),y=jc(s),x={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:nf,e:nf,f:sf,g:xf,G:wf,H:rf,I:af,j:of,L:uf,m:lf,M:cf,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Wf,s:Vf,S:ff,u:hf,U:df,V:gf,w:vf,W:mf,x:null,X:null,y:yf,Y:bf,Z:Sf,"%":Hf},b={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:kf,e:kf,f:Af,g:Zf,G:zf,H:Cf,I:Ef,j:Mf,L:Of,m:_f,M:Df,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Wf,s:Vf,S:Tf,u:Ff,U:If,V:jf,w:Bf,W:Lf,x:null,X:null,y:Rf,Y:Nf,Z:Uf,"%":Hf},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return C(t,e,n,r)},d:Gc,e:Gc,f:Kc,g:Uc,G:zc,H:Yc,I:Yc,j:Xc,L:Jc,m:Vc,M:qc,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Wc,Q:tf,s:ef,S:$c,u:Lc,U:Rc,V:Zc,w:Bc,W:Nc,x:function(t,e,r){return C(t,n,e,r)},X:function(t,e,n){return C(t,r,e,n)},y:Uc,Y:zc,Z:Hc,"%":Qc};function S(t,e){return function(n){var r,i,a,o=[],u=-1,s=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===t.charCodeAt(u)&&(o.push(t.slice(s,u)),null!=(i=Ac[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(t.slice(s,u)),o.join("")}}function k(t,e){return function(n){var r,i,a=xc(1900,void 0,1);if(C(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=yc(xc(a.y,0,1))).getUTCDay(),r=i>4||0===i?js.ceil(r):js(r),r=ks.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=mc(xc(a.y,0,1))).getDay(),r=i>4||0===i?Os.ceil(r):Os(r),r=Ss.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?yc(xc(a.y,0,1)).getUTCDay():mc(xc(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,yc(a)):mc(a)}}function C(t,e,n,r){for(var i,a,o=0,u=e.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=w[i in Ac?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=S(n,x),x.X=S(r,x),x.c=S(e,x),b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),{format:function(t){var e=S(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=S(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}var wc,Sc,kc,Cc,Ec,Mc,Oc,Ac={"-":"",_:" ",0:"0"},_c=/^\s*\d+/,Dc=/^%/,Tc=/[\\^$*+?|[\]().{}]/g;function Fc(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ic(t){return t.replace(Tc,"\\$&")}function Pc(t){return new RegExp("^(?:"+t.map(Ic).join("|")+")","i")}function jc(t){return new Map(t.map((function(t,e){return[t.toLowerCase(),e]})))}function Bc(t,e,n){var r=_c.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Lc(t,e,n){var r=_c.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Rc(t,e,n){var r=_c.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Zc(t,e,n){var r=_c.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Nc(t,e,n){var r=_c.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function zc(t,e,n){var r=_c.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Uc(t,e,n){var r=_c.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Hc(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Wc(t,e,n){var r=_c.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Vc(t,e,n){var r=_c.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Gc(t,e,n){var r=_c.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Xc(t,e,n){var r=_c.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Yc(t,e,n){var r=_c.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function qc(t,e,n){var r=_c.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function $c(t,e,n){var r=_c.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Jc(t,e,n){var r=_c.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Kc(t,e,n){var r=_c.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Qc(t,e,n){var r=Dc.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function tf(t,e,n){var r=_c.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function ef(t,e,n){var r=_c.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function nf(t,e){return Fc(t.getDate(),e,2)}function rf(t,e){return Fc(t.getHours(),e,2)}function af(t,e){return Fc(t.getHours()%12||12,e,2)}function of(t,e){return Fc(1+Ss.count(zs(t),t),e,3)}function uf(t,e){return Fc(t.getMilliseconds(),e,3)}function sf(t,e){return uf(t,e)+"000"}function lf(t,e){return Fc(t.getMonth()+1,e,2)}function cf(t,e){return Fc(t.getMinutes(),e,2)}function ff(t,e){return Fc(t.getSeconds(),e,2)}function hf(t){var e=t.getDay();return 0===e?7:e}function df(t,e){return Fc(Ms.count(zs(t)-1,t),e,2)}function pf(t){var e=t.getDay();return e>=4||0===e?Ds(t):Ds.ceil(t)}function gf(t,e){return t=pf(t),Fc(Ds.count(zs(t),t)+(4===zs(t).getDay()),e,2)}function vf(t){return t.getDay()}function mf(t,e){return Fc(Os.count(zs(t)-1,t),e,2)}function yf(t,e){return Fc(t.getFullYear()%100,e,2)}function xf(t,e){return Fc((t=pf(t)).getFullYear()%100,e,2)}function bf(t,e){return Fc(t.getFullYear()%1e4,e,4)}function wf(t,e){var n=t.getDay();return Fc((t=n>=4||0===n?Ds(t):Ds.ceil(t)).getFullYear()%1e4,e,4)}function Sf(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Fc(e/60|0,"0",2)+Fc(e%60,"0",2)}function kf(t,e){return Fc(t.getUTCDate(),e,2)}function Cf(t,e){return Fc(t.getUTCHours(),e,2)}function Ef(t,e){return Fc(t.getUTCHours()%12||12,e,2)}function Mf(t,e){return Fc(1+ks.count(Us(t),t),e,3)}function Of(t,e){return Fc(t.getUTCMilliseconds(),e,3)}function Af(t,e){return Of(t,e)+"000"}function _f(t,e){return Fc(t.getUTCMonth()+1,e,2)}function Df(t,e){return Fc(t.getUTCMinutes(),e,2)}function Tf(t,e){return Fc(t.getUTCSeconds(),e,2)}function Ff(t){var e=t.getUTCDay();return 0===e?7:e}function If(t,e){return Fc(Ps.count(Us(t)-1,t),e,2)}function Pf(t){var e=t.getUTCDay();return e>=4||0===e?Rs(t):Rs.ceil(t)}function jf(t,e){return t=Pf(t),Fc(Rs.count(Us(t),t)+(4===Us(t).getUTCDay()),e,2)}function Bf(t){return t.getUTCDay()}function Lf(t,e){return Fc(js.count(Us(t)-1,t),e,2)}function Rf(t,e){return Fc(t.getUTCFullYear()%100,e,2)}function Zf(t,e){return Fc((t=Pf(t)).getUTCFullYear()%100,e,2)}function Nf(t,e){return Fc(t.getUTCFullYear()%1e4,e,4)}function zf(t,e){var n=t.getUTCDay();return Fc((t=n>=4||0===n?Rs(t):Rs.ceil(t)).getUTCFullYear()%1e4,e,4)}function Uf(){return"+0000"}function Hf(){return"%"}function Wf(t){return+t}function Vf(t){return Math.floor(+t/1e3)}function Gf(t){var e={};return function(n){return e[n]||(e[n]=t(n))}}function Xf(t){var e=Gf(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat:function(t){var n=Qu(t||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return function(t,e){return function(n){var r=t(n),i=r.indexOf(e);if(i<0)return r;for(var a=function(t,e){var n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if((n=t.charCodeAt(r))>=48&&n<=57)return r+1}(r,i),o=a<r.length?r.slice(a):"";--a>i;)if("0"!==r[a]){++a;break}return r.slice(0,a)+o}}(e(n),e(".1f")(1)[1])}return e(n)},formatSpan:function(t,r,i,a){a=Qu(null==a?",f":a);var o,u=$u(t,r,i),s=Math.max(Math.abs(t),Math.abs(r));if(null==a.precision)switch(a.type){case"s":return isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ns(e)/3)))-ns(Math.abs(t)))}(u,s))||(a.precision=o),n(a,s);case"":case"e":case"g":case"p":case"r":isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ns(e)-ns(t))+1}(u,s))||(a.precision=o-("e"===a.type));break;case"f":case"%":isNaN(o=function(t){return Math.max(0,-ns(Math.abs(t)))}(u))||(a.precision=o-2*("%"===a.type))}return e(a)}}}function Yf(){return Mc=Xf({format:us,formatPrefix:ss})}function qf(t){return Xf(fs(t))}function $f(t){return arguments.length?Mc=qf(t):Mc}function Jf(t,e,n){xo(n=n||{})||eo("Invalid time multi-format specifier: ".concat(n));var r=e(ml),i=e(vl),a=e(gl),o=e(hl),u=e(fl),s=e(cl),l=e(ll),c=e(sl),f=t(n[yl]||".%L"),h=t(n[ml]||":%S"),d=t(n[vl]||"%I:%M"),p=t(n[gl]||"%I %p"),g=t(n[hl]||n[dl]||"%a %d"),v=t(n[fl]||"%b %d"),m=t(n[cl]||"%B"),y=t(n[ll]||"%B"),x=t(n[sl]||"%Y");return function(t){return(r(t)<t?f:i(t)<t?h:a(t)<t?d:o(t)<t?p:s(t)<t?u(t)<t?g:v:c(t)<t?l(t)<t?m:y:x)(t)}}function Kf(t){var e=Gf(t.format),n=Gf(t.utcFormat);return{timeFormat:function(t){return pu(t)?e(t):Jf(e,Yl,t)},utcFormat:function(t){return pu(t)?n(t):Jf(n,ql,t)},timeParse:Gf(t.parse),utcParse:Gf(t.utcParse)}}function Qf(){return Oc=Kf({format:Sc,parse:kc,utcFormat:Cc,utcParse:Ec})}function th(t){return Kf(bc(t))}function eh(t){return arguments.length?Oc=th(t):Oc}!function(t){wc=bc(t),Sc=wc.format,kc=wc.parse,Cc=wc.utcFormat,Ec=wc.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Yf(),Qf();var nh=function(t,e){return Qo({},t,e)};function rh(t,e){var n=t?qf(t):$f(),r=e?th(e):eh();return nh(n,r)}function ih(t,e){var n=arguments.length;return n&&2!==n&&eo("defaultLocale expects either zero or two arguments."),n?nh($f(t),eh(e)):nh($f(),eh())}function ah(){return Yf(),Qf(),ih()}var oh=/^(data:|([A-Za-z]+:)?\/\/)/,uh=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,sh=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,lh="file://";function ch(t,e){return fh.apply(this,arguments)}function fh(){return(fh=(0,rt.Z)(G().mark((function t(e,n){var r,i;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(e,n);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function hh(t,e){return dh.apply(this,arguments)}function dh(){return dh=(0,rt.Z)(G().mark((function t(e,n){var r,i,a,o,u,s,l;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Qo({},this.options,n),r=this.fileAccess,i={href:null},s=uh.test(e.replace(sh,"")),null!=e&&"string"==typeof e&&s||eo("Sanitize failure, invalid URI: "+Su(e)),l=oh.test(e),(u=n.baseURL)&&!l&&(e.startsWith("/")||u.endsWith("/")||(e="/"+e),e=u+e),o=(a=e.startsWith(lh))||"file"===n.mode||"http"!==n.mode&&!l&&r,a?e=e.slice(lh.length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),o=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(i.crossOrigin=n.crossOrigin+""),t.abrupt("return",i);case 14:case"end":return t.stop()}}),t,this)}))),dh.apply(this,arguments)}function ph(t){return t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){t?r(t):n(e)}))}))}:gh}function gh(){return vh.apply(this,arguments)}function vh(){return(vh=(0,rt.Z)(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:eo("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mh(t){return t?function(){var e=(0,rt.Z)(G().mark((function e(n,r){var i,a,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qo({},this.options.http,r),a=r&&r.response,e.next=4,t(n,i);case 4:return o=e.sent,e.abrupt("return",o.ok?Vo(o[a])?o[a]():o.text():eo(o.status+""+o.statusText));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}():yh}function yh(){return xh.apply(this,arguments)}function xh(){return(xh=(0,rt.Z)(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:eo("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var bh=function(t){return!(Number.isNaN(+t)||t instanceof Date)},wh={boolean:ku,integer:Eo,number:Eo,date:Eu,string:Mu,unknown:ao},Sh=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return bh(t)&&Number.isInteger(+t)},bh,function(t){return!Number.isNaN(Date.parse(t))}],kh=["boolean","integer","number","date"];function Ch(t,e){return e.reduce((function(e,n){return e[n]=function(t,e){if(!t||!t.length)return"unknown";for(var n,r,i,a=t.length,o=Sh.length,u=Sh.map((function(t,e){return e+1})),s=0,l=0;s<a;++s)for(r=e?t[s][e]:t[s],n=0;n<o;++n)if(u[n]&&null!=(i=r)&&i==i&&!Sh[n](r)&&(u[n]=0,++l===Sh.length))return"string";return kh[u.reduce((function(t,e){return 0===t?e:t}),0)-1]}(t,n),e}),{})}function Eh(t){var e=function(e,n){var r={delimiter:t};return Mh(e,n?Qo(n,r):r)};return e.responseType="text",e}function Mh(t,e){return e.header&&(t=e.header.map(Su).join(e.delimiter)+"\n"+t),Bu(e.delimiter).parse(t+"")}function Oh(t,e){var n,r=e&&e.property?ro(e.property):ao;return!xo(t)||(n=t,"function"==typeof Buffer&&Vo(Buffer.isBuffer)&&Buffer.isBuffer(n))?r(JSON.parse(t)):function(t,e){!yo(t)&&fu(t)&&(t=(0,X.Z)(t));return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(r(t),e)}Mh.responseType="text",Oh.responseType="json";var Ah={interior:function(t,e){return t!==e},exterior:function(t,e){return t===e}};function _h(t,e){var n,r,i,a;return t=Oh(t,e),e&&e.feature?(n=Ru,i=e.feature):e&&e.mesh?(n=Uu,i=e.mesh,a=Ah[e.filter]):eo("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r,a):eo("Invalid TopoJSON object: "+i))&&r.features||[r]}_h.responseType="json";var Dh={dsv:Mh,csv:Eh(","),tsv:Eh("\t"),json:Oh,topojson:_h};function Th(t,e){return arguments.length>1?(Dh[t]=e,this):ru(Dh,t)?Dh[t]:null}function Fh(t){var e=Th(t);return e&&e.responseType||"text"}function Ih(t,e,n,r){var i=Th((e=e||{}).type||"json");return i||eo("Unknown data format type: "+e.type),t=i(t,e),e.parse&&function(t,e,n,r){if(!t.length)return;var i=eh();n=n||i.timeParse,r=r||i.utcParse;var a,o,u,s,l,c,f=t.columns||Object.keys(t[0]);"auto"===e&&(e=Ch(t,f));f=Object.keys(e);var h=f.map((function(t){var i,a,o=e[t];if(o&&(o.startsWith("date:")||o.startsWith("utc:")))return("'"===(a=(i=o.split(/:(.+)?/,2))[1])[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1)),("utc"===i[0]?r:n)(a);if(!wh[o])throw Error("Illegal format pattern: "+t+":"+o);return wh[o]}));for(u=0,l=t.length,c=f.length;u<l;++u)for(a=t[u],s=0;s<c;++s)a[o=f[s]]=h[s](a[o])}(t,e.parse,n,r),ru(t,"columns")&&delete t.columns,t}var Ph=function(t,e){return function(n){return{options:n||{},sanitize:hh,load:ch,fileAccess:!!e,file:ph(e),http:mh(t)}}}("undefined"!=typeof fetch&&fetch,null);function jh(t){var e=t||ao,n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i=e(t);if(r[i]){r[i]=0;var a=n.indexOf(t);a>=0&&n.splice(a,1)}return n},n}function Bh(t,e){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,rt.Z)(G().mark((function t(e,n){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),Lh.apply(this,arguments)}var Rh=Symbol("vega_id"),Zh=1;function Nh(t){return!(!t||!zh(t))}function zh(t){return t[Rh]}function Uh(t,e){return t[Rh]=e,t}function Hh(t){var e=t===Object(t)?t:{data:t};return zh(e)?e:Uh(e,Zh++)}function Wh(t){return Vh(t,Hh({}))}function Vh(t,e){for(var n in t)e[n]=t[n];return e}function Gh(t,e){return Uh(e,zh(t))}function Xh(t,e){return t?e?function(n,r){return t(n,r)||zh(e(n))-zh(e(r))}:function(e,n){return t(e,n)||zh(e)-zh(n)}:null}function Yh(t){return t&&t.constructor===qh}function qh(){var t=[],e=[],n=[],r=[],i=[],a=null,o=!1;return{constructor:qh,insert:function(e){for(var n=Ho(e),r=n.length,i=0;i<r;++i)t.push(n[i]);return this},remove:function(t){for(var n=Vo(t)?r:e,i=Ho(t),a=i.length,o=0;o<a;++o)n.push(i[o]);return this},modify:function(t,e,r){var a={field:e,value:Jo(r)};return Vo(t)?(a.filter=t,i.push(a)):(a.tuple=t,n.push(a)),this},encode:function(t,e){return Vo(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},clean:function(t){return a=t,this},reflow:function(){return o=!0,this},pulse:function(u,s){var l,c,f,h,d,p,g={},v={};for(l=0,c=s.length;l<c;++l)g[zh(s[l])]=1;for(l=0,c=e.length;l<c;++l)g[zh(d=e[l])]=-1;for(l=0,c=r.length;l<c;++l)h=r[l],s.forEach((function(t){h(t)&&(g[zh(t)]=-1)}));for(l=0,c=t.length;l<c;++l)p=zh(d=t[l]),g[p]?g[p]=1:u.add.push(Hh(t[l]));for(l=0,c=s.length;l<c;++l)d=s[l],g[zh(d)]<0&&u.rem.push(d);function m(t,e,n){n?t[e]=n(t):u.encode=e,o||(v[zh(t)]=t)}for(l=0,c=n.length;l<c;++l)d=(f=n[l]).tuple,h=f.field,(p=g[zh(d)])>0&&(m(d,h,f.value),u.modifies(h));for(l=0,c=i.length;l<c;++l)f=i[l],h=f.filter,s.forEach((function(t){h(t)&&g[zh(t)]>0&&m(t,f.field,f.value)})),u.modifies(f.field);if(o)u.mod=e.length||r.length?s.filter((function(t){return g[zh(t)]>0})):s.slice();else for(p in v)u.mod.push(v[p]);return(a||null==a&&(e.length||r.length))&&u.clean(!0),u}}}var $h="_:mod:_";function Jh(){Object.defineProperty(this,$h,{writable:!0,value:{}})}Jh.prototype={set:function(t,e,n,r){var i=this,a=i[t],o=i[$h];return null!=e&&e>=0?(a[e]!==n||r)&&(a[e]=n,o[e+":"+t]=-1,o[t]=-1):(a!==n||r)&&(i[t]=n,o[t]=yo(n)?1+n.length:-1),i},modified:function(t,e){var n=this[$h];if(!arguments.length){for(var r in n)if(n[r])return!0;return!1}if(yo(t)){for(var i=0;i<t.length;++i)if(n[t[i]])return!0;return!1}return null!=e&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear:function(){return this[$h]={},this}};var Kh=0,Qh=new Jh;function td(t,e,n,r){this.id=++Kh,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}function ed(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}td.prototype={targets:function(){return this._targets||(this._targets=jh(io))},set:function(t){return this.value!==t?(this.value=t,1):0},skip:ed(1),modified:ed(2),parameters:function(t,e,n){var r=this;e=!1!==e;var i,a,o,u,s=this._argval=this._argval||new Jh,l=this._argops=this._argops||[],c=[],f=function(t,n,i){i instanceof td?(i!==r&&(e&&i.targets().add(r),c.push(i)),l.push({op:i,name:t,index:n})):s.set(t,n,i)};for(i in t)if(a=t[i],"pulse"===i)Ho(a).forEach((function(t){t instanceof td?t!==r&&(t.targets().add(r),c.push(t)):eo("Pulse parameters must be operator instances.")})),this.source=a;else if(yo(a))for(s.set(i,-1,Array(o=a.length)),u=0;u<o;++u)f(i,u,a[u]);else f(i,-1,a);return this.marshall().clear(),n&&(l.initonly=!0),c},marshall:function(t){var e,n,r,i,a=this._argval||Qh,o=this._argops;if(o){var u=o.length;for(n=0;n<u;++n)i=(r=(e=o[n]).op).modified()&&r.stamp===t,a.set(e.name,e.index,r.value,i);if(o.initonly){for(n=0;n<u;++n)(e=o[n]).op.targets().remove(this);this._argops=null,this._update=null}}return a},detach:function(){var t,e,n,r=this._argops;if(r)for(t=0,e=r.length;t<e;++t)(n=r[t].op)._targets&&n._targets.remove(this);this.pulse=null,this.source=null},evaluate:function(t){var e=this._update;if(e){var n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},run:function(t){return t.stamp<this.stamp?t.StopPropagation:(this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t);var e}};var nd=0;function rd(t,e,n){this.id=++nd,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function id(t,e,n){return new rd(t,e,n)}function ad(){return ad=(0,rt.Z)(G().mark((function t(e,n){var r,i,a;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,i=0,t.prev=2,t.next=5,r.loader().load(e,{context:"dataflow",response:Fh(n&&n.type)});case 5:a=t.sent;try{a=r.parse(a,n)}catch(o){i=-2,r.warn("Data ingestion failed",e,o)}t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),i=-1,r.warn("Loading failed",e,t.t0);case 13:return t.abrupt("return",{data:a,status:i});case 14:case"end":return t.stop()}}),t,this,[[2,9]])}))),ad.apply(this,arguments)}function od(){return od=(0,rt.Z)(G().mark((function t(e,n,r){var i,a,o;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=(i=this)._pending||ud(i)).requests+=1,t.next=4,i.request(n,r);case 4:return o=t.sent,i.pulse(e,i.changeset().remove(so).insert(o.data||[])),a.done(),t.abrupt("return",o);case 8:case"end":return t.stop()}}),t,this)}))),od.apply(this,arguments)}function ud(t){var e,n=new Promise((function(t){return e=t}));return n.requests=0,n.done=function(){0==--n.requests&&(t._pending=null,e(t))},t._pending=n}rd.prototype={_filter:so,_apply:ao,targets:function(){return this._targets||(this._targets=jh(io))},consume:function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive:function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter:function(t){var e=id(t);return this.targets().add(e),e},apply:function(t){var e=id(null,t);return this.targets().add(e),e},merge:function(){var t=id();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle:function(t){var e=-1;return this.filter((function(){var n=Date.now();return n-e>t?(e=n,1):0}))},debounce:function(t){var e=id();return this.targets().add(id(null,null,Ko(t,(function(t){var n=t.dataflow;e.receive(t),n&&n.run&&n.run()})))),e},between:function(t,e){var n=!1;return t.targets().add(id(null,null,(function(){return n=!0}))),e.targets().add(id(null,null,(function(){return n=!1}))),this.filter((function(){return n}))},detach:function(){this._filter=so,this._targets=null}};var sd={skip:!0};function ld(t,e,n,r,i,a){var o,u,s=Qo({},a,sd);Vo(n)||(n=Jo(n)),void 0===r?o=function(e){return t.touch(n(e))}:Vo(r)?(u=new td(null,r,i,!1),o=function(e){u.evaluate(e);var r=n(e),i=u.value;Yh(i)?t.pulse(r,i,a):t.update(r,i,s)}):o=function(e){return t.update(n(e),r,s)},e.apply(o)}function cd(t,e,n,r,i,a){if(void 0===r)e.targets().add(n);else{var o=a||{},u=new td(null,function(t,e){return e=Vo(e)?e:Jo(e),t?function(n,r){var i=e(n,r);return t.skip()||(t.skip(i!==this.value).value=i),i}:e}(n,r),i,!1);u.modified(o.force),u.rank=e.rank,e.targets().add(u),n&&(u.skip(!0),u.value=n.value,u.targets().add(n),t.connect(n,[u]))}}var fd={};function hd(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function dd(t,e){var n=[];return _u(t,e,(function(t){return n.push(t)})),n}function pd(t,e){var n={};return t.visit(e,(function(t){n[zh(t)]=1})),function(t){return n[zh(t)]?null:t}}function gd(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}function vd(t,e,n,r){var i=this,a=n.length,o=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n;for(var u=0;u<a;++u){var s=n[u];if(s.stamp===e){if(s.fields){var l=i.fields||(i.fields={});for(var c in s.fields)l[c]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}}this.changes=o}function md(){return md=(0,rt.Z)(G().mark((function t(e,n,r){var i,a,o,u,s,l,c,f,h;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],!(i=this)._pulse){t.next=3;break}return t.abrupt("return",xd(i));case 3:if(!i._pending){t.next=6;break}return t.next=6,i._pending;case 6:if(!n){t.next=9;break}return t.next=9,Bh(i,n);case 9:if(i._touched.length){t.next=12;break}return i.debug("Dataflow invoked, but nothing to do."),t.abrupt("return",i);case 12:o=++i._clock,i._pulse=new hd(i,o,e),i._touched.forEach((function(t){return i._enqueue(t,!0)})),i._touched=jh(io),u=0,t.prev=17;case 18:if(!(i._heap.size()>0)){t.next=35;break}if((s=i._heap.pop()).rank===s.qrank){t.next=23;break}return i._enqueue(s,!0),t.abrupt("continue",18);case 23:if(!(l=s.run(i._getPulse(s,e))).then){t.next=30;break}return t.next=27,l;case 27:l=t.sent,t.next=31;break;case 30:l.async&&(a.push(l.async),l=fd);case 31:l!==fd&&s._targets&&s._targets.forEach((function(t){return i._enqueue(t)})),++u,t.next=18;break;case 35:t.next=41;break;case 37:t.prev=37,t.t0=t.catch(17),i._heap.clear(),c=t.t0;case 41:if(i._input={},i._pulse=null,i.debug("Pulse ".concat(o,": ").concat(u," operators")),c&&(i._postrun=[],i.error(c)),!i._postrun.length){t.next=55;break}f=i._postrun.sort((function(t,e){return e.priority-t.priority})),i._postrun=[],h=0;case 49:if(!(h<f.length)){t.next=55;break}return t.next=52,Bh(i,f[h].callback);case 52:++h,t.next=49;break;case 55:if(!r){t.next=58;break}return t.next=58,Bh(i,r);case 58:return a.length&&Promise.all(a).then((function(t){return i.runAsync(null,(function(){t.forEach((function(t){try{t(i)}catch(e){i.error(e)}}))}))})),t.abrupt("return",i);case 60:case"end":return t.stop()}}),t,this,[[17,37]])}))),md.apply(this,arguments)}function yd(){return yd=(0,rt.Z)(G().mark((function t(e,n,r){var i,a=this;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._running){t.next=5;break}return t.next=3,this._running;case 3:t.next=0;break;case 5:return i=function(){return a._running=null},(this._running=this.evaluate(e,n,r)).then(i,i),t.abrupt("return",this._running);case 8:case"end":return t.stop()}}),t,this)}))),yd.apply(this,arguments)}function xd(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}hd.prototype={StopPropagation:fd,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function(t){return new hd(this.dataflow).init(this,t)},clone:function(){var t=this.fork(7);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(23)},addAll:function(){var t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||((t=new hd(this.dataflow).init(this)).add=t.source,t.rem=[]),t},init:function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter:function(t){this.dataflow.runAfter(t)},changed:function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},reflow:function(t){if(t)return this.fork(7).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,pd(this,1))),this},clean:function(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies:function(t){var e=this.fields||(this.fields={});return yo(t)?t.forEach((function(t){return e[t]=!0})):e[t]=!0,this},modified:function(t,e){var n=this.fields;return!(!e&&!this.mod.length||!n)&&(arguments.length?yo(t)?t.some((function(t){return n[t]})):n[t]:!!n)},filter:function(t,e){var n=this;return 1&t&&(n.addF=gd(n.addF,e)),2&t&&(n.remF=gd(n.remF,e)),4&t&&(n.modF=gd(n.modF,e)),16&t&&(n.srcF=gd(n.srcF,e)),n},materialize:function(t){var e=this;return 1&(t=t||7)&&e.addF&&(e.add=dd(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=dd(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=dd(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit:function(t,e){var n=this,r=e;if(16&t)return _u(n.source,n.srcF,r),n;1&t&&_u(n.add,n.addF,r),2&t&&_u(n.rem,n.remF,r),4&t&&_u(n.mod,n.modF,r);var i=n.source;if(8&t&&i){var a=n.add.length+n.mod.length;a===i.length||_u(i,a?pd(n,5):n.srcF,r)}return n}},uu(vd,hd,{fork:function(t){var e=new hd(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,(function(t){return e.add.push(t)})),t&e.REM&&this.visit(e.REM,(function(t){return e.rem.push(t)})),t&e.MOD&&this.visit(e.MOD,(function(t){return e.mod.push(t)}))),e},changed:function(t){return this.changes&t},modified:function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?yo(t)?t.some((function(t){return n[t]})):n[t]:0},filter:function(){eo("MultiPulse does not support filtering.")},materialize:function(){eo("MultiPulse does not support materialization.")},visit:function(t,e){var n=this,r=n.pulses,i=r.length,a=0;if(t&n.SOURCE)for(;a<i;++a)r[a].visit(t,e);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(t,e);return n}});var bd={skip:!1,force:!1};function wd(t){var e=[];return{clear:function(){return e=[]},size:function(){return e.length},peek:function(){return e[0]},push:function(n){return e.push(n),Sd(e,0,e.length-1,t)},pop:function(){var n,r=e.pop();return e.length?(n=e[0],e[0]=r,function(t,e,n){var r,i=e,a=t.length,o=t[e],u=1+(e<<1);for(;u<a;)(r=u+1)<a&&n(t[u],t[r])>=0&&(u=r),t[e]=t[u],u=1+((e=u)<<1);t[e]=o,Sd(t,i,e,n)}(e,0,t)):n=r,n}}}function Sd(t,e,n,r){for(var i,a,o=t[n];n>e&&r(o,i=t[a=n-1>>1])<0;)t[n]=i,n=a;return t[n]=o}function kd(){this.logger(mo()),this.logLevel(ho),this._clock=0,this._rank=0,this._locale=ih();try{this._loader=Ph()}catch(t){}this._touched=jh(io),this._input={},this._pulse=null,this._heap=wd((function(t,e){return t.qrank-e.qrank})),this._postrun=[]}function Cd(t){return function(){return this._log[t].apply(this,arguments)}}function Ed(t,e){td.call(this,t,null,e)}kd.prototype={stamp:function(){return this._clock},loader:function(t){return arguments.length?(this._loader=t,this):this._loader},locale:function(t){return arguments.length?(this._locale=t,this):this._locale},logger:function(t){return arguments.length?(this._log=t,this):this._log},error:Cd("error"),warn:Cd("warn"),info:Cd("info"),debug:Cd("debug"),logLevel:Cd("level"),cleanThreshold:1e4,add:function(t,e,n,r){var i,a=1;return t instanceof td?i=t:t&&t.prototype instanceof td?i=new t:Vo(t)?i=new td(null,t):(a=0,i=new td(t,e)),this.rank(i),a&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},connect:function(t,e){for(var n=t.rank,r=e.length,i=0;i<r;++i)if(n<e[i].rank)return void this.rerank(t)},rank:function(t){t.rank=++this._rank},rerank:function(t){for(var e,n,r,i=[t];i.length;)if(this.rank(e=i.pop()),n=e._targets)for(r=n.length;--r>=0;)i.push(e=n[r]),e===t&&eo("Cycle detected in dataflow graph.")},pulse:function(t,e,n){this.touch(t,n||bd);var r=new hd(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._input[t.id]=e.pulse(r,i),this},touch:function(t,e){var n=e||bd;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this},update:function(t,e,n){var r=n||bd;return(t.set(e)||r.force)&&this.touch(t,r),this},changeset:qh,ingest:function(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))},parse:function(t,e){var n=this.locale();return Ih(t,e,n.timeParse,n.utcParse)},preload:function(t,e,n){return od.apply(this,arguments)},request:function(t,e){return ad.apply(this,arguments)},events:function(t,e,n,r){for(var i,a=this,o=id(n,r),u=function(t){t.dataflow=a;try{o.receive(t)}catch(e){a.error(e)}finally{a.run()}},s=(i="string"==typeof t&&"undefined"!=typeof document?document.querySelectorAll(t):Ho(t)).length,l=0;l<s;++l)i[l].addEventListener(e,u);return o},on:function(t,e,n,r,i){return(t instanceof td?cd:ld)(this,t,e,n,r,i),this},evaluate:function(t,e,n){return md.apply(this,arguments)},run:function(t,e,n){return this._pulse?xd(this):(this.evaluate(t,e,n),this)},runAsync:function(t,e,n){return yd.apply(this,arguments)},runAfter:function(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(r){this.error(r)}},_enqueue:function(t,e){var n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))},_getPulse:function(t,e){var n=t.source,r=this._clock;return n&&yo(n)?new vd(this,r,n.map((function(t){return t.pulse})),e):this._input[t.id]||function(t,e){if(e&&e.stamp===t.stamp)return e;t=t.fork(),e&&e!==fd&&(t.source=e.source);return t}(this._pulse,n&&n.pulse)}},uu(Ed,td,{run:function(t){var e,n=this;return t.stamp<this.stamp?t.StopPropagation:(this.skip()?this.skip(!1):e=this.evaluate(t),(e=e||t).then?e=e.then((function(t){return n.pulse=t})):e!==t.StopPropagation&&(this.pulse=e),e)},evaluate:function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform:function(){}});var Md={};function Od(t){var e=Ad(t);return e&&e.Definition||null}function Ad(t){return t=t&&t.toLowerCase(),ru(Md,t)?Md[t]:null}n(84944),n(33792);function _d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Dd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Dd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Td(t,e){var n;if(void 0===e){var r,i=_d(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n<a||void 0===n&&a>=a)&&(n=a)}}catch(c){i.e(c)}finally{i.f()}}else{var o,u=-1,s=_d(t);try{for(s.s();!(o=s.n()).done;){var l=o.value;null!=(l=e(l,++u,t))&&(n<l||void 0===n&&l>=l)&&(n=l)}}catch(c){s.e(c)}finally{s.f()}}return n}function Fd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Id(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Id(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Id(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pd(t,e){var n;if(void 0===e){var r,i=Fd(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n>a||void 0===n&&a>=a)&&(n=a)}}catch(c){i.e(c)}finally{i.f()}}else{var o,u=-1,s=Fd(t);try{for(s.s();!(o=s.n()).done;){var l=o.value;null!=(l=e(l,++u,t))&&(n>l||void 0===n&&l>=l)&&(n=l)}}catch(c){s.e(c)}finally{s.f()}}return n}function jd(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:il;if(t===il)return Bd;if("function"!=typeof t)throw new TypeError("compare is not a function");return function(e,n){var r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function Bd(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function Ld(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?Bd:jd(i);r>n;){if(r-n>600){var a=r-n+1,o=e-n+1,u=Math.log(a),s=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*s*(a-s)/a)*(o-a/2<0?-1:1),c=Math.max(n,Math.floor(e-o*s/a+l)),f=Math.min(r,Math.floor(e+(a-o)*s/a+l));Ld(t,e,c,f,i)}var h=t[e],d=n,p=r;for(Rd(t,n,e),i(t[r],h)>0&&Rd(t,n,r);d<p;){for(Rd(t,d,p),++d,--p;i(t[d],h)<0;)++d;for(;i(t[p],h)>0;)--p}0===i(t[n],h)?Rd(t,n,p):Rd(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}return t}function Rd(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}var Zd=G().mark(Hd);function Nd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return zd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function zd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ud(t){return null===t?NaN:+t}function Hd(t,e){var n,r,i,a,o,u,s;return G().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(void 0!==e){l.next=21;break}n=Nd(t),l.prev=2,n.s();case 4:if((r=n.n()).done){l.next=11;break}if(!(null!=(i=r.value)&&(i=+i)>=i)){l.next=9;break}return l.next=9,i;case 9:l.next=4;break;case 11:l.next=16;break;case 13:l.prev=13,l.t0=l.catch(2),n.e(l.t0);case 16:return l.prev=16,n.f(),l.finish(16);case 19:l.next=40;break;case 21:a=-1,o=Nd(t),l.prev=23,o.s();case 25:if((u=o.n()).done){l.next=32;break}if(s=u.value,!(null!=(s=e(s,++a,t))&&(s=+s)>=s)){l.next=30;break}return l.next=30,s;case 30:l.next=25;break;case 32:l.next=37;break;case 34:l.prev=34,l.t1=l.catch(23),o.e(l.t1);case 37:return l.prev=37,o.f(),l.finish(37);case 40:case"end":return l.stop()}}),Zd,null,[[2,13,16,19],[23,34,37,40]])}function Wd(t,e,n){if((r=(t=Float64Array.from(Hd(t,n))).length)&&!isNaN(e=+e)){if(e<=0||r<2)return Pd(t);if(e>=1)return Td(t);var r,i=(r-1)*e,a=Math.floor(i),o=Td(Ld(t,a).subarray(0,a+1));return o+(Pd(t.subarray(a+1))-o)*(i-a)}}function Vd(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ud;if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),u=+n(t[a+1],a+1,t);return o+(u-o)*(i-a)}}function Gd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Xd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Xd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yd(t,e){var n=function(t,e){var n,r=0,i=0,a=0;if(void 0===e){var o,u=Gd(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;null!=s&&(s=+s)>=s&&(a+=(n=s-i)*(s-(i+=n/++r)))}}catch(d){u.e(d)}finally{u.f()}}else{var l,c=-1,f=Gd(t);try{for(f.s();!(l=f.n()).done;){var h=l.value;null!=(h=e(h,++c,t))&&(h=+h)>=h&&(a+=(n=h-i)*(h-(i+=n/++r)))}}catch(d){f.e(d)}finally{f.f()}}if(r>1)return a/(r-1)}(t,e);return n?Math.sqrt(n):n}function qd(t,e){return Wd(t,.5,e)}var $d=G().mark(Qd);function Jd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Kd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Kd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qd(t,e){var n,r,i,a,o,u,s;return G().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(null!=e){l.next=21;break}n=Jd(t),l.prev=2,n.s();case 4:if((r=n.n()).done){l.next=11;break}if(!(null!=(i=r.value)&&""!==i&&(i=+i)>=i)){l.next=9;break}return l.next=9,i;case 9:l.next=4;break;case 11:l.next=16;break;case 13:l.prev=13,l.t0=l.catch(2),n.e(l.t0);case 16:return l.prev=16,n.f(),l.finish(16);case 19:l.next=41;break;case 21:a=-1,o=Jd(t),l.prev=23,o.s();case 25:if((u=o.n()).done){l.next=33;break}if(s=u.value,!(null!=(s=e(s,++a,t))&&""!==s&&(s=+s)>=s)){l.next=31;break}return l.next=31,s;case 31:l.next=25;break;case 33:l.next=38;break;case 35:l.prev=35,l.t1=l.catch(23),o.e(l.t1);case 38:return l.prev=38,o.f(),l.finish(38);case 41:case"end":return l.stop()}}),$d,null,[[2,13,16,19],[23,35,38,41]])}function tp(t,e,n){var r=Float64Array.from(Qd(t,n));return r.sort(il),e.map((function(t){return Vd(r,t)}))}function ep(t,e){return tp(t,[.25,.5,.75],e)}function np(t,e){var n=t.length,r=Yd(t,e),i=ep(t,e),a=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,a)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function rp(t){var e,n,r,i,a,o,u=t.maxbins||20,s=t.base||10,l=Math.log(s),c=t.divide||[5,2],f=t.extent[0],h=t.extent[1],d=t.span||h-f||Math.abs(f)||1;if(t.step)e=t.step;else if(t.steps){for(i=d/u,a=0,o=t.steps.length;a<o&&t.steps[a]<i;++a);e=t.steps[Math.max(0,a-1)]}else{for(n=Math.ceil(Math.log(u)/l),r=t.minstep||0,e=Math.max(r,Math.pow(s,Math.round(Math.log(d)/l)-n));Math.ceil(d/e)>u;)e*=s;for(a=0,o=c.length;a<o;++a)(i=e/c[a])>=r&&d/i<=u&&(e=i)}var p=(i=Math.log(e))>=0?0:1+~~(-i/l),g=Math.pow(s,-p-1);return(t.nice||void 0===t.nice)&&(f=f<(i=Math.floor(f/e+g)*e)?i-e:i,h=Math.ceil(h/e)*e),{start:f,stop:h===f?f+e:h,step:e}}var ip=Math.random;function ap(t){ip=t}function op(t,e,n,r){if(!t.length)return[void 0,void 0];var i,a,o,u,s=Float64Array.from(Qd(t,r)),l=s.length,c=e;for(o=0,u=Array(c);o<c;++o){for(i=0,a=0;a<l;++a)i+=s[~~(ip()*l)];u[o]=i/l}return u.sort(il),[Wd(u,n/2),Wd(u,1-n/2)]}function up(t,e,n,r){r=r||function(t){return t};for(var i,a=t.length,o=new Float64Array(a),u=0,s=1,l=r(t[0]),c=l,f=l+e;s<a;++s){if((i=r(t[s]))>=f){for(c=(l+c)/2;u<s;++u)o[u]=c;f=i+e,l=i}c=i}for(c=(l+c)/2;u<s;++u)o[u]=c;return n?function(t,e){var n,r,i=t.length,a=0,o=1;for(;t[a]===t[o];)++o;for(;o<i;){for(n=o+1;t[o]===t[n];)++n;if(t[o]-t[o-1]<e){for(r=o+(a+n-o-o>>1);r<o;)t[r++]=t[o];for(;r>o;)t[r--]=t[a]}a=o,o=n}return t}(o,e+e/4):o}function sp(t){return function(){return(t=(1103515245*t+12345)%2147483647)/2147483647}}function lp(t,e){var n,r,i;null==e&&(e=t,t=0);var a={min:function(t){return arguments.length?(i=r-(n=t||0),a):n},max:function(t){return arguments.length?(i=(r=t||0)-n,a):r},sample:function(){return n+Math.floor(i*ip())},pdf:function(t){return t===Math.floor(t)&&t>=n&&t<r?1/i:0},cdf:function(t){var e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},icdf:function(t){return t>=0&&t<=1?n-1+Math.floor(t*i):NaN}};return a.min(t).max(e)}var cp=Math.sqrt(2*Math.PI),fp=Math.SQRT2,hp=NaN;function dp(t,e){t=t||0,e=null==e?1:e;var n,r,i=0,a=0;if(hp==hp)i=hp,hp=NaN;else{do{n=(i=2*ip()-1)*i+(a=2*ip()-1)*a}while(0===n||n>1);i*=r=Math.sqrt(-2*Math.log(n)/n),hp=a*r}return t+i*e}function pp(t,e,n){var r=(t-(e||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*cp)}function gp(t,e,n){var r,i=(t-(e=e||0))/(n=null==n?1:n),a=Math.abs(i);if(a>37)r=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(r=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),r/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):r=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-r:r}function vp(t,e,n){return t<0||t>1?NaN:(e||0)+(null==n?1:n)*fp*function(t){var e,n=-Math.log((1-t)*(1+t));e=n<6.25?1.6536545626831027+(e=.24015818242558962+(e=(e=(e=.00018673420803405714+(e=(e=(e=4.2347877827932404e-7+(e=(e=(e=1.0512122733215323e-9+(e=(e=(e=26335093153082323e-28+(e=(e=(e=6637638134358324e-30+(e=20972767875968562e-33+(e=(e=11157877678025181e-33+(e=128584807152564e-32+(e=(e=-364441206401782e-35)*(n-=3.125)-16850591381820166e-35)*n)*n)*n-1333171662854621e-31)*n)*n)*n-4054566272975207e-29)*n-8151934197605472e-29)*n)*n-12975133253453532e-27)*n-5415412054294628e-26)*n)*n-4.112633980346984e-9)*n-2.9070369957882005e-8)*n)*n-13654692000834679e-22)*n-13882523362786469e-21)*n)*n-.000740702534166267)*n-.006033670871430149)*n)*n:n<16?3.0838856104922208+(e=1.0052589676941592+(e=.005370914553590064+(e=(e=.002491442096107851+(e=(e=.0009532893797373805+(e=(e=24031110387097894e-21+(e=6828485145957318e-20+(e=(e=12475304481671779e-21+(e=29234449089955446e-22+(e=(e=15027403968909828e-22+(e=1.8239629214389228e-8+(e=(e=9.075656193888539e-8+(e=2.2137376921775787e-9)*(n=Math.sqrt(n)-3.25))*n-2.7517406297064545e-7)*n)*n)*n-4013867526981546e-21)*n)*n)*n-47318229009055734e-21)*n)*n)*n-.0003550375203628475)*n)*n-.0016882755560235047)*n)*n-.003751208507569241)*n)*n)*n:Number.isFinite(n)?4.849906401408584+(e=1.0103004648645344+(e=(e=(e=7599527703001776e-20+(e=(e=4526062597223154e-21+(e=(e=2.2900482228026655e-7+(e=(e=2.914795345090108e-8+(e=(e=7.61570120807834e-9+(e=(e=1.5076572693500548e-9+(e=(e=-27109920616438573e-27)*(n=Math.sqrt(n)-5)-2.555641816996525e-10)*n)*n-3.789465440126737e-9)*n)*n-1.496002662714924e-8)*n)*n-6.771199775845234e-8)*n)*n-9.9298272942317e-7)*n)*n-1968177810553167e-20)*n)*n-.00021503011930044477)*n-.00013871931833623122)*n)*n:1/0;return e*t}(2*t-1)}function mp(t,e){var n,r,i={mean:function(t){return arguments.length?(n=t||0,i):n},stdev:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return dp(n,r)},pdf:function(t){return pp(t,n,r)},cdf:function(t){return gp(t,n,r)},icdf:function(t){return vp(t,n,r)}};return i.mean(t).stdev(e)}function yp(t,e){var n=mp(),r=0,i={data:function(n){return arguments.length?(t=n,r=n?n.length:0,i.bandwidth(e)):t},bandwidth:function(n){return arguments.length?(!(e=n)&&t&&(e=np(t)),i):e},sample:function(){return t[~~(ip()*r)]+e*n.sample()},pdf:function(i){for(var a=0,o=0;o<r;++o)a+=n.pdf((i-t[o])/e);return a/e/r},cdf:function(i){for(var a=0,o=0;o<r;++o)a+=n.cdf((i-t[o])/e);return a/r},icdf:function(){throw Error("KDE icdf not supported.")}};return i.data(t)}function xp(t,e){return t=t||0,e=null==e?1:e,Math.exp(t+dp()*e)}function bp(t,e,n){if(t<=0)return 0;e=e||0,n=null==n?1:n;var r=(Math.log(t)-e)/n;return Math.exp(-.5*r*r)/(n*cp*t)}function wp(t,e,n){return gp(Math.log(t),e,n)}function Sp(t,e,n){return Math.exp(vp(t,e,n))}function kp(t,e){var n,r,i={mean:function(t){return arguments.length?(n=t||0,i):n},stdev:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return xp(n,r)},pdf:function(t){return bp(t,n,r)},cdf:function(t){return wp(t,n,r)},icdf:function(t){return Sp(t,n,r)}};return i.mean(t).stdev(e)}function Cp(t,e){var n,r=0;function i(t){var e,n=[],i=0;for(e=0;e<r;++e)i+=n[e]=null==t[e]?1:+t[e];for(e=0;e<r;++e)n[e]/=i;return n}var a={weights:function(t){return arguments.length?(n=i(e=t||[]),a):e},distributions:function(n){return arguments.length?(n?(r=n.length,t=n):(r=0,t=[]),a.weights(e)):t},sample:function(){for(var e=ip(),i=t[r-1],a=n[0],o=0;o<r-1;a+=n[++o])if(e<a){i=t[o];break}return i.sample()},pdf:function(e){for(var i=0,a=0;a<r;++a)i+=n[a]*t[a].pdf(e);return i},cdf:function(e){for(var i=0,a=0;a<r;++a)i+=n[a]*t[a].cdf(e);return i},icdf:function(){throw Error("Mixture icdf not supported.")}};return a.distributions(t).weights(e)}function Ep(t,e){return null==e&&(e=null==t?1:t,t=0),t+(e-t)*ip()}function Mp(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function Op(t,e,n){return null==n&&(n=null==e?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function Ap(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function _p(t,e){var n,r,i={min:function(t){return arguments.length?(n=t||0,i):n},max:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return Ep(n,r)},pdf:function(t){return Mp(t,n,r)},cdf:function(t){return Op(t,n,r)},icdf:function(t){return Ap(t,n,r)}};return null==e&&(e=null==t?1:t,t=0),i.min(t).max(e)}function Dp(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-a*t,a]}function Tp(t,e,n,r){t=t.filter((function(t){var r=e(t),i=n(t);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&t.sort((function(t,n){return e(t)-e(n)}));var i,a,o,u,s=t.length,l=new Float64Array(s),c=new Float64Array(s),f=0,h=0,d=0,p=Jd(t);try{for(p.s();!(u=p.n()).done;)o=u.value,l[f]=i=+e(o),c[f]=a=+n(o),h+=(i-h)/++f,d+=(a-d)/f}catch(g){p.e(g)}finally{p.f()}for(f=0;f<s;++f)l[f]-=h,c[f]-=d;return[l,c,h,d]}function Fp(t,e,n,r){var i,a,o,u=-1,s=Jd(t);try{for(s.s();!(o=s.n()).done;){var l=o.value;i=e(l),a=n(l),null!=i&&(i=+i)>=i&&null!=a&&(a=+a)>=a&&r(i,a,++u)}}catch(c){s.e(c)}finally{s.f()}}function Ip(t,e,n,r,i){var a=0,o=0;return Fp(t,e,n,(function(t,e){var n=e-i(t),u=e-r;a+=n*n,o+=u*u})),1-a/o}function Pp(t,e,n){var r=0,i=0,a=0,o=0,u=0;Fp(t,e,n,(function(t,e){++u,r+=(t-r)/u,i+=(e-i)/u,a+=(t*e-a)/u,o+=(t*t-o)/u}));var s=Dp(r,i,a,o),l=function(t){return s[0]+s[1]*t};return{coef:s,predict:l,rSquared:Ip(t,e,n,i,l)}}function jp(t,e,n){var r=0,i=0,a=0,o=0,u=0;Fp(t,e,n,(function(t,e){++u,t=Math.log(t),r+=(t-r)/u,i+=(e-i)/u,a+=(t*e-a)/u,o+=(t*t-o)/u}));var s=Dp(r,i,a,o),l=function(t){return s[0]+s[1]*Math.log(t)};return{coef:s,predict:l,rSquared:Ip(t,e,n,i,l)}}function Bp(t,e,n){var r,i,a,o=Tp(t,e,n),u=(0,W.Z)(o,4),s=u[0],l=(u[1],u[2]),c=u[3],f=0,h=0,d=0,p=0,g=0;Fp(t,e,n,(function(t,e){r=s[g++],i=Math.log(e),f+=(e*i-f)/g,h+=((a=r*e)-h)/g,d+=(a*i-d)/g,p+=(r*a-p)/g}));var v=Dp(h/c,f/c,d/c,p/c),m=(0,W.Z)(v,2),y=m[0],x=m[1],b=function(t){return Math.exp(y+x*(t-l))};return{coef:[Math.exp(y-x*l),x],predict:b,rSquared:Ip(t,e,n,c,b)}}function Lp(t,e,n){var r=0,i=0,a=0,o=0,u=0,s=0;Fp(t,e,n,(function(t,e){var n=Math.log(t),l=Math.log(e);++s,r+=(n-r)/s,i+=(l-i)/s,a+=(n*l-a)/s,o+=(n*n-o)/s,u+=(e-u)/s}));var l=Dp(r,i,a,o),c=function(t){return l[0]*Math.pow(t,l[1])};return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:Ip(t,e,n,u,c)}}function Rp(t,e,n){var r,i,a,o,u=Tp(t,e,n),s=(0,W.Z)(u,4),l=s[0],c=s[1],f=s[2],h=s[3],d=l.length,p=0,g=0,v=0,m=0,y=0;for(r=0;r<d;)i=l[r],a=c[r++],p+=((o=i*i)-p)/r,g+=(o*i-g)/r,v+=(o*o-v)/r,m+=(i*a-m)/r,y+=(o*a-y)/r;var x=v-p*p,b=p*x-g*g,w=(y*p-m*g)/b,S=(m*x-y*g)/b,k=-w*p,C=function(t){return w*(t-=f)*t+S*t+k+h};return{coef:[k-S*f+w*f*f+h,S-2*w*f,w],predict:C,rSquared:Ip(t,e,n,h,C)}}function Zp(t,e,n,r){if(1===r)return Pp(t,e,n);if(2===r)return Rp(t,e,n);var i,a,o,u,s,l=Tp(t,e,n),c=(0,W.Z)(l,4),f=c[0],h=c[1],d=c[2],p=c[3],g=f.length,v=[],m=[],y=r+1;for(i=0;i<y;++i){for(o=0,u=0;o<g;++o)u+=Math.pow(f[o],i)*h[o];for(v.push(u),s=new Float64Array(y),a=0;a<y;++a){for(o=0,u=0;o<g;++o)u+=Math.pow(f[o],i+a);s[a]=u}m.push(s)}m.push(v);var x=function(t){var e,n,r,i,a,o=t.length-1,u=[];for(e=0;e<o;++e){for(i=e,n=e+1;n<o;++n)Math.abs(t[e][n])>Math.abs(t[e][i])&&(i=n);for(r=e;r<o+1;++r)a=t[r][e],t[r][e]=t[r][i],t[r][i]=a;for(n=e+1;n<o;++n)for(r=o;r>=e;r--)t[r][n]-=t[r][e]*t[e][n]/t[e][e]}for(n=o-1;n>=0;--n){for(a=0,r=n+1;r<o;++r)a+=t[r][n]*u[r];u[n]=(t[o][n]-a)/t[n][n]}return u}(m),b=function(t){t-=d;var e=p+x[0]+x[1]*t+x[2]*t*t;for(i=3;i<y;++i)e+=x[i]*Math.pow(t,i);return e};return{coef:Np(y,x,-d,p),predict:b,rSquared:Ip(t,e,n,p,b)}}function Np(t,e,n,r){var i,a,o,u,s=Array(t);for(i=0;i<t;++i)s[i]=0;for(i=t-1;i>=0;--i)for(o=e[i],u=1,s[i]+=o,a=1;a<=i;++a)u*=(i+1-a)/a,s[i-a]+=o*Math.pow(n,a)*u;return s[0]+=r,s}function zp(t,e,n,r){for(var i=Tp(t,e,n,!0),a=(0,W.Z)(i,4),o=a[0],u=a[1],s=a[2],l=a[3],c=o.length,f=Math.max(2,~~(r*c)),h=new Float64Array(c),d=new Float64Array(c),p=new Float64Array(c).fill(1),g=-1;++g<=2;){for(var v=[0,f-1],m=0;m<c;++m){for(var y=o[m],x=v[0],b=v[1],w=y-o[x]>o[b]-y?x:b,S=0,k=0,C=0,E=0,M=0,O=1/Math.abs(o[w]-y||1),A=x;A<=b;++A){var _=o[A],D=u[A],T=Up(Math.abs(y-_)*O)*p[A],F=_*T;S+=T,k+=F,C+=D*T,E+=D*F,M+=_*F}var I=Dp(k/S,C/S,E/S,M/S),P=(0,W.Z)(I,2),j=P[0],B=P[1];h[m]=j+B*y,d[m]=Math.abs(u[m]-h[m]),Hp(o,m+1,v)}if(2===g)break;var L=qd(d);if(Math.abs(L)<1e-12)break;for(var R,Z,N=0;N<c;++N)R=d[N]/(6*L),p[N]=R>=1?1e-12:(Z=1-R*R)*Z}return function(t,e,n,r){for(var i,a=t.length,o=[],u=0,s=0,l=[];u<a;++u)i=t[u]+n,l[0]===i?l[1]+=(e[u]-l[1])/++s:(s=0,l[1]+=r,l=[i,e[u]],o.push(l));return l[1]+=r,o}(o,h,s,l)}function Up(t){return(t=1-t*t*t)*t*t}function Hp(t,e,n){var r=t[e],i=n[0],a=n[1]+1;if(!(a>=t.length))for(;e>i&&t[a]-r<=r-t[i];)n[0]=++i,n[1]=a,++a}var Wp=.5*Math.PI/180;function Vp(t,e,n,r){n=n||25,r=Math.max(n,r||200);var i=function(e){return[e,t(e)]},a=e[0],o=e[1],u=o-a,s=u/r,l=[i(a)],c=[];if(n===r){for(var f=1;f<r;++f)l.push(i(a+f/n*u));return l.push(i(o)),l}c.push(i(o));for(var h=n;--h>0;)c.push(i(a+h/n*u));for(var d=l[0],p=c[c.length-1],g=1/u,v=function(t,e){for(var n=t,r=t,i=e.length,a=0;a<i;++a){var o=e[a][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}(d[1],c);p;){var m=i((d[0]+p[0])/2);m[0]-d[0]>=s&&Gp(d,m,p,g,v)>Wp?c.push(m):(d=p,l.push(p),c.pop()),p=c[c.length-1]}return l}function Gp(t,e,n,r,i){var a=Math.atan2(i*(n[1]-t[1]),r*(n[0]-t[0])),o=Math.atan2(i*(e[1]-t[1]),r*(e[0]-t[0]));return Math.abs(a-o)}function Xp(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Yp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Yp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qp(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}function $p(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Jp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Jp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kp(t){return t&&t.length?1===t.length?t[0]:(e=t,function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}):function(){return""};var e}function Qp(t,e,n){return n||t+(e?"_"+e:"")}var tg=function(){},eg={init:tg,add:tg,rem:tg,idx:0},ng={values:{init:function(t){return t.cell.store=!0},value:function(t){return t.cell.data.values()},idx:-1},count:{value:function(t){return t.cell.num}},__count__:{value:function(t){return t.missing+t.valid}},missing:{value:function(t){return t.missing}},valid:{value:function(t){return t.valid}},sum:{init:function(t){return t.sum=0},value:function(t){return t.sum},add:function(t,e){return t.sum+=+e},rem:function(t,e){return t.sum-=e}},product:{init:function(t){return t.product=1},value:function(t){return t.valid?t.product:void 0},add:function(t,e){return t.product*=e},rem:function(t,e){return t.product/=e}},mean:{init:function(t){return t.mean=0},value:function(t){return t.valid?t.mean:void 0},add:function(t,e){return t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:function(t,e){return t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}},average:{value:function(t){return t.valid?t.mean:void 0},req:["mean"],idx:1},variance:{init:function(t){return t.dev=0},value:function(t){return t.valid>1?t.dev/(t.valid-1):void 0},add:function(t,e){return t.dev+=t.mean_d*(e-t.mean)},rem:function(t,e){return t.dev-=t.mean_d*(e-t.mean)},req:["mean"],idx:1},variancep:{value:function(t){return t.valid>1?t.dev/t.valid:void 0},req:["variance"],idx:2},stdev:{value:function(t){return t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0},req:["variance"],idx:2},stdevp:{value:function(t){return t.valid>1?Math.sqrt(t.dev/t.valid):void 0},req:["variance"],idx:2},stderr:{value:function(t){return t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0},req:["variance"],idx:2},distinct:{value:function(t){return t.cell.data.distinct(t.get)},req:["values"],idx:3},ci0:{value:function(t){return t.cell.data.ci0(t.get)},req:["values"],idx:3},ci1:{value:function(t){return t.cell.data.ci1(t.get)},req:["values"],idx:3},median:{value:function(t){return t.cell.data.q2(t.get)},req:["values"],idx:3},q1:{value:function(t){return t.cell.data.q1(t.get)},req:["values"],idx:3},q3:{value:function(t){return t.cell.data.q3(t.get)},req:["values"],idx:3},min:{init:function(t){return t.min=void 0},value:function(t){return t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min},add:function(t,e){(e<t.min||void 0===t.min)&&(t.min=e)},rem:function(t,e){e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:function(t){return t.max=void 0},value:function(t){return t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max},add:function(t,e){(e>t.max||void 0===t.max)&&(t.max=e)},rem:function(t,e){e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:function(t){return t.argmin=void 0},value:function(t){return t.argmin||t.cell.data.argmin(t.get)},add:function(t,e,n){e<t.min&&(t.argmin=n)},rem:function(t,e){e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:function(t){return t.argmax=void 0},value:function(t){return t.argmax||t.cell.data.argmax(t.get)},add:function(t,e,n){e>t.max&&(t.argmax=n)},rem:function(t,e){e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},rg=Object.keys(ng);function ig(t,e){return ng[t](e)}function ag(t,e){return t.idx-e.idx}function og(){var t=this;this.valid=0,this.missing=0,this._ops.forEach((function(e){return e.init(t)}))}function ug(t,e){var n=this;null!=t&&""!==t?t==t&&(++this.valid,this._ops.forEach((function(r){return r.add(n,t,e)}))):++this.missing}function sg(t,e){var n=this;null!=t&&""!==t?t==t&&(--this.valid,this._ops.forEach((function(r){return r.rem(n,t,e)}))):--this.missing}function lg(t){var e=this;return this._out.forEach((function(n){return t[n.out]=n.value(e)})),t}function cg(t,e){var n=e||ao,r=function(t){var e={};return t.forEach((function(t){return e[t.name]=t})),t.forEach((function t(n){n.req&&n.req.forEach((function(n){e[n]||t(e[n]=ng[n]())}))})),Object.values(e).sort(ag)}(t),i=t.slice().sort(ag);function a(t){this._ops=r,this._out=i,this.cell=t,this.init()}return a.prototype.init=og,a.prototype.add=ug,a.prototype.rem=sg,a.prototype.set=lg,a.prototype.get=n,a.fields=t.map((function(t){return t.out})),a}function fg(t){this._key=t?ro(t):zh,this.reset()}rg.forEach((function(t){ng[t]=function(t,e){return function(n){return Qo({name:t,out:n||t},eg,e)}}(t,ng[t])}));var hg=fg.prototype;function dg(t){Ed.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}hg.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},hg.add=function(t){this._add.push(t)},hg.rem=function(t){this._rem.push(t)},hg.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),l={};for(t=0;t<u;++t)l[a(i[t])]=1;for(t=0,e=0;t<o;++t)l[a(n=r[t])]?l[a(n)]=0:s[e++]=n;return this._rem=[],this._add=s},hg.distinct=function(t){for(var e,n=this.values(),r={},i=n.length,a=0;--i>=0;)ru(r,e=t(n[i])+"")||(r[e]=1,++a);return a},hg.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=eu(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},hg.argmin=function(t){return this.extent(t)[0]||{}},hg.argmax=function(t){return this.extent(t)[1]||{}},hg.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):void 0},hg.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):void 0},hg.quartile=function(t){return this._get===t&&this._q||(this._q=ep(this.values(),t),this._get=t),this._q},hg.q1=function(t){return this.quartile(t)[0]},hg.q2=function(t){return this.quartile(t)[1]},hg.q3=function(t){return this.quartile(t)[2]},hg.ci=function(t){return this._get===t&&this._ci||(this._ci=op(this.values(),1e3,.05,t),this._get=t),this._ci},hg.ci0=function(t){return this.ci(t)[0]},hg.ci1=function(t){return this.ci(t)[1]},dg.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:rg},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},uu(dg,Ed,{transform:function(t,e){var n=this,r=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),a=t.modified();return r.stamp=i.stamp,r.value&&(a||e.modified(r._inputs,!0))?(r._prev=r.value,r.value=a?r.init(t):{},e.visit(e.SOURCE,(function(t){return r.add(t)}))):(r.value=r.value||r.init(t),e.visit(e.REM,(function(t){return r.rem(t)})),e.visit(e.ADD,(function(t){return r.add(t)}))),i.modifies(r._outputs),r._drop=!1!==t.drop,t.cross&&r._dims.length>1&&(r._drop=!1,r.cross()),e.clean()&&r._drop&&i.clean(!0).runAfter((function(){return n.clean()})),r.changes(i)},cross:function(){var t=this,e=t.value,n=t._dnames,r=n.map((function(){return{}})),i=n.length;function a(t){var e,a,o,u;for(e in t)for(o=t[e].tuple,a=0;a<i;++a)r[a][u=o[n[a]]]=u}a(t._prev),a(e),function a(o,u,s){var l=n[s],c=r[s++];for(var f in c){var h=o?o+"|"+f:f;u[l]=c[f],s<i?a(h,u,s):e[h]||t.cell(h,u)}}("",{},0)},init:function(t){var e=this._inputs=[],n=this._outputs=[],r={};function i(t){for(var n,i=Ho(Ja(t)),a=i.length,o=0;o<a;++o)r[n=i[o]]||(r[n]=1,e.push(n))}this._dims=Ho(t.groupby),this._dnames=this._dims.map((function(t){var e=$a(t);return i(t),n.push(e),e})),this.cellkey=t.key?t.key:Kp(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var a,o,u,s,l,c,f=t.fields||[null],h=t.ops||["count"],d=t.as||[],p=f.length,g={};for(p!==h.length&&eo("Unmatched number of fields and aggregate ops."),c=0;c<p;++c)a=f[c],o=h[c],null==a&&"count"!==o&&eo("Null aggregate field specified."),l=Qp(o,s=$a(a),d[c]),n.push(l),"count"!==o?((u=g[s])||(i(a),(u=g[s]=[]).field=a,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(ig(o,l))):this._counts.push(l);return this._measures=this._measures.map((function(t){return cg(t,t.field)})),{}},cellkey:Kp(),cell:function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell:function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r=this._measures,i=r.length;n.agg=Array(i);for(var a=0;a<i;++a)n.agg[a]=new r[a](n)}return n.store&&(n.data=new fg),n},newtuple:function(t,e){for(var n=this._dnames,r=this._dims,i=r.length,a={},o=0;o<i;++o)a[n[o]]=r[o](t);return e?Gh(e.tuple,a):Hh(a)},clean:function(){var t=this.value;for(var e in t)0===t[e].num&&delete t[e]},add:function(t){var e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,!this._countOnly){n.store&&n.data.add(t);for(var r=n.agg,i=0,a=r.length;i<a;++i)r[i].add(r[i].get(t),t)}},rem:function(t){var e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,!this._countOnly){n.store&&n.data.rem(t);for(var r=n.agg,i=0,a=r.length;i<a;++i)r[i].rem(r[i].get(t),t)}},celltuple:function(t){var e=t.tuple,n=this._counts;t.store&&t.data.values();for(var r=0,i=n.length;r<i;++r)e[n[r]]=t.num;if(!this._countOnly)for(var a=t.agg,o=0,u=a.length;o<u;++o)a[o].set(e);return e},changes:function(t){var e,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,l=t.add,c=t.rem,f=t.mod;if(u)for(n in u)e=u[n],s&&!e.num||c.push(e.tuple);for(r=0,i=this._alen;r<i;++r)l.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(e=o[r]).num&&s?c:f).push(this.celltuple(e)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,t}});function pg(t){Ed.call(this,null,t)}function gg(t,e,n){var r=t,i=e||[],a=n||[],o={},u=0;return{add:function(t){return a.push(t)},remove:function(t){return o[r(t)]=++u},size:function(){return i.length},data:function(t,e){return u&&(i=i.filter((function(t){return!o[r(t)]})),o={},u=0),e&&t&&i.sort(t),a.length&&(i=t?yu(t,i,a.sort(t)):i.concat(a),a=[]),i}}}function vg(t){Ed.call(this,[],t)}function mg(t){td.call(this,null,yg,t)}function yg(t){return this.value&&!t.modified()?this.value:Go(t.fields,t.orders)}function xg(t){Ed.call(this,null,t)}function bg(t){Ed.call(this,null,t)}pg.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},uu(pg,Ed,{transform:function(t,e){var n,r=!1!==t.interval,i=this._bins(t),a=i.start,o=i.step,u=t.as||["bin0","bin1"],s=u[0],l=u[1];return n=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified(Ja(t.field))?e.ADD_MOD:e.ADD,e.visit(n,r?function(t){var e=i(t);t[s]=e,t[l]=null==e?null:a+o*(1+(e-a)/o)}:function(t){return t[s]=i(t)}),e.modifies(r?u:s)},_bins:function(t){if(this.value&&!t.modified())return this.value;var e,n,r=t.field,i=rp(t),a=i.step,o=i.start,u=o+Math.ceil((i.stop-o)/a)*a;null!=(e=t.anchor)&&(n=e-(o+a*Math.floor((e-o)/a)),o+=n,u+=n);var s=function(t){var e=Eo(r(t));return null==e?null:e<o?-1/0:e>u?1/0:(e=Math.max(o,Math.min(e,u-a)),o+a*Math.floor(1e-14+(e-o)/a))};return s.start=o,s.stop=i.stop,s.step=a,this.value=qa(s,Ja(r),t.name||"bin_"+$a(r))}}),vg.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},uu(vg,Ed,{transform:function(t,e){var n=e.fork(e.ALL),r=gg(zh,this.value,n.materialize(n.ADD).add),i=t.sort,a=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(Xh(i),a),e.source&&e.source.root&&(this.value.root=e.source.root),n}}),uu(mg,td),xg.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},uu(xg,Ed,{transform:function(t,e){var n=function(e){return function(n){for(var r,i=function(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t.match(n)}(u(n),t.case,a)||[],s=0,l=i.length;s<l;++s)o.test(r=i[s])||e(r)}},r=this._parameterCheck(t,e),i=this._counts,a=this._match,o=this._stop,u=t.field,s=t.as||["text","count"],l=n((function(t){return i[t]=1+(i[t]||0)})),c=n((function(t){return i[t]-=1}));return r?e.visit(e.SOURCE,l):(e.visit(e.ADD,l),e.visit(e.REM,c)),this._finish(e,s)},_parameterCheck:function(t,e){var n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish:function(t,e){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=e[0],s=e[1],l=t.fork(t.NO_SOURCE|t.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=Hh({}),r[u]=n,r[s]=i,l.add.push(r)):0===i?(r&&l.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,l.mod.push(r));return l.modifies(e)}}),bg.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},uu(bg,Ed,{transform:function(t,e){var n=e.fork(e.NO_SOURCE),r=t.as||["a","b"],i=r[0],a=r[1],o=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter"),u=this.value;return o?(u&&(n.rem=u),u=e.materialize(e.SOURCE).source,n.add=this.value=function(t,e,n,r){for(var i,a,o=[],u={},s=t.length,l=0;l<s;++l)for(u[e]=a=t[l],i=0;i<s;++i)u[n]=t[i],r(u)&&(o.push(Hh(u)),(u={})[e]=a);return o}(u,i,a,t.filter||so)):n.mod=u,n.source=this.value,n.modifies(r)}});var wg={kde:yp,mixture:Cp,normal:mp,lognormal:kp,uniform:_p},Sg="function";function kg(t,e){var n=t[Sg];ru(wg,n)||eo("Unknown distribution function: "+n);var r=wg[n]();for(var i in t)"field"===i?r.data((t.from||e()).map(t[i])):"distributions"===i?r[i](t[i].map((function(t){return kg(t,e)}))):typeof r[i]===Sg&&r[i](t[i]);return r}function Cg(t){Ed.call(this,null,t)}var Eg=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Mg={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Eg},{name:"weights",type:"number",array:!0}]};function Og(t,e){return t?t.map((function(t,n){return e[n]||$a(t)})):null}function Ag(t,e,n){var r,i,a,o,u,s,l=[],c=function(t){return t(o)};if(null==e)l.push(t.map(n));else for(r={},i=0,a=t.length;i<a;++i)o=t[i],(s=r[u=e.map(c)])||(r[u]=s=[],s.dims=u,l.push(s)),s.push(n(o));return l}Cg.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Eg.concat(Mg)},{name:"as",type:"string",array:!0,default:["value","density"]}]},uu(Cg,Ed,{transform:function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=kg(t.distribution,function(t){return function(){return t.materialize(t.SOURCE).source}}(e)),i=t.steps||t.minsteps||25,a=t.steps||t.maxsteps||200,o=t.method||"pdf";"pdf"!==o&&"cdf"!==o&&eo("Invalid density method: "+o),t.extent||r.data||eo("Missing density extent parameter."),o=r[o];var u=t.as||["value","density"],s=Vp(o,t.extent||tu(r.data()),i,a).map((function(t){var e={};return e[u[0]]=t[0],e[u[1]]=t[1],Hh(e)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});function _g(t){Ed.call(this,null,t)}_g.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function Dg(t){td.call(this,null,Tg,t),this.modified(!0)}function Tg(t){var e=t.expr;return this.value&&!t.modified("expr")?this.value:qa((function(n){return e(n,t)}),Ja(e),$a(e))}function Fg(t){Ed.call(this,[void 0,void 0],t)}function Ig(t,e){td.call(this,t),this.parent=e,this.count=0}function Pg(t){Ed.call(this,{},t),this._keys=au();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var n=0,r=e.active;n<r;++n)t(e[n],n,e)}}function jg(t){td.call(this,null,Bg,t)}function Bg(t){return this.value&&!t.modified()?this.value:yo(t.name)?Ho(t.name).map((function(t){return ro(t)})):ro(t.name,t.as)}function Lg(t){Ed.call(this,au(),t)}function Rg(t){Ed.call(this,[],t)}function Zg(t){Ed.call(this,[],t)}function Ng(t){Ed.call(this,null,t)}function zg(t){Ed.call(this,[],t)}uu(_g,Ed,{transform:function(t,e){if(this.value&&!t.modified()&&!e.changed())return e;for(var n,r=e.materialize(e.SOURCE).source,i=Ag(e.source,t.groupby,ao),a=t.smooth||!1,o=t.field,u=t.step||function(t,e){return wu(tu(t,e))/30}(r,o),s=Xh((function(t,e){return o(t)-o(e)})),l=t.as||"bin",c=i.length,f=1/0,h=-1/0,d=0;d<c;++d){var p=i[d].sort(s);n=-1;var g,v=$p(up(p,u,a,o));try{for(v.s();!(g=v.n()).done;){var m=g.value;m<f&&(f=m),m>h&&(h=m),p[++n][l]=m}}catch(y){v.e(y)}finally{v.f()}}return this.value={start:f,stop:h,step:u},e.reflow(!0).modifies(l)}}),uu(Dg,td),Fg.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},uu(Fg,Ed,{transform:function(t,e){var n=this.value,r=t.field,i=e.changed()||e.modified(r.fields)||t.modified("field"),a=n[0],o=n[1];if((i||null==a)&&(a=1/0,o=-1/0),e.visit(i?e.SOURCE:e.ADD,(function(t){var e=Eo(r(t));null!=e&&(e<a&&(a=e),e>o&&(o=e))})),!Number.isFinite(a)||!Number.isFinite(o)){var u=$a(r);u&&(u=' for field "'.concat(u,'"')),e.dataflow.warn("Infinite extent".concat(u,": [").concat(a,", ").concat(o,"]")),a=o=void 0}this.value=[a,o]}}),uu(Ig,td,{connect:function(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add:function(t){this.count+=1,this.value.add.push(t)},rem:function(t){this.count-=1,this.value.rem.push(t)},mod:function(t){this.value.mod.push(t)},init:function(t){this.value.init(t,t.NO_SOURCE)},evaluate:function(){return this.value}}),uu(Pg,Ed,{activate:function(t){this._targets[this._targets.active++]=t},subflow:function(t,e,n,r){var i,a,o=this.value,u=ru(o,t)&&o[t];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[t])&&a.tuple,i=n.dataflow,u=new Ig(n.fork(n.NO_SOURCE),this),i.add(u).connect(e(i,t,a)),o[t]=u,this.activate(u)),u},clean:function(){var t=this.value,e=0;for(var n in t)if(0===t[n].count){var r=t[n].detachSubflow;r&&r(),delete t[n],++e}if(e){var i=this._targets.filter((function(t){return t&&t.count>0}));this.initTargets(i)}},initTargets:function(t){for(var e=this._targets,n=e.length,r=t?t.length:0,i=0;i<r;++i)e[i]=t[i];for(;i<n&&null!=e[i];++i)e[i]=null;e.active=r},transform:function(t,e){var n=this,r=e.dataflow,i=t.key,a=t.subflow,o=this._keys,u=t.modified("key"),s=function(t){return n.subflow(t,a,e)};return this._group=t.group||{},this.initTargets(),e.visit(e.REM,(function(t){var e=zh(t),n=o.get(e);void 0!==n&&(o.delete(e),s(n).rem(t))})),e.visit(e.ADD,(function(t){var e=i(t);o.set(zh(t),e),s(e).add(t)})),u||e.modified(i.fields)?e.visit(e.MOD,(function(t){var e=zh(t),n=o.get(e),r=i(t);n===r?s(r).mod(t):(o.set(e,r),s(n).rem(t),s(r).add(t))})):e.changed(e.MOD)&&e.visit(e.MOD,(function(t){s(o.get(zh(t))).mod(t)})),u&&e.visit(e.REFLOW,(function(t){var e=zh(t),n=o.get(e),r=i(t);n!==r&&(o.set(e,r),s(n).rem(t),s(r).add(t))})),e.clean()?r.runAfter((function(){n.clean(),o.clean()})):o.empty>r.cleanThreshold&&r.runAfter(o.clean),e}}),uu(jg,td),Lg.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},uu(Lg,Ed,{transform:function(t,e){var n=e.dataflow,r=this.value,i=e.fork(),a=i.add,o=i.rem,u=i.mod,s=t.expr,l=!0;function c(e){var n=zh(e),i=s(e,t),c=r.get(n);i&&c?(r.delete(n),a.push(e)):i||c?l&&i&&!c&&u.push(e):(r.set(n,1),o.push(e))}return e.visit(e.REM,(function(t){var e=zh(t);r.has(e)?r.delete(e):o.push(t)})),e.visit(e.ADD,(function(e){s(e,t)?a.push(e):r.set(zh(e),1)})),e.visit(e.MOD,c),t.modified()&&(l=!1,e.visit(e.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),Rg.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},uu(Rg,Ed,{transform:function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=Og(r,t.as||[]),a=t.index||null,o=i.length;return n.rem=this.value,e.visit(e.SOURCE,(function(t){for(var e,u,s,l=r.map((function(e){return e(t)})),c=l.reduce((function(t,e){return Math.max(t,e.length)}),0),f=0;f<c;++f){for(u=Wh(t),e=0;e<o;++e)u[i[e]]=null==(s=l[e][f])?null:s;a&&(u[a]=f),n.add.push(u)}})),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(i)}}),Zg.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},uu(Zg,Ed,{transform:function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map($a),a=t.as||["key","value"],o=a[0],u=a[1],s=r.length;return n.rem=this.value,e.visit(e.SOURCE,(function(t){for(var e,a=0;a<s;++a)(e=Wh(t))[o]=i[a],e[u]=r[a](t),n.add.push(e)})),this.value=n.source=n.add,n.modifies(a)}}),Ng.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},uu(Ng,Ed,{transform:function(t,e){var n=t.expr,r=t.as,i=t.modified(),a=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)||e.modified(r)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(a,(function(e){return e[r]=n(e,t)}))}}),uu(zg,Ed,{transform:function(t,e){var n,r,i,a=e.fork(e.ALL),o=t.generator,u=this.value,s=t.size-u.length;if(s>0){for(n=[];--s>=0;)n.push(i=Hh(o(t))),u.push(i);a.add=a.add.length?a.materialize(a.ADD).add.concat(n):n}else r=u.slice(0,-s),a.rem=a.rem.length?a.materialize(a.REM).rem.concat(r):r,u=u.slice(-s);return a.source=this.value=u,a}});var Ug={value:"value",median:qd,mean:function(t,e){var n=0,r=0;if(void 0===e){var i,a=Xp(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;null!=o&&(o=+o)>=o&&(++n,r+=o)}}catch(f){a.e(f)}finally{a.f()}}else{var u,s=-1,l=Xp(t);try{for(l.s();!(u=l.n()).done;){var c=u.value;null!=(c=e(c,++s,t))&&(c=+c)>=c&&(++n,r+=c)}}catch(f){l.e(f)}finally{l.f()}}if(n)return r/n},min:Pd,max:Td},Hg=[];function Wg(t){Ed.call(this,[],t)}function Vg(t){dg.call(this,t)}function Gg(t){Ed.call(this,null,t)}function Xg(t){td.call(this,null,Yg,t)}function Yg(t){return this.value&&!t.modified()?this.value:gu(t.fields,t.flat)}function qg(t){Ed.call(this,[],t),this._pending=null}function $g(t,e,n){n.forEach(Hh);var r=e.fork(e.NO_FIELDS&e.NO_SOURCE);return r.rem=t.value,t.value=r.source=r.add=n,t._pending=null,r.rem.length&&r.clean(!0),r}function Jg(t){Ed.call(this,{},t)}function Kg(t){td.call(this,null,Qg,t)}function Qg(t){if(this.value&&!t.modified())return this.value;var e,n,r=t.extents,i=r.length,a=1/0,o=-1/0;for(e=0;e<i;++e)(n=r[e])[0]<a&&(a=n[0]),n[1]>o&&(o=n[1]);return[a,o]}function tv(t){td.call(this,null,ev,t)}function ev(t){return this.value&&!t.modified()?this.value:t.values.reduce((function(t,e){return t.concat(e)}),[])}function nv(t){Ed.call(this,null,t)}function rv(t){dg.call(this,t)}function iv(t){Pg.call(this,t)}function av(t){Ed.call(this,null,t)}function ov(t){Ed.call(this,null,t)}function uv(t){Ed.call(this,null,t)}Wg.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},uu(Wg,Ed,{transform:function(t,e){var n,r,i,a,o,u,s,l,c,f,h=e.fork(e.ALL),d=function(t){var e,n=t.method||Ug.value;if(null!=Ug[n])return n===Ug.value?(e=void 0!==t.value?t.value:0,function(){return e}):Ug[n];eo("Unrecognized imputation method: "+n)}(t),p=function(t){var e=t.field;return function(t){return t?e(t):NaN}}(t),g=$a(t.field),v=$a(t.key),m=(t.groupby||[]).map($a),y=function(t,e,n,r){var i,a,o,u,s,l,c,f,h=function(t){return t(f)},d=[],p=r?r.slice():[],g={},v={};for(p.forEach((function(t,e){return g[t]=e+1})),u=0,c=t.length;u<c;++u)l=n(f=t[u]),s=g[l]||(g[l]=p.push(l)),(o=v[a=(i=e?e.map(h):Hg)+""])||(o=v[a]=[],d.push(o),o.values=i),o[s-1]=f;return d.domain=p,d}(e.source,t.groupby,t.key,t.keyvals),x=[],b=this.value,w=y.domain.length;for(o=0,l=y.length;o<l;++o)for(i=(n=y[o]).values,r=NaN,s=0;s<w;++s)if(null==n[s]){for(a=y.domain[s],f={_impute:!0},u=0,c=i.length;u<c;++u)f[m[u]]=i[u];f[v]=a,f[g]=Number.isNaN(r)?r=d(n,p):r,x.push(Hh(f))}return x.length&&(h.add=h.materialize(h.ADD).add.concat(x)),b.length&&(h.rem=h.materialize(h.REM).rem.concat(b)),this.value=x,h}}),Vg.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:rg},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},uu(Vg,dg,{transform:function(t,e){var n,r=this,i=t.modified();return r.value&&(i||e.modified(r._inputs,!0))?(n=r.value=i?r.init(t):{},e.visit(e.SOURCE,(function(t){return r.add(t)}))):(n=r.value=r.value||this.init(t),e.visit(e.REM,(function(t){return r.rem(t)})),e.visit(e.ADD,(function(t){return r.add(t)}))),r.changes(),e.visit(e.SOURCE,(function(t){Qo(t,n[r.cellkey(t)].tuple)})),e.reflow(i).modifies(this._outputs)},changes:function(){var t,e,n=this._adds,r=this._mods;for(t=0,e=this._alen;t<e;++t)this.celltuple(n[t]),n[t]=null;for(t=0,e=this._mlen;t<e;++t)this.celltuple(r[t]),r[t]=null;this._alen=this._mlen=0}}),Gg.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},uu(Gg,Ed,{transform:function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=e.materialize(e.SOURCE).source,i=Ag(r,t.groupby,t.field),a=(t.groupby||[]).map($a),o=t.bandwidth,u=t.cumulative?"cdf":"pdf",s=t.as||["value","density"],l=[],c=t.extent,f=t.steps||t.minsteps||25,h=t.steps||t.maxsteps||200;"pdf"!==u&&"cdf"!==u&&eo("Invalid density method: "+u),"shared"===t.resolve&&(c||(c=tu(r,t.field)),f=h=t.steps||h),i.forEach((function(e){var n=yp(e,o)[u],r=t.counts?e.length:1;Vp(n,c||tu(e),f,h).forEach((function(t){for(var n={},i=0;i<a.length;++i)n[a[i]]=e.dims[i];n[s[0]]=t[0],n[s[1]]=t[1]*r,l.push(Hh(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}}),uu(Xg,td),uu(qg,Ed,{transform:function(t,e){var n=this,r=e.dataflow;if(this._pending)return $g(this,e,this._pending);if(function(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}(t))return e.StopPropagation;if(t.values)return $g(this,e,r.parse(t.values,t.format));if(t.async){var i=r.request(t.url,t.format).then((function(t){return n._pending=Ho(t.data),function(t){return t.touch(n)}}));return{async:i}}return r.request(t.url,t.format).then((function(t){return $g(n,e,Ho(t.data))}))}}),Jg.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},uu(Jg,Ed,{transform:function(t,e){var n,r,i,a=t.fields,o=t.index,u=t.values,s=null==t.default?null:t.default,l=t.modified(),c=a.length,f=l?e.SOURCE:e.ADD,h=e,d=t.as;return u?(r=u.length,c>1&&!d&&eo('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==c*r&&eo('The "as" parameter has too few output field names.'),d=d||u.map($a),n=function(t){for(var e,n,i=0,l=0;i<c;++i)if(null==(n=o.get(a[i](t))))for(e=0;e<r;++e,++l)t[d[l]]=s;else for(e=0;e<r;++e,++l)t[d[l]]=u[e](n)}):(d||eo("Missing output field names."),n=function(t){for(var e,n=0;n<c;++n)e=o.get(a[n](t)),t[d[n]]=null==e?s:e}),l?h=e.reflow(!0):(i=a.some((function(t){return e.modified(t.fields)})),f|=i?e.MOD:0),e.visit(f,n),h.modifies(d)}}),uu(Kg,td),uu(tv,td),uu(nv,Ed,{transform:function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}}),rv.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:rg,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},uu(rv,dg,{_transform:dg.prototype.transform,transform:function(t,e){return this._transform(function(t,e){var n=t.field,r=t.value,i=("count"===t.op?"__count__":t.op)||"sum",a=Ja(n).concat(Ja(r)),o=function(t,e,n){var r={},i=[];return n.visit(n.SOURCE,(function(e){var n=t(e);r[n]||(r[n]=1,i.push(n))})),i.sort(Xo),e?i.slice(0,e):i}(n,t.limit||0,e);e.changed()&&t.set("__pivot__",null,null,!0);return{key:t.key,groupby:t.groupby,ops:o.map((function(){return i})),fields:o.map((function(t){return function(t,e,n,r){return qa((function(r){return e(r)===t?n(r):NaN}),r,t+"")}(t,n,r,a)})),as:o.map((function(t){return t+""})),modified:t.modified.bind(t)}}(t,e),e)}}),uu(iv,Pg,{transform:function(t,e){var n=this,r=t.subflow,i=t.field,a=function(t){return n.subflow(zh(t),r,e,t)};return(t.modified("field")||i&&e.modified(Ja(i)))&&eo("PreFacet does not support field modification."),this.initTargets(),i?(e.visit(e.MOD,(function(t){var e=a(t);i(t).forEach((function(t){return e.mod(t)}))})),e.visit(e.ADD,(function(t){var e=a(t);i(t).forEach((function(t){return e.add(Hh(t))}))})),e.visit(e.REM,(function(t){var e=a(t);i(t).forEach((function(t){return e.rem(t)}))}))):(e.visit(e.MOD,(function(t){return a(t).mod(t)})),e.visit(e.ADD,(function(t){return a(t).add(t)})),e.visit(e.REM,(function(t){return a(t).rem(t)}))),e.clean()&&e.runAfter((function(){return n.clean()})),e}}),av.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},uu(av,Ed,{transform:function(t,e){var n,r=e.fork(e.NO_SOURCE),i=t.fields,a=Og(t.fields,t.as||[]),o=i?function(t,e){return function(t,e,n,r){for(var i=0,a=n.length;i<a;++i)e[r[i]]=n[i](t);return e}(t,e,i,a)}:Vh;return this.value?n=this.value:(e=e.addAll(),n=this.value={}),e.visit(e.REM,(function(t){var e=zh(t);r.rem.push(n[e]),n[e]=null})),e.visit(e.ADD,(function(t){var e=o(t,Hh({}));n[zh(t)]=e,r.add.push(e)})),e.visit(e.MOD,(function(t){r.mod.push(o(t,n[zh(t)]))})),r}}),uu(ov,Ed,{transform:function(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}}),uv.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function sv(t){Ed.call(this,null,t)}function lv(t){Ed.call(this,[],t),this.count=0}function cv(t){Ed.call(this,null,t)}function fv(t){Ed.call(this,null,t),this.modified(!0)}function hv(t){Ed.call(this,null,t)}uu(uv,Ed,{transform:function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;var i=Ag(e.materialize(e.SOURCE).source,t.groupby,t.field),a=(t.groupby||[]).map($a),o=[],u=t.step||.01,s=t.probs||qp(u/2,1-1e-14,u),l=s.length;return i.forEach((function(t){for(var e=tp(t,s),n=0;n<l;++n){for(var i={},u=0;u<a.length;++u)i[a[u]]=t.dims[u];i[r[0]]=s[n],i[r[1]]=e[n],o.push(Hh(i))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}}),uu(sv,Ed,{transform:function(t,e){var n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,(function(t){var e=zh(t);n.rem.push(r[e]),r[e]=null})),e.visit(e.ADD,(function(t){var e=Wh(t);r[zh(t)]=e,n.add.push(e)})),e.visit(e.MOD,(function(t){var e=r[zh(t)];for(var i in t)e[i]=t[i],n.modifies(i);n.mod.push(e)}))),n}}),lv.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},uu(lv,Ed,{transform:function(t,e){var n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,a=this.value.reduce((function(t,e){return t[zh(e)]=1,t}),{}),o=this.value,u=this.count,s=0;function l(t){var e,r;o.length<i?o.push(t):(r=~~((u+1)*ip()))<o.length&&r>=s&&(e=o[r],a[zh(e)]&&n.rem.push(e),o[r]=t),++u}if(e.rem.length&&(e.visit(e.REM,(function(t){var e=zh(t);a[e]&&(a[e]=-1,n.rem.push(t)),--u})),o=o.filter((function(t){return-1!==a[zh(t)]}))),(e.rem.length||r)&&o.length<i&&e.source&&(s=u=o.length,e.visit(e.SOURCE,(function(t){a[zh(t)]||l(t)})),s=-1),r&&o.length>i){for(var c=o.length-i,f=0;f<c;++f)a[zh(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return e.mod.length&&e.visit(e.MOD,(function(t){a[zh(t)]&&n.mod.push(t)})),e.add.length&&e.visit(e.ADD,l),(e.add.length||s<0)&&(n.add=o.filter((function(t){return!a[zh(t)]}))),this.count=u,this.value=n.source=o,n}}),cv.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},uu(cv,Ed,{transform:function(t,e){if(!this.value||t.modified()){var n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=qp(t.start,t.stop,t.step||1).map((function(t){var e={};return e[r]=t,Hh(e)})),n.add=e.add.concat(this.value),n}}}),uu(fv,Ed,{transform:function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});var dv=["unit0","unit1"];function pv(t){Ed.call(this,au(),t)}function gv(t){Ed.call(this,null,t)}hv.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:xl,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:dv}]},uu(hv,Ed,{transform:function(t,e){var n=t.field,r=!1!==t.interval,i="utc"===t.timezone,a=this._floor(t,e),o=(i?ql:Yl)(a.unit).offset,u=t.as||dv,s=u[0],l=u[1],c=a.step,f=a.start||1/0,h=a.stop||-1/0,d=e.ADD;return(t.modified()||e.changed(e.REM)||e.modified(Ja(n)))&&(d=(e=e.reflow(!0)).SOURCE,f=1/0,h=-1/0),e.visit(d,(function(t){var e,i,u=n(t);null==u?(t[s]=null,r&&(t[l]=null)):(t[s]=e=i=a(u),r&&(t[l]=i=o(e,c)),e<f&&(f=e),i>h&&(h=i))})),a.start=f,a.stop=h,e.modifies(r?u:s)},_floor:function(t,e){var n="utc"===t.timezone,r=t.units?{units:t.units,step:t.step||1}:vc({extent:t.extent||tu(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),i=r.units,a=r.step,o=wl(i),u=this.value||{},s=(n?Vl:Ul)(o,a);return s.unit=Co(o),s.units=o,s.step=a,s.start=u.start,s.stop=u.stop,this.value=s}}),uu(pv,Ed,{transform:function(t,e){var n=e.dataflow,r=t.field,i=this.value,a=function(t){return i.set(r(t),t)},o=!0;return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,a)):e.changed()?(e.visit(e.REM,(function(t){return i.delete(r(t))})),e.visit(e.ADD,a)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()}}),uu(gv,Ed,{transform:function(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(Xh(t.sort)):e.source).map(t.field))}});var vv={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){return t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){var t;return{init:function(){return t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){var t=vv.rank(),e=t.next;return{init:t.init,next:function(t){return(e(t)-1)/(t.data.length-1)}}},cume_dist:function(){var t;return{init:function(){return t=0},next:function(e){var n=e.data,r=e.compare,i=e.index;if(t<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;t=i}return(1+t)/n.length}}},ntile:function(t,e){(e=+e)>0||eo("ntile num must be greater than zero.");var n=vv.cume_dist(),r=n.next;return{init:n.init,next:function(t){return Math.ceil(e*r(t))}}},lag:function(t,e){return e=+e||1,{next:function(n){var r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:function(n){var r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:function(e){return t(e.data[e.i0])}}},last_value:function(t){return{next:function(e){return t(e.data[e.i1-1])}}},nth_value:function(t,e){return(e=+e)>0||eo("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}},prev_value:function(t){var e;return{init:function(){return e=null},next:function(n){var r=t(n.data[n.index]);return null!=r?e=r:e}}},next_value:function(t){var e,n;return{init:function(){return e=null,n=-1},next:function(r){var i=r.data;return r.index<=n?e:(n=function(t,e,n){for(var r=e.length;n<r;++n){if(null!=t(e[n]))return n}return-1}(t,i,r.index))<0?(n=i.length,e=null):e=t(i[n])}}}};var mv=Object.keys(vv);function yv(t){var e=Ho(t.ops),n=Ho(t.fields),r=Ho(t.params),i=Ho(t.as),a=this.outputs=[],o=this.windows=[],u={},s={},l=[],c=[],f=!0;function h(t){Ho(Ja(t)).forEach((function(t){return u[t]=1}))}h(t.sort),e.forEach((function(t,e){var u=n[e],d=$a(u),p=Qp(t,d,i[e]);if(h(u),a.push(p),ru(vv,t))o.push(function(t,e,n,r){var i=vv[t](e,n);return{init:i.init||oo,update:function(t,e){e[r]=i.next(t)}}}(t,n[e],r[e],p));else{if(null==u&&"count"!==t&&eo("Null aggregate field specified."),"count"===t)return void l.push(p);f=!1;var g=s[d];g||((g=s[d]=[]).field=u,c.push(g)),g.push(ig(t,p))}})),(l.length||c.length)&&(this.cell=function(t,e,n){t=t.map((function(t){return cg(t,t.field)}));var r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new t[o](r);if(r.store)var u=r.data=new fg;return r.add=function(t){if(r.num+=1,!n){u&&u.add(t);for(var e=0;e<i;++e)a[e].add(a[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){u&&u.rem(t);for(var e=0;e<i;++e)a[e].rem(a[e].get(t),t)}},r.set=function(t){var i,o;for(u&&u.values(),i=0,o=e.length;i<o;++i)t[e[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(t)},r.init=function(){r.num=0,u&&u.reset();for(var t=0;t<i;++t)a[t].init()},r}(c,l,f)),this.inputs=Object.keys(u)}var xv=yv.prototype;function bv(t){Ed.call(this,{},t),this._mlen=0,this._mods=[]}function wv(t,e,n,r){var i=r.sort,a=i&&!r.ignorePeers,o=r.frame||[null,0],u=t.data(n),s=u.length,l=a?ol(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:i||Jo(-1)};e.init();for(var f=0;f<s;++f)Sv(c,o,f,s),a&&kv(c,l),e.update(c,u[f])}function Sv(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function kv(t,e){var n=t.i0,r=t.i1-1,i=t.compare,a=t.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(t.i0=e.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(t.i1=e.right(a,a[r]))}function Cv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ev(t){this._context=t}function Mv(){}function Ov(t){this._context=t}function Av(t){this._context=t}function _v(t,e){this._basis=new Ev(t),this._beta=e}xv.init=function(){this.windows.forEach((function(t){return t.init()})),this.cell&&this.cell.init()},xv.update=function(t,e){var n,r=this.cell,i=this.windows,a=t.data,o=i&&i.length;if(r){for(n=t.p0;n<t.i0;++n)r.rem(a[n]);for(n=t.p1;n<t.i1;++n)r.add(a[n]);r.set(e)}for(n=0;n<o;++n)i[n].update(t,e)},bv.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:mv.concat(rg)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},uu(bv,Ed,{transform:function(t,e){var n=this;this.stamp=e.stamp;var r=t.modified(),i=Xh(t.sort),a=Kp(t.groupby),o=function(t){return n.group(a(t))},u=this.state;u&&!r||(u=this.state=new yv(t)),r||e.modified(u.inputs)?(this.value={},e.visit(e.SOURCE,(function(t){return o(t).add(t)}))):(e.visit(e.REM,(function(t){return o(t).remove(t)})),e.visit(e.ADD,(function(t){return o(t).add(t)})));for(var s=0,l=this._mlen;s<l;++s)wv(this._mods[s],u,i,t);return this._mlen=0,this._mods=[],e.reflow(r).modifies(u.outputs)},group:function(t){var e=this.value[t];return e||(e=this.value[t]=gg(zh),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}}),Ev.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Cv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Cv(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Ov.prototype={areaStart:Mv,areaEnd:Mv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Cv(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Av.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Cv(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_v.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,u=e[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+r*o),this._beta*e[s]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Dv=function t(e){function n(t){return 1===e?new Ev(t):new _v(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Tv(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Fv(t,e){this._context=t,this._k=(1-e)/6}Fv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Tv(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Tv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Iv=function t(e){function n(t){return new Fv(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Pv(t,e){this._context=t,this._k=(1-e)/6}Pv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Tv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var jv=function t(e){function n(t){return new Pv(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Bv(t,e){this._context=t,this._k=(1-e)/6}Bv.prototype={areaStart:Mv,areaEnd:Mv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Tv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Lv=function t(e){function n(t){return new Bv(t,e)}return n.tension=function(e){return t(+e)},n}(0),Rv=Math.abs,Zv=Math.atan2,Nv=Math.cos,zv=Math.max,Uv=Math.min,Hv=Math.sin,Wv=Math.sqrt,Vv=1e-12,Gv=Math.PI,Xv=Gv/2,Yv=2*Gv;function qv(t){return t>1?0:t<-1?Gv:Math.acos(t)}function $v(t){return t>=1?Xv:t<=-1?-Xv:Math.asin(t)}function Jv(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Vv){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>Vv){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function Kv(t,e){this._context=t,this._alpha=e}Kv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Jv(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Qv=function t(e){function n(t){return e?new Kv(t,e):new Fv(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function tm(t,e){this._context=t,this._alpha=e}tm.prototype={areaStart:Mv,areaEnd:Mv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Jv(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var em=function t(e){function n(t){return e?new tm(t,e):new Bv(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function nm(t,e){this._context=t,this._alpha=e}nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Jv(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var rm,im,am,om,um,sm,lm,cm,fm,hm,dm,pm,gm,vm,mm=function t(e){function n(t){return e?new nm(t,e):new Pv(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function ym(t){this._context=t}function xm(t){return new ym(t)}function bm(t){this._context=t}function wm(t){return t<0?-1:1}function Sm(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(wm(a)+wm(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function km(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Cm(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*e,a-u,o-u*n,a,o)}function Em(t){this._context=t}function Mm(t){this._context=new Om(t)}function Om(t){this._context=t}function Am(t){this._context=t}function _m(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Dm(t,e){this._context=t,this._t=e}function Tm(t){return function(){return t}}function Fm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},bm.prototype={areaStart:Mv,areaEnd:Mv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Em.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Cm(this,this._t0,km(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Cm(this,km(this,n=Sm(this,t,e)),n);break;default:Cm(this,this._t0,n=Sm(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Mm.prototype=Object.create(Em.prototype)).point=function(t,e){Em.prototype.point.call(this,e,t)},Om.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},Am.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=_m(t),i=_m(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Dm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Im=Math.PI,Pm=2*Im,jm=1e-6,Bm=Pm-jm;function Lm(t){this._+=t[0];for(var e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}var Rm=function(){function t(e){(0,J.Z)(this,t),this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Lm:function(t){var e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: ".concat(t));if(e>15)return Lm;var n=Math.pow(10,e);return function(t){this._+=t[0];for(var e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(e)}return(0,K.Z)(t,[{key:"moveTo",value:function(t,e){this._append(rm||(rm=Fm(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(im||(im=Fm(["Z"]))))}},{key:"lineTo",value:function(t,e){this._append(am||(am=Fm(["L",",",""])),this._x1=+t,this._y1=+e)}},{key:"quadraticCurveTo",value:function(t,e,n,r){this._append(om||(om=Fm(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+r)}},{key:"bezierCurveTo",value:function(t,e,n,r,i,a){this._append(um||(um=Fm(["C",",",",",",",",",",",""])),+t,+e,+n,+r,this._x1=+i,this._y1=+a)}},{key:"arcTo",value:function(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));var a=this._x1,o=this._y1,u=n-t,s=r-e,l=a-t,c=o-e,f=l*l+c*c;if(null===this._x1)this._append(sm||(sm=Fm(["M",",",""])),this._x1=t,this._y1=e);else if(f>jm)if(Math.abs(c*u-s*l)>jm&&i){var h=n-a,d=r-o,p=u*u+s*s,g=h*h+d*d,v=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((Im-Math.acos((p+f-g)/(2*v*m)))/2),x=y/m,b=y/v;Math.abs(x-1)>jm&&this._append(cm||(cm=Fm(["L",",",""])),t+x*l,e+x*c),this._append(fm||(fm=Fm(["A",",",",0,0,",",",",",""])),i,i,+(c*h>l*d),this._x1=t+b*u,this._y1=e+b*s)}else this._append(lm||(lm=Fm(["L",",",""])),this._x1=t,this._y1=e);else;}},{key:"arc",value:function(t,e,n,r,i,a){if(t=+t,e=+e,a=!!a,(n=+n)<0)throw new Error("negative radius: ".concat(n));var o=n*Math.cos(r),u=n*Math.sin(r),s=t+o,l=e+u,c=1^a,f=a?r-i:i-r;null===this._x1?this._append(hm||(hm=Fm(["M",",",""])),s,l):(Math.abs(this._x1-s)>jm||Math.abs(this._y1-l)>jm)&&this._append(dm||(dm=Fm(["L",",",""])),s,l),n&&(f<0&&(f=f%Pm+Pm),f>Bm?this._append(pm||(pm=Fm(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,c,t-o,e-u,n,n,c,this._x1=s,this._y1=l):f>jm&&this._append(gm||(gm=Fm(["A",",",",0,",",",",",",",""])),n,n,+(f>=Im),c,this._x1=t+n*Math.cos(i),this._y1=e+n*Math.sin(i)))}},{key:"rect",value:function(t,e,n,r){this._append(vm||(vm=Fm(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+r,-n)}},{key:"toString",value:function(){return this._}}]),t}();function Zm(){return new Rm}function Nm(t){var e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{var r=Math.floor(n);if(!(r>=0))throw new RangeError("invalid digits: ".concat(n));e=r}return t},function(){return new Rm(e)}}function zm(t){return t.innerRadius}function Um(t){return t.outerRadius}function Hm(t){return t.startAngle}function Wm(t){return t.endAngle}function Vm(t){return t&&t.padAngle}function Gm(t,e,n,r,i,a,o,u){var s=n-t,l=r-e,c=o-i,f=u-a,h=f*s-c*l;if(!(h*h<Vv))return[t+(h=(c*(e-a)-f*(t-i))/h)*s,e+h*l]}function Xm(t,e,n,r,i,a,o){var u=t-n,s=e-r,l=(o?a:-a)/Wv(u*u+s*s),c=l*s,f=-l*u,h=t+c,d=e+f,p=n+c,g=r+f,v=(h+p)/2,m=(d+g)/2,y=p-h,x=g-d,b=y*y+x*x,w=i-a,S=h*g-p*d,k=(x<0?-1:1)*Wv(zv(0,w*w*b-S*S)),C=(S*x-y*k)/b,E=(-S*y-x*k)/b,M=(S*x+y*k)/b,O=(-S*y+x*k)/b,A=C-v,_=E-m,D=M-v,T=O-m;return A*A+_*_>D*D+T*T&&(C=M,E=O),{cx:C,cy:E,x01:-c,y01:-f,x11:C*(i/w-1),y11:E*(i/w-1)}}Zm.prototype=Rm.prototype;Array.prototype.slice;function Ym(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function qm(t){return t[0]}function $m(t){return t[1]}function Jm(t,e){var n=Tm(!0),r=null,i=xm,a=null,o=Nm(u);function u(u){var s,l,c,f=(u=Ym(u)).length,h=!1;for(null==r&&(a=i(c=o())),s=0;s<=f;++s)!(s<f&&n(l=u[s],s,u))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(l,s,u),+e(l,s,u));if(c)return a=null,c+""||null}return t="function"==typeof t?t:void 0===t?qm:Tm(t),e="function"==typeof e?e:void 0===e?$m:Tm(e),u.x=function(e){return arguments.length?(t="function"==typeof e?e:Tm(+e),u):t},u.y=function(t){return arguments.length?(e="function"==typeof t?t:Tm(+t),u):e},u.defined=function(t){return arguments.length?(n="function"==typeof t?t:Tm(!!t),u):n},u.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),u):i},u.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),u):r},u}function Km(t,e,n){var r=null,i=Tm(!0),a=null,o=xm,u=null,s=Nm(l);function l(l){var c,f,h,d,p,g=(l=Ym(l)).length,v=!1,m=new Array(g),y=new Array(g);for(null==a&&(u=o(p=s())),c=0;c<=g;++c){if(!(c<g&&i(d=l[c],c,l))===v)if(v=!v)f=c,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),h=c-1;h>=f;--h)u.point(m[h],y[h]);u.lineEnd(),u.areaEnd()}v&&(m[c]=+t(d,c,l),y[c]=+e(d,c,l),u.point(r?+r(d,c,l):m[c],n?+n(d,c,l):y[c]))}if(p)return u=null,p+""||null}function c(){return Jm().defined(i).curve(o).context(a)}return t="function"==typeof t?t:void 0===t?qm:Tm(+t),e="function"==typeof e?e:Tm(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?$m:Tm(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:Tm(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:Tm(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Tm(+t),l):r},l.y=function(t){return arguments.length?(e="function"==typeof t?t:Tm(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:Tm(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Tm(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"==typeof t?t:Tm(!!t),l):i},l.curve=function(t){return arguments.length?(o=t,null!=a&&(u=o(a)),l):o},l.context=function(t){return arguments.length?(null==t?a=u=null:u=o(a=t),l):a},l}Wv(3);var Qm={draw:function(t,e){var n=Wv(e/Gv);t.moveTo(n,0),t.arc(0,0,n,0,Yv)}},ty=(Wv(1/3),Hv(Gv/10)/Hv(7*Gv/10));Hv(Yv/10),Nv(Yv/10),Wv(3),Wv(3),Wv(3),Wv(12);function ey(t,e){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}var ny=function(){return"undefined"!=typeof Image?Image:null},ry=/^(data:|([A-Za-z]+:)?\/\/)/,iy=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ay=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,oy="file://";function uy(t,e){return sy.apply(this,arguments)}function sy(){return(sy=(0,rt.Z)(G().mark((function t(e,n){var r,i;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(e,n);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function ly(t,e){return cy.apply(this,arguments)}function cy(){return cy=(0,rt.Z)(G().mark((function t(e,n){var r,i,a,o,u,s,l;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Qo({},this.options,n),r=this.fileAccess,i={href:null},s=iy.test(e.replace(ay,"")),null!=e&&"string"==typeof e&&s||eo("Sanitize failure, invalid URI: "+Su(e)),l=ry.test(e),(u=n.baseURL)&&!l&&(e.startsWith("/")||u.endsWith("/")||(e="/"+e),e=u+e),o=(a=e.startsWith(oy))||"file"===n.mode||"http"!==n.mode&&!l&&r,a?e=e.slice(oy.length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),o=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(i.crossOrigin=n.crossOrigin+""),t.abrupt("return",i);case 14:case"end":return t.stop()}}),t,this)}))),cy.apply(this,arguments)}function fy(t){return t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){t?r(t):n(e)}))}))}:hy}function hy(){return dy.apply(this,arguments)}function dy(){return(dy=(0,rt.Z)(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:eo("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function py(t){return t?function(){var e=(0,rt.Z)(G().mark((function e(n,r){var i,a,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qo({},this.options.http,r),a=r&&r.response,e.next=4,t(n,i);case 4:return o=e.sent,e.abrupt("return",o.ok?Vo(o[a])?o[a]():o.text():eo(o.status+""+o.statusText));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}():gy}function gy(){return vy.apply(this,arguments)}function vy(){return(vy=(0,rt.Z)(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:eo("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function my(t){var e=function(e,n){var r={delimiter:t};return yy(e,n?Qo(n,r):r)};return e.responseType="text",e}function yy(t,e){return e.header&&(t=e.header.map(Su).join(e.delimiter)+"\n"+t),Bu(e.delimiter).parse(t+"")}function xy(t,e){var n,r=e&&e.property?ro(e.property):ao;return!xo(t)||(n=t,"function"==typeof Buffer&&Vo(Buffer.isBuffer)&&Buffer.isBuffer(n))?r(JSON.parse(t)):function(t,e){!yo(t)&&fu(t)&&(t=(0,X.Z)(t));return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(r(t),e)}yy.responseType="text",xy.responseType="json";var by={interior:function(t,e){return t!==e},exterior:function(t,e){return t===e}};function wy(t,e){var n,r,i,a;return t=xy(t,e),e&&e.feature?(n=Ru,i=e.feature):e&&e.mesh?(n=Uu,i=e.mesh,a=by[e.filter]):eo("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r,a):eo("Invalid TopoJSON object: "+i))&&r.features||[r]}wy.responseType="json";my(","),my("\t");var Sy=function(t,e){return function(n){return{options:n||{},sanitize:ly,load:uy,fileAccess:!!e,file:fy(e),http:py(t)}}}("undefined"!=typeof fetch&&fetch,null),ky=ol(il),Cy=ky.right,Ey=ky.left,My=(ol(Ud).center,Cy),Oy=n(23713),Ay=n(44922);function _y(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Dy(t){return+t}var Ty=[0,1];function Fy(t){return t}function Iy(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Py(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Iy(i,r),a=n(o,a)):(r=Iy(r,i),a=n(a,o)),function(t){return a(r(t))}}function jy(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Iy(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=My(t,e,1,r)-1;return a[n](i[n](e))}}function By(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ly(){var t,e,n,r,i,a,o=Ty,u=Ty,s=Oy.Z,l=Fy;function c(){var t=Math.min(o.length,u.length);return l!==Fy&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?jy:Py,i=a=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),u,s)))(t(l(e)))}return f.invert=function(n){return l(e((a||(a=r(u,o.map(t),Ay.Z)))(n)))},f.domain=function(t){return arguments.length?(o=Array.from(t,Dy),c()):o.slice()},f.range=function(t){return arguments.length?(u=Array.from(t),c()):u.slice()},f.rangeRound=function(t){return u=Array.from(t),s=_y,c()},f.clamp=function(t){return arguments.length?(l=!!t||Fy,c()):l!==Fy},f.interpolate=function(t){return arguments.length?(s=t,c()):s},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}function Ry(){return Ly()(Fy,Fy)}function Zy(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Ny(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}var zy,Uy=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hy(t){if(!(e=Uy.exec(t)))throw new Error("invalid format: "+t);var e;return new Wy({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Wy(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Vy(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Gy(t){return(t=Vy(Math.abs(t)))?t[1]:NaN}function Xy(t,e){var n=Vy(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Hy.prototype=Wy.prototype,Wy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Yy={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Xy(100*t,e)},r:Xy,s:function(t,e){var n=Vy(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(zy=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Vy(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function qy(t){return t}var $y,Jy,Ky,Qy=Array.prototype.map,tx=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ex(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?qy:(e=Qy.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(t.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?qy:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Qy.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"−":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Hy(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,v=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Yy[y]||(void 0===v&&(v=12),m=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var x="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?a:/[%p]/.test(y)?s:"",w=Yy[y],S=/[defgprs%]/.test(y);function k(t){var i,a,s,h=x,k=b;if("c"===y)k=w(t)+k,t="";else{var C=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:w(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),C&&0==+t&&"+"!==f&&(C=!1),h=(C?"("===f?f:l:"-"===f||"("===f?"":f)+h,k=("s"===y?tx[8+zy/3]:"")+k+(C&&"("===f?")":""),S)for(i=-1,a=t.length;++i<a;)if(48>(s=t.charCodeAt(i))||s>57){k=(46===s?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var E=h.length+t.length+k.length,M=E<p?new Array(p-E+1).join(e):"";switch(g&&d&&(t=r(M+t,M.length?p-k.length:1/0),M=""),n){case"<":t=h+t+k+M;break;case"=":t=h+M+t+k;break;case"^":t=M.slice(0,E=M.length>>1)+h+t+k+M.slice(E);break;default:t=M+h+t+k}return u(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n=f(((t=Hy(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Gy(e)/3))),i=Math.pow(10,-r),a=tx[8+r/3];return function(t){return n(i*t)+a}}}}function nx(t,e,n,r){var i,a=$u(t,e,n);switch((r=Hy(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Gy(e)/3)))-Gy(Math.abs(t)))}(a,o))||(r.precision=i),Ky(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Gy(e)-Gy(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Gy(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return Jy(r)}function rx(t){var e=t.domain;return t.ticks=function(t){var n=e();return Yu(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return nx(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),o=0,u=a.length-1,s=a[o],l=a[u],c=10;for(l<s&&(i=s,s=l,l=i,i=o,o=u,u=i);c-- >0;){if((i=qu(s,l,n))===r)return a[o]=s,a[u]=l,e(a);if(i>0)s=Math.floor(s/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;s=Math.ceil(s*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function ix(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function ax(t){return Math.log(t)}function ox(t){return Math.exp(t)}function ux(t){return-Math.log(-t)}function sx(t){return-Math.exp(-t)}function lx(t){return isFinite(t)?+("1e"+t):t<0?0:t}function cx(t){return function(e,n){return-t(-e,n)}}function fx(t){var e,n,r=t(ax,ox),i=r.domain,a=10;function o(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(a),n=function(t){return 10===t?lx:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(a),i()[0]<0?(e=cx(e),n=cx(n),t(ux,sx)):t(ax,ox),r}return r.base=function(t){return arguments.length?(a=+t,o()):a},r.domain=function(t){return arguments.length?(i(t),o()):i()},r.ticks=function(t){var r=i(),o=r[0],u=r[r.length-1],s=u<o;if(s){var l=[u,o];o=l[0],u=l[1]}var c,f,h=e(o),d=e(u),p=null==t?10:+t,g=[];if(!(a%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),o>0){for(;h<=d;++h)for(c=1;c<a;++c)if(!((f=h<0?c/n(-h):c*n(h))<o)){if(f>u)break;g.push(f)}}else for(;h<=d;++h)for(c=a-1;c>=1;--c)if(!((f=h>0?c/n(-h):c*n(h))<o)){if(f>u)break;g.push(f)}2*g.length<p&&(g=Yu(o,u,p))}else g=Yu(h,d,Math.min(d-h,p)).map(n);return s?g.reverse():g},r.tickFormat=function(t,i){if(null==t&&(t=10),null==i&&(i=10===a?"s":","),"function"!=typeof i&&(a%1||null!=(i=Hy(i)).precision||(i.trim=!0),i=Jy(i)),t===1/0)return i;var o=Math.max(1,a*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*a<a-.5&&(r*=a),r<=o?i(t):""}},r.nice=function(){return i(ix(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function hx(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function dx(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function px(t){return t<0?-t*t:t*t}function gx(t){var e=t(Fy,Fy),n=1;function r(){return 1===n?t(Fy,Fy):.5===n?t(dx,px):t(hx(n),hx(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},rx(e)}function vx(){var t=gx(Ly());return t.copy=function(){return By(t,vx()).exponent(t.exponent())},Zy.apply(t,arguments),t}function mx(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function yx(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function xx(t){var e=1,n=t(mx(e),yx(e));return n.constant=function(n){return arguments.length?t(mx(e=+n),yx(e)):e},rx(n)}function bx(t,e,n,r,i,a){var o=[[qs,1,gs],[qs,5,5e3],[qs,15,15e3],[qs,30,3e4],[a,1,vs],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,ms],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,ys],[r,2,1728e5],[n,1,xs],[e,1,bs],[e,3,7776e6],[t,1,ws]];function u(e,n,r){var i=Math.abs(n-e)/r,a=ol((function(t){return(0,W.Z)(t,3)[2]})).right(o,i);if(a===o.length)return t.every($u(e/ws,n/ws,r));if(0===a)return $s.every(Math.max($u(e,n,r),1));var u=(0,W.Z)(o[i/o[a-1][2]<o[a][2]/i?a-1:a],2),s=u[0],l=u[1];return s.every(l)}return[function(t,e,n){var r=e<t;if(r){var i=[e,t];t=i[0],e=i[1]}var a=n&&"function"==typeof n.range?n:u(t,e,n),o=a?a.range(t,+e+1):[];return r?o.reverse():o},u]}!function(t){$y=ex(t),Jy=$y.format,Ky=$y.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var wx=bx(Us,Ws,Ps,Cs,Gs,Ys),Sx=(0,W.Z)(wx,2),kx=Sx[0],Cx=Sx[1],Ex=bx(zs,Hs,Ms,Ss,Vs,Xs),Mx=(0,W.Z)(Ex,2),Ox=Mx[0],Ax=Mx[1];function _x(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Dx(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Tx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Fx,Ix,Px,jx={"-":"",_:" ",0:"0"},Bx=/^\s*\d+/,Lx=/^%/,Rx=/[\\^$*+?|[\]().{}]/g;function Zx(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Nx(t){return t.replace(Rx,"\\$&")}function zx(t){return new RegExp("^(?:"+t.map(Nx).join("|")+")","i")}function Ux(t){return new Map(t.map((function(t,e){return[t.toLowerCase(),e]})))}function Hx(t,e,n){var r=Bx.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Wx(t,e,n){var r=Bx.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Vx(t,e,n){var r=Bx.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Gx(t,e,n){var r=Bx.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Xx(t,e,n){var r=Bx.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Yx(t,e,n){var r=Bx.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qx(t,e,n){var r=Bx.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function $x(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Jx(t,e,n){var r=Bx.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Kx(t,e,n){var r=Bx.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qx(t,e,n){var r=Bx.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function tb(t,e,n){var r=Bx.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function eb(t,e,n){var r=Bx.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function nb(t,e,n){var r=Bx.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function rb(t,e,n){var r=Bx.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ib(t,e,n){var r=Bx.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ab(t,e,n){var r=Bx.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ob(t,e,n){var r=Lx.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ub(t,e,n){var r=Bx.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function sb(t,e,n){var r=Bx.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function lb(t,e){return Zx(t.getDate(),e,2)}function cb(t,e){return Zx(t.getHours(),e,2)}function fb(t,e){return Zx(t.getHours()%12||12,e,2)}function hb(t,e){return Zx(1+Ss.count(zs(t),t),e,3)}function db(t,e){return Zx(t.getMilliseconds(),e,3)}function pb(t,e){return db(t,e)+"000"}function gb(t,e){return Zx(t.getMonth()+1,e,2)}function vb(t,e){return Zx(t.getMinutes(),e,2)}function mb(t,e){return Zx(t.getSeconds(),e,2)}function yb(t){var e=t.getDay();return 0===e?7:e}function xb(t,e){return Zx(Ms.count(zs(t)-1,t),e,2)}function bb(t){var e=t.getDay();return e>=4||0===e?Ds(t):Ds.ceil(t)}function wb(t,e){return t=bb(t),Zx(Ds.count(zs(t),t)+(4===zs(t).getDay()),e,2)}function Sb(t){return t.getDay()}function kb(t,e){return Zx(Os.count(zs(t)-1,t),e,2)}function Cb(t,e){return Zx(t.getFullYear()%100,e,2)}function Eb(t,e){return Zx((t=bb(t)).getFullYear()%100,e,2)}function Mb(t,e){return Zx(t.getFullYear()%1e4,e,4)}function Ob(t,e){var n=t.getDay();return Zx((t=n>=4||0===n?Ds(t):Ds.ceil(t)).getFullYear()%1e4,e,4)}function Ab(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Zx(e/60|0,"0",2)+Zx(e%60,"0",2)}function _b(t,e){return Zx(t.getUTCDate(),e,2)}function Db(t,e){return Zx(t.getUTCHours(),e,2)}function Tb(t,e){return Zx(t.getUTCHours()%12||12,e,2)}function Fb(t,e){return Zx(1+ks.count(Us(t),t),e,3)}function Ib(t,e){return Zx(t.getUTCMilliseconds(),e,3)}function Pb(t,e){return Ib(t,e)+"000"}function jb(t,e){return Zx(t.getUTCMonth()+1,e,2)}function Bb(t,e){return Zx(t.getUTCMinutes(),e,2)}function Lb(t,e){return Zx(t.getUTCSeconds(),e,2)}function Rb(t){var e=t.getUTCDay();return 0===e?7:e}function Zb(t,e){return Zx(Ps.count(Us(t)-1,t),e,2)}function Nb(t){var e=t.getUTCDay();return e>=4||0===e?Rs(t):Rs.ceil(t)}function zb(t,e){return t=Nb(t),Zx(Rs.count(Us(t),t)+(4===Us(t).getUTCDay()),e,2)}function Ub(t){return t.getUTCDay()}function Hb(t,e){return Zx(js.count(Us(t)-1,t),e,2)}function Wb(t,e){return Zx(t.getUTCFullYear()%100,e,2)}function Vb(t,e){return Zx((t=Nb(t)).getUTCFullYear()%100,e,2)}function Gb(t,e){return Zx(t.getUTCFullYear()%1e4,e,4)}function Xb(t,e){var n=t.getUTCDay();return Zx((t=n>=4||0===n?Rs(t):Rs.ceil(t)).getUTCFullYear()%1e4,e,4)}function Yb(){return"+0000"}function qb(){return"%"}function $b(t){return+t}function Jb(t){return Math.floor(+t/1e3)}function Kb(t){return new Date(t)}function Qb(t){return t instanceof Date?+t:+new Date(+t)}function tw(t,e,n,r,i,a,o,u,s,l){var c=Ry(),f=c.invert,h=c.domain,d=l(".%L"),p=l(":%S"),g=l("%I:%M"),v=l("%I %p"),m=l("%a %d"),y=l("%b %d"),x=l("%B"),b=l("%Y");function w(t){return(s(t)<t?d:u(t)<t?p:o(t)<t?g:a(t)<t?v:r(t)<t?i(t)<t?m:y:n(t)<t?x:b)(t)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?h(Array.from(t,Qb)):h().map(Kb)},c.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?w:l(e)},c.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h(ix(n,t)):c},c.copy=function(){return By(c,tw(t,e,n,r,i,a,o,u,s,l))},c}function ew(){var t,e,n,r,i,a=0,o=1,u=Fy,s=!1;function l(e){return null==e||isNaN(e=+e)?i:u(0===n?.5:(e=(r(e)-t)*n,s?Math.max(0,Math.min(1,e)):e))}function c(t){return function(e){var n,r,i;return arguments.length?(r=(n=(0,W.Z)(e,2))[0],i=n[1],u=t(r,i),l):[u(0),u(1)]}}return l.domain=function(i){var u;return arguments.length?(u=(0,W.Z)(i,2),a=u[0],o=u[1],t=r(a=+a),e=r(o=+o),n=t===e?0:1/(e-t),l):[a,o]},l.clamp=function(t){return arguments.length?(s=!!t,l):s},l.interpolator=function(t){return arguments.length?(u=t,l):u},l.range=c(Oy.Z),l.rangeRound=c(_y),l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),l}}function nw(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function rw(){var t=rx(ew()(Fy));return t.copy=function(){return nw(t,rw())},Ny.apply(t,arguments)}function iw(){var t=gx(ew());return t.copy=function(){return nw(t,iw()).exponent(t.exponent())},Ny.apply(t,arguments)}function aw(t,e){void 0===e&&(e=t,t=Oy.Z);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}function ow(){var t,e,n,r,i,a,o,u=0,s=.5,l=1,c=1,f=Fy,h=!1;function d(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(c*t<c*e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i,a;return arguments.length?(r=(n=(0,W.Z)(e,3))[0],i=n[1],a=n[2],f=aw(t,[r,i,a]),d):[f(0),f(.5),f(1)]}}return d.domain=function(o){var f;return arguments.length?(f=(0,W.Z)(o,3),u=f[0],s=f[1],l=f[2],t=a(u=+u),e=a(s=+s),n=a(l=+l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d):[u,s,l]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(f=t,d):f},d.range=p(Oy.Z),d.rangeRound=p(_y),d.unknown=function(t){return arguments.length?(o=t,d):o},function(o){return a=o,t=o(u),e=o(s),n=o(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d}}function uw(){var t=gx(ow());return t.copy=function(){return nw(t,uw()).exponent(t.exponent())},Ny.apply(t,arguments)}function sw(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return lw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lw(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function lw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cw(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,pa.Z)(t)););return t}function fw(){return fw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=cw(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},fw.apply(this,arguments)}!function(t){Fx=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,s=t.shortMonths,l=zx(i),c=Ux(i),f=zx(a),h=Ux(a),d=zx(o),p=Ux(o),g=zx(u),v=Ux(u),m=zx(s),y=Ux(s),x={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:lb,e:lb,f:pb,g:Eb,G:Ob,H:cb,I:fb,j:hb,L:db,m:gb,M:vb,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:$b,s:Jb,S:mb,u:yb,U:xb,V:wb,w:Sb,W:kb,x:null,X:null,y:Cb,Y:Mb,Z:Ab,"%":qb},b={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:_b,e:_b,f:Pb,g:Vb,G:Xb,H:Db,I:Tb,j:Fb,L:Ib,m:jb,M:Bb,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:$b,s:Jb,S:Lb,u:Rb,U:Zb,V:zb,w:Ub,W:Hb,x:null,X:null,y:Wb,Y:Gb,Z:Yb,"%":qb},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return C(t,e,n,r)},d:Qx,e:Qx,f:ab,g:qx,G:Yx,H:eb,I:eb,j:tb,L:ib,m:Kx,M:nb,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Jx,Q:ub,s:sb,S:rb,u:Wx,U:Vx,V:Gx,w:Hx,W:Xx,x:function(t,e,r){return C(t,n,e,r)},X:function(t,e,n){return C(t,r,e,n)},y:qx,Y:Yx,Z:$x,"%":ob};function S(t,e){return function(n){var r,i,a,o=[],u=-1,s=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===t.charCodeAt(u)&&(o.push(t.slice(s,u)),null!=(i=jx[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(t.slice(s,u)),o.join("")}}function k(t,e){return function(n){var r,i,a=Tx(1900,void 0,1);if(C(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Dx(Tx(a.y,0,1))).getUTCDay(),r=i>4||0===i?js.ceil(r):js(r),r=ks.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=_x(Tx(a.y,0,1))).getDay(),r=i>4||0===i?Os.ceil(r):Os(r),r=Ss.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Dx(Tx(a.y,0,1)).getUTCDay():_x(Tx(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Dx(a)):_x(a)}}function C(t,e,n,r){for(var i,a,o=0,u=e.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=w[i in jx?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=S(n,x),x.X=S(r,x),x.c=S(e,x),b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),{format:function(t){var e=S(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=S(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}(t),Ix=Fx.format,Fx.parse,Px=Fx.utcFormat,Fx.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var hw=n(89611);var dw=n(78814);function pw(t,e,n){return pw=(0,dw.Z)()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&(0,hw.Z)(i,n.prototype),i},pw.apply(null,arguments)}function gw(t){var e="function"==typeof Map?new Map:void 0;return gw=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return pw(t,arguments,(0,pa.Z)(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,hw.Z)(r,t)},gw(t)}function vw(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return mw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mw(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function mw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var xw=function(t){(0,Q.Z)(n,t);var e=yw(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cw;if((0,J.Z)(this,n),r=e.call(this),Object.defineProperties((0,ha.Z)(r),{_intern:{value:new Map},_key:{value:i}}),null!=t){var a,o=vw(t);try{for(o.s();!(a=o.n()).done;){var u=(0,W.Z)(a.value,2),s=u[0],l=u[1];r.set(s,l)}}catch(c){o.e(c)}finally{o.f()}}return r}return(0,K.Z)(n,[{key:"get",value:function(t){return fw((0,pa.Z)(n.prototype),"get",this).call(this,ww(this,t))}},{key:"has",value:function(t){return fw((0,pa.Z)(n.prototype),"has",this).call(this,ww(this,t))}},{key:"set",value:function(t,e){return fw((0,pa.Z)(n.prototype),"set",this).call(this,Sw(this,t),e)}},{key:"delete",value:function(t){return fw((0,pa.Z)(n.prototype),"delete",this).call(this,kw(this,t))}}]),n}(gw(Map)),bw=function(t){(0,Q.Z)(n,t);var e=yw(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cw;if((0,J.Z)(this,n),r=e.call(this),Object.defineProperties((0,ha.Z)(r),{_intern:{value:new Map},_key:{value:i}}),null!=t){var a,o=vw(t);try{for(o.s();!(a=o.n()).done;){var u=a.value;r.add(u)}}catch(s){o.e(s)}finally{o.f()}}return r}return(0,K.Z)(n,[{key:"has",value:function(t){return fw((0,pa.Z)(n.prototype),"has",this).call(this,ww(this,t))}},{key:"add",value:function(t){return fw((0,pa.Z)(n.prototype),"add",this).call(this,Sw(this,t))}},{key:"delete",value:function(t){return fw((0,pa.Z)(n.prototype),"delete",this).call(this,kw(this,t))}}]),n}(gw(Set));function ww(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)?n.get(r):e}function Sw(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function kw(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function Cw(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Ew(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Mw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mw(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Mw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ow=Symbol("implicit");function Aw(){var t=new xw,e=[],n=[],r=Ow;function i(i){var a=t.get(i);if(void 0===a){if(r!==Ow)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new xw;var r,a=Ew(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;t.has(o)||t.set(o,e.push(o)-1)}}catch(u){a.e(u)}finally{a.f()}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Aw(e,n).unknown(r)},Zy.apply(i,arguments),i}var _w=n(79739),Dw=n(49763),Tw=n(52283),Fw=n(66276);function Iw(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Pw=n(4301);function jw(t,e){var n=(0,Pw.wx)(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}var Bw,Lw=n(3256),Rw=n(51861),Zw=n(95147),Nw=180/Math.PI,zw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Uw(t,e,n,r,i,a){var o,u,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),t*r<e*n&&(t=-t,e=-e,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Nw,skewX:Math.atan(s)*Nw,scaleX:o,scaleY:u}}function Hw(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var u=[],s=[];return a=t(a),o=t(o),function(t,r,i,a,o,u){if(t!==i||r!==a){var s=o.push("translate(",null,e,null,n);u.push({i:s-4,x:(0,Ay.Z)(t,i)},{i:s-2,x:(0,Ay.Z)(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,u,s),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:(0,Ay.Z)(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,u,s),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:(0,Ay.Z)(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,u,s),function(t,e,n,r,a,o){if(t!==n||e!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:(0,Ay.Z)(t,n)},{i:u-2,x:(0,Ay.Z)(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,u,s),a=o=null,function(t){for(var e,n=-1,r=s.length;++n<r;)u[(e=s[n]).i]=e.x(t);return u.join("")}}}var Ww=Hw((function(t){var e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?zw:Uw(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Vw=Hw((function(t){return null==t?zw:(Bw||(Bw=document.createElementNS("http://www.w3.org/2000/svg","g")),Bw.setAttribute("transform",t),(t=Bw.transform.baseVal.consolidate())?Uw((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):zw)}),", ",")",")");function Gw(t){return((t=Math.exp(t))+1/t)/2}var Xw=function t(e,n,r){function i(t,i){var a,o,u=t[0],s=t[1],l=t[2],c=i[0],f=i[1],h=i[2],d=c-u,p=f-s,g=d*d+p*p;if(g<1e-12)o=Math.log(h/l)/e,a=function(t){return[u+t*d,s+t*p,l*Math.exp(e*t*o)]};else{var v=Math.sqrt(g),m=(h*h-l*l+r*g)/(2*l*n*v),y=(h*h-l*l-r*g)/(2*h*n*v),x=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(y*y+1)-y);o=(b-x)/e,a=function(t){var r=t*o,i=Gw(x),a=l/(n*v)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*r+x)-function(t){return((t=Math.exp(t))-1/t)/2}(x));return[u+a*d,s+a*p,l*i/Gw(e*r+x)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4),Yw=n(65713),qw=n(34627);function $w(t){return function(e,n){var r=t((e=(0,qw.Ym)(e)).h,(n=(0,qw.Ym)(n)).h),i=(0,Pw.ZP)(e.s,n.s),a=(0,Pw.ZP)(e.l,n.l),o=(0,Pw.ZP)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var Jw=$w(Pw.wx),Kw=$w(Pw.ZP),Qw=n(2077),tS=Math.PI/180,eS=180/Math.PI,nS=.96422,rS=.82521,iS=4/29,aS=6/29,oS=3*aS*aS;function uS(t){if(t instanceof lS)return new lS(t.l,t.a,t.b,t.opacity);if(t instanceof vS)return mS(t);t instanceof qw.Ss||(t=(0,qw.SU)(t));var e,n,r=dS(t.r),i=dS(t.g),a=dS(t.b),o=cS((.2225045*r+.7168786*i+.0606169*a)/1);return r===i&&i===a?e=n=o:(e=cS((.4360747*r+.3850649*i+.1430804*a)/nS),n=cS((.0139322*r+.0971045*i+.7141733*a)/rS)),new lS(116*o-16,500*(e-o),200*(o-n),t.opacity)}function sS(t,e,n,r){return 1===arguments.length?uS(t):new lS(t,e,n,null==r?1:r)}function lS(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function cS(t){return t>.008856451679035631?Math.pow(t,1/3):t/oS+iS}function fS(t){return t>aS?t*t*t:oS*(t-iS)}function hS(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function dS(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pS(t){if(t instanceof vS)return new vS(t.h,t.c,t.l,t.opacity);if(t instanceof lS||(t=uS(t)),0===t.a&&0===t.b)return new vS(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*eS;return new vS(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function gS(t,e,n,r){return 1===arguments.length?pS(t):new vS(t,e,n,null==r?1:r)}function vS(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function mS(t){if(isNaN(t.h))return new lS(t.l,0,0,t.opacity);var e=t.h*tS;return new lS(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function yS(t,e){var n=(0,Pw.ZP)((t=sS(t)).l,(e=sS(e)).l),r=(0,Pw.ZP)(t.a,e.a),i=(0,Pw.ZP)(t.b,e.b),a=(0,Pw.ZP)(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function xS(t){return function(e,n){var r=t((e=gS(e)).h,(n=gS(n)).h),i=(0,Pw.ZP)(e.c,n.c),a=(0,Pw.ZP)(e.l,n.l),o=(0,Pw.ZP)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}(0,Qw.Z)(lS,sS,(0,Qw.l)(qw.Il,{brighter:function(t){return new lS(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new lS(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=nS*fS(e),t=1*fS(t),n=rS*fS(n),new qw.Ss(hS(3.1338561*e-1.6168667*t-.4906146*n),hS(-.9787684*e+1.9161415*t+.033454*n),hS(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),(0,Qw.Z)(vS,gS,(0,Qw.l)(qw.Il,{brighter:function(t){return new vS(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new vS(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return mS(this).rgb()}}));var bS=xS(Pw.wx),wS=xS(Pw.ZP),SS=-.14861,kS=1.78277,CS=-.29227,ES=-.90649,MS=1.97294,OS=MS*ES,AS=MS*kS,_S=kS*CS-ES*SS;function DS(t){if(t instanceof FS)return new FS(t.h,t.s,t.l,t.opacity);t instanceof qw.Ss||(t=(0,qw.SU)(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(_S*r+OS*e-AS*n)/(_S+OS-AS),a=r-i,o=(MS*(n-i)-CS*a)/ES,u=Math.sqrt(o*o+a*a)/(MS*i*(1-i)),s=u?Math.atan2(o,a)*eS-120:NaN;return new FS(s<0?s+360:s,u,i,t.opacity)}function TS(t,e,n,r){return 1===arguments.length?DS(t):new FS(t,e,n,null==r?1:r)}function FS(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function IS(t){return function e(n){function r(e,r){var i=t((e=TS(e)).h,(r=TS(r)).h),a=(0,Pw.ZP)(e.s,r.s),o=(0,Pw.ZP)(e.l,r.l),u=(0,Pw.ZP)(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=u(t),e+""}}return n=+n,r.gamma=e,r}(1)}(0,Qw.Z)(FS,TS,(0,Qw.l)(qw.Il,{brighter:function(t){return t=null==t?qw.J5:Math.pow(qw.J5,t),new FS(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?qw.xV:Math.pow(qw.xV,t),new FS(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*tS,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new qw.Ss(255*(e+n*(SS*r+kS*i)),255*(e+n*(CS*r+ES*i)),255*(e+n*(MS*r)),this.opacity)}}));var PS,jS,BS=IS(Pw.wx),LS=IS(Pw.ZP);function RS(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function ZS(t,e,n){var r=t-e+2*n;return t?r>0?r:1:0}var NS="linear",zS="log",US="pow",HS="sqrt",WS="symlog",VS="time",GS="utc",XS="sequential",YS="diverging",qS="quantile",$S="quantize",JS="threshold",KS="ordinal",QS="point",tk="band",ek="bin-ordinal",nk="continuous",rk="discrete",ik="discretizing",ak="interpolating",ok="temporal";function uk(){var t,e,n=Aw().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,u=0,s=0,l=.5;function c(){var n=r().length,c=a[1]<a[0],f=a[1-c],h=ZS(n,u,s),d=a[c-0];t=(f-d)/(h||1),o&&(t=Math.floor(t)),d+=(f-d-t*(n-u))*l,e=t*(1-u),o&&(d=Math.round(d),e=Math.round(e));var p=qp(n).map((function(e){return d+t*e}));return i(c?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),c()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],c()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,c()):o},n.padding=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),u=s,c()):u},n.paddingInner=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},n.paddingOuter=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),c()):s},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c()):l},n.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var n,o,u,s=a[1]<a[0],l=s?i().reverse():i(),c=l.length-1,f=+t[0],h=+t[1];if(f==f&&h==h&&(h<f&&(u=f,f=h,h=u),!(h<l[0]||f>a[1-s])))return n=Math.max(0,Cy(l,f)-1),o=f===h?n:Cy(l,h)-1,f-l[n]>e+1e-10&&++n,s&&(u=n,n=c-o,o=c-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(t){var e=n.invertRange([t,t]);return e?e[0]:e},n.copy=function(){return uk().domain(r()).range(a).round(o).paddingInner(u).paddingOuter(s).align(l)},c()}function sk(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return sk(e())},t}var lk=Array.prototype.map;function ck(t){return lk.call(t,Eo)}var fk=Array.prototype.slice;var hk={};function dk(t,e,n){var r=function(){var n=e();return n.invertRange||(n.invertRange=n.invert?function(t){return function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}}(n):n.invertExtent?function(t){return function(e){var n,r,i,a,o=t.range(),u=e[0],s=e[1],l=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(l<0&&(l=i),n=i);if(!(l<0))return u=t.invertExtent(o[l]),s=t.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=t,n};return r.metadata=Ou(Ho(n)),r}function pk(t,e,n){return arguments.length>1?(hk[t]=dk(t,e,n),this):gk(t)?hk[t]:void 0}function gk(t){return ru(hk,t)}function vk(t,e){var n=hk[t];return n&&n.metadata[e]}function mk(t){return vk(t,nk)}function yk(t){return vk(t,rk)}function xk(t){return vk(t,ik)}function bk(t){return vk(t,zS)}function wk(t){return vk(t,ak)}function Sk(t){return vk(t,qS)}pk("identity",(function t(e){var n;function r(t){return null==t||isNaN(t=+t)?n:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,Dy),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,Dy):[0,1],rx(r)})),pk(NS,(function t(){var e=Ry();return e.copy=function(){return By(e,t())},Zy.apply(e,arguments),rx(e)}),nk),pk(zS,(function t(){var e=fx(Ly()).domain([1,10]);return e.copy=function(){return By(e,t()).base(e.base())},Zy.apply(e,arguments),e}),[nk,zS]),pk(US,vx,nk),pk(HS,(function(){return vx.apply(null,arguments).exponent(.5)}),nk),pk(WS,(function t(){var e=xx(Ly());return e.copy=function(){return By(e,t()).constant(e.constant())},Zy.apply(e,arguments)}),nk),pk(VS,(function(){return Zy.apply(tw(Ox,Ax,zs,Hs,Ms,Ss,Vs,Xs,qs,Ix).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[nk,ok]),pk(GS,(function(){return Zy.apply(tw(kx,Cx,Us,Ws,Ps,ks,Gs,Ys,qs,Px).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[nk,ok]),pk(XS,rw,[nk,ak]),pk("".concat(XS,"-").concat(NS),rw,[nk,ak]),pk("".concat(XS,"-").concat(zS),(function t(){var e=fx(ew()).domain([1,10]);return e.copy=function(){return nw(e,t()).base(e.base())},Ny.apply(e,arguments)}),[nk,ak,zS]),pk("".concat(XS,"-").concat(US),iw,[nk,ak]),pk("".concat(XS,"-").concat(HS),(function(){return iw.apply(null,arguments).exponent(.5)}),[nk,ak]),pk("".concat(XS,"-").concat(WS),(function t(){var e=xx(ew());return e.copy=function(){return nw(e,t()).constant(e.constant())},Ny.apply(e,arguments)}),[nk,ak]),pk("".concat(YS,"-").concat(NS),(function t(){var e=rx(ow()(Fy));return e.copy=function(){return nw(e,t())},Ny.apply(e,arguments)}),[nk,ak]),pk("".concat(YS,"-").concat(zS),(function t(){var e=fx(ow()).domain([.1,1,10]);return e.copy=function(){return nw(e,t()).base(e.base())},Ny.apply(e,arguments)}),[nk,ak,zS]),pk("".concat(YS,"-").concat(US),uw,[nk,ak]),pk("".concat(YS,"-").concat(HS),(function(){return uw.apply(null,arguments).exponent(.5)}),[nk,ak]),pk("".concat(YS,"-").concat(WS),(function t(){var e=xx(ow());return e.copy=function(){return nw(e,t()).constant(e.constant())},Ny.apply(e,arguments)}),[nk,ak]),pk(qS,(function t(){var e,n=[],r=[],i=[];function a(){var t=0,e=Math.max(1,r.length);for(i=new Array(e-1);++t<e;)i[t-1]=Vd(n,t/e);return o}function o(t){return null==t||isNaN(t=+t)?e:r[My(i,t)]}return o.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},o.domain=function(t){if(!arguments.length)return n.slice();n=[];var e,r=sw(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;null==i||isNaN(i=+i)||n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n.sort(il),a()},o.range=function(t){return arguments.length?(r=Array.from(t),a()):r.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return i.slice()},o.copy=function(){return t().domain(n).range(r).unknown(e)},Zy.apply(o,arguments)}),[ik,qS]),pk($S,(function t(){var e,n=0,r=1,i=1,a=[.5],o=[0,1];function u(t){return null!=t&&t<=t?o[My(a,t,0,i)]:e}function s(){var t=-1;for(a=new Array(i);++t<i;)a[t]=((t+1)*r-(t-i)*n)/(i+1);return u}return u.domain=function(t){var e;return arguments.length?(e=(0,W.Z)(t,2),n=e[0],r=e[1],n=+n,r=+r,s()):[n,r]},u.range=function(t){return arguments.length?(i=(o=Array.from(t)).length-1,s()):o.slice()},u.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,a[0]]:e>=i?[a[i-1],r]:[a[e-1],a[e]]},u.unknown=function(t){return arguments.length?(e=t,u):u},u.thresholds=function(){return a.slice()},u.copy=function(){return t().domain([n,r]).range(o).unknown(e)},Zy.apply(rx(u),arguments)}),ik),pk(JS,(function t(){var e,n=[.5],r=[0,1],i=1;function a(t){return null!=t&&t<=t?r[My(n,t,0,i)]:e}return a.domain=function(t){return arguments.length?(n=Array.from(t),i=Math.min(n.length,r.length-1),a):n.slice()},a.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(n.length,r.length-1),a):r.slice()},a.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(n).range(r).unknown(e)},Zy.apply(a,arguments)}),ik),pk(ek,(function t(){var e=[],n=[];function r(t){return null==t||t!=t?void 0:n[(My(e,t)-1)%n.length]}return r.domain=function(t){return arguments.length?(e=ck(t),r):e.slice()},r.range=function(t){return arguments.length?(n=fk.call(t),r):n.slice()},r.tickFormat=function(t,n){return nx(e[0],Co(e),null==t?10:t,n)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r}),[rk,ik]),pk(KS,Aw,rk),pk(tk,uk,rk),pk(QS,(function(){return sk(uk().paddingInner(1))}),rk);var kk=["clamp","base","constant","exponent"];function Ck(t,e){var n=e[0],r=Co(e)-n;return function(e){return t(n+e*r)}}function Ek(t,e,n){return aw(Ak(e||"rgb",n),t)}function Mk(t,e){for(var n=new Array(e),r=e+1,i=0;i<e;)n[i]=t(++i/r);return n}function Ok(t,e,n){var r,i,a,o=n-e;return o&&Number.isFinite(o)?(r=(i=t.type).indexOf("-"),i=r<0?i:i.slice(r+1),a=pk(i)().domain([e,n]).range([0,1]),kk.forEach((function(e){return t[e]?a[e](t[e]()):0})),a):Jo(.5)}function Ak(t,e){var n=o[function(t){return"interpolate"+t.toLowerCase().split("-").map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("")}(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function _k(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function Dk(t,e){for(var n in t)Fk(n,e(t[n]))}var Tk={};function Fk(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(Tk[t]=e,this):Tk[t]}Dk({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},_k),Dk({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(t){return Ek(_k(t))}));var Ik="symbol",Pk=function(t){return yo(t)?t.map((function(t){return String(t)})):String(t)},jk=function(t,e){return t[1]-e[1]},Bk=function(t,e){return e[1]-t[1]};function Lk(t,e,n){var r;return hu(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),null!=n&&(e=Math.min(e,Math.floor(wu(t.domain())/n||1)))),xo(e)&&(r=e.step,e=e.interval),pu(e)&&(e=t.type===VS?Yl(e):t.type==GS?ql(e):eo("Only time and utc scales accept interval strings."),r&&(e=e.every(r))),e}function Rk(t,e,n){var r=t.range(),i=r[0],a=Co(r),o=jk;if(i>a&&(r=a,a=i,i=r,o=Bk),i=Math.floor(i),a=Math.ceil(a),e=e.map((function(e){return[e,t(e)]})).filter((function(t){return i<=t[1]&&t[1]<=a})).sort(o).map((function(t){return t[0]})),n>0&&e.length>1){for(var u=[e[0],Co(e)];e.length>n&&e.length>=3;)e=e.filter((function(t,e){return!(e%2)}));e.length<3&&(e=u)}return e}function Zk(t,e){return t.bins?Rk(t,t.bins):t.ticks?t.ticks(e):t.domain()}function Nk(t,e,n,r,i,a){var o=e.type,u=Pk;if(o===VS||i===VS)u=t.timeFormat(r);else if(o===GS||i===GS)u=t.utcFormat(r);else if(bk(o)){var s=t.formatFloat(r);if(a||e.bins)u=s;else{var l=zk(e,n,!1);u=function(t){return l(t)?s(t):""}}}else if(e.tickFormat){var c=e.domain();u=t.formatSpan(c[0],c[c.length-1],n,r)}else r&&(u=t.format(r));return u}function zk(t,e,n){var r=Zk(t,e),i=t.base(),a=Math.log(i),o=Math.max(1,i*e/r.length),u=function(t){var e=t/Math.pow(i,Math.round(Math.log(t)/a));return e*i<i-.5&&(e*=i),e<=o};return n?r.filter(u):u}var Uk=(PS={},(0,Z.Z)(PS,qS,"quantiles"),(0,Z.Z)(PS,$S,"thresholds"),(0,Z.Z)(PS,JS,"domain"),PS),Hk=(jS={},(0,Z.Z)(jS,qS,"quantiles"),(0,Z.Z)(jS,$S,"domain"),jS);function Wk(t,e){return t.bins?function(t){var e=t.slice(0,-1);return e.max=Co(t),e}(t.bins):t.type===zS?zk(t,e,!0):Uk[t.type]?function(t){var e=[-1/0].concat(t);return e.max=1/0,e}(t[Uk[t.type]]()):Zk(t,e)}function Vk(t,e,n,r,i,a,o){var u=Hk[e.type]&&a!==VS&&a!==GS?function(t,e,n){var r,i=e[Hk[e.type]](),a=i.length,o=a>1?i[1]-i[0]:i[0];for(r=1;r<a;++r)o=Math.min(o,i[r]-i[r-1]);return t.formatSpan(0,o,30,n)}(t,e,i):Nk(t,e,n,i,a,o);return r===Ik&&function(t){return Uk[t.type]||t.bins}(e)?Gk(u):"discrete"===r?Yk(u):qk(u)}var Gk=function(t){return function(e,n,r){var i=Xk(r[n+1],Xk(r.max,1/0)),a=$k(e,t),o=$k(i,t);return a&&o?a+" – "+o:o?"< "+o:"≥ "+a}},Xk=function(t,e){return null!=t?t:e},Yk=function(t){return function(e,n){return n?t(e):null}},qk=function(t){return function(e){return t(e)}},$k=function(t,e){return Number.isFinite(t)?e(t):null};function Jk(t,e,n,r){var i=r||e.type;return pu(n)&&function(t){return vk(t,ok)}(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==VS?n||i!==GS?Vk(t,e,5,null,n,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}function Kk(t,e,n){n=n||{};var r=Math.max(3,n.maxlen||7),i=Jk(t,e,n.format,n.formatType);if(xk(e.type)){var a=Wk(e).slice(1).map(i),o=a.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(a.join(", "))}if(yk(e.type)){var u=e.domain(),s=u.length,l=s>r?u.slice(0,r-2).map(i).join(", ")+", ending with "+u.slice(-1).map(i):u.map(i).join(", ");return"".concat(s," value").concat(1===s?"":"s",": ").concat(l)}var c=e.domain();return"values from ".concat(i(c[0])," to ").concat(i(Co(c)))}function Qk(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return tC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tC(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function tC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var eC=0;var nC="p_";function rC(t){return t&&t.gradient}function iC(t,e,n){var r=t.gradient,i=t.id,a="radial"===r?nC:"";return i||(i=t.id="gradient_"+eC++,"radial"===r?(t.x1=aC(t.x1,.5),t.y1=aC(t.y1,.5),t.r1=aC(t.r1,0),t.x2=aC(t.x2,.5),t.y2=aC(t.y2,.5),t.r2=aC(t.r2,.5),a=nC):(t.x1=aC(t.x1,0),t.y1=aC(t.y1,0),t.x2=aC(t.x2,1),t.y2=aC(t.y2,0))),e[i]=t,"url("+(n||"")+"#"+a+i+")"}function aC(t,e){return null!=t?t:e}function oC(t,e){var n,r=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}}var uC={basis:{curve:function(t){return new Ev(t)}},"basis-closed":{curve:function(t){return new Ov(t)}},"basis-open":{curve:function(t){return new Av(t)}},bundle:{curve:Dv,tension:"beta",value:.85},cardinal:{curve:Iv,tension:"tension",value:0},"cardinal-open":{curve:jv,tension:"tension",value:0},"cardinal-closed":{curve:Lv,tension:"tension",value:0},"catmull-rom":{curve:Qv,tension:"alpha",value:.5},"catmull-rom-closed":{curve:em,tension:"alpha",value:.5},"catmull-rom-open":{curve:mm,tension:"alpha",value:.5},linear:{curve:xm},"linear-closed":{curve:function(t){return new bm(t)}},monotone:{horizontal:function(t){return new Mm(t)},vertical:function(t){return new Em(t)}},natural:{curve:function(t){return new Am(t)}},step:{curve:function(t){return new Dm(t,.5)}},"step-after":{curve:function(t){return new Dm(t,1)}},"step-before":{curve:function(t){return new Dm(t,0)}}};function sC(t,e,n){var r=ru(uC,t)&&uC[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var lC={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},cC=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,fC=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,hC=/^((\s+,?\s*)|(,\s*))/,dC=/^[01]/;function pC(t){var e=[];return(t.match(cC)||[]).forEach((function(t){var n=t[0],r=n.toLowerCase(),i=lC[r],a=function(t,e,n){for(var r=[],i=0;e&&i<n.length;)for(var a=0;a<e;++a){var o="a"!==t||3!==a&&4!==a?fC:dC,u=n.slice(i).match(o);if(null===u)throw Error("Invalid SVG path, incorrect parameter type");i+=u[0].length,r.push(+u[0]);var s=n.slice(i).match(hC);null!==s&&(i+=s[0].length)}return r}(r,i,t.slice(1).trim()),o=a.length;if(o<i||o&&o%i!=0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([n].concat((0,X.Z)(a.slice(0,i)))),o!==i){"m"===r&&(n="M"===n?"L":"l");for(var u=i;u<o;u+=i)e.push([n].concat((0,X.Z)(a.slice(u,u+i))))}})),e}var gC=Math.PI/180,vC=Math.PI/2,mC=2*Math.PI,yC=Math.sqrt(3)/2,xC={},bC={},wC=[].join;function SC(t){var e=wC.call(t);if(bC[e])return bC[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],l=t[7],c=l*o,f=-s*u,h=s*o,d=l*u,p=Math.cos(i),g=Math.sin(i),v=Math.cos(a),m=Math.sin(a),y=.5*(a-i),x=Math.sin(.5*y),b=8/3*x*x/Math.sin(y),w=n+p-b*g,S=r+g+b*p,k=n+v,C=r+m,E=k+b*m,M=C-b*v;return bC[e]=[c*w+f*S,h*w+d*S,c*E+f*M,h*E+d*M,c*k+f*C,h*k+d*C]}var kC=["l",0,0,0,0,0,0,0];function CC(t,e,n){var r=kC[0]=t[0];if("a"===r||"A"===r)kC[1]=e*t[1],kC[2]=n*t[2],kC[3]=t[3],kC[4]=t[4],kC[5]=t[5],kC[6]=e*t[6],kC[7]=n*t[7];else if("h"===r||"H"===r)kC[1]=e*t[1];else if("v"===r||"V"===r)kC[1]=n*t[1];else for(var i=1,a=t.length;i<a;++i)kC[i]=(i%2==1?e:n)*t[i];return kC}function EC(t,e,n,r,i,a){var o,u,s,l,c,f=null,h=0,d=0,p=0,g=0,v=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==a&&(a=i),t.beginPath&&t.beginPath();for(var y=0,x=e.length;y<x;++y){switch(o=e[y],1===i&&1===a||(o=CC(o,i,a)),o[0]){case"l":h+=o[1],d+=o[2],t.lineTo(h+n,d+r);break;case"L":h=o[1],d=o[2],t.lineTo(h+n,d+r);break;case"h":h+=o[1],t.lineTo(h+n,d+r);break;case"H":h=o[1],t.lineTo(h+n,d+r);break;case"v":d+=o[1],t.lineTo(h+n,d+r);break;case"V":d=o[1],t.lineTo(h+n,d+r);break;case"m":v=h+=o[1],m=d+=o[2],t.moveTo(h+n,d+r);break;case"M":v=h=o[1],m=d=o[2],t.moveTo(h+n,d+r);break;case"c":u=h+o[5],s=d+o[6],p=h+o[3],g=d+o[4],t.bezierCurveTo(h+o[1]+n,d+o[2]+r,p+n,g+r,u+n,s+r),h=u,d=s;break;case"C":h=o[5],d=o[6],p=o[3],g=o[4],t.bezierCurveTo(o[1]+n,o[2]+r,p+n,g+r,h+n,d+r);break;case"s":u=h+o[3],s=d+o[4],p=2*h-p,g=2*d-g,t.bezierCurveTo(p+n,g+r,h+o[1]+n,d+o[2]+r,u+n,s+r),p=h+o[1],g=d+o[2],h=u,d=s;break;case"S":u=o[3],s=o[4],p=2*h-p,g=2*d-g,t.bezierCurveTo(p+n,g+r,o[1]+n,o[2]+r,u+n,s+r),h=u,d=s,p=o[1],g=o[2];break;case"q":u=h+o[3],s=d+o[4],p=h+o[1],g=d+o[2],t.quadraticCurveTo(p+n,g+r,u+n,s+r),h=u,d=s;break;case"Q":u=o[3],s=o[4],t.quadraticCurveTo(o[1]+n,o[2]+r,u+n,s+r),h=u,d=s,p=o[1],g=o[2];break;case"t":u=h+o[1],s=d+o[2],null===f[0].match(/[QqTt]/)?(p=h,g=d):"t"===f[0]?(p=2*h-l,g=2*d-c):"q"===f[0]&&(p=2*h-p,g=2*d-g),l=p,c=g,t.quadraticCurveTo(p+n,g+r,u+n,s+r),d=s,p=(h=u)+o[1],g=d+o[2];break;case"T":u=o[1],s=o[2],p=2*h-p,g=2*d-g,t.quadraticCurveTo(p+n,g+r,u+n,s+r),h=u,d=s;break;case"a":MC(t,h+n,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+h+n,o[7]+d+r]),h+=o[6],d+=o[7];break;case"A":MC(t,h+n,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),h=o[6],d=o[7];break;case"z":case"Z":h=v,d=m,t.closePath()}f=o}}function MC(t,e,n,r){for(var i=function(t,e,n,r,i,a,o,u,s){var l=wC.call(arguments);if(xC[l])return xC[l];var c=o*gC,f=Math.sin(c),h=Math.cos(c),d=h*(u-t)*.5+f*(s-e)*.5,p=h*(s-e)*.5-f*(u-t)*.5,g=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);g>1&&(n*=g=Math.sqrt(g),r*=g);var v=h/n,m=f/n,y=-f/r,x=h/r,b=v*u+m*s,w=y*u+x*s,S=v*t+m*e,k=y*t+x*e,C=(S-b)*(S-b)+(k-w)*(k-w),E=1/C-.25;E<0&&(E=0);var M=Math.sqrt(E);a==i&&(M=-M);var O=.5*(b+S)-M*(k-w),A=.5*(w+k)+M*(S-b),_=Math.atan2(w-A,b-O),D=Math.atan2(k-A,S-O),T=D-_;T<0&&1===a?T+=mC:T>0&&0===a&&(T-=mC);for(var F=Math.ceil(Math.abs(T/(vC+.001))),I=[],P=0;P<F;++P){var j=_+P*T/F,B=_+(P+1)*T/F;I[P]=[O,A,j,B,n,r,f,h]}return xC[l]=I}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),a=0;a<i.length;++a){var o=SC(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var OC=.5773502691896257,AC={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,mC)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,a=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-n),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=yC*n,i=r-n*OC,a=n/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=yC*n,i=r-n*OC;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=yC*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=yC*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=yC*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=yC*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function _C(t){return ru(AC,t)?AC[t]:function(t){if(!ru(DC,t)){var e=pC(t);DC[t]={draw:function(t,n){EC(t,e,0,0,Math.sqrt(n)/2)}}}return DC[t]}(t)}var DC={};var TC=.448084975506;function FC(t){return t.x}function IC(t){return t.y}function PC(t){return t.width}function jC(t){return t.height}function BC(t){return"function"==typeof t?t:function(){return+t}}function LC(t,e,n){return Math.max(e,Math.min(t,n))}function RC(){var t=FC,e=IC,n=PC,r=jC,i=BC(0),a=i,o=i,u=i,s=null;function l(l,c,f){var h,d=null!=c?c:+t.call(this,l),p=null!=f?f:+e.call(this,l),g=+n.call(this,l),v=+r.call(this,l),m=Math.min(g,v)/2,y=LC(+i.call(this,l),0,m),x=LC(+a.call(this,l),0,m),b=LC(+o.call(this,l),0,m),w=LC(+u.call(this,l),0,m);if(s||(s=h=Zm()),y<=0&&x<=0&&b<=0&&w<=0)s.rect(d,p,g,v);else{var S=d+g,k=p+v;s.moveTo(d+y,p),s.lineTo(S-x,p),s.bezierCurveTo(S-TC*x,p,S,p+TC*x,S,p+x),s.lineTo(S,k-w),s.bezierCurveTo(S,k-TC*w,S-TC*w,k,S-w,k),s.lineTo(d+b,k),s.bezierCurveTo(d+TC*b,k,d,k-TC*b,d,k-b),s.lineTo(d,p+y),s.bezierCurveTo(d,p+TC*y,d+TC*y,p,d+y,p),s.closePath()}if(h)return s=null,h+""||null}return l.x=function(e){return arguments.length?(t=BC(e),l):t},l.y=function(t){return arguments.length?(e=BC(t),l):e},l.width=function(t){return arguments.length?(n=BC(t),l):n},l.height=function(t){return arguments.length?(r=BC(t),l):r},l.cornerRadius=function(t,e,n,r){return arguments.length?(i=BC(t),a=null!=e?BC(e):i,u=null!=n?BC(n):i,o=null!=r?BC(r):a,l):i},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l}function ZC(){var t,e,n,r,i,a,o,u,s=null;function l(t,e,n){var r=n/2;if(i){var l=o-e,c=t-a;if(l||c){var f=Math.sqrt(l*l+c*c),h=(l/=f)*u,d=(c/=f)*u,p=Math.atan2(c,l);s.moveTo(a-h,o-d),s.lineTo(t-l*r,e-c*r),s.arc(t,e,r,p-Math.PI,p),s.lineTo(a+h,o+d),s.arc(a,o,u,p,p+Math.PI)}else s.arc(t,e,r,0,mC);s.closePath()}else i=1;a=t,o=e,u=r}function c(a){var o,u,c,f=a.length,h=!1;for(null==s&&(s=c=Zm()),o=0;o<=f;++o)!(o<f&&r(u=a[o],o,a))===h&&(h=!h)&&(i=0),h&&l(+t(u,o,a),+e(u,o,a),+n(u,o,a));if(c)return s=null,c+""||null}return c.x=function(e){return arguments.length?(t=e,c):t},c.y=function(t){return arguments.length?(e=t,c):e},c.size=function(t){return arguments.length?(n=t,c):n},c.defined=function(t){return arguments.length?(r=t,c):r},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}function NC(t,e){return null!=t?t:e}var zC=function(t){return t.x||0},UC=function(t){return t.y||0},HC=function(t){return!(!1===t.defined)},WC=function(){var t=zm,e=Um,n=Tm(0),r=null,i=Hm,a=Wm,o=Vm,u=null,s=Nm(l);function l(){var l,c,f=+t.apply(this,arguments),h=+e.apply(this,arguments),d=i.apply(this,arguments)-Xv,p=a.apply(this,arguments)-Xv,g=Rv(p-d),v=p>d;if(u||(u=l=s()),h<f&&(c=h,h=f,f=c),h>Vv)if(g>Yv-Vv)u.moveTo(h*Nv(d),h*Hv(d)),u.arc(0,0,h,d,p,!v),f>Vv&&(u.moveTo(f*Nv(p),f*Hv(p)),u.arc(0,0,f,p,d,v));else{var m,y,x=d,b=p,w=d,S=p,k=g,C=g,E=o.apply(this,arguments)/2,M=E>Vv&&(r?+r.apply(this,arguments):Wv(f*f+h*h)),O=Uv(Rv(h-f)/2,+n.apply(this,arguments)),A=O,_=O;if(M>Vv){var D=$v(M/f*Hv(E)),T=$v(M/h*Hv(E));(k-=2*D)>Vv?(w+=D*=v?1:-1,S-=D):(k=0,w=S=(d+p)/2),(C-=2*T)>Vv?(x+=T*=v?1:-1,b-=T):(C=0,x=b=(d+p)/2)}var F=h*Nv(x),I=h*Hv(x),P=f*Nv(S),j=f*Hv(S);if(O>Vv){var B,L=h*Nv(b),R=h*Hv(b),Z=f*Nv(w),N=f*Hv(w);if(g<Gv)if(B=Gm(F,I,Z,N,L,R,P,j)){var z=F-B[0],U=I-B[1],H=L-B[0],W=R-B[1],V=1/Hv(qv((z*H+U*W)/(Wv(z*z+U*U)*Wv(H*H+W*W)))/2),G=Wv(B[0]*B[0]+B[1]*B[1]);A=Uv(O,(f-G)/(V-1)),_=Uv(O,(h-G)/(V+1))}else A=_=0}C>Vv?_>Vv?(m=Xm(Z,N,F,I,h,_,v),y=Xm(L,R,P,j,h,_,v),u.moveTo(m.cx+m.x01,m.cy+m.y01),_<O?u.arc(m.cx,m.cy,_,Zv(m.y01,m.x01),Zv(y.y01,y.x01),!v):(u.arc(m.cx,m.cy,_,Zv(m.y01,m.x01),Zv(m.y11,m.x11),!v),u.arc(0,0,h,Zv(m.cy+m.y11,m.cx+m.x11),Zv(y.cy+y.y11,y.cx+y.x11),!v),u.arc(y.cx,y.cy,_,Zv(y.y11,y.x11),Zv(y.y01,y.x01),!v))):(u.moveTo(F,I),u.arc(0,0,h,x,b,!v)):u.moveTo(F,I),f>Vv&&k>Vv?A>Vv?(m=Xm(P,j,L,R,f,-A,v),y=Xm(F,I,Z,N,f,-A,v),u.lineTo(m.cx+m.x01,m.cy+m.y01),A<O?u.arc(m.cx,m.cy,A,Zv(m.y01,m.x01),Zv(y.y01,y.x01),!v):(u.arc(m.cx,m.cy,A,Zv(m.y01,m.x01),Zv(m.y11,m.x11),!v),u.arc(0,0,f,Zv(m.cy+m.y11,m.cx+m.x11),Zv(y.cy+y.y11,y.cx+y.x11),v),u.arc(y.cx,y.cy,A,Zv(y.y11,y.x11),Zv(y.y01,y.x01),!v))):u.arc(0,0,f,S,w,v):u.lineTo(P,j)}else u.moveTo(0,0);if(u.closePath(),l)return u=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Gv/2;return[Nv(r)*n,Hv(r)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Tm(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Tm(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Tm(+t),l):n},l.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Tm(+t),l):r},l.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Tm(+t),l):i},l.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:Tm(+t),l):a},l.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Tm(+t),l):o},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l}().startAngle((function(t){return t.startAngle||0})).endAngle((function(t){return t.endAngle||0})).padAngle((function(t){return t.padAngle||0})).innerRadius((function(t){return t.innerRadius||0})).outerRadius((function(t){return t.outerRadius||0})).cornerRadius((function(t){return t.cornerRadius||0})),VC=Km().x(zC).y1(UC).y0((function(t){return(t.y||0)+(t.height||0)})).defined(HC),GC=Km().y(UC).x1(zC).x0((function(t){return(t.x||0)+(t.width||0)})).defined(HC),XC=Jm().x(zC).y(UC).defined(HC),YC=RC().x(zC).y(UC).width((function(t){return t.width||0})).height((function(t){return t.height||0})).cornerRadius((function(t){return NC(t.cornerRadiusTopLeft,t.cornerRadius)||0}),(function(t){return NC(t.cornerRadiusTopRight,t.cornerRadius)||0}),(function(t){return NC(t.cornerRadiusBottomRight,t.cornerRadius)||0}),(function(t){return NC(t.cornerRadiusBottomLeft,t.cornerRadius)||0})),qC=function(t,e){var n=null,r=Nm(i);function i(){var i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:Tm(t||Qm),e="function"==typeof e?e:Tm(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:Tm(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:Tm(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}().type((function(t){return _C(t.shape||"circle")})).size((function(t){return NC(t.size,64)})),$C=ZC().x(zC).y(UC).defined(HC).size((function(t){return t.size||1}));function JC(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function KC(t,e,n,r){return YC.context(t)(e,n,r)}var QC=1;function tE(){QC=1}function eE(t,e,n){var r=e.clip,i=t._defs,a=e.clip_id||(e.clip_id="clip"+QC++),o=i.clipping[a]||(i.clipping[a]={id:a});return Vo(r)?o.path=r(null):JC(n)?o.path=KC(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function nE(t){this.clear(),t&&this.union(t)}function rE(t){this.mark=t,this.bounds=this.bounds||new nE}function iE(t){rE.call(this,t),this.items=this.items||[]}function aE(t){this._pending=0,this._loader=t||Sy()}function oE(t){t._pending+=1}function uE(t){t._pending-=1}function sE(t,e,n){if(e.stroke&&0!==e.opacity&&0!==e.strokeOpacity){var r=null!=e.strokeWidth?+e.strokeWidth:1;t.expand(r+(n?function(t,e){return t.strokeJoin&&"miter"!==t.strokeJoin?0:e}(e,r):0))}return t}nE.prototype={clone:function(){return new nE(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set:function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},add:function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand:function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate:function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate:function(t,e,n){var r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(t,e,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,u=Math.cos(t),s=Math.sin(t),l=e-e*u+n*s,c=n-e*s-n*u;return[u*r-s*i+l,s*r+u*i+c,u*r-s*o+l,s*r+u*o+c,u*a-s*i+l,s*a+u*i+c,u*a-s*o+l,s*a+u*o+c]},union:function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect:function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses:function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith:function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects:function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains:function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},uu(iE,rE),aE.prototype={pending:function(){return this._pending},sanitizeURL:function(t){var e=this;return oE(e),e._loader.sanitize(t,{context:"href"}).then((function(t){return uE(e),t})).catch((function(){return uE(e),null}))},loadImage:function(t){var e=this,n=ny();return oE(e),e._loader.sanitize(t,{context:"image"}).then((function(t){var r=t.href;if(!r||!n)throw{url:r};var i=new n,a=ru(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=a&&(i.crossOrigin=a),i.onload=function(){return uE(e)},i.onerror=function(){return uE(e)},i.src=r,i})).catch((function(t){return uE(e),{complete:!1,width:0,height:0,src:t&&t.url||""}}))},ready:function(){var t=this;return new Promise((function(e){!function n(r){t.pending()?setTimeout((function(){n(!0)}),10):e(r)}(!1)}))}};var lE,cE,fE,hE,dE,pE,gE,vE,mE=mC-1e-8,yE=function(t,e){return lE.add(t,e)},xE=function(t,e){return yE(cE=t,fE=e)},bE=function(t){return yE(t,lE.y1)},wE=function(t){return yE(lE.x1,t)},SE=function(t,e){return dE*t+gE*e},kE=function(t,e){return pE*t+vE*e},CE=function(t,e){return yE(SE(t,e),kE(t,e))},EE=function(t,e){return xE(SE(t,e),kE(t,e))};function ME(t,e){return lE=t,e?(hE=e*gC,dE=vE=Math.cos(hE),pE=Math.sin(hE),gE=-pE):(dE=vE=1,hE=pE=gE=0),OE}var OE={beginPath:function(){},closePath:function(){},moveTo:EE,lineTo:EE,rect:function(t,e,n,r){hE?(CE(t+n,e),CE(t+n,e+r),CE(t,e+r),EE(t,e)):(yE(t+n,e+r),xE(t,e))},quadraticCurveTo:function(t,e,n,r){var i=SE(t,e),a=kE(t,e),o=SE(n,r),u=kE(n,r);AE(cE,i,o,bE),AE(fE,a,u,wE),xE(o,u)},bezierCurveTo:function(t,e,n,r,i,a){var o=SE(t,e),u=kE(t,e),s=SE(n,r),l=kE(n,r),c=SE(i,a),f=kE(i,a);_E(cE,o,s,c,bE),_E(fE,u,l,f,wE),xE(c,f)},arc:function(t,e,n,r,i,a){if(r+=hE,i+=hE,cE=n*Math.cos(i)+t,fE=n*Math.sin(i)+e,Math.abs(i-r)>mE)yE(t-n,e-n),yE(t+n,e+n);else{var o,u,s=function(r){return yE(n*Math.cos(r)+t,n*Math.sin(r)+e)};if(s(r),s(i),i!==r)if((r%=mC)<0&&(r+=mC),(i%=mC)<0&&(i+=mC),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=mC,o=r-r%vC,u=0;u<4&&o>i;++u,o-=vC)s(o);else for(o=r-r%vC+vC,u=0;u<4&&o<i;++u,o+=vC)s(o)}}};function AE(t,e,n,r){var i=(t-e)/(t+n-2*e);0<i&&i<1&&r(t+(e-t)*i)}function _E(t,e,n,r,i){var a,o=r-t+3*e-3*n,u=t+n-2*e,s=t-e,l=0,c=0;Math.abs(o)>1e-14?(a=u*u+s*o)>=0&&(l=(-u+(a=Math.sqrt(a)))/o,c=(-u-a)/o):l=.5*s/u,0<l&&l<1&&i(DE(l,t,e,n,r)),0<c&&c<1&&i(DE(c,t,e,n,r))}function DE(t,e,n,r,i){var a=1-t,o=a*a,u=t*t;return o*a*e+3*o*t*n+3*a*u*r+u*t*i}var TE=(TE=ey(1,1))?TE.getContext("2d"):null,FE=new nE;function IE(t){return function(e,n){if(!TE)return!0;t(TE,e),FE.clear().union(e.bounds).intersect(n).round();for(var r=FE.x1,i=FE.y1,a=FE.x2,o=FE.y2,u=i;u<=o;++u)for(var s=r;s<=a;++s)if(TE.isPointInPath(s,u))return!0;return!1}}function PE(t,e){return e.contains(t.x||0,t.y||0)}function jE(t,e){var n=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return e.intersects(FE.set(n,r,n+i,r+a))}function BE(t,e){var n=t.x||0,r=t.y||0;return LE(e,n,r,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r)}function LE(t,e,n,r,i){var a,o,u,s,l=t.x1,c=t.y1,f=t.x2,h=t.y2,d=r-e,p=i-n,g=0,v=1;for(s=0;s<4;++s){if(0===s&&(a=-d,o=-(l-e)),1===s&&(a=d,o=f-e),2===s&&(a=-p,o=-(c-n)),3===s&&(a=p,o=h-n),Math.abs(a)<1e-10&&o<0)return!1;if(u=o/a,a<0){if(u>v)return!1;u>g&&(g=u)}else if(a>0){if(u<g)return!1;u<v&&(v=u)}}return!0}function RE(t,e){t.globalCompositeOperation=e.blend||"source-over"}function ZE(t,e){return null==t?e:t}function NE(t,e){for(var n=e.length,r=0;r<n;++r)t.addColorStop(e[r].offset,e[r].color);return t}function zE(t,e,n){return rC(n)?function(t,e,n){var r,i=n.width(),a=n.height();if("radial"===e.gradient)r=t.createRadialGradient(n.x1+ZE(e.x1,.5)*i,n.y1+ZE(e.y1,.5)*a,Math.max(i,a)*ZE(e.r1,0),n.x1+ZE(e.x2,.5)*i,n.y1+ZE(e.y2,.5)*a,Math.max(i,a)*ZE(e.r2,.5));else{var o=ZE(e.x1,0),u=ZE(e.y1,0),s=ZE(e.x2,1),l=ZE(e.y2,0);if(o!==s&&u!==l&&i!==a){var c=ey(Math.ceil(i),Math.ceil(a)),f=c.getContext("2d");return f.scale(i,a),f.fillStyle=NE(f.createLinearGradient(o,u,s,l),e.stops),f.fillRect(0,0,i,a),t.createPattern(c,"no-repeat")}r=t.createLinearGradient(n.x1+o*i,n.y1+u*a,n.x1+s*i,n.y1+l*a)}return NE(r,e.stops)}(t,n,e.bounds):n}function UE(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=zE(t,e,e.fill),!0)}var HE=[];function WE(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&((n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=zE(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||HE),t.lineDashOffset=e.strokeDashOffset||0),!0))}function VE(t,e){return t.zindex-e.zindex||t.index-e.index}function GE(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(VE)}function XE(t,e){var n,r,i=t.items;if(i&&i.length){var a=GE(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}}function YE(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var a=GE(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function qE(t){return function(e,n,r){XE(n,(function(n){r&&!r.intersects(n.bounds)||JE(t,e,n,n)}))}}function $E(t){return function(e,n,r){!n.items.length||r&&!r.intersects(n.bounds)||JE(t,e,n.items[0],n.items)}}function JE(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(RE(e,n),n.fill&&UE(e,n,i)&&e.fill(),n.stroke&&WE(e,n,i)&&e.stroke()))}function KE(t){return t=t||so,function(e,n,r,i,a,o){return r*=e.pixelRatio,i*=e.pixelRatio,YE(n,(function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return t(e,n,r,i,a,o)?n:void 0}))}}function QE(t,e){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,l=null==e?s.fill:e,c=s.stroke&&n.isPointInStroke;return c&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!t(n,r)&&(l&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function tM(t){return KE(QE(t))}function eM(t,e){return"translate("+t+","+e+")"}function nM(t){return"rotate("+t+")"}function rM(t){return eM(t.x||0,t.y||0)}function iM(t,e,n){function r(t,n){var r=n.x||0,i=n.y||0,a=n.angle||0;t.translate(r,i),a&&t.rotate(a*=gC),t.beginPath(),e(t,n),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",function(t){return eM(t.x||0,t.y||0)+(t.angle?" "+nM(t.angle):"")}(n)),t("d",e(null,n))},bound:function(t,n){return e(ME(t,n.angle),n),sE(t,n).translate(n.x||0,n.y||0)},draw:qE(r),pick:tM(r),isect:n||IE(r)}}var aM=iM("arc",(function(t,e){return WC.context(t)(e)}));function oM(t,e,n){function r(t,n){t.beginPath(),e(t,n)}var i=QE(r);return{type:t,tag:"path",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(ME(t),r),sE(t,r[0]))},draw:$E(r),pick:function(t,e,n,r,a,o){var u=e.items,s=e.bounds;return!u||!u.length||s&&!s.contains(a,o)?null:(n*=t.pixelRatio,r*=t.pixelRatio,i(t,u,n,r)?u[0]:null)},isect:PE,tip:n}}var uM=oM("area",(function(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?GC:VC).curve(sC(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i="horizontal"===t[0].orient?e[1]:e[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,u=1/0;--o>=0;)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i))<u&&(u=r,n=t[o]);return n}));function sM(t,e){t.beginPath(),JC(e)?KC(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function lM(t){var e=ZE(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function cM(t,e){var n=lM(e);t("d",KC(null,e,n,n))}function fM(t,e,n,r){var i=lM(e);t.beginPath(),KC(t,e,(n||0)+i,(r||0)+i)}var hM=QE(fM),dM=QE(fM,!1),pM=QE(fM,!0);var gM={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",rM(e))},bound:function(t,e){if(!e.clip&&e.items)for(var n=e.items,r=n.length,i=0;i<r;++i)t.union(n[i].bounds);return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),sE(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){var r=this;XE(e,(function(e){var i=e.x||0,a=e.y||0,o=e.strokeForeground,u=null==e.opacity?1:e.opacity;(e.stroke||e.fill)&&u&&(fM(t,e,i,a),RE(t,e),e.fill&&UE(t,e,u)&&t.fill(),e.stroke&&!o&&WE(t,e,u)&&t.stroke()),t.save(),t.translate(i,a),e.clip&&sM(t,e),n&&n.translate(-i,-a),XE(e,(function(e){r.draw(t,e,n)})),n&&n.translate(i,a),t.restore(),o&&e.stroke&&u&&(fM(t,e,i,a),RE(t,e),WE(t,e,u)&&t.stroke())}))},pick:function(t,e,n,r,i,a){var o=this;if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;var u=n*t.pixelRatio,s=r*t.pixelRatio;return YE(e,(function(l){var c,f,h,d=l.bounds;if(!d||d.contains(i,a)){f=l.x||0,h=l.y||0;var p=f+(l.width||0),g=h+(l.height||0),v=l.clip;if(!v||!(i<f||i>p||a<h||a>g)){if(t.save(),t.translate(f,h),f=i-f,h=a-h,v&&JC(l)&&!pM(t,l,u,s))return t.restore(),null;var m=l.strokeForeground,y=!1!==e.interactive;return y&&m&&l.stroke&&dM(t,l,u,s)?(t.restore(),l):(c=YE(l,(function(t){return function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,f,h)?o.pick(t,n,r,f,h):null})),!c&&y&&(l.fill||!m&&l.stroke)&&hM(t,l,u,s)&&(c=l),t.restore(),c||null)}}}))},isect:jE,content:function(t,e,n){t("clip-path",e.clip?eE(n,e,e):null)},background:function(t,e){t("class","background"),t("aria-hidden",!0),cM(t,e)},foreground:function(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?cM(t,e):t("d","")}},vM={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function mM(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then((function(e){t.image=e,t.image.url=t.url}))),n}function yM(t,e){return null!=t.width?t.width:e&&e.width?!1!==t.aspect&&t.height?t.height*e.width/e.height:e.width:0}function xM(t,e){return null!=t.height?t.height:e&&e.height?!1!==t.aspect&&t.width?t.width*e.height/e.width:e.height:0}function bM(t,e){return"center"===t?e/2:"right"===t?e:0}function wM(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var SM={type:"image",tag:"image",nested:!1,attr:function(t,e,n){var r=mM(e,n),i=yM(e,r),a=xM(e,r),o=(e.x||0)-bM(e.align,i),u=(e.y||0)-wM(e.baseline,a);t("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",vM["xmlns:xlink"],"xlink:href"),t("transform",eM(o,u)),t("width",i),t("height",a),t("preserveAspectRatio",!1===e.aspect?"none":"xMidYMid")},bound:function(t,e){var n=e.image,r=yM(e,n),i=xM(e,n),a=(e.x||0)-bM(e.align,r),o=(e.y||0)-wM(e.baseline,i);return t.set(a,o,a+r,o+i)},draw:function(t,e,n){var r=this;XE(e,(function(e){if(!n||n.intersects(e.bounds)){var i=mM(e,r),a=yM(e,i),o=xM(e,i);if(0!==a&&0!==o){var u,s,l,c,f=(e.x||0)-bM(e.align,a),h=(e.y||0)-wM(e.baseline,o);!1!==e.aspect&&(s=i.width/i.height,l=e.width/e.height,s==s&&l==l&&s!==l&&(l<s?(h+=(o-(c=a/s))/2,o=c):(f+=(a-(c=o*s))/2,a=c))),(i.complete||i.toDataURL)&&(RE(t,e),t.globalAlpha=null!=(u=e.opacity)?u:1,t.imageSmoothingEnabled=!1!==e.smooth,t.drawImage(i,f,h,a,o))}}}))},pick:KE(),isect:so,get:mM,xOffset:bM,yOffset:wM},kM=oM("line",(function(t,e){var n=e[0],r=n.interpolate||"linear";return XC.curve(sC(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i=Math.pow(t[0].strokeWidth||1,2),a=t.length;--a>=0;)if(!1!==t[a].defined&&(n=t[a].x-e[0])*n+(r=t[a].y-e[1])*r<i)return t[a];return null}));function CM(t,e){var n=e.path;if(null==n)return!0;var r=e.x||0,i=e.y||0,a=e.scaleX||1,o=e.scaleY||1,u=(e.angle||0)*gC,s=e.pathCache;s&&s.path===n||((e.pathCache=s=pC(n)).path=n),u&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(u),EC(t,s,0,0,a,o),t.rotate(-u),t.translate(-r,-i)):EC(t,s,r,i,a,o)}var EM={type:"path",tag:"path",nested:!1,attr:function(t,e){var n=e.scaleX||1,r=e.scaleY||1;1===n&&1===r||t("vector-effect","non-scaling-stroke"),t("transform",function(t){return eM(t.x||0,t.y||0)+(t.angle?" "+nM(t.angle):"")+(t.scaleX||t.scaleY?" "+function(t,e){return"scale("+t+","+e+")"}(t.scaleX||1,t.scaleY||1):"")}(e)),t("d",e.path)},bound:function(t,e){return CM(ME(t,e.angle),e)?t.set(0,0,0,0):sE(t,e,!0)},draw:qE(CM),pick:tM(CM),isect:IE(CM)};function MM(t,e){t.beginPath(),KC(t,e)}var OM={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",KC(null,e))},bound:function(t,e){var n,r;return sE(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:qE(MM),pick:tM(MM),isect:jE};function AM(t,e,n){var r,i,a,o;return!(!e.stroke||!WE(t,e,n))&&(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}var _M={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",rM(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return sE(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){XE(e,(function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&AM(t,e,r)&&(RE(t,e),t.stroke())}}))},pick:KE((function(t,e,n,r){return!!t.isPointInStroke&&(AM(t,e,1)&&t.isPointInStroke(n,r))})),isect:BE},DM=iM("shape",(function(t,e){return(e.mark.shape||e.shape).context(t)(e)})),TM=iM("symbol",(function(t,e){return qC.context(t)(e)}),PE),FM=mu(),IM={height:ZM,measureWidth:LM,estimateWidth:jM,width:jM,canvas:PM};function PM(t){IM.width=t&&TE?LM:jM}function jM(t,e){return BM(HM(t,e),ZM(t))}function BM(t,e){return~~(.8*t.length*e)}function LM(t,e){return ZM(t)<=0||!(e=HM(t,e))?0:RM(e,VM(t))}function RM(t,e){var n="(".concat(e,") ").concat(t),r=FM.get(n);return void 0===r&&(TE.font=e,r=TE.measureText(t).width,FM.set(n,r)),r}function ZM(t){return null!=t.fontSize?+t.fontSize||0:11}function NM(t){return null!=t.lineHeight?t.lineHeight:ZM(t)+2}function zM(t){return e=t.lineBreak&&t.text&&!yo(t.text)?t.text.split(t.lineBreak):t.text,yo(e)?e.length>1?e:e[0]:e;var e}function UM(t){var e=zM(t);return(yo(e)?e.length-1:0)*NM(t)}function HM(t,e){var n=null==e?"":(e+"").trim();return t.limit>0&&n.length?function(t,e){var n=+t.limit,r=function(t){if(IM.width===LM){var e=VM(t);return function(t){return RM(t,e)}}var n=ZM(t);return function(t){return BM(t,n)}}(t);if(r(e)<n)return e;var i,a=t.ellipsis||"…",o="rtl"===t.dir,u=0,s=e.length;if(n-=r(a),o){for(;u<s;)i=u+s>>>1,r(e.slice(i))>n?u=i+1:s=i;return a+e.slice(u)}for(;u<s;)i=1+(u+s>>>1),r(e.slice(0,i))<n?u=i:s=i-1;return e.slice(0,u)+a}(t,n):n}function WM(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function VM(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+ZM(t)+"px "+WM(t,e)}function GM(t){var e=t.baseline,n=ZM(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:"line-top"===e?.29*n+.5*NM(t):"line-bottom"===e?.29*n-.5*NM(t):0)}PM(!0);var XM={left:"start",center:"middle",right:"end"},YM=new nE;function qM(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-vC,n+=i*Math.cos(e),r+=i*Math.sin(e)),YM.x1=n,YM.y1=r,YM}function $M(t,e,n){var r,i=IM.height(e),a=e.align,o=qM(e),u=o.x1,s=o.y1,l=e.dx||0,c=(e.dy||0)+GM(e)-Math.round(.8*i),f=zM(e);if(yo(f)?(i+=NM(e)*(f.length-1),r=f.reduce((function(t,n){return Math.max(t,IM.width(e,n))}),0)):r=IM.width(e,f),"center"===a?l-=r/2:"right"===a&&(l-=r),t.set(l+=u,c+=s,l+r,c+i),e.angle&&!n)t.rotate(e.angle*gC,u,s);else if(2===n)return t.rotatedPoints(e.angle*gC,u,s);return t}var JM={type:"text",tag:"text",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+GM(e),a=qM(e),o=a.x1,u=a.y1,s=e.angle||0;t("text-anchor",XM[e.align]||"start"),s?(n=eM(o,u)+" "+nM(s),(r||i)&&(n+=" "+eM(r,i))):n=eM(o+r,u+i),t("transform",n)},bound:$M,draw:function(t,e,n){XE(e,(function(e){var r,i,a,o,u,s,l,c=null==e.opacity?1:e.opacity;if(!(n&&!n.intersects(e.bounds)||0===c||e.fontSize<=0||null==e.text||0===e.text.length)){if(t.font=VM(e),t.textAlign=e.align||"left",i=(r=qM(e)).x1,a=r.y1,e.angle&&(t.save(),t.translate(i,a),t.rotate(e.angle*gC),i=a=0),i+=e.dx||0,a+=(e.dy||0)+GM(e),s=zM(e),RE(t,e),yo(s))for(u=NM(e),o=0;o<s.length;++o)l=HM(e,s[o]),e.fill&&UE(t,e,c)&&t.fillText(l,i,a),e.stroke&&WE(t,e,c)&&t.strokeText(l,i,a),a+=u;else l=HM(e,s),e.fill&&UE(t,e,c)&&t.fillText(l,i,a),e.stroke&&WE(t,e,c)&&t.strokeText(l,i,a);e.angle&&t.restore()}}))},pick:KE((function(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=qM(e),u=o.x1,s=o.y1,l=$M(YM,e,1),c=-e.angle*gC,f=Math.cos(c),h=Math.sin(c),d=f*i-h*a+(u-f*u+h*s),p=h*i+f*a+(s-h*u-f*s);return l.contains(d,p)})),isect:function(t,e){var n=$M(YM,t,2);return LE(e,n[0],n[1],n[2],n[3])||LE(e,n[0],n[1],n[4],n[5])||LE(e,n[4],n[5],n[6],n[7])||LE(e,n[2],n[3],n[6],n[7])}},KM=oM("trail",(function(t,e){return $C.context(t)(e)}),(function(t,e){for(var n,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(n=t[i].x-e[0])*n+(r=t[i].y-e[1])*r<(n=t[i].size||1)*n)return t[i];return null})),QM={arc:aM,area:uM,group:gM,image:SM,line:kM,path:EM,rect:OM,rule:_M,shape:DM,symbol:TM,text:JM,trail:KM};function tO(t,e,n){var r=QM[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new nE),t,n)}var eO={mark:null};function nO(t,e,n){var r,i,a,o,u=QM[t.marktype],s=u.bound,l=t.items,c=l&&l.length;if(u.nested)return c?a=l[0]:(eO.mark=t,a=eO),o=tO(a,s,n),e=e&&e.union(o)||o;if(e=e||t.bounds&&t.bounds.clear()||new nE,c)for(r=0,i=l.length;r<i;++r)e.union(tO(l[r],s,n));return t.bounds=e}var rO=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function iO(t,e){return JSON.stringify(t,rO,e)}function aO(t){return oO("string"==typeof t?JSON.parse(t):t)}function oO(t){var e,n,r,i=t.marktype,a=t.items;if(a)for(n=0,r=a.length;n<r;++n)e=i?"mark":"group",a[n][e]=t,a[n].zindex&&(a[n][e].zdirty=!0),"group"===(i||e)&&oO(a[n]);return i&&nO(t),t}function uO(t){arguments.length?this.root=aO(t):(this.root=sO({marktype:"group",name:"root",role:"frame"}),this.root.items=[new iE(this.root)])}function sO(t,e){var n={bounds:new nE,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function lO(t,e,n){return!t&&"undefined"!=typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function cO(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function fO(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=lO(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function hO(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function dO(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function pO(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function gO(t,e){this._active=null,this._handlers={},this._loader=t||Sy(),this._tooltip=e||vO}function vO(t,e,n,r){t.element().setAttribute("title",r||"")}function mO(t){this._el=null,this._bgcolor=null,this._loader=new aE(t)}uO.prototype={toJSON:function(t){return iO(this.root,t||0)},mark:function(t,e,n){var r=sO(t,e=e||this.root.items[0]);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},gO.prototype={initialize:function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene:function(t){return arguments.length?(this._scene=t,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(t,e,n){for(var r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},handlers:function(t){var e=this._handlers,n=[];if(t)n.push.apply(n,(0,X.Z)(e[this.eventName(t)]));else for(var r in e)n.push.apply(n,(0,X.Z)(e[r]));return n},eventName:function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref:function(t,e,n){this._loader.sanitize(n,{context:"href"}).then((function(e){var n=new MouseEvent(t.type,t),r=lO(null,"a");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)})).catch((function(){}))},handleTooltip:function(t,e,n){if(e&&null!=e.tooltip){e=function(t,e,n,r){var i,a,o=t&&t.mark;if(o&&(i=QM[o.marktype]).tip){for((a=pO(e,n))[0]-=r[0],a[1]-=r[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}(e,t,this.canvas(),this._origin);var r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},getItemBoundingClientRect:function(t){var e=this.canvas();if(e){for(var n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.width(),o=i.height(),u=i.x1+r[0]+n.left,s=i.y1+r[1]+n.top;t.mark&&(t=t.mark.group);)u+=t.x||0,s+=t.y||0;return{x:u,y:s,width:a,height:o,left:u,top:s,right:u+a,bottom:s+o}}}},mO.prototype={initialize:function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize:function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render:function(){},renderAsync:function(t){var e=this.render(t);return this._ready?this._ready.then((function(){return e})):Promise.resolve(e)},_load:function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(t){t&&i(),n._ready=null}))}return r},sanitizeURL:function(t){return this._load("sanitizeURL",t)},loadImage:function(t){return this._load("loadImage",t)}};var yO="dragenter",xO="dragleave",bO="dragover",wO="mousedown",SO="mousemove",kO="mouseout",CO="mouseover",EO="click",MO="mousewheel",OO="touchstart",AO="touchmove",_O="touchend",DO=SO,TO=kO,FO=EO;function IO(t,e){gO.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}function PO(t,e){(function(t){return t===OO||t===AO||t===_O?[OO,AO,_O]:[t]})(e).forEach((function(e){return function(t,e){var n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?function(n){return t[e](n)}:function(n){return t.fire(e,n)}))}(t,e)}))}function jO(t,e,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r)),this.fire(t,r)}}function BO(t){return function(e){this.fire(t,e),this._active=null}}uu(IO,gO,{initialize:function(t,e,n){var r=this;return this._canvas=t&&cO(t,"canvas"),[EO,wO,SO,kO,xO].forEach((function(t){return PO(r,t)})),gO.prototype.initialize.call(this,t,e,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",yO,xO,bO,wO,"mouseup",SO,kO,CO,EO,"dblclick","wheel",MO,OO,AO,_O],DOMMouseScroll:function(t){this.fire(MO,t)},mousemove:jO(SO,CO,kO),dragover:jO(bO,yO,xO),mouseout:BO(kO),dragleave:BO(xO),mousedown:function(t){this._down=this._active,this.fire(wO,t)},click:function(t){this._down===this._active&&(this.fire(EO,t),this._down=null)},touchstart:function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(OO,t,!0)},touchmove:function(t){this.fire(AO,t,!0)},touchend:function(t){this.fire(_O,t,!0),this._touch=null},fire:function(t,e,n){var r=n?this._touch:this._active,i=this._handlers[t];if(e.vegaType=t,t===FO&&r&&r.href?this.handleHref(e,r,r.href):t!==DO&&t!==TO||this.handleTooltip(e,r,t!==TO),i)for(var a=0,o=i.length;a<o;++a)i[a].handler.call(this._obj,e,r)},on:function(t,e){var n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(PO(this,t),(r[n]||(r[n]=[])).push({type:t,handler:e})),this},off:function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},pickEvent:function(t){var e=pO(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick:function(t,e,n,r,i){var a=this.context();return QM[t.marktype].pick.call(this,a,t,e,n,r,i)}});var LO="undefined"!=typeof window&&window.devicePixelRatio||1;function RO(t){mO.call(this,t),this._options={},this._redraw=!1,this._dirty=new nE,this._tempb=new nE}var ZO=mO.prototype;function NO(t,e){gO.call(this,t,e);var n=this;n._hrefHandler=zO(n,(function(t,e){e&&e.href&&n.handleHref(t,e,e.href)})),n._tooltipHandler=zO(n,(function(t,e){n.handleTooltip(t,e,t.type!==TO)}))}uu(RO,mO,{initialize:function(t,e,n,r,i,a){return this._options=a||{},this._canvas=this._options.externalContext?null:ey(1,1,this._options.type),t&&this._canvas&&(hO(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),ZO.initialize.call(this,t,e,n,r,i)},resize:function(t,e,n,r){if(ZO.resize.call(this,t,e,n,r),this._canvas)!function(t,e,n,r,i,a){var o="undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,u=t.getContext("2d"),s=o?LO:i;for(var l in t.width=e*s,t.height=n*s,a)u[l]=a[l];o&&1!==s&&(t.style.width=e+"px",t.style.height=n+"px"),u.pixelRatio=s,u.setTransform(s,0,0,s,s*r[0],s*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var i=this._options.externalContext;i||eo("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(t){for(var e=this._tempb.clear().union(t.bounds),n=t.mark.group;n;)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render:function(t){var e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty,o=function(t,e,n){return(new nE).set(0,0,e,n).translate(-t[0],-t[1])}(n,r,i);e.save();var u=this._redraw||a.empty()?(this._redraw=!1,o.expand(1)):function(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(e,o.intersect(a),n);return this.clear(-n[0],-n[1],r,i),this.draw(e,t,u),e.restore(),a.clear(),this},draw:function(t,e,n){var r=QM[e.marktype];e.clip&&function(t,e){var n=e.clip;t.save(),Vo(n)?(t.beginPath(),n(t),t.clip()):sM(t,e.group)}(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},clear:function(t,e,n,r){var i=this._options,a=this.context();"pdf"===i.type||i.externalContext||a.clearRect(t,e,n,r),null!=this._bgcolor&&(a.fillStyle=this._bgcolor,a.fillRect(t,e,n,r))}});var zO=function(t,e){return function(n){var r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,e.call(t._obj,n,r)}};uu(NO,gO,{initialize:function(t,e,n){var r=this._svg;return r&&(r.removeEventListener(FO,this._hrefHandler),r.removeEventListener(DO,this._tooltipHandler),r.removeEventListener(TO,this._tooltipHandler)),this._svg=r=t&&cO(t,"svg"),r&&(r.addEventListener(FO,this._hrefHandler),r.addEventListener(DO,this._tooltipHandler),r.addEventListener(TO,this._tooltipHandler)),gO.prototype.initialize.call(this,t,e,n)},canvas:function(){return this._svg},on:function(t,e){var n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){var i={type:t,handler:e,listener:zO(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off:function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});var UO="aria-hidden",HO="aria-label",WO="role",VO="aria-roledescription",GO="graphics-object",XO="graphics-symbol",YO=function(t,e,n){var r;return r={},(0,Z.Z)(r,WO,t),(0,Z.Z)(r,VO,e),(0,Z.Z)(r,HO,n||void 0),r},qO=Ou(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),$O={axis:{desc:"axis",caption:function(t){var e=t.datum,n=t.orient,r=e.title?eA(t):null,i=t.context,a=i.scales[e.scale].value,o=i.dataflow.locale(),u=a.type,s="left"===n||"right"===n?"Y":"X";return"".concat(s,"-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(yk(u)?"discrete":u," scale")+" with ".concat(Kk(o,a,t))}},legend:{desc:"legend",caption:function(t){var e=t.datum,n=e.title?eA(t):null,r="".concat(e.type||""," legend").trim(),i=e.scales,a=Object.keys(i),o=t.context,u=o.scales[i[a[0]]].value,s=o.dataflow.locale();return function(t){return t.length?t[0].toUpperCase()+t.slice(1):t}(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(t){return t=t.map((function(t){return t+("fill"===t||"stroke"===t?" color":"")})),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Co(t)}(a))+" with ".concat(Kk(s,u,t))}},"title-text":{desc:"title",caption:function(t){return"Title text '".concat(tA(t),"'")}},"title-subtitle":{desc:"subtitle",caption:function(t){return"Subtitle text '".concat(tA(t),"'")}}},JO={ariaRole:WO,ariaRoleDescription:VO,description:HO};function KO(t,e){var n=!1===e.aria;if(t(UO,n||void 0),n||null==e.description)for(var r in JO)t(JO[r],void 0);else{var i=e.mark.marktype;t(HO,e.description),t(WO,e.ariaRole||("group"===i?GO:XO)),t(VO,e.ariaRoleDescription||"".concat(i," mark"))}}function QO(t){return!1===t.aria?(0,Z.Z)({},UO,!0):qO[t.role]?null:$O[t.role]?function(t,e){try{var n=t.items[0],r=e.caption||function(){return""};return YO(e.role||XO,e.desc,n.description||r(n))}catch(i){return null}}(t,$O[t.role]):function(t){var e=t.marktype,n="group"===e||"text"===e||t.items.some((function(t){return null!=t.description&&!1!==t.aria}));return YO(n?GO:XO,"".concat(e," mark container"),t.description)}(t)}function tA(t){return Ho(t.text).join(" ")}function eA(t){try{return Ho(Co(t.items).items[0].text).join(" ")}catch(e){return null}}var nA=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};function rA(){var t="",e="",n="",r=[],i=function(){return e=n=""},a=function(a){e&&(t+="".concat(e,">").concat(n),i()),r.push(a)},o=function(t,n){return null!=n&&(e+=" ".concat(t,'="').concat(nA(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),u},u={open:function(t){a(t),e="<"+t;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var s=0,l=r;s<l.length;s++){var c=l[s];for(var f in c)o(f,c[f])}return u},close:function(){var a=r.pop();return t+=e?e+(n?">".concat(n,"</").concat(a,">"):"/>"):"</".concat(a,">"),i(),u},attr:o,text:function(t){return n+=nA(t),u},toString:function(){return t}};return u}var iA=function(t){return aA(rA(),t)+""};function aA(t,e){if(t.open(e.tagName),e.hasAttributes())for(var n=e.attributes,r=n.length,i=0;i<r;++i)t.attr(n[i].name,n[i].value);if(e.hasChildNodes()){var a,o=Qk(e.childNodes);try{for(o.s();!(a=o.n()).done;){var u=a.value;3===u.nodeType?t.text(u.nodeValue):aA(t,u)}}catch(s){o.e(s)}finally{o.f()}}return t.close()}var oA={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},uA={blend:"mix-blend-mode"},sA={fill:"none","stroke-miterlimit":10},lA="http://www.w3.org/2000/xmlns/",cA=vM.xmlns;function fA(t){mO.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var hA=mO.prototype;function dA(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function pA(t,e,n){var r,i,a;if("radial"===e.gradient){var o=fO(t,n++,"pattern",cA);SA(o,{id:nC+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),SA(o=fO(o,0,"rect",cA),{width:1,height:1,fill:"url(".concat(CA(),"#").concat(e.id,")")}),SA(t=fO(t,n++,"radialGradient",cA),{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else SA(t=fO(t,n++,"linearGradient",cA),{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(r=0,i=e.stops.length;r<i;++r)(a=fO(t,r,"stop",cA)).setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);return hO(t,r),n}function gA(t,e,n){return(t=fO(t,n,"clipPath",cA)).setAttribute("id",e.id),e.path?fO(t,0,"path",cA).setAttribute("d",e.path):SA(fO(t,0,"rect",cA),{x:0,y:0,width:e.width,height:e.height}),hO(t,1),n+1}function vA(t,e,n,r,i){var a,o=t._svg;if(!o&&(o=lO(a=e.ownerDocument,r,cA),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){var u=lO(a,"path",cA);o.appendChild(u),u.__data__=t;var s=lO(a,"g",cA);o.appendChild(s),s.__data__=t;var l=lO(a,"path",cA);o.appendChild(l),l.__data__=t,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||function(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}(o,n))&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}uu(fA,mO,{initialize:function(t,e,n,r,i){return this._defs={},this._clearDefs(),t&&(this._svg=fO(t,0,"svg",cA),this._svg.setAttributeNS(lA,"xmlns",cA),this._svg.setAttributeNS(lA,"xmlns:xlink",vM["xmlns:xlink"]),this._svg.setAttribute("version",vM.version),this._svg.setAttribute("class","marks"),hO(t,1),this._root=fO(this._svg,0,"g",cA),SA(this._root,sA),hO(this._svg,1)),this.background(this._bgcolor),hA.initialize.call(this,t,e,n,r,i)},background:function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),hA.background.apply(this,arguments)},resize:function(t,e,n,r){return hA.resize.call(this,t,e,n,r),this._svg&&(SA(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var t,e=this._svg,n=this._bgcolor;if(!e)return null;n&&(e.removeAttribute("style"),SA(t=fO(e,0,"rect",cA),{width:this._width,height:this._height,fill:n}));var r=iA(e);return n&&(e.removeChild(t),this._svg.style.setProperty("background-color",n)),r},_render:function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),hO(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty:function(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length||!this._dirtyID)return!0;var e,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=t.length;a<o;++a)(n=(e=t[a]).mark).marktype!==r&&(r=n.marktype,i=QM[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,dA(e,s),n.items.forEach((function(t){t.dirty=s}))),n.zdirty||(e.exit?(i.nested&&n.items.length?(u=n.items[0])._svg&&this._update(i,u._svg,u):e._svg&&(u=e._svg.parentNode)&&u.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e)._update!==s&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,dA(e,s)),e._update=s));return!this._dirtyAll},mark:function(t,e,n){var r=this;if(!this.isDirty(e))return e._svg;var i=this._svg,a=QM[e.marktype],o=!1===e.interactive?"none":null,u="g"===a.tag,s=vA(e,t,n,"g",i);s.setAttribute("class",dO(e));var l=QO(e);for(var c in l)kA(s,c,l[c]);u||kA(s,"pointer-events",o),kA(s,"clip-path",e.clip?eE(this,e,e.group):null);var f=null,h=0,d=function(t){var e=r.isDirty(t),n=vA(t,s,f,a.tag,i);e&&(r._update(a,n,t),u&&function(t,e,n){e=e.lastChild.previousSibling;var r,i=0;XE(n,(function(n){r=t.mark(e,n,r),++i})),hO(e,1+i)}(r,n,t)),f=n,++h};return a.nested?e.items.length&&d(e.items[0]):XE(e,d),hO(s,h),s},_update:function(t,e,n){mA=e,yA=e.__values__,KO(bA,n),t.attr(bA,n,this);var r=xA[t.type];r&&r.call(this,t,e,n),mA&&this.style(mA,n)},style:function(t,e){if(null!=e){for(var n in oA){var r="font"===n?WM(e):e[n];if(r!==yA[n]){var i=oA[n];null==r?t.removeAttribute(i):(rC(r)&&(r=iC(r,this._defs.gradient,CA())),t.setAttribute(i,r+"")),yA[n]=r}}for(var a in uA)wA(t,uA[a],e[a])}},defs:function(){var t=this._svg,e=this._defs,n=e.el,r=0;for(var i in e.gradient)n||(e.el=n=fO(t,1,"defs",cA)),r=pA(n,e.gradient[i],r);for(var a in e.clipping)n||(e.el=n=fO(t,1,"defs",cA)),r=gA(n,e.clipping[a],r);n&&(0===r?(t.removeChild(n),e.el=null):hO(n,r))},_clearDefs:function(){var t=this._defs;t.gradient={},t.clipping={}}});var mA=null,yA=null,xA={group:function(t,e,n){var r=mA=e.childNodes[2];yA=r.__values__,t.foreground(bA,n,this),yA=e.__values__,mA=e.childNodes[1],t.content(bA,n,this);var i=mA=e.childNodes[0];t.background(bA,n,this);var a=!1===n.mark.interactive?"none":null;if(a!==yA.events&&(kA(r,"pointer-events",a),kA(i,"pointer-events",a),yA.events=a),n.strokeForeground&&n.stroke){var o=n.fill;kA(r,"display",null),this.style(i,n),kA(i,"stroke",null),o&&(n.fill=null),yA=r.__values__,this.style(r,n),o&&(n.fill=o),mA=null}else kA(r,"display","none")},image:function(t,e,n){!1===n.smooth?(wA(e,"image-rendering","optimizeSpeed"),wA(e,"image-rendering","pixelated")):wA(e,"image-rendering",null)},text:function(t,e,n){var r,i,a,o,u=zM(n);yo(u)?(r=(i=u.map((function(t){return HM(n,t)}))).join("\n"))!==yA.text&&(hO(e,0),a=e.ownerDocument,o=NM(n),i.forEach((function(t,r){var i=lO(a,"tspan",cA);i.__data__=n,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",o)),e.appendChild(i)})),yA.text=r):(i=HM(n,u))!==yA.text&&(e.textContent=i,yA.text=i),kA(e,"font-family",WM(n)),kA(e,"font-size",ZM(n)+"px"),kA(e,"font-style",n.fontStyle),kA(e,"font-variant",n.fontVariant),kA(e,"font-weight",n.fontWeight)}};function bA(t,e,n){e!==yA[t]&&(n?function(t,e,n,r){null!=n?t.setAttributeNS(r,e,n):t.removeAttributeNS(r,e)}(mA,t,e,n):kA(mA,t,e),yA[t]=e)}function wA(t,e,n){n!==yA[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),yA[e]=n)}function SA(t,e){for(var n in e)kA(t,n,e[n])}function kA(t,e,n){null!=n?t.setAttribute(e,n):t.removeAttribute(e)}function CA(){var t;return"undefined"==typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function EA(t){mO.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}uu(EA,mO,{svg:function(){return this._text},_render:function(t){var e=rA();e.open("svg",Qo({},vM,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",sA,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark:function(t,e){var n=this,r=QM[e.marktype],i=r.tag,a=[KO,r.attr];t.open("g",{class:dO(e),"clip-path":e.clip?eE(this,e,e.group):null},QO(e),{"pointer-events":"g"!==i&&!1===e.interactive?"none":null});var o=function(o){var u=n.href(o);if(u&&t.open("a",u),t.open(i,n.attr(e,o,a,"g"!==i?i:null)),"text"===i){var s=zM(o);if(yo(s))for(var l={x:0,dy:NM(o)},c=0;c<s.length;++c)t.open("tspan",c?l:null).text(HM(o,s[c])).close();else t.text(HM(o,s))}else if("g"===i){var f=o.strokeForeground,h=o.fill,d=o.stroke;f&&d&&(o.stroke=null),t.open("path",n.attr(e,o,r.background,"bgrect")).close(),t.open("g",n.attr(e,o,r.content)),XE(o,(function(e){return n.mark(t,e)})),t.close(),f&&d?(h&&(o.fill=null),o.stroke=d,t.open("path",n.attr(e,o,r.foreground,"bgrect")).close(),h&&(o.fill=h)):t.open("path",n.attr(e,o,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?e.items&&e.items.length&&o(e.items[0]):XE(e,o),t.close()},href:function(t){var e,n=this,r=t.href;if(r){if(e=this._hrefs&&this._hrefs[r])return e;this.sanitizeURL(r).then((function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t}))}return null},attr:function(t,e,n,r){var i=this,a={},o=function(t,e,n,r){a[r||t]=e};return Array.isArray(n)?n.forEach((function(t){return t(o,e,i)})):n(o,e,this),r&&function(t,e,n,r,i){var a;if(null==e)return t;"bgrect"===r&&!1===n.interactive&&(t["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(t["pointer-events"]="none"),t.display="none",null!==e.fill))return t;"image"===r&&!1===e.smooth&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]);"text"===r&&(t["font-family"]=WM(e),t["font-size"]=ZM(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(var o in oA){var u=e[o],s=oA[o];("transparent"!==u||"fill"!==s&&"stroke"!==s)&&null!=u&&(rC(u)&&(u=iC(u,i.gradient,"")),t[s]=u)}for(var l in uA){var c=e[l];null!=c&&(a=a||[]).push("".concat(uA[l],": ").concat(c,";"))}a&&(t.style=a.join(" "))}(a,e,t,r,this._defs),a},defs:function(t){var e=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(e).length+Object.keys(n).length){for(var r in t.open("defs"),e){var i=e[r],a=i.stops;"radial"===i.gradient?(t.open("pattern",{id:nC+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),t.close(),t.open("radialGradient",{id:r,fx:i.x1,fy:i.y1,fr:i.r1,cx:i.x2,cy:i.y2,r:i.r2})):t.open("linearGradient",{id:r,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2});for(var o=0;o<a.length;++o)t.open("stop",{offset:a[o].offset,"stop-color":a[o].color}).close();t.close()}for(var u in n){var s=n[u];t.open("clipPath",{id:u}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}});var MA="canvas",OA="none",AA={Canvas:MA,PNG:"png",SVG:"svg",None:OA},_A={};function DA(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(_A[t]=e,this):_A[t]}function TA(t,e,n){var r=[],i=(new nE).union(e),a=t.marktype;return a?FA(t,i,n,r):"group"===a?IA(t,i,n,r):eo("Intersect scene must be mark node or group item.")}function FA(t,e,n,r){if(function(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}(t,e,n)){var i=t.items,a=t.marktype,o=i.length,u=0;if("group"===a)for(;u<o;++u)IA(i[u],e,n,r);else for(var s=QM[a].isect;u<o;++u){var l=i[u];PA(l,e,s)&&r.push(l)}}return r}function IA(t,e,n,r){n&&n(t.mark)&&PA(t,e,QM.group.isect)&&r.push(t);var i=t.items,a=i&&i.length;if(a){var o=t.x||0,u=t.y||0;e.translate(-o,-u);for(var s=0;s<a;++s)FA(i[s],e,n,r);e.translate(o,u)}return r}function PA(t,e,n){var r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}_A[MA]=_A.png={renderer:RO,headless:RO,handler:IO},_A.svg={renderer:fA,headless:EA,handler:NO},_A[OA]={};var jA=new nE;function BA(t){var e=t.clip;if(Vo(e))e(ME(jA.clear()));else{if(!e)return;jA.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(jA)}function LA(t,e,n){return t===e||("path"===n?RA(t,e):t instanceof Date&&e instanceof Date?+t==+e:hu(t)&&hu(e)?Math.abs(t-e)<=1e-9:t&&e&&(xo(t)||xo(e))?function(t,e){var n,r,i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(!LA(t[n=i[r]],e[n],n))return!1;return typeof t==typeof e}(t,e):t==e)}function RA(t,e){return LA(pC(t),pC(e))}function ZA(){tE(),eC=0}var NA="top",zA="left",UA="right",HA="bottom",WA="start",VA="middle",GA="end",XA="group",YA="axis",qA="title",$A="frame",JA="scope",KA="legend",QA="row-header",t_="row-footer",e_="row-title",n_="column-header",r_="column-footer",i_="column-title",a_="padding",o_="fit",u_="fit-x",s_="fit-y",l_="none",c_="all",f_="each",h_="flush",d_="column",p_="row";function g_(t){Ed.call(this,null,t)}function v_(t,e,n){return e(t.bounds.clear(),t,n)}uu(g_,Ed,{transform:function(t,e){var n,r=e.dataflow,i=t.mark,a=i.marktype,o=QM[a],u=o.bound,s=i.bounds;if(o.nested)i.items.length&&r.dirty(i.items[0]),s=v_(i,u),i.items.forEach((function(t){t.bounds.clear().union(s)}));else if(a===XA||t.modified())switch(e.visit(e.MOD,(function(t){return r.dirty(t)})),s.clear(),i.items.forEach((function(t){return s.union(v_(t,u))})),i.role){case YA:case KA:case qA:e.reflow()}else n=e.changed(e.REM),e.visit(e.ADD,(function(t){s.union(v_(t,u))})),e.visit(e.MOD,(function(t){n=n||s.alignsWith(t.bounds),r.dirty(t),s.union(v_(t,u))})),n&&(s.clear(),i.items.forEach((function(t){return s.union(t.bounds)})));return BA(i),e.modifies("bounds")}});var m_=":vega_identifier:";function y_(t){Ed.call(this,0,t)}function x_(t){Ed.call(this,null,t)}function b_(t){Ed.call(this,null,t)}y_.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},uu(y_,Ed,{transform:function(t,e){var n=function(t){return t._signals[m_]||(t._signals[m_]=t.add(0))}(e.dataflow),r=t.as,i=n.value;return e.visit(e.ADD,(function(t){return t[r]=t[r]||++i})),n.set(this.value=i),e}}),uu(x_,Ed,{transform:function(t,e){var n=this.value;n||((n=e.dataflow.scenegraph().mark(t.markdef,function(t){var e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}(t),t.index)).group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);var r=n.marktype===XA?iE:rE;return e.visit(e.ADD,(function(t){return r.call(t,n)})),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});var w_={parity:function(t){return t.filter((function(t,e){return e%2?t.opacity=0:1}))},greedy:function(t,e){var n;return t.filter((function(t,r){return r&&S_(n.bounds,t.bounds,e)?t.opacity=0:(n=t,1)}))}},S_=function(t,e,n){return n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2)},k_=function(t,e){for(var n,r=1,i=t.length,a=t[0].bounds;r<i;a=n,++r)if(S_(a,n=t[r].bounds,e))return!0},C_=function(t){var e=t.bounds;return e.width()>1&&e.height()>1},E_=function(t){return t.forEach((function(t){return t.opacity=1})),t},M_=function(t,e){return t.reflow(e.modified()).modifies("opacity")};function O_(t){Ed.call(this,null,t)}uu(b_,Ed,{transform:function(t,e){var n,r,i=w_[t.method]||w_.parity,a=t.separation||0,o=e.materialize(e.SOURCE).source;if(o&&o.length){if(!t.method)return t.modified("method")&&(E_(o),e=M_(e,t)),e;if((o=o.filter(C_)).length){if(t.sort&&(o=o.slice().sort(t.sort)),n=E_(o),e=M_(e,t),n.length>=3&&k_(n,a)){do{n=i(n,a)}while(n.length>=3&&k_(n,a));n.length<3&&!Co(o).opacity&&(n.length>1&&(Co(n).opacity=0),Co(o).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(r=function(t,e,n){var r=t.range(),i=new nE;return e===NA||e===HA?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),function(t){return i.encloses(t.bounds)}}(t.boundScale,t.boundOrient,+t.boundTolerance),o.forEach((function(t){r(t)||(t.opacity=0)})));var u=n[0].mark.bounds.clear();return o.forEach((function(t){t.opacity&&u.union(t.bounds)})),e}}}}),uu(O_,Ed,{transform:function(t,e){var n=e.dataflow;if(e.visit(e.ALL,(function(t){return n.dirty(t)})),e.fields&&e.fields.zindex){var r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}}});var A_=new nE;function __(t,e,n){return t[e]===n?0:(t[e]=n,1)}function D_(t){var e=t.items[0].orient;return e===zA||e===UA}function T_(t,e,n,r){var i,a,o=e.items[0],u=o.datum,s=null!=o.translate?o.translate:.5,l=o.orient,c=function(t){var e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}(u),f=o.range,h=o.offset,d=o.position,p=o.minExtent,g=o.maxExtent,v=u.title&&o.items[c[2]].items[0],m=o.titlePadding,y=o.bounds,x=v&&UM(v),b=0,w=0;switch(A_.clear().union(y),y.clear(),(i=c[0])>-1&&y.union(o.items[i].bounds),(i=c[1])>-1&&y.union(o.items[i].bounds),l){case NA:b=d||0,w=-h,a=Math.max(p,Math.min(g,-y.y1)),y.add(0,-a).add(f,0),v&&F_(t,v,a,m,x,0,-1,y);break;case zA:b=-h,w=d||0,a=Math.max(p,Math.min(g,-y.x1)),y.add(-a,0).add(0,f),v&&F_(t,v,a,m,x,1,-1,y);break;case UA:b=n+h,w=d||0,a=Math.max(p,Math.min(g,y.x2)),y.add(0,0).add(a,f),v&&F_(t,v,a,m,x,1,1,y);break;case HA:b=d||0,w=r+h,a=Math.max(p,Math.min(g,y.y2)),y.add(0,0).add(f,a),v&&F_(t,v,a,m,0,0,1,y);break;default:b=o.x,w=o.y}return sE(y.translate(b,w),o),__(o,"x",b+s)|__(o,"y",w+s)&&(o.bounds=A_,t.dirty(o),o.bounds=y,t.dirty(o)),o.mark.bounds.clear().union(y)}function F_(t,e,n,r,i,a,o,u){var s=e.bounds;if(e.auto){var l=o*(n+i+r),c=0,f=0;t.dirty(e),a?c=(e.x||0)-(e.x=l):f=(e.y||0)-(e.y=l),e.mark.bounds.clear().union(s.translate(-c,-f)),t.dirty(e)}u.union(s)}var I_=function(t,e){return Math.floor(Math.min(t,e))},P_=function(t,e){return Math.ceil(Math.max(t,e))};function j_(t){return(new nE).set(0,0,t.width||0,t.height||0)}function B_(t){var e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function L_(t,e,n){var r=xo(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function R_(t){return t<0?Math.ceil(-t):0}function Z_(t,e,n){var r,i,a,o,u,s,l,c,f,h,d,p=!n.nodirty,g=n.bounds===h_?j_:B_,v=A_.set(0,0,0,0),m=L_(n.align,d_),y=L_(n.align,p_),x=L_(n.padding,d_),b=L_(n.padding,p_),w=n.columns||e.length,S=w<=0?1:Math.ceil(e.length/w),k=e.length,C=Array(k),E=Array(w),M=0,O=Array(k),A=Array(S),_=0,D=Array(k),T=Array(k),F=Array(k);for(i=0;i<w;++i)E[i]=0;for(i=0;i<S;++i)A[i]=0;for(i=0;i<k;++i)s=e[i],u=F[i]=g(s),s.x=s.x||0,D[i]=0,s.y=s.y||0,T[i]=0,a=i%w,o=~~(i/w),M=Math.max(M,l=Math.ceil(u.x2)),_=Math.max(_,c=Math.ceil(u.y2)),E[a]=Math.max(E[a],l),A[o]=Math.max(A[o],c),C[i]=x+R_(u.x1),O[i]=b+R_(u.y1),p&&t.dirty(e[i]);for(i=0;i<k;++i)i%w==0&&(C[i]=0),i<w&&(O[i]=0);if(m===f_)for(a=1;a<w;++a){for(d=0,i=a;i<k;i+=w)d<C[i]&&(d=C[i]);for(i=a;i<k;i+=w)C[i]=d+E[a-1]}else if(m===c_){for(d=0,i=0;i<k;++i)i%w&&d<C[i]&&(d=C[i]);for(i=0;i<k;++i)i%w&&(C[i]=d+M)}else for(m=!1,a=1;a<w;++a)for(i=a;i<k;i+=w)C[i]+=E[a-1];if(y===f_)for(o=1;o<S;++o){for(d=0,r=(i=o*w)+w;i<r;++i)d<O[i]&&(d=O[i]);for(i=o*w;i<r;++i)O[i]=d+A[o-1]}else if(y===c_){for(d=0,i=w;i<k;++i)d<O[i]&&(d=O[i]);for(i=w;i<k;++i)O[i]=d+_}else for(y=!1,o=1;o<S;++o)for(r=(i=o*w)+w;i<r;++i)O[i]+=A[o-1];for(f=0,i=0;i<k;++i)f=C[i]+(i%w?f:0),D[i]+=f-e[i].x;for(a=0;a<w;++a)for(h=0,i=a;i<k;i+=w)h+=O[i],T[i]+=h-e[i].y;if(m&&L_(n.center,d_)&&S>1)for(i=0;i<k;++i)(f=(u=m===c_?M:E[i%w])-F[i].x2-e[i].x-D[i])>0&&(D[i]+=f/2);if(y&&L_(n.center,p_)&&1!==w)for(i=0;i<k;++i)(h=(u=y===c_?_:A[~~(i/w)])-F[i].y2-e[i].y-T[i])>0&&(T[i]+=h/2);for(i=0;i<k;++i)v.union(F[i].translate(D[i],T[i]));switch(f=L_(n.anchor,"x"),h=L_(n.anchor,"y"),L_(n.anchor,d_)){case GA:f-=v.width();break;case VA:f-=v.width()/2}switch(L_(n.anchor,p_)){case GA:h-=v.height();break;case VA:h-=v.height()/2}for(f=Math.round(f),h=Math.round(h),v.clear(),i=0;i<k;++i)e[i].mark.bounds.clear();for(i=0;i<k;++i)(s=e[i]).x+=D[i]+=f,s.y+=T[i]+=h,v.union(s.mark.bounds.union(s.bounds.translate(D[i],T[i]))),p&&t.dirty(s);return v}function N_(t,e,n){var r,i,a,o,u,s,l,c=function(t){for(var e,n,r,i,a,o,u,s=t.items,l=s.length,c=0,f={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};c<l;++c)if(u=(o=s[c]).items,o.marktype===XA)switch(o.role){case YA:case KA:case qA:break;case QA:(e=f.rowheaders).push.apply(e,(0,X.Z)(u));break;case t_:(n=f.rowfooters).push.apply(n,(0,X.Z)(u));break;case n_:(r=f.colheaders).push.apply(r,(0,X.Z)(u));break;case r_:(i=f.colfooters).push.apply(i,(0,X.Z)(u));break;case e_:f.rowtitle=u[0];break;case i_:f.coltitle=u[0];break;default:(a=f.marks).push.apply(a,(0,X.Z)(u))}return f}(e),f=c.marks,h=n.bounds===h_?z_:U_,d=n.offset,p=n.columns||f.length,g=p<=0?1:Math.ceil(f.length/p),v=g*p,m=Z_(t,f,n);m.empty()&&m.set(0,0,0,0),c.rowheaders&&(s=L_(n.headerBand,p_,null),r=H_(t,c.rowheaders,f,p,g,-L_(d,"rowHeader"),I_,0,h,"x1",0,p,1,s)),c.colheaders&&(s=L_(n.headerBand,d_,null),i=H_(t,c.colheaders,f,p,p,-L_(d,"columnHeader"),I_,1,h,"y1",0,1,p,s)),c.rowfooters&&(s=L_(n.footerBand,p_,null),a=H_(t,c.rowfooters,f,p,g,L_(d,"rowFooter"),P_,0,h,"x2",p-1,p,1,s)),c.colfooters&&(s=L_(n.footerBand,d_,null),o=H_(t,c.colfooters,f,p,p,L_(d,"columnFooter"),P_,1,h,"y2",v-p,1,p,s)),c.rowtitle&&(u=L_(n.titleAnchor,p_),l=L_(d,"rowTitle"),l=u===GA?a+l:r-l,s=L_(n.titleBand,p_,.5),W_(t,c.rowtitle,l,0,m,s)),c.coltitle&&(u=L_(n.titleAnchor,d_),l=L_(d,"columnTitle"),l=u===GA?o+l:i-l,s=L_(n.titleBand,d_,.5),W_(t,c.coltitle,l,1,m,s))}function z_(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function U_(t,e){return t.bounds[e]}function H_(t,e,n,r,i,a,o,u,s,l,c,f,h,d){var p,g,v,m,y,x,b,w,S,k=n.length,C=0,E=0;if(!k)return C;for(p=c;p<k;p+=f)n[p]&&(C=o(C,s(n[p],l)));if(!e.length)return C;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),C+=a,g=0,m=e.length;g<m;++g)t.dirty(e[g]),e[g].mark.bounds.clear();for(p=c,g=0,m=e.length;g<m;++g,p+=f){for(y=(x=e[g]).mark.bounds,v=p;v>=0&&null==(b=n[v]);v-=h);u?(w=null==d?b.x:Math.round(b.bounds.x1+d*b.bounds.width()),S=C):(w=C,S=null==d?b.y:Math.round(b.bounds.y1+d*b.bounds.height())),y.union(x.bounds.translate(w-(x.x||0),S-(x.y||0))),x.x=w,x.y=S,t.dirty(x),E=o(E,y[l])}return E}function W_(t,e,n,r,i,a){if(e){t.dirty(e);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),e.bounds.translate(o-(e.x||0),u-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=u,t.dirty(e)}}function V_(t,e,n,r,i,a,o){var u=function(t,e){var n=t[e]||{};return function(e,r){return null!=n[e]?n[e]:null!=t[e]?t[e]:r}}(n,e),s=function(t,e){var n=-1/0;return t.forEach((function(t){null!=t.offset&&(n=Math.max(n,t.offset))})),n>-1/0?n:e}(t,u("offset",0)),l=u("anchor",WA),c=l===GA?1:l===VA?.5:0,f={align:f_,bounds:u("bounds",h_),columns:"vertical"===u("direction")?1:t.length,padding:u("margin",8),center:u("center"),nodirty:!0};switch(e){case zA:f.anchor={x:Math.floor(r.x1)-s,column:GA,y:c*(o||r.height()+2*r.y1),row:l};break;case UA:f.anchor={x:Math.ceil(r.x2)+s,y:c*(o||r.height()+2*r.y1),row:l};break;case NA:f.anchor={y:Math.floor(i.y1)-s,row:GA,x:c*(a||i.width()+2*i.x1),column:l};break;case HA:f.anchor={y:Math.ceil(i.y2)+s,x:c*(a||i.width()+2*i.x1),column:l};break;case"top-left":f.anchor={x:s,y:s};break;case"top-right":f.anchor={x:a-s,y:s,column:GA};break;case"bottom-left":f.anchor={x:s,y:o-s,row:GA};break;case"bottom-right":f.anchor={x:a-s,y:o-s,column:GA,row:GA}}return f}function G_(t,e){var n,r,i=e.items[0],a=i.datum,o=i.orient,u=i.bounds,s=i.x,l=i.y;return i._bounds?i._bounds.clear().union(u):i._bounds=u.clone(),u.clear(),function(t,e,n){var r=e.padding,i=r-n.x,a=r-n.y;if(e.datum.title){var o=e.items[1].items[0],u=o.anchor,s=e.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case zA:i+=Math.ceil(o.bounds.width())+s;break;case UA:case HA:break;default:a+=o.bounds.height()+s}switch((i||a)&&Y_(t,n,i,a),o.orient){case zA:c+=X_(e,n,o,u,1,1);break;case UA:l+=X_(e,n,o,GA,0,0)+s,c+=X_(e,n,o,u,1,1);break;case HA:l+=X_(e,n,o,u,0,0),c+=X_(e,n,o,GA,-1,0,1)+s;break;default:l+=X_(e,n,o,u,0,0)}(l||c)&&Y_(t,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(Y_(t,n,-l,0),Y_(t,o,-l,0))}else(i||a)&&Y_(t,n,i,a)}(t,i,i.items[0].items[0]),u=function(t,e){return t.items.forEach((function(t){return e.union(t.bounds)})),e.x1=t.padding,e.y1=t.padding,e}(i,u),n=2*i.padding,r=2*i.padding,u.empty()||(n=Math.ceil(u.width()+n),r=Math.ceil(u.height()+r)),"symbol"===a.type&&function(t){var e=t.reduce((function(t,e){return t[e.column]=Math.max(e.bounds.x2-e.x,t[e.column]||0),t}),{});t.forEach((function(t){t.width=e[t.column],t.height=t.bounds.y2-t.y}))}(i.items[0].items[0].items[0].items),o!==l_&&(i.x=s=0,i.y=l=0),i.width=n,i.height=r,sE(u.set(s,l,s+n,l+r),i),i.mark.bounds.clear().union(u),i}function X_(t,e,n,r,i,a,o){var u="symbol"!==t.datum.type,s=n.datum.vgrad,l=(!u||!a&&s||o?e:e.items[0]).bounds[i?"y2":"x2"]-t.padding,c=s&&a?l:0,f=s&&a?0:l,h=i<=0?0:UM(n);return Math.round(r===WA?c:r===GA?f-h:.5*(l-h))}function Y_(t,e,n,r){e.x+=n,e.y+=r,e.bounds.translate(n,r),e.mark.bounds.translate(n,r),t.dirty(e)}function q_(t){Ed.call(this,null,t)}function $_(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return J_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J_(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function J_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K_(t,e){var n=0;if(void 0===e){var r,i=$_(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;(a=+a)&&(n+=a)}}catch(c){i.e(c)}finally{i.f()}}else{var o,u=-1,s=$_(t);try{for(s.s();!(o=s.n()).done;){var l=o.value;(l=+e(l,++u,t))&&(n+=l)}}catch(c){s.e(c)}finally{s.f()}}return n}function Q_(t){Ed.call(this,null,t)}function tD(t){Ed.call(this,null,t)}function eD(){return Hh({})}function nD(t){Ed.call(this,null,t)}function rD(t){Ed.call(this,[],t)}uu(q_,Ed,{transform:function(t,e){var n=e.dataflow;return t.mark.items.forEach((function(e){t.layout&&N_(n,e,t.layout),function(t,e,n){var r,i,a,o,u,s=e.items,l=Math.max(0,e.width||0),c=Math.max(0,e.height||0),f=(new nE).set(0,0,l,c),h=f.clone(),d=f.clone(),p=[];for(o=0,u=s.length;o<u;++o)switch((i=s[o]).role){case YA:(D_(i)?h:d).union(T_(t,i,l,c));break;case qA:r=i;break;case KA:p.push(G_(t,i));break;case $A:case JA:case QA:case t_:case e_:case n_:case r_:case i_:h.union(i.bounds),d.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){var g={};for(var v in p.forEach((function(t){(a=t.orient||UA)!==l_&&(g[a]||(g[a]=[])).push(t)})),g){var m=g[v];Z_(t,m,V_(m,v,n.legends,h,d,l,c))}p.forEach((function(e){var r=e.bounds;if(r.equals(e._bounds)||(e.bounds=e._bounds,t.dirty(e),e.bounds=r,t.dirty(e)),n.autosize&&n.autosize.type===o_)switch(e.orient){case zA:case UA:f.add(r.x1,0).add(r.x2,0);break;case NA:case HA:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(h).union(d),r&&f.union(function(t,e,n,r,i){var a,o=e.items[0],u=o.frame,s=o.orient,l=o.anchor,c=o.offset,f=o.padding,h=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=s===zA||s===UA?r:n,g=0,v=0,m=0,y=0,x=0;if(u!==XA?s===zA?(g=i.y2,p=i.y1):s===UA?(g=i.y1,p=i.y2):(g=i.x1,p=i.x2):s===zA&&(g=r,p=0),a=l===WA?g:l===GA?p:(g+p)/2,d&&d.text){switch(s){case NA:case HA:x=h.bounds.height()+f;break;case zA:y=h.bounds.width()+f;break;case UA:y=-h.bounds.width()-f}A_.clear().union(d.bounds),A_.translate(y-(d.x||0),x-(d.y||0)),__(d,"x",y)|__(d,"y",x)&&(t.dirty(d),d.bounds.clear().union(A_),d.mark.bounds.clear().union(A_),t.dirty(d)),A_.clear().union(d.bounds)}else A_.clear();switch(A_.union(h.bounds),s){case NA:v=a,m=i.y1-A_.height()-c;break;case zA:v=i.x1-A_.width()-c,m=a;break;case UA:v=i.x2+A_.width()+c,m=a;break;case HA:v=a,m=i.y2+c;break;default:v=o.x,m=o.y}return __(o,"x",v)|__(o,"y",m)&&(A_.translate(v,m),t.dirty(o),o.bounds.clear().union(A_),e.bounds.clear().union(A_),t.dirty(o)),o.bounds}(t,r,l,c,f));e.clip&&f.set(0,0,e.width||0,e.height||0);!function(t,e,n,r){var i=r.autosize||{},a=i.type;if(t._autosize<1||!a)return;var o=t._width,u=t._height,s=Math.max(0,e.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,e.height||0),f=Math.max(0,Math.ceil(-n.y1)),h=Math.max(0,Math.ceil(n.x2-s)),d=Math.max(0,Math.ceil(n.y2-c));if(i.contains===a_){var p=t.padding();o-=p.left+p.right,u-=p.top+p.bottom}a===l_?(l=0,f=0,s=o,c=u):a===o_?(s=Math.max(0,o-l-h),c=Math.max(0,u-f-d)):a===u_?(s=Math.max(0,o-l-h),u=c+f+d):a===s_?(o=s+l+h,c=Math.max(0,u-f-d)):"pad"===a&&(o=s+l+h,u=c+f+d);t._resizeView(o,u,s,c,[l,f],i.resize)}(t,e,f,n)}(n,e,t)})),function(t){return t&&"legend-entry"!==t.mark.role}(t.mark.group)?e.reflow():e}}),uu(Q_,Ed,{transform:function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=this.value,a=t.scale,o=Lk(a,null==t.count?t.values?t.values.length:10:t.count,t.minstep),u=t.format||Nk(n,a,o,t.formatSpecifier,t.formatType,!!t.values),s=t.values?Rk(a,t.values,o):Zk(a,o);return i&&(r.rem=i),i=s.map((function(t,e){return Hh({index:e/(s.length-1||1),value:t,label:u(t)})})),t.extra&&i.length&&i.push(Hh({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),uu(tD,Ed,{transform:function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||eD,a=t.key||zh,o=this.value;return yo(r.encode)&&(r.encode=null),o&&(t.modified("key")||e.modified(a))&&eo("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=function(t){var e=au().test((function(t){return t.exit}));return e.lookup=function(n){return e.get(t(n))},e}(a)),e.visit(e.ADD,(function(t){var e=a(t),n=o.get(e);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(n=i(t),o.set(e,n),r.add.push(n)),n.datum=t,n.exit=!1})),e.visit(e.MOD,(function(t){var e=a(t),n=o.get(e);n&&(n.datum=t,r.mod.push(n))})),e.visit(e.REM,(function(t){var e=a(t),n=o.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)})),e.changed(e.ADD_MOD)&&r.modifies("datum"),(e.clean()||t.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}}),uu(nD,Ed,{transform:function(t,e){var n=e.fork(e.ADD_REM),r=t.mod||!1,i=t.encoders,a=e.encode;if(yo(a)){if(!n.changed()&&!a.every((function(t){return i[t]})))return e.StopPropagation;a=a[0],n.encode=null}var o="enter"===a,u=i.update||lo,s=i.enter||lo,l=i.exit||lo,c=(a&&!o?i[a]:u)||lo;if(e.changed(e.ADD)&&(e.visit(e.ADD,(function(e){s(e,t),u(e,t)})),n.modifies(s.output),n.modifies(u.output),c!==lo&&c!==u&&(e.visit(e.ADD,(function(e){c(e,t)})),n.modifies(c.output))),e.changed(e.REM)&&l!==lo&&(e.visit(e.REM,(function(e){l(e,t)})),n.modifies(l.output)),o||c!==lo){var f=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(f,(function(e){var i=s(e,t)||r;(c(e,t)||i)&&n.mod.push(e)})),n.mod.length&&n.modifies(s.output)):e.visit(f,(function(e){(c(e,t)||r)&&n.mod.push(e)})),n.mod.length&&n.modifies(c.output)}return n.changed()?n:e.StopPropagation}}),uu(rD,Ed,{transform:function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n,r,i,a,o,u=e.dataflow.locale(),s=e.fork(e.NO_SOURCE|e.NO_FIELDS),l=this.value,c=t.type||Ik,f=t.scale,h=+t.limit,d=Lk(f,null==t.count?5:t.count,t.minstep),p=!!t.values||c===Ik,g=t.format||Vk(u,f,d,c,t.formatSpecifier,t.formatType,p),v=t.values||Wk(f,d);return l&&(s.rem=l),c===Ik?(h&&v.length>h?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),l=v.slice(0,h-1),o=!0):l=v,Vo(i=t.size)?(t.values||0!==f(l[0])||(l=l.slice(1)),a=l.reduce((function(e,n){return Math.max(e,i(n,t))}),0)):i=Jo(a=i||8),l=l.map((function(e,n){return Hh({index:n,label:g(e,n,l),value:e,offset:a,size:i(e,t)})})),o&&(o=v[l.length],l.push(Hh({index:l.length,label:"…".concat(v.length-l.length," entries"),value:o,offset:a,size:i(o,t)})))):"gradient"===c?(n=f.domain(),r=Ok(f,n[0],Co(n)),v.length<3&&!t.values&&n[0]!==Co(n)&&(v=[n[0],Co(n)]),l=v.map((function(t,e){return Hh({index:e,label:g(t,e,v),value:t,perc:r(t)})}))):(i=v.length-1,r=function(t){var e=t.domain(),n=e.length-1,r=+e[0],i=+Co(e),a=i-r;if(t.type===JS){var o=n?a/n:.1;a=(i+=o)-(r-=o)}return function(t){return(t-r)/a}}(f),l=v.map((function(t,e){return Hh({index:e,label:g(t,e,v),value:t,perc:e?r(t):0,perc2:e===i?1:r(v[e+1])})}))),s.source=l,s.add=l,this.value=l,s}});var iD=function(t){return t.source.x},aD=function(t){return t.source.y},oD=function(t){return t.target.x},uD=function(t){return t.target.y};function sD(t){Ed.call(this,{},t)}sD.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},uu(sD,Ed,{transform:function(t,e){var n=t.sourceX||iD,r=t.sourceY||aD,i=t.targetX||oD,a=t.targetY||uD,o=t.as||"path",u=t.orient||"vertical",s=t.shape||"line",l=hD.get(s+"-"+u)||hD.get(s);return l||eo("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,(function(t){t[o]=l(n(t),r(t),i(t),a(t))})),e.reflow(t.modified()).modifies(o)}});var lD=function(t,e,n,r){return"M"+t+","+e+"L"+n+","+r},cD=function(t,e,n,r){var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a)/2;return"M"+t+","+e+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r},fD=function(t,e,n,r){var i=n-t,a=r-e,o=.2*(i+a),u=.2*(a-i);return"M"+t+","+e+"C"+(t+o)+","+(e+u)+" "+(n+u)+","+(r-o)+" "+n+","+r},hD=au({line:lD,"line-radial":function(t,e,n,r){return lD(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},arc:cD,"arc-radial":function(t,e,n,r){return cD(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},curve:fD,"curve-radial":function(t,e,n,r){return fD(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(t,e,n,r){return"M"+t+","+e+"V"+r+"H"+n},"orthogonal-vertical":function(t,e,n,r){return"M"+t+","+e+"H"+n+"V"+r},"orthogonal-radial":function(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),u=Math.sin(n);return"M"+e*i+","+e*a+"A"+e+","+e+" 0 0,"+((Math.abs(n-t)>Math.PI?n<=t:n>t)?1:0)+" "+e*o+","+e*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(t,e,n,r){var i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(t,e,n,r){var i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),u=Math.sin(n),s=(e+r)/2;return"M"+e*i+","+e*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}});function dD(t){Ed.call(this,null,t)}dD.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},uu(dD,Ed,{transform:function(t,e){var n,r,i,a=t.as||["startAngle","endAngle"],o=a[0],u=a[1],s=t.field||uo,l=t.startAngle||0,c=null!=t.endAngle?t.endAngle:2*Math.PI,f=e.source,h=f.map(s),d=h.length,p=l,g=(c-l)/K_(h),v=qp(d);for(t.sort&&v.sort((function(t,e){return h[t]-h[e]})),n=0;n<d;++n)i=h[v[n]],(r=f[v[n]])[o]=p,r[u]=p+=i*g;return this.value=h,e.reflow(t.modified()).modifies(a)}});function pD(t){return mk(t)&&t!==XS}var gD=Ou(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function vD(t){Ed.call(this,null,t),this.modified(!0)}function mD(t,e,n){if(bk(t)){var r=Math.abs(e.reduce((function(t,e){return t+(e<0?-1:e>0?1:0)}),0));r!==e.length&&n.warn("Log scale domain includes zero: "+Su(e))}return e}function yD(t,e,n){return Vo(t)&&(e||n)?Ck(t,xD(e||[0,1],n)):t}function xD(t,e){return e?t.slice().reverse():t}function bD(t){Ed.call(this,null,t)}uu(vD,Ed,{transform:function(t,e){var n=e.dataflow,r=this.value,i=function(t){var e,n=t.type,r="";if(n===XS)return XS+"-"+NS;(function(t){var e=t.type;return mk(e)&&e!==VS&&e!==GS&&(t.scheme||t.range&&t.range.length&&t.range.every(pu))})(t)&&(r=2===(e=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0)?XS+"-":3===e?YS+"-":"");return(r+n||NS).toLowerCase()}(t);for(i in r&&i===r.type||(this.value=r=pk(i)()),t)if(!gD[i]){if("padding"===i&&pD(r.type))continue;Vo(r[i])?r[i](t[i]):n.warn("Unsupported scale property: "+i)}return function(t,e,n){var r=t.type,i=e.round||!1,a=e.range;if(null!=e.rangeStep)a=function(t,e,n){t!==tk&&t!==QS&&eo("Only band and point scales support rangeStep.");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i=t===QS?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*ZS(n,i,r)]}(r,e,n);else if(e.scheme&&(a=function(t,e,n){var r,i=e.schemeExtent;yo(e.scheme)?r=Ek(e.scheme,e.interpolate,e.interpolateGamma):(r=Fk(e.scheme.toLowerCase()))||eo("Unrecognized scheme name: ".concat(e.scheme));return n=t===JS?n+1:t===ek?n-1:t===qS||t===$S?+e.schemeCount||5:n,wk(t)?yD(r,i,e.reverse):Vo(r)?Mk(yD(r,i),n):t===KS?r:r.slice(0,n)}(r,e,n),Vo(a))){if(t.interpolator)return t.interpolator(a);eo("Scale type ".concat(r," does not support interpolating color schemes."))}if(a&&wk(r))return t.interpolator(Ek(xD(a,e.reverse),e.interpolate,e.interpolateGamma));a&&e.interpolate&&t.interpolate?t.interpolate(Ak(e.interpolate,e.interpolateGamma)):Vo(t.round)?t.round(i):Vo(t.rangeRound)&&t.interpolate(i?_y:Oy.Z);a&&t.range(xD(a,e.reverse))}(r,t,function(t,e,n){var r=e.bins;if(r&&!yo(r)){var i=t.domain(),a=i[0],o=Co(i),u=r.step,s=null==r.start?a:r.start,l=null==r.stop?o:r.stop;u||eo("Scale bins parameter missing step property."),s<a&&(s=u*Math.ceil(a/u)),l>o&&(l=u*Math.floor(o/u)),r=qp(s,l+u/2,u)}r?t.bins=r:t.bins&&delete t.bins;t.type===ek&&(r?e.domain||e.domainRaw||(t.domain(r),n=r.length):t.bins=t.domain());return n}(r,t,function(t,e,n){var r=function(t,e,n){return e?(t.domain(mD(t.type,e,n)),e.length):-1}(t,e.domainRaw,n);if(r>-1)return r;var i,a,o=e.domain,u=t.type,s=e.zero||void 0===e.zero&&function(t){var e=t.type;return!t.bins&&(e===NS||e===US||e===HS)}(t);if(!o)return 0;pD(u)&&e.padding&&o[0]!==Co(o)&&(o=function(t,e,n,r,i,a){var o=Math.abs(Co(n)-n[0]),u=o/(o-2*r),s=t===zS?Ro(e,null,u):t===HS?Zo(e,null,u,.5):t===US?Zo(e,null,u,i||1):t===WS?No(e,null,u,a||1):Lo(e,null,u);return e=e.slice(),e[0]=s[0],e[e.length-1]=s[1],e}(u,o,e.range,e.padding,e.exponent,e.constant));if((s||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(o=o.slice()).length-1||1,s&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=e.domainMin&&(o[0]=e.domainMin),null!=e.domainMax&&(o[i]=e.domainMax),null!=e.domainMid)){var l=(a=e.domainMid)>o[i]?i+1:a<o[0]?0:i;l!==i&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(l,0,a)}t.domain(mD(u,o,n)),u===KS&&t.unknown(e.domainImplicit?Ow:void 0);e.nice&&t.nice&&t.nice(!0!==e.nice&&Lk(t,e.nice)||null);return o.length}(r,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}}),uu(bD,Ed,{transform:function(t,e){var n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(Xh(t.sort)),this.modified(n),e}});var wD="zero",SD="center",kD="normalize",CD=["y0","y1"];function ED(t){Ed.call(this,null,t)}function MD(t,e,n,r,i){for(var a,o=(e-t.sum)/2,u=t.length,s=0;s<u;++s)(a=t[s])[r]=o,a[i]=o+=Math.abs(n(a))}function OD(t,e,n,r,i){for(var a,o=1/t.sum,u=0,s=t.length,l=0,c=0;l<s;++l)(a=t[l])[r]=u,a[i]=u=o*(c+=Math.abs(n(a)))}function AD(t,e,n,r,i){for(var a,o,u=0,s=0,l=t.length,c=0;c<l;++c)(a=+n(o=t[c]))<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}ED.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:wD,values:[wD,SD,kD]},{name:"as",type:"string",array:!0,length:2,default:CD}]},uu(ED,Ed,{transform:function(t,e){var n,r,i,a,o=t.as||CD,u=o[0],s=o[1],l=Xh(t.sort),c=t.field||uo,f=t.offset===SD?MD:t.offset===kD?OD:AD;for(n=function(t,e,n,r){var i,a,o,u,s,l,c,f,h,d=[],p=function(t){return t(s)};if(null==e)d.push(t.slice());else for(i={},a=0,o=t.length;a<o;++a)s=t[a],(c=i[l=e.map(p)])||(i[l]=c=[],d.push(c)),c.push(s);for(l=0,h=0,u=d.length;l<u;++l){for(a=0,f=0,o=(c=d[l]).length;a<o;++a)f+=Math.abs(r(c[a]));c.sum=f,f>h&&(h=f),n&&c.sort(n)}return d.max=h,d}(e.source,t.groupby,l,c),r=0,i=n.length,a=n.max;r<i;++r)f(n[r],a,c,u,s);return e.reflow(t.modified()).modifies(o)}});var _D=function(t){return t};function DD(t,e){t&&FD.hasOwnProperty(t.type)&&FD[t.type](t,e)}var TD={Feature:function(t,e){DD(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)DD(n[r].geometry,e)}},FD={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ID(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ID(n[r],e,0)},Polygon:function(t,e){PD(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)PD(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)DD(n[r],e)}};function ID(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function PD(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ID(t[n],e,1);e.polygonEnd()}function jD(t,e){t&&TD.hasOwnProperty(t.type)?TD[t.type](t,e):DD(t,e)}var BD=function(){function t(){(0,J.Z)(this,t),this._partials=new Float64Array(32),this._n=0}return(0,K.Z)(t,[{key:"add",value:function(t){for(var e=this._partials,n=0,r=0;r<this._n&&r<32;r++){var i=e[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(e[n++]=o),t=a}return e[n]=t,this._n=n+1,this}},{key:"valueOf",value:function(){var t,e,n,r=this._partials,i=this._n,a=0;if(i>0){for(a=r[--i];i>0&&(t=a,!(n=(e=r[--i])-((a=t+e)-t))););i>0&&(n<0&&r[i-1]<0||n>0&&r[i-1]>0)&&(e=2*n)==(t=a+e)-a&&(a=t)}return a}}]),t}();n(25438);var LD=1e-6,RD=1e-12,ZD=Math.PI,ND=ZD/2,zD=ZD/4,UD=2*ZD,HD=180/ZD,WD=ZD/180,VD=Math.abs,GD=Math.atan,XD=Math.atan2,YD=Math.cos,qD=Math.ceil,$D=Math.exp,JD=(Math.floor,Math.hypot),KD=Math.log,QD=Math.pow,tT=Math.sin,eT=Math.sign||function(t){return t>0?1:t<0?-1:0},nT=Math.sqrt,rT=Math.tan;function iT(t){return t>1?0:t<-1?ZD:Math.acos(t)}function aT(t){return t>1?ND:t<-1?-ND:Math.asin(t)}function oT(){}var uT,sT,lT,cT,fT=new BD,hT=new BD,dT={point:oT,lineStart:oT,lineEnd:oT,polygonStart:function(){dT.lineStart=pT,dT.lineEnd=mT},polygonEnd:function(){dT.lineStart=dT.lineEnd=dT.point=oT,fT.add(VD(hT)),hT=new BD},result:function(){var t=fT/2;return fT=new BD,t}};function pT(){dT.point=gT}function gT(t,e){dT.point=vT,uT=lT=t,sT=cT=e}function vT(t,e){hT.add(cT*t-lT*e),lT=t,cT=e}function mT(){vT(uT,sT)}var yT=dT,xT=1/0,bT=xT,wT=-xT,ST=wT,kT={point:function(t,e){t<xT&&(xT=t);t>wT&&(wT=t);e<bT&&(bT=e);e>ST&&(ST=e)},lineStart:oT,lineEnd:oT,polygonStart:oT,polygonEnd:oT,result:function(){var t=[[xT,bT],[wT,ST]];return wT=ST=-(bT=xT=1/0),t}};var CT,ET,MT,OT,AT=kT,_T=0,DT=0,TT=0,FT=0,IT=0,PT=0,jT=0,BT=0,LT=0,RT={point:ZT,lineStart:NT,lineEnd:HT,polygonStart:function(){RT.lineStart=WT,RT.lineEnd=VT},polygonEnd:function(){RT.point=ZT,RT.lineStart=NT,RT.lineEnd=HT},result:function(){var t=LT?[jT/LT,BT/LT]:PT?[FT/PT,IT/PT]:TT?[_T/TT,DT/TT]:[NaN,NaN];return _T=DT=TT=FT=IT=PT=jT=BT=LT=0,t}};function ZT(t,e){_T+=t,DT+=e,++TT}function NT(){RT.point=zT}function zT(t,e){RT.point=UT,ZT(MT=t,OT=e)}function UT(t,e){var n=t-MT,r=e-OT,i=nT(n*n+r*r);FT+=i*(MT+t)/2,IT+=i*(OT+e)/2,PT+=i,ZT(MT=t,OT=e)}function HT(){RT.point=ZT}function WT(){RT.point=GT}function VT(){XT(CT,ET)}function GT(t,e){RT.point=XT,ZT(CT=MT=t,ET=OT=e)}function XT(t,e){var n=t-MT,r=e-OT,i=nT(n*n+r*r);FT+=i*(MT+t)/2,IT+=i*(OT+e)/2,PT+=i,jT+=(i=OT*t-MT*e)*(MT+t),BT+=i*(OT+e),LT+=3*i,ZT(MT=t,OT=e)}var YT=RT;function qT(t){this._context=t}qT.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,UD)}},result:oT};var $T,JT,KT,QT,tF,eF=new BD,nF={point:oT,lineStart:function(){nF.point=rF},lineEnd:function(){$T&&iF(JT,KT),nF.point=oT},polygonStart:function(){$T=!0},polygonEnd:function(){$T=null},result:function(){var t=+eF;return eF=new BD,t}};function rF(t,e){nF.point=iF,JT=QT=t,KT=tF=e}function iF(t,e){QT-=t,tF-=e,eF.add(nT(QT*QT+tF*tF)),QT=t,tF=e}var aF,oF,uF,sF,lF,cF,fF,hF,dF=nF,pF=function(){function t(e){(0,J.Z)(this,t),this._append=null==e?gF:function(t){var e=Math.floor(t);if(!(e>=0))throw new RangeError("invalid digits: ".concat(t));if(e>15)return gF;if(e!==lF){var n=Math.pow(10,e);lF=e,cF=function(t){var e=1;this._+=t[0];for(var r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}return cF}(e),this._radius=4.5,this._=""}return(0,K.Z)(t,[{key:"pointRadius",value:function(t){return this._radius=+t,this}},{key:"polygonStart",value:function(){this._line=0}},{key:"polygonEnd",value:function(){this._line=NaN}},{key:"lineStart",value:function(){this._point=0}},{key:"lineEnd",value:function(){0===this._line&&(this._+="Z"),this._point=NaN}},{key:"point",value:function(t,e){switch(this._point){case 0:this._append(aF||(aF=Fm(["M",",",""])),t,e),this._point=1;break;case 1:this._append(oF||(oF=Fm(["L",",",""])),t,e);break;default:if(this._append(uF||(uF=Fm(["M",",",""])),t,e),this._radius!==fF||this._append!==cF){var n=this._radius,r=this._;this._="",this._append(sF||(sF=Fm(["m0,","a",","," 0 1,1 0,","a",","," 0 1,1 0,","z"])),n,n,n,-2*n,n,n,2*n),fF=n,cF=this._append,hF=this._,this._=r}this._+=hF}}},{key:"result",value:function(){var t=this._;return this._="",t.length?t:null}}]),t}();function gF(t){var e=1;this._+=t[0];for(var n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function vF(t,e){var n,r,i=3,a=4.5;function o(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),jD(t,n(r))),r.result()}return o.area=function(t){return jD(t,n(yT)),yT.result()},o.measure=function(t){return jD(t,n(dF)),dF.result()},o.bounds=function(t){return jD(t,n(AT)),AT.result()},o.centroid=function(t){return jD(t,n(YT)),YT.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,_D):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new pF(i)):new qT(e=t),"function"!=typeof a&&r.pointRadius(a),o):e},o.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),o):a},o.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{var n=Math.floor(t);if(!(n>=0))throw new RangeError("invalid digits: ".concat(t));i=n}return null===e&&(r=new pF(i)),o},o.projection(t).digits(i).context(e)}function mF(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:oT,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function yF(t,e){return VD(t[0]-e[0])<LD&&VD(t[1]-e[1])<LD}function xF(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function bF(t,e,n,r,i){var a,o,u=[],s=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(yF(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2e-6}u.push(n=new xF(r,t,null,!0)),s.push(n.o=new xF(r,null,n,!1)),u.push(n=new xF(o,t,null,!1)),s.push(n.o=new xF(o,null,n,!0))}})),u.length){for(s.sort(e),wF(u),wF(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var l,c,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,o=l.length;a<o;++a)i.point((c=l[a])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(l=h.p.z,a=l.length-1;a>=0;--a)i.point((c=l[a])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function wF(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function SF(t){return[XD(t[1],t[0]),aT(t[2])]}function kF(t){var e=t[0],n=t[1],r=YD(n);return[r*YD(e),r*tT(e),tT(n)]}function CF(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function EF(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function MF(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function OF(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function AF(t){var e=nT(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _F(t){return VD(t[0])<=ZD?t[0]:eT(t[0])*((VD(t[0])+ZD)%UD-ZD)}var DF=G().mark(IF);function TF(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return FF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FF(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function FF(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IF(t){var e,n,r;return G().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e=TF(t),i.prev=1,e.s();case 3:if((n=e.n()).done){i.next=8;break}return r=n.value,i.delegateYield(r,"t0",6);case 6:i.next=3;break;case 8:i.next=13;break;case 10:i.prev=10,i.t1=i.catch(1),e.e(i.t1);case 13:return i.prev=13,e.f(),i.finish(13);case 16:case"end":return i.stop()}}),DF,null,[[1,10,13,16]])}function PF(t){return Array.from(IF(t))}function jF(t,e,n,r){return function(i){var a,o,u,s=e(i),l=mF(),c=e(l),f=!1,h={point:d,lineStart:g,lineEnd:v,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=x,o=[],a=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=v,o=PF(o);var t=function(t,e){var n=_F(e),r=e[1],i=tT(r),a=[tT(n),-YD(n),0],o=0,u=0,s=new BD;1===i?r=ND+LD:-1===i&&(r=-ND-LD);for(var l=0,c=t.length;l<c;++l)if(h=(f=t[l]).length)for(var f,h,d=f[h-1],p=_F(d),g=d[1]/2+zD,v=tT(g),m=YD(g),y=0;y<h;++y,p=b,v=S,m=k,d=x){var x=f[y],b=_F(x),w=x[1]/2+zD,S=tT(w),k=YD(w),C=b-p,E=C>=0?1:-1,M=E*C,O=M>ZD,A=v*S;if(s.add(XD(A*E*tT(M),m*k+A*YD(M))),o+=O?C+E*UD:C,O^p>=n^b>=n){var _=EF(kF(d),kF(x));AF(_);var D=EF(a,_);AF(D);var T=(O^C>=0?-1:1)*aT(D[2]);(r>T||r===T&&(_[0]||_[1]))&&(u+=O^C>=0?1:-1)}}return(o<-1e-6||o<LD&&s<-1e-12)^1&u}(a,r);o.length?(f||(i.polygonStart(),f=!0),bF(o,LF,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){s.point(t,e)}function g(){h.point=p,s.lineStart()}function v(){h.point=d,s.lineEnd()}function m(t,e){u.push([t,e]),c.point(t,e)}function y(){c.lineStart(),u=[]}function x(){m(u[0][0],u[0][1]),c.lineEnd();var t,e,n,r,s=c.clean(),h=l.result(),d=h.length;if(u.pop(),a.push(u),u=null,d)if(1&s){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&s&&h.push(h.pop().concat(h.shift())),o.push(h.filter(BF))}return h}}function BF(t){return t.length>1}function LF(t,e){return((t=t.x)[0]<0?t[1]-ND-LD:ND-t[1])-((e=e.x)[0]<0?e[1]-ND-LD:ND-e[1])}var RF=jF((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var u=a>0?ZD:-ZD,s=VD(a-n);VD(s-ZD)<LD?(t.point(n,r=(r+o)/2>0?ND:-ND),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(a,r),e=0):i!==u&&s>=ZD&&(VD(n-i)<LD&&(n-=i*LD),VD(a-u)<LD&&(a-=u*LD),r=function(t,e,n,r){var i,a,o=tT(t-n);return VD(o)>LD?GD((tT(e)*(a=YD(r))*tT(n)-tT(r)*(i=YD(e))*tT(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=a,r=o),i=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*ND,r.point(-ZD,i),r.point(0,i),r.point(ZD,i),r.point(ZD,0),r.point(ZD,-i),r.point(0,-i),r.point(-ZD,-i),r.point(-ZD,0),r.point(-ZD,i);else if(VD(t[0]-e[0])>LD){var a=t[0]<e[0]?ZD:-ZD;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}),[-ZD,-ND]);function ZF(t,e,n,r,i,a){if(n){var o=YD(e),u=tT(e),s=r*n;null==i?(i=e+r*UD,a=e-s/2):(i=NF(o,i),a=NF(o,a),(r>0?i<a:i>a)&&(i+=r*UD));for(var l,c=i;r>0?c>a:c<a;c-=s)l=SF([o,-u*YD(c),-u*tT(c)]),t.point(l[0],l[1])}}function NF(t,e){(e=kF(e))[0]-=t,AF(e);var n=iT(-e[1]);return((-e[2]<0?-n:n)+UD-LD)%UD}function zF(t){var e=YD(t),n=6*WD,r=e>0,i=VD(e)>LD;function a(t,n){return YD(t)*YD(n)>e}function o(t,n,r){var i=[1,0,0],a=EF(kF(t),kF(n)),o=CF(a,a),u=a[0],s=o-u*u;if(!s)return!r&&t;var l=e*o/s,c=-e*u/s,f=EF(i,a),h=OF(i,l);MF(h,OF(a,c));var d=f,p=CF(h,d),g=CF(d,d),v=p*p-g*(CF(h,h)-1);if(!(v<0)){var m=nT(v),y=OF(d,(-p-m)/g);if(MF(y,h),y=SF(y),!r)return y;var x,b=t[0],w=n[0],S=t[1],k=n[1];w<b&&(x=b,b=w,w=x);var C=w-b,E=VD(C-ZD)<LD;if(!E&&k<S&&(x=S,S=k,k=x),E||C<LD?E?S+k>0^y[1]<(VD(y[0]-b)<LD?S:k):S<=y[1]&&y[1]<=k:C>ZD^(b<=y[0]&&y[0]<=w)){var M=OF(d,(-p+m)/g);return MF(M,h),[y,SF(M)]}}}function u(e,n){var i=r?t:ZD-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return jF(a,(function(t){var e,n,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,h){var d,p=[f,h],g=a(f,h),v=r?g?0:u(f,h):g?u(f+(f<0?ZD:-ZD),h):0;if(!e&&(l=s=g)&&t.lineStart(),g!==s&&(!(d=o(e,p))||yF(e,d)||yF(p,d))&&(p[2]=1),g!==s)c=0,g?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^g){var m;v&n||!(m=o(p,e,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1],3)))}!g||e&&yF(e,p)||t.point(p[0],p[1]),e=p,s=g,n=v},lineEnd:function(){s&&t.lineEnd(),e=null},clean:function(){return c|(l&&s)<<1}}}),(function(e,r,i,a){ZF(a,t,n,i,e,r)}),r?[0,-t]:[-ZD,t-ZD])}var UF=1e9,HF=-UF;function WF(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,u,l){var c=0,f=0;if(null==i||(c=o(i,u))!==(f=o(a,u))||s(i,a)<0^u>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+u+4)%4)!==f);else l.point(a[0],a[1])}function o(r,i){return VD(r[0]-t)<LD?i>0?0:3:VD(r[0]-n)<LD?i>0?2:1:VD(r[1]-e)<LD?i>0?1:0:i>0?3:2}function u(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var s,l,c,f,h,d,p,g,v,m,y,x=o,b=mF(),w={point:S,lineStart:function(){w.point=k,l&&l.push(c=[]);m=!0,v=!1,p=g=NaN},lineEnd:function(){s&&(k(f,h),d&&v&&b.rejoin(),s.push(b.result()));w.point=S,v&&x.lineEnd()},polygonStart:function(){x=b,s=[],l=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var a,o,u=l[n],s=1,c=u.length,f=u[0],h=f[0],d=f[1];s<c;++s)a=h,o=d,h=(f=u[s])[0],d=f[1],o<=r?d>r&&(h-a)*(r-o)>(d-o)*(t-a)&&++e:d<=r&&(h-a)*(r-o)<(d-o)*(t-a)&&--e;return e}(),n=y&&e,i=(s=PF(s)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&bF(s,u,e,a,o),o.polygonEnd());x=o,s=l=c=null}};function S(t,e){i(t,e)&&x.point(t,e)}function k(a,o){var u=i(a,o);if(l&&c.push([a,o]),m)f=a,h=o,d=u,m=!1,u&&(x.lineStart(),x.point(a,o));else if(u&&v)x.point(a,o);else{var s=[p=Math.max(HF,Math.min(UF,p)),g=Math.max(HF,Math.min(UF,g))],b=[a=Math.max(HF,Math.min(UF,a)),o=Math.max(HF,Math.min(UF,o))];!function(t,e,n,r,i,a){var o,u=t[0],s=t[1],l=0,c=1,f=e[0]-u,h=e[1]-s;if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>l&&(l=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<c&&(c=o)}if(o=r-s,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>l&&(l=o)}if(o=a-s,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<c&&(c=o)}return l>0&&(t[0]=u+l*f,t[1]=s+l*h),c<1&&(e[0]=u+c*f,e[1]=s+c*h),!0}}}}}(s,b,t,e,n,r)?u&&(x.lineStart(),x.point(a,o),y=!1):(v||(x.lineStart(),x.point(s[0],s[1])),x.point(b[0],b[1]),u||x.lineEnd(),y=!1)}p=a,g=o,v=u}return w}}function VF(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function GF(t,e){return VD(t)>ZD&&(t-=Math.round(t/UD)*UD),[t,e]}function XF(t,e,n){return(t%=UD)?e||n?VF(qF(t),$F(e,n)):qF(t):e||n?$F(e,n):GF}function YF(t){return function(e,n){return VD(e+=t)>ZD&&(e-=Math.round(e/UD)*UD),[e,n]}}function qF(t){var e=YF(t);return e.invert=YF(-t),e}function $F(t,e){var n=YD(t),r=tT(t),i=YD(e),a=tT(e);function o(t,e){var o=YD(e),u=YD(t)*o,s=tT(t)*o,l=tT(e),c=l*n+u*r;return[XD(s*i-c*a,u*n-l*r),aT(c*i+s*a)]}return o.invert=function(t,e){var o=YD(e),u=YD(t)*o,s=tT(t)*o,l=tT(e),c=l*i-s*a;return[XD(s*i+l*a,u*n+c*r),aT(c*n-u*r)]},o}function JF(t){return function(e){var n=new KF;for(var r in t)n[r]=t[r];return n.stream=e,n}}function KF(){}function QF(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),jD(n,t.stream(AT)),e(AT.result()),null!=r&&t.clipExtent(r),t}function tI(t,e,n){return QF(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,u=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,u])}),n)}function eI(t,e,n){return tI(t,[[0,0],e],n)}function nI(t,e,n){return QF(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])}),n)}function rI(t,e,n){return QF(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])}),n)}GF.invert=GF,KF.prototype={constructor:KF,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var iI=YD(30*WD);function aI(t,e){return+e?function(t,e){function n(r,i,a,o,u,s,l,c,f,h,d,p,g,v){var m=l-r,y=c-i,x=m*m+y*y;if(x>4*e&&g--){var b=o+h,w=u+d,S=s+p,k=nT(b*b+w*w+S*S),C=aT(S/=k),E=VD(VD(S)-1)<LD||VD(a-f)<LD?(a+f)/2:XD(w,b),M=t(E,C),O=M[0],A=M[1],_=O-r,D=A-i,T=y*_-m*D;(T*T/x>e||VD((m*_+y*D)/x-.5)>.3||o*h+u*d+s*p<iI)&&(n(r,i,a,o,u,s,O,A,E,b/=k,w/=k,S,g,v),v.point(O,A),n(O,A,E,b,w,S,l,c,f,h,d,p,g,v))}}return function(e){var r,i,a,o,u,s,l,c,f,h,d,p,g={point:v,lineStart:m,lineEnd:x,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){c=NaN,g.point=y,e.lineStart()}function y(r,i){var a=kF([r,i]),o=t(r,i);n(c,f,l,h,d,p,c=o[0],f=o[1],l=r,h=a[0],d=a[1],p=a[2],16,e),e.point(c,f)}function x(){g.point=v,e.lineEnd()}function b(){m(),g.point=w,g.lineEnd=S}function w(t,e){y(r=t,e),i=c,a=f,o=h,u=d,s=p,g.point=y}function S(){n(c,f,l,h,d,p,i,a,r,o,u,s,16,e),g.lineEnd=x,x()}return g}}(t,e):function(t){return JF({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var oI=JF({point:function(t,e){this.stream.point(t*WD,e*WD)}});function uI(t,e,n,r,i,a){if(!a)return function(t,e,n,r,i){function a(a,o){return[e+t*(a*=r),n-t*(o*=i)]}return a.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},a}(t,e,n,r,i);var o=YD(a),u=tT(a),s=o*t,l=u*t,c=o/t,f=u/t,h=(u*n-o*e)/t,d=(u*e+o*n)/t;function p(t,a){return[s*(t*=r)-l*(a*=i)+e,n-l*t-s*a]}return p.invert=function(t,e){return[r*(c*t-f*e+h),i*(d-f*t-c*e)]},p}function sI(t){return lI((function(){return t}))()}function lI(t){var e,n,r,i,a,o,u,s,l,c,f=150,h=480,d=250,p=0,g=0,v=0,m=0,y=0,x=0,b=1,w=1,S=null,k=RF,C=null,E=_D,M=.5;function O(t){return s(t[0]*WD,t[1]*WD)}function A(t){return(t=s.invert(t[0],t[1]))&&[t[0]*HD,t[1]*HD]}function _(){var t=uI(f,0,0,b,w,x).apply(null,e(p,g)),r=uI(f,h-t[0],d-t[1],b,w,x);return n=XF(v,m,y),u=VF(e,r),s=VF(n,u),o=aI(u,M),D()}function D(){return l=c=null,O}return O.stream=function(t){return l&&c===t?l:l=oI(function(t){return JF({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(k(o(E(c=t)))))},O.preclip=function(t){return arguments.length?(k=t,S=void 0,D()):k},O.postclip=function(t){return arguments.length?(E=t,C=r=i=a=null,D()):E},O.clipAngle=function(t){return arguments.length?(k=+t?zF(S=t*WD):(S=null,RF),D()):S*HD},O.clipExtent=function(t){return arguments.length?(E=null==t?(C=r=i=a=null,_D):WF(C=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),D()):null==C?null:[[C,r],[i,a]]},O.scale=function(t){return arguments.length?(f=+t,_()):f},O.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],_()):[h,d]},O.center=function(t){return arguments.length?(p=t[0]%360*WD,g=t[1]%360*WD,_()):[p*HD,g*HD]},O.rotate=function(t){return arguments.length?(v=t[0]%360*WD,m=t[1]%360*WD,y=t.length>2?t[2]%360*WD:0,_()):[v*HD,m*HD,y*HD]},O.angle=function(t){return arguments.length?(x=t%360*WD,_()):x*HD},O.reflectX=function(t){return arguments.length?(b=t?-1:1,_()):b<0},O.reflectY=function(t){return arguments.length?(w=t?-1:1,_()):w<0},O.precision=function(t){return arguments.length?(o=aI(u,M=t*t),D()):nT(M)},O.fitExtent=function(t,e){return tI(O,t,e)},O.fitSize=function(t,e){return eI(O,t,e)},O.fitWidth=function(t,e){return nI(O,t,e)},O.fitHeight=function(t,e){return rI(O,t,e)},function(){return e=t.apply(this,arguments),O.invert=e.invert&&A,_()}}function cI(t){var e=0,n=ZD/3,r=lI(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*WD,n=t[1]*WD):[e*HD,n*HD]},i}function fI(t,e){var n=tT(t),r=(n+tT(e))/2;if(VD(r)<LD)return function(t){var e=YD(t);function n(t,n){return[t*e,tT(n)/e]}return n.invert=function(t,n){return[t/e,aT(n*e)]},n}(t);var i=1+n*(2*r-n),a=nT(i)/r;function o(t,e){var n=nT(i-2*r*tT(e))/r;return[n*tT(t*=r),a-n*YD(t)]}return o.invert=function(t,e){var n=a-e,o=XD(t,VD(n))*eT(n);return n*r<0&&(o-=ZD*eT(t)*eT(n)),[o/r,aT((i-(t*t+n*n)*r*r)/(2*r))]},o}function hI(){return cI(fI).scale(155.424).center([0,33.6442])}function dI(){return hI().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function pI(t){return function(e,n){var r=YD(e),i=YD(n),a=t(r*i);return a===1/0?[2,0]:[a*i*tT(e),a*tT(n)]}}function gI(t){return function(e,n){var r=nT(e*e+n*n),i=t(r),a=tT(i),o=YD(i);return[XD(e*a,r*o),aT(r&&n*a/r)]}}var vI=pI((function(t){return nT(2/(1+t))}));vI.invert=gI((function(t){return 2*aT(t/2)}));var mI=pI((function(t){return(t=iT(t))&&t/tT(t)}));function yI(t,e){return[t,KD(rT((ND+e)/2))]}function xI(t){var e,n,r,i=sI(t),a=i.center,o=i.scale,u=i.translate,s=i.clipExtent,l=null;function c(){var a=ZD*o(),u=i(function(t){function e(e){return(e=t(e[0]*WD,e[1]*WD))[0]*=HD,e[1]*=HD,e}return t=XF(t[0]*WD,t[1]*WD,t.length>2?t[2]*WD:0),e.invert=function(e){return(e=t.invert(e[0]*WD,e[1]*WD))[0]*=HD,e[1]*=HD,e},e}(i.rotate()).invert([0,0]));return s(null==l?[[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]]:t===yI?[[Math.max(u[0]-a,l),e],[Math.min(u[0]+a,n),r]]:[[l,Math.max(u[1]-a,e)],[n,Math.min(u[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),c()):o()},i.translate=function(t){return arguments.length?(u(t),c()):u()},i.center=function(t){return arguments.length?(a(t),c()):a()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function bI(t){return rT((ND+t)/2)}function wI(t,e){var n=YD(t),r=t===e?tT(t):KD(n/YD(e))/KD(bI(e)/bI(t)),i=n*QD(bI(t),r)/r;if(!r)return yI;function a(t,e){i>0?e<-ND+LD&&(e=-ND+LD):e>ND-LD&&(e=ND-LD);var n=i/QD(bI(e),r);return[n*tT(r*t),i-n*YD(r*t)]}return a.invert=function(t,e){var n=i-e,a=eT(r)*nT(t*t+n*n),o=XD(t,VD(n))*eT(n);return n*r<0&&(o-=ZD*eT(t)*eT(n)),[o/r,2*GD(QD(i/a,1/r))-ND]},a}function SI(t,e){return[t,e]}function kI(t,e){var n=YD(t),r=t===e?tT(t):(n-YD(e))/(e-t),i=n/r+t;if(VD(r)<LD)return SI;function a(t,e){var n=i-e,a=r*t;return[n*tT(a),i-n*YD(a)]}return a.invert=function(t,e){var n=i-e,a=XD(t,VD(n))*eT(n);return n*r<0&&(a-=ZD*eT(t)*eT(n)),[a/r,i-eT(r)*nT(t*t+n*n)]},a}mI.invert=gI((function(t){return t})),yI.invert=function(t,e){return[t,2*GD($D(e))-ND]},SI.invert=SI;var CI=1.340264,EI=-.081106,MI=893e-6,OI=.003796,AI=nT(3)/2;function _I(t,e){var n=aT(AI*tT(e)),r=n*n,i=r*r*r;return[t*YD(n)/(AI*(CI+3*EI*r+i*(7*MI+9*OI*r))),n*(CI+EI*r+i*(MI+OI*r))]}function DI(t,e){var n=YD(e),r=YD(t)*n;return[n*tT(t)/r,tT(e)/r]}function TI(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function FI(t,e){return[YD(e)*tT(t),tT(e)]}function II(t,e){var n=YD(e),r=1+YD(t)*n;return[n*tT(t)/r,tT(e)/r]}function PI(t,e){return[KD(rT((ND+e)/2)),-t]}_I.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(CI+EI*i+a*(MI+OI*i))-e)/(CI+3*EI*i+a*(7*MI+9*OI*i)))*r)*i*i,!(VD(n)<RD));++o);return[AI*t*(CI+3*EI*i+a*(7*MI+9*OI*i))/YD(r),aT(tT(r)/AI)]},DI.invert=gI(GD),TI.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(VD(n)>LD&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},FI.invert=gI(aT),II.invert=gI((function(t){return 2*GD(t)})),PI.invert=function(t,e){return[-e,2*GD($D(t))-ND]};var jI=Math.abs,BI=(Math.atan,Math.atan2,Math.ceil,Math.cos),LI=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),RI=(Math.tan,Math.PI),ZI=RI/2,NI=(Math.SQRT1_2,UI(2));UI(RI);function zI(t){return t>1?ZI:t<-1?-ZI:Math.asin(t)}function UI(t){return t>0?Math.sqrt(t):0}function HI(t,e){var n,r=t*LI(e),i=30;do{e-=n=(e+LI(e)-r)/(1+BI(e))}while(jI(n)>1e-6&&--i>0);return e/2}var WI=function(t,e,n){function r(r,i){return[t*r*BI(i=HI(n,i)),e*LI(i)]}return r.invert=function(r,i){return i=zI(i/e),[r/(t*BI(i)),zI((2*i+LI(2*i))/n)]},r}(NI/ZI,NI,RI);var VI=vF(),GI=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function XI(t,e){return function n(){var r=e();return r.type=t,r.path=vF().projection(r),r.copy=r.copy||function(){var t=n();return GI.forEach((function(e){r[e]&&t[e](r[e]())})),t.path.pointRadius(r.path.pointRadius()),t},r}}function YI(t,e){if(!t||"string"!=typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?($I[t]=XI(t,e),this):$I[t]||null}function qI(t){return t&&t.path||VI}var $I={albers:dI,albersusa:function(){var t,e,n,r,i,a,o=dI(),u=hI().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=hI().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){a=[t,e]}};function c(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function f(){return t=e=null,c}return c.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:o).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[o.stream(e=n),u.stream(n),s.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(o.precision(t),u.precision(t),s.precision(t),f()):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),u.scale(.35*t),s.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],c=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,c-.238*e],[a+.455*e,c+.238*e]]).stream(l),r=u.translate([a-.307*e,c+.201*e]).clipExtent([[a-.425*e+LD,c+.12*e+LD],[a-.214*e-LD,c+.234*e-LD]]).stream(l),i=s.translate([a-.205*e,c+.212*e]).clipExtent([[a-.214*e+LD,c+.166*e+LD],[a-.115*e-LD,c+.234*e-LD]]).stream(l),f()},c.fitExtent=function(t,e){return tI(c,t,e)},c.fitSize=function(t,e){return eI(c,t,e)},c.fitWidth=function(t,e){return nI(c,t,e)},c.fitHeight=function(t,e){return rI(c,t,e)},c.scale(1070)},azimuthalequalarea:function(){return sI(vI).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return sI(mI).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return cI(wI).scale(109.5).parallels([30,30])},conicequalarea:hI,conicequidistant:function(){return cI(kI).scale(131.154).center([0,13.9389])},equalEarth:function(){return sI(_I).scale(177.158)},equirectangular:function(){return sI(SI).scale(152.63)},gnomonic:function(){return sI(DI).scale(144.049).clipAngle(60)},identity:function(){var t,e,n,r,i,a,o,u=1,s=0,l=0,c=1,f=1,h=0,d=null,p=1,g=1,v=JF({point:function(t,e){var n=x([t,e]);this.stream.point(n[0],n[1])}}),m=_D;function y(){return p=u*c,g=u*f,a=o=null,x}function x(n){var r=n[0]*p,i=n[1]*g;if(h){var a=i*t-r*e;r=r*t+i*e,i=a}return[r+s,i+l]}return x.invert=function(n){var r=n[0]-s,i=n[1]-l;if(h){var a=i*t+r*e;r=r*t-i*e,i=a}return[r/p,i/g]},x.stream=function(t){return a&&o===t?a:a=v(m(o=t))},x.postclip=function(t){return arguments.length?(m=t,d=n=r=i=null,y()):m},x.clipExtent=function(t){return arguments.length?(m=null==t?(d=n=r=i=null,_D):WF(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==d?null:[[d,n],[r,i]]},x.scale=function(t){return arguments.length?(u=+t,y()):u},x.translate=function(t){return arguments.length?(s=+t[0],l=+t[1],y()):[s,l]},x.angle=function(n){return arguments.length?(e=tT(h=n%360*WD),t=YD(h),y()):h*HD},x.reflectX=function(t){return arguments.length?(c=t?-1:1,y()):c<0},x.reflectY=function(t){return arguments.length?(f=t?-1:1,y()):f<0},x.fitExtent=function(t,e){return tI(x,t,e)},x.fitSize=function(t,e){return eI(x,t,e)},x.fitWidth=function(t,e){return nI(x,t,e)},x.fitHeight=function(t,e){return rI(x,t,e)},x},mercator:function(){return xI(yI).scale(961/UD)},mollweide:function(){return sI(WI).scale(169.529)},naturalEarth1:function(){return sI(TI).scale(175.295)},orthographic:function(){return sI(FI).scale(249.5).clipAngle(90.000001)},stereographic:function(){return sI(II).scale(250).clipAngle(142)},transversemercator:function(){var t=xI(PI),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}};for(var JI in $I)YI(JI,$I[JI]);function KI(t,e,n){var r=qp(t,e-LD,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function QI(t,e,n){var r=qp(t,e-LD,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function tP(){var t,e,n,r,i,a,o,u,s,l,c,f,h=10,d=h,p=90,g=360,v=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return qp(qD(r/p)*p,n,p).map(c).concat(qp(qD(u/g)*g,o,g).map(f)).concat(qp(qD(e/h)*h,t,h).filter((function(t){return VD(t%p)>LD})).map(s)).concat(qp(qD(a/d)*d,i,d).filter((function(t){return VD(t%g)>LD})).map(l))}return m.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},m.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(o).slice(1),c(n).reverse().slice(1),f(u).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),m.precision(v)):[[r,u],[n,o]]},m.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),m.precision(v)):[[e,a],[t,i]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],m):[p,g]},m.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],m):[h,d]},m.precision=function(h){return arguments.length?(v=+h,s=KI(a,i,90),l=QI(e,t,v),c=KI(u,o,90),f=QI(r,n,v),m):v},m.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function eP(){}var nP=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function rP(){var t=1,e=1,n=o;function r(t,e){return e.map((function(e){return i(t,e)}))}function i(r,i){var o=[],u=[];return function(n,r,i){var o,u,s,l,c,f,h=new Array,d=new Array;o=u=-1,l=n[0]>=r,nP[l<<1].forEach(p);for(;++o<t-1;)s=l,l=n[o+1]>=r,nP[s|l<<1].forEach(p);nP[l<<0].forEach(p);for(;++u<e-1;){for(o=-1,l=n[u*t+t]>=r,c=n[u*t]>=r,nP[l<<1|c<<2].forEach(p);++o<t-1;)s=l,l=n[u*t+t+o+1]>=r,f=c,c=n[u*t+o+1]>=r,nP[s|l<<1|c<<2|f<<3].forEach(p);nP[l|c<<3].forEach(p)}o=-1,c=n[u*t]>=r,nP[c<<2].forEach(p);for(;++o<t-1;)f=c,c=n[u*t+o+1]>=r,nP[c<<2|f<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+o,t[0][1]+u],s=[t[1][0]+o,t[1][1]+u],l=a(r),c=a(s);(e=d[l])?(n=h[c])?(delete d[e.end],delete h[n.start],e===n?(e.ring.push(s),i(e.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(s),d[e.end=c]=e):(e=h[c])?(n=d[l])?(delete h[e.start],delete d[n.end],e===n?(e.ring.push(s),i(e.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=l]=e):h[l]=d[c]={start:l,end:c,ring:[r,s]}}nP[c<<3].forEach(p)}(r,i,(function(t){n(t,r,i),function(t){var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];for(;++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?o.push([t]):u.push(t)})),u.forEach((function(t){for(var e,n=0,r=o.length;n<r;++n)if(-1!==iP((e=o[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function o(n,r,i){n.forEach((function(n){var a,o=n[0],u=n[1],s=0|o,l=0|u,c=r[l*t+s];o>0&&o<t&&s===o&&(a=r[l*t+s-1],n[0]=o+(i-a)/(c-a)-.5),u>0&&u<e&&l===u&&(a=r[(l-1)*t+s],n[1]=u+(i-a)/(c-a)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.floor(n[0]),a=Math.floor(n[1]);return i>=0&&a>=0||eo("invalid size"),t=i,e=a,r},r.smooth=function(t){return arguments.length?(n=t?o:eP,r):n===o},r}function iP(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=aP(t,e[r]))return n;return 0}function aP(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,u=o-1;a<o;u=a++){var s=t[a],l=s[0],c=s[1],f=t[u],h=f[0],d=f[1];if(oP(s,f,e))return 0;c>r!=d>r&&n<(h-l)*(r-c)/(d-c)+l&&(i=-i)}return i}function oP(t,e,n){var r,i,a,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],a=n[r],o=e[r],i<=a&&a<=o||o<=a&&a<=i)}function uP(t,e,n){return function(r){var i=tu(r),a=n?Math.min(i[0],0):i[0],o=i[1],u=o-a,s=e?$u(a,o,t):u/(t+1);return qp(a+s,o,s)}}function sP(t){Ed.call(this,null,t)}function lP(t,e,n,r,i){var a=t.x1||0,o=t.y1||0,u=e*n<0;function s(t){t.forEach(l)}function l(t){u&&t.reverse(),t.forEach(c)}function c(t){t[0]=(t[0]-a)*e+r,t[1]=(t[1]-o)*n+i}return function(t){return t.coordinates.forEach(s),t}}function cP(t,e,n){var r=t>=0?t:np(e,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function fP(t){return Vo(t)?t:Jo(+t)}function hP(){var t=function(t){return t[0]},e=function(t){return t[1]},n=uo,r=[-1,-1],i=960,a=500,o=2;function u(u,s){var l=cP(r[0],u,t)>>o,c=cP(r[1],u,e)>>o,f=l?l+2:0,h=c?c+2:0,d=2*f+(i>>o),p=2*h+(a>>o),g=new Float32Array(d*p),v=new Float32Array(d*p),m=g;u.forEach((function(r){var i=f+(+t(r)>>o),a=h+(+e(r)>>o);i>=0&&i<d&&a>=0&&a<p&&(g[i+a*d]+=+n(r))})),l>0&&c>0?(dP(d,p,g,v,l),pP(d,p,v,g,c),dP(d,p,g,v,l),pP(d,p,v,g,c),dP(d,p,g,v,l),pP(d,p,v,g,c)):l>0?(dP(d,p,g,v,l),dP(d,p,v,g,l),dP(d,p,g,v,l),m=v):c>0&&(pP(d,p,g,v,c),pP(d,p,v,g,c),pP(d,p,g,v,c),m=v);for(var y=s?Math.pow(2,-2*o):1/K_(m),x=0,b=d*p;x<b;++x)m[x]*=y;return{values:m,scale:1<<o,width:d,height:p,x1:f,y1:h,x2:f+(i>>o),y2:h+(a>>o)}}return u.x=function(e){return arguments.length?(t=fP(e),u):t},u.y=function(t){return arguments.length?(e=fP(t),u):e},u.weight=function(t){return arguments.length?(n=fP(t),u):n},u.size=function(t){if(!arguments.length)return[i,a];var e=+t[0],n=+t[1];return e>=0&&n>=0||eo("invalid size"),i=e,a=n,u},u.cellSize=function(t){return arguments.length?((t=+t)>=1||eo("invalid cell size"),o=Math.floor(Math.log(t)/Math.LN2),u):1<<o},u.bandwidth=function(t){return arguments.length?(1===(t=Ho(t)).length&&(t=[+t[0],+t[0]]),2!==t.length&&eo("invalid bandwidth"),r=t,u):r},u}function dP(t,e,n,r,i){for(var a=1+(i<<1),o=0;o<e;++o)for(var u=0,s=0;u<t+i;++u)u<t&&(s+=n[u+o*t]),u>=i&&(u>=a&&(s-=n[u-a+o*t]),r[u-i+o*t]=s/Math.min(u+1,t-1+a-u,a))}function pP(t,e,n,r,i){for(var a=1+(i<<1),o=0;o<t;++o)for(var u=0,s=0;u<e+i;++u)u<e&&(s+=n[o+u*t]),u>=i&&(u>=a&&(s-=n[o+(u-a)*t]),r[o+(u-i)*t]=s/Math.min(u+1,e-1+a-u,a))}function gP(t){Ed.call(this,null,t)}sP.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},uu(sP,Ed,{transform:function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=t.field||ao,a=rP().smooth(!1!==t.smooth),o=t.thresholds||function(t,e,n){var r=uP(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(t.map((function(t){return Td(e(t).values)})))}(r,i,t),u=null===t.as?null:t.as||"contour",s=[];return r.forEach((function(e){var n=i(e),r=a.size([n.width,n.height])(n.values,yo(o)?o:o(n.values));!function(t,e,n,r){var i=r.scale||e.scale,a=r.translate||e.translate;Vo(i)&&(i=i(n,r));Vo(a)&&(a=a(n,r));if((1===i||null==i)&&!a)return;var o=(hu(i)?i:i[0])||1,u=(hu(i)?i:i[1])||1,s=a&&a[0]||0,l=a&&a[1]||0;t.forEach(lP(e,o,u,s,l))}(r,n,e,t),r.forEach((function(t){s.push(Vh(e,Hh(null!=u?(0,Z.Z)({},u,t):t)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=s,n}}),gP.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var vP=["x","y","weight","size","cellSize","bandwidth"];function mP(t,e){return vP.forEach((function(n){return null!=e[n]?t[n](e[n]):0})),t}function yP(t){Ed.call(this,null,t)}uu(gP,Ed,{transform:function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=function(t,e){var n,r,i,a,o,u,s=[],l=function(t){return t(a)};if(null==e)s.push(t);else for(n={},r=0,i=t.length;r<i;++r)a=t[r],(u=n[o=e.map(l)])||(n[o]=u=[],u.dims=o,s.push(u)),u.push(a);return s}(e.materialize(e.SOURCE).source,t.groupby),a=(t.groupby||[]).map($a),o=mP(hP(),t),u=t.as||"grid";return n=i.map((function(e){return Hh(function(t,e){for(var n=0;n<a.length;++n)t[a[n]]=e[n];return t}((0,Z.Z)({},u,o(e,t.counts)),e.dims))})),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),yP.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},uu(yP,Ed,{transform:function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),a=rP().smooth(!1!==t.smooth),o=t.values,u=t.thresholds||uP(t.count||10,t.nice,!!o),s=t.size;return o||(o=e.materialize(e.SOURCE).source,r=lP(n=mP(hP(),t)(o,!0),n.scale||1,n.scale||1,0,0),s=[n.width,n.height],o=n.values),u=yo(u)?u:u(o),o=a.size(s)(o,u),r&&o.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(o||[]).map(Hh),i}});var xP="Feature",bP="FeatureCollection";function wP(t){Ed.call(this,null,t)}function SP(t){Ed.call(this,null,t)}function kP(t){Ed.call(this,null,t)}function CP(t){Ed.call(this,null,t)}function EP(t){Ed.call(this,[],t),this.generator=tP()}function MP(t){Ed.call(this,null,t)}function OP(t){if(!Vo(t))return!1;var e=Ou(Ja(t));return e.$x||e.$y||e.$value||e.$max}function AP(t){Ed.call(this,null,t),this.modified(!0)}function _P(t,e,n){Vo(t[e])&&t[e](n)}function DP(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,u,s,l,c,f,h,d=t._root,p={data:r},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((l=e>=(a=(g+m)/2))?g=a:m=a,(c=n>=(o=(v+y)/2))?v=o:y=o,i=d,!(d=d[f=c<<1|l]))return i[f]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=e>=(a=(g+m)/2))?g=a:m=a,(c=n>=(o=(v+y)/2))?v=o:y=o}while((f=c<<1|l)==(h=(s>=o)<<1|u>=a));return i[h]=d,i[f]=p,t}function TP(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function FP(t){return t[0]}function IP(t){return t[1]}function PP(t,e,n){var r=new jP(null==e?FP:e,null==n?IP:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function jP(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function BP(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}wP.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},uu(wP,Ed,{transform:function(t,e){var n,r=this._features,i=this._points,a=t.fields,o=a&&a[0],u=a&&a[1],s=t.geojson||!a&&ao,l=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified(Ja(s))||o&&e.modified(Ja(o))||u&&e.modified(Ja(u)),this.value&&!n||(l=e.SOURCE,this._features=r=[],this._points=i=[]),s&&e.visit(l,(function(t){return r.push(s(t))})),o&&u&&(e.visit(l,(function(t){var e=o(t),n=u(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&i.push([e,n])})),r=r.concat({type:xP,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:bP,features:r}}}),SP.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},uu(SP,Ed,{transform:function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||ao,a=t.as||"path",o=n.SOURCE;!r||t.modified()?(this.value=r=qI(t.projection),n.materialize().reflow()):o=i===ao||e.modified(i.fields)?n.ADD_MOD:n.ADD;var u=function(t,e){var n=t.pointRadius();t.context(null),null!=e&&t.pointRadius(e);return n}(r,t.pointRadius);return n.visit(o,(function(t){return t[a]=r(i(t))})),r.pointRadius(u),n.modifies(a)}}),kP.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},uu(kP,Ed,{transform:function(t,e){var n,r=t.projection,i=t.fields[0],a=t.fields[1],o=t.as||["x","y"],u=o[0],s=o[1];function l(t){var e=r([i(t),a(t)]);e?(t[u]=e[0],t[s]=e[1]):(t[u]=void 0,t[s]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,l):(n=e.modified(i.fields)||e.modified(a.fields),e.visit(n?e.ADD_MOD:e.ADD,l)),e.modifies(o)}}),CP.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},uu(CP,Ed,{transform:function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.as||"shape",a=n.ADD;return r&&!t.modified()||(this.value=r=function(t,e,n){var r=null==n?function(n){return t(e(n))}:function(r){var i=t.pointRadius(),a=t.pointRadius(n)(e(r));return t.pointRadius(i),a};return r.context=function(e){return t.context(e),r},r}(qI(t.projection),t.field||ro("datum"),t.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,(function(t){return t[i]=r})),n.modifies(i)}}),EP.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},uu(EP,Ed,{transform:function(t,e){var n,r=this.value,i=this.generator;if(!r.length||t.modified())for(var a in t)Vo(i[a])&&i[a](t[a]);return n=i(),r.length?e.mod.push(Gh(r[0],n)):e.add.push(Hh(n)),r[0]=n,e}}),MP.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},uu(MP,Ed,{transform:function(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,r="shared"===t.resolve,i=t.field||ao,a=function(t,e){var n;Vo(t)?(n=function(n){return t(n,e)},n.dep=OP(t)):t?n=Jo(t):(n=function(t){return t.$value/t.$max||0},n.dep=!0);return n}(t.opacity,t),o=function(t,e){var n;Vo(t)?(n=function(n){return(0,qw.B8)(t(n,e))},n.dep=OP(t)):n=Jo((0,qw.B8)(t||"#888"));return n}(t.color,t),u=t.as||"image",s={$x:0,$y:0,$value:0,$max:r?Td(n.map((function(t){return Td(i(t).values)}))):0};return n.forEach((function(t){var e=i(t),n=Qo({},t,s);r||(n.$max=Td(e.values||[])),t[u]=function(t,e,n,r){for(var i=t.width,a=t.height,o=t.x1||0,u=t.y1||0,s=t.x2||i,l=t.y2||a,c=t.values,f=c?function(t){return c[t]}:oo,h=ey(s-o,l-u),d=h.getContext("2d"),p=d.getImageData(0,0,s-o,l-u),g=p.data,v=u,m=0;v<l;++v){e.$y=v-u;for(var y=o,x=v*i;y<s;++y,m+=4){e.$x=y-o,e.$value=f(y+x);var b=n(e);g[m+0]=b.r,g[m+1]=b.g,g[m+2]=b.b,g[m+3]=~~(255*r(e))}}return d.putImageData(p,0,0),h}(e,n,o.dep?o:Jo(o(n)),a.dep?a:Jo(a(n)))})),e.reflow(!0).modifies(u)}}),uu(AP,Ed,{transform:function(t,e){var n=this.value;return!n||t.modified("type")?(this.value=n=function(t){var e=YI((t||"mercator").toLowerCase());e||eo("Unrecognized projection type: "+t);return e()}(t.type),GI.forEach((function(e){null!=t[e]&&_P(n,e,t[e])}))):GI.forEach((function(e){t.modified(e)&&_P(n,e,t[e])})),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&function(t,e){var n=function(t){return t=Ho(t),1===t.length?t[0]:{type:bP,features:t.reduce((function(t,e){return t.concat(function(t){return t.type===bP?t.features:Ho(t).filter((function(t){return null!=t})).map((function(t){return t.type===xP?t:{type:xP,geometry:t}}))}(e))}),[])}}(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});var LP=PP.prototype=jP.prototype;function RP(t){return function(){return t}}function ZP(t){return 1e-6*(t()-.5)}function NP(t){return t.x+t.vx}function zP(t){return t.y+t.vy}LP.copy=function(){var t,e,n=new jP(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=BP(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=BP(e));return n},LP.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return DP(this.cover(e,n),e,n,t)},LP.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),u=new Array(a),s=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,u[n]=i,r<s&&(s=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(s>c||l>f)return this;for(this.cover(s,l).cover(c,f),n=0;n<a;++n)DP(this,o[n],u[n],t[n]);return this},LP.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,u,s=i-n||1,l=this._root;n>t||t>=i||r>e||e>=a;)switch(u=(e<r)<<1|t<n,(o=new Array(4))[u]=l,l=o,s*=2,u){case 0:i=n+s,a=r+s;break;case 1:n=i-s,a=r+s;break;case 2:i=n+s,r=a-s;break;case 3:n=i-s,r=a-s}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},LP.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},LP.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},LP.find=function(t,e,n){var r,i,a,o,u,s,l,c=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new TP(g,c,f,h,d)),null==n?n=1/0:(c=t-n,f=e-n,h=t+n,d=e+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(i=s.x0)>h||(a=s.y0)>d||(o=s.x1)<c||(u=s.y1)<f))if(g.length){var v=(i+o)/2,m=(a+u)/2;p.push(new TP(g[3],v,m,o,u),new TP(g[2],i,m,v,u),new TP(g[1],v,a,o,m),new TP(g[0],i,a,v,m)),(l=(e>=m)<<1|t>=v)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=s)}else{var y=t-+this._x.call(null,g.data),x=e-+this._y.call(null,g.data),b=y*y+x*x;if(b<n){var w=Math.sqrt(n=b);c=t-w,f=e-w,h=t+w,d=e+w,r=g.data}}return r},LP.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,u,s,l,c,f,h,d=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((l=a>=(u=(p+v)/2))?p=u:v=u,(c=o>=(s=(g+m)/2))?g=s:m=s,e=d,!(d=d[f=c<<1|l]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},LP.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},LP.root=function(){return this._root},LP.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},LP.visit=function(t){var e,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new TP(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&s.length){var l=(r+a)/2,c=(i+o)/2;(n=s[3])&&u.push(new TP(n,l,c,a,o)),(n=s[2])&&u.push(new TP(n,r,c,l,o)),(n=s[1])&&u.push(new TP(n,l,i,a,c)),(n=s[0])&&u.push(new TP(n,r,i,l,c))}return this},LP.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new TP(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,u=e.y0,s=e.x1,l=e.y1,c=(o+s)/2,f=(u+l)/2;(a=i[0])&&n.push(new TP(a,o,u,c,f)),(a=i[1])&&n.push(new TP(a,c,u,s,f)),(a=i[2])&&n.push(new TP(a,o,f,c,l)),(a=i[3])&&n.push(new TP(a,c,f,s,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},LP.x=function(t){return arguments.length?(this._x=t,this):this._x},LP.y=function(t){return arguments.length?(this._y=t,this):this._y};var UP={value:function(){}};function HP(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new WP(r)}function WP(t){this._=t}function VP(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function GP(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function XP(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=UP,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}WP.prototype=HP.prototype={constructor:WP,on:function(t,e){var n,r=this._,i=VP(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=XP(r[n],t.name,e);else if(null==e)for(n in r)r[n]=XP(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=GP(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new WP(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var YP,qP,$P=HP,JP=0,KP=0,QP=0,tj=0,ej=0,nj=0,rj="object"==typeof performance&&performance.now?performance:Date,ij="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function aj(){return ej||(ij(oj),ej=rj.now()+nj)}function oj(){ej=0}function uj(){this._call=this._time=this._next=null}function sj(t,e,n){var r=new uj;return r.restart(t,e,n),r}function lj(){ej=(tj=rj.now())+nj,JP=KP=0;try{!function(){aj(),++JP;for(var t,e=YP;e;)(t=ej-e._time)>=0&&e._call.call(void 0,t),e=e._next;--JP}()}finally{JP=0,function(){var t,e,n=YP,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:YP=e);qP=t,fj(r)}(),ej=0}}function cj(){var t=rj.now(),e=t-tj;e>1e3&&(nj-=e,tj=t)}function fj(t){JP||(KP&&(KP=clearTimeout(KP)),t-ej>24?(t<1/0&&(KP=setTimeout(lj,t-rj.now()-nj)),QP&&(QP=clearInterval(QP))):(QP||(tj=rj.now(),QP=setInterval(cj,1e3)),JP=1,ij(lj)))}uj.prototype=sj.prototype={constructor:uj,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?aj():+n)+(null==e?0:+e),this._next||qP===this||(qP?qP._next=this:YP=this,qP=this),this._call=t,this._time=n,fj()},stop:function(){this._call&&(this._call=null,this._time=1/0,fj())}};var hj=4294967296;function dj(t){return t.x}function pj(t){return t.y}var gj=Math.PI*(3-Math.sqrt(5));function vj(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,u=new Map,s=sj(f),l=$P("tick","end"),c=function(){var t=1;return function(){return(t=(1664525*t+1013904223)%hj)/hj}}();function f(){h(),l.call("tick",e),n<r&&(s.stop(),l.call("end",e))}function h(r){var s,l,c=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,u.forEach((function(t){t(n)})),s=0;s<c;++s)null==(l=t[s]).fx?l.x+=l.vx*=o:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=o:(l.y=l.fy,l.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),a=n*gj;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),d(),e={tick:h,restart:function(){return s.restart(f),e},stop:function(){return s.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),u.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},randomSource:function(t){return arguments.length?(c=t,u.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?u.delete(t):u.set(t,p(n)),e):u.get(t)},find:function(e,n,r){var i,a,o,u,s,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(o=(i=e-(u=t[l]).x)*i+(a=n-u.y)*a)<r&&(s=u,r=o);return s},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}}function mj(t){return t.index}function yj(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}var xj={center:function(t,e){var n,r=1;function i(){var i,a,o=n.length,u=0,s=0;for(i=0;i<o;++i)u+=(a=n[i]).x,s+=a.y;for(u=(u/o-t)*r,s=(s/o-e)*r,i=0;i<o;++i)(a=n[i]).x-=u,a.y-=s}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i},collide:function(t){var e,n,r,i=1,a=1;function o(){for(var t,o,s,l,c,f,h,d=e.length,p=0;p<a;++p)for(o=PP(e,NP,zP).visitAfter(u),t=0;t<d;++t)s=e[t],f=n[s.index],h=f*f,l=s.x+s.vx,c=s.y+s.vy,o.visit(g);function g(t,e,n,a,o){var u=t.data,d=t.r,p=f+d;if(!u)return e>l+p||a<l-p||n>c+p||o<c-p;if(u.index>s.index){var g=l-u.x-u.vx,v=c-u.y-u.vy,m=g*g+v*v;m<p*p&&(0===g&&(m+=(g=ZP(r))*g),0===v&&(m+=(v=ZP(r))*v),m=(p-(m=Math.sqrt(m)))/m*i,s.vx+=(g*=m)*(p=(d*=d)/(h+d)),s.vy+=(v*=m)*p,u.vx-=g*(p=1-p),u.vy-=v*p)}}}function u(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=RP(null==t?1:+t)),o.initialize=function(t,n){e=t,r=n,s()},o.iterations=function(t){return arguments.length?(a=+t,o):a},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:RP(+e),s(),o):t},o},nbody:function(){var t,e,n,r,i,a=RP(-30),o=1,u=1/0,s=.81;function l(n){var i,a=t.length,o=PP(t,dj,pj).visitAfter(f);for(r=n,i=0;i<a;++i)e=t[i],o.visit(h)}function c(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+a(n,e,t)}}function f(t){var e,n,r,a,o,u=0,s=0;if(t.length){for(r=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(u+=e.value,s+=n,r+=n*e.x,a+=n*e.y);t.x=r/s,t.y=a/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{u+=i[e.data.index]}while(e=e.next)}t.value=u}function h(t,a,l,c){if(!t.value)return!0;var f=t.x-e.x,h=t.y-e.y,d=c-a,p=f*f+h*h;if(d*d/s<p)return p<u&&(0===f&&(p+=(f=ZP(n))*f),0===h&&(p+=(h=ZP(n))*h),p<o&&(p=Math.sqrt(o*p)),e.vx+=f*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=u)){(t.data!==e||t.next)&&(0===f&&(p+=(f=ZP(n))*f),0===h&&(p+=(h=ZP(n))*h),p<o&&(p=Math.sqrt(o*p)));do{t.data!==e&&(d=i[t.data.index]*r/p,e.vx+=f*d,e.vy+=h*d)}while(t=t.next)}}return l.initialize=function(e,r){t=e,n=r,c()},l.strength=function(t){return arguments.length?(a="function"==typeof t?t:RP(+t),c(),l):a},l.distanceMin=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l.distanceMax=function(t){return arguments.length?(u=t*t,l):Math.sqrt(u)},l.theta=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l},link:function(t){var e,n,r,i,a,o,u=mj,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},l=RP(30),c=1;function f(r){for(var i=0,u=t.length;i<c;++i)for(var s,l,f,h,d,p,g,v=0;v<u;++v)l=(s=t[v]).source,h=(f=s.target).x+f.vx-l.x-l.vx||ZP(o),d=f.y+f.vy-l.y-l.vy||ZP(o),h*=p=((p=Math.sqrt(h*h+d*d))-n[v])/p*r*e[v],d*=p,f.vx-=h*(g=a[v]),f.vy-=d*g,l.vx+=h*(g=1-g),l.vy+=d*g}function h(){if(r){var o,s,l=r.length,c=t.length,f=new Map(r.map((function(t,e){return[u(t,e,r),t]})));for(o=0,i=new Array(l);o<c;++o)(s=t[o]).index=o,"object"!=typeof s.source&&(s.source=yj(f,s.source)),"object"!=typeof s.target&&(s.target=yj(f,s.target)),i[s.source.index]=(i[s.source.index]||0)+1,i[s.target.index]=(i[s.target.index]||0)+1;for(o=0,a=new Array(c);o<c;++o)s=t[o],a[o]=i[s.source.index]/(i[s.source.index]+i[s.target.index]);e=new Array(c),d(),n=new Array(c),p()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,e){r=t,o=e,h()},f.links=function(e){return arguments.length?(t=e,h(),f):t},f.id=function(t){return arguments.length?(u=t,f):u},f.iterations=function(t){return arguments.length?(c=+t,f):c},f.strength=function(t){return arguments.length?(s="function"==typeof t?t:RP(+t),d(),f):s},f.distance=function(t){return arguments.length?(l="function"==typeof t?t:RP(+t),p(),f):l},f},x:function(t){var e,n,r,i=RP(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=RP(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:RP(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:RP(+e),o(),a):t},a},y:function(t){var e,n,r,i=RP(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=RP(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:RP(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:RP(+e),o(),a):t},a}},bj="forces",wj=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Sj=["static","iterations"],kj=["x","y","vx","vy"];function Cj(t){Ed.call(this,null,t)}function Ej(t,e,n,r){var i,a,o,u,s=Ho(e.forces);for(i=0,a=wj.length;i<a;++i)(o=wj[i])!==bj&&e.modified(o)&&t[o](e[o]);for(i=0,a=s.length;i<a;++i)u=bj+i,(o=n||e.modified(bj,i)?Oj(s[i]):r&&Mj(s[i],r)?t.force(u):null)&&t.force(u,o);for(a=t.numForces||0;i<a;++i)t.force(bj+i,null);return t.numForces=s.length,t}function Mj(t,e){var n,r;for(n in t)if(Vo(r=t[n])&&e.modified(Ja(r)))return 1;return 0}function Oj(t){var e,n;for(n in ru(xj,t.force)||eo("Unrecognized force: "+t.force),e=xj[t.force](),t)Vo(e[n])&&Aj(e[n],t[n],t);return e}function Aj(t,e,n){t(Vo(e)?function(t){return e(t,n)}:e)}function _j(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Dj(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Tj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tj(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Tj(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fj(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ij(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ij(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Ij(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Cj.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:kj}]},uu(Cj,Ed,{transform:function(t,e){var n,r,i=this.value,a=e.changed(e.ADD_REM),o=t.modified(wj),u=t.iterations||300;if(i?(a&&(e.modifies("index"),i.nodes(e.source)),(o||e.changed(e.MOD))&&Ej(i,t,0,e)):(this.value=i=function(t,e){var n=vj(t),r=n.stop,i=n.restart,a=!1;return n.stopped=function(){return a},n.restart=function(){return a=!1,i()},n.stop=function(){return a=!0,r()},Ej(n,e,!0).on("end",(function(){return a=!0}))}(e.source,t),i.on("tick",(n=e.dataflow,r=this,function(){return n.touch(r).run()})),t.static||(a=!0,i.tick()),e.modifies("index")),o||a||t.modified(Sj)||e.changed()&&t.restart)if(i.alpha(Math.max(i.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/u)),t.static)for(i.stop();--u>=0;)i.tick();else if(i.stopped()&&i.restart(),!a)return e.StopPropagation;return this.finish(t,e)},finish:function(t,e){for(var n,r=e.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===bj&&"link"===n.op._argval.force)for(var u,s=n.op._argops,l=0,c=s.length;l<c;++l)if("links"===s[l].name&&(u=s[l].op.source)){r.pulse(u,r.changeset().reflow());break}return e.reflow(t.modified()).modifies(kj)}});var Pj=G().mark(jj);function jj(){var t,e,n,r,i,a;return G().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=[t=this];case 1:e=n.reverse(),n=[];case 2:if(!(t=e.pop())){o.next=8;break}return o.next=5,t;case 5:if(r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);o.next=2;break;case 8:if(n.length){o.next=1;break}case 9:case"end":return o.stop()}}),Pj,this)}function Bj(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Rj)):void 0===e&&(e=Lj);for(var n,r,i,a,o,u=new zj(t),s=[u];n=s.pop();)if((i=e(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)s.push(r=i[a]=new zj(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(Nj)}function Lj(t){return t.children}function Rj(t){return Array.isArray(t)?t[1]:null}function Zj(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Nj(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function zj(t){this.data=t,this.depth=this.height=0,this.parent=null}function Uj(t){return null==t?null:Hj(t)}function Hj(t){if("function"!=typeof t)throw new Error;return t}function Wj(){return 0}function Vj(t){return function(){return t}}zj.prototype=Bj.prototype=(0,Z.Z)({constructor:zj,count:function(){return this.eachAfter(_j)},each:function(t,e){var n,r=-1,i=Dj(this);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.call(e,a,++r,this)}}catch(o){i.e(o)}finally{i.f()}return this},eachAfter:function(t,e){for(var n,r,i,a=this,o=[a],u=[],s=-1;a=o.pop();)if(u.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=u.pop();)t.call(e,a,++s,this);return this},eachBefore:function(t,e){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(t.call(e,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(t,e){var n,r=-1,i=Fj(this);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t.call(e,a,++r,this))return a}}catch(o){i.e(o)}finally{i.f()}},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Bj(this).eachBefore(Zj)}},Symbol.iterator,jj);var Gj=4294967296;function Xj(t,e){for(var n,r,i=0,a=(t=function(t,e){for(var n,r,i=t.length;i;)r=e()*i--|0,n=t[i],t[i]=t[r],t[r]=n;return t}(Array.from(t),e)).length,o=[];i<a;)n=t[i],r&&$j(r,n)?++i:(r=Kj(o=Yj(o,n)),i=0);return r}function Yj(t,e){var n,r;if(Jj(e,t))return[e];for(n=0;n<t.length;++n)if(qj(e,t[n])&&Jj(Qj(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(qj(Qj(t[n],t[r]),e)&&qj(Qj(t[n],e),t[r])&&qj(Qj(t[r],e),t[n])&&Jj(tB(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function qj(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function $j(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Jj(t,e){for(var n=0;n<e.length;++n)if(!$j(t,e[n]))return!1;return!0}function Kj(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Qj(t[0],t[1]);case 3:return tB(t[0],t[1],t[2])}}function Qj(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,u=e.r,s=a-n,l=o-r,c=u-i,f=Math.sqrt(s*s+l*l);return{x:(n+a+s/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+u)/2}}function tB(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,u=e.y,s=e.r,l=n.x,c=n.y,f=n.r,h=r-o,d=r-l,p=i-u,g=i-c,v=s-a,m=f-a,y=r*r+i*i-a*a,x=y-o*o-u*u+s*s,b=y-l*l-c*c+f*f,w=d*p-h*g,S=(p*b-g*x)/(2*w)-r,k=(g*v-p*m)/w,C=(d*x-h*b)/(2*w)-i,E=(h*m-d*v)/w,M=k*k+E*E-1,O=2*(a+S*k+C*E),A=S*S+C*C-a*a,_=-(Math.abs(M)>1e-6?(O+Math.sqrt(O*O-4*M*A))/(2*M):A/O);return{x:r+S+k*_,y:i+C+E*_,r:_}}function eB(t,e,n){var r,i,a,o,u=t.x-e.x,s=t.y-e.y,l=u*u+s*s;l?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(l+o-i)/(2*l),a=Math.sqrt(Math.max(0,o/l-r*r)),n.x=t.x-r*u-a*s,n.y=t.y-r*s+a*u):(r=(l+i-o)/(2*l),a=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*u-a*s,n.y=e.y+r*s+a*u)):(n.x=e.x+n.r,n.y=e.y)}function nB(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function rB(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function iB(t){this._=t,this.next=null,this.previous=null}function aB(t,e){if(!(a=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var n,r,i,a,o,u,s,l,c,f,h;if((n=t[0]).x=0,n.y=0,!(a>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;eB(r,n,i=t[2]),n=new iB(n),r=new iB(r),i=new iB(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(s=3;s<a;++s){eB(n._,r._,i=t[s]),i=new iB(i),l=r.next,c=n.previous,f=r._.r,h=n._.r;do{if(f<=h){if(nB(l._,i._)){r=l,n.next=r,r.previous=n,--s;continue t}f+=l._.r,l=l.next}else{if(nB(c._,i._)){(n=c).next=r,r.previous=n,--s;continue t}h+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=rB(n);(i=i.next)!==r;)(u=rB(i))<o&&(n=i,o=u);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Xj(n,e),s=0;s<a;++s)(n=t[s]).x-=i.x,n.y-=i.y;return i.r}function oB(t){return Math.sqrt(t.value)}function uB(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function sB(t,e,n){return function(r){if(i=r.children){var i,a,o,u=i.length,s=t(r)*e||0;if(s)for(a=0;a<u;++a)i[a].r+=s;if(o=aB(i,n),s)for(a=0;a<u;++a)i[a].r-=s;r.r=o+s}}}function lB(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function cB(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function fB(t,e,n,r,i){for(var a,o=t.children,u=-1,s=o.length,l=t.value&&(r-e)/t.value;++u<s;)(a=o[u]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*l}function hB(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return dB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dB(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function dB(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var pB={depth:-1},gB={},vB={};function mB(t){return t.id}function yB(t){return t.parentId}function xB(){var t,e=mB,n=yB;function r(r){var i,a,o,u,s,l,c,f,h=Array.from(r),d=e,p=n,g=new Map;if(null!=t){var v,m=h.map((function(e,n){return function(t){t="".concat(t);var e=t.length;wB(t,e-1)&&!wB(t,e-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:"/".concat(t)}(t(e,n,r))})),y=m.map(bB),x=new Set(m).add(""),b=hB(y);try{for(b.s();!(v=b.n()).done;){var w=v.value;x.has(w)||(x.add(w),m.push(w),y.push(bB(w)),h.push(vB))}}catch(k){b.e(k)}finally{b.f()}d=function(t,e){return m[e]},p=function(t,e){return y[e]}}for(o=0,i=h.length;o<i;++o)a=h[o],l=h[o]=new zj(a),null!=(c=d(a,o,r))&&(c+="")&&(f=l.id=c,g.set(f,g.has(f)?gB:l)),null!=(c=p(a,o,r))&&(c+="")&&(l.parent=c);for(o=0;o<i;++o)if(c=(l=h[o]).parent){if(!(s=g.get(c)))throw new Error("missing: "+c);if(s===gB)throw new Error("ambiguous: "+c);s.children?s.children.push(l):s.children=[l],l.parent=s}else{if(u)throw new Error("multiple roots");u=l}if(!u)throw new Error("no root");if(null!=t){for(;u.data===vB&&1===u.children.length;)u=u.children[0],--i;for(var S=h.length-1;S>=0&&(l=h[S]).data===vB;--S)l.data=null}if(u.parent=pB,u.eachBefore((function(t){t.depth=t.parent.depth+1,--i})).eachBefore(Nj),u.parent=null,i>0)throw new Error("cycle");return u}return r.id=function(t){return arguments.length?(e=Uj(t),r):e},r.parentId=function(t){return arguments.length?(n=Uj(t),r):n},r.path=function(e){return arguments.length?(t=Uj(e),r):t},r}function bB(t){var e=t.length;if(e<2)return"";for(;--e>1&&!wB(t,e););return t.slice(0,e)}function wB(t,e){if("/"===t[e]){for(var n=0;e>0&&"\\"===t[--e];)++n;if(0==(1&n))return!0}return!1}function SB(t,e){return t.parent===e.parent?1:2}function kB(t){var e=t.children;return e?e[0]:t.t}function CB(t){var e=t.children;return e?e[e.length-1]:t.t}function EB(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function MB(t,e,n){return t.a.parent===e.parent?t.a:n}function OB(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function AB(t,e){return t.parent===e.parent?1:2}function _B(t,e){return t+e.x}function DB(t,e){return Math.max(t,e.y)}function TB(t,e,n,r,i){for(var a,o=t.children,u=-1,s=o.length,l=t.value&&(i-n)/t.value;++u<s;)(a=o[u]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*l}OB.prototype=Object.create(zj.prototype);var FB=(1+Math.sqrt(5))/2;function IB(t,e,n,r,i,a){for(var o,u,s,l,c,f,h,d,p,g,v,m=[],y=e.children,x=0,b=0,w=y.length,S=e.value;x<w;){s=i-n,l=a-r;do{c=y[b++].value}while(!c&&b<w);for(f=h=c,v=c*c*(g=Math.max(l/s,s/l)/(S*t)),p=Math.max(h/v,v/f);b<w;++b){if(c+=u=y[b].value,u<f&&(f=u),u>h&&(h=u),v=c*c*g,(d=Math.max(h/v,v/f))>p){c-=u;break}p=d}m.push(o={value:c,dice:s<l,children:y.slice(x,b)}),o.dice?fB(o,n,r,i,S?r+=l*c/S:a):TB(o,n,r,S?n+=s*c/S:i,a),S-=c,x=b}return m}var PB=function t(e){function n(t,n,r,i,a){IB(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(FB),jB=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,u,s,l,c,f=-1,h=o.length,d=t.value;++f<h;){for(s=(u=o[f]).children,l=u.value=0,c=s.length;l<c;++l)u.value+=s[l].value;u.dice?fB(u,n,r,i,d?r+=(a-r)*u.value/d:a):TB(u,n,r,d?n+=(i-n)*u.value/d:i,a),d-=u.value}else t._squarify=o=IB(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(FB);function BB(t,e,n){var r={};return t.each((function(t){var i=t.data;n(i)&&(r[e(i)]=t)})),t.lookup=r,t}function LB(t){Ed.call(this,null,t)}LB.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var RB=function(t){return t.values};function ZB(){var t=[],e={entries:function(t){return r(n(t,0),0)},key:function(n){return t.push(n),e}};function n(e,r){if(r>=t.length)return e;for(var i,a,o,u=e.length,s=t[r++],l={},c={},f=-1;++f<u;)(o=l[i=s(a=e[f])+""])?o.push(a):l[i]=[a];for(i in l)c[i]=n(l[i],r);return c}function r(e,n){if(++n>t.length)return e;var i=[];for(var a in e)i.push({key:a,values:r(e[a],n)});return i}return e}function NB(t){Ed.call(this,null,t)}uu(LB,Ed,{transform:function(t,e){e.source||eo("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),a=this.value;return(!a||r||e.changed())&&(a&&a.each((function(t){t.children&&Nh(t.data)&&i.rem.push(t.data)})),this.value=a=Bj({values:Ho(t.keys).reduce((function(t,e){return t.key(e),t}),ZB()).entries(i.source)},RB),n&&a.each((function(t){t.children&&(t=Hh(t.data),i.add.push(t),i.source.push(t))})),BB(a,zh,zh)),i.source.root=a,i}});var zB=function(t,e){return t.parent===e.parent?1:2};uu(NB,Ed,{transform:function(t,e){e.source&&e.source.root||eo(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,i=e.source.root,a=t.as||r;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(Xh(t.sort,(function(t){return t.data}))),function(t,e,n){for(var r,i=0,a=e.length;i<a;++i)(r=e[i])in n&&t[r](n[r])}(n,this.params,t),n.separation&&n.separation(!1!==t.separation?zB:uo);try{this.value=n(i)}catch(o){eo(o)}return i.each((function(t){return function(t,e,n){for(var r=t.data,i=e.length-1,a=0;a<i;++a)r[n[a]]=t[e[a]];r[n[i]]=t.children?t.children.length:0}(t,r,a)})),e.reflow(t.modified()).modifies(a).modifies("leaf")}});var UB=["x","y","r","depth","children"];function HB(t){NB.call(this,t)}HB.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:UB.length,default:UB}]},uu(HB,NB,{layout:function(){var t=null,e=1,n=1,r=Wj;function i(i){var a=function(){var t=1;return function(){return(t=(1664525*t+1013904223)%Gj)/Gj}}();return i.x=e/2,i.y=n/2,t?i.eachBefore(uB(t)).eachAfter(sB(r,.5,a)).eachBefore(lB(1)):i.eachBefore(uB(oB)).eachAfter(sB(Wj,1,a)).eachAfter(sB(r,i.r/Math.min(e,n),a)).eachBefore(lB(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=Uj(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Vj(+t),i):r},i},params:["radius","size","padding"],fields:UB});var WB=["x0","y0","x1","y1","depth","children"];function VB(t){NB.call(this,t)}function GB(t){Ed.call(this,null,t)}VB.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:WB.length,default:WB}]},uu(VB,NB,{layout:function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&fB(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,u=r.y1-n;o<i&&(i=o=(i+o)/2),u<a&&(a=u=(a+u)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=u}}(e,a)),r&&i.eachBefore(cB),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},params:["size","round","padding"],fields:WB}),GB.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},uu(GB,Ed,{transform:function(t,e){e.source||eo("Stratify transform requires an upstream data source.");var n=this.value,r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),a=!n||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),a&&(n=i.source.length?BB(xB().id(t.key).parentId(t.parentKey)(i.source),t.key,so):BB(xB()([{}]),t.key,t.key)),i.source.root=this.value=n,i}});var XB={tidy:function(){var t=SB,e=1,n=1,r=null;function i(i){var s=function(t){for(var e,n,r,i,a,o=new OB(t,0),u=[o];e=u.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)u.push(n=e.children[i]=new OB(r[i],i)),n.parent=e;return(o.parent=new OB(null,0)).children=[o],o}(i);if(s.eachAfter(a),s.parent.m=-s.z,s.eachBefore(o),r)i.eachBefore(u);else{var l=i,c=i,f=i;i.eachBefore((function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)}));var h=l===c?1:t(l,c)/2,d=h-l.x,p=e/(c.x+h+d),g=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*g}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,u=n,s=a.parent.children[0],l=a.m,c=o.m,f=u.m,h=s.m;u=CB(u),a=kB(a),u&&a;)s=kB(s),(o=CB(o)).a=e,(i=u.z+f-a.z-l+t(u._,a._))>0&&(EB(MB(u,e,r),e,i),l+=i,c+=i),f+=u.m,l+=a.m,h+=s.m,c+=o.m;u&&!CB(o)&&(o.t=u,o.m+=f-c),a&&!kB(s)&&(s.t=a,s.m+=l-h,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},cluster:function(){var t=AB,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(_B,0)/t.length}(n),e.y=function(t){return 1+t.reduce(DB,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var u=function(t){for(var e;e=t.children;)t=e[0];return t}(i),s=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),l=u.x-t(u,s)/2,c=s.x+t(s,u)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-l)/(c-l)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}},YB=["x","y","depth","children"];function qB(t){NB.call(this,t)}function $B(t){Ed.call(this,[],t)}qB.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:YB.length,default:YB}]},uu(qB,NB,{layout:function(t){var e=t||"tidy";if(ru(XB,e))return XB[e]();eo("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:YB}),$B.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},uu($B,Ed,{transform:function(t,e){var n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),a={};return r||eo("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,(function(t){return a[zh(t)]=1})),r.each((function(t){var e=t.data,n=t.parent&&t.parent.data;n&&a[zh(e)]&&a[zh(n)]&&i.add.push(Hh({source:n,target:e}))})),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,(function(t){return a[zh(t)]=1})),n.forEach((function(t){(a[zh(t.source)]||a[zh(t.target)])&&i.mod.push(t)}))),i}});var JB={binary:function(t,e,n,r,i){var a,o,u=t.children,s=u.length,l=new Array(s+1);for(l[0]=o=a=0;a<s;++a)l[a+1]=o+=u[a].value;!function t(e,n,r,i,a,o,s){if(e>=n-1){var c=u[e];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=s)}var f=l[e],h=r/2+f,d=e+1,p=n-1;for(;d<p;){var g=d+p>>>1;l[g]<h?d=g+1:p=g}h-l[d-1]<l[d]-h&&e+1<d&&--d;var v=l[d]-f,m=r-v;if(o-i>s-a){var y=r?(i*m+o*v)/r:o;t(e,d,v,i,a,y,s),t(d,n,m,y,a,o,s)}else{var x=r?(a*m+s*v)/r:s;t(e,d,v,i,a,o,x),t(d,n,m,i,x,o,s)}}(0,s,t.value,e,n,r,i)},dice:fB,slice:TB,slicedice:function(t,e,n,r,i){(1&t.depth?TB:fB)(t,e,n,r,i)},squarify:PB,resquarify:jB},KB=["x0","y0","x1","y1","depth","children"];function QB(t){NB.call(this,t)}function tL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function eL(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tL(Object(n),!0).forEach((function(e){(0,Z.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}QB.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:KB.length,default:KB}]},uu(QB,NB,{layout:function(){var t=function(){var t=PB,e=!1,n=1,r=1,i=[0],a=Wj,o=Wj,u=Wj,s=Wj,l=Wj;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(cB),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<c&&(c=h=(c+h)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=a(e)/2,r+=l(e)-n,c+=o(e)-n,(f-=u(e)-n)<r&&(r=f=(r+f)/2),(h-=s(e)-n)<c&&(c=h=(c+h)/2),t(e,r,c,f,h))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=Hj(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:Vj(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:Vj(+t),c):o},c.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:Vj(+t),c):u},c.paddingBottom=function(t){return arguments.length?(s="function"==typeof t?t:Vj(+t),c):s},c.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:Vj(+t),c):l},c}();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){ru(JB,e)?t.tile(JB[e]):eo("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:KB});var nL=4278190080;function rL(t,e,n){return new Uint32Array(t.getImageData(0,0,e,n).data.buffer)}function iL(t,e,n){if(e.length){var r=e[0].mark.marktype;"group"===r?e.forEach((function(e){e.items.forEach((function(e){return iL(t,e.items,n)}))})):QM[r].draw(t,{items:n?e.map(aL):e})}}function aL(t){var e=Vh(t,{});return e.stroke&&0!==e.strokeOpacity||e.fill&&0!==e.fillOpacity?eL(eL({},e),{},{strokeOpacity:1,stroke:"#000",fillOpacity:0}):e}var oL=31,uL=new Uint32Array(33),sL=new Uint32Array(33);sL[0]=0,uL[0]=~sL[0];for(var lL=1;lL<=32;++lL)sL[lL]=sL[lL-1]<<1|1,uL[lL]=~sL[lL];function cL(t,e,n){var r=Math.max(1,Math.sqrt(t*e/1e6)),i=~~((t+2*n+r)/r),a=~~((e+2*n+r)/r),o=function(t){return~~((t+n)/r)};return o.invert=function(t){return t*r-n},o.bitmap=function(){return function(t,e){var n=new Uint32Array(~~((t*e+32)/32));function r(t,e){n[t]|=e}function i(t,e){n[t]&=e}return{array:n,get:function(e,r){var i=r*t+e;return n[i>>>5]&1<<(i&oL)},set:function(e,n){var i=n*t+e;r(i>>>5,1<<(i&oL))},clear:function(e,n){var r=n*t+e;i(r>>>5,~(1<<(r&oL)))},getRange:function(e,r,i,a){for(var o,u,s,l,c=a;c>=r;--c)if((s=(o=c*t+e)>>>5)==(l=(u=c*t+i)>>>5)){if(n[s]&uL[o&oL]&sL[1+(u&oL)])return!0}else{if(n[s]&uL[o&oL])return!0;if(n[l]&sL[1+(u&oL)])return!0;for(var f=s+1;f<l;++f)if(n[f])return!0}return!1},setRange:function(e,n,i,a){for(var o,u,s,l,c;n<=a;++n)if((s=(o=n*t+e)>>>5)==(l=(u=n*t+i)>>>5))r(s,uL[o&oL]&sL[1+(u&oL)]);else for(r(s,uL[o&oL]),r(l,sL[1+(u&oL)]),c=s+1;c<l;++c)r(c,4294967295)},clearRange:function(e,n,r,a){for(var o,u,s,l,c;n<=a;++n)if((s=(o=n*t+e)>>>5)==(l=(u=n*t+r)>>>5))i(s,sL[o&oL]|uL[1+(u&oL)]);else for(i(s,sL[o&oL]),i(l,uL[1+(u&oL)]),c=s+1;c<l;++c)i(c,0)},outOfBounds:function(n,r,i,a){return n<0||r<0||a>=e||i>=t}}}(i,a)},o.ratio=r,o.padding=n,o.width=t,o.height=e,o}function fL(t,e,n,r,i,a){var o=n/2;return t-o<0||t+o>i||e-(o=r/2)<0||e+o>a}function hL(t,e,n,r,i,a,o,u){var s=i*a/(2*r),l=t(e-s),c=t(e+s),f=t(n-(a/=2)),h=t(n+a);return o.outOfBounds(l,f,c,h)||o.getRange(l,f,c,h)||u&&u.getRange(l,f,c,h)}var dL=[-1,-1,1,1],pL=[-1,1,-1,1];var gL=["right","center","left"],vL=["bottom","middle","top"];function mL(t,e,n,r,i,a,o,u,s,l,c,f){return!(i.outOfBounds(t,n,e,r)||(f&&a||i).getRange(t,n,e,r))}var yL={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},xL={naive:function(t,e,n,r){var i=t.width,a=t.height;return function(t){for(var e,n,o,u,s,l,c,f=t.datum.datum.items[r].items,h=f.length,d=t.datum.fontSize,p=IM.width(t.datum,t.datum.text),g=0,v=0;v<h;++v)e=f[v].x,o=f[v].y,s=(e+(n=void 0===f[v].x2?e:f[v].x2))/2,l=(o+(u=void 0===f[v].y2?o:f[v].y2))/2,(c=Math.abs(n-e+u-o))>=g&&(g=c,t.x=s,t.y=l);return s=p/2,l=d/2,e=t.x-s,n=t.x+s,o=t.y-l,u=t.y+l,t.align="center",e<0&&n<=i?t.align="left":0<=e&&i<n&&(t.align="right"),t.baseline="middle",o<0&&u<=a?t.baseline="top":0<=o&&a<u&&(t.baseline="bottom"),!0}},"reduced-search":function(t,e,n,r){var i=t.width,a=t.height,o=e[0],u=e[1];function s(e,n,r,s,l){var c,f=t.invert(e),h=t.invert(n),d=r,p=a;if(!fL(f,h,s,l,i,a)&&!hL(t,f,h,l,s,d,o,u)&&!hL(t,f,h,l,s,l,o,null)){for(;p-d>=1;)hL(t,f,h,l,s,c=(d+p)/2,o,u)?p=c:d=c;if(d>r)return[f,h,d,!0]}}return function(e){for(var u,l,c,f,h,d,p,g,v,m,y,x,b,w,S,k,C,E=e.datum.datum.items[r].items,M=E.length,O=e.datum.fontSize,A=IM.width(e.datum,e.datum.text),_=n?O:0,D=!1,T=!1,F=0,I=0;I<M;++I){for(u=E[I].x,c=E[I].y,u>(l=void 0===E[I].x2?u:E[I].x2)&&(C=u,u=l,l=C),c>(f=void 0===E[I].y2?c:E[I].y2)&&(C=c,c=f,f=C),m=~~(((v=t(u))+(y=t(l)))/2),b=~~(((x=t(c))+(w=t(f)))/2),p=m;p>=v;--p)for(g=b;g>=x;--g)if(k=s(p,g,_,A,O)){var P=k,j=(0,W.Z)(P,4);e.x=j[0],e.y=j[1],_=j[2],D=j[3]}for(p=m;p<=y;++p)for(g=b;g<=w;++g)if(k=s(p,g,_,A,O)){var B=k,L=(0,W.Z)(B,4);e.x=L[0],e.y=L[1],_=L[2],D=L[3]}D||n||(h=(u+l)/2,d=(c+f)/2,(S=Math.abs(l-u+f-c))>=F&&!fL(h,d,A,O,i,a)&&!hL(t,h,d,O,A,O,o,null)&&(F=S,e.x=h,e.y=d,T=!0))}return!(!D&&!T)&&(h=A/2,d=O/2,o.setRange(t(e.x-h),t(e.y-d),t(e.x+h),t(e.y+d)),e.align="center",e.baseline="middle",!0)}},floodfill:function(t,e,n,r){var i=t.width,a=t.height,o=e[0],u=e[1],s=t.bitmap();return function(e){for(var l,c,f,h,d,p,g,v,m,y,x,b,w=e.datum.datum.items[r].items,S=w.length,k=e.datum.fontSize,C=IM.width(e.datum,e.datum.text),E=[],M=n?k:0,O=!1,A=!1,_=0,D=0;D<S;++D){for(l=w[D].x,f=w[D].y,c=void 0===w[D].x2?l:w[D].x2,h=void 0===w[D].y2?f:w[D].y2,E.push([t((l+c)/2),t((f+h)/2)]);E.length;){var T=E.pop(),F=(0,W.Z)(T,2);if(g=F[0],v=F[1],!(o.get(g,v)||u.get(g,v)||s.get(g,v))){s.set(g,v);for(var I=0;I<4;++I)d=g+dL[I],p=v+pL[I],s.outOfBounds(d,p,d,p)||E.push([d,p]);if(d=t.invert(g),p=t.invert(v),m=M,y=a,!fL(d,p,C,k,i,a)&&!hL(t,d,p,k,C,m,o,u)&&!hL(t,d,p,k,C,k,o,null)){for(;y-m>=1;)hL(t,d,p,k,C,x=(m+y)/2,o,u)?y=x:m=x;m>M&&(e.x=d,e.y=p,M=m,O=!0)}}}O||n||(d=(l+c)/2,p=(f+h)/2,(b=Math.abs(c-l+h-f))>=_&&!fL(d,p,C,k,i,a)&&!hL(t,d,p,k,C,k,o,null)&&(_=b,e.x=d,e.y=p,A=!0))}return!(!O&&!A)&&(d=C/2,p=k/2,o.setRange(t(e.x-d),t(e.y-p),t(e.x+d),t(e.y+p)),e.align="center",e.baseline="middle",!0)}}};function bL(t,e,n,r,i,a,o,u,s,l,c){if(!t.length)return t;var f,h=Math.max(r.length,i.length),d=function(t,e){for(var n=new Float64Array(e),r=t.length,i=0;i<r;++i)n[i]=t[i]||0;for(var a=r;a<e;++a)n[a]=n[r-1];return n}(r,h),p=function(t,e){for(var n=new Int8Array(e),r=t.length,i=0;i<r;++i)n[i]|=yL[t[i]];for(var a=r;a<e;++a)n[a]=n[r-1];return n}(i,h),g=(f=t[0].datum)&&f.mark&&f.mark.marktype,v="group"===g&&t[0].datum.items[s].marktype,m="area"===v,y=function(t,e,n,r){var i=function(t){return[t.x,t.x,t.x,t.y,t.y,t.y]};return t?"line"===t||"area"===t?function(t){return i(t.datum)}:"line"===e?function(t){var e=t.datum.items[r].items;return i(e.length?e["start"===n?0:e.length-1]:{x:NaN,y:NaN})}:function(t){var e=t.datum.bounds;return[e.x1,(e.x1+e.x2)/2,e.x2,e.y1,(e.y1+e.y2)/2,e.y2]}:i}(g,v,u,s),x=null===l||l===1/0,b=m&&"naive"===c,w=-1,S=-1,k=t.map((function(t){var e=x?IM.width(t,t.text):void 0;return w=Math.max(w,e),S=Math.max(S,t.fontSize),{datum:t,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(t),textWidth:e}}));l=null===l||l===1/0?Math.max(w,S)+Math.max.apply(Math,(0,X.Z)(r)):l;var C,E=cL(e[0],e[1],l);if(!b){n&&k.sort((function(t,e){return n(t.datum,e.datum)}));for(var M=!1,O=0;O<p.length&&!M;++O)M=5===p[O]||d[O]<0;var A=(g&&o||m)&&t.map((function(t){return t.datum}));C=a.length||A?function(t,e,n,r,i){var a=t.width,o=t.height,u=r||i,s=ey(a,o).getContext("2d"),l=ey(a,o).getContext("2d"),c=u&&ey(a,o).getContext("2d");n.forEach((function(t){return iL(s,t,!1)})),iL(l,e,!1),u&&iL(c,e,!0);var f,h,d,p,g,v,m,y,x=rL(s,a,o),b=rL(l,a,o),w=u&&rL(c,a,o),S=t.bitmap(),k=u&&t.bitmap();for(h=0;h<o;++h)for(f=0;f<a;++f)v=x[g=h*a+f]&nL,y=b[g]&nL,m=u&&w[g]&nL,(v||m||y)&&(d=t(f),p=t(h),i||!v&&!y||S.set(d,p),u&&(v||m)&&k.set(d,p));return[S,k]}(E,A||[],a,M,m):function(t,e){var n=t.bitmap();return(e||[]).forEach((function(e){return n.set(t(e.boundary[0]),t(e.boundary[3]))})),[n,void 0]}(E,o&&k)}var _=m?xL[c](E,C,o,s):function(t,e,n,r){var i=t.width,a=t.height,o=e[0],u=e[1],s=r.length;return function(e){var l,c=e.boundary,f=e.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>a)return!1;for(var h,d,p,g,v,m,y,x,b,w,S,k,C,E,M,O=null!==(l=e.textWidth)&&void 0!==l?l:0,A=0;A<s;++A){if(h=(3&n[A])-1,d=(n[A]>>>2&3)-1,p=0===h&&0===d||r[A]<0,g=h&&d?Math.SQRT1_2:1,v=r[A]<0?-1:1,m=c[1+h]+r[A]*h*g,x=(S=c[4+d]+v*f*d/2+r[A]*d*g)-f/2,b=S+f/2,k=t(m),E=t(x),M=t(b),!O){if(!mL(k,k,E,M,o,u,0,0,0,0,0,p))continue;O=IM.width(e.datum,e.datum.text)}if(y=(w=m+v*O*h/2)+O/2,mL(k=t(m=w-O/2),C=t(y),E,M,o,u,0,0,0,0,0,p))return e.x=h?h*v<0?y:m:w,e.y=d?d*v<0?b:x:S,e.align=gL[h*v+1],e.baseline=vL[d*v+1],o.setRange(k,E,C,M),!0}return!1}}(E,C,p,d);return k.forEach((function(t){return t.opacity=+_(t)})),k}var wL=["x","y","opacity","align","baseline"],SL=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function kL(t){Ed.call(this,null,t)}function CL(t,e){var n,r,i,a,o,u,s=[],l=function(t){return t(a)};if(null==e)s.push(t);else for(n={},r=0,i=t.length;r<i;++r)a=t[r],(u=n[o=e.map(l)])||(n[o]=u=[],u.dims=o,s.push(u)),u.push(a);return s}function EL(t){Ed.call(this,null,t)}kL.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:SL},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:wL.length,default:wL}]},uu(kL,Ed,{transform:function(t,e){var n=t.modified();if(n||e.changed(e.ADD_REM)||function(n){var r=t[n];return Vo(r)&&e.modified(r.fields)}("sort")){t.size&&2===t.size.length||eo("Size parameter should be specified as a [width, height] array.");var r=t.as||wL;return bL(e.materialize(e.SOURCE).source||[],t.size,t.sort,Ho(null==t.offset?1:t.offset),Ho(t.anchor||SL),t.avoidMarks||[],!1!==t.avoidBaseMark,t.lineAnchor||"end",t.markIndex||0,void 0===t.padding?0:t.padding,t.method||"naive").forEach((function(t){var e=t.datum;e[r[0]]=t.x,e[r[1]]=t.y,e[r[2]]=t.opacity,e[r[3]]=t.align,e[r[4]]=t.baseline})),e.reflow(n).modifies(r)}}}),EL.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},uu(EL,Ed,{transform:function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=CL(e.materialize(e.SOURCE).source,t.groupby),i=(t.groupby||[]).map($a),a=i.length,o=t.as||[$a(t.x),$a(t.y)],u=[];r.forEach((function(e){zp(e,t.x,t.y,t.bandwidth||.3).forEach((function(t){for(var n={},r=0;r<a;++r)n[i[r]]=e.dims[r];n[o[0]]=t[0],n[o[1]]=t[1],u.push(Hh(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});var ML={linear:Pp,log:jp,exp:Bp,pow:Lp,quad:Rp,poly:Zp};function OL(t){Ed.call(this,null,t)}OL.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(ML)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},uu(OL,Ed,{transform:function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=CL(e.materialize(e.SOURCE).source,t.groupby),i=(t.groupby||[]).map($a),a=t.method||"linear",o=t.order||3,u=function(t,e){return"poly"===t?e:"quad"===t?2:1}(a,o),s=t.as||[$a(t.x),$a(t.y)],l=ML[a],c=[],f=t.extent;ru(ML,a)||eo("Invalid regression method: "+a),null!=f&&"log"===a&&f[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((function(n){if(n.length<=u)e.dataflow.warn("Skipping regression with more parameters than data points.");else{var r=l(n,t.x,t.y,o);if(t.params)c.push(Hh({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));else{var h=f||tu(n,t.x),d=function(t){for(var e={},r=0;r<i.length;++r)e[i[r]]=n.dims[r];e[s[0]]=t[0],e[s[1]]=t[1],c.push(Hh(e))};"linear"===a?h.forEach((function(t){return d([t,r.predict(t)])})):Vp(r.predict,h,25,200).forEach(d)}}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});var AL=134217729;function _L(t,e,n,r,i){var a,o,u,s,l=e[0],c=r[0],f=0,h=0;c>l==c>-l?(a=l,l=e[++f]):(a=c,c=r[++h]);var d=0;if(f<t&&h<n)for(c>l==c>-l?(u=a-((o=l+a)-l),l=e[++f]):(u=a-((o=c+a)-c),c=r[++h]),a=o,0!==u&&(i[d++]=u);f<t&&h<n;)c>l==c>-l?(u=a-((o=a+l)-(s=o-a))+(l-s),l=e[++f]):(u=a-((o=a+c)-(s=o-a))+(c-s),c=r[++h]),a=o,0!==u&&(i[d++]=u);for(;f<t;)u=a-((o=a+l)-(s=o-a))+(l-s),l=e[++f],a=o,0!==u&&(i[d++]=u);for(;h<n;)u=a-((o=a+c)-(s=o-a))+(c-s),c=r[++h],a=o,0!==u&&(i[d++]=u);return 0===a&&0!==d||(i[d++]=a),d}function DL(t){return new Float64Array(t)}var TL=DL(4),FL=DL(8),IL=DL(12),PL=DL(16),jL=DL(4);function BL(t,e,n,r,i,a){var o=(e-a)*(n-i),u=(t-i)*(r-a),s=o-u;if(0===o||0===u||o>0!=u>0)return s;var l=Math.abs(o+u);return Math.abs(s)>=33306690738754716e-32*l?s:-function(t,e,n,r,i,a,o){var u,s,l,c,f,h,d,p,g,v,m,y,x,b,w,S,k,C,E=t-i,M=n-i,O=e-a,A=r-a;f=(w=(p=E-(d=(h=AL*E)-(h-E)))*(v=A-(g=(h=AL*A)-(h-A)))-((b=E*A)-d*g-p*g-d*v))-(m=w-(k=(p=O-(d=(h=AL*O)-(h-O)))*(v=M-(g=(h=AL*M)-(h-M)))-((S=O*M)-d*g-p*g-d*v))),TL[0]=w-(m+f)+(f-k),f=(x=b-((y=b+m)-(f=y-b))+(m-f))-(m=x-S),TL[1]=x-(m+f)+(f-S),f=(C=y+m)-y,TL[2]=y-(C-f)+(m-f),TL[3]=C;var _=function(t,e){for(var n=e[0],r=1;r<t;r++)n+=e[r];return n}(4,TL),D=22204460492503146e-32*o;if(_>=D||-_>=D)return _;if(u=t-(E+(f=t-E))+(f-i),l=n-(M+(f=n-M))+(f-i),s=e-(O+(f=e-O))+(f-a),c=r-(A+(f=r-A))+(f-a),0===u&&0===s&&0===l&&0===c)return _;if(D=11093356479670487e-47*o+33306690738754706e-32*Math.abs(_),(_+=E*c+A*u-(O*l+M*s))>=D||-_>=D)return _;f=(w=(p=u-(d=(h=AL*u)-(h-u)))*(v=A-(g=(h=AL*A)-(h-A)))-((b=u*A)-d*g-p*g-d*v))-(m=w-(k=(p=s-(d=(h=AL*s)-(h-s)))*(v=M-(g=(h=AL*M)-(h-M)))-((S=s*M)-d*g-p*g-d*v))),jL[0]=w-(m+f)+(f-k),f=(x=b-((y=b+m)-(f=y-b))+(m-f))-(m=x-S),jL[1]=x-(m+f)+(f-S),f=(C=y+m)-y,jL[2]=y-(C-f)+(m-f),jL[3]=C;var T=_L(4,TL,4,jL,FL);f=(w=(p=E-(d=(h=AL*E)-(h-E)))*(v=c-(g=(h=AL*c)-(h-c)))-((b=E*c)-d*g-p*g-d*v))-(m=w-(k=(p=O-(d=(h=AL*O)-(h-O)))*(v=l-(g=(h=AL*l)-(h-l)))-((S=O*l)-d*g-p*g-d*v))),jL[0]=w-(m+f)+(f-k),f=(x=b-((y=b+m)-(f=y-b))+(m-f))-(m=x-S),jL[1]=x-(m+f)+(f-S),f=(C=y+m)-y,jL[2]=y-(C-f)+(m-f),jL[3]=C;var F=_L(T,FL,4,jL,IL);f=(w=(p=u-(d=(h=AL*u)-(h-u)))*(v=c-(g=(h=AL*c)-(h-c)))-((b=u*c)-d*g-p*g-d*v))-(m=w-(k=(p=s-(d=(h=AL*s)-(h-s)))*(v=l-(g=(h=AL*l)-(h-l)))-((S=s*l)-d*g-p*g-d*v))),jL[0]=w-(m+f)+(f-k),f=(x=b-((y=b+m)-(f=y-b))+(m-f))-(m=x-S),jL[1]=x-(m+f)+(f-S),f=(C=y+m)-y,jL[2]=y-(C-f)+(m-f),jL[3]=C;var I=_L(F,IL,4,jL,PL);return PL[I-1]}(t,e,n,r,i,a,l)}DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(8),DL(8),DL(8),DL(4),DL(8),DL(8),DL(8),DL(12),DL(192),DL(192);DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(8),DL(8),DL(8),DL(8),DL(8),DL(8),DL(8),DL(8),DL(8),DL(4),DL(4),DL(4),DL(8),DL(16),DL(16),DL(16),DL(32),DL(32),DL(48),DL(64),DL(1152),DL(1152);DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(4),DL(24),DL(24),DL(24),DL(24),DL(24),DL(24),DL(24),DL(24),DL(24),DL(24),DL(1152),DL(1152),DL(1152),DL(1152),DL(1152),DL(2304),DL(2304),DL(3456),DL(5760),DL(8),DL(8),DL(8),DL(16),DL(24),DL(48),DL(48),DL(96),DL(192),DL(384),DL(384),DL(384),DL(768);DL(96),DL(96),DL(96),DL(1152);var LL=Math.pow(2,-52),RL=new Uint32Array(512),ZL=function(){function t(e){(0,J.Z)(this,t);var n=e.length>>1;if(n>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return(0,K.Z)(t,[{key:"update",value:function(){for(var t=this.coords,e=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,a=t.length>>1,o=1/0,u=1/0,s=-1/0,l=-1/0,c=0;c<a;c++){var f=t[2*c],h=t[2*c+1];f<o&&(o=f),h<u&&(u=h),f>s&&(s=f),h>l&&(l=h),this._ids[c]=c}for(var d,p,g,v=(o+s)/2,m=(u+l)/2,y=1/0,x=0;x<a;x++){var b=NL(v,m,t[2*x],t[2*x+1]);b<y&&(d=x,y=b)}var w=t[2*d],S=t[2*d+1];y=1/0;for(var k=0;k<a;k++)if(k!==d){var C=NL(w,S,t[2*k],t[2*k+1]);C<y&&C>0&&(p=k,y=C)}for(var E=t[2*p],M=t[2*p+1],O=1/0,A=0;A<a;A++)if(A!==d&&A!==p){var _=UL(w,S,E,M,t[2*A],t[2*A+1]);_<O&&(g=A,O=_)}var D=t[2*g],T=t[2*g+1];if(O===1/0){for(var F=0;F<a;F++)this._dists[F]=t[2*F]-t[0]||t[2*F+1]-t[1];HL(this._ids,this._dists,0,a-1);for(var I=new Uint32Array(a),P=0,j=0,B=-1/0;j<a;j++){var L=this._ids[j];this._dists[L]>B&&(I[P++]=L,B=this._dists[L])}return this.hull=I.subarray(0,P),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(BL(w,S,E,M,D,T)<0){var R=p,Z=E,N=M;p=g,E=D,M=T,g=R,D=Z,T=N}var z=function(t,e,n,r,i,a){var o=n-t,u=r-e,s=i-t,l=a-e,c=o*o+u*u,f=s*s+l*l,h=.5/(o*l-u*s),d=t+(l*c-u*f)*h,p=e+(o*f-s*c)*h;return{x:d,y:p}}(w,S,E,M,D,T);this._cx=z.x,this._cy=z.y;for(var U=0;U<a;U++)this._dists[U]=NL(t[2*U],t[2*U+1],z.x,z.y);HL(this._ids,this._dists,0,a-1),this._hullStart=d;var H=3;n[d]=e[g]=p,n[p]=e[d]=g,n[g]=e[p]=d,r[d]=0,r[p]=1,r[g]=2,i.fill(-1),i[this._hashKey(w,S)]=d,i[this._hashKey(E,M)]=p,i[this._hashKey(D,T)]=g,this.trianglesLen=0,this._addTriangle(d,p,g,-1,-1,-1);for(var W,V,G=0;G<this._ids.length;G++){var X=this._ids[G],Y=t[2*X],q=t[2*X+1];if(!(G>0&&Math.abs(Y-W)<=LL&&Math.abs(q-V)<=LL)&&(W=Y,V=q,X!==d&&X!==p&&X!==g)){for(var $=0,J=0,K=this._hashKey(Y,q);J<this._hashSize&&(-1===($=i[(K+J)%this._hashSize])||$===n[$]);J++);for(var Q=$=e[$],tt=void 0;tt=n[Q],BL(Y,q,t[2*Q],t[2*Q+1],t[2*tt],t[2*tt+1])>=0;)if((Q=tt)===$){Q=-1;break}if(-1!==Q){var et=this._addTriangle(Q,X,n[Q],-1,-1,r[Q]);r[X]=this._legalize(et+2),r[Q]=et,H++;for(var nt=n[Q];tt=n[nt],BL(Y,q,t[2*nt],t[2*nt+1],t[2*tt],t[2*tt+1])<0;)et=this._addTriangle(nt,X,tt,r[X],-1,r[nt]),r[X]=this._legalize(et+2),n[nt]=nt,H--,nt=tt;if(Q===$)for(;BL(Y,q,t[2*(tt=e[Q])],t[2*tt+1],t[2*Q],t[2*Q+1])<0;)et=this._addTriangle(tt,X,Q,-1,r[Q],r[tt]),this._legalize(et+2),r[tt]=et,n[Q]=Q,H--,Q=tt;this._hullStart=e[X]=Q,n[Q]=e[nt]=X,n[X]=nt,i[this._hashKey(Y,q)]=X,i[this._hashKey(t[2*Q],t[2*Q+1])]=Q}}}this.hull=new Uint32Array(H);for(var rt=0,it=this._hullStart;rt<H;rt++)this.hull[rt]=it,it=n[it];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(t,e){return Math.floor((n=t-this._cx,r=e-this._cy,i=n/(Math.abs(n)+Math.abs(r)),(r>0?3-i:1+i)/4*this._hashSize))%this._hashSize;var n,r,i}},{key:"_legalize",value:function(t){for(var e=this._triangles,n=this._halfedges,r=this.coords,i=0,a=0;;){var o=n[t],u=t-t%3;if(a=u+(t+2)%3,-1!==o){var s=o-o%3,l=u+(t+1)%3,c=s+(o+2)%3,f=e[a],h=e[t],d=e[l],p=e[c];if(zL(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){e[t]=p,e[o]=f;var g=n[c];if(-1===g){var v=this._hullStart;do{if(this._hullTri[v]===c){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,g),this._link(o,n[a]),this._link(a,c);var m=s+(o+1)%3;i<RL.length&&(RL[i++]=m)}else{if(0===i)break;t=RL[--i]}}else{if(0===i)break;t=RL[--i]}}return a}},{key:"_link",value:function(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}},{key:"_addTriangle",value:function(t,e,n,r,i,a){var o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}],[{key:"from",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:VL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GL,i=e.length,a=new Float64Array(2*i),o=0;o<i;o++){var u=e[o];a[2*o]=n(u),a[2*o+1]=r(u)}return new t(a)}}]),t}();function NL(t,e,n,r){var i=t-n,a=e-r;return i*i+a*a}function zL(t,e,n,r,i,a,o,u){var s=t-o,l=e-u,c=n-o,f=r-u,h=i-o,d=a-u,p=c*c+f*f,g=h*h+d*d;return s*(f*g-p*d)-l*(c*g-p*h)+(s*s+l*l)*(c*d-f*h)<0}function UL(t,e,n,r,i,a){var o=n-t,u=r-e,s=i-t,l=a-e,c=o*o+u*u,f=s*s+l*l,h=.5/(o*l-u*s),d=(l*c-u*f)*h,p=(o*f-s*c)*h;return d*d+p*p}function HL(t,e,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var a=t[i],o=e[a],u=i-1;u>=n&&e[t[u]]>o;)t[u+1]=t[u--];t[u+1]=a}else{var s=n+1,l=r;WL(t,n+r>>1,s),e[t[n]]>e[t[r]]&&WL(t,n,r),e[t[s]]>e[t[r]]&&WL(t,s,r),e[t[n]]>e[t[s]]&&WL(t,n,s);for(var c=t[s],f=e[c];;){do{s++}while(e[t[s]]<f);do{l--}while(e[t[l]]>f);if(l<s)break;WL(t,s,l)}t[n+1]=t[l],t[l]=c,r-s+1>=l-n?(HL(t,e,s,r),HL(t,e,n,l-1)):(HL(t,e,n,l-1),HL(t,e,s,r))}}function WL(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function VL(t){return t[0]}function GL(t){return t[1]}var XL=1e-6,YL=function(){function t(){(0,J.Z)(this,t),this._x0=this._y0=this._x1=this._y1=null,this._=""}return(0,K.Z)(t,[{key:"moveTo",value:function(t,e){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(t,e){this._+="L".concat(this._x1=+t,",").concat(this._y1=+e)}},{key:"arc",value:function(t,e,n){var r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>XL||Math.abs(this._y1-i)>XL)&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(t-n,",").concat(e,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function(t,e,n,r){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}]),t}(),qL=function(){function t(){(0,J.Z)(this,t),this._=[]}return(0,K.Z)(t,[{key:"moveTo",value:function(t,e){this._.push([t,e])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(t,e){this._.push([t,e])}},{key:"value",value:function(){return this._.length?this._:null}}]),t}();function $L(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return JL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JL(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function JL(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var KL=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],r=(0,W.Z)(n,4),i=r[0],a=r[1],o=r[2],u=r[3];if((0,J.Z)(this,t),!((o=+o)>=(i=+i)&&(u=+u)>=(a=+a)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=o,this.xmin=i,this.ymax=u,this.ymin=a,this._init()}return(0,K.Z)(t,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var t,e,n=this.delaunay,r=n.points,i=n.hull,a=n.triangles,o=this.vectors,u=this.circumcenters=this._circumcenters.subarray(0,a.length/3*2),s=0,l=0,c=a.length;s<c;s+=3,l+=2){var f=2*a[s],h=2*a[s+1],d=2*a[s+2],p=r[f],g=r[f+1],v=r[h],m=r[h+1],y=r[d],x=r[d+1],b=v-p,w=m-g,S=y-p,k=x-g,C=2*(b*k-w*S);if(Math.abs(C)<1e-9){var E=1e9,M=2*a[0];t=(p+y)/2-(E*=Math.sign((r[M]-p)*k-(r[M+1]-g)*S))*k,e=(g+x)/2+E*S}else{var O=1/C,A=b*b+w*w,_=S*S+k*k;t=p+(k*A-w*_)*O,e=g+(b*_-S*A)*O}u[l]=t,u[l+1]=e}var D,T,F,I=i[i.length-1],P=4*I,j=r[2*I],B=r[2*I+1];o.fill(0);for(var L=0;L<i.length;++L)D=P,T=j,F=B,P=4*(I=i[L]),j=r[2*I],B=r[2*I+1],o[D+2]=o[P]=F-B,o[D+3]=o[P+1]=j-T}},{key:"render",value:function(t){var e=null==t?t=new YL:void 0,n=this.delaunay,r=n.halfedges,i=n.inedges,a=n.hull,o=this.circumcenters,u=this.vectors;if(a.length<=1)return null;for(var s=0,l=r.length;s<l;++s){var c=r[s];if(!(c<s)){var f=2*Math.floor(s/3),h=2*Math.floor(c/3),d=o[f],p=o[f+1],g=o[h],v=o[h+1];this._renderSegment(d,p,g,v,t)}}for(var m,y=a[a.length-1],x=0;x<a.length;++x){m=y,y=a[x];var b=2*Math.floor(i[y]/3),w=o[b],S=o[b+1],k=4*m,C=this._project(w,S,u[k+2],u[k+3]);C&&this._renderSegment(w,S,C[0],C[1],t)}return e&&e.value()}},{key:"renderBounds",value:function(t){var e=null==t?t=new YL:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}},{key:"renderCell",value:function(t,e){var n=null==e?e=new YL:void 0,r=this._clip(t);if(null!==r&&r.length){e.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(var a=2;a<i;a+=2)r[a]===r[a-2]&&r[a+1]===r[a-1]||e.lineTo(r[a],r[a+1]);return e.closePath(),n&&n.value()}}},{key:"cellPolygons",value:G().mark((function t(){var e,n,r,i;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.delaunay.points,n=0,r=e.length/2;case 2:if(!(n<r)){t.next=11;break}if(!(i=this.cellPolygon(n))){t.next=8;break}return i.index=n,t.next=8,i;case 8:++n,t.next=2;break;case 11:case"end":return t.stop()}}),t,this)}))},{key:"cellPolygon",value:function(t){var e=new qL;return this.renderCell(t,e),e.value()}},{key:"_renderSegment",value:function(t,e,n,r,i){var a,o=this._regioncode(t,e),u=this._regioncode(n,r);0===o&&0===u?(i.moveTo(t,e),i.lineTo(n,r)):(a=this._clipSegment(t,e,n,r,o,u))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}},{key:"contains",value:function(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}},{key:"neighbors",value:G().mark((function t(e){var n,r,i,a,o,u,s,l,c;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this._clip(e))){t.next=33;break}r=$L(this.delaunay.neighbors(e)),t.prev=3,r.s();case 5:if((i=r.n()).done){t.next=25;break}if(a=i.value,!(o=this._clip(a))){t.next=23;break}u=0,s=n.length;case 10:if(!(u<s)){t.next=23;break}l=0,c=o.length;case 12:if(!(l<c)){t.next=20;break}if(n[u]!=o[l]||n[u+1]!=o[l+1]||n[(u+2)%s]!=o[(l+c-2)%c]||n[(u+3)%s]!=o[(l+c-1)%c]){t.next=17;break}return t.next=16,a;case 16:return t.abrupt("break",23);case 17:l+=2,t.next=12;break;case 20:u+=2,t.next=10;break;case 23:t.next=5;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(3),r.e(t.t0);case 30:return t.prev=30,r.f(),t.finish(30);case 33:case"end":return t.stop()}}),t,this,[[3,27,30,33]])}))},{key:"_cell",value:function(t){var e=this.circumcenters,n=this.delaunay,r=n.inedges,i=n.halfedges,a=n.triangles,o=r[t];if(-1===o)return null;var u=[],s=o;do{var l=Math.floor(s/3);if(u.push(e[2*l],e[2*l+1]),a[s=s%3==2?s-2:s+1]!==t)break;s=i[s]}while(s!==o&&-1!==s);return u}},{key:"_clip",value:function(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var e=this._cell(t);if(null===e)return null;var n=this.vectors,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}},{key:"_clipFinite",value:function(t,e){for(var n,r,i,a,o=e.length,u=null,s=e[o-2],l=e[o-1],c=this._regioncode(s,l),f=0,h=0;h<o;h+=2)if(n=s,r=l,s=e[h],l=e[h+1],i=c,c=this._regioncode(s,l),0===i&&0===c)a=f,f=0,u?u.push(s,l):u=[s,l];else{var d=void 0,p=void 0,g=void 0,v=void 0,m=void 0;if(0===i){if(null===(d=this._clipSegment(n,r,s,l,i,c)))continue;var y=d,x=(0,W.Z)(y,4);p=x[0],g=x[1],v=x[2],m=x[3]}else{if(null===(d=this._clipSegment(s,l,n,r,c,i)))continue;var b=d,w=(0,W.Z)(b,4);v=w[0],m=w[1],p=w[2],g=w[3],a=f,f=this._edgecode(p,g),a&&f&&this._edge(t,a,f,u,u.length),u?u.push(p,g):u=[p,g]}a=f,f=this._edgecode(v,m),a&&f&&this._edge(t,a,f,u,u.length),u?u.push(v,m):u=[v,m]}if(u)a=f,f=this._edgecode(u[0],u[1]),a&&f&&this._edge(t,a,f,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}},{key:"_clipSegment",value:function(t,e,n,r,i,a){for(;;){if(0===i&&0===a)return[t,e,n,r];if(i&a)return null;var o=void 0,u=void 0,s=i||a;8&s?(o=t+(n-t)*(this.ymax-e)/(r-e),u=this.ymax):4&s?(o=t+(n-t)*(this.ymin-e)/(r-e),u=this.ymin):2&s?(u=e+(r-e)*(this.xmax-t)/(n-t),o=this.xmax):(u=e+(r-e)*(this.xmin-t)/(n-t),o=this.xmin),i?(t=o,e=u,i=this._regioncode(t,e)):(n=o,r=u,a=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(t,e,n,r,i,a){var o,u=Array.from(e);if((o=this._project(u[0],u[1],n,r))&&u.unshift(o[0],o[1]),(o=this._project(u[u.length-2],u[u.length-1],i,a))&&u.push(o[0],o[1]),u=this._clipFinite(t,u))for(var s,l=0,c=u.length,f=this._edgecode(u[c-2],u[c-1]);l<c;l+=2)s=f,f=this._edgecode(u[l],u[l+1]),s&&f&&(l=this._edge(t,s,f,u,l),c=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}},{key:"_edge",value:function(t,e,n,r,i){for(;e!==n;){var a=void 0,o=void 0;switch(e){case 5:e=4;continue;case 4:e=6,a=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,a=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,a=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,a=this.xmin,o=this.ymin}r[i]===a&&r[i+1]===o||!this.contains(t,a,o)||(r.splice(i,0,a,o),i+=2)}if(r.length>4)for(var u=0;u<r.length;u+=2){var s=(u+2)%r.length,l=(u+4)%r.length;(r[u]===r[s]&&r[s]===r[l]||r[u+1]===r[s+1]&&r[s+1]===r[l+1])&&(r.splice(s,2),u-=2)}return i}},{key:"_project",value:function(t,e,n,r){var i,a,o,u=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<u&&(o=this.ymin,a=t+(u=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<u&&(o=this.ymax,a=t+(u=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<u&&(a=this.xmax,o=e+(u=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<u&&(a=this.xmin,o=e+(u=i)*r)}return[a,o]}},{key:"_edgecode",value:function(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}},{key:"_regioncode",value:function(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}]),t}(),QL=G().mark(lR);function tR(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return eR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eR(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function eR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var nR=2*Math.PI,rR=Math.pow;function iR(t){return t[0]}function aR(t){return t[1]}function oR(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}var uR=function(){function t(e){(0,J.Z)(this,t),this._delaunator=new ZL(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}return(0,K.Z)(t,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){for(var e=t.triangles,n=t.coords,r=0;r<e.length;r+=3){var i=2*e[r],a=2*e[r+1],o=2*e[r+2];if((n[o]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},(function(t,e){return e})).sort((function(t,n){return e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]}));for(var n=this.collinear[0],r=this.collinear[this.collinear.length-1],i=[e[2*n],e[2*n+1],e[2*r],e[2*r+1]],a=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]),o=0,u=e.length/2;o<u;++o){var s=oR(e[2*o],e[2*o+1],a);e[2*o]=s[0],e[2*o+1]=s[1]}this._delaunator=new ZL(e)}else delete this.collinear;for(var l=this.halfedges=this._delaunator.halfedges,c=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,h=this.inedges.fill(-1),d=this._hullIndex.fill(-1),p=0,g=l.length;p<g;++p){var v=f[p%3==2?p-2:p+1];-1!==l[p]&&-1!==h[v]||(h[v]=p)}for(var m=0,y=c.length;m<y;++m)d[c[m]]=m;c.length<=2&&c.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=c[0],h[c[0]]=1,2===c.length&&(h[c[1]]=0,this.triangles[1]=c[1],this.triangles[2]=c[1]))}},{key:"voronoi",value:function(t){return new KL(this,t)}},{key:"neighbors",value:G().mark((function t(e){var n,r,i,a,o,u,s,l,c,f,h;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.inedges,r=this.hull,i=this._hullIndex,a=this.halfedges,o=this.triangles,!(u=this.collinear)){t.next=10;break}if(!((s=u.indexOf(e))>0)){t.next=6;break}return t.next=6,u[s-1];case 6:if(!(s<u.length-1)){t.next=9;break}return t.next=9,u[s+1];case 9:return t.abrupt("return");case 10:if(-1!==(l=n[e])){t.next=13;break}return t.abrupt("return");case 13:c=l,f=-1;case 14:return t.next=16,f=o[c];case 16:if(o[c=c%3==2?c-2:c+1]===e){t.next=19;break}return t.abrupt("return");case 19:if(-1!==(c=a[c])){t.next=26;break}if((h=r[(i[e]+1)%r.length])===f){t.next=25;break}return t.next=25,h;case 25:return t.abrupt("return");case 26:if(c!==l){t.next=14;break}case 27:case"end":return t.stop()}}),t,this)}))},{key:"find",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((t=+t)!=t||(e=+e)!=e)return-1;for(var r,i=n;(r=this._step(n,t,e))>=0&&r!==n&&r!==i;)n=r;return r}},{key:"_step",value:function(t,e,n){var r=this.inedges,i=this.hull,a=this._hullIndex,o=this.halfedges,u=this.triangles,s=this.points;if(-1===r[t]||!s.length)return(t+1)%(s.length>>1);var l=t,c=rR(e-s[2*t],2)+rR(n-s[2*t+1],2),f=r[t],h=f;do{var d=u[h],p=rR(e-s[2*d],2)+rR(n-s[2*d+1],2);if(p<c&&(c=p,l=d),u[h=h%3==2?h-2:h+1]!==t)break;if(-1===(h=o[h])){if((h=i[(a[t]+1)%i.length])!==d&&rR(e-s[2*h],2)+rR(n-s[2*h+1],2)<c)return h;break}}while(h!==f);return l}},{key:"render",value:function(t){for(var e=null==t?t=new YL:void 0,n=this.points,r=this.halfedges,i=this.triangles,a=0,o=r.length;a<o;++a){var u=r[a];if(!(u<a)){var s=2*i[a],l=2*i[u];t.moveTo(n[s],n[s+1]),t.lineTo(n[l],n[l+1])}}return this.renderHull(t),e&&e.value()}},{key:"renderPoints",value:function(t,e){void 0!==e||t&&"function"==typeof t.moveTo||(e=t,t=null),e=null==e?2:+e;for(var n=null==t?t=new YL:void 0,r=this.points,i=0,a=r.length;i<a;i+=2){var o=r[i],u=r[i+1];t.moveTo(o+e,u),t.arc(o,u,e,0,nR)}return n&&n.value()}},{key:"renderHull",value:function(t){var e=null==t?t=new YL:void 0,n=this.hull,r=this.points,i=2*n[0],a=n.length;t.moveTo(r[i],r[i+1]);for(var o=1;o<a;++o){var u=2*n[o];t.lineTo(r[u],r[u+1])}return t.closePath(),e&&e.value()}},{key:"hullPolygon",value:function(){var t=new qL;return this.renderHull(t),t.value()}},{key:"renderTriangle",value:function(t,e){var n=null==e?e=new YL:void 0,r=this.points,i=this.triangles,a=2*i[t*=3],o=2*i[t+1],u=2*i[t+2];return e.moveTo(r[a],r[a+1]),e.lineTo(r[o],r[o+1]),e.lineTo(r[u],r[u+1]),e.closePath(),n&&n.value()}},{key:"trianglePolygons",value:G().mark((function t(){var e,n,r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.triangles,n=0,r=e.length/3;case 2:if(!(n<r)){t.next=8;break}return t.next=5,this.trianglePolygon(n);case 5:++n,t.next=2;break;case 8:case"end":return t.stop()}}),t,this)}))},{key:"trianglePolygon",value:function(t){var e=new qL;return this.renderTriangle(t,e),e.value()}}],[{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iR,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aR,i=arguments.length>3?arguments[3]:void 0;return new t("length"in e?sR(e,n,r,i):Float64Array.from(lR(e,n,r,i)))}}]),t}();function sR(t,e,n,r){for(var i=t.length,a=new Float64Array(2*i),o=0;o<i;++o){var u=t[o];a[2*o]=e.call(r,u,o,t),a[2*o+1]=n.call(r,u,o,t)}return a}function lR(t,e,n,r){var i,a,o,u;return G().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:i=0,a=tR(t),s.prev=2,a.s();case 4:if((o=a.n()).done){s.next=13;break}return u=o.value,s.next=8,e.call(r,u,i,t);case 8:return s.next=10,n.call(r,u,i,t);case 10:++i;case 11:s.next=4;break;case 13:s.next=18;break;case 15:s.prev=15,s.t0=s.catch(2),a.e(s.t0);case 18:return s.prev=18,a.f(),s.finish(18);case 21:case"end":return s.stop()}}),QL,null,[[2,15,18,21]])}function cR(t){Ed.call(this,null,t)}cR.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var fR=[-1e5,-1e5,1e5,1e5];function hR(t){for(var e=t[0][0],n=t[0][1],r=t.length-1;t[r][0]===e&&t[r][1]===n;--r);return"M"+t.slice(0,r+1).join("L")+"Z"}uu(cR,Ed,{transform:function(t,e){var n=t.as||"path",r=e.source;if(!r||!r.length)return e;var i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:fR;for(var a=this.value=uR.from(r,t.x,t.y).voronoi(i),o=0,u=r.length;o<u;++o){var s=a.cellPolygon(o);r[o][n]=s?hR(s):null}return e.reflow(t.modified()).modifies(n)}});var dR=Math.PI/180,pR=2048;function gR(){var t,e,n,r,i,a,o,u=[256,256],s=bR,l=[],c=Math.random,f={};function h(t,e,n){for(var r,i,a,o=e.x,l=e.y,f=Math.sqrt(u[0]*u[0]+u[1]*u[1]),h=s(u),d=c()<.5?1:-1,p=-d;(r=h(p+=d))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=f));)if(e.x=o+i,e.y=l+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>u[0]||e.y+e.y1>u[1])&&(!n||!mR(e,t,u[0]))&&(!n||xR(e,n))){for(var g,v=e.sprite,m=e.width>>5,y=u[0]>>5,x=e.x-(m<<4),b=127&x,w=32-b,S=e.y1-e.y0,k=(e.y+e.y0)*y+(x>>5),C=0;C<S;C++){g=0;for(var E=0;E<=m;E++)t[k+E]|=g<<w|(E<m?(g=v[C*m+E])>>>b:0);k+=y}return e.sprite=null,!0}return!1}return f.layout=function(){for(var s=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=2048/e,t.height=pR/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(ey()),f=function(t){var e=[],n=-1;for(;++n<t;)e[n]=0;return e}((u[0]>>5)*u[1]),d=null,p=l.length,g=-1,v=[],m=l.map((function(u){return{text:t(u),font:e(u),style:r(u),weight:i(u),rotate:a(u),size:~~(n(u)+1e-14),padding:o(u),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:u}})).sort((function(t,e){return e.size-t.size}));++g<p;){var y=m[g];y.x=u[0]*(c()+.5)>>1,y.y=u[1]*(c()+.5)>>1,vR(s,y,m,g),y.hasText&&h(f,y,d)&&(v.push(y),d?yR(d,y):d=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=u[0]>>1,y.y-=u[1]>>1)}return v},f.words=function(t){return arguments.length?(l=t,f):l},f.size=function(t){return arguments.length?(u=[+t[0],+t[1]],f):u},f.font=function(t){return arguments.length?(e=wR(t),f):e},f.fontStyle=function(t){return arguments.length?(r=wR(t),f):r},f.fontWeight=function(t){return arguments.length?(i=wR(t),f):i},f.rotate=function(t){return arguments.length?(a=wR(t),f):a},f.text=function(e){return arguments.length?(t=wR(e),f):t},f.spiral=function(t){return arguments.length?(s=SR[t]||t,f):s},f.fontSize=function(t){return arguments.length?(n=wR(t),f):n},f.padding=function(t){return arguments.length?(o=wR(t),f):o},f.random=function(t){return arguments.length?(c=t,f):c},f}function vR(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,2048/a,pR/a);var o,u,s,l,c,f=0,h=0,d=0,p=n.length;for(--r;++r<p;){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font,o=i.measureText(e.text+"m").width*a,s=e.size<<1,e.rotate){var g=Math.sin(e.rotate*dR),v=Math.cos(e.rotate*dR),m=o*v,y=o*g,x=s*v,b=s*g;o=Math.max(Math.abs(m+b),Math.abs(m-b))+31>>5<<5,s=~~Math.max(Math.abs(y+x),Math.abs(y-x))}else o=o+31>>5<<5;if(s>d&&(d=s),f+o>=2048&&(f=0,h+=d,d=0),h+s>=pR)break;i.translate((f+(o>>1))/a,(h+(s>>1))/a),e.rotate&&i.rotate(e.rotate*dR),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=o,e.height=s,e.xoff=f,e.yoff=h,e.x1=o>>1,e.y1=s>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,f+=o}for(var w=i.getImageData(0,0,2048/a,pR/a).data,S=[];--r>=0;)if((e=n[r]).hasText){for(u=(o=e.width)>>5,s=e.y1-e.y0,l=0;l<s*u;l++)S[l]=0;if(null==(f=e.xoff))return;h=e.yoff;var k=0,C=-1;for(c=0;c<s;c++){for(l=0;l<o;l++){var E=u*c+(l>>5),M=w[2048*(h+c)+(f+l)<<2]?1<<31-l%32:0;S[E]|=M,k|=M}k?C=c:(e.y0++,s--,c--,h++)}e.y1=e.y0+C,e.sprite=S.slice(0,(e.y1-e.y0)*u)}}}function mR(t,e,n){n>>=5;for(var r,i=t.sprite,a=t.width>>5,o=t.x-(a<<4),u=127&o,s=32-u,l=t.y1-t.y0,c=(t.y+t.y0)*n+(o>>5),f=0;f<l;f++){r=0;for(var h=0;h<=a;h++)if((r<<s|(h<a?(r=i[f*a+h])>>>u:0))&e[c+h])return!0;c+=n}return!1}function yR(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function xR(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function bR(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function wR(t){return"function"==typeof t?t:function(){return t}}var SR={archimedean:bR,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}},kR=["x","y","font","fontSize","fontStyle","fontWeight","angle"],CR=["text","font","rotate","fontSize","fontStyle","fontWeight"];function ER(t){Ed.call(this,gR(),t)}ER.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:kR}]},uu(ER,Ed,{transform:function(t,e){!t.size||t.size[0]&&t.size[1]||eo("Wordcloud size dimensions must be non-zero.");var n=t.modified();if(n||e.changed(e.ADD_REM)||CR.some((function(n){var r=t[n];return Vo(r)&&e.modified(r.fields)}))){var r,i=e.materialize(e.SOURCE).source,a=this.value,o=t.as||kR,u=t.fontSize||14;if(Vo(u)?r=t.fontSizeRange:u=Jo(u),r){var s=u,l=pk("sqrt")().domain(tu(i,s)).range(r);u=function(t){return l(s(t))}}i.forEach((function(t){t[o[0]]=NaN,t[o[1]]=NaN,t[o[3]]=0}));for(var c,f,h=a.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(u).random(ip).layout(),d=a.size(),p=d[0]>>1,g=d[1]>>1,v=h.length,m=0;m<v;++m)(f=(c=h[m]).datum)[o[0]]=c.x+p,f[o[1]]=c.y+g,f[o[2]]=c.font,f[o[3]]=c.size,f[o[4]]=c.style,f[o[5]]=c.weight,f[o[6]]=c.rotate;return e.reflow(n).modifies(o)}}});var MR=function(t){return new Uint8Array(t)},OR=function(t){return new Uint16Array(t)},AR=function(t){return new Uint32Array(t)};function _R(t,e,n){var r=(e<257?MR:e<65537?OR:AR)(t);return n&&r.set(n),r}function DR(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var n,i=this,a=i.bisect(i.range,t.value),o=t.index,u=a[0],s=a[1],l=o.length;for(n=0;n<u;++n)e[o[n]]|=r;for(n=s;n<l;++n)e[o[n]]|=r;return i}}}function TR(){var t=AR(0),e=[],n=0;return{insert:function(r,i,a){if(!i.length)return[];var o,u,s,l=n,c=i.length,f=AR(c),h=Array(c);for(s=0;s<c;++s)h[s]=r(i[s]),f[s]=s;if(h=function(t,e){return t.sort.call(e,(function(e,n){var r=t[e],i=t[n];return r<i?-1:r>i?1:0})),function(t,e){return Array.from(e,(function(e){return t[e]}))}(t,e)}(h,f),l)o=e,u=t,e=Array(l+c),t=AR(l+c),function(t,e,n,r,i,a,o,u,s){var l,c=0,f=0;for(l=0;c<r&&f<o;++l)e[c]<i[f]?(u[l]=e[c],s[l]=n[c++]):(u[l]=i[f],s[l]=a[f++]+t);for(;c<r;++c,++l)u[l]=e[c],s[l]=n[c];for(;f<o;++f,++l)u[l]=i[f],s[l]=a[f]+t}(a,o,u,l,h,f,c,e,t);else{if(a>0)for(s=0;s<c;++s)f[s]+=a;e=h,t=f}return n=l+c,{index:f,value:h}},remove:function(r,i){var a,o,u,s=n;for(o=0;!i[t[o]]&&o<s;++o);for(u=o;o<s;++o)i[a=t[o]]||(t[u]=a,e[u]=e[o],++u);n=s-r},bisect:function(t,r){var i;return r?i=r.length:(r=e,i=n),[Ey(r,t[0],0,i),Cy(r,t[1],0,i)]},reindex:function(e){for(var r=0,i=n;r<i;++r)t[r]=e[t[r]]},index:function(){return t},size:function(){return n}}}function FR(t){Ed.call(this,function(){var t=8,e=[],n=AR(0),r=_R(0,t),i=_R(0,t);return{data:function(){return e},seen:function(){return n=function(t,e,n){return t.length>=e?t:((n=n||new t.constructor(e)).set(t),n)}(n,e.length)},add:function(t){for(var n,r=0,i=e.length,a=t.length;r<a;++r)(n=t[r])._index=i++,e.push(n)},remove:function(t,n){var a,o,u,s=e.length,l=Array(s-t),c=e;for(o=0;!n[o]&&o<s;++o)l[o]=e[o],c[o]=o;for(u=o;o<s;++o)a=e[o],n[o]?c[o]=-1:(c[o]=u,r[u]=r[o],i[u]=i[o],l[u]=a,a._index=u++),r[o]=0;return e=l,c},size:function(){return e.length},curr:function(){return r},prev:function(){return i},reset:function(t){return i[t]=r[t]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(t,e){r[t]|=e},clear:function(t,e){r[t]&=~e},resize:function(e,n){(e>r.length||n>t)&&(t=Math.max(n,t),r=_R(e,t,r),i=_R(e,t))}}}(),t),this._indices=null,this._dims=null}function IR(t){Ed.call(this,null,t)}FR.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},uu(FR,Ed,{transform:function(t,e){return this._dims?t.modified("fields")||t.fields.some((function(t){return e.modified(t.fields)}))?this.reinit(t,e):this.eval(t,e):this.init(t,e)},init:function(t,e){for(var n,r,i=t.fields,a=t.query,o=this._indices={},u=this._dims=[],s=a.length,l=0;l<s;++l)r=o[n=i[l].fname]||(o[n]=TR()),u.push(DR(r,l,a[l]));return this.eval(t,e)},reinit:function(t,e){var n,r,i,a,o,u,s,l,c,f=e.materialize().fork(),h=t.fields,d=t.query,p=this._indices,g=this._dims,v=this.value,m=v.curr(),y=v.prev(),x=v.all(),b=f.rem=f.add,w=f.mod,S=d.length,k={};if(y.set(m),e.rem.length&&(o=this.remove(t,e,f)),e.add.length&&v.add(e.add),e.mod.length)for(u={},s=0,l=(a=e.mod).length;s<l;++s)u[a[s]._index]=1;for(s=0;s<S;++s)c=h[s],(!g[s]||t.modified("fields",s)||e.modified(c.fields))&&((n=k[i=c.fname])||(p[i]=r=TR(),k[i]=n=r.insert(c,e.source,0)),g[s]=DR(r,s,d[s]).onAdd(n,m));for(s=0,l=v.data().length;s<l;++s)o[s]||(y[s]!==m[s]?b.push(s):u[s]&&m[s]!==x&&w.push(s));return v.mask=(1<<S)-1,f},eval:function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},insert:function(t,e,n){var r,i,a,o=e.add,u=this.value,s=this._dims,l=this._indices,c=t.fields,f={},h=n.add,d=u.size()+o.length,p=s.length,g=u.size();u.resize(d,p),u.add(o);var v=u.curr(),m=u.prev(),y=u.all();for(r=0;r<p;++r)a=f[i=c[r].fname]||(f[i]=l[i].insert(c[r],o,g)),s[r].onAdd(a,v);for(;g<d;++g)m[g]=y,v[g]!==y&&h.push(g)},modify:function(t,e){var n,r,i,a=e.mod,o=this.value,u=o.curr(),s=o.all(),l=t.mod;for(n=0,r=l.length;n<r;++n)u[i=l[n]._index]!==s&&a.push(i)},remove:function(t,e,n){var r,i,a,o,u=this._indices,s=this.value,l=s.curr(),c=s.prev(),f=s.all(),h={},d=n.rem,p=e.rem;for(r=0,i=p.length;r<i;++r)h[a=p[r]._index]=1,c[a]=o=l[a],l[a]=f,o!==f&&d.push(a);for(a in u)u[a].remove(i,h);return this.reindex(e,i,h),h},reindex:function(t,e,n){var r=this._indices,i=this.value;t.runAfter((function(){var t=i.remove(e,n);for(var a in r)r[a].reindex(t)}))},update:function(t,e,n){var r,i,a=this._dims,o=t.query,u=e.stamp,s=a.length,l=0;for(n.filters=0,i=0;i<s;++i)t.modified("query",i)&&(r=i,++l);if(1===l)l=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,l=0;i<s;++i)t.modified("query",i)&&(l|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return l},incrementAll:function(t,e,n,r){var i,a,o,u=this.value,s=u.seen(),l=u.curr(),c=u.prev(),f=t.index(),h=t.bisect(t.range),d=t.bisect(e),p=d[0],g=d[1],v=h[0],m=h[1],y=t.one;if(p<v)for(i=p,a=Math.min(v,g);i<a;++i)s[o=f[i]]!==n&&(c[o]=l[o],s[o]=n,r.push(o)),l[o]^=y;else if(p>v)for(i=v,a=Math.min(p,m);i<a;++i)s[o=f[i]]!==n&&(c[o]=l[o],s[o]=n,r.push(o)),l[o]^=y;if(g>m)for(i=Math.max(p,m),a=g;i<a;++i)s[o=f[i]]!==n&&(c[o]=l[o],s[o]=n,r.push(o)),l[o]^=y;else if(g<m)for(i=Math.max(v,g),a=m;i<a;++i)s[o=f[i]]!==n&&(c[o]=l[o],s[o]=n,r.push(o)),l[o]^=y;t.range=e.slice()},incrementOne:function(t,e,n,r){var i,a,o,u=this.value.curr(),s=t.index(),l=t.bisect(t.range),c=t.bisect(e),f=c[0],h=c[1],d=l[0],p=l[1],g=t.one;if(f<d)for(i=f,a=Math.min(d,h);i<a;++i)u[o=s[i]]^=g,n.push(o);else if(f>d)for(i=d,a=Math.min(f,p);i<a;++i)u[o=s[i]]^=g,r.push(o);if(h>p)for(i=Math.max(f,p),a=h;i<a;++i)u[o=s[i]]^=g,n.push(o);else if(h<p)for(i=Math.max(d,h),a=p;i<a;++i)u[o=s[i]]^=g,r.push(o);t.range=e.slice()}}),IR.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},uu(IR,Ed,{transform:function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(0==(i&n))return e.StopPropagation;var a=e.fork(e.ALL),o=r.data(),u=r.curr(),s=r.prev(),l=function(t){return u[t]&n?null:o[t]};return a.filter(a.MOD,l),i&i-1?(a.filter(a.ADD,(function(t){var e=u[t]&n;return!e&&e^s[t]&n?o[t]:null})),a.filter(a.REM,(function(t){var e=u[t]&n;return e&&!(e^e^s[t]&n)?o[t]:null}))):(a.filter(a.ADD,l),a.filter(a.REM,(function(t){return(u[t]&n)===i?o[t]:null}))),a.filter(a.SOURCE,(function(t){return l(t._index)}))}});var PR=/^(data:|([A-Za-z]+:)?\/\/)/,jR=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,BR=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,LR="file://";function RR(t,e){return ZR.apply(this,arguments)}function ZR(){return(ZR=(0,rt.Z)(G().mark((function t(e,n){var r,i;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(e,n);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function NR(t,e){return zR.apply(this,arguments)}function zR(){return zR=(0,rt.Z)(G().mark((function t(e,n){var r,i,a,o,u,s,l;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Qo({},this.options,n),r=this.fileAccess,i={href:null},s=jR.test(e.replace(BR,"")),null!=e&&"string"==typeof e&&s||eo("Sanitize failure, invalid URI: "+Su(e)),l=PR.test(e),(u=n.baseURL)&&!l&&(e.startsWith("/")||u.endsWith("/")||(e="/"+e),e=u+e),o=(a=e.startsWith(LR))||"file"===n.mode||"http"!==n.mode&&!l&&r,a?e=e.slice(LR.length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),o=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(i.crossOrigin=n.crossOrigin+""),t.abrupt("return",i);case 14:case"end":return t.stop()}}),t,this)}))),zR.apply(this,arguments)}function UR(t){return t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){t?r(t):n(e)}))}))}:HR}function HR(){return WR.apply(this,arguments)}function WR(){return(WR=(0,rt.Z)(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:eo("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function VR(t){return t?function(){var e=(0,rt.Z)(G().mark((function e(n,r){var i,a,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qo({},this.options.http,r),a=r&&r.response,e.next=4,t(n,i);case 4:return o=e.sent,e.abrupt("return",o.ok?Vo(o[a])?o[a]():o.text():eo(o.status+""+o.statusText));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}():GR}function GR(){return XR.apply(this,arguments)}function XR(){return(XR=(0,rt.Z)(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:eo("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var YR=function(t){return!(Number.isNaN(+t)||t instanceof Date)},qR={boolean:ku,integer:Eo,number:Eo,date:Eu,string:Mu,unknown:ao},$R=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return YR(t)&&Number.isInteger(+t)},YR,function(t){return!Number.isNaN(Date.parse(t))}],JR=["boolean","integer","number","date"];function KR(t,e){if(!t||!t.length)return"unknown";for(var n,r,i,a=t.length,o=$R.length,u=$R.map((function(t,e){return e+1})),s=0,l=0;s<a;++s)for(r=e?t[s][e]:t[s],n=0;n<o;++n)if(u[n]&&(null!=(i=r)&&i==i)&&!$R[n](r)&&(u[n]=0,++l===$R.length))return"string";return JR[u.reduce((function(t,e){return 0===t?e:t}),0)-1]}function QR(t,e){return e.reduce((function(e,n){return e[n]=KR(t,n),e}),{})}function tZ(t){var e=function(e,n){var r={delimiter:t};return eZ(e,n?Qo(n,r):r)};return e.responseType="text",e}function eZ(t,e){return e.header&&(t=e.header.map(Su).join(e.delimiter)+"\n"+t),Bu(e.delimiter).parse(t+"")}function nZ(t,e){var n,r=e&&e.property?ro(e.property):ao;return!xo(t)||(n=t,"function"==typeof Buffer&&Vo(Buffer.isBuffer)&&Buffer.isBuffer(n))?r(JSON.parse(t)):function(t,e){!yo(t)&&fu(t)&&(t=(0,X.Z)(t));return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(r(t),e)}eZ.responseType="text",nZ.responseType="json";var rZ={interior:function(t,e){return t!==e},exterior:function(t,e){return t===e}};function iZ(t,e){var n,r,i,a;return t=nZ(t,e),e&&e.feature?(n=Ru,i=e.feature):e&&e.mesh?(n=Uu,i=e.mesh,a=rZ[e.filter]):eo("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r,a):eo("Invalid TopoJSON object: "+i))&&r.features||[r]}iZ.responseType="json";var aZ={dsv:eZ,csv:tZ(","),tsv:tZ("\t"),json:nZ,topojson:iZ};function oZ(t,e){return arguments.length>1?(aZ[t]=e,this):ru(aZ,t)?aZ[t]:null}function uZ(t){var e=oZ(t);return e&&e.responseType||"text"}function sZ(t,e,n,r){var i=oZ((e=e||{}).type||"json");return i||eo("Unknown data format type: "+e.type),t=i(t,e),e.parse&&function(t,e,n,r){if(!t.length)return;var i=eh();n=n||i.timeParse,r=r||i.utcParse;var a,o,u,s,l,c,f=t.columns||Object.keys(t[0]);"auto"===e&&(e=QR(t,f));f=Object.keys(e);var h=f.map((function(t){var i,a,o=e[t];if(o&&(o.startsWith("date:")||o.startsWith("utc:")))return("'"===(a=(i=o.split(/:(.+)?/,2))[1])[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1)),("utc"===i[0]?r:n)(a);if(!qR[o])throw Error("Illegal format pattern: "+t+":"+o);return qR[o]}));for(u=0,l=t.length,c=f.length;u<l;++u)for(a=t[u],s=0;s<c;++s)a[o=f[s]]=h[s](a[o])}(t,e.parse,n,r),ru(t,"columns")&&delete t.columns,t}var lZ,cZ,fZ,hZ,dZ,pZ=function(t,e){return function(n){return{options:n||{},sanitize:NR,load:RR,fileAccess:!!e,file:UR(e),http:VR(t)}}}("undefined"!=typeof fetch&&fetch,null),gZ="Literal",vZ="Property",mZ="ArrayExpression",yZ="BinaryExpression",xZ="CallExpression",bZ="ConditionalExpression",wZ="LogicalExpression",SZ="MemberExpression",kZ="ObjectExpression",CZ="UnaryExpression";function EZ(t){this.type=t}EZ.prototype.visit=function(t){var e,n,r;if(t(this))return 1;for(n=0,r=(e=function(t){switch(t.type){case mZ:return t.elements;case yZ:case wZ:return[t.left,t.right];case xZ:return[t.callee].concat(t.arguments);case bZ:return[t.test,t.consequent,t.alternate];case SZ:return[t.object,t.property];case kZ:return t.properties;case vZ:return[t.key,t.value];case CZ:return[t.argument];default:return[]}}(this)).length;n<r;++n)if(e[n].visit(t))return 1};(lZ={})[1]="Boolean",lZ[2]="<end>",lZ[3]="Identifier",lZ[4]="Keyword",lZ[5]="Null",lZ[6]="Numeric",lZ[7]="Punctuator",lZ[8]="String",lZ[9]="RegularExpression";var MZ="Identifier",OZ="Unexpected token %0",AZ="Invalid regular expression",_Z="Invalid regular expression: missing /",DZ="Octal literals are not allowed in strict mode.",TZ="ILLEGAL",FZ="Disabled.",IZ=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),PZ=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function jZ(t,e){if(!t)throw new Error("ASSERT: "+e)}function BZ(t){return t>=48&&t<=57}function LZ(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function RZ(t){return"01234567".indexOf(t)>=0}function ZZ(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function NZ(t){return 10===t||13===t||8232===t||8233===t}function zZ(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&IZ.test(String.fromCharCode(t))}function UZ(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&PZ.test(String.fromCharCode(t))}var HZ={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function WZ(){for(;fZ<hZ;){var t=cZ.charCodeAt(fZ);if(!ZZ(t)&&!NZ(t))break;++fZ}}function VZ(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)fZ<hZ&&LZ(cZ[fZ])?(r=cZ[fZ++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):uN({},OZ,TZ);return String.fromCharCode(i)}function GZ(){var t,e,n,r;for(e=0,"}"===(t=cZ[fZ])&&uN({},OZ,TZ);fZ<hZ&&LZ(t=cZ[fZ++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&uN({},OZ,TZ),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function XZ(){var t,e;for(t=cZ.charCodeAt(fZ++),e=String.fromCharCode(t),92===t&&(117!==cZ.charCodeAt(fZ)&&uN({},OZ,TZ),++fZ,(t=VZ("u"))&&"\\"!==t&&zZ(t.charCodeAt(0))||uN({},OZ,TZ),e=t);fZ<hZ&&UZ(t=cZ.charCodeAt(fZ));)++fZ,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==cZ.charCodeAt(fZ)&&uN({},OZ,TZ),++fZ,(t=VZ("u"))&&"\\"!==t&&UZ(t.charCodeAt(0))||uN({},OZ,TZ),e+=t);return e}function YZ(){var t,e;return t=fZ,e=92===cZ.charCodeAt(fZ)?XZ():function(){var t,e;for(t=fZ++;fZ<hZ;){if(92===(e=cZ.charCodeAt(fZ)))return fZ=t,XZ();if(!UZ(e))break;++fZ}return cZ.slice(t,fZ)}(),{type:1===e.length?3:HZ.hasOwnProperty(e)?4:"null"===e?5:"true"===e||"false"===e?1:3,value:e,start:t,end:fZ}}function qZ(){var t,e,n,r,i=fZ,a=cZ.charCodeAt(fZ),o=cZ[fZ];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++fZ,{type:7,value:String.fromCharCode(a),start:i,end:fZ};default:if(61===(t=cZ.charCodeAt(fZ+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return fZ+=2,{type:7,value:String.fromCharCode(a)+String.fromCharCode(t),start:i,end:fZ};case 33:case 61:return fZ+=2,61===cZ.charCodeAt(fZ)&&++fZ,{type:7,value:cZ.slice(i,fZ),start:i,end:fZ}}}return">>>="===(r=cZ.substr(fZ,4))?{type:7,value:r,start:i,end:fZ+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:i,end:fZ+=3}:o===(e=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===e?{type:7,value:e,start:i,end:fZ+=2}:("//"===e&&uN({},OZ,TZ),"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:i,end:++fZ}:void uN({},OZ,TZ))}function $Z(){var t,e,n;if(jZ(BZ((n=cZ[fZ]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=fZ,t="","."!==n){if(t=cZ[fZ++],n=cZ[fZ],"0"===t){if("x"===n||"X"===n)return++fZ,function(t){for(var e="";fZ<hZ&&LZ(cZ[fZ]);)e+=cZ[fZ++];return 0===e.length&&uN({},OZ,TZ),zZ(cZ.charCodeAt(fZ))&&uN({},OZ,TZ),{type:6,value:parseInt("0x"+e,16),start:t,end:fZ}}(e);if(RZ(n))return function(t){for(var e="0"+cZ[fZ++];fZ<hZ&&RZ(cZ[fZ]);)e+=cZ[fZ++];return(zZ(cZ.charCodeAt(fZ))||BZ(cZ.charCodeAt(fZ)))&&uN({},OZ,TZ),{type:6,value:parseInt(e,8),octal:!0,start:t,end:fZ}}(e);n&&BZ(n.charCodeAt(0))&&uN({},OZ,TZ)}for(;BZ(cZ.charCodeAt(fZ));)t+=cZ[fZ++];n=cZ[fZ]}if("."===n){for(t+=cZ[fZ++];BZ(cZ.charCodeAt(fZ));)t+=cZ[fZ++];n=cZ[fZ]}if("e"===n||"E"===n)if(t+=cZ[fZ++],"+"!==(n=cZ[fZ])&&"-"!==n||(t+=cZ[fZ++]),BZ(cZ.charCodeAt(fZ)))for(;BZ(cZ.charCodeAt(fZ));)t+=cZ[fZ++];else uN({},OZ,TZ);return zZ(cZ.charCodeAt(fZ))&&uN({},OZ,TZ),{type:6,value:parseFloat(t),start:e,end:fZ}}function JZ(){var t,e,n,r;return dZ=null,WZ(),t=fZ,e=function(){var t,e,n,r;for(jZ("/"===(t=cZ[fZ]),"Regular expression literal must start with a slash"),e=cZ[fZ++],n=!1,r=!1;fZ<hZ;)if(e+=t=cZ[fZ++],"\\"===t)NZ((t=cZ[fZ++]).charCodeAt(0))&&uN({},_Z),e+=t;else if(NZ(t.charCodeAt(0)))uN({},_Z);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||uN({},_Z),{value:e.substr(1,e.length-2),literal:e}}(),n=function(){var t,e,n;for(e="",n="";fZ<hZ&&UZ((t=cZ[fZ]).charCodeAt(0));)++fZ,"\\"===t&&fZ<hZ?uN({},OZ,TZ):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&uN({},AZ,n),{value:n,literal:e}}(),r=function(t,e){var n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(t,e){if(parseInt(e,16)<=1114111)return"x";uN({},AZ)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){uN({},AZ)}try{return new RegExp(t,e)}catch(i){return null}}(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:fZ}}function KZ(){if(WZ(),fZ>=hZ)return{type:2,start:fZ,end:fZ};var t=cZ.charCodeAt(fZ);return zZ(t)?YZ():40===t||41===t||59===t?qZ():39===t||34===t?function(){var t,e,n,r,i="",a=!1;for(jZ("'"===(t=cZ[fZ])||'"'===t,"String literal must starts with a quote"),e=fZ,++fZ;fZ<hZ;){if((n=cZ[fZ++])===t){t="";break}if("\\"===n)if((n=cZ[fZ++])&&NZ(n.charCodeAt(0)))"\r"===n&&"\n"===cZ[fZ]&&++fZ;else switch(n){case"u":case"x":"{"===cZ[fZ]?(++fZ,i+=GZ()):i+=VZ(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:RZ(n)?(0!==(r="01234567".indexOf(n))&&(a=!0),fZ<hZ&&RZ(cZ[fZ])&&(a=!0,r=8*r+"01234567".indexOf(cZ[fZ++]),"0123".indexOf(n)>=0&&fZ<hZ&&RZ(cZ[fZ])&&(r=8*r+"01234567".indexOf(cZ[fZ++]))),i+=String.fromCharCode(r)):i+=n}else{if(NZ(n.charCodeAt(0)))break;i+=n}}return""!==t&&uN({},OZ,TZ),{type:8,value:i,octal:a,start:e,end:fZ}}():46===t?BZ(cZ.charCodeAt(fZ+1))?$Z():qZ():BZ(t)?$Z():qZ()}function QZ(){var t=dZ;return fZ=t.end,dZ=KZ(),fZ=t.end,t}function tN(){var t=fZ;dZ=KZ(),fZ=t}function eN(t,e,n){var r=new EZ("||"===t||"&&"===t?"LogicalExpression":"BinaryExpression");return r.operator=t,r.left=e,r.right=n,r}function nN(t,e){var n=new EZ("CallExpression");return n.callee=t,n.arguments=e,n}function rN(t){var e=new EZ(MZ);return e.name=t,e}function iN(t){var e=new EZ("Literal");return e.value=t.value,e.raw=cZ.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function aN(t,e,n){var r=new EZ("MemberExpression");return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function oN(t,e,n){var r=new EZ("Property");return r.key=e,r.value=n,r.kind=t,r}function uN(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(function(t,e){return jZ(e<r.length,"Message reference must be in range"),r[e]}));throw(n=new Error(i)).index=fZ,n.description=i,n}function sN(t){2===t.type&&uN(t,"Unexpected end of input"),6===t.type&&uN(t,"Unexpected number"),8===t.type&&uN(t,"Unexpected string"),3===t.type&&uN(t,"Unexpected identifier"),4===t.type&&uN(t,"Unexpected reserved word"),uN(t,OZ,t.value)}function lN(t){var e=QZ();7===e.type&&e.value===t||sN(e)}function cN(t){return 7===dZ.type&&dZ.value===t}function fN(t){return 4===dZ.type&&dZ.value===t}function hN(){var t=[];for(fZ=dZ.start,lN("[");!cN("]");)cN(",")?(QZ(),t.push(null)):(t.push(CN()),cN("]")||lN(","));return QZ(),function(t){var e=new EZ("ArrayExpression");return e.elements=t,e}(t)}function dN(){fZ=dZ.start;var t=QZ();return 8===t.type||6===t.type?(t.octal&&uN(t,DZ),iN(t)):rN(t.value)}function pN(){var t,e,n;return fZ=dZ.start,3===(t=dZ).type?(n=dN(),lN(":"),oN("init",n,CN())):2!==t.type&&7!==t.type?(e=dN(),lN(":"),oN("init",e,CN())):void sN(t)}function gN(){var t,e,n=[],r={},i=String;for(fZ=dZ.start,lN("{");!cN("}");)e="$"+((t=pN()).key.type===MZ?t.key.name:i(t.key.value)),Object.prototype.hasOwnProperty.call(r,e)?uN({},"Duplicate data property in object literal not allowed in strict mode"):r[e]=!0,n.push(t),cN("}")||lN(",");return lN("}"),function(t){var e=new EZ("ObjectExpression");return e.properties=t,e}(n)}var vN={if:1};function mN(){var t,e,n;if(cN("("))return function(){lN("(");var t=EN();return lN(")"),t}();if(cN("["))return hN();if(cN("{"))return gN();if(t=dZ.type,fZ=dZ.start,3===t||vN[dZ.value])n=rN(QZ().value);else if(8===t||6===t)dZ.octal&&uN(dZ,DZ),n=iN(QZ());else{if(4===t)throw new Error(FZ);1===t?((e=QZ()).value="true"===e.value,n=iN(e)):5===t?((e=QZ()).value=null,n=iN(e)):cN("/")||cN("/=")?(n=iN(JZ()),tN()):sN(QZ())}return n}function yN(){var t=[];if(lN("("),!cN(")"))for(;fZ<hZ&&(t.push(CN()),!cN(")"));)lN(",");return lN(")"),t}function xN(){return lN("."),function(){fZ=dZ.start;var t=QZ();return function(t){return 3===t.type||4===t.type||1===t.type||5===t.type}(t)||sN(t),rN(t.value)}()}function bN(){lN("[");var t=EN();return lN("]"),t}function wN(){var t=function(){var t;for(t=mN();;)if(cN("."))t=aN(".",t,xN());else if(cN("("))t=nN(t,yN());else{if(!cN("["))break;t=aN("[",t,bN())}return t}();if(7===dZ.type&&(cN("++")||cN("--")))throw new Error(FZ);return t}function SN(){var t,e;if(7!==dZ.type&&4!==dZ.type)e=wN();else{if(cN("++")||cN("--"))throw new Error(FZ);if(cN("+")||cN("-")||cN("~")||cN("!"))t=QZ(),e=SN(),e=function(t,e){var n=new EZ("UnaryExpression");return n.operator=t,n.argument=e,n.prefix=!0,n}(t.value,e);else{if(fN("delete")||fN("void")||fN("typeof"))throw new Error(FZ);e=wN()}}return e}function kN(t){var e=0;if(7!==t.type&&4!==t.type)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function CN(){var t,e;return t=function(){var t,e,n,r,i,a,o,u,s,l;if(t=dZ,s=SN(),0===(i=kN(r=dZ)))return s;for(r.prec=i,QZ(),e=[t,dZ],a=[s,r,o=SN()];(i=kN(dZ))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),e.pop(),n=eN(u,s,o),a.push(n);(r=QZ()).prec=i,a.push(r),e.push(dZ),n=SN(),a.push(n)}for(n=a[l=a.length-1],e.pop();l>1;)e.pop(),n=eN(a[l-1].value,a[l-2],n),l-=2;return n}(),cN("?")&&(QZ(),e=CN(),lN(":"),t=function(t,e,n){var r=new EZ("ConditionalExpression");return r.test=t,r.consequent=e,r.alternate=n,r}(t,e,CN())),t}function EN(){var t=CN();if(cN(","))throw new Error(FZ);return t}function MN(t){fZ=0,hZ=(cZ=t).length,dZ=null,tN();var e=EN();if(2!==dZ.type)throw new Error("Unexpect token after expression.");return e}var ON={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function AN(t){function e(e,n,r){return function(i){return function(e,n,r,i){var a=t(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}(e,i,n,r)}}var n="new Date",r="String",i="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&eo("Missing arguments to clamp function."),e.length>3&&eo("Too many arguments to clamp function.");var n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:e("getDate",n,0),day:e("getDay",n,0),year:e("getFullYear",n,0),month:e("getMonth",n,0),hours:e("getHours",n,0),minutes:e("getMinutes",n,0),seconds:e("getSeconds",n,0),milliseconds:e("getMilliseconds",n,0),time:e("getTime",n,0),timezoneoffset:e("getTimezoneOffset",n,0),utcdate:e("getUTCDate",n,0),utcday:e("getUTCDay",n,0),utcyear:e("getUTCFullYear",n,0),utcmonth:e("getUTCMonth",n,0),utchours:e("getUTCHours",n,0),utcminutes:e("getUTCMinutes",n,0),utcseconds:e("getUTCSeconds",n,0),utcmilliseconds:e("getUTCMilliseconds",n,0),length:e("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:e("toUpperCase",r,0),lower:e("toLowerCase",r,0),substring:e("substring",r),split:e("split",r),trim:e("trim",r,0),regexp:i,test:e("test",i),if:function(e){e.length<3&&eo("Missing arguments to if function."),e.length>3&&eo("Too many arguments to if function.");var n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function _N(t){var e=(t=t||{}).allowed?Ou(t.allowed):{},n=t.forbidden?Ou(t.forbidden):{},r=t.constants||ON,i=(t.functions||AN)(f),a=t.globalvar,o=t.fieldvar,u=Vo(a)?a:function(t){return"".concat(a,'["').concat(t,'"]')},s={},l={},c=0;function f(t){if(pu(t))return t;var e=h[t.type];return null==e&&eo("Unsupported type: "+t.type),e(t)}var h={Literal:function(t){return t.raw},Identifier:function(t){var i=t.name;return c>0?i:ru(n,i)?eo("Illegal identifier: "+i):ru(r,i)?r[i]:ru(e,i)?i:(s[i]=1,u(i))},MemberExpression:function(t){var e=!t.computed,n=f(t.object);e&&(c+=1);var r=f(t.property);return n===o&&(l[function(t){var e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}(r)]=1),e&&(c-=1),n+(e?"."+r:"["+r+"]")},CallExpression:function(t){"Identifier"!==t.callee.type&&eo("Illegal callee type: "+t.callee.type);var e=t.callee.name,n=t.arguments,r=ru(i,e)&&i[e];return r||eo("Unrecognized function: "+e),Vo(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(t){return"["+t.elements.map(f).join(",")+"]"},BinaryExpression:function(t){return"("+f(t.left)+" "+t.operator+" "+f(t.right)+")"},UnaryExpression:function(t){return"("+t.operator+f(t.argument)+")"},ConditionalExpression:function(t){return"("+f(t.test)+"?"+f(t.consequent)+":"+f(t.alternate)+")"},LogicalExpression:function(t){return"("+f(t.left)+t.operator+f(t.right)+")"},ObjectExpression:function(t){return"{"+t.properties.map(f).join(",")+"}"},Property:function(t){c+=1;var e=f(t.key);return c-=1,e+":"+f(t.value)}};function d(t){var e={code:f(t),globals:Object.keys(s),fields:Object.keys(l)};return s={},l={},e}return d.functions=i,d.constants=r,d}var DN,TN,FN,IN,PN,jN,BN,LN,RN,ZN,NN,zN,UN,HN,WN,VN,GN=new BD,XN=new BD,YN={point:oT,lineStart:oT,lineEnd:oT,polygonStart:function(){GN=new BD,YN.lineStart=qN,YN.lineEnd=$N},polygonEnd:function(){var t=+GN;XN.add(t<0?UD+t:t),this.lineStart=this.lineEnd=this.point=oT},sphere:function(){XN.add(UD)}};function qN(){YN.point=JN}function $N(){KN(DN,TN)}function JN(t,e){YN.point=KN,DN=t,TN=e,FN=t*=WD,IN=YD(e=(e*=WD)/2+zD),PN=tT(e)}function KN(t,e){var n=(t*=WD)-FN,r=n>=0?1:-1,i=r*n,a=YD(e=(e*=WD)/2+zD),o=tT(e),u=PN*o,s=IN*a+u*YD(i),l=u*r*tT(i);GN.add(XD(l,s)),FN=t,IN=a,PN=o}var QN,tz,ez,nz,rz,iz,az,oz,uz,sz,lz,cz,fz,hz,dz,pz,gz={point:vz,lineStart:yz,lineEnd:xz,polygonStart:function(){gz.point=bz,gz.lineStart=wz,gz.lineEnd=Sz,HN=new BD,YN.polygonStart()},polygonEnd:function(){YN.polygonEnd(),gz.point=vz,gz.lineStart=yz,gz.lineEnd=xz,GN<0?(jN=-(LN=180),BN=-(RN=90)):HN>LD?RN=90:HN<-1e-6&&(BN=-90),VN[0]=jN,VN[1]=LN},sphere:function(){jN=-(LN=180),BN=-(RN=90)}};function vz(t,e){WN.push(VN=[jN=t,LN=t]),e<BN&&(BN=e),e>RN&&(RN=e)}function mz(t,e){var n=kF([t*WD,e*WD]);if(UN){var r=EF(UN,n),i=EF([r[1],-r[0],0],r);AF(i),i=SF(i);var a,o=t-ZN,u=o>0?1:-1,s=i[0]*HD*u,l=VD(o)>180;l^(u*ZN<s&&s<u*t)?(a=i[1]*HD)>RN&&(RN=a):l^(u*ZN<(s=(s+360)%360-180)&&s<u*t)?(a=-i[1]*HD)<BN&&(BN=a):(e<BN&&(BN=e),e>RN&&(RN=e)),l?t<ZN?kz(jN,t)>kz(jN,LN)&&(LN=t):kz(t,LN)>kz(jN,LN)&&(jN=t):LN>=jN?(t<jN&&(jN=t),t>LN&&(LN=t)):t>ZN?kz(jN,t)>kz(jN,LN)&&(LN=t):kz(t,LN)>kz(jN,LN)&&(jN=t)}else WN.push(VN=[jN=t,LN=t]);e<BN&&(BN=e),e>RN&&(RN=e),UN=n,ZN=t}function yz(){gz.point=mz}function xz(){VN[0]=jN,VN[1]=LN,gz.point=vz,UN=null}function bz(t,e){if(UN){var n=t-ZN;HN.add(VD(n)>180?n+(n>0?360:-360):n)}else NN=t,zN=e;YN.point(t,e),mz(t,e)}function wz(){YN.lineStart()}function Sz(){bz(NN,zN),YN.lineEnd(),VD(HN)>LD&&(jN=-(LN=180)),VN[0]=jN,VN[1]=LN,UN=null}function kz(t,e){return(e-=t)<0?e+360:e}function Cz(t,e){return t[0]-e[0]}function Ez(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Mz,Oz={sphere:oT,point:Az,lineStart:Dz,lineEnd:Iz,polygonStart:function(){Oz.lineStart=Pz,Oz.lineEnd=jz},polygonEnd:function(){Oz.lineStart=Dz,Oz.lineEnd=Iz}};function Az(t,e){t*=WD;var n=YD(e*=WD);_z(n*YD(t),n*tT(t),tT(e))}function _z(t,e,n){++QN,ez+=(t-ez)/QN,nz+=(e-nz)/QN,rz+=(n-rz)/QN}function Dz(){Oz.point=Tz}function Tz(t,e){t*=WD;var n=YD(e*=WD);hz=n*YD(t),dz=n*tT(t),pz=tT(e),Oz.point=Fz,_z(hz,dz,pz)}function Fz(t,e){t*=WD;var n=YD(e*=WD),r=n*YD(t),i=n*tT(t),a=tT(e),o=XD(nT((o=dz*a-pz*i)*o+(o=pz*r-hz*a)*o+(o=hz*i-dz*r)*o),hz*r+dz*i+pz*a);tz+=o,iz+=o*(hz+(hz=r)),az+=o*(dz+(dz=i)),oz+=o*(pz+(pz=a)),_z(hz,dz,pz)}function Iz(){Oz.point=Az}function Pz(){Oz.point=Bz}function jz(){Lz(cz,fz),Oz.point=Az}function Bz(t,e){cz=t,fz=e,t*=WD,e*=WD,Oz.point=Lz;var n=YD(e);hz=n*YD(t),dz=n*tT(t),pz=tT(e),_z(hz,dz,pz)}function Lz(t,e){t*=WD;var n=YD(e*=WD),r=n*YD(t),i=n*tT(t),a=tT(e),o=dz*a-pz*i,u=pz*r-hz*a,s=hz*i-dz*r,l=JD(o,u,s),c=aT(l),f=l&&-c/l;uz.add(f*o),sz.add(f*u),lz.add(f*s),tz+=c,iz+=c*(hz+(hz=r)),az+=c*(dz+(dz=i)),oz+=c*(pz+(pz=a)),_z(hz,dz,pz)}function Rz(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zz(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Nz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nz(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Nz(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zz(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Uz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uz(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Uz(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hz(t){return t instanceof bw?t:new bw(t)}var Wz="intersect",Vz="union",Gz="_vgsid_",Xz=ro(Gz),Yz="index:unit";function qz(t,e){for(var n,r,i=e.fields,a=e.values,o=i.length,u=0;u<o;++u)if((r=i[u]).getter=ro.getter||ro(r.field),cu(n=r.getter(t))&&(n=Eo(n)),cu(a[u])&&(a[u]=Eo(a[u])),cu(a[u][0])&&(a[u]=a[u].map(Eo)),"E"===r.type){if(yo(a[u])?a[u].indexOf(n)<0:n!==a[u])return!1}else if("R"===r.type){if(!su(n,a[u]))return!1}else if("R-RE"===r.type){if(!su(n,a[u],!0,!1))return!1}else if("R-E"===r.type){if(!su(n,a[u],!1,!1))return!1}else if("R-LE"===r.type&&!su(n,a[u],!1,!0))return!1;return!0}var $z=function(t){var e=t,n=t,r=t;function i(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==n(e,e))return a;do{var o=i+a>>>1;r(t[o],e)<0?i=o+1:a=o}while(i<a)}return i}return 2!==t.length&&(e=function(e,n){return t(e)-n},n=Rz,r=function(e,n){return Rz(t(e),n)}),{left:i,center:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,o=i(t,n,r,a-1);return o>r&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==n(e,e))return a;do{var o=i+a>>>1;r(t[o],e)<=0?i=o+1:a=o}while(i<a)}return i}}}(Xz),Jz=$z.left,Kz=$z.right;var Qz=(Mz={},(0,Z.Z)(Mz,"".concat(Gz,"_union"),(function(){for(var t=new bw,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o,u=a[i],s=Zz(u);try{for(s.s();!(o=s.n()).done;){var l=o.value;t.add(l)}}catch(c){s.e(c)}finally{s.f()}}return t})),(0,Z.Z)(Mz,"".concat(Gz,"_intersect"),(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t=new bw(t),n=n.map(Hz);var i,a=zz(t);try{t:for(a.s();!(i=a.n()).done;){var o,u=i.value,s=zz(n);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(!l.has(u)){t.delete(u);continue t}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){a.e(c)}finally{a.f()}return t})),(0,Z.Z)(Mz,"E_union",(function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t})),(0,Z.Z)(Mz,"E_intersect",(function(t,e){return t.length?t.filter((function(t){return e.indexOf(t)>=0})):e})),(0,Z.Z)(Mz,"R_union",(function(t,e){var n=Eo(e[0]),r=Eo(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]})),(0,Z.Z)(Mz,"R_intersect",(function(t,e){var n=Eo(e[0]),r=Eo(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]})),Mz);function tU(t,e,n,r){e[0].type!==gZ&&eo("First argument to selection functions must be a string literal.");var i=e[0].value,a="unit",o="@"+a,u=":"+i;(e.length>=2&&Co(e).value)!==Wz||ru(r,o)||(r[o]=n.getData(i).indataRef(n,a)),ru(r,u)||(r[u]=n.getData(i).tuplesRef())}function eU(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return nU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nU(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function nU(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rU(t){var e=this.context.data[t];return e?e.values.value:[]}var iU=function(t){return function(e,n){return this.context.dataflow.locale()[t](n)(e)}},aU=iU("format"),oU=iU("timeFormat"),uU=iU("utcFormat"),sU=iU("timeParse"),lU=iU("utcParse"),cU=new Date(2e3,0,1);function fU(t,e,n){return Number.isInteger(t)&&Number.isInteger(e)?(cU.setYear(2e3),cU.setMonth(t),cU.setDate(e),oU.call(this,cU,n)):""}function hU(t,e,n,r){e[0].type!==gZ&&eo("First argument to data functions must be a string literal.");var i=e[0].value,a=":"+i;if(!ru(a,r))try{r[a]=n.getData(i).tuplesRef()}catch(o){}}function dU(t,e,n,r){if(e[0].type===gZ)pU(n,r,e[0].value);else for(t in n.scales)pU(n,r,t)}function pU(t,e,n){var r="%"+n;if(!ru(e,r))try{e[r]=t.scaleRef(n)}catch(i){}}function gU(t,e){var n;return Vo(t)?t:pu(t)?(n=e.scales[t])&&n.value:void 0}function vU(t,e,n){e.__bandwidth=function(t){return t&&t.bandwidth?t.bandwidth():0},n._bandwidth=dU,n._range=dU,n._scale=dU;var r=function(e){return"_["+(e.type===gZ?Su("%"+e.value):Su("%")+"+"+t(e))+"]"};return{_bandwidth:function(t){return"this.__bandwidth(".concat(r(t[0]),")")},_range:function(t){return"".concat(r(t[0]),".range()")},_scale:function(e){return"".concat(r(e[0]),"(").concat(t(e[1]),")")}}}function mU(t,e){return function(n,r,i){if(n){var a=gU(n,(i||this).context);return a&&a.path[t](r)}return e(r)}}var yU=mU("area",(function(t){return XN=new BD,jD(t,YN),2*XN})),xU=mU("bounds",(function(t){var e,n,r,i,a,o,u;if(RN=LN=-(jN=BN=1/0),WN=[],jD(t,gz),n=WN.length){for(WN.sort(Cz),e=1,a=[r=WN[0]];e<n;++e)Ez(r,(i=WN[e])[0])||Ez(r,i[1])?(kz(r[0],i[1])>kz(r[0],r[1])&&(r[1]=i[1]),kz(i[0],r[1])>kz(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)i=a[e],(u=kz(r[1],i[0]))>o&&(o=u,jN=i[0],LN=r[1])}return WN=VN=null,jN===1/0||BN===1/0?[[NaN,NaN],[NaN,NaN]]:[[jN,BN],[LN,RN]]})),bU=mU("centroid",(function(t){QN=tz=ez=nz=rz=iz=az=oz=0,uz=new BD,sz=new BD,lz=new BD,jD(t,Oz);var e=+uz,n=+sz,r=+lz,i=JD(e,n,r);return i<RD&&(e=iz,n=az,r=oz,tz<LD&&(e=ez,n=nz,r=rz),(i=JD(e,n,r))<RD)?[NaN,NaN]:[XD(n,e)*HD,aT(r/i)*HD]}));function wU(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function SU(t){var e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function kU(t){var e=(0,qw.B8)(t);return.2126*SU(e.r)+.7152*SU(e.g)+.0722*SU(e.b)}function CU(t,e){return t===e||t!=t&&e!=e||(yo(t)?!(!yo(e)||t.length!==e.length)&&function(t,e){for(var n=0,r=t.length;n<r;++n)if(!CU(t[n],e[n]))return!1;return!0}(t,e):!(!xo(t)||!xo(e))&&EU(t,e))}function EU(t,e){for(var n in t)if(!CU(t[n],e[n]))return!1;return!0}function MU(t){return function(e){return EU(t,e)}}var OU={};function AU(t){return yo(t)||ArrayBuffer.isView(t)?t:null}function _U(t){return AU(t)||(pu(t)?t:null)}var DU=function(t){return t.data};function TU(t,e){var n=rU.call(e,t);return n.root&&n.root.lookup||{}}var FU=function(){return"undefined"!=typeof window&&window||null};function IU(t,e,n){if(!t)return[];var r=(0,W.Z)(t,2),i=r[0],a=r[1],o=(new nE).set(i[0],i[1],a[0],a[1]);return TA(n||this.context.dataflow.scenegraph().root,o,function(t){var e=null;if(t){var n=Ho(t.marktype),r=Ho(t.markname);e=function(t){return(!n.length||n.some((function(e){return t.marktype===e})))&&(!r.length||r.some((function(e){return t.name===e})))}}return e}(e))}var PU={random:function(){return ip()},cumulativeNormal:gp,cumulativeLogNormal:wp,cumulativeUniform:Op,densityNormal:pp,densityLogNormal:bp,densityUniform:Mp,quantileNormal:vp,quantileLogNormal:Sp,quantileUniform:Ap,sampleNormal:dp,sampleLogNormal:xp,sampleUniform:Ep,isArray:yo,isBoolean:lu,isDate:cu,isDefined:function(t){return void 0!==t},isNumber:hu,isObject:xo,isRegExp:du,isString:pu,isTuple:Nh,isValid:function(t){return null!=t&&t==t},toBoolean:ku,toDate:function(t){return Eu(t)},toNumber:Eo,toString:Mu,indexof:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=_U(t)).indexOf.apply(e,r)},join:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=AU(t)).join.apply(e,r)},lastindexof:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=_U(t)).lastIndexOf.apply(e,r)},replace:function(t,e,n){return Vo(n)&&eo("Function argument passed to replace."),String(t).replace(e,n)},reverse:function(t){return AU(t).slice().reverse()},slice:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=_U(t)).slice.apply(e,r)},flush:ou,lerp:vu,merge:function(){var t=[].slice.call(arguments);return t.unshift({}),Qo.apply(void 0,(0,X.Z)(t))},pad:bu,peek:Co,pluck:function(t,e){var n=OU[e]||(OU[e]=ro(e));return yo(t)?t.map(n):n(t)},span:wu,inrange:su,truncate:Au,rgb:qw.B8,lab:sS,hcl:gS,hsl:qw.Ym,luminance:kU,contrast:function(t,e){var n=kU(t),r=kU(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:qp,format:aU,utcFormat:uU,utcParse:lU,utcOffset:Kl,utcSequence:ec,timeFormat:oU,timeParse:sU,timeOffset:Jl,timeSequence:tc,timeUnitSpecifier:kl,monthFormat:function(t){return fU.call(this,t,1,"%B")},monthAbbrevFormat:function(t){return fU.call(this,t,1,"%b")},dayFormat:function(t){return fU.call(this,0,2+t,"%A")},dayAbbrevFormat:function(t){return fU.call(this,0,2+t,"%a")},quarter:zo,utcquarter:Uo,week:Ol,utcweek:Il,dayofyear:Ml,utcdayofyear:Fl,warn:function(){return wU(this.context.dataflow,"warn",arguments)},info:function(){return wU(this.context.dataflow,"info",arguments)},debug:function(){return wU(this.context.dataflow,"debug",arguments)},extent:function(t){return tu(t)},inScope:function(t){var e=this.context.group,n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n},intersect:IU,clampRange:Wo,pinchDistance:function(t){var e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(t){var e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)},screen:function(){var t=FU();return t?t.screen:{}},containerSize:function(){var t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]},windowSize:function(){var t=FU();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]},bandspace:function(t,e,n){return ZS(t||0,e||0,n||0)},setdata:function(t,e){var n=this.context.dataflow,r=this.context.data[t].input;return n.pulse(r,n.changeset().remove(so).insert(e)),1},pathShape:function(t){var e=null;return function(n){return n?EC(n,e=e||pC(t)):t}},panLinear:Fo,panLog:Io,panPow:Po,panSymlog:jo,zoomLinear:Lo,zoomLog:Ro,zoomPow:Zo,zoomSymlog:No,encode:function(t,e,n){if(t){var r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e))}return void 0!==n?n:t},modify:function(t,e,n,r,i,a){var o,u,s=this.context.dataflow,l=this.context.data[t],c=l.input,f=s.stamp(),h=l.changes;if(!1===s._trigger||!(c.value.length||e||r))return 0;if((!h||h.stamp<f)&&(l.changes=h=s.changeset(),h.stamp=f,s.runAfter((function(){l.modified=!0,s.pulse(c,h).run()}),!0,1)),n&&(o=!0===n?so:yo(n)||Nh(n)?n:MU(n),h.remove(o)),e&&h.insert(e),r&&(o=MU(r),c.value.some(o)?h.remove(o):h.insert(r)),i)for(u in a)h.modify(i,u,a[u]);return 1},lassoAppend:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,i=t[t.length-1];return void 0===i||Math.sqrt(Math.pow(i[0]-e,2)+Math.pow(i[1]-n,2))>r?(t.push([e,n]),(0,X.Z)(t)):t},lassoPath:function(t){return(null!=t?t:[]).reduce((function(e,n,r){var i=(0,W.Z)(n,2),a=i[0],o=i[1];return e+(0==r?"M ".concat(a,",").concat(o," "):r===t.length-1?" Z":"L ".concat(a,",").concat(o," "))}),"")},intersectLasso:function(t,e,n){var r,i=n.x,a=n.y,o=n.mark,u=(new nE).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER),s=eU(e);try{for(s.s();!(r=s.n()).done;){var l=(0,W.Z)(r.value,2),c=l[0],f=l[1];c<u.x1&&(u.x1=c),c>u.x2&&(u.x2=c),f<u.y1&&(u.y1=f),f>u.y2&&(u.y2=f)}}catch(h){s.e(h)}finally{s.f()}return u.translate(i,a),IU([[u.x1,u.y1],[u.x2,u.y2]],t,o).filter((function(t){return function(t,e,n){for(var r=0,i=0,a=n.length-1;i<n.length;a=i++){var o=(0,W.Z)(n[a],2),u=o[0],s=o[1],l=(0,W.Z)(n[i],2),c=l[0],f=l[1];f>e!=s>e&&t<(u-c)*(e-f)/(s-f)+c&&r++}return 1&r}(t.x,t.y,e)}))}},jU=["view","item","group","xy","x","y"],BU="this.",LU={},RU={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:function(t){return"_[".concat(Su("$"+t),"]")},functions:function(t){var e=AN(t);for(var n in jU.forEach((function(t){return e[t]="event.vega."+t})),PU)e[n]=BU+n;return Qo(e,vU(t,PU,LU)),e},constants:ON,visitors:LU},ZU=_N(RU);function NU(t,e,n){return 1===arguments.length?PU[t]:(PU[t]=e,n&&(LU[t]=n),ZU&&(ZU.functions[t]=BU+t),this)}function zU(t,e){var n,r={};try{n=MN(t=pu(t)?t:Su(t)+"")}catch(a){eo("Expression parse error: "+t)}n.visit((function(t){if(t.type===xZ){var n=t.callee.name,i=RU.visitors[n];i&&i(n,t.arguments,e,r)}}));var i=ZU(n);return i.globals.forEach((function(t){var n="$"+t;!ru(r,n)&&e.getSignal(t)&&(r[n]=e.signalRef(t))})),{$expr:Qo({code:i.code},e.options.ast?{ast:n}:null),$fields:i.fields,$params:r}}NU("bandwidth",(function(t,e){var n=gU(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}),dU),NU("copy",(function(t,e){var n=gU(t,(e||this).context);return n?n.copy():void 0}),dU),NU("domain",(function(t,e){var n=gU(t,(e||this).context);return n?n.domain():[]}),dU),NU("range",(function(t,e){var n=gU(t,(e||this).context);return n&&n.range?n.range():[]}),dU),NU("invert",(function(t,e,n){var r=gU(t,(n||this).context);return r?yo(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}),dU),NU("scale",(function(t,e,n){var r=gU(t,(n||this).context);return r?r(e):void 0}),dU),NU("gradient",(function(t,e,n,r,i){t=gU(t,(i||this).context);var a=oC(e,n),o=t.domain(),u=o[0],s=Co(o),l=ao;return s-u?l=Ok(t,u,s):t=(t.interpolator?pk("sequential")().interpolator(t.interpolator()):pk("linear")().interpolate(t.interpolate()).range(t.range())).domain([u=0,s=1]),t.ticks&&(u!==(o=t.ticks(+r||15))[0]&&o.unshift(u),s!==Co(o)&&o.push(s)),o.forEach((function(e){return a.stop(l(e),t(e))})),a}),dU),NU("geoArea",yU,dU),NU("geoBounds",xU,dU),NU("geoCentroid",bU,dU),NU("geoShape",(function(t,e,n){var r=gU(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}}),dU),NU("indata",(function(t,e,n){var r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(t,e,n,r){e[0].type!==gZ&&eo("First argument to indata must be a string literal."),e[1].type!==gZ&&eo("Second argument to indata must be a string literal.");var i=e[0].value,a=e[1].value,o="@"+a;ru(o,r)||(r[o]=n.getData(i).indataRef(n,a))})),NU("data",rU,hU),NU("treePath",(function(t,e,n){var r=TU(t,this),i=r[e],a=r[n];return i&&a?i.path(a).map(DU):void 0}),hU),NU("treeAncestors",(function(t,e){var n=TU(t,this)[e];return n?n.ancestors().map(DU):void 0}),hU),NU("vlSelectionTest",(function(t,e,n){for(var r,i,a,o,u,s=this.context.data[t],l=s?s.values.value:[],c=s?s[Yz]&&s[Yz].value:void 0,f=n===Wz,h=l.length,d=0;d<h;++d)if(r=l[d],c&&f){if(-1===(a=(i=i||{})[o=r.unit]||0))continue;if(u=qz(e,r),i[o]=u?-1:++a,u&&1===c.size)return!0;if(!u&&a===c.get(o).count)return!1}else if(f^(u=qz(e,r)))return u;return h&&f}),tU),NU("vlSelectionIdTest",(function(t,e,n){var r=this.context.data[t],i=r?r.values.value:[],a=r?r[Yz]&&r[Yz].value:void 0,o=n===Wz,u=Xz(e),s=Jz(i,u);if(s===i.length)return!1;if(Xz(i[s])!==u)return!1;if(a&&o){if(1===a.size)return!0;if(Kz(i,u)-s<a.size)return!1}return!0}),tU),NU("vlSelectionResolve",(function(t,e,n,r){for(var i,a,o,u,s,l,c,f,h,d,p,g,v=this.context.data[t],m=v?v.values.value:[],y={},x={},b={},w=m.length,S=0;S<w;++S)if(u=(i=m[S]).unit,a=i.fields,o=i.values,a&&o){for(p=0,g=a.length;p<g;++p)s=a[p],f=(c=y[s.field]||(y[s.field]={}))[u]||(c[u]=[]),b[s.field]=h=s.type.charAt(0),d=Qz["".concat(h,"_union")],c[u]=d(f,Ho(o[p]));n&&(f=x[u]||(x[u]=[])).push(Ho(o).reduce((function(t,e,n){return t[a[n].field]=e,t}),{}))}else s=Gz,l=Xz(i),(f=(c=y[s]||(y[s]={}))[u]||(c[u]=[])).push(l),n&&(f=x[u]||(x[u]=[])).push((0,Z.Z)({},Gz,l));return e=e||Vz,y[Gz]?y[Gz]=Qz["".concat(Gz,"_").concat(e)].apply(Qz,(0,X.Z)(Object.values(y[Gz]))):Object.keys(y).forEach((function(t){y[t]=Object.keys(y[t]).map((function(e){return y[t][e]})).reduce((function(n,r){return void 0===n?r:Qz["".concat(b[t],"_").concat(e)](n,r)}))})),m=Object.keys(x),n&&m.length&&(y[r?"vlPoint":"vlMulti"]=e===Vz?(0,Z.Z)({},"or",m.reduce((function(t,e){return t.push.apply(t,(0,X.Z)(x[e])),t}),[])):(0,Z.Z)({},"and",m.map((function(t){return(0,Z.Z)({},"or",x[t])})))),y}),tU),NU("vlSelectionTuples",(function(t,e){return t.map((function(t){return Qo(e.fields?{values:e.fields.map((function(e){return(e.getter||(e.getter=ro(e.field)))(t.datum)}))}:(0,Z.Z)({},Gz,Xz(t.datum)),e)}))}));var UU=Ou(["rule"]),HU=Ou(["group","image","rect"]);function WU(t){return(t+"").toLowerCase()}function VU(t,e,n){";"!==n[n.length-1]&&(n="return("+n+");");var r=Function.apply(void 0,(0,X.Z)(e.concat(n)));return t&&t.functions?r.bind(t.functions):r}var GU={operator:function(t,e){return VU(t,["_"],e.code)},parameter:function(t,e){return VU(t,["datum","_"],e.code)},event:function(t,e){return VU(t,["event"],e.code)},handler:function(t,e){return VU(t,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(e.code,";"))},encode:function(t,e){var n=e.marktype,r=e.channels,i="var o=item,datum=o.datum,m=0,$;";for(var a in r){var o="o["+Su(a)+"]";i+="$=".concat(r[a].code,";if(").concat(o,"!==$)").concat(o,"=$,m=1;")}return i+=function(t,e){var n="";return UU[e]||(t.x2&&(t.x?(HU[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(HU[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),VU(t,["item","_"],i+="return m;")},codegen:{get:function(t){var e="[".concat(t.map(Su).join("]["),"]"),n=Function("_","return _".concat(e,";"));return n.path=e,n},comparator:function(t,e){var n,r=Function("a","b","var u, v; return "+t.map((function(t,r){var i,a,o=e[r];return t.path?(i="a".concat(t.path),a="b".concat(t.path)):((n=n||{})["f"+r]=t,i="this.f".concat(r,"(a)"),a="this.f".concat(r,"(b)")),function(t,e,n,r){return"((u = ".concat(t,") < (v = ").concat(e,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(i,a,-o,o)})).join("")+"0;");return n?r.bind(n):r}}};function XU(t,e,n){if(!t||!xo(t))return t;for(var r,i=0,a=YU.length;i<a;++i)if(ru(t,(r=YU[i]).key))return r.parse(t,e,n);return t}var YU=[{key:"$ref",parse:function(t,e){return e.get(t.$ref)||eo("Operator not defined: "+t.$ref)}},{key:"$key",parse:function(t,e){var n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=gu(t.$key,t.$flat,e.expr.codegen))}},{key:"$expr",parse:function(t,e,n){t.$params&&e.parseParameters(t.$params,n);var r="e:"+t.$expr.code+"_"+t.$name;return e.fn[r]||(e.fn[r]=qa(e.parameterExpression(t.$expr),t.$fields,t.$name))}},{key:"$field",parse:function(t,e){if(!t.$field)return null;var n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=ro(t.$field,t.$name,e.expr.codegen))}},{key:"$encode",parse:function(t,e){var n=t.$encode,r={};for(var i in n){var a=n[i];r[i]=qa(e.encodeExpression(a.$expr),a.$fields),r[i].output=a.$output}return r}},{key:"$compare",parse:function(t,e){var n="c:"+t.$compare+"_"+t.$order,r=Ho(t.$compare).map((function(t){return t&&t.$tupleid?zh:t}));return e.fn[n]||(e.fn[n]=Go(r,t.$order,e.expr.codegen))}},{key:"$context",parse:function(t,e){return e}},{key:"$subflow",parse:function(t,e){var n=t.$subflow;return function(t,r,i){var a=e.fork().parse(n),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o.detachSubflow=function(){return e.detach(a)},o}}},{key:"$tupleid",parse:function(){return zh}}];var qU={skip:!0};function $U(t,e,n,r){return new JU(t,e,n,r)}function JU(t,e,n,r){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=r||GU,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function KU(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}function QU(t,e){t&&(null==e?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}JU.prototype=KU.prototype={fork:function(){var t=new KU(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach:function(t){this.subcontext=this.subcontext.filter((function(e){return e!==t}));for(var e=Object.keys(t.nodes),n=0,r=e;n<r.length;n++){var i=r[n];t.nodes[i]._targets=null}for(var a=0,o=e;a<o.length;a++){var u=o[a];t.nodes[u].detach()}t.nodes=null},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var n=this,r=n.dataflow,i=t.value;if(n.set(t.id,e),function(t){return"collect"===WU(t)}(t.type)&&i&&(i.$ingest?r.ingest(e,i.$ingest,i.$format):i.$request?r.preload(e,i.$request,i.$format):r.pulse(e,r.changeset().insert(i))),t.root&&(n.root=e),t.parent){var a=n.get(t.parent.$ref);a?(r.connect(a,[e]),e.targets().add(a)):(n.unresolved=n.unresolved||[]).push((function(){a=n.get(t.parent.$ref),r.connect(a,[e]),e.targets().add(a)}))}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data){var o=function(){var r=n.data[u]||(n.data[u]={});t.data[u].forEach((function(t){return r[t]=e}))};for(var u in t.data)o()}},resolve:function(){return(this.unresolved||[]).forEach((function(t){return t()})),delete this.unresolved,this},operator:function(t,e){this.add(t,this.dataflow.add(t.value,e))},transform:function(t,e){this.add(t,this.dataflow.add(this.transforms[WU(e)]))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},operatorExpression:function(t){return this.expr.operator(this,t)},parameterExpression:function(t){return this.expr.parameter(this,t)},eventExpression:function(t){return this.expr.event(this,t)},handlerExpression:function(t){return this.expr.handler(this,t)},encodeExpression:function(t){return this.expr.encode(this,t)},parse:function(t){var e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach((function(t){return e.parseOperator(t)})),n.forEach((function(t){return e.parseOperatorParameters(t)})),(t.streams||[]).forEach((function(t){return e.parseStream(t)})),(t.updates||[]).forEach((function(t){return e.parseUpdate(t)})),e.resolve()},parseOperator:function(t){var e=this;!function(t){return"operator"===WU(t)}(t.type)&&t.type?e.transform(t,t.type):e.operator(t,t.update?e.operatorExpression(t.update):null)},parseOperatorParameters:function(t){var e=this;if(t.params){var n=e.get(t.id);n||eo("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}},parseParameters:function(t,e){e=e||{};var n=this;for(var r in t){var i=t[r];e[r]=yo(i)?i.map((function(t){return XU(t,n,e)})):XU(i,n,e)}return e},parseStream:function(t){var e,n=this,r=null!=t.filter?n.eventExpression(t.filter):void 0,i=null!=t.stream?n.get(t.stream):void 0;t.source?i=n.events(t.source,t.type,r):t.merge&&(i=(e=t.merge.map((function(t){return n.get(t)})))[0].merge.apply(e[0],e.slice(1))),t.between&&(e=t.between.map((function(t){return n.get(t)})),i=i.between(e[0],e[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&eo("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),n.stream(t,i)},parseUpdate:function(t){var e,n=this,r=xo(r=t.source)?r.$ref:r,i=n.get(r),a=t.update,o=void 0;i||eo("Source not defined: "+t.source),e=t.target&&t.target.$expr?n.eventExpression(t.target.$expr):n.get(t.target),a&&a.$expr&&(a.$params&&(o=n.parseParameters(a.$params)),a=n.handlerExpression(a.$expr)),n.update(t,i,e,a,o)},getState:function(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach((function(n){var i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)}))}if(t.data){var i=n.data={};Object.keys(e.data).forEach((function(n){var r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)}))}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map((function(e){return e.getState(t)}))),n},setState:function(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach((function(t){n.update(e.signals[t],i[t],qU)})),Object.keys(r||{}).forEach((function(t){n.pulse(e.data[t].input,n.changeset().remove(so).insert(r[t]))})),(t.subcontext||[]).forEach((function(t,n){var r=e.subcontext[n];r&&r.setState(t)}))}};var tH="default";function eH(t,e){var n=t.globalCursor()?"undefined"!=typeof document&&document.body:t.container();if(n)return null==e?n.style.removeProperty("cursor"):n.style.cursor=e}function nH(t,e){var n=t._runtime.data;return ru(n,e)||eo("Unrecognized data set: "+e),n[e]}function rH(t,e){Yh(e)||eo("Second argument to changes must be a changeset.");var n=nH(this,t);return n.modified=!0,this.pulse(n.input,e)}function iH(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function aH(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function oH(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function uH(t){var e=oH(t),n=iH(t),r=aH(t);t._renderer.background(t.background()),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach((function(e){try{e(n,r)}catch(i){t.error(i)}}))}function sH(t,e,n){var r,i,a=t._renderer,o=a&&a.canvas();return o&&(i=oH(t),(r=pO(e.changedTouches?e.changedTouches[0]:e,o))[0]-=i[0],r[1]-=i[1]),e.dataflow=t,e.item=n,e.vega=function(t,e,n){var r=e?"group"===e.mark.marktype?e:e.mark.group:null;function i(t){var n,i=r;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function a(t){if(!t)return n;pu(t)&&(t=i(t));for(var e=n.slice();t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:Jo(t),item:Jo(e||{}),group:i,xy:a,x:function(t){return a(t)[0]},y:function(t){return a(t)[1]}}}(t,n,r),e}var lH="view",cH={trap:!1};function fH(t,e,n,r){t._eventListeners.push({type:n,sources:Ho(e),handler:r})}function hH(t,e,n){var r=t._eventConfig&&t._eventConfig[e];return!(!1===r||xo(r)&&!r[n])||(t.warn("Blocked ".concat(e," ").concat(n," event listener.")),!1)}function dH(t){return t.item}function pH(t){return t.item.mark.source}function gH(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function vH(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r}function mH(t,e,n,r){var i=n.event||"input",a=function(){return t.update(e.value)};r.signal(n.signal,e.value),e.addEventListener(i,a),fH(r,e,i,a),t.set=function(t){e.value=t,e.dispatchEvent(function(t){return"undefined"!=typeof Event?new Event(t):{type:t}}(i))}}function yH(t,e,n,r){var i=r.signal(n.signal),a=vH("div",{class:"vega-bind"}),o="radio"===n.input?a:a.appendChild(vH("label"));o.appendChild(vH("span",{class:"vega-bind-name"},n.name||n.signal)),e.appendChild(a);var u=xH;switch(n.input){case"checkbox":u=bH;break;case"select":u=wH;break;case"radio":u=SH;break;case"range":u=kH}u(t,o,n,i)}function xH(t,e,n,r){var i=vH("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",(function(){return t.update(i.value)})),t.elements=[i],t.set=function(t){return i.value=t}}function bH(t,e,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=vH("input",i);e.appendChild(a),a.addEventListener("change",(function(){return t.update(a.checked)})),t.elements=[a],t.set=function(t){return a.checked=!!t||null}}function wH(t,e,n,r){var i=vH("select",{name:n.signal}),a=n.labels||[];n.options.forEach((function(t,e){var n={value:t};CH(t,r)&&(n.selected=!0),i.appendChild(vH("option",n,(a[e]||t)+""))})),e.appendChild(i),i.addEventListener("change",(function(){t.update(n.options[i.selectedIndex])})),t.elements=[i],t.set=function(t){for(var e=0,r=n.options.length;e<r;++e)if(CH(n.options[e],t))return void(i.selectedIndex=e)}}function SH(t,e,n,r){var i=vH("span",{class:"vega-bind-radio"}),a=n.labels||[];e.appendChild(i),t.elements=n.options.map((function(e,o){var u={type:"radio",name:n.signal,value:e};CH(e,r)&&(u.checked=!0);var s=vH("input",u);s.addEventListener("change",(function(){return t.update(e)}));var l=vH("label",{},(a[o]||e)+"");return l.prepend(s),i.appendChild(l),s})),t.set=function(e){for(var n=t.elements,r=n.length,i=0;i<r;++i)CH(n[i].value,e)&&(n[i].checked=!0)}}function kH(t,e,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var i=null!=n.max?n.max:Math.max(100,+r)||100,a=n.min||Math.min(0,i,+r)||0,o=n.step||$u(a,i,100),u=vH("input",{type:"range",name:n.signal,min:a,max:i,step:o});u.value=r;var s=vH("span",{},+r);e.appendChild(u),e.appendChild(s);var l=function(){s.textContent=u.value,t.update(+u.value)};u.addEventListener("input",l),u.addEventListener("change",l),t.elements=[u],t.set=function(t){u.value=t,s.textContent=t}}function CH(t,e){return t===e||t+""==e+""}function EH(t,e,n,r,i,a){return(e=e||new r(t.loader())).initialize(n,iH(t),aH(t),oH(t),i,a).background(t.background())}function MH(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function OH(t,e,n){if("string"==typeof e){if("undefined"==typeof document)return t.error("DOM document instance not found."),null;if(!(e=document.querySelector(e)))return t.error("Signal bind element not found: "+e),null}if(e&&n)try{e.textContent=""}catch(r){e=null,t.error(r)}return e}var AH=function(t){return+t||0};function _H(t){return xo(t)?{top:AH(t.top),bottom:AH(t.bottom),left:AH(t.left),right:AH(t.right)}:function(t){return{top:t,bottom:t,left:t,right:t}}(AH(t))}function DH(t,e,n,r){return TH.apply(this,arguments)}function TH(){return TH=(0,rt.Z)(G().mark((function t(e,n,r,i){var a,o;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=DA(n),(o=a&&a.headless)||eo("Unrecognized renderer type: "+n),t.next=4,e.runAsync();case 4:return t.abrupt("return",EH(e,null,null,o,r,i).renderAsync(e._scenegraph.root));case 5:case"end":return t.stop()}}),t)}))),TH.apply(this,arguments)}function FH(){return FH=(0,rt.Z)(G().mark((function t(e,n){var r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e!==AA.Canvas&&e!==AA.SVG&&e!==AA.PNG&&eo("Unrecognized image type: "+e),t.next=3,DH(this,e,n);case 3:return r=t.sent,t.abrupt("return",e===AA.SVG?IH(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png"));case 5:case"end":return t.stop()}}),t,this)}))),FH.apply(this,arguments)}function IH(t,e){var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}function PH(){return(PH=(0,rt.Z)(G().mark((function t(e,n){var r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,DH(this,AA.Canvas,e,n);case 2:return r=t.sent,t.abrupt("return",r.canvas());case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function jH(){return(jH=(0,rt.Z)(G().mark((function t(e){var n;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,DH(this,AA.SVG,e);case 2:return n=t.sent,t.abrupt("return",n.svg());case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var BH="width",LH="height",RH="padding",ZH={skip:!0};function NH(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===RH?r.left+r.right:0)}function zH(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===RH?r.top+r.bottom:0)}function UH(t,e){return e.modified&&yo(e.input.value)&&t.indexOf("_:vega:_")}function HH(t,e){return!("parent"===t||e instanceof Md.proxy)}function WH(t,e,n,r){var i=t.element();i&&i.setAttribute("title",function(t){return null==t?"":yo(t)?VH(t):xo(t)&&!cu(t)?(e=t,Object.keys(e).map((function(t){var n=e[t];return t+": "+(yo(n)?VH(n):GH(n))})).join("\n")):t+"";var e}(r))}function VH(t){return"["+t.map(GH).join(", ")+"]"}function GH(t){return yo(t)?"[…]":xo(t)&&!cu(t)?"{…}":t}function XH(t,e){var n=this;if(e=e||{},kd.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),null!=e.logLevel&&n.logLevel(e.logLevel),e.locale||t.locale){var r=Qo({},t.locale,e.locale);n.locale(rh(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||AA.Canvas,n._scenegraph=new uO;var i=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||WH,n._redraw=!0,n._handler=(new IO).scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(t){var e=Qo({defaults:{}},t),n=function(t,e){e.forEach((function(e){yo(t[e])&&(t[e]=Ou(t[e]))}))};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);var a=function(t,e,n){return $U(t,Md,PU,n).parse(e)}(n,t,e.expr);n._runtime=a,n._signals=a.signals,n._bind=(t.bindings||[]).map((function(t){return{state:null,param:Qo({},t)}})),a.root&&a.root.set(i),i.source=a.data.root.input,n.pulse(a.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=NH(n,n._width),n._viewHeight=zH(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(t){var e=t._signals,n=e[BH],r=e[LH],i=e[RH];function a(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,(function(e){t._width=e.size,t._viewWidth=NH(t,e.size),a()}),{size:n}),t._resizeHeight=t.add(null,(function(e){t._height=e.size,t._viewHeight=zH(t,e.size),a()}),{size:r});var o=t.add(null,a,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}(n),function(t){t.add(null,(function(e){return t._background=e.bg,t._resize=1,e.bg}),{bg:t._signals.background})}(n),function(t){var e=t._signals.cursor||(t._signals.cursor=t.add({user:tH,item:null}));t.on(t.events("view","mousemove"),e,(function(t,n){var r=e.value,i=r?pu(r)?r:r.user:tH,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}})),t.add(null,(function(e){var n=e.cursor,r=this.value;return pu(n)||(r=n.item,n=n.user),eH(t,n&&n!==tH?n:r||n),r}),{cursor:e})}(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind)}function YH(t,e){return ru(t._signals,e)?t._signals[e]:eo("Unrecognized signal name: "+Su(e))}function qH(t,e){var n=(t._targets||[]).filter((function(t){return t._update&&t._update.handler===e}));return n.length?n[0]:null}function $H(t,e,n,r){var i=qH(n,r);return i||((i=MH(t,(function(){return r(e,n.value)}))).handler=r,t.on(n,null,i)),t}function JH(t,e,n){var r=qH(e,n);return r&&e._targets.remove(r),t}uu(XH,kd,{evaluate:function(t,e,n){var r=this;return(0,rt.Z)(G().mark((function i(){return G().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,kd.prototype.evaluate.call(r,t,e);case 2:if(!r._redraw&&!r._resize){i.next=14;break}if(i.prev=3,!r._renderer){i.next=8;break}return r._resize&&(r._resize=0,uH(r)),i.next=8,r._renderer.renderAsync(r._scenegraph.root);case 8:r._redraw=!1,i.next=14;break;case 11:i.prev=11,i.t0=i.catch(3),r.error(i.t0);case 14:return n&&Bh(r,n),i.abrupt("return",r);case 16:case"end":return i.stop()}}),i,null,[[3,11]])})))()},dirty:function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description:function(t){if(arguments.length){var e=null!=t?t+"":null;return e!==this._desc&&QU(this._el,this._desc=e),this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},signal:function(t,e,n){var r=YH(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},width:function(t){return arguments.length?this.signal("width",t):this.signal("width")},height:function(t){return arguments.length?this.signal("height",t):this.signal("height")},padding:function(t){return arguments.length?this.signal("padding",_H(t)):_H(this.signal("padding"))},autosize:function(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background:function(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer:function(t){return arguments.length?(DA(t)||eo("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip:function(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader:function(t){return arguments.length?(t!==this._loader&&(kd.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize:function(){return this._autosize=1,this.touch(YH(this,"autosize"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(t,e,n,r,i,a){this.runAfter((function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(BH,n,ZH),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(LH,r,ZH),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter((function(t){return t.resize()}))}),!1,1)},addEventListener:function(t,e,n){var r=e;return n&&!1===n.trap||((r=MH(this,e)).raw=e),this._handler.on(t,r),this},removeEventListener:function(t,e){for(var n,r,i=this._handler.handlers(t),a=i.length;--a>=0;)if(r=i[a].type,n=i[a].handler,t===r&&(e===n||e===n.raw)){this._handler.off(r,n);break}return this},addResizeListener:function(t){var e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener:function(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener:function(t,e){return $H(this,t,YH(this,t),e)},removeSignalListener:function(t,e){return JH(this,YH(this,t),e)},addDataListener:function(t,e){return $H(this,t,nH(this,t).values,e)},removeDataListener:function(t,e){return JH(this,nH(this,t).values,e)},globalCursor:function(t){if(arguments.length){if(this._globalCursor!==!!t){var e=eH(this,null);this._globalCursor=!!t,e&&eH(this,e)}return this}return this._globalCursor},preventDefault:function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:function(t,e){this._timers.push(function(t,e,n){var r=new uj,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?aj():+n,r._restart((function a(o){o+=i,r._restart(a,i+=e,n),t(o)}),e,n)},r.restart(t,e,n),r)}((function(e){t({timestamp:Date.now(),elapsed:e})}),e))},events:function(t,e,n){var r,i=this,a=new rd(n),o=function(n,r){i.runAsync(null,(function(){t===lH&&function(t,e){var n=t._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[e]:i?!i[e]:t.preventDefault()))}(i,e)&&n.preventDefault(),a.receive(sH(i,n,r))}))};if("timer"===t)hH(i,"timer",e)&&i.timer(o,e);else if(t===lH)hH(i,"view",e)&&i.addEventListener(e,o,cH);else if("window"===t?hH(i,"window",e)&&"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&hH(i,"selector",e)&&(r=document.querySelectorAll(t)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(e,o);fH(i,r,e,o)}else i.warn("Can not resolve event source: "+t);return a},finalize:function(){var t,e,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(t=i.length;--t>=0;)i[t].stop();for(t=a.length;--t>=0;)for(e=(n=a[t]).sources.length;--e>=0;)n.sources[e].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(t,e){return e=[e||"update",(t=[t||"hover"])[0]],this.on(this.events("view","mouseover",dH),pH,gH(t)),this.on(this.events("view","mouseout",dH),pH,gH(e)),this},data:function(t,e){return arguments.length<2?nH(this,t).values.value:rH.call(this,t,qh().remove(so).insert(e))},change:rH,insert:function(t,e){return rH.call(this,t,qh().insert(e))},remove:function(t,e){return rH.call(this,t,qh().remove(e))},scale:function(t){var e=this._runtime.scales;return ru(e,t)||eo("Unrecognized scale or projection: "+t),e[t].value},initialize:function(t,e){var n=this,r=n._renderType,i=n._eventConfig.bind,a=DA(r);t=n._el=t?OH(n,t,!0):null,function(t){var e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),QU(e,t.description()))}(n),a||n.error("Unrecognized renderer type: "+r);var o=a.handler||IO,u=t?a.renderer:a.headless;return n._renderer=u?EH(n,n._renderer,t,u):null,n._handler=function(t,e,n,r){var i=new r(t.loader(),MH(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,oH(t),t);return e&&e.handlers().forEach((function(t){i.on(t.type,t.handler)})),i}(n,n._handler,t,o),n._redraw=!0,t&&"none"!==i&&(e=e?n._elBind=OH(n,e,!0):t.appendChild(vH("form",{class:"vega-bindings"})),n._bind.forEach((function(t){t.param.element&&"container"!==i&&(t.element=OH(n,t.param.element,!!t.param.input))})),n._bind.forEach((function(t){!function(t,e,n){if(e){var r=n.param,i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:function(e){e!=t.signal(r.signal)&&t.runAsync(null,(function(){i.source=!0,t.signal(r.signal,e)}))}},r.debounce&&(i.update=Ko(r.debounce,i.update))),(null==r.input&&r.element?mH:yH)(i,e,r,t),i.active||(t.on(t._signals[r.signal],null,(function(){i.source?i.source=!1:i.set(t.signal(r.signal))})),i.active=!0)}}(n,t.element||e,t)}))),n},toImageURL:function(t,e){return FH.apply(this,arguments)},toCanvas:function(t,e){return PH.apply(this,arguments)},toSVG:function(t){return jH.apply(this,arguments)},getState:function(t){return this._runtime.getState(t||{data:UH,signals:HH,recurse:!0})},setState:function(t){return this.runAsync(null,(function(e){e._trigger=!1,e._runtime.setState(t)}),(function(t){t._trigger=!0})),this}});var KH,QH,tW="[",eW="]",nW=/[[\]{}]/,rW={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function iW(t,e,n){return KH=e||"view",QH=n||rW,oW(t.trim()).map(uW)}function aW(t,e,n,r,i){for(var a,o=t.length,u=0;e<o;++e){if(a=t[e],!u&&a===n)return e;i&&i.indexOf(a)>=0?--u:r&&r.indexOf(a)>=0&&++u}return e}function oW(t){for(var e=[],n=t.length,r=0,i=0;i<n;)i=aW(t,i,",","[{","]}"),e.push(t.substring(r,i).trim()),r=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function uW(t){return"["===t[0]?function(t){var e,n=t.length,r=1;if(r=aW(t,r,eW,tW,eW),r===n)throw"Empty between selector: "+t;if(e=oW(t.substring(1,r)),2!==e.length)throw"Between selector must have two elements: "+t;if(t=t.slice(r+1).trim(),">"!==t[0])throw"Expected '>' after between selector: "+t;e=e.map(uW);var i=uW(t.slice(1).trim());if(i.between)return{between:e,stream:i};i.between=e;return i}(t):function(t){var e,n,r={source:KH},i=[],a=[0,0],o=0,u=0,s=t.length,l=0;if("}"===t[s-1]){if(!((l=t.lastIndexOf("{"))>=0))throw"Unmatched right brace: "+t;try{a=function(t){var e=t.split(",");if(!t.length||e.length>2)throw t;return e.map((function(e){var n=+e;if(n!=n)throw t;return n}))}(t.substring(l+1,s-1))}catch(c){throw"Invalid throttle specification: "+t}s=(t=t.slice(0,l).trim()).length,l=0}if(!s)throw t;"@"===t[0]&&(o=++l);e=aW(t,l,":"),e<s&&(i.push(t.substring(u,e).trim()),u=l=++e);if(l=aW(t,l,tW),l===s)i.push(t.substring(u,s).trim());else if(i.push(t.substring(u,l).trim()),n=[],(u=++l)===s)throw"Unmatched left bracket: "+t;for(;l<s;){if((l=aW(t,l,eW))===s)throw"Unmatched left bracket: "+t;if(n.push(t.substring(u,l).trim()),l<s-1&&t[++l]!==tW)throw"Expected left bracket: "+t;u=++l}if(!(s=i.length)||nW.test(i[s-1]))throw"Invalid event selector: "+t;s>1?(r.type=i[1],o?r.markname=i[0].slice(1):!function(t){return QH[t]}(i[0])?r.source=i[0]:r.marktype=i[0]):r.type=i[0];"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1));null!=n&&(r.filter=n);a[0]&&(r.throttle=a[0]);a[1]&&(r.debounce=a[1]);return r}(t)}function sW(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return lW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lW(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function lW(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cW(t){return xo(t)?t:{type:t||"pad"}}var fW=function(t){return+t||0};function hW(t){return xo(t)?t.signal?t:{top:fW(t.top),bottom:fW(t.bottom),left:fW(t.left),right:fW(t.right)}:{top:e=fW(t),bottom:e,left:e,right:e};var e}var dW=function(t){return xo(t)&&!yo(t)?Qo({},t):{value:t}};function pW(t,e,n,r){return null!=n?(xo(n)&&!yo(n)||yo(n)&&n.length&&xo(n[0])?t.update[e]=n:t[r||"enter"][e]={value:n},1):0}function gW(t,e,n){for(var r in e)pW(t,r,e[r]);for(var i in n)pW(t,i,n[i],"update")}function vW(t,e,n){for(var r in e)n&&ru(n,r)||(t[r]=Qo(t[r]||{},e[r]));return t}function mW(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}var yW="mark",xW="frame",bW="scope",wW="legend-label",SW="title-text",kW="title-subtitle";function CW(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}var EW=function(t){return pu(t)?Su(t):t.signal?"(".concat(t.signal,")"):_W(t)};function MW(t){if(null!=t.gradient)return function(t){var e=[t.start,t.stop,t.count].map((function(t){return null==t?null:Su(t)}));for(;e.length&&null==Co(e);)e.pop();return e.unshift(EW(t.gradient)),"gradient(".concat(e.join(","),")")}(t);var e=t.signal?"(".concat(t.signal,")"):t.color?function(t){return t.c?OW("hcl",t.h,t.c,t.l):t.h||t.s?OW("hsl",t.h,t.s,t.l):t.l||t.a?OW("lab",t.l,t.a,t.b):t.r||t.g||t.b?OW("rgb",t.r,t.g,t.b):null}(t.color):null!=t.field?_W(t.field):void 0!==t.value?Su(t.value):void 0;return null!=t.scale&&(e=function(t,e){var n=EW(t.scale);null!=t.range?e="lerp(_range(".concat(n,"), ").concat(+t.range,")"):(void 0!==e&&(e="_scale(".concat(n,", ").concat(e,")")),t.band&&(e=(e?e+"+":"")+"_bandwidth(".concat(n,")")+(1==+t.band?"":"*"+AW(t.band)),t.extra&&(e="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(e,")"))),null==e&&(e="0"));return e}(t,e)),void 0===e&&(e=null),null!=t.exponent&&(e="pow(".concat(e,",").concat(AW(t.exponent),")")),null!=t.mult&&(e+="*".concat(AW(t.mult))),null!=t.offset&&(e+="+".concat(AW(t.offset))),t.round&&(e="round(".concat(e,")")),e}var OW=function(t,e,n,r){return"(".concat(t,"(").concat([e,n,r].map(MW).join(","),")+'')")};function AW(t){return xo(t)?"("+MW(t)+")":t}function _W(t){return DW(xo(t)?t:{datum:t})}function DW(t){var e,n,r;if(t.signal)e="datum",r=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(r=t.parent,e+=".datum"):r=t.group}else t.datum?(e="datum",r=t.datum):eo("Invalid field reference: "+Su(t));return t.signal||(r=pu(r)?no(r).map(Su).join("]["):DW(r)),e+"["+r+"]"}function TW(t,e,n,r,i,a){var o={};for(var u in(a=a||{}).encoders={$encode:o},t=function(t,e,n,r,i){var a,o,u,s={},l={};for(o in o="lineBreak","text"!==e||null==i[o]||mW(o,t)||CW(s,o,i[o]),("legend"==n||String(n).startsWith("axis"))&&(n=null),u=n===xW?i.group:n===yW?Qo({},i.mark,i[e]):null)mW(o,t)||("fill"===o||"stroke"===o)&&(mW("fill",t)||mW("stroke",t))||CW(s,o,u[o]);for(o in Ho(r).forEach((function(e){var n=i.style&&i.style[e];for(var r in n)mW(r,t)||CW(s,r,n[r])})),t=Qo({},t),s)(u=s[o]).signal?(a=a||{})[o]=u:l[o]=u;return t.enter=Qo(l,t.enter),a&&(t.update=Qo(a,t.update)),t}(t,e,n,r,i.config),t)o[u]=FW(t[u],e,a,i);return a}function FW(t,e,n,r){var i,a={},o={};for(var u in t)null!=t[u]&&(a[u]=IW((i=t[u],yo(i)?function(t){var e="";return t.forEach((function(t){var n=MW(t);e+=t.test?"(".concat(t.test,")?").concat(n,":"):n})),":"===Co(e)&&(e+="null"),e}(i):MW(i)),r,n,o));return{$expr:{marktype:e,channels:a},$fields:Object.keys(o),$output:Object.keys(t)}}function IW(t,e,n,r){var i=zU(t,e);return i.$fields.forEach((function(t){return r[t]=1})),Qo(n,i.$params),i.$expr}var PW=["value","update","init","react","bind"];function jW(t,e){eo(t+' for "outer" push: '+Su(e))}function BW(t,e){var n=t.name;if("outer"===t.push)e.signals[n]||jW("No prior signal definition",n),PW.forEach((function(e){void 0!==t[e]&&jW("Invalid property ",e)}));else{var r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}}function LW(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function RW(t,e,n,r){return new LW(t,e,n,r)}function ZW(t,e){return RW("operator",t,e)}function NW(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function zW(t,e){return e?{$field:t,$name:e}:{$field:t}}var UW=zW("key");function HW(t,e){return{$compare:t,$order:e}}function WW(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}var VW="scope",GW="view";function XW(t){return t&&t.signal}function YW(t){if(XW(t))return!0;if(xo(t))for(var e in t)if(YW(t[e]))return!0;return!1}function qW(t,e){return null!=t?t:e}function $W(t){return t&&t.signal||t}var JW="timer";function KW(t,e){return(t.merge?QW:t.stream?tV:t.type?eV:eo("Invalid stream specification: "+Su(t)))(t,e)}function QW(t,e){var n=t.merge.map((function(t){return KW(t,e)})),r=nV({merge:n},t,e);return e.addStream(r).id}function tV(t,e){var n=nV({stream:KW(t.stream,e)},t,e);return e.addStream(n).id}function eV(t,e){var n;t.type===JW?(n=e.event(JW,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(function(t){return t===VW?GW:t||GW}(t.source),t.type);var r=nV({stream:n},t,e);return 1===Object.keys(r).length?n:e.addStream(r).id}function nV(t,e,n){var r=e.between;return r&&(2!==r.length&&eo('Stream "between" parameter must have 2 entries: '+Su(e)),t.between=[KW(r[0],n),KW(r[1],n)]),r=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(function(t,e,n){var r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}(e.marktype,e.markname,e.markrole)),e.source===VW&&r.push("inScope(event.item)"),r.length&&(t.filter=zU("("+r.join(")&&(")+")",n).$expr),null!=(r=e.throttle)&&(t.throttle=+r),null!=(r=e.debounce)&&(t.debounce=+r),e.consume&&(t.consume=!0),t}var rV={code:"_.$value",ast:{type:"Identifier",value:"value"}};function iV(t,e,n){var r=t.encode,i={target:n},a=t.events,o=t.update,u=[];a||eo("Signal update missing events specification."),pu(a)&&(a=iW(a,e.isSubscope()?VW:GW)),a=Ho(a).filter((function(t){return t.signal||t.scale?(u.push(t),0):1})),u.length>1&&(u=[aV(u)]),a.length&&u.push(a.length>1?{merge:a}:a[0]),null!=r&&(o&&eo("Signal encode and update are mutually exclusive."),o="encode(item(),"+Su(r)+")"),i.update=pu(o)?zU(o,e):null!=o.expr?zU(o.expr,e):null!=o.value?o.value:null!=o.signal?{$expr:rV,$params:{$value:e.signalRef(o.signal)}}:eo("Invalid signal update specification."),t.force&&(i.options={force:!0}),u.forEach((function(t){return e.addUpdate(Qo(function(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):KW(t,e)}}(t,e),i))}))}function aV(t){return{signal:"["+t.map((function(t){return t.scale?'scale("'+t.scale+'")':t.signal}))+"]"}}var oV=function(t){return function(e,n,r){return RW(t,n,e||void 0,r)}},uV=oV("aggregate"),sV=oV("axisticks"),lV=oV("bound"),cV=oV("collect"),fV=oV("compare"),hV=oV("datajoin"),dV=oV("encode"),pV=oV("expression"),gV=oV("facet"),vV=oV("field"),mV=oV("key"),yV=oV("legendentries"),xV=oV("load"),bV=oV("mark"),wV=oV("multiextent"),SV=oV("multivalues"),kV=oV("overlap"),CV=oV("params"),EV=oV("prefacet"),MV=oV("projection"),OV=oV("proxy"),AV=oV("relay"),_V=oV("render"),DV=oV("scale"),TV=oV("sieve"),FV=oV("sortitems"),IV=oV("viewlayout"),PV=oV("values"),jV=0,BV={min:"min",max:"max",count:"sum"};function LV(t,e){var n,r=e.getScale(t.name).params;for(n in r.domain=zV(t.domain,t,e),null!=t.range&&(r.range=qV(t,e,r)),null!=t.interpolate&&function(t,e){e.interpolate=RV(t.type||t),null!=t.gamma&&(e.interpolateGamma=RV(t.gamma))}(t.interpolate,r),null!=t.nice&&(r.nice=function(t){return xo(t)?{interval:RV(t.interval),step:RV(t.step)}:RV(t)}(t.nice)),null!=t.bins&&(r.bins=function(t,e){return t.signal||yo(t)?ZV(t,e):e.objectProperty(t)}(t.bins,e)),t)ru(r,n)||"name"===n||(r[n]=RV(t[n],e))}function RV(t,e){return xo(t)?t.signal?e.signalRef(t.signal):eo("Unsupported object: "+Su(t)):t}function ZV(t,e){return t.signal?e.signalRef(t.signal):t.map((function(t){return RV(t,e)}))}function NV(t){eo("Can not find data set: "+Su(t))}function zV(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(yo(t)?UV:t.fields?WV:HV)(t,e,n);null==e.domainMin&&null==e.domainMax||eo("No scale domain defined for domainMin/domainMax to override.")}function UV(t,e,n){return t.map((function(t){return RV(t,n)}))}function HV(t,e,n){var r=n.getData(t.data);return r||NV(t.data),yk(e.type)?r.valuesRef(n,t.field,GV(t.sort,!1)):Sk(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function WV(t,e,n){var r=t.data,i=t.fields.reduce((function(t,e){return e=pu(e)?{data:r,field:e}:yo(e)||e.signal?function(t,e){var n="_:vega:_"+jV++,r=cV({});if(yo(t))r.value={$ingest:t};else if(t.signal){var i="setdata("+Su(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,TV({})]),{data:n,field:"data"}}(e,n):e,t.push(e),t}),[]);return(yk(e.type)?VV:Sk(e.type)?XV:YV)(t,n,i)}function VV(t,e,n){var r,i,a=GV(t.sort,!0),o=n.map((function(t){var n=e.getData(t.data);return n||NV(t.data),n.countsRef(e,t.field,a)})),u={groupby:UW,pulse:o};a&&(r=a.op||"count",i=a.field?WW(r,a.field):"count",u.ops=[BV[r]],u.fields=[e.fieldRef(i)],u.as=[i]),r=e.add(uV(u));var s=e.add(cV({pulse:NW(r)}));return i=e.add(PV({field:UW,sort:e.sortRef(a),pulse:NW(s)})),NW(i)}function GV(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field&&t.op&&!BV[t.op]&&eo("Multiple domain scales can not be sorted using "+t.op):eo("No field provided for sort aggregate op: "+t.op):xo(t)?t.field="key":t={field:"key"}),t}function XV(t,e,n){var r=n.map((function(t){var n=e.getData(t.data);return n||NV(t.data),n.domainRef(e,t.field)}));return NW(e.add(SV({values:r})))}function YV(t,e,n){var r=n.map((function(t){var n=e.getData(t.data);return n||NV(t.data),n.extentRef(e,t.field)}));return NW(e.add(wV({extents:r})))}function qV(t,e,n){var r=e.config.range,i=t.range;if(i.signal)return e.signalRef(i.signal);if(pu(i)){if(r&&ru(r,i))return qV(t=Qo({},t,{range:r[i]}),e,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=yk(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:eo("Unrecognized scale range value: "+Su(i))}else{if(i.scheme)return n.scheme=yo(i.scheme)?ZV(i.scheme,e):RV(i.scheme,e),i.extent&&(n.schemeExtent=ZV(i.extent,e)),void(i.count&&(n.schemeCount=RV(i.count,e)));if(i.step)return void(n.rangeStep=RV(i.step,e));if(yk(t.type)&&!yo(i))return zV(i,t,e);yo(i)||eo("Unsupported range type: "+Su(i))}return i.map((function(t){return(yo(t)?ZV:RV)(t,e)}))}function $V(t,e,n){return yo(t)?t.map((function(t){return $V(t,e,n)})):xo(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:eo("Unsupported parameter object: "+Su(t)):t}var JV="top",KV="left",QV="right",tG="bottom",eG="center",nG="index",rG="label",iG="perc",aG="value",oG="guide-label",uG="guide-title",sG="group-title",lG="group-subtitle",cG="symbol",fG="gradient",hG="discrete",dG="size",pG=[dG,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],gG={name:1,style:1,interactive:1},vG={value:0},mG={value:1},yG="group",xG="rect",bG="rule",wG="text";function SG(t){return t.type=yG,t.interactive=t.interactive||!1,t}function kG(t,e){var n=function(n,r){return qW(t[n],qW(e[n],r))};return n.isVertical=function(n){return"vertical"===qW(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection))},n.gradientLength=function(){return qW(t.gradientLength,e.gradientLength||e.gradientWidth)},n.gradientThickness=function(){return qW(t.gradientThickness,e.gradientThickness||e.gradientHeight)},n.entryColumns=function(){return qW(t.columns,qW(e.columns,+n.isVertical(!0)))},n}function CG(t,e){var n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function EG(t,e,n){return"item.anchor === '".concat("start","' ? ").concat(t," : item.anchor === '").concat("end","' ? ").concat(e," : ").concat(n)}var MG=EG(Su(KV),Su(QV),Su(eG));function OG(t,e){return e?t?xo(t)?Object.assign({},t,{offset:OG(t.offset,e)}):{value:t,offset:e}:e:t}function AG(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=vW(t.encode,e,gG)):t.interactive=!1,t}function _G(t,e,n,r){var i,a,o,u,s,l=kG(t,n),c=l.isVertical(),f=l.gradientThickness(),h=l.gradientLength();c?(a=[0,1],o=[0,0],u=f,s=h):(a=[0,0],o=[1,0],u=h,s=f);var d={enter:i={opacity:vG,x:vG,y:vG,width:dW(u),height:dW(s)},update:Qo({},i,{opacity:mG,fill:{gradient:e,start:a,stop:o}}),exit:{opacity:vG}};return gW(d,{stroke:l("gradientStrokeColor"),strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")}),AG({type:xG,role:"legend-gradient",encode:d},r)}function DG(t,e,n,r,i){var a,o,u,s,l=kG(t,n),c=l.isVertical(),f=l.gradientThickness(),h=l.gradientLength(),d="";c?(a="y",u="y2",o="x",s="width",d="1-"):(a="x",u="x2",o="y",s="height");var p={opacity:vG,fill:{scale:e,field:aG}};p[a]={signal:d+"datum."+iG,mult:h},p[o]=vG,p[u]={signal:d+"datum.perc2",mult:h},p[s]=dW(f);var g={enter:p,update:Qo({},p,{opacity:mG}),exit:{opacity:vG}};return gW(g,{stroke:l("gradientStrokeColor"),strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")}),AG({type:xG,role:"legend-band",key:aG,from:i,encode:g},r)}var TG="datum.".concat(iG,'<=0?"').concat(KV,'":datum.').concat(iG,'>=1?"').concat(QV,'":"').concat(eG,'"'),FG="datum.".concat(iG,'<=0?"').concat(tG,'":datum.').concat(iG,'>=1?"').concat(JV,'":"').concat("middle",'"');function IG(t,e,n,r){var i,a,o,u,s=kG(t,e),l=s.isVertical(),c=dW(s.gradientThickness()),f=s.gradientLength(),h=s("labelOverlap"),d="",p={enter:i={opacity:vG},update:a={opacity:mG,text:{field:rG}},exit:{opacity:vG}};return gW(p,{fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:qW(t.labelLimit,e.gradientLabelLimit)}),l?(i.align={value:"left"},i.baseline=a.baseline={signal:FG},o="y",u="x",d="1-"):(i.align=a.align={signal:TG},i.baseline={value:"top"},o="x",u="y"),i[o]=a[o]={signal:d+"datum."+iG,mult:f},i[u]=a[u]=c,c.offset=qW(t.labelOffset,e.gradientLabelOffset)||0,h=h?{separation:s("labelSeparation"),method:h,order:"datum."+nG}:void 0,AG({type:wG,role:wW,style:oG,key:aG,from:r,encode:p,overlap:h},n)}function PG(t,e,n,r,i){var a,o,u,s,l,c=kG(t,e),f=n.entries,h=!(!f||!f.interactive),d=f?f.name:void 0,p=c("clipHeight"),g=c("symbolOffset"),v={data:"value"},m="(".concat(i,") ? datum.").concat("offset"," : datum.").concat(dG),y=p?dW(p):{field:dG},x="datum.".concat(nG),b="max(1, ".concat(i,")");y.mult=.5,a={enter:o={opacity:vG,x:{signal:m,mult:.5,offset:g},y:y},update:u={opacity:mG,x:o.x,y:o.y},exit:{opacity:vG}};var w=null,S=null;t.fill||(w=e.symbolBaseFillColor,S=e.symbolBaseStrokeColor),gW(a,{fill:c("symbolFillColor",w),shape:c("symbolType"),size:c("symbolSize"),stroke:c("symbolStrokeColor",S),strokeDash:c("symbolDash"),strokeDashOffset:c("symbolDashOffset"),strokeWidth:c("symbolStrokeWidth")},{opacity:c("symbolOpacity")}),pG.forEach((function(e){t[e]&&(u[e]=o[e]={scale:t[e],field:aG})}));var k=AG({type:"symbol",role:"legend-symbol",key:aG,from:v,clip:!!p||void 0,encode:a},n.symbols),C=dW(g);C.offset=c("labelOffset"),gW(a={enter:o={opacity:vG,x:{signal:m,offset:C},y:y},update:u={opacity:mG,text:{field:rG},x:o.x,y:o.y},exit:{opacity:vG}},{align:c("labelAlign"),baseline:c("labelBaseline"),fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontStyle:c("labelFontStyle"),fontWeight:c("labelFontWeight"),limit:c("labelLimit")});var E=AG({type:wG,role:wW,style:oG,key:aG,from:v,encode:a},n.labels);return a={enter:{noBound:{value:!p},width:vG,height:p?dW(p):vG,opacity:vG},exit:{opacity:vG},update:u={opacity:mG,row:{signal:null},column:{signal:null}}},c.isVertical(!0)?(s="ceil(item.mark.items.length / ".concat(b,")"),u.row.signal="".concat(x,"%").concat(s),u.column.signal="floor(".concat(x," / ").concat(s,")"),l={field:["row",x]}):(u.row.signal="floor(".concat(x," / ").concat(b,")"),u.column.signal="".concat(x," % ").concat(b),l={field:x}),u.column.signal="(".concat(i,")?").concat(u.column.signal,":").concat(x),SG({role:bW,from:r={facet:{data:r,name:"value",groupby:nG}},encode:vW(a,f,gG),marks:[k,E],name:d,interactive:h,sort:l})}var jG='item.orient === "left"',BG='item.orient === "right"',LG="(".concat(jG," || ").concat(BG,")"),RG="datum.vgrad && ".concat(LG),ZG=EG('"top"','"bottom"','"middle"'),NG=EG('"right"','"left"','"center"'),zG="datum.vgrad && ".concat(BG," ? (").concat(NG,") : (").concat(LG," && !(datum.vgrad && ").concat(jG,')) ? "left" : ').concat(MG),UG="item._anchor || (".concat(LG,' ? "middle" : "start")'),HG="".concat(RG," ? (").concat(jG," ? -90 : 90) : 0"),WG="".concat(LG," ? (datum.vgrad ? (").concat(BG,' ? "bottom" : "top") : ').concat(ZG,') : "top"');function VG(t,e){var n;return xo(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+GG(t.path)+")":t.sphere&&(n="geoShape("+GG(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function GG(t){return xo(t)&&t.signal?t.signal:Su(t)}function XG(t){var e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")&&e.indexOf("title")?t.type===yG?bW:e||yW:e}function YG(t){return{marktype:t.type,name:t.name||void 0,role:t.role||XG(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function qG(t,e){return t&&t.signal?e.signalRef(t.signal):!1!==t}function $G(t,e){var n=Od(t.type);n||eo("Unrecognized transform type: "+Su(t.type));var r=RW(n.type.toLowerCase(),null,JG(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r}function JG(t,e,n){for(var r={},i=t.params.length,a=0;a<i;++a){var o=t.params[a];r[o.name]=KG(o,e,n)}return r}function KG(t,e,n){var r=t.type,i=e[t.name];return"index"===r?function(t,e,n){pu(e.from)||eo('Lookup "from" parameter must be a string literal.');return n.getData(e.from).lookupRef(n,e.key)}(0,e,n):void 0!==i?"param"===r?function(t,e,n){var r=e[t.name];return t.array?(yo(r)||eo("Expected an array of sub-parameters. Instead: "+Su(r)),r.map((function(e){return tX(t,e,n)}))):tX(t,r,n)}(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!XW(i)?i.map((function(e){return QG(t,e,n)})):QG(t,i,n):void(t.required&&eo("Missing required "+Su(e.type)+" parameter: "+Su(t.name)))}function QG(t,e,n){var r=t.type;if(XW(e))return iX(r)?eo("Expression references can not be signals."):aX(r)?n.fieldRef(e):oX(r)?n.compareRef(e):n.signalRef(e.signal);var i=t.expr||aX(r);return i&&eX(e)?n.exprRef(e.expr,e.as):i&&nX(e)?zW(e.field,e.as):iX(r)?zU(e,n):rX(r)?NW(n.getData(e).values):aX(r)?zW(e):oX(r)?n.compareRef(e):e}function tX(t,e,n){for(var r,i=t.params.length,a=0;a<i;++a){for(var o in(r=t.params[a]).key)if(r.key[o]!==e[o]){r=null;break}if(r)break}r||eo("Unsupported parameter: "+Su(e));var u=Qo(JG(r,e,n),r.key);return NW(n.add(CV(u)))}var eX=function(t){return t&&t.expr},nX=function(t){return t&&t.field},rX=function(t){return"data"===t},iX=function(t){return"expr"===t},aX=function(t){return"field"===t},oX=function(t){return"compare"===t};function uX(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:NW(e.getData(t.data).output)}function sX(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}function lX(t){return pu(t)?t:null}function cX(t,e,n){var r,i=WW(n.op,n.field);if(e.ops){for(var a=0,o=e.as.length;a<o;++a)if(e.as[a]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function fX(t,e,n,r,i,a,o){var u,s,l=e[n]||(e[n]={}),c=function(t){return xo(t)?("descending"===t.order?"-":"+")+WW(t.op,t.field):""}(a),f=lX(i);if(null!=f&&(t=e.scope,u=l[f+=c?"|"+c:""]),!u){var h=a?{field:UW,pulse:e.countsRef(t,i,a)}:{field:t.fieldRef(i),pulse:NW(e.output)};c&&(h.sort=t.sortRef(a)),s=t.add(RW(r,void 0,h)),o&&(e.index[i]=s),u=NW(s),null!=f&&(l[f]=u)}return u}function hX(t,e,n){var r=t.remove,i=t.insert,a=t.toggle,o=t.modify,u=t.values,s=e.add(ZW()),l=zU("if("+t.trigger+',modify("'+n+'",'+[i,r,a,o,u].map((function(t){return null==t?"null":t})).join(",")+"),0)",e);s.update=l.$expr,s.params=l.$params}function dX(t,e){var n,r,i,a,o,u,s,l=XG(t),c=t.type===yG,f=t.from&&t.from.facet,h=t.overlap,d=t.layout||l===bW||l===xW,p=l===yW||d||f,g=function(t,e,n){var r,i,a,o,u;return t?(r=t.facet)&&(e||eo("Only group marks can be faceted."),null!=r.field?o=u=uX(r,n):(t.data?u=NW(n.getData(t.data).aggregate):((a=$G(Qo({type:"aggregate",groupby:Ho(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),a.params.pulse=uX(r,n),o=u=NW(n.add(a))),i=n.keyRef(r.groupby,!0))):o=NW(n.add(cV(null,[{}]))),o||(o=uX(t,n)),{key:i,pulse:o,parent:u}}(t.from,c,e),v=NW(r=e.add(hV({key:g.key||(t.key?zW(t.key):void 0),pulse:g.pulse,clean:!c})));r=i=e.add(cV({pulse:v})),r=e.add(bV({markdef:YG(t),interactive:qG(t.interactive,e),clip:VG(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:NW(r)}));var m=NW(r);(r=a=e.add(dV(TW(t.encode,t.type,l,t.style,e,{mod:!1,pulse:m})))).params.parent=e.encode(),t.transform&&t.transform.forEach((function(t){var n=$G(t,e),i=n.metadata;(i.generates||i.changes)&&eo("Mark transforms should not generate new data."),i.nomod||(a.params.mod=!0),n.params.pulse=NW(r),e.add(r=n)})),t.sort&&(r=e.add(FV({sort:e.compareRef(t.sort),pulse:NW(r)})));var y=NW(r);(f||d)&&(u=NW(d=e.add(IV({layout:e.objectProperty(t.layout),legends:e.legends,mark:m,pulse:y}))));var x=e.add(lV({mark:m,pulse:u||y}));s=NW(x),c&&(p&&((n=e.operators).pop(),d&&n.pop()),e.pushState(y,u||s,v),f?function(t,e,n){var r,i=t.from.facet,a=i.name,o=uX(i,e);i.name||eo("Facet must have a name: "+Su(i)),i.data||eo("Facet must reference a data set: "+Su(i)),i.field?r=e.add(EV({field:e.fieldRef(i.field),pulse:o})):i.groupby?r=e.add(gV({key:e.keyRef(i.groupby),group:NW(e.proxy(n.parent)),pulse:o})):eo("Facet must specify groupby or field: "+Su(i));var u=e.fork(),s=u.add(cV()),l=u.add(TV({pulse:NW(s)}));u.addData(a,new sX(u,s,s,l)),u.addSignal("parent",null),r.params.subflow={$subflow:u.parse(t).toRuntime()}}(t,e,g):p?function(t,e,n){var r=e.add(EV({pulse:n.pulse})),i=e.fork();i.add(TV()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(t).toRuntime()}}(t,e,g):e.parse(t),e.popState(),p&&(d&&n.push(d),n.push(x))),h&&(s=function(t,e,n){var r=t.method,i=t.bound,a=t.separation,o={separation:XW(a)?n.signalRef(a.signal):a,method:XW(r)?n.signalRef(r.signal):r,pulse:e};t.order&&(o.sort=n.compareRef({field:t.order}));if(i){var u=i.tolerance;o.boundTolerance=XW(u)?n.signalRef(u.signal):+u,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return NW(n.add(kV(o)))}(h,s,e));var b=e.add(_V({pulse:s})),w=e.add(TV({pulse:NW(b)},void 0,e.parent()));null!=t.name&&(o=t.name,e.addData(o,new sX(e,i,b,w)),t.on&&t.on.forEach((function(t){(t.insert||t.remove||t.toggle)&&eo("Marks only support modify triggers."),hX(t,e,o)})))}function pX(t,e){var n,r,i,a=e.config.legend,o=t.encode||{},u=kG(t,a),s=o.legend||{},l=s.name||void 0,c=s.interactive,f=s.style,h={},d=0;pG.forEach((function(e){return t[e]?(h[e]=t[e],d=d||t[e]):0})),d||eo("Missing valid scale for legend.");var p=function(t,e){var n=t.type||cG;t.type||1!==function(t){return pG.reduce((function(e,n){return e+(t[n]?1:0)}),0)}(t)||!t.fill&&!t.stroke||(n=mk(e)?fG:xk(e)?hG:cG);return n!==fG?n:xk(e)?hG:fG}(t,e.scaleType(d)),g={title:null!=t.title,scales:h,type:p,vgrad:"symbol"!==p&&u.isVertical()},v=NW(e.add(cV(null,[g]))),m=NW(e.add(yV(r={type:p,scale:e.scaleRef(d),count:e.objectProperty(u("tickCount")),limit:e.property(u("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return p===fG?(i=[_G(t,d,a,o.gradient),IG(t,a,o.labels,m)],r.count=r.count||e.signalRef("max(2,2*floor((".concat($W(u.gradientLength()),")/100))"))):p===hG?i=[DG(t,d,a,o.gradient,m),IG(t,a,o.labels,m)]:(n=function(t,e){var n=kG(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(t,a),i=[PG(t,a,o,m,$W(n.columns))],r.size=function(t,e,n){var r=$W(vX("size",t,n)),i=$W(vX("strokeWidth",t,n)),a=$W(function(t,e,n){return CG("fontSize",t)||function(t,e,n){var r=e.config.style[n];return r&&r[t]}("fontSize",e,n)}(n[1].encode,e,oG));return zU("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(a,")"),e)}(t,e,i[0].marks)),i=[SG({role:"legend-entry",from:v,encode:{enter:{x:{value:0},y:{value:0}}},marks:i,layout:n,interactive:c})],g.title&&i.push(function(t,e,n,r){var i=kG(t,e),a={enter:{opacity:vG},update:{opacity:mG,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:vG}};return gW(a,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:UG},angle:{signal:HG},align:{signal:zG},baseline:{signal:WG},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),AG({type:wG,role:"legend-title",style:uG,from:r,encode:a},n)}(t,a,o.title,v)),dX(SG({role:"legend",from:v,encode:vW(gX(u,t,a),s,gG),marks:i,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:l,interactive:c,style:f}),e)}function gX(t,e,n){var r={enter:{},update:{}};return gW(r,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),r}function vX(t,e,n){return e[t]?'scale("'.concat(e[t],'",datum)'):CG(t,n[0].encode)}sX.fromEntries=function(t,e){var n=e.length,r=e[n-1],i=e[n-2],a=e[0],o=null,u=1;for(a&&"load"===a.type&&(a=e[1]),t.add(e[0]);u<n;++u)e[u].params.pulse=NW(e[u-1]),t.add(e[u]),"aggregate"===e[u].type&&(o=e[u]);return new sX(t,a,i,r,o)},sX.prototype={countsRef:function(t,e,n){var r,i,a,o=this,u=o.counts||(o.counts={}),s=lX(e);return null!=s&&(t=o.scope,r=u[s]),r?n&&n.field&&cX(t,r.agg.params,n):(a={groupby:t.fieldRef(e,"key"),pulse:NW(o.output)},n&&n.field&&cX(t,a,n),i=t.add(uV(a)),r=t.add(cV({pulse:NW(i)})),r={agg:i,ref:NW(r)},null!=s&&(u[s]=r)),r.ref},tuplesRef:function(){return NW(this.values)},extentRef:function(t,e){return fX(t,this,"extent","extent",e,!1)},domainRef:function(t,e){return fX(t,this,"domain","values",e,!1)},valuesRef:function(t,e,n){return fX(t,this,"vals","values",e,n||!0)},lookupRef:function(t,e){return fX(t,this,"lookup","tupleindex",e,!1)},indataRef:function(t,e){return fX(t,this,"indata","tupleindex",e,!0,!0)}};var mX='item.orient==="'.concat(KV,'"?-90:item.orient==="').concat(QV,'"?90:0');function yX(t,e){var n=kG(t=pu(t)?{text:t}:t,e.config.title),r=t.encode||{},i=r.group||{},a=i.name||void 0,o=i.interactive,u=i.style,s=[],l=NW(e.add(cV(null,[{}])));return s.push(function(t,e,n,r){var i={value:0},a=t.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return gW(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),AG({type:wG,role:SW,style:sG,from:r,encode:o},n)}(t,n,function(t){var e=t.encode;return e&&e.title||Qo({name:t.name,interactive:t.interactive,style:t.style},e)}(t),l)),t.subtitle&&s.push(function(t,e,n,r){var i={value:0},a=t.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return gW(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),AG({type:wG,role:kW,style:lG,from:r,encode:o},n)}(t,n,r.subtitle,l)),dX(SG({role:"title",from:l,encode:xX(n,i),marks:s,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:o,style:u}),e)}function xX(t,e){var n={enter:{},update:{}};return gW(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:MG},angle:{signal:mX},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),vW(n,e,gG)}function bX(t,e){var n=[];t.transform&&t.transform.forEach((function(t){n.push($G(t,e))})),t.on&&t.on.forEach((function(n){hX(n,e,t.name)})),e.addDataPipeline(t.name,function(t,e,n){var r,i,a,o,u,s=[],l=null,c=!1,f=!1;t.values?XW(t.values)||YW(t.format)?(s.push(SX(e,t)),s.push(l=wX())):s.push(l=wX({$ingest:t.values,$format:t.format})):t.url?YW(t.url)||YW(t.format)?(s.push(SX(e,t)),s.push(l=wX())):s.push(l=wX({$request:t.url,$format:t.format})):t.source&&(l=r=Ho(t.source).map((function(t){return NW(e.getData(t).output)})),s.push(null));for(i=0,a=n.length;i<a;++i)u=(o=n[i]).metadata,l||u.source||s.push(l=wX()),s.push(o),u.generates&&(f=!0),u.modifies&&!f&&(c=!0),u.source?l=o:u.changes&&(l=null);r&&(a=r.length-1,s[0]=AV({derive:c,pulse:a?r:r[0]}),(c||a)&&s.splice(1,0,wX()));l||s.push(wX());return s.push(TV({})),s}(t,e,n))}function wX(t){var e=cV({},t);return e.metadata={source:!0},e}function SX(t,e){return xV({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}var kX=function(t){return t===tG||t===JV},CX=function(t,e,n){return XW(t)?DX(t.signal,e,n):t===KV||t===JV?e:n},EX=function(t,e,n){return XW(t)?AX(t.signal,e,n):kX(t)?e:n},MX=function(t,e,n){return XW(t)?_X(t.signal,e,n):kX(t)?n:e},OX=function(t,e,n){return XW(t)?TX(t.signal,e,n):t===JV?{value:e}:{value:n}},AX=function(t,e,n){return IX("".concat(t," === '").concat(JV,"' || ").concat(t," === '").concat(tG,"'"),e,n)},_X=function(t,e,n){return IX("".concat(t," !== '").concat(JV,"' && ").concat(t," !== '").concat(tG,"'"),e,n)},DX=function(t,e,n){return jX("".concat(t," === '").concat(KV,"' || ").concat(t," === '").concat(JV,"'"),e,n)},TX=function(t,e,n){return jX("".concat(t," === '").concat(JV,"'"),e,n)},FX=function(t,e,n){return jX("".concat(t," === '").concat(QV,"'"),e,n)},IX=function(t,e,n){return e=null!=e?dW(e):e,n=null!=n?dW(n):n,PX(e)&&PX(n)?(e=e?e.signal||Su(e.value):null,n=n?n.signal||Su(n.value):null,{signal:"".concat(t," ? (").concat(e,") : (").concat(n,")")}):[Qo({test:t},e)].concat(n||[])},PX=function(t){return null==t||1===Object.keys(t).length},jX=function(t,e,n){return{signal:"".concat(t," ? (").concat(LX(e),") : (").concat(LX(n),")")}},BX=function(t,e,n,r,i){return{signal:(null!=r?"".concat(t," === '").concat(KV,"' ? (").concat(LX(r),") : "):"")+(null!=n?"".concat(t," === '").concat(tG,"' ? (").concat(LX(n),") : "):"")+(null!=i?"".concat(t," === '").concat(QV,"' ? (").concat(LX(i),") : "):"")+(null!=e?"".concat(t," === '").concat(JV,"' ? (").concat(LX(e),") : "):"")+"(null)"}},LX=function(t){return XW(t)?t.signal:null==t?null:Su(t)},RX=function(t,e){var n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function ZX(t,e,n,r){var i;if(e&&ru(e,t))return e[t];if(ru(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return r[uG][i]}if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return r[oG][i]}return null}function NX(t){var e,n={},r=sW(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i)for(var a in i)n[a]=1}}catch(o){r.e(o)}finally{r.f()}return Object.keys(n)}function zX(t,e){return{scale:t.scale,range:e}}function UX(t,e,n,r,i){var a,o,u,s=kG(t,e),l=t.orient,c=t.gridScale,f=CX(l,1,-1),h=function(t,e){if(1===e);else if(xo(t)){for(var n=t=Qo({},t);null!=n.mult;){if(!xo(n.mult))return n.mult=XW(e)?{signal:"(".concat(n.mult,") * (").concat(e.signal,")")}:n.mult*e,t;n=n.mult=Qo({},n.mult)}n.mult=e}else t=XW(e)?{signal:"(".concat(e.signal,") * (").concat(t||0,")")}:e*(t||0);return t}(t.offset,f),d={enter:a={opacity:vG},update:u={opacity:mG},exit:o={opacity:vG}};gW(d,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});var p={scale:t.scale,field:aG,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=EX(l,{signal:"height"},{signal:"width"}),v=c?{scale:c,range:0,mult:f,offset:h}:{value:0,offset:h},m=c?{scale:c,range:1,mult:f,offset:h}:Qo(g,{mult:f,offset:h});return a.x=u.x=EX(l,p,v),a.y=u.y=MX(l,p,v),a.x2=u.x2=MX(l,m),a.y2=u.y2=EX(l,m),o.x=EX(l,p),o.y=MX(l,p),AG({type:bG,role:"axis-grid",key:aG,from:r,encode:d},n)}function HX(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}function WX(t,e,n,r,i,a){var o,u=kG(t,e),s=t.orient,l=t.scale,c=CX(s,-1,1),f=$W(u("labelFlush")),h=$W(u("labelFlushOffset")),d=u("labelAlign"),p=u("labelBaseline"),g=0===f||!!f,v=dW(i);v.mult=c,v.offset=dW(u("labelPadding")||0),v.offset.mult=c;var m={scale:l,field:aG,band:.5,offset:OG(a.offset,u("labelOffset"))},y=EX(s,g?HX(l,f,'"left"','"right"','"center"'):{value:"center"},function(t,e,n){return XW(t)?FX(t.signal,e,n):t===QV?{value:e}:{value:n}}(s,"left","right")),x=EX(s,OX(s,"bottom","top"),g?HX(l,f,'"top"','"bottom"','"middle"'):{value:"middle"}),b=HX(l,f,"-(".concat(h,")"),h,0);g=g&&h;var w={opacity:vG,x:EX(s,m,v),y:MX(s,m,v)},S={enter:w,update:o={opacity:mG,text:{field:rG},x:w.x,y:w.y,align:y,baseline:x},exit:{opacity:vG,x:w.x,y:w.y}};gW(S,{dx:!d&&g?EX(s,b):null,dy:!p&&g?MX(s,b):null}),gW(S,{angle:u("labelAngle"),fill:u("labelColor"),fillOpacity:u("labelOpacity"),font:u("labelFont"),fontSize:u("labelFontSize"),fontWeight:u("labelFontWeight"),fontStyle:u("labelFontStyle"),limit:u("labelLimit"),lineHeight:u("labelLineHeight")},{align:d,baseline:p});var k=u("labelBound"),C=u("labelOverlap");return C=C||k?{separation:u("labelSeparation"),method:C,order:"datum.index",bound:k?{scale:l,orient:s,tolerance:k}:null}:void 0,o.align!==y&&(o.align=RX(o.align,y)),o.baseline!==x&&(o.baseline=RX(o.baseline,x)),AG({type:wG,role:"axis-label",style:oG,key:aG,from:r,encode:S,overlap:C},n)}function VX(t,e,n,r){var i,a,o=kG(t,e),u=t.orient,s=CX(u,-1,1),l={enter:i={opacity:vG,anchor:dW(o("titleAnchor",null)),align:{signal:MG}},update:a=Qo({},i,{opacity:mG,text:dW(t.title)}),exit:{opacity:vG}},c={signal:'lerp(range("'.concat(t.scale,'"), ').concat(EG(0,1,.5),")")};return a.x=EX(u,c),a.y=MX(u,c),i.angle=EX(u,vG,function(t,e){return 0===e?0:XW(t)?{signal:"(".concat(t.signal,") * ").concat(e)}:{value:t*e}}(s,90)),i.baseline=EX(u,OX(u,tG,JV),{value:tG}),a.angle=i.angle,a.baseline=i.baseline,gW(l,{fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),angle:o("titleAngle"),baseline:o("titleBaseline")}),function(t,e,n,r){var i=function(t,e){return null!=t?(n.update[e]=RX(dW(t),n.update[e]),!1):!mW(e,r)},a=i(t("titleX"),"x"),o=i(t("titleY"),"y");n.enter.auto=o===a?dW(o):EX(e,dW(o),dW(a))}(o,u,l,n),l.update.align=RX(l.update.align,i.align),l.update.angle=RX(l.update.angle,i.angle),l.update.baseline=RX(l.update.baseline,i.baseline),AG({type:wG,role:"axis-title",style:uG,from:r,encode:l},n)}function GX(t,e){var n,r=function(t,e){var n,r,i,a=e.config,o=a.style,u=a.axis,s="band"===e.scaleType(t.scale)&&a.axisBand,l=t.orient;if(XW(l)){var c=NX([a.axisX,a.axisY]),f=NX([a.axisTop,a.axisBottom,a.axisLeft,a.axisRight]);n={};var h,d=sW(c);try{for(d.s();!(h=d.n()).done;)n[i=h.value]=EX(l,ZX(i,a.axisX,u,o),ZX(i,a.axisY,u,o))}catch(v){d.e(v)}finally{d.f()}r={};var p,g=sW(f);try{for(g.s();!(p=g.n()).done;)r[i=p.value]=BX(l.signal,ZX(i,a.axisTop,u,o),ZX(i,a.axisBottom,u,o),ZX(i,a.axisLeft,u,o),ZX(i,a.axisRight,u,o))}catch(v){g.e(v)}finally{g.f()}}else n=l===JV||l===tG?a.axisX:a.axisY,r=a["axis"+l[0].toUpperCase()+l.slice(1)];return n||r||s?Qo({},u,n,r,s):u}(t,e),i=t.encode||{},a=i.axis||{},o=a.name||void 0,u=a.interactive,s=a.style,l=kG(t,r),c=function(t){var e,n,r=t("tickBand"),i=t("tickOffset");return r?r.signal?(e={signal:"(".concat(r.signal,") === 'extent' ? 1 : 0.5")},n={signal:"(".concat(r.signal,") === 'extent'")},xo(i)||(i={signal:"(".concat(r.signal,") === 'extent' ? 0 : ").concat(i)})):"extent"===r?(e=1,n=!0,i=0):(e=.5,n=!1):(e=t("bandPosition"),n=t("tickExtra")),{extra:n,band:e,offset:i}}(l),f={scale:t.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:null!=t.title},h=NW(e.add(cV({},[f]))),d=NW(e.add(sV({scale:e.scaleRef(t.scale),extra:e.property(c.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),p=[];return f.grid&&p.push(UX(t,r,i.grid,d,c)),f.ticks&&(n=l("tickSize"),p.push(function(t,e,n,r,i,a){var o,u,s,l=kG(t,e),c=t.orient,f=CX(c,-1,1),h={enter:o={opacity:vG},update:s={opacity:mG},exit:u={opacity:vG}};gW(h,{stroke:l("tickColor"),strokeCap:l("tickCap"),strokeDash:l("tickDash"),strokeDashOffset:l("tickDashOffset"),strokeOpacity:l("tickOpacity"),strokeWidth:l("tickWidth")});var d=dW(i);d.mult=f;var p={scale:t.scale,field:aG,band:a.band,extra:a.extra,offset:a.offset,round:l("tickRound")};return s.y=o.y=EX(c,vG,p),s.y2=o.y2=EX(c,d),u.x=EX(c,p),s.x=o.x=MX(c,vG,p),s.x2=o.x2=MX(c,d),u.y=MX(c,p),AG({type:bG,role:"axis-tick",key:aG,from:r,encode:h},n)}(t,r,i.ticks,d,n,c))),f.labels&&(n=f.ticks?n:0,p.push(WX(t,r,i.labels,d,n,c))),f.domain&&p.push(function(t,e,n,r){var i,a,o=kG(t,e),u=t.orient,s={enter:i={opacity:vG},update:a={opacity:mG},exit:{opacity:vG}};gW(s,{stroke:o("domainColor"),strokeCap:o("domainCap"),strokeDash:o("domainDash"),strokeDashOffset:o("domainDashOffset"),strokeWidth:o("domainWidth"),strokeOpacity:o("domainOpacity")});var l=zX(t,0),c=zX(t,1);return i.x=a.x=EX(u,l,vG),i.x2=a.x2=EX(u,c),i.y=a.y=MX(u,l,vG),i.y2=a.y2=MX(u,c),AG({type:bG,role:"axis-domain",from:r,encode:s},n)}(t,r,i.domain,h)),f.title&&p.push(VX(t,r,i.title,h)),dX(SG({role:"axis",from:h,encode:vW(XX(l,t),a,gG),marks:p,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:u,style:s}),e)}function XX(t,e){var n={enter:{},update:{}};return gW(n,{orient:t("orient"),offset:t("offset")||0,position:qW(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:'abs(span(range("'.concat(e.scale,'")))')},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function YX(t,e,n){var r=Ho(t.signals),i=Ho(t.scales);return n||r.forEach((function(t){return BW(t,e)})),Ho(t.projections).forEach((function(t){return function(t,e){var n=e.config.projection||{},r={};for(var i in t)"name"!==i&&(r[i]=$V(t[i],i,e));for(var a in n)null==r[a]&&(r[a]=$V(n[a],a,e));e.addProjection(t.name,r)}(t,e)})),i.forEach((function(t){return function(t,e){var n=t.type||"linear";gk(n)||eo("Unrecognized scale type: "+Su(n)),e.addScale(t.name,{type:n,domain:void 0})}(t,e)})),Ho(t.data).forEach((function(t){return bX(t,e)})),i.forEach((function(t){return LV(t,e)})),(n||r).forEach((function(t){return function(t,e){var n=e.getSignal(t.name),r=t.update;t.init&&(r?eo("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=zU(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach((function(t){return iV(t,e,n.id)}))}(t,e)})),Ho(t.axes).forEach((function(t){return GX(t,e)})),Ho(t.marks).forEach((function(t){return dX(t,e)})),Ho(t.legends).forEach((function(t){return pX(t,e)})),t.title&&yX(t.title,e),e.parseLambdas(),e}function qX(t,e){var n=e.config,r=NW(e.root=e.add(ZW())),i=function(t,e){var n=function(n){return qW(t[n],e[n])},r=[$X("background",n("background")),$X("autosize",cW(n("autosize"))),$X("padding",hW(n("padding"))),$X("width",n("width")||0),$X("height",n("height")||0)],i=r.reduce((function(t,e){return t[e.name]=e,t}),{}),a={};return Ho(t.signals).forEach((function(t){ru(i,t.name)?t=Qo(i[t.name],t):r.push(t),a[t.name]=t})),Ho(e.signals).forEach((function(t){ru(a,t.name)||ru(i,t.name)||r.push(t)})),r}(t,n);i.forEach((function(t){return BW(t,e)})),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;var a=e.add(cV()),o=e.add(dV(TW(function(t){return vW({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t)}(t.encode),yG,xW,t.style,e,{pulse:NW(a)}))),u=e.add(IV({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:r,pulse:NW(o)}));e.operators.pop(),e.pushState(NW(o),NW(u),null),YX(t,e,i),e.operators.push(u);var s=e.add(lV({mark:r,pulse:NW(u)}));return s=e.add(_V({pulse:NW(s)})),s=e.add(TV({pulse:NW(s)})),e.addData("root",new sX(e,a,a,s)),e}function $X(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function JX(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function KX(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function QX(t){return(yo(t)?tY:eY)(t)}function tY(t){for(var e=t.length,n="[",r=0;r<e;++r){var i=t[r];n+=(r>0?",":"")+(xo(i)?i.signal||QX(i):Su(i))}return n+"]"}function eY(t){var e,n,r="{",i=0;for(e in t)n=t[e],r+=(++i>1?",":"")+Su(e)+":"+(xo(n)?n.signal||QX(n):Su(n));return r+"}"}function nY(t,e,n){return xo(t)||eo("Input Vega specification must be an object."),e=wo(function(){var t="sans-serif",e="#4c78a8",n="#000",r="#888",i="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:e},area:{fill:e},image:null,line:{stroke:e,strokeWidth:2},path:{stroke:e},rect:{fill:e},rule:{stroke:n},shape:{stroke:e},symbol:{fill:e,size:64},text:{fill:n,font:t,fontSize:11},trail:{fill:e,size:2},style:{"guide-label":{fill:n,font:t,fontSize:10},"guide-title":{fill:n,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:i}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:i,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:i,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),e,t.config),qX(t,new JX(e,n)).toRuntime()}JX.prototype=KX.prototype={parse:function(t){return YX(t,this)},fork:function(){return new KX(this)},isSubscope:function(){return this._subid>0},toRuntime:function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function(){return(this._subid?this._subid+":":0)+this._id++},add:function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach((function(e){e.$ref=t.id})),t.refs=null),t},proxy:function(t){var e=t instanceof LW?NW(t):t;return this.add(OV({value:e}))},addStream:function(t){return this.streams.push(t),t.id=this.id(),t},addUpdate:function(t){return this.updates.push(t),t},finish:function(){var t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){var r;t&&((r=t.data||(t.data={}))[e]||(r[e]=[])).push(n)}for(t in this.data)for(var r in n((e=this.data[t]).input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values"),e.index)n(e.index[r],t,"index:"+r);return this},pushState:function(t,e,n){this._encode.push(NW(this.add(TV({pulse:t})))),this._parent.push(e),this._lookup.push(n?NW(this.proxy(n)):null),this._markpath.push(-1)},popState:function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function(){return Co(this._parent)},encode:function(){return Co(this._encode)},lookup:function(){return Co(this._lookup)},markpath:function(){var t=this._markpath;return++t[t.length-1]},fieldRef:function(t,e){if(pu(t))return zW(t,e);t.signal||eo("Unsupported field reference: "+Su(t));var n=t.signal,r=this.field[n];if(!r){var i={name:this.signalRef(n)};e&&(i.as=e),this.field[n]=r=NW(this.add(vV(i)))}return r},compareRef:function(t){var e=this,n=!1,r=function(t){return XW(t)?(n=!0,e.signalRef(t.signal)):function(t){return t&&t.expr}(t)?(n=!0,e.exprRef(t.expr)):t},i=Ho(t.field).map(r),a=Ho(t.order).map(r);return n?NW(this.add(fV({fields:i,orders:a}))):HW(i,a)},keyRef:function(t,e){var n=!1,r=this.signals;return t=Ho(t).map((function(t){return XW(t)?(n=!0,NW(r[t.signal])):t})),n?NW(this.add(mV({fields:t,flat:e}))):function(t,e){var n={$key:t};return e&&(n.$flat=!0),n}(t,e)},sortRef:function(t){if(!t)return t;var e=WW(t.op,t.field),n=t.order||"ascending";return n.signal?NW(this.add(fV({fields:e,orders:this.signalRef(n.signal)}))):HW(e,n)},event:function(t,e){var n=t+":"+e;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},hasOwnSignal:function(t){return ru(this.signals,t)},addSignal:function(t,e){this.hasOwnSignal(t)&&eo("Duplicate signal name: "+Su(t));var n=e instanceof LW?e:this.add(ZW(e));return this.signals[t]=n},getSignal:function(t){return this.signals[t]||eo("Unrecognized signal name: "+Su(t)),this.signals[t]},signalRef:function(t){return this.signals[t]?NW(this.signals[t]):(ru(this.lambdas,t)||(this.lambdas[t]=this.add(ZW(null))),NW(this.lambdas[t]))},parseLambdas:function(){for(var t=Object.keys(this.lambdas),e=0,n=t.length;e<n;++e){var r=t[e],i=zU(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},property:function(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty:function(t){return t&&xo(t)?this.signalRef(t.signal||QX(t)):t},exprRef:function(t,e){var n={expr:zU(t,this)};return e&&(n.expr.$name=e),NW(this.add(pV(n)))},addBinding:function(t,e){this.bindings||eo("Nested signals do not support binding: "+Su(t)),this.bindings.push(Qo({signal:t},e))},addScaleProj:function(t,e){ru(this.scales,t)&&eo("Duplicate scale or projection name: "+Su(t)),this.scales[t]=this.add(e)},addScale:function(t,e){this.addScaleProj(t,DV(e))},addProjection:function(t,e){this.addScaleProj(t,MV(e))},getScale:function(t){return this.scales[t]||eo("Unrecognized scale name: "+Su(t)),this.scales[t]},scaleRef:function(t){return NW(this.getScale(t))},scaleType:function(t){return this.getScale(t).params.type},projectionRef:function(t){return this.scaleRef(t)},projectionType:function(t){return this.scaleType(t)},addData:function(t,e){return ru(this.data,t)&&eo("Duplicate data set name: "+Su(t)),this.data[t]=e},getData:function(t){return this.data[t]||eo("Undefined data set name: "+Su(t)),this.data[t]},addDataPipeline:function(t,e){return ru(this.data,t)&&eo("Duplicate data set name: "+Su(t)),this.addData(t,sX.fromEntries(this,e))}};var rY="5.22.1";Qo(Md,a,u,s,l,c,h,f,d,p,g,v);var iY={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},aY={"*":function(t,e){return t*e},"+":function(t,e){return t+e},"-":function(t,e){return t-e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},">":function(t,e){return t>e},"<":function(t,e){return t<e},"<=":function(t,e){return t<=e},">=":function(t,e){return t>=e},"==":function(t,e){return t==e},"!=":function(t,e){return t!=e},"===":function(t,e){return t===e},"!==":function(t,e){return t!==e},"&":function(t,e){return t&e},"|":function(t,e){return t|e},"^":function(t,e){return t^e},"<<":function(t,e){return t<<e},">>":function(t,e){return t>>e},">>>":function(t,e){return t>>>e}},oY={"+":function(t){return+t},"-":function(t){return-t},"~":function(t){return~t},"!":function(t){return!t}},uY=Array.prototype.slice,sY=function(t,e,n){var r=n?n(e[0]):e[0];return r[t].apply(r,uY.call(e,1))},lY={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},now:Date.now,utc:Date.UTC,datetime:function(t,e,n,r,i,a,o){return new Date(t,e||0,null!=n?n:1,r||0,i||0,a||0,o||0)},date:function(t){return new Date(t).getDate()},day:function(t){return new Date(t).getDay()},year:function(t){return new Date(t).getFullYear()},month:function(t){return new Date(t).getMonth()},hours:function(t){return new Date(t).getHours()},minutes:function(t){return new Date(t).getMinutes()},seconds:function(t){return new Date(t).getSeconds()},milliseconds:function(t){return new Date(t).getMilliseconds()},time:function(t){return new Date(t).getTime()},timezoneoffset:function(t){return new Date(t).getTimezoneOffset()},utcdate:function(t){return new Date(t).getUTCDate()},utcday:function(t){return new Date(t).getUTCDay()},utcyear:function(t){return new Date(t).getUTCFullYear()},utcmonth:function(t){return new Date(t).getUTCMonth()},utchours:function(t){return new Date(t).getUTCHours()},utcminutes:function(t){return new Date(t).getUTCMinutes()},utcseconds:function(t){return new Date(t).getUTCSeconds()},utcmilliseconds:function(t){return new Date(t).getUTCMilliseconds()},length:function(t){return t.length},join:function(){return sY("join",arguments)},indexof:function(){return sY("indexOf",arguments)},lastindexof:function(){return sY("lastIndexOf",arguments)},slice:function(){return sY("slice",arguments)},reverse:function(t){return t.slice().reverse()},parseFloat:parseFloat,parseInt:parseInt,upper:function(t){return String(t).toUpperCase()},lower:function(t){return String(t).toLowerCase()},substring:function(){return sY("substring",arguments,String)},split:function(){return sY("split",arguments,String)},replace:function(){return sY("replace",arguments,String)},trim:function(t){return String(t).trim()},regexp:RegExp,test:function(t,e){return RegExp(t).test(e)}},cY=["view","item","group","xy","x","y"],fY={Literal:function(t,e){return e.value},Identifier:function(t,e){var n=e.name;return t.memberDepth>0?n:"datum"===n?t.datum:"event"===n?t.event:"item"===n?t.item:iY[n]||t.params["$"+n]},MemberExpression:function(t,e){var n=!e.computed,r=t(e.object);n&&(t.memberDepth+=1);var i=t(e.property);return n&&(t.memberDepth-=1),r[i]},CallExpression:function(t,e){var n=e.arguments,r=e.callee.name;return r.startsWith("_")&&(r=r.slice(1)),"if"===r?t(n[0])?t(n[1]):t(n[2]):(t.fn[r]||lY[r]).apply(t.fn,n.map(t))},ArrayExpression:function(t,e){return e.elements.map(t)},BinaryExpression:function(t,e){return aY[e.operator](t(e.left),t(e.right))},UnaryExpression:function(t,e){return oY[e.operator](t(e.argument))},ConditionalExpression:function(t,e){return t(e.test)?t(e.consequent):t(e.alternate)},LogicalExpression:function(t,e){return"&&"===e.operator?t(e.left)&&t(e.right):t(e.left)||t(e.right)},ObjectExpression:function(t,e){return e.properties.reduce((function(e,n){t.memberDepth+=1;var r=t(n.key);return t.memberDepth-=1,e[r]=t(n.value),e}),{})}};function hY(t,e,n,r,i,a){var o=function t(e){return fY[e.type](t,e)};return o.memberDepth=0,o.fn=Object.create(e),o.params=n,o.datum=r,o.event=i,o.item=a,cY.forEach((function(t){return o.fn[t]=function(){var e;return(e=i.vega)[t].apply(e,arguments)}})),o(t)}var dY={operator:function(t,e){var n=e.ast,r=t.functions;return function(t){return hY(n,r,t)}},parameter:function(t,e){var n=e.ast,r=t.functions;return function(t,e){return hY(n,r,e,t)}},event:function(t,e){var n=e.ast,r=t.functions;return function(t){return hY(n,r,void 0,void 0,t)}},handler:function(t,e){var n=e.ast,r=t.functions;return function(t,e){var i=e.item&&e.item.datum;return hY(n,r,t,i,e)}},encode:function(t,e){var n=e.marktype,r=e.channels,i=t.functions,a="group"===n||"image"===n||"rect"===n;return function(t,e){var o,u=t.datum,s=0;for(var l in r)o=hY(r[l].ast,i,e,u,void 0,t),t[l]!==o&&(t[l]=o,s=1);return"rule"!==n&&function(t,e,n){var r;e.x2&&(e.x?(n&&t.x>t.x2&&(r=t.x,t.x=t.x2,t.x2=r),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),e.xc&&(t.x=t.xc-(t.width||0)/2),e.y2&&(e.y?(n&&t.y>t.y2&&(r=t.y,t.y=t.y2,t.y2=r),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),e.yc&&(t.y=t.yc-(t.height||0)/2)}(t,r,a),s}}},pY=n(53746),gY=n.n(pY),vY=n(2412),mY=n.n(vY),yY=n(16726),xY=n.n(yY);function bY(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return wY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wY(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function wY(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SY(t){return!!t.or}function kY(t){return!!t.and}function CY(t){return!!t.not}function EY(t,e){if(CY(t))EY(t.not,e);else if(kY(t)){var n,r=bY(t.and);try{for(r.s();!(n=r.n()).done;){EY(n.value,e)}}catch(o){r.e(o)}finally{r.f()}}else if(SY(t)){var i,a=bY(t.or);try{for(a.s();!(i=a.n()).done;){EY(i.value,e)}}catch(o){a.e(o)}finally{a.f()}}else e(t)}function MY(t,e){return CY(t)?{not:MY(t.not,e)}:kY(t)?{and:t.and.map((function(t){return MY(t,e)}))}:SY(t)?{or:t.or.map((function(t){return MY(t,e)}))}:e(t)}function OY(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return AY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AY(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function AY(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _Y=mY(),DY=gY();function TY(t){throw new Error(t)}function FY(t,e){var n,r={},i=OY(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;ru(t,a)&&(r[a]=t[a])}}catch(o){i.e(o)}finally{i.f()}return r}function IY(t,e){var n,r=Object.assign({},t),i=OY(e);try{for(i.s();!(n=i.n()).done;){delete r[n.value]}}catch(a){i.e(a)}finally{i.f()}return r}Set.prototype.toJSON=function(){return"Set(".concat((0,X.Z)(this).map((function(t){return xY()(t)})).join(","),")")};var PY=xY();function jY(t){if(hu(t))return t;var e=pu(t)?t:xY()(t);if(e.length<250)return e;for(var n=0,r=0;r<e.length;r++){n=(n<<5)-n+e.charCodeAt(r),n&=n}return n}function BY(t){return!1===t||null===t}function LY(t,e){return t.includes(e)}function RY(t,e){var n,r=0,i=OY(t.entries());try{for(i.s();!(n=i.n()).done;){var a=(0,W.Z)(n.value,2),o=a[0];if(e(a[1],o,r++))return!0}}catch(u){i.e(u)}finally{i.f()}return!1}function ZY(t,e){var n,r=0,i=OY(t.entries());try{for(i.s();!(n=i.n()).done;){var a=(0,W.Z)(n.value,2),o=a[0];if(!e(a[1],o,r++))return!1}}catch(u){i.e(u)}finally{i.f()}return!0}function NY(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];zY(t,null!=o?o:{})}return t}function zY(t,e){var n,r=OY(qY(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;So(t,i,e[i],!0)}}catch(a){r.e(a)}finally{r.f()}}function UY(t,e){var n,r,i=[],a={},o=OY(t);try{for(o.s();!(r=o.n()).done;){var u=r.value;(n=e(u))in a||(a[n]=1,i.push(u))}}catch(s){o.e(s)}finally{o.f()}return i}function HY(t,e){var n=qY(t),r=qY(e);if(n.length!==r.length)return!1;var i,a=OY(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t[o]!==e[o])return!1}}catch(u){a.e(u)}finally{a.f()}return!0}function WY(t,e){if(t.size!==e.size)return!1;var n,r=OY(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e.has(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}function VY(t,e){var n,r=OY(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.has(i))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}function GY(t){var e,n=new Set,r=OY(t);try{var i=function(){var t,r=no(e.value).map((function(t,e){return 0===e?t:"[".concat(t,"]")})),i=r.map((function(t,e){return r.slice(0,e+1).join("")})),a=OY(i);try{for(a.s();!(t=a.n()).done;){var o=t.value;n.add(o)}}catch(u){a.e(u)}finally{a.f()}};for(r.s();!(e=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n}function XY(t,e){return void 0===t||void 0===e||VY(GY(t),GY(e))}function YY(t){return 0===qY(t).length}var qY=Object.keys,$Y=Object.values,JY=Object.entries;function KY(t){return!0===t||!1===t}function QY(t){var e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function tq(t,e){return CY(t)?"!(".concat(tq(t.not,e),")"):kY(t)?"(".concat(t.and.map((function(t){return tq(t,e)})).join(") && ("),")"):SY(t)?"(".concat(t.or.map((function(t){return tq(t,e)})).join(") || ("),")"):e(t)}function eq(t,e){if(0===e.length)return!0;var n=e.shift();return n in t&&eq(t[n],e)&&delete t[n],YY(t)}function nq(t){return t.charAt(0).toUpperCase()+t.substr(1)}function rq(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",n=no(t),r=[],i=1;i<=n.length;i++){var a="[".concat(n.slice(0,i).map(Su).join("]["),"]");r.push("".concat(e).concat(a))}return r.join(" && ")}function iq(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum";return"".concat(e,"[").concat(Su(no(t).join(".")),"]")}function aq(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function oq(t){return"".concat(no(t).map(aq).join("\\."))}function uq(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function sq(t){return"".concat(no(t).join("."))}function lq(t){return t?no(t).length:0}function cq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var a=i[r];if(void 0!==a)return a}}var fq=42;function hq(t){var e=++fq;return t?String(t)+e:e}function dq(){fq=42}function pq(t){return gq(t)?t:"__".concat(t)}function gq(t){return t.startsWith("__")}function vq(t){if(void 0!==t)return(t%360+360)%360}function mq(t){return!!hu(t)||!isNaN(t)&&!isNaN(parseFloat(t))}var yq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},xq="row",bq="column",wq="facet",Sq="x",kq="y",Cq="x2",Eq="y2",Mq="xOffset",Oq="yOffset",Aq="radius",_q="radius2",Dq="theta",Tq="theta2",Fq="latitude",Iq="longitude",Pq="latitude2",jq="longitude2",Bq="color",Lq="fill",Rq="stroke",Zq="shape",Nq="size",zq="angle",Uq="opacity",Hq="fillOpacity",Wq="strokeOpacity",Vq="strokeWidth",Gq="strokeDash",Xq="text",Yq="order",qq="detail",$q="key",Jq="tooltip",Kq="href",Qq="url",t$="description",e$={theta:1,theta2:1,radius:1,radius2:1};function n$(t){return t in e$}var r$={longitude:1,longitude2:1,latitude:1,latitude2:1};var i$=qY(r$),a$=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),e$),r$),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function o$(t){return t===Bq||t===Lq||t===Rq}var u$={row:1,column:1,facet:1},s$=qY(u$),l$=Object.assign(Object.assign({},a$),u$),c$=qY(l$),f$=(l$.order,l$.detail,l$.tooltip,yq(l$,["order","detail","tooltip"])),h$=(f$.row,f$.column,f$.facet,yq(f$,["row","column","facet"]));qY(f$),qY(h$);function d$(t){return!!h$[t]}function p$(t){return!!l$[t]}var g$=[Cq,Eq,Pq,jq,Tq,_q];function v$(t){return m$(t)!==t}function m$(t){switch(t){case Cq:return Sq;case Eq:return kq;case Pq:return Fq;case jq:return Iq;case Tq:return Dq;case _q:return Aq}return t}function y$(t){if(n$(t))switch(t){case Dq:return"startAngle";case Tq:return"endAngle";case Aq:return"outerRadius";case _q:return"innerRadius"}return t}function x$(t){switch(t){case Sq:return Cq;case kq:return Eq;case Fq:return Pq;case Iq:return jq;case Dq:return Tq;case Aq:return _q}}function b$(t){switch(t){case Sq:case Cq:return"width";case kq:case Eq:return"height"}}function w$(t){switch(t){case Sq:return"xOffset";case kq:return"yOffset"}}function S$(t){switch(t){case"xOffset":return"x";case"yOffset":return"y"}}var k$=qY(a$),C$=(a$.x,a$.y,a$.x2,a$.y2,a$.xOffset,a$.yOffset,a$.latitude,a$.longitude,a$.latitude2,a$.longitude2,a$.theta,a$.theta2,a$.radius,a$.radius2,yq(a$,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"])),E$=qY(C$),M$={x:1,y:1},O$=qY(M$);function A$(t){return t in M$}var _$={theta:1,radius:1},D$=qY(_$);function T$(t){return"width"===t?Sq:kq}var F$={xOffset:1,yOffset:1};qY(F$);function I$(t){return t in F$}C$.text,C$.tooltip,C$.href,C$.url,C$.description,C$.detail,C$.key,C$.order;var P$=yq(C$,["text","tooltip","href","url","description","detail","key","order"]),j$=qY(P$);var B$=Object.assign(Object.assign(Object.assign(Object.assign({},M$),_$),F$),P$),L$=qY(B$);function R$(t){return!!B$[t]}function Z$(t,e){return function(t){switch(t){case Bq:case Lq:case Rq:case t$:case qq:case $q:case Jq:case Kq:case Yq:case Uq:case Hq:case Wq:case Vq:case wq:case xq:case bq:return N$;case Sq:case kq:case Mq:case Oq:case Fq:case Iq:return z$;case Cq:case Eq:case Pq:case jq:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Nq:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Gq:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Zq:return{point:"always",geoshape:"always"};case Xq:return{text:"always"};case zq:return{point:"always",square:"always",text:"always"};case Qq:return{image:"always"};case Dq:case Aq:return{text:"always",arc:"always"};case Tq:case _q:return{arc:"always"}}}(t)[e]}var N$={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},z$=yq(N$,["geoshape"]);function U$(t){switch(t){case Sq:case kq:case Dq:case Aq:case Mq:case Oq:case Nq:case zq:case Vq:case Uq:case Hq:case Wq:case Cq:case Eq:case Tq:case _q:return;case wq:case xq:case bq:case Zq:case Gq:case Xq:case Jq:case Kq:case Qq:case t$:return"discrete";case Bq:case Lq:case Rq:return"flexible";case Fq:case Iq:case Pq:case jq:case qq:case $q:case Yq:return}}var H$={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},W$={count:1,min:1,max:1};function V$(t){return!!t&&!!t.argmin}function G$(t){return!!t&&!!t.argmax}function X$(t){return pu(t)&&!!H$[t]}var Y$=new Set(["count","valid","missing","distinct"]);function q$(t){return pu(t)&&Y$.has(t)}var $$=new Set(["count","sum","distinct","valid","missing"]),J$=new Set(["mean","average","median","q1","q3","min","max"]);function K$(t){return lu(t)&&(t=T1(t,void 0)),"bin"+qY(t).map((function(e){return nJ(t[e])?QY("_".concat(e,"_").concat(JY(t[e]))):QY("_".concat(e,"_").concat(t[e]))})).join("")}function Q$(t){return!0===t||eJ(t)&&!t.binned}function tJ(t){return"binned"===t||eJ(t)&&!0===t.binned}function eJ(t){return xo(t)}function nJ(t){return null==t?void 0:t.param}function rJ(t){switch(t){case xq:case bq:case Nq:case Bq:case Lq:case Rq:case Vq:case Uq:case Hq:case Wq:case Zq:return 6;case Gq:return 4;default:return 10}}function iJ(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return aJ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aJ(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function aJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oJ(t){return!!(null==t?void 0:t.expr)}function uJ(t){var e,n={},r=iJ(qY(t||{}));try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i]=wJ(t[i])}}catch(a){r.e(a)}finally{r.f()}return n}var sJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function lJ(t){var e=t.anchor,n=t.frame,r=t.offset,i=t.orient,a=t.angle,o=t.limit,u=t.color,s=t.subtitleColor,l=t.subtitleFont,c=t.subtitleFontSize,f=t.subtitleFontStyle,h=t.subtitleFontWeight,d=t.subtitleLineHeight,p=t.subtitlePadding,g=sJ(t,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),v=Object.assign(Object.assign({},g),u?{fill:u}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e?{anchor:e}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),void 0!==a?{angle:a}:{}),void 0!==o?{limit:o}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s?{subtitleColor:s}:{}),l?{subtitleFont:l}:{}),c?{subtitleFontSize:c}:{}),f?{subtitleFontStyle:f}:{}),h?{subtitleFontWeight:h}:{}),d?{subtitleLineHeight:d}:{}),p?{subtitlePadding:p}:{});return{titleMarkConfig:v,subtitleMarkConfig:FY(t,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:m,subtitle:y}}function cJ(t){return pu(t)||yo(t)&&pu(t[0])}function fJ(t){return!!(null==t?void 0:t.signal)}function hJ(t){return!!t.step}function dJ(t){return!yo(t)&&("field"in t&&"data"in t)}var pJ=qY({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),gJ={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},vJ=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function mJ(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return yJ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yJ(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function yJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var xJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function bJ(t){var e=yo(t.condition)?t.condition.map(SJ):SJ(t.condition);return Object.assign(Object.assign({},wJ(t)),{condition:e})}function wJ(t){if(oJ(t)){var e=t.expr,n=xJ(t,["expr"]);return Object.assign({signal:e},n)}return t}function SJ(t){if(oJ(t)){var e=t.expr,n=xJ(t,["expr"]);return Object.assign({signal:e},n)}return t}function kJ(t){if(oJ(t)){var e=t.expr,n=xJ(t,["expr"]);return Object.assign({signal:e},n)}return fJ(t)?t:void 0!==t?{value:t}:void 0}function CJ(t){return fJ(t)?t.signal:Su(t)}function EJ(t){return fJ(t)?t.signal:Su(t.value)}function MJ(t){return fJ(t)?t.signal:null==t?null:Su(t)}function OJ(t){var e;return[].concat(t.type,null!==(e=t.style)&&void 0!==e?e:[])}function AJ(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.vgChannel,a=r.ignoreVgConfig;return i&&void 0!==e[i]?e[i]:void 0!==e[t]?e[t]:!a||i&&i!==t?_J(t,e,n,r):void 0}function _J(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.vgChannel;return cq(i?DJ(t,e,n.style):void 0,DJ(t,e,n.style),i?n[e.type][i]:void 0,n[e.type][t],i?n.mark[i]:n.mark[t])}function DJ(t,e,n){return TJ(t,OJ(e),n)}function TJ(t,e,n){var r,i,a=mJ(e=Ho(e));try{for(a.s();!(i=a.n()).done;){var o=n[i.value];o&&void 0!==o[t]&&(r=o[t])}}catch(u){a.e(u)}finally{a.f()}return r}function FJ(t,e){return Ho(t).reduce((function(t,n){var r;return t.field.push(p1(n,e)),t.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),t}),{field:[],order:[]})}function IJ(t,e){var n=(0,X.Z)(t);return e.forEach((function(t){var e,r=mJ(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(_Y(i,t))return}}catch(a){r.e(a)}finally{r.f()}n.push(t)})),n}function PJ(t,e){return _Y(t,e)||!e?t:t?[].concat((0,X.Z)(Ho(t)),(0,X.Z)(Ho(e))).join(", "):e}function jJ(t,e){var n=t.value,r=e.value;if(null==n||null===r)return{explicit:t.explicit,value:null};if((cJ(n)||fJ(n))&&(cJ(r)||fJ(r)))return{explicit:t.explicit,value:PJ(n,r)};if(cJ(n)||fJ(n))return{explicit:t.explicit,value:n};if(cJ(r)||fJ(r))return{explicit:t.explicit,value:r};if(!(cJ(n)||fJ(n)||cJ(r)||fJ(r)))return{explicit:t.explicit,value:IJ(n,r)};throw new Error("It should never reach here")}function BJ(t){return"Invalid specification ".concat(PY(t),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}var LJ='Autosize "fit" only works for single views and layered views.';function RJ(t){return"".concat("width"==t?"Width":"Height",' "container" only works for single views and layered views.')}function ZJ(t){var e="width"==t?"x":"y";return"".concat("width"==t?"Width":"Height",' "container" only works well with autosize "fit" or "fit-').concat(e,'".')}function NJ(t){return t?'Dropping "fit-'.concat(t,'" because spec has discrete ').concat(b$(t),"."):'Dropping "fit" because spec has discrete size.'}function zJ(t){return"Unknown field for ".concat(t,". Cannot calculate view size.")}function UJ(t){return'Cannot project a selection on encoding channel "'.concat(t,'", which has no field.')}function HJ(t,e){return'Cannot project a selection on encoding channel "'.concat(t,'" as it uses an aggregate function ("').concat(e,'").')}function WJ(t){return"Selection not supported for ".concat(t," yet.")}var VJ="The same selection must be used to override scale domains in a layered view.";function GJ(t){return'The "columns" property cannot be used when "'.concat(t,'" has nested row/column.')}function XJ(t,e,n){return'An ancestor parsed field "'.concat(t,'" as ').concat(n," but a child wants to parse the field as ").concat(e,".")}function YJ(t){return"Ignoring an invalid transform: ".concat(PY(t),".")}function qJ(t){return"Config.customFormatTypes is not true, thus custom format type and format for channel ".concat(t," are dropped.")}function $J(t,e,n){return"Channel ".concat(t," is a ").concat(e,". Converted to {value: ").concat(PY(n),"}.")}function JJ(t){return'Invalid field type "'.concat(t,'".')}function KJ(t,e){return'Invalid field type "'.concat(t,'" for aggregate: "').concat(e,'", using "quantitative" instead.')}function QJ(t){return'Invalid aggregation operator "'.concat(t,'".')}function tK(t,e){var n=e.fill,r=e.stroke;return"Dropping color ".concat(t," as the plot also has ").concat(n&&r?"fill and stroke":n?"fill":"stroke",".")}function eK(t,e){return"Dropping ".concat(PY(t),' from channel "').concat(e,'" since it does not contain any data field, datum, value, or signal.')}function nK(t,e,n){return"".concat(t,' dropped as it is incompatible with "').concat(e,'"').concat(n?" when ".concat(n):"",".")}function rK(t){return"".concat(t," encoding has no scale, so specified scale is ignored.")}function iK(t){return"".concat(t," encoding should be discrete (ordinal / nominal / binned).")}function aK(t){return"".concat(t," encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).")}function oK(t,e){return'Using discrete channel "'.concat(t,'" to encode "').concat(e,'" field can be misleading as it does not encode ').concat("ordinal"===e?"order":"magnitude",".")}function uK(t){return"The ".concat(t," for range marks cannot be an expression")}function sK(t){return"Using unaggregated domain with raw field has no effect (".concat(PY(t),").")}function lK(t){return'Unaggregated domain not applicable for "'.concat(t,'" since it produces values outside the origin domain of the source data.')}function cK(t){return"Unaggregated domain is currently unsupported for log scale (".concat(PY(t),").")}function fK(t,e,n){return'Channel "'.concat(t,'" does not work with "').concat(e,'" scale. We are using "').concat(n,'" scale instead.')}function hK(t,e){return'FieldDef does not work with "'.concat(t,'" scale. We are using "').concat(e,'" scale instead.')}function dK(t,e,n){return"".concat(n,"-scale's \"").concat(e,'" is dropped as it does not work with ').concat(t," scale.")}function pK(t){return'The step for "'.concat(t,'" is dropped because the ').concat("width"===t?"x":"y"," is continuous.")}var gK="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function vK(t,e){return"Invalid ".concat(t,": ").concat(PY(e),".")}function mK(t){return"1D error band does not support ".concat(t,".")}function yK(t){return"Channel ".concat(t,' is required for "binned" bin.')}function xK(t){return"Channel ".concat(t,' should not be used with "binned" bin.')}var bK=mo(po),wK=bK;function SK(t){return wK=t}function kK(){return wK=bK}function CK(){var t;(t=wK).warn.apply(t,arguments)}function EK(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return MK(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MK(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function MK(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OK(t){if(t&&xo(t)){var e,n=EK(NK);try{for(n.s();!(e=n.n()).done;){if(e.value in t)return!0}}catch(r){n.e(r)}finally{n.f()}}return!1}new WeakMap;var AK=["january","february","march","april","may","june","july","august","september","october","november","december"],_K=AK.map((function(t){return t.substr(0,3)})),DK=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],TK=DK.map((function(t){return t.substr(0,3)}));function FK(t,e){var n=[];if(e&&void 0!==t.day&&qY(t).length>1&&(CK(function(t){return"Dropping day from datetime ".concat(PY(t)," as day cannot be combined with other units.")}(t)),delete(t=DY(t)).day),void 0!==t.year?n.push(t.year):n.push(2012),void 0!==t.month){var r=e?function(t){if(mq(t)&&(t=+t),hu(t))return t-1;var e=t.toLowerCase(),n=AK.indexOf(e);if(-1!==n)return n;var r=e.substr(0,3),i=_K.indexOf(r);if(-1!==i)return i;throw new Error(vK("month",t))}(t.month):t.month;n.push(r)}else if(void 0!==t.quarter){var i=e?function(t){if(mq(t)&&(t=+t),hu(t))return t>4&&CK(vK("quarter",t)),t-1;throw new Error(vK("quarter",t))}(t.quarter):t.quarter;n.push(hu(i)?3*i:"".concat(i,"*3"))}else n.push(0);if(void 0!==t.date)n.push(t.date);else if(void 0!==t.day){var a=e?function(t){if(mq(t)&&(t=+t),hu(t))return t%7;var e=t.toLowerCase(),n=DK.indexOf(e);if(-1!==n)return n;var r=e.substr(0,3),i=TK.indexOf(r);if(-1!==i)return i;throw new Error(vK("day",t))}(t.day):t.day;n.push(hu(a)?a+1:"".concat(a,"+1"))}else n.push(1);for(var o=0,u=["hours","minutes","seconds","milliseconds"];o<u.length;o++){var s=t[u[o]];n.push(void 0===s?0:s)}return n}function IK(t){var e=FK(t,!0).join(", ");return t.utc?"utc(".concat(e,")"):"datetime(".concat(e,")")}function PK(t){var e=FK(t,!1).join(", ");return t.utc?"utc(".concat(e,")"):"datetime(".concat(e,")")}function jK(t){var e=FK(t,!0);return t.utc?+new Date(Date.UTC.apply(Date,(0,X.Z)(e))):+pw(Date,(0,X.Z)(e))}function BK(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return LK(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LK(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function LK(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var RK=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},ZK={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},NK=qY(ZK);function zK(t){return t.startsWith("utc")}var UK={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function HK(t){return NK.filter((function(e){return WK(t,e)}))}function WK(t,e){var n=t.indexOf(e);return!(n<0)&&(!(n>0&&"seconds"===e&&"i"===t.charAt(n-1))&&(!(t.length>n+3&&"day"===e&&"o"===t.charAt(n+3))&&!(n>0&&"year"===e&&"f"===t.charAt(n-1))))}function VK(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{end:!1},i=r.end,a=rq(e),o=zK(t)?"utc":"";function u(t){return"quarter"===t?"(".concat(o,"quarter(").concat(a,")-1)"):"".concat(o).concat(t,"(").concat(a,")")}var s,l={},c=BK(NK);try{for(c.s();!(s=c.n()).done;){var f=s.value;WK(t,f)&&(l[f]=u(f),n=f)}}catch(h){c.e(h)}finally{c.f()}return i&&(l[n]+="+1"),PK(l)}function GK(t){if(t){var e=HK(t);return"timeUnitSpecifier(".concat(PY(e),", ").concat(PY(UK),")")}}function XK(t){var e;if(t)return pu(t)?e={unit:t}:xo(t)&&(e=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),zK(e.unit)&&(e.utc=!0,e.unit=function(t){return t.substr(3)}(e.unit)),e}function YK(t){var e=XK(t),n=e.utc,r=RK(e,["utc"]);return r.unit?(n?"utc":"")+qY(r).map((function(t){return QY("".concat("unit"===t?"":"_".concat(t,"_")).concat(r[t]))})).join(""):(n?"utc":"")+"timeunit"+qY(r).map((function(t){return QY("_".concat(t,"_").concat(r[t]))})).join("")}function qK(t){return!!(null==t?void 0:t.field)&&void 0!==t.equal}function $K(t){return!!(null==t?void 0:t.field)&&void 0!==t.lt}function JK(t){return!!(null==t?void 0:t.field)&&void 0!==t.lte}function KK(t){return!!(null==t?void 0:t.field)&&void 0!==t.gt}function QK(t){return!!(null==t?void 0:t.field)&&void 0!==t.gte}function tQ(t){if(null==t?void 0:t.field){if(yo(t.range)&&2===t.range.length)return!0;if(fJ(t.range))return!0}return!1}function eQ(t){return!!(null==t?void 0:t.field)&&(yo(t.oneOf)||yo(t.in))}function nQ(t){return!!(null==t?void 0:t.field)&&void 0!==t.valid}function rQ(t){return eQ(t)||qK(t)||tQ(t)||$K(t)||KK(t)||JK(t)||QK(t)}function iQ(t,e){return j1(t,{timeUnit:e,wrapTime:!0})}function aQ(t,e){return t.map((function(t){return iQ(t,e)}))}function oQ(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.field,i=null===(e=XK(t.timeUnit))||void 0===e?void 0:e.unit,a=i?"time(".concat(VK(i,r),")"):p1(t,{expr:"datum"});if(qK(t))return"".concat(a,"===").concat(iQ(t.equal,i));if($K(t)){var o=t.lt;return"".concat(a,"<").concat(iQ(o,i))}if(KK(t)){var u=t.gt;return"".concat(a,">").concat(iQ(u,i))}if(JK(t)){var s=t.lte;return"".concat(a,"<=").concat(iQ(s,i))}if(QK(t)){var l=t.gte;return"".concat(a,">=").concat(iQ(l,i))}if(eQ(t))return"indexof([".concat(aQ(t.oneOf,i).join(","),"], ").concat(a,") !== -1");if(nQ(t))return uQ(a,t.valid);if(tQ(t)){var c=t.range,f=fJ(c)?{signal:"".concat(c.signal,"[0]")}:c[0],h=fJ(c)?{signal:"".concat(c.signal,"[1]")}:c[1];if(null!==f&&null!==h&&n)return"inrange("+a+", ["+iQ(f,i)+", "+iQ(h,i)+"])";var d=[];return null!==f&&d.push("".concat(a," >= ").concat(iQ(f,i))),null!==h&&d.push("".concat(a," <= ").concat(iQ(h,i))),d.length>0?d.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(PY(t)))}function uQ(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?"isValid(".concat(t,") && isFinite(+").concat(t,")"):"!isValid(".concat(t,") || !isFinite(+").concat(t,")")}function sQ(t){var e;return rQ(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:null===(e=XK(t.timeUnit))||void 0===e?void 0:e.unit}):t}var lQ={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function cQ(t){return"ordinal"===t||"nominal"===t}var fQ=lQ.quantitative,hQ=lQ.ordinal,dQ=lQ.temporal,pQ=lQ.nominal,gQ=lQ.geojson;qY(lQ);function vQ(t){if(t)switch(t=t.toLowerCase()){case"q":case fQ:return"quantitative";case"t":case dQ:return"temporal";case"o":case hQ:return"ordinal";case"n":case pQ:return"nominal";case gQ:return"geojson"}}var mQ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},yQ="linear",xQ="log",bQ="time",wQ="utc",SQ="point",kQ="band",CQ={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};qY(CQ);function EQ(t,e){var n=CQ[t],r=CQ[e];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}var MQ={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function OQ(t){return MQ[t]}var AQ=new Set(["linear","log","pow","sqrt","symlog"]),_Q=new Set([].concat((0,X.Z)(AQ),["time","utc"]));function DQ(t){return AQ.has(t)}var TQ=new Set(["quantile","quantize","threshold"]),FQ=new Set([].concat((0,X.Z)(_Q),(0,X.Z)(TQ),["sequential","identity"])),IQ=new Set(["ordinal","bin-ordinal","point","band"]);new Set(["time","utc"]);function PQ(t){return IQ.has(t)}function jQ(t){return FQ.has(t)}function BQ(t){return _Q.has(t)}function LQ(t){return TQ.has(t)}function RQ(t){return null==t?void 0:t.param}var ZQ={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},NQ=(qY(ZQ),mQ(ZQ,["type","domain","range","rangeMax","rangeMin","scheme"])),zQ=qY(NQ);function UQ(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return BQ(t)||"band"===t||"point"===t;case"padding":case"rangeMin":case"rangeMax":return BQ(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return"band"===t;case"domainMax":case"domainMid":case"domainMin":case"clamp":return BQ(t);case"nice":return BQ(t)||"quantize"===t||"threshold"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"constant":return"symlog"===t;case"zero":return jQ(t)&&!LY(["log","time","utc","threshold","quantile"],t)}}function HQ(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return o$(t)?void 0:'Cannot use the scale property "'.concat(e,'" with non-color channel.');case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function WQ(t,e){return LY([hQ,pQ],e)?void 0===t||PQ(t):e===dQ?LY([bQ,wQ,void 0],t):e!==fQ||(DQ(t)||LQ(t)||void 0===t)}function VQ(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!R$(t))return!1;switch(t){case Sq:case kq:case Mq:case Oq:case Dq:case Aq:return!!BQ(e)||("band"===e||"point"===e&&!n);case Nq:case Vq:case Uq:case Hq:case Wq:case zq:return BQ(e)||LQ(e)||LY(["band","point","ordinal"],e);case Bq:case Lq:case Rq:return"band"!==e;case Gq:case Zq:return"ordinal"===e||LQ(e)}}var GQ={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},XQ=GQ.arc,YQ=GQ.area,qQ=GQ.bar,$Q=GQ.image,JQ=GQ.line,KQ=GQ.point,QQ=GQ.rect,t0=GQ.rule,e0=GQ.text,n0=GQ.tick,r0=GQ.trail,i0=GQ.circle,a0=GQ.square,o0=GQ.geoshape;function u0(t){return["line","area","trail"].includes(t)}function s0(t){return["rect","bar","image","arc"].includes(t)}var l0=new Set(qY(GQ));function c0(t){return t.type}var f0=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),h0=qY({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),d0=qY({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function p0(t){return t&&null!=t.band}var g0={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},v0={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},m0={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function y0(t){var e=t.channel,n=t.channelDef,r=t.markDef,i=t.scale,a=t.config,o=k0(t);return t1(n)&&!q$(n.aggregate)&&i&&BQ(i.get("type"))?function(t){var e=t.fieldDef,n=t.channel,r=t.markDef,i=t.ref,a=t.config;if(u0(r.type))return i;var o=AJ("invalid",r,a);if(null===o)return[x0(e,n),i];return i}({fieldDef:n,channel:e,markDef:r,ref:o,config:a}):o}function x0(t,e){var n=b0(t,!0),r="y"===m$(e)?{field:{group:"height"}}:{value:0};return Object.assign({test:n},r)}function b0(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return uQ(pu(t)?t:p1(t,{expr:"datum"}),!e)}function w0(t,e,n,r){var i={};if(e&&(i.scale=e),n1(t)){var a=t.datum;OK(a)?i.signal=IK(a):fJ(a)?i.signal=a.signal:oJ(a)?i.signal=a.expr:i.value=a}else i.field=p1(t,n);if(r){var o=r.offset,u=r.band;o&&(i.offset=o),u&&(i.band=u)}return i}function S0(t){var e=t.scaleName,n=t.fieldOrDatumDef,r=t.fieldOrDatumDef2,i=t.offset,a=t.startSuffix,o=t.bandPosition,u=void 0===o?.5:o,s=0<u&&u<1?"datum":void 0,l=p1(n,{expr:s,suffix:a}),c=void 0!==r?p1(r,{expr:s}):p1(n,{suffix:"end",expr:s}),f={};if(0===u||1===u){f.scale=e;var h=0===u?l:c;f.field=h}else{var d=fJ(u)?"".concat(u.signal," * ").concat(l," + (1-").concat(u.signal,") * ").concat(c):"".concat(u," * ").concat(l," + ").concat(1-u," * ").concat(c);f.signal='scale("'.concat(e,'", ').concat(d,")")}return i&&(f.offset=i),f}function k0(t){var e,n=t.channel,r=t.channelDef,i=t.channel2Def,a=t.markDef,o=t.config,u=t.scaleName,s=t.scale,l=t.stack,c=t.offset,f=t.defaultRef,h=t.bandPosition;if(r){if(a1(r)){var d=null==s?void 0:s.get("type");if(o1(r)){null!=h||(h=Y0({fieldDef:r,fieldDef2:i,markDef:a,config:o}));var p=r.bin,g=r.timeUnit,v=r.type;if(Q$(p)||h&&g&&v===dQ)return(null==l?void 0:l.impute)?w0(r,u,{binSuffix:"mid"},{offset:c}):h&&!PQ(d)?S0({scaleName:u,fieldOrDatumDef:r,bandPosition:h,offset:c}):w0(r,u,L1(r,n)?{binSuffix:"range"}:{},{offset:c});if(tJ(p)){if(t1(i))return S0({scaleName:u,fieldOrDatumDef:r,fieldOrDatumDef2:i,bandPosition:h,offset:c});CK(yK(n===Sq?Cq:Eq))}}return w0(r,u,PQ(d)?{binSuffix:"range"}:{},{offset:c,band:"band"===d?null!==(e=null!=h?h:r.bandPosition)&&void 0!==e?e:.5:void 0})}if(u1(r)){var m=r.value,y=c?{offset:c}:{};return Object.assign(Object.assign({},C0(n,m)),y)}}return Vo(f)&&(f=f()),f?Object.assign(Object.assign({},f),c?{offset:c}:{}):f}function C0(t,e){return LY(["x","x2"],t)&&"width"===e?{field:{group:"width"}}:LY(["y","y2"],t)&&"height"===e?{field:{group:"height"}}:kJ(e)}function E0(t){return t&&"number"!==t&&"time"!==t}function M0(t,e,n){return"".concat(t,"(").concat(e).concat(n?", ".concat(PY(n)):"",")")}function O0(t){var e,n,r=t.fieldOrDatumDef,i=t.format,a=t.formatType,o=t.expr,u=t.normalizeStack,s=t.config;if(E0(a))return _0({fieldOrDatumDef:r,format:i,formatType:a,expr:o,config:s});var l=A0(r,o,u),c=e1(r);if(void 0===i&&void 0===a&&s.customFormatTypes){if("quantitative"===c){if(u&&s.normalizedNumberFormatType)return _0({fieldOrDatumDef:r,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:o,config:s});if(s.numberFormatType)return _0({fieldOrDatumDef:r,format:s.numberFormat,formatType:s.numberFormatType,expr:o,config:s})}if("temporal"===c&&s.timeFormatType&&t1(r)&&void 0===r.timeUnit)return _0({fieldOrDatumDef:r,format:s.timeFormat,formatType:s.timeFormatType,expr:o,config:s})}if(P1(r)){var f=function(t){var e=t.field,n=t.timeUnit,r=t.format,i=t.formatType,a=t.rawTimeFormat,o=t.isUTCScale;return!n||r?!n&&i?"".concat(i,"(").concat(e,", '").concat(r,"')"):(r=pu(r)?r:a,"".concat(o?"utc":"time","Format(").concat(e,", '").concat(r,"')")):function(t,e,n){if(t){var r=GK(t),i=n||zK(t);return"".concat(i?"utc":"time","Format(").concat(e,", ").concat(r,")")}}(n,e,o)}({field:l,timeUnit:t1(r)?null===(e=XK(r.timeUnit))||void 0===e?void 0:e.unit:void 0,format:i,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:s1(r)&&(null===(n=r.scale)||void 0===n?void 0:n.type)===wQ});return f?{signal:f}:void 0}return i=F0({type:c,specifiedFormat:i,config:s,normalizeStack:u}),t1(r)&&Q$(r.bin)?{signal:j0(l,p1(r,{expr:o,binSuffix:"end"}),i,a,s)}:i||"quantitative"===e1(r)?{signal:"".concat(I0(l,i))}:{signal:"isValid(".concat(l,") ? ").concat(l,' : ""+').concat(l)}}function A0(t,e,n){return t1(t)?n?"".concat(p1(t,{expr:e,suffix:"end"}),"-").concat(p1(t,{expr:e,suffix:"start"})):p1(t,{expr:e}):function(t){var e=t.datum;return OK(e)?IK(e):"".concat(PY(e))}(t)}function _0(t){var e=t.fieldOrDatumDef,n=t.format,r=t.formatType,i=t.expr,a=t.normalizeStack,o=t.config,u=t.field;return null!=u||(u=A0(e,i,a)),"datum.value"!==u&&t1(e)&&Q$(e.bin)?{signal:j0(u,p1(e,{expr:i,binSuffix:"end"}),n,r,o)}:{signal:M0(r,u,n)}}function D0(t,e,n,r,i,a){var o;if(!E0(r)){if(void 0===n&&void 0===r&&i.customFormatTypes&&"quantitative"===e1(t)){if(i.normalizedNumberFormatType&&l1(t)&&"normalize"===t.stack)return;if(i.numberFormatType)return}if(l1(t)&&"normalize"===t.stack&&i.normalizedNumberFormat)return F0({type:"quantitative",config:i,normalizeStack:!0});if(P1(t)){var u=t1(t)?null===(o=XK(t.timeUnit))||void 0===o?void 0:o.unit:void 0;if(void 0===u&&i.customFormatTypes&&i.timeFormatType)return;return function(t){var e=t.specifiedFormat,n=t.timeUnit,r=t.config,i=t.omitTimeFormatConfig;if(e)return e;if(n)return{signal:GK(n)};return i?void 0:r.timeFormat}({specifiedFormat:n,timeUnit:u,config:i,omitTimeFormatConfig:a})}return F0({type:e,specifiedFormat:n,config:i})}}function T0(t,e,n){var r;return t&&(fJ(t)||"number"===t||"time"===t)?t:P1(e)&&"time"!==n&&"utc"!==n?t1(e)&&(null===(r=XK(null==e?void 0:e.timeUnit))||void 0===r?void 0:r.utc)?"utc":"time":void 0}function F0(t){var e=t.type,n=t.specifiedFormat,r=t.config,i=t.normalizeStack;return pu(n)?n:e===fQ?i?r.normalizedNumberFormat:r.numberFormat:void 0}function I0(t,e){return"format(".concat(t,', "').concat(e||"",'")')}function P0(t,e,n,r){var i;return E0(n)?M0(n,t,e):I0(t,null!==(i=pu(e)?e:void 0)&&void 0!==i?i:r.numberFormat)}function j0(t,e,n,r,i){if(void 0===n&&void 0===r&&i.customFormatTypes&&i.numberFormatType)return j0(t,e,i.numberFormat,i.numberFormatType,i);var a=P0(t,n,r,i),o=P0(e,n,r,i);return"".concat(uQ(t,!1),' ? "null" : ').concat(a,' + "').concat(" – ",'" + ').concat(o)}var B0="min",L0={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function R0(t){return t in L0}function Z0(t){return!!(null==t?void 0:t.encoding)}function N0(t){return t&&("count"===t.op||!!t.field)}function z0(t){return t&&yo(t)}function U0(t){return"row"in t||"column"in t}function H0(t){return!!t&&"header"in t}function W0(t){return"facet"in t}var V0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function G0(t){var e=t.field,n=t.timeUnit,r=t.bin,i=t.aggregate;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:e})}function X0(t){return"sort"in t}function Y0(t){var e=t.fieldDef,n=t.fieldDef2,r=t.markDef,i=t.config;if(a1(e)&&void 0!==e.bandPosition)return e.bandPosition;if(t1(e)){var a=e.timeUnit,o=e.bin;if(a&&!n)return s0(r.type)?0:_J("timeUnitBandPosition",r,i);if(Q$(o))return.5}}function q0(t){var e,n,r,i=t.channel,a=t.fieldDef,o=t.fieldDef2,u=t.markDef,s=t.config,l=t.scaleType,c=t.useVlSizeChannel,f=b$(i),h=AJ(c?"size":f,u,s,{vgChannel:f});if(void 0!==h)return h;if(t1(a)){var d=a.timeUnit,p=a.bin;if(d&&!o)return{band:_J("timeUnitBandSize",u,s)};if(Q$(p)&&!PQ(l))return{band:1}}return s0(u.type)?l?PQ(l)?(null===(e=s[u.type])||void 0===e?void 0:e.discreteBandSize)||{band:1}:null===(n=s[u.type])||void 0===n?void 0:n.continuousBandSize:null===(r=s[u.type])||void 0===r?void 0:r.discreteBandSize:void 0}function $0(t,e,n,r){return!!(Q$(t.bin)||t.timeUnit&&o1(t)&&"temporal"===t.type)&&void 0!==Y0({fieldDef:t,fieldDef2:e,markDef:n,config:r})}function J0(t){return t&&"condition"in t}function K0(t){var e=null==t?void 0:t.condition;return!!e&&!yo(e)&&t1(e)}function Q0(t){var e=null==t?void 0:t.condition;return!!e&&!yo(e)&&a1(e)}function t1(t){return t&&(!!t.field||"count"===t.aggregate)}function e1(t){return null==t?void 0:t.type}function n1(t){return t&&"datum"in t}function r1(t){return o1(t)&&!g1(t)||i1(t)}function i1(t){return n1(t)&&hu(t.datum)}function a1(t){return t1(t)||n1(t)}function o1(t){return t&&("field"in t||"count"===t.aggregate)&&"type"in t}function u1(t){return t&&"value"in t&&"value"in t}function s1(t){return t&&("scale"in t||"sort"in t)}function l1(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function c1(t){return t&&"legend"in t}function f1(t){return t&&("format"in t||"formatType"in t)}function h1(t){return IY(t,["legend","axis","header","scale"])}function d1(t){return"op"in t}function p1(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.field,o=i.prefix,u=i.suffix,s="";if(v1(t))a=pq("count");else{var l;if(!i.nofn)if(d1(t))l=t.op;else{var c=t.bin,f=t.aggregate,h=t.timeUnit;Q$(c)?(l=K$(c),u=(null!==(e=i.binSuffix)&&void 0!==e?e:"")+(null!==(n=i.suffix)&&void 0!==n?n:"")):f?G$(f)?(s='["'.concat(a,'"]'),a="argmax_".concat(f.argmax)):V$(f)?(s='["'.concat(a,'"]'),a="argmin_".concat(f.argmin)):l=String(f):h&&(l=YK(h),u=(!["range","mid"].includes(i.binSuffix)&&i.binSuffix||"")+(null!==(r=i.suffix)&&void 0!==r?r:""))}l&&(a=a?"".concat(l,"_").concat(a):l)}return u&&(a="".concat(a,"_").concat(u)),o&&(a="".concat(o,"_").concat(a)),i.forAs?sq(a):i.expr?iq(a,i.expr)+s:oq(a)+s}function g1(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return t1(t)&&!!t.bin;case"temporal":return!1}throw new Error(JJ(t.type))}function v1(t){return"count"===t.aggregate}var m1=function(t,e){switch(e.fieldTitle){case"plain":return t.field;case"functional":return function(t){var e=t.aggregate,n=t.bin,r=t.timeUnit,i=t.field;if(G$(e))return"".concat(i," for argmax(").concat(e.argmax,")");if(V$(e))return"".concat(i," for argmin(").concat(e.argmin,")");var a=XK(r),o=e||(null==a?void 0:a.unit)||(null==a?void 0:a.maxbins)&&"timeunit"||Q$(n)&&"bin";return o?"".concat(o.toUpperCase(),"(").concat(i,")"):i}(t);default:return function(t,e){var n,r=t.field,i=t.bin,a=t.timeUnit,o=t.aggregate;if("count"===o)return e.countTitle;if(Q$(i))return"".concat(r," (binned)");if(a){var u=null===(n=XK(a))||void 0===n?void 0:n.unit;if(u)return"".concat(r," (").concat(HK(u).join("-"),")")}else if(o)return G$(o)?"".concat(r," for max ").concat(o.argmax):V$(o)?"".concat(r," for min ").concat(o.argmin):"".concat(nq(o)," of ").concat(r);return r}(t,e)}},y1=m1;function x1(t){y1=t}function b1(){x1(m1)}function w1(t,e,n){var r,i,a=n.allowDisabling,o=n.includeDefault,u=void 0===o||o,s=null===(r=S1(t))||void 0===r?void 0:r.title;if(!t1(t))return null!=s?s:t.title;var l=t,c=u?k1(l,e):void 0;return a?cq(s,l.title,c):null!==(i=null!=s?s:l.title)&&void 0!==i?i:c}function S1(t){return l1(t)&&t.axis?t.axis:c1(t)&&t.legend?t.legend:H0(t)&&t.header?t.header:void 0}function k1(t,e){return y1(t,e)}function C1(t){var e;if(f1(t))return{format:t.format,formatType:t.formatType};var n=null!==(e=S1(t))&&void 0!==e?e:{};return{format:n.format,formatType:n.formatType}}function E1(t,e){var n;switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(X0(t)&&yo(t.sort))return"ordinal";var r=t.aggregate,i=t.bin;if(t.timeUnit)return"temporal";if(i||r&&!G$(r)&&!V$(r))return"quantitative";if(s1(t)&&(null===(n=t.scale)||void 0===n?void 0:n.type))switch(CQ[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function M1(t){return t1(t)?t:K0(t)?t.condition:void 0}function O1(t){return a1(t)?t:Q0(t)?t.condition:void 0}function A1(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(pu(t)||hu(t)||lu(t)){var i=pu(t)?"string":hu(t)?"number":"boolean";return CK($J(e,i,t)),{value:t}}return a1(t)?_1(t,e,n,r):Q0(t)?Object.assign(Object.assign({},t),{condition:_1(t.condition,e,n,r)}):t}function _1(t,e,n,r){if(f1(t)){t.format;var i=t.formatType,a=V0(t,["format","formatType"]);if(E0(i)&&!n.customFormatTypes)return CK(qJ(e)),_1(a,e,n,r)}else{var o=l1(t)?"axis":c1(t)?"legend":H0(t)?"header":null;if(o&&t[o]){var u=t[o],s=(u.format,u.formatType),l=V0(u,["format","formatType"]);if(E0(s)&&!n.customFormatTypes)return CK(qJ(e)),_1(Object.assign(Object.assign({},t),(0,Z.Z)({},o,l)),e,n,r)}}return t1(t)?D1(t,e,r):function(t){var e=t.type;if(e)return t;var n=t.datum;return e=hu(n)?"quantitative":pu(n)?"nominal":OK(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:e})}(t)}function D1(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.compositeMark,i=void 0!==r&&r,a=t.aggregate,o=t.timeUnit,u=t.bin,s=t.field,l=Object.assign({},t);if(i||!a||X$(a)||G$(a)||V$(a)||(CK(QJ(a)),delete l.aggregate),o&&(l.timeUnit=XK(o)),s&&(l.field="".concat(s)),Q$(u)&&(l.bin=T1(u,e)),tJ(u)&&!A$(e)&&CK(xK(e)),o1(l)){var c=l.type,f=vQ(c);c!==f&&(l.type=f),"quantitative"!==c&&q$(a)&&(CK(KJ(c,a)),l.type="quantitative")}else if(!v$(e)){var h=E1(l,e);l.type=h}if(o1(l)){var d=I1(l,e)||{},p=d.compatible,g=d.warning;!1===p&&CK(g)}if(X0(l)&&pu(l.sort)){var v=l.sort;if(R0(v))return Object.assign(Object.assign({},l),{sort:{encoding:v}});var m=v.substr(1);if("-"===v.charAt(0)&&R0(m))return Object.assign(Object.assign({},l),{sort:{encoding:m,order:"descending"}})}if(H0(l)){var y=l.header;if(y){var x=y.orient,b=V0(y,["orient"]);if(x)return Object.assign(Object.assign({},l),{header:Object.assign(Object.assign({},b),{labelOrient:y.labelOrient||x,titleOrient:y.titleOrient||x})})}}return l}function T1(t,e){return lu(t)?{maxbins:rJ(e)}:"binned"===t?{binned:!0}:t.maxbins||t.step?t:Object.assign(Object.assign({},t),{maxbins:rJ(e)})}var F1={compatible:!0};function I1(t,e){var n=t.type;if("geojson"===n&&"shape"!==e)return{compatible:!1,warning:"Channel ".concat(e," should not be used with a geojson data.")};switch(e){case xq:case bq:case wq:return g1(t)?F1:{compatible:!1,warning:iK(e)};case Sq:case kq:case Mq:case Oq:case Bq:case Lq:case Rq:case Xq:case qq:case $q:case Jq:case Kq:case Qq:case zq:case Dq:case Aq:case t$:return F1;case Iq:case jq:case Fq:case Pq:return n!==fQ?{compatible:!1,warning:"Channel ".concat(e," should be used with a quantitative field only, not ").concat(t.type," field.")}:F1;case Uq:case Hq:case Wq:case Vq:case Nq:case Tq:case _q:case Cq:case Eq:return"nominal"!==n||t.sort?F1:{compatible:!1,warning:"Channel ".concat(e," should not be used with an unsorted discrete field.")};case Zq:case Gq:return g1(t)||function(t){var e;return s1(t)&&LQ(null===(e=t.scale)||void 0===e?void 0:e.type)}(t)?F1:{compatible:!1,warning:aK(e)};case Yq:return"nominal"!==t.type||"sort"in t?F1:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}function P1(t){var e=C1(t).formatType;return"time"===e||!e&&function(t){return t&&("temporal"===t.type||t1(t)&&!!t.timeUnit)}(t)}function j1(t,e){var n,r,i=e.timeUnit,a=e.type,o=e.wrapTime,u=e.undefinedIfExprNotRequired,s=i&&(null===(n=XK(i))||void 0===n?void 0:n.unit),l=s||"temporal"===a;return oJ(t)?r=t.expr:fJ(t)?r=t.signal:OK(t)?(l=!0,r=IK(t)):(pu(t)||hu(t))&&l&&(r="datetime(".concat(PY(t),")"),function(t){return!!ZK[t]}(s)&&(hu(t)&&t<1e4||pu(t)&&isNaN(Date.parse(t)))&&(r=IK((0,Z.Z)({},s,t)))),r?o&&l?"time(".concat(r,")"):r:u?void 0:PY(t)}function B1(t,e){var n=t.type;return e.map((function(e){var r=j1(e,{timeUnit:t1(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:e}))}function L1(t,e){return Q$(t.bin)?R$(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}var R1={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Z1(t){return null==t?void 0:t.condition}var N1=["domain","grid","labels","ticks","title"],z1={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},U1={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},H1=Object.assign(Object.assign({},U1),{style:1,labelExpr:1,encoding:1});function W1(t){return!!H1[t]}qY(H1);var V1=qY({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function G1(t){return"mark"in t}var X1=function(){function t(e,n){(0,J.Z)(this,t),this.name=e,this.run=n}return(0,K.Z)(t,[{key:"hasMatchingType",value:function(t){return!!G1(t)&&function(t){return c0(t)?t.type:t}(t.mark)===this.name}}]),t}();function Y1(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return q1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q1(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function q1(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function J1(t,e){var n=t&&t[e];return!!n&&(yo(n)?RY(n,(function(t){return!!t.field})):t1(n)||K0(n))}function K1(t,e){var n=t&&t[e];return!!n&&(yo(n)?RY(n,(function(t){return!!t.field})):t1(n)||n1(n)||Q0(n))}function Q1(t,e){if(A$(e)){var n=t[e];if((t1(n)||n1(n))&&cQ(n.type))return K1(t,w$(e))}return!1}function t2(t){return RY(c$,(function(e){if(J1(t,e)){var n=t[e];if(yo(n))return RY(n,(function(t){return!!t.aggregate}));var r=M1(n);return r&&!!r.aggregate}return!1}))}function e2(t,e){var n=[],r=[],i=[],a=[],o={};return a2(t,(function(u,s){if(t1(u)){var l=u.field,c=u.aggregate,f=u.bin,h=u.timeUnit,d=$1(u,["field","aggregate","bin","timeUnit"]);if(c||h||f){var p,g=S1(u),v=null==g?void 0:g.title,m=p1(u,{forAs:!0}),y=Object.assign(Object.assign(Object.assign({},v?[]:{title:w1(u,e,{allowDisabling:!0})}),d),{field:m});if(c){if(G$(c)?(p="argmax",m=p1({op:"argmax",field:c.argmax},{forAs:!0}),y.field="".concat(m,".").concat(l)):V$(c)?(p="argmin",m=p1({op:"argmin",field:c.argmin},{forAs:!0}),y.field="".concat(m,".").concat(l)):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(p=c),p){var x={op:p,as:m};l&&(x.field=l),a.push(x)}}else if(n.push(m),o1(u)&&Q$(f)){if(r.push({bin:f,field:l,as:m}),n.push(p1(u,{binSuffix:"end"})),L1(u,s)&&n.push(p1(u,{binSuffix:"range"})),A$(s)){var b={field:"".concat(m,"_end")};o["".concat(s,"2")]=b}y.bin="binned",v$(s)||(y.type=fQ)}else if(h){i.push({timeUnit:h,field:l,as:m});var w=o1(u)&&u.type!==dQ&&"time";w&&(s===Xq||s===Jq?y.formatType=w:!function(t){return!!C$[t]}(s)?A$(s)&&(y.axis=Object.assign({formatType:w},y.axis)):y.legend=Object.assign({formatType:w},y.legend))}o[s]=y}else n.push(l),o[s]=t[s]}else o[s]=t[s]})),{bins:r,timeUnits:i,aggregate:a,groupby:n,encoding:o}}function n2(t,e,n,r){var i,a,o={},u=Y1(qY(t));try{for(u.s();!(i=u.n()).done;){var s=i.value;p$(s)||CK("".concat(a=s,"-encoding is dropped as ").concat(a," is not a valid encoding channel."))}}catch(h){u.e(h)}finally{u.f()}var l,c=Y1(k$);try{var f=function(){var i=l.value;if(!t[i])return"continue";var a=t[i];if(I$(i)){var u=S$(i),s=o[u];if(t1(s)){if(function(t){return"quantitative"===t||"temporal"===t}(s.type)&&t1(a))return CK(function(t){return"".concat(t,"Offset dropped because ").concat(t," is continuous")}(u)),"continue"}else i=u,CK(function(t){return"There is no ".concat(t," encoding. Replacing ").concat(t,"Offset encoding as ").concat(t,".")}(u))}if("angle"!==i||"arc"!==e||t.theta||(CK("Arc marks uses theta channel rather than angle, replacing angle with theta."),i=Dq),!function(t,e,n){var r=Z$(e,n);if(!r)return!1;if("binned"===r){var i=t[e===Cq?Sq:kq];return!!(t1(i)&&t1(t[e])&&tJ(i.bin))}return!0}(t,i,e))return CK(nK(i,e)),"continue";if(i===Nq&&"line"===e){var c=M1(t[i]);if(null==c?void 0:c.aggregate)return CK("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."),"continue"}if(i===Bq&&(n?"fill"in t:"stroke"in t))return CK(tK("encoding",{fill:"fill"in t,stroke:"stroke"in t})),"continue";if(i===qq||i===Yq&&!yo(a)&&!u1(a)||i===Jq&&yo(a))a&&(o[i]=Ho(a).reduce((function(t,e){return t1(e)?t.push(D1(e,i)):CK(eK(e,i)),t}),[]));else{if(i===Jq&&null===a)o[i]=null;else if(!(t1(a)||n1(a)||u1(a)||J0(a)||fJ(a)))return CK(eK(a,i)),"continue";o[i]=A1(a,i,r)}};for(c.s();!(l=c.n()).done;)f()}catch(h){c.e(h)}finally{c.f()}return o}function r2(t,e){var n,r={},i=Y1(qY(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=A1(t[a],a,e,{compositeMark:!0});r[a]=o}}catch(u){i.e(u)}finally{i.f()}return r}function i2(t){var e,n=[],r=Y1(qY(t));try{for(r.s();!(e=r.n()).done;){var i=e.value;if(J1(t,i)){var a,o=Y1(Ho(t[i]));try{for(o.s();!(a=o.n()).done;){var u=a.value;t1(u)?n.push(u):K0(u)&&n.push(u.condition)}}catch(s){o.e(s)}finally{o.f()}}}}catch(s){r.e(s)}finally{r.f()}return n}function a2(t,e,n){if(t){var r,i=Y1(qY(t));try{for(i.s();!(r=i.n()).done;){var a=r.value,o=t[a];if(yo(o)){var u,s=Y1(o);try{for(s.s();!(u=s.n()).done;){var l=u.value;e.call(n,l,a)}}catch(c){s.e(c)}finally{s.f()}}else e.call(n,o,a)}}catch(c){i.e(c)}finally{i.f()}}}function o2(t,e){return qY(e).reduce((function(n,r){switch(r){case Sq:case kq:case Kq:case t$:case Qq:case Cq:case Eq:case Mq:case Oq:case Dq:case Tq:case Aq:case _q:case Fq:case Iq:case Pq:case jq:case Xq:case Zq:case zq:case Jq:return n;case Yq:if("line"===t||"trail"===t)return n;case qq:case $q:var i=e[r];if(yo(i)||t1(i)){var a,o=Y1(Ho(i));try{for(o.s();!(a=o.n()).done;){var u=a.value;u.aggregate||n.push(p1(u,{}))}}catch(l){o.e(l)}finally{o.f()}}return n;case Nq:if("trail"===t)return n;case Bq:case Lq:case Rq:case Uq:case Hq:case Wq:case Gq:case Vq:var s=M1(e[r]);return s&&!s.aggregate&&n.push(p1(s,{})),n}}),[])}function u2(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s2(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function s2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var l2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function c2(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("tooltip"in n)return{tooltip:n.tooltip};var i=t.map((function(t){var n=t.fieldPrefix,i=t.titlePrefix,a=r?" of ".concat(f2(e)):"";return{field:n+e.field,type:e.type,title:fJ(i)?{signal:"".concat(i,'"').concat(escape(a),'"')}:i+a}})),a=i2(n).map(h1);return{tooltip:[].concat((0,X.Z)(i),(0,X.Z)(UY(a,jY)))}}function f2(t){return cq(t.title,t.field)}function h2(t,e,n,r,i){var a=n.scale,o=n.axis;return function(u){var s=u.partName,l=u.mark,c=u.positionPrefix,f=u.endPositionPrefix,h=void 0===f?void 0:f,d=u.extraEncoding,p=void 0===d?{}:d,g=f2(n);return d2(t,s,i,{mark:l,encoding:Object.assign(Object.assign(Object.assign((0,Z.Z)({},e,Object.assign(Object.assign(Object.assign({field:"".concat(c,"_").concat(n.field),type:n.type},void 0!==g?{title:g}:{}),void 0!==a?{scale:a}:{}),void 0!==o?{axis:o}:{})),pu(h)?(0,Z.Z)({},"".concat(e,"2"),{field:"".concat(h,"_").concat(n.field)}):{}),r),p)})}}function d2(t,e,n,r){var i=t.clip,a=t.color,o=t.opacity,u=t.type;return t[e]||void 0===t[e]&&n[e]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[e]),i?{clip:i}:{}),a?{color:a}:{}),o?{opacity:o}:{}),c0(r.mark)?r.mark:{type:r.mark}),{style:"".concat(u,"-").concat(String(e))}),lu(t[e])?{}:t[e])})]:[]}function p2(t,e,n){var r=t.encoding,i="vertical"===e?"y":"x",a=r[i],o=r["".concat(i,"2")],u=r["".concat(i,"Error")],s=r["".concat(i,"Error2")];return{continuousAxisChannelDef:g2(a,n),continuousAxisChannelDef2:g2(o,n),continuousAxisChannelDefError:g2(u,n),continuousAxisChannelDefError2:g2(s,n),continuousAxis:i}}function g2(t,e){if(null==t?void 0:t.aggregate){var n=t.aggregate,r=l2(t,["aggregate"]);return n!==e&&CK(function(t,e){return"Continuous axis should not have customized aggregation function ".concat(t,"; ").concat(e," already agregates the axis.")}(n,e)),r}return t}function v2(t,e){var n=t.mark,r=t.encoding,i=r.x,a=r.y;if(c0(n)&&n.orient)return n.orient;if(r1(i)){if(r1(a)){var o=t1(i)&&i.aggregate,u=t1(a)&&a.aggregate;if(o||u!==e){if(u||o!==e){if(o===e&&u===e)throw new Error("Both x and y cannot have aggregate");return P1(a)&&!P1(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(r1(a))return"vertical";throw new Error("Need a valid continuous axis for ".concat(e,"s"))}var m2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},y2="boxplot",x2=new X1(y2,w2);function b2(t){return hu(t)?"tukey":t}function w2(t,e){var n,r,i=e.config,a=t=Object.assign(Object.assign({},t),{encoding:r2(t.encoding,i)}),o=a.mark,u=(a.encoding,a.params),s=(a.projection,m2(t,["mark","encoding","params","projection"])),l=c0(o)?o:{type:o};u&&CK(WJ("boxplot"));var c=null!==(n=l.extent)&&void 0!==n?n:i.boxplot.extent,f=AJ("size",l,i),h=l.invalid,d=b2(c),p=function(t,e,n){var r=v2(t,y2),i=p2(t,r,y2),a=i.continuousAxisChannelDef,o=i.continuousAxis,u=a.field,s=b2(e),l=[].concat((0,X.Z)(S2(u)),[{op:"median",field:u,as:"mid_box_".concat(u)},{op:"min",field:u,as:("min-max"===s?"lower_whisker_":"min_")+u},{op:"max",field:u,as:("min-max"===s?"upper_whisker_":"max_")+u}]),c="min-max"===s||"tukey"===s?[]:[{calculate:'datum["upper_box_'.concat(u,'"] - datum["lower_box_').concat(u,'"]'),as:"iqr_".concat(u)},{calculate:'min(datum["upper_box_'.concat(u,'"] + datum["iqr_').concat(u,'"] * ').concat(e,', datum["max_').concat(u,'"])'),as:"upper_whisker_".concat(u)},{calculate:'max(datum["lower_box_'.concat(u,'"] - datum["iqr_').concat(u,'"] * ').concat(e,', datum["min_').concat(u,'"])'),as:"lower_whisker_".concat(u)}],f=t.encoding,h=o,d=(f[h],m2(f,["symbol"==typeof h?h:h+""])),p=function(t){var e,n,r=t.tooltip,i=l2(t,["tooltip"]);if(!r)return{filteredEncoding:i};if(yo(r)){var a,o=u2(r);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.aggregate?(e||(e=[]),e.push(u)):(n||(n=[]),n.push(u))}}catch(s){o.e(s)}finally{o.f()}e&&(i.tooltip=e)}else r.aggregate?i.tooltip=r:n=r;return yo(n)&&1===n.length&&(n=n[0]),{customTooltipWithoutAggregatedField:n,filteredEncoding:i}}(d),g=p.customTooltipWithoutAggregatedField,v=e2(p.filteredEncoding,n),m=v.bins,y=v.timeUnits,x=v.aggregate,b=v.groupby,w=v.encoding,S="vertical"===r?"horizontal":"vertical",k=r,C=[].concat((0,X.Z)(m),(0,X.Z)(y),[{aggregate:[].concat((0,X.Z)(x),(0,X.Z)(l)),groupby:b}],c);return{bins:m,timeUnits:y,transform:C,groupby:b,aggregate:x,continuousAxisChannelDef:a,continuousAxis:o,encodingWithoutContinuousAxis:w,ticksOrient:S,boxOrient:k,customTooltipWithoutAggregatedField:g}}(t,c,i),g=p.bins,v=p.timeUnits,m=p.transform,y=p.continuousAxisChannelDef,x=p.continuousAxis,b=p.groupby,w=p.aggregate,S=p.encodingWithoutContinuousAxis,k=p.ticksOrient,C=p.boxOrient,E=p.customTooltipWithoutAggregatedField,M=S.color,O=S.size,A=m2(S,["color","size"]),_=function(t){return h2(l,x,y,t,i.boxplot)},D=_(A),T=_(S),F=_(Object.assign(Object.assign({},A),O?{size:O}:{})),I=c2([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],y,S),P={type:"tick",color:"black",opacity:1,orient:k,invalid:h,aria:!1},j="min-max"===d?I:c2([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],y,S),B=[].concat((0,X.Z)(D({partName:"rule",mark:{type:"rule",invalid:h,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:j})),(0,X.Z)(D({partName:"rule",mark:{type:"rule",invalid:h,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:j})),(0,X.Z)(D({partName:"ticks",mark:P,positionPrefix:"lower_whisker",extraEncoding:j})),(0,X.Z)(D({partName:"ticks",mark:P,positionPrefix:"upper_whisker",extraEncoding:j}))),L=[].concat((0,X.Z)("tukey"!==d?B:[]),(0,X.Z)(T({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:C,invalid:h,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:I})),(0,X.Z)(F({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:h},xo(i.boxplot.median)&&i.boxplot.median.color?{color:i.boxplot.median.color}:{}),f?{size:f}:{}),{orient:k,aria:!1}),positionPrefix:"mid_box",extraEncoding:I})));if("min-max"===d)return Object.assign(Object.assign({},s),{transform:(null!==(r=s.transform)&&void 0!==r?r:[]).concat(m),layer:L});var R,N,z='datum["lower_box_'.concat(y.field,'"]'),U='datum["upper_box_'.concat(y.field,'"]'),H="(".concat(U," - ").concat(z,")"),W="".concat(z," - ").concat(c," * ").concat(H),V="".concat(U," + ").concat(c," * ").concat(H),G='datum["'.concat(y.field,'"]'),Y={joinaggregate:S2(y.field),groupby:b},q={transform:[{filter:"(".concat(W," <= ").concat(G,") && (").concat(G," <= ").concat(V,")")},{aggregate:[{op:"min",field:y.field,as:"lower_whisker_".concat(y.field)},{op:"max",field:y.field,as:"upper_whisker_".concat(y.field)},{op:"min",field:"lower_box_".concat(y.field),as:"lower_box_".concat(y.field)},{op:"max",field:"upper_box_".concat(y.field),as:"upper_box_".concat(y.field)}].concat((0,X.Z)(w)),groupby:b}],layer:B},$=(A.tooltip,m2(A,["tooltip"])),J=y.scale,K=y.axis,Q=f2(y),tt=IY(K,["title"]),et=d2(l,"outliers",i.boxplot,{transform:[{filter:"(".concat(G," < ").concat(W,") || (").concat(G," > ").concat(V,")")}],mark:"point",encoding:Object.assign(Object.assign(Object.assign((0,Z.Z)({},x,Object.assign(Object.assign(Object.assign({field:y.field,type:y.type},void 0!==Q?{title:Q}:{}),void 0!==J?{scale:J}:{}),YY(tt)?{}:{axis:tt})),$),M?{color:M}:{}),E?{tooltip:E}:{})})[0],nt=[].concat((0,X.Z)(g),(0,X.Z)(v),[Y]);et?R={transform:nt,layer:[et,q]}:(N=(R=q).transform).unshift.apply(N,(0,X.Z)(nt));return Object.assign(Object.assign({},s),{layer:[R,{transform:m,layer:L}]})}function S2(t){return[{op:"q1",field:t,as:"lower_box_".concat(t)},{op:"q3",field:t,as:"upper_box_".concat(t)}]}function k2(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return C2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C2(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function C2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var E2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},M2="errorbar",O2=new X1(M2,A2);function A2(t,e){var n=e.config,r=D2(t=Object.assign(Object.assign({},t),{encoding:r2(t.encoding,n)}),M2,n),i=r.transform,a=r.continuousAxisChannelDef,o=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.ticksOrient,l=r.markDef,c=r.outerSpec,f=r.tooltipEncoding;delete u.size;var h=h2(l,o,a,u,n.errorbar),d=l.thickness,p=l.size,g=Object.assign(Object.assign({type:"tick",orient:s,aria:!1},void 0!==d?{thickness:d}:{}),void 0!==p?{size:p}:{}),v=[].concat((0,X.Z)(h({partName:"ticks",mark:g,positionPrefix:"lower",extraEncoding:f})),(0,X.Z)(h({partName:"ticks",mark:g,positionPrefix:"upper",extraEncoding:f})),(0,X.Z)(h({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},void 0!==d?{size:d}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})));return Object.assign(Object.assign(Object.assign({},c),{transform:i}),v.length>1?{layer:v}:Object.assign({},v[0]))}function _2(t,e){var n=t.encoding;if(function(t){return(a1(t.x)||a1(t.y))&&!a1(t.x2)&&!a1(t.y2)&&!a1(t.xError)&&!a1(t.xError2)&&!a1(t.yError)&&!a1(t.yError2)}(n))return{orient:v2(t,e),inputType:"raw"};var r=function(t){return a1(t.x2)||a1(t.y2)}(n),i=function(t){return a1(t.xError)||a1(t.xError2)||a1(t.yError)||a1(t.yError2)}(n),a=n.x,o=n.y;if(r){if(i)throw new Error("".concat(e," cannot be both type aggregated-upper-lower and aggregated-error"));var u=n.x2,s=n.y2;if(a1(u)&&a1(s))throw new Error("".concat(e," cannot have both x2 and y2"));if(a1(u)){if(r1(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in ".concat(e))}if(a1(s)){if(r1(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in ".concat(e))}throw new Error("No ranged axis")}var l=n.xError,c=n.xError2,f=n.yError,h=n.yError2;if(a1(c)&&!a1(l))throw new Error("".concat(e," cannot have xError2 without xError"));if(a1(h)&&!a1(f))throw new Error("".concat(e," cannot have yError2 without yError"));if(a1(l)&&a1(f))throw new Error("".concat(e," cannot have both xError and yError with both are quantiative"));if(a1(l)){if(r1(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(a1(f)){if(r1(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function D2(t,e,n){var r,i=t.mark,a=t.encoding,o=t.params,u=(t.projection,E2(t,["mark","encoding","params","projection"])),s=c0(i)?i:{type:i};o&&CK(WJ(e));var l=_2(t,e),c=l.orient,f=l.inputType,h=p2(t,c,e),d=h.continuousAxisChannelDef,p=h.continuousAxisChannelDef2,g=h.continuousAxisChannelDefError,v=h.continuousAxisChannelDefError2,m=h.continuousAxis,y=function(t,e,n,r,i,a,o,u){var s,l=[],c=[],f=e.field,h=!1;if("raw"===a){var d,p,g,v=t.center?t.center:t.extent?"iqr"===t.extent?"median":"mean":u.errorbar.center,m=t.extent?t.extent:"mean"===v?"stderr":"iqr";if("median"===v!=("iqr"===m)&&CK(function(t,e,n){return"".concat(t," is not usually used with ").concat(e," for ").concat(n,".")}(v,m,o)),"stderr"===m||"stdev"===m)l=[{op:m,field:f,as:"extent_".concat(f)},{op:v,field:f,as:"center_".concat(f)}],c=[{calculate:'datum["center_'.concat(f,'"] + datum["extent_').concat(f,'"]'),as:"upper_".concat(f)},{calculate:'datum["center_'.concat(f,'"] - datum["extent_').concat(f,'"]'),as:"lower_".concat(f)}],s=[{fieldPrefix:"center_",titlePrefix:nq(v)},{fieldPrefix:"upper_",titlePrefix:T2(v,m,"+")},{fieldPrefix:"lower_",titlePrefix:T2(v,m,"-")}],h=!0;else"ci"===m?(d="mean",p="ci0",g="ci1"):(d="median",p="q1",g="q3"),l=[{op:p,field:f,as:"lower_".concat(f)},{op:g,field:f,as:"upper_".concat(f)},{op:d,field:f,as:"center_".concat(f)}],s=[{fieldPrefix:"upper_",titlePrefix:w1({field:f,aggregate:g,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:w1({field:f,aggregate:p,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:w1({field:f,aggregate:d,type:"quantitative"},u,{allowDisabling:!1})}]}else{(t.center||t.extent)&&CK(function(t,e){return"".concat(e?"extent ":"").concat(e&&t?"and ":"").concat(t?"center ":"").concat(e&&t?"are ":"is ","not needed when data are aggregated.")}(t.center,t.extent)),"aggregated-upper-lower"===a?(s=[],c=[{calculate:'datum["'.concat(n.field,'"]'),as:"upper_".concat(f)},{calculate:'datum["'.concat(f,'"]'),as:"lower_".concat(f)}]):"aggregated-error"===a&&(s=[{fieldPrefix:"",titlePrefix:f}],c=[{calculate:'datum["'.concat(f,'"] + datum["').concat(r.field,'"]'),as:"upper_".concat(f)}],i?c.push({calculate:'datum["'.concat(f,'"] + datum["').concat(i.field,'"]'),as:"lower_".concat(f)}):c.push({calculate:'datum["'.concat(f,'"] - datum["').concat(r.field,'"]'),as:"lower_".concat(f)}));var y,x=k2(c);try{for(x.s();!(y=x.n()).done;){var b=y.value;s.push({fieldPrefix:b.as.substring(0,6),titlePrefix:uq(uq(b.calculate,'datum["',""),'"]',"")})}}catch(w){x.e(w)}finally{x.f()}}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:s,tooltipTitleWithFieldName:h}}(s,d,p,g,v,f,e,n),x=y.errorBarSpecificAggregate,b=y.postAggregateCalculates,w=y.tooltipSummary,S=y.tooltipTitleWithFieldName,k=a,C=m,E=(k[C],"x"===m?"x2":"y2"),M=(k[E],"x"===m?"xError":"yError"),O=(k[M],"x"===m?"xError2":"yError2"),A=(k[O],e2(E2(k,["symbol"==typeof C?C:C+"","symbol"==typeof E?E:E+"","symbol"==typeof M?M:M+"","symbol"==typeof O?O:O+""]),n)),_=A.bins,D=A.timeUnits,T=A.aggregate,F=A.groupby,I=A.encoding,P=[].concat((0,X.Z)(T),(0,X.Z)(x)),j="raw"!==f?[]:F,B=c2(w,d,I,S);return{transform:[].concat((0,X.Z)(null!==(r=u.transform)&&void 0!==r?r:[]),(0,X.Z)(_),(0,X.Z)(D),(0,X.Z)(0===P.length?[]:[{aggregate:P,groupby:j}]),(0,X.Z)(b)),groupby:j,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:I,ticksOrient:"vertical"===c?"horizontal":"vertical",markDef:s,outerSpec:u,tooltipEncoding:B}}function T2(t,e,n){return"".concat(nq(t)," ").concat(n," ").concat(e)}var F2="errorband",I2=new X1(F2,P2);function P2(t,e){var n=e.config,r=D2(t=Object.assign(Object.assign({},t),{encoding:r2(t.encoding,n)}),F2,n),i=r.transform,a=r.continuousAxisChannelDef,o=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.markDef,l=r.outerSpec,c=r.tooltipEncoding,f=s,h=h2(f,o,a,u,n.errorband),d=void 0!==t.encoding.x&&void 0!==t.encoding.y,p={type:d?"area":"rect"},g={type:d?"line":"rule"},v=Object.assign(Object.assign({},f.interpolate?{interpolate:f.interpolate}:{}),f.tension&&f.interpolate?{tension:f.tension}:{});return d?(p=Object.assign(Object.assign(Object.assign({},p),v),{ariaRoleDescription:"errorband"}),g=Object.assign(Object.assign(Object.assign({},g),v),{aria:!1})):f.interpolate?CK(mK("interpolate")):f.tension&&CK(mK("tension")),Object.assign(Object.assign({},l),{transform:i,layer:[].concat((0,X.Z)(h({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})),(0,X.Z)(h({partName:"borders",mark:g,positionPrefix:"lower",extraEncoding:c})),(0,X.Z)(h({partName:"borders",mark:g,positionPrefix:"upper",extraEncoding:c})))})}var j2={};function B2(t,e,n){var r=new X1(t,e);j2[t]={normalizer:r,parts:n}}B2(y2,w2,["box","median","outliers","rule","ticks"]),B2(M2,A2,["ticks","rule"]),B2(F2,P2,["band","borders"]);var L2=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],R2={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Z2={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},N2=qY(R2),z2=qY(Z2),U2=qY({header:1,headerRow:1,headerColumn:1,headerFacet:1}),H2=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],W2={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},V2=(qY(W2),"_vgsid_"),G2={point:{on:"click",fields:[V2],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function X2(t){return"legend"===t||!!(null==t?void 0:t.legend)}function Y2(t){return X2(t)&&xo(t)}function q2(t){return!!(null==t?void 0:t.select)}function $2(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return J2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J2(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function J2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var K2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Q2(t){var e,n=[],r=$2(t||[]);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!q2(i)){var a=i.expr,o=i.bind,u=K2(i,["expr","bind"]);if(o&&a){var s=Object.assign(Object.assign({},u),{bind:o,init:a});n.push(s)}else{var l=Object.assign(Object.assign(Object.assign({},u),a?{update:a}:{}),o?{bind:o}:{});n.push(l)}}}}catch(c){r.e(c)}finally{r.f()}return n}function t3(t){return"concat"in t}function e3(t){return"vconcat"in t}function n3(t){return"hconcat"in t}function r3(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i3(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function i3(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a3(t){var e,n=t.step;return t.offsetIsDiscrete?null!==(e=n.for)&&void 0!==e?e:"offset":"position"}function o3(t){return xo(t)&&void 0!==t.step}function u3(t){return t.view||t.width||t.height}var s3=qY({align:1,bounds:1,center:1,columns:1,spacing:1});function l3(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c3(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function c3(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var f3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function h3(t,e){var n;return null!==(n=t[e])&&void 0!==n?n:t["width"===e?"continuousWidth":"continuousHeight"]}function d3(t,e){var n=p3(t,e);return o3(n)?n.step:g3}function p3(t,e){var n;return cq(null!==(n=t[e])&&void 0!==n?n:t["width"===e?"discreteWidth":"discreteHeight"],{step:t.step})}var g3=20;var v3={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:g3},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:v0,circle:{},geoshape:{},image:{},line:{},point:{},rect:m0,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:G2,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},m3=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],y3={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},x3={blue:m3[0],orange:m3[1],red:m3[2],teal:m3[3],green:m3[4],yellow:m3[5],purple:m3[6],pink:m3[7],brown:m3[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function b3(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{signals:[{name:"color",value:xo(t)?Object.assign(Object.assign({},x3),t):x3}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function w3(t){return{signals:[{name:"fontSize",value:xo(t)?Object.assign(Object.assign({},y3),t):y3}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function S3(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function k3(t){var e,n={},r=l3(qY(t||{}));try{for(r.s();!(e=r.n()).done;){var i=e.value,a=t[i];n[i]=Z1(a)?bJ(a):wJ(a)}}catch(o){r.e(o)}finally{r.f()}return n}function C3(t){var e,n={},r=l3(qY(t));try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i]=k3(t[i])}}catch(a){r.e(a)}finally{r.f()}return n}var E3=[].concat((0,X.Z)(d0),(0,X.Z)(V1),(0,X.Z)(U2),["background","padding","legend","lineBreak","scale","style","title","view"]);function M3(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=t.font,r=t.fontSize,i=t.selection,a=f3(t,["color","font","fontSize","selection"]),o=wo({},DY(v3),n?S3(n):{},e?b3(e):{},r?w3(r):{},a||{});i&&So(o,"selection",i,!0);for(var u=IY(o,E3),s=0,l=["background","lineBreak","padding"];s<l.length;s++){var c=l[s];o[c]&&(u[c]=wJ(o[c]))}var f,h=l3(d0);try{for(h.s();!(f=h.n()).done;){var d=f.value;o[d]&&(u[d]=uJ(o[d]))}}catch(b){h.e(b)}finally{h.f()}var p,g=l3(V1);try{for(g.s();!(p=g.n()).done;){var v=p.value;o[v]&&(u[v]=k3(o[v]))}}catch(b){g.e(b)}finally{g.f()}var m,y=l3(U2);try{for(y.s();!(m=y.n()).done;){var x=m.value;o[x]&&(u[x]=uJ(o[x]))}}catch(b){y.e(b)}finally{y.f()}return o.legend&&(u.legend=uJ(o.legend)),o.scale&&(u.scale=uJ(o.scale)),o.style&&(u.style=C3(o.style)),o.title&&(u.title=uJ(o.title)),o.view&&(u.view=uJ(o.view)),u}var O3=new Set(["view"].concat((0,X.Z)(l0))),A3=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],_3=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function D3(t){t=DY(t);var e,n=l3(A3);try{for(n.s();!(e=n.n()).done;){delete t[e.value]}}catch(k){n.e(k)}finally{n.f()}if(t.axis)for(var r in t.axis)Z1(t.axis[r])&&delete t.axis[r];if(t.legend){var i,a=l3(L2);try{for(a.s();!(i=a.n()).done;){var o=i.value;delete t.legend[o]}}catch(k){a.e(k)}finally{a.f()}}if(t.mark){var u,s=l3(h0);try{for(s.s();!(u=s.n()).done;){var l=u.value;delete t.mark[l]}}catch(k){s.e(k)}finally{s.f()}t.mark.tooltip&&xo(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(Q2(t.params)),delete t.params);var c,f=l3(O3);try{for(f.s();!(c=f.n()).done;){var h,d=c.value,p=l3(h0);try{for(p.s();!(h=p.n()).done;){var g=h.value;delete t[d][g]}}catch(k){p.e(k)}finally{p.f()}var v=_3[d];if(v){var m,y=l3(v);try{for(y.s();!(m=y.n()).done;){var x=m.value;delete t[d][x]}}catch(k){y.e(k)}finally{y.f()}}T3(t,d)}}catch(k){f.e(k)}finally{f.f()}var b,w=l3(qY(j2));try{for(w.s();!(b=w.n()).done;){delete t[b.value]}}catch(k){w.e(k)}finally{w.f()}for(var S in function(t){var e=lJ(t.title),n=e.titleMarkConfig,r=e.subtitleMarkConfig,i=e.subtitle;YY(n)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),n));YY(r)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),r));YY(i)?delete t.title:t.title=i}(t),t)xo(t[S])&&YY(t[S])&&delete t[S];return YY(t)?void 0:t}function T3(t,e,n,r){var i=r?t[e][r]:t[e];"view"===e&&(n="cell");var a=Object.assign(Object.assign({},i),t.style[null!=n?n:e]);YY(a)||(t.style[null!=n?n:e]=a),r||delete t[e]}function F3(t){return"layer"in t}var I3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},P3=function(){function t(){(0,J.Z)(this,t)}return(0,K.Z)(t,[{key:"map",value:function(t,e){return W0(t)?this.mapFacet(t,e):function(t){return"repeat"in t}(t)?this.mapRepeat(t,e):n3(t)?this.mapHConcat(t,e):e3(t)?this.mapVConcat(t,e):t3(t)?this.mapConcat(t,e):this.mapLayerOrUnit(t,e)}},{key:"mapLayerOrUnit",value:function(t,e){if(F3(t))return this.mapLayer(t,e);if(G1(t))return this.mapUnit(t,e);throw new Error(BJ(t))}},{key:"mapLayer",value:function(t,e){var n=this;return Object.assign(Object.assign({},t),{layer:t.layer.map((function(t){return n.mapLayerOrUnit(t,e)}))})}},{key:"mapHConcat",value:function(t,e){var n=this;return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map((function(t){return n.map(t,e)}))})}},{key:"mapVConcat",value:function(t,e){var n=this;return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map((function(t){return n.map(t,e)}))})}},{key:"mapConcat",value:function(t,e){var n=this,r=t.concat,i=I3(t,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map((function(t){return n.map(t,e)}))})}},{key:"mapFacet",value:function(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}},{key:"mapRepeat",value:function(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}}]),t}();function j3(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return B3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B3(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function B3(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var L3={zero:1,center:1,normalize:1};var R3=new Set([XQ,qQ,YQ,t0,KQ,i0,a0,JQ,e0,n0]),Z3=new Set([qQ,YQ,XQ]);function N3(t){return t1(t)&&"quantitative"===e1(t)&&!t.bin}function z3(t,e){var n,r,i="x"===e?"y":"radius",a=t[e],o=t[i];if(t1(a)&&t1(o))if(N3(a)&&N3(o)){if(a.stack)return e;if(o.stack)return i;var u=t1(a)&&!!a.aggregate;if(u!==(t1(o)&&!!o.aggregate))return u?e:i;var s=null===(n=a.scale)||void 0===n?void 0:n.type,l=null===(r=o.scale)||void 0===r?void 0:r.type;if(s&&"linear"!==s)return i;if(l&&"linear"!==l)return e}else{if(N3(a))return e;if(N3(o))return i}else{if(N3(a))return e;if(N3(o))return i}}function U3(t,e){var n,r,i=c0(t)?t.type:t;if(!R3.has(i))return null;var a=z3(e,"x")||z3(e,"theta");if(!a)return null;var o=e[a],u=t1(o)?p1(o,{}):void 0,s=function(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(a),l=[],c=new Set;if(e[s]){var f=e[s],h=t1(f)?p1(f,{}):void 0;h&&h!==u&&(l.push(s),c.add(h));var d="x"===s?"xOffset":"yOffset",p=e[d],g=t1(p)?p1(p,{}):void 0;g&&g!==u&&(l.push(d),c.add(g))}var v,m,y,x=E$.reduce((function(t,n){if("tooltip"!==n&&J1(e,n)){var r,i=j3(Ho(e[n]));try{for(i.s();!(r=i.n()).done;){var a=M1(r.value);if(!a.aggregate){var o=p1(a,{});o&&c.has(o)||t.push({channel:n,fieldDef:a})}}}catch(u){i.e(u)}finally{i.f()}}return t}),[]);return void 0!==o.stack?v=lu(o.stack)?o.stack?"zero":null:o.stack:Z3.has(i)&&(v="zero"),v&&function(t){return t in L3}(v)?t2(e)&&0===x.length?null:(null===(n=null==o?void 0:o.scale)||void 0===n?void 0:n.type)&&(null===(r=null==o?void 0:o.scale)||void 0===r?void 0:r.type)!==yQ?(CK(function(t){return"Cannot stack non-linear scale (".concat(t,").")}(o.scale.type)),null):a1(e[x$(a)])?(void 0!==o.stack&&CK('Cannot stack "'.concat(m=a,'" if there is already "').concat(m,'2".')),null):(t1(o)&&o.aggregate&&!$$.has(o.aggregate)&&CK((y=o.aggregate,'Stacking is applied even though the aggregate function is non-summative ("'.concat(y,'").'))),{groupbyChannels:l,groupbyFields:c,fieldChannel:a,impute:null!==o.impute&&u0(i),stackBy:x,offset:v}):null}var H3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function W3(t){t.point,t.line;var e=H3(t,["point","line"]);return qY(e).length>1?e:e.type}function V3(t){for(var e=0,n=["line","area","rule","trail"];e<n.length;e++){var r=n[e];t[r]&&(t=Object.assign(Object.assign({},t),(0,Z.Z)({},r,IY(t[r],["point","line"]))))}return t}function G3(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return"transparent"===t.point?{opacity:0}:t.point?xo(t.point)?t.point:{}:void 0!==t.point?null:e.point||n.shape?xo(e.point)?e.point:{}:void 0}function X3(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.line?!0===t.line?{}:t.line:void 0!==t.line?null:e.line?!0===e.line?{}:e.line:void 0}var Y3=function(){function t(){(0,J.Z)(this,t),this.name="path-overlay"}return(0,K.Z)(t,[{key:"hasMatchingType",value:function(t,e){if(G1(t)){var n=t.mark,r=t.encoding,i=c0(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!G3(i,e[i.type],r);case"area":return!!G3(i,e[i.type],r)||!!X3(i,e[i.type])}}return!1}},{key:"run",value:function(t,e,n){var r=e.config,i=t.params,a=t.projection,o=t.mark,u=t.encoding,s=H3(t,["params","projection","mark","encoding"]),l=r2(u,r),c=c0(o)?o:{type:o},f=G3(c,r[c.type],l),h="area"===c.type&&X3(c,r[c.type]),d=[Object.assign(Object.assign({},i?{params:i}:{}),{mark:W3(Object.assign(Object.assign({},"area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{}),c)),encoding:IY(l,["shape"])})],p=U3(c,l),g=l;if(p){var v=p.fieldChannel,m=p.offset;g=Object.assign(Object.assign({},l),(0,Z.Z)({},v,Object.assign(Object.assign({},l[v]),m?{stack:m}:{})))}return g=IY(g,["y2","x2"]),h&&d.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},FY(c,["clip","interpolate","tension","tooltip"])),h),encoding:g})),f&&d.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},FY(c,["clip","tooltip"])),f),encoding:g})),n(Object.assign(Object.assign({},s),{layer:d}),Object.assign(Object.assign({},e),{config:V3(r)}))}}]),t}(),q3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function $3(t,e){return e?U0(t)?n5(t,e):Q3(t,e):t}function J3(t,e){return e?n5(t,e):t}function K3(t,e,n){var r=e[t];return function(t){return t&&!pu(t)&&"repeat"in t}(r)?r.repeat in n?Object.assign(Object.assign({},e),(0,Z.Z)({},t,n[r.repeat])):void CK(function(t){return'Unknown repeated value "'.concat(t,'".')}(r.repeat)):e}function Q3(t,e){if(void 0!==(t=K3("field",t,e))){if(null===t)return null;if(X0(t)&&N0(t.sort)){var n=K3("field",t.sort,e);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function t5(t,e){if(t1(t))return Q3(t,e);var n=K3("datum",t,e);return n===t||n.type||(n.type="nominal"),n}function e5(t,e){if(!a1(t)){if(Q0(t)){var n=t5(t.condition,e);if(n)return Object.assign(Object.assign({},t),{condition:n});t.condition;return q3(t,["condition"])}return t}var r=t5(t,e);return r||(J0(t)?{condition:t.condition}:void 0)}function n5(t,e){var n={};for(var r in t)if(ru(t,r)){var i=t[r];if(yo(i))n[r]=i.map((function(t){return e5(t,e)})).filter((function(t){return t}));else{var a=e5(i,e);void 0!==a&&(n[r]=a)}}return n}function r5(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i5(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function i5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a5=function(){function t(){(0,J.Z)(this,t),this.name="RuleForRangedLine"}return(0,K.Z)(t,[{key:"hasMatchingType",value:function(t){if(G1(t)){var e=t.encoding,n=t.mark;if("line"===n||c0(n)&&"line"===n.type){var r,i=r5(g$);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=e[m$(a)];if(e[a]&&(t1(o)&&!tJ(o.bin)||n1(o)))return!0}}catch(u){i.e(u)}finally{i.f()}}}return!1}},{key:"run",value:function(t,e,n){var r,i,a=t.encoding,o=t.mark;return CK((r=!!a.x2,i=!!a.y2,"Line mark is for continuous lines and thus cannot be used with ".concat(r&&i?"x2 and y2":r?"x2":"y2",". We will use the rule mark (line segments) instead."))),n(Object.assign(Object.assign({},t),{mark:xo(o)?Object.assign(Object.assign({},o),{type:"rule"}):"rule"}),e)}}]),t}();function o5(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u5(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function u5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s5(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var l5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},c5=function(t){(0,Q.Z)(n,t);var e=s5(n);function n(){var t;return(0,J.Z)(this,n),(t=e.apply(this,arguments)).nonFacetUnitNormalizers=[x2,O2,I2,new Y3,new a5],t}return(0,K.Z)(n,[{key:"map",value:function(t,e){if(G1(t)){var r=J1(t.encoding,xq),i=J1(t.encoding,bq),a=J1(t.encoding,wq);if(r||i||a)return this.mapFacetedUnit(t,e)}return fw((0,pa.Z)(n.prototype),"map",this).call(this,t,e)}},{key:"mapUnit",value:function(t,e){var n=e.parentEncoding,r=e.parentProjection,i=J3(t.encoding,e.repeater),a=Object.assign(Object.assign({},t),i?{encoding:i}:{});if(n||r)return this.mapUnitWithParentEncodingOrProjection(a,e);var o,u=this.mapLayerOrUnit.bind(this),s=o5(this.nonFacetUnitNormalizers);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.hasMatchingType(a,e.config))return l.run(a,e,u)}}catch(c){s.e(c)}finally{s.f()}return a}},{key:"mapRepeat",value:function(t,e){return function(t){return!yo(t.repeat)&&t.repeat.layer}(t)?this.mapLayerRepeat(t,e):this.mapNonLayerRepeat(t,e)}},{key:"mapLayerRepeat",value:function(t,e){var n=this,r=t.repeat,i=t.spec,a=l5(t,["repeat","spec"]),o=r.row,u=r.column,s=r.layer,l=e.repeater,c=void 0===l?{}:l,f=e.repeaterPrefix,h=void 0===f?"":f;return o||u?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),u?{column:u}:{}),spec:{repeat:{layer:s},spec:i}}),e):Object.assign(Object.assign({},a),{layer:s.map((function(t){var r=Object.assign(Object.assign({},c),{layer:t}),a="".concat((i.name||"")+h,"child__layer_").concat(QY(t)),o=n.mapLayerOrUnit(i,Object.assign(Object.assign({},e),{repeater:r,repeaterPrefix:a}));return o.name=a,o}))})}},{key:"mapNonLayerRepeat",value:function(t,e){var n,r=t,i=r.repeat,a=r.spec,o=r.data,u=l5(t,["repeat","spec","data"]);!yo(i)&&t.columns&&(t=IY(t,["columns"]),CK(GJ("repeat")));var s,l=[],c=e.repeater,f=void 0===c?{}:c,h=e.repeaterPrefix,d=void 0===h?"":h,p=!yo(i)&&i.row||[f?f.row:null],g=!yo(i)&&i.column||[f?f.column:null],v=o5(yo(i)&&i||[f?f.repeat:null]);try{for(v.s();!(s=v.n()).done;){var m,y=s.value,x=o5(p);try{for(x.s();!(m=x.n()).done;){var b,w=m.value,S=o5(g);try{for(S.s();!(b=S.n()).done;){var k=b.value,C={repeat:y,row:w,column:k,layer:f.layer},E=(a.name||"")+d+"child__"+(yo(i)?"".concat(QY(y)):(i.row?"row_".concat(QY(w)):"")+(i.column?"column_".concat(QY(k)):"")),M=this.map(a,Object.assign(Object.assign({},e),{repeater:C,repeaterPrefix:E}));M.name=E,l.push(IY(M,["data"]))}}catch(A){S.e(A)}finally{S.f()}}}catch(A){x.e(A)}finally{x.f()}}}catch(A){v.e(A)}finally{v.f()}var O=yo(i)?t.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:null!==(n=a.data)&&void 0!==n?n:o,align:"all"},u),{columns:O,concat:l})}},{key:"mapFacet",value:function(t,e){return U0(t.facet)&&t.columns&&(t=IY(t,["columns"]),CK(GJ("facet"))),fw((0,pa.Z)(n.prototype),"mapFacet",this).call(this,t,e)}},{key:"mapUnitWithParentEncodingOrProjection",value:function(t,e){var n=t.encoding,r=t.projection,i=e.parentEncoding,a=e.parentProjection,o=e.config,u=h5({parentProjection:a,projection:r}),s=f5({parentEncoding:i,encoding:J3(n,e.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),u?{projection:u}:{}),s?{encoding:s}:{}),{config:o})}},{key:"mapFacetedUnit",value:function(t,e){var n=t.encoding,r=n.row,i=n.column,a=n.facet,o=l5(n,["row","column","facet"]),u=t.mark,s=t.width,l=t.projection,c=t.height,f=t.view,h=t.params,d=(t.encoding,l5(t,["mark","width","projection","height","view","params","encoding"])),p=this.getFacetMappingAndLayout({row:r,column:i,facet:a},e),g=p.facetMapping,v=p.layout,m=J3(o,e.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},d),v),{facet:g,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s?{width:s}:{}),c?{height:c}:{}),f?{view:f}:{}),l?{projection:l}:{}),{mark:u,encoding:m}),h?{params:h}:{})}),e)}},{key:"getFacetMappingAndLayout",value:function(t,e){var n,r=t.row,i=t.column,a=t.facet;if(r||i){a&&CK((v=[].concat((0,X.Z)(r?[xq]:[]),(0,X.Z)(i?[bq]:[])),"Facet encoding dropped as ".concat(v.join(" and ")," ").concat(v.length>1?"are":"is"," also specified.")));for(var o={},u={},s=0,l=[xq,bq];s<l.length;s++){var c=l[s],f=t[c];if(f){f.align,f.center,f.spacing,f.columns;var h=l5(f,["align","center","spacing","columns"]);o[c]=h;for(var d=0,p=["align","center","spacing"];d<p.length;d++){var g=p[d];void 0!==f[g]&&(null!==(n=u[g])&&void 0!==n||(u[g]={}),u[g][c]=f[g])}}}return{facetMapping:o,layout:u}}var v,m=a.align,y=a.center,x=a.spacing,b=a.columns;return{facetMapping:$3(l5(a,["align","center","spacing","columns"]),e.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},m?{align:m}:{}),y?{center:y}:{}),x?{spacing:x}:{}),b?{columns:b}:{})}}},{key:"mapLayer",value:function(t,e){var r=e.parentEncoding,i=e.parentProjection,a=l5(e,["parentEncoding","parentProjection"]),o=t.encoding,u=t.projection,s=l5(t,["encoding","projection"]),l=Object.assign(Object.assign({},a),{parentEncoding:f5({parentEncoding:r,encoding:o,layer:!0}),parentProjection:h5({parentProjection:i,projection:u})});return fw((0,pa.Z)(n.prototype),"mapLayer",this).call(this,s,l)}}]),n}(P3);function f5(t){var e=t.parentEncoding,n=t.encoding,r=void 0===n?{}:n,i=t.layer,a={};if(e){var o,u=o5(new Set([].concat((0,X.Z)(qY(e)),(0,X.Z)(qY(r)))));try{for(u.s();!(o=u.n()).done;){var s=o.value,l=r[s],c=e[s];if(a1(l)){var f=Object.assign(Object.assign({},c),l);a[s]=f}else Q0(l)?a[s]=Object.assign(Object.assign({},l),{condition:Object.assign(Object.assign({},c),l.condition)}):l||null===l?a[s]=l:(i||u1(c)||fJ(c)||a1(c)||yo(c))&&(a[s]=c)}}catch(h){u.e(h)}finally{u.f()}}else a=r;return!a||YY(a)?void 0:a}function h5(t){var e=t.parentProjection,n=t.projection;return e&&n&&CK(function(t){var e=t.parentProjection,n=t.projection;return"Layer's shared projection ".concat(PY(e)," is overridden by a child projection ").concat(PY(n),".")}({parentProjection:e,projection:n})),null!=n?n:e}function d5(t){return"filter"in t}function p5(t){return void 0!==(null==t?void 0:t.stop)}function g5(t){return"lookup"in t}function v5(t){return"pivot"in t}function m5(t){return"density"in t}function y5(t){return"quantile"in t}function x5(t){return"regression"in t}function b5(t){return"loess"in t}function w5(t){return"sample"in t}function S5(t){return"window"in t}function k5(t){return"joinaggregate"in t}function C5(t){return"flatten"in t}function E5(t){return"calculate"in t}function M5(t){return"bin"in t}function O5(t){return"impute"in t}function A5(t){return"timeUnit"in t}function _5(t){return"aggregate"in t}function D5(t){return"stack"in t}function T5(t){return"fold"in t}function F5(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return I5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I5(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function I5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P5(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var j5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},B5=function(t){(0,Q.Z)(n,t);var e=P5(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"map",value:function(t,e){var r,i;return null!==(r=e.emptySelections)&&void 0!==r||(e.emptySelections={}),null!==(i=e.selectionPredicates)&&void 0!==i||(e.selectionPredicates={}),t=L5(t,e),fw((0,pa.Z)(n.prototype),"map",this).call(this,t,e)}},{key:"mapLayerOrUnit",value:function(t,e){if((t=L5(t,e)).encoding){var r,i={},a=F5(JY(t.encoding));try{for(a.s();!(r=a.n()).done;){var o=(0,W.Z)(r.value,2),u=o[0],s=o[1];i[u]=R5(s,e)}}catch(l){a.e(l)}finally{a.f()}t=Object.assign(Object.assign({},t),{encoding:i})}return fw((0,pa.Z)(n.prototype),"mapLayerOrUnit",this).call(this,t,e)}},{key:"mapUnit",value:function(t,e){var n=t,r=n.selection,i=j5(n,["selection"]);return r?Object.assign(Object.assign({},i),{params:JY(r).map((function(t){var n,r=(0,W.Z)(t,2),i=r[0],a=r[1],o=a.init,u=a.bind,s=a.empty,l=j5(a,["init","bind","empty"]);"single"===l.type?(l.type="point",l.toggle=!1):"multi"===l.type&&(l.type="point"),e.emptySelections[i]="none"!==s;var c,f=F5($Y(null!==(n=e.selectionPredicates[i])&&void 0!==n?n:{}));try{for(f.s();!(c=f.n()).done;){c.value.empty="none"!==s}}catch(h){f.e(h)}finally{f.f()}return{name:i,value:o,select:l,bind:u}}))}):t}}]),n}(P3);function L5(t,e){var n=t.transform,r=j5(t,["transform"]);if(n){var i=n.map((function(t){if(d5(t))return{filter:N5(t,e)};if(M5(t)&&eJ(t.bin))return Object.assign(Object.assign({},t),{bin:Z5(t.bin)});if(g5(t)){var n=t.from,r=n.selection,i=j5(n,["selection"]);return r?Object.assign(Object.assign({},t),{from:Object.assign({param:r},i)}):t}return t}));return Object.assign(Object.assign({},r),{transform:i})}return t}function R5(t,e){var n,r,i=DY(t);if(t1(i)&&eJ(i.bin)&&(i.bin=Z5(i.bin)),s1(i)&&(null===(r=null===(n=i.scale)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.selection)){var a=i.scale.domain,o=a.selection,u=j5(a,["selection"]);i.scale.domain=Object.assign(Object.assign({},u),o?{param:o}:{})}if(J0(i))if(yo(i.condition))i.condition=i.condition.map((function(t){t.selection;var n=t.param,r=(t.test,j5(t,["selection","param","test"]));return n?t:Object.assign(Object.assign({},r),{test:N5(t,e)})}));else{var s=R5(i.condition,e),l=(s.selection,s.param),c=(s.test,j5(s,["selection","param","test"]));i.condition=l?i.condition:Object.assign(Object.assign({},c),{test:N5(i.condition,e)})}return i}function Z5(t){var e=t.extent;if(null==e?void 0:e.selection){var n=e.selection,r=j5(e,["selection"]);return Object.assign(Object.assign({},t),{extent:Object.assign(Object.assign({},r),{param:n})})}return t}function N5(t,e){var n=function(t){return MY(t,(function(t){var n,r,i,a={param:t,empty:null===(n=e.emptySelections[t])||void 0===n||n};return null!==(r=(i=e.selectionPredicates)[t])&&void 0!==r||(i[t]=[]),e.selectionPredicates[t].push(a),a}))};return t.selection?n(t.selection):MY(t.test||t.filter,(function(t){return t.selection?n(t.selection):t}))}function z5(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return U5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U5(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function U5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H5(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}for(var W5=function(t){(0,Q.Z)(n,t);var e=H5(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"map",value:function(t,e){var r,i=null!==(r=e.selections)&&void 0!==r?r:[];if(t.params&&!G1(t)){var a,o=[],u=z5(t.params);try{for(u.s();!(a=u.n()).done;){var s=a.value;q2(s)?i.push(s):o.push(s)}}catch(l){u.e(l)}finally{u.f()}t.params=o}return e.selections=i,fw((0,pa.Z)(n.prototype),"map",this).call(this,t,Y5(t,e))}},{key:"mapUnit",value:function(t,e){var n,r=e.selections;if(!r||!r.length)return t;var i,a=(null!==(n=e.path)&&void 0!==n?n:[]).concat(t.name),o=[],u=z5(r);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(s.views&&s.views.length){var l,c=z5(s.views);try{for(c.s();!(l=c.n()).done;){var f=l.value;(pu(f)&&(f===t.name||a.indexOf(f)>=0)||yo(f)&&f.map((function(t){return a.indexOf(t)})).every((function(t,e,n){return-1!==t&&(0===e||t>n[e-1])})))&&o.push(s)}}catch(h){c.e(h)}finally{c.f()}}else o.push(s)}}catch(h){u.e(h)}finally{u.f()}return o.length&&(t.params=o),t}}]),n}(P3),V5=function(){var t=X5[G5],e=W5.prototype[t];W5.prototype[t]=function(t,n){return e.call(this,t,Y5(t,n))}},G5=0,X5=["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"];G5<X5.length;G5++)V5();function Y5(t,e){var n;return t.name?Object.assign(Object.assign({},e),{path:(null!==(n=e.path)&&void 0!==n?n:[]).concat(t.name)}):e}function q5(t,e){void 0===e&&(e=M3(t.config));var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={config:e};return K5.map($5.map(J5.map(t,n),n),n)}(t,e),r=function(t,e,n){var r=e.width,i=e.height,a=G1(t)||F3(t),o={};a?"container"==r&&"container"==i?(o.type="fit",o.contains="padding"):"container"==r?(o.type="fit-x",o.contains="padding"):"container"==i&&(o.type="fit-y",o.contains="padding"):("container"==r&&(CK(RJ("width")),r=void 0),"container"==i&&(CK(RJ("height")),i=void 0));var u=Object.assign(Object.assign(Object.assign({type:"pad"},o),n?Q5(n.autosize):{}),Q5(t.autosize));"fit"!==u.type||a||(CK(LJ),u.type="pad");"container"==r&&"fit"!=u.type&&"fit-x"!=u.type&&CK(ZJ("width"));"container"==i&&"fit"!=u.type&&"fit-y"!=u.type&&CK(ZJ("height"));if(_Y(u,{type:"pad"}))return;return u}(n,{width:t.width,height:t.height,autosize:t.autosize},e);return Object.assign(Object.assign({},n),r?{autosize:r}:{})}var $5=new c5,J5=new B5,K5=new W5;function Q5(t){return pu(t)?{type:t}:null!=t?t:{}}function t6(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return e6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e6(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function e6(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var n6=["background","padding"];function r6(t,e){var n,r={},i=t6(n6);try{for(i.s();!(n=i.n()).done;){var a=n.value;t&&void 0!==t[a]&&(r[a]=wJ(t[a]))}}catch(o){i.e(o)}finally{i.f()}return e&&(r.params=t.params),r}function i6(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a6(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function a6(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o6=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,J.Z)(this,t),this.explicit=e,this.implicit=n}return(0,K.Z)(t,[{key:"clone",value:function(){return new t(DY(this.explicit),DY(this.implicit))}},{key:"combine",value:function(){return Object.assign(Object.assign({},this.explicit),this.implicit)}},{key:"get",value:function(t){return cq(this.explicit[t],this.implicit[t])}},{key:"getWithExplicit",value:function(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function(t,e){var n=e.value,r=e.explicit;void 0!==n&&this.set(t,n,r)}},{key:"set",value:function(t,e,n){return delete this[n?"implicit":"explicit"][t],this[n?"explicit":"implicit"][t]=e,this}},{key:"copyKeyFromSplit",value:function(t,e){var n=e.explicit,r=e.implicit;void 0!==n[t]?this.set(t,n[t],!0):void 0!==r[t]&&this.set(t,r[t],!1)}},{key:"copyKeyFromObject",value:function(t,e){void 0!==e[t]&&this.set(t,e[t],!0)}},{key:"copyAll",value:function(t){var e,n=i6(qY(t.combine()));try{for(n.s();!(e=n.n()).done;){var r=e.value,i=t.getWithExplicit(r);this.setWithExplicit(r,i)}}catch(a){n.e(a)}finally{n.f()}}}]),t}();function u6(t){return{explicit:!0,value:t}}function s6(t){return{explicit:!1,value:t}}function l6(t){return function(e,n,r,i){var a=t(e.value,n.value);return a>0?e:a<0?n:c6(e,n,r,i)}}function c6(t,e,n,r){return t.explicit&&e.explicit&&CK(function(t,e,n,r){return"Conflicting ".concat(e.toString(),' property "').concat(t.toString(),'" (').concat(PY(n)," and ").concat(PY(r),"). Using ").concat(PY(n),".")}(n,r,t.value,e.value)),t}function f6(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c6;return void 0===t||void 0===t.value?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:_Y(t.value,e.value)?t:i(t,e,n,r)}function h6(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var d6,p6=function(t){(0,Q.Z)(n,t);var e=h6(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,J.Z)(this,n),(t=e.call(this,r,i)).explicit=r,t.implicit=i,t.parseNothing=a,t}return(0,K.Z)(n,[{key:"clone",value:function(){var t=fw((0,pa.Z)(n.prototype),"clone",this).call(this);return t.parseNothing=this.parseNothing,t}}]),n}(o6);function g6(t){return"url"in t}function v6(t){return"values"in t}function m6(t){return"name"in t&&!g6(t)&&!v6(t)&&!y6(t)}function y6(t){return t&&(x6(t)||b6(t)||w6(t))}function x6(t){return"sequence"in t}function b6(t){return"sphere"in t}function w6(t){return"graticule"in t}function S6(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return k6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k6(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function k6(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}!function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup"}(d6||(d6={}));var C6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function E6(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ao;if(yo(t)){var r=t.map((function(t){return E6(t,e,n)}));return e?"[".concat(r.join(", "),"]"):r}return OK(t)?n(e?IK(t):jK(t)):e?n(PY(t)):t}function M6(t,e){var n,r,i=S6($Y(null!==(n=t.component.selection)&&void 0!==n?n:{}));try{for(i.s();!(r=i.n()).done;){var a,o=r.value,u=S6(s8);try{for(u.s();!(a=u.n()).done;){var s=a.value;s.defined(o)&&s.marks&&(e=s.marks(t,o,e))}}catch(l){u.e(l)}finally{u.f()}}}catch(l){i.e(l)}finally{i.f()}return e}function O6(t){return t.map((function(t){return t.on&&!t.on.length&&delete t.on,t}))}function A6(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}function _6(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return D6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D6(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function D6(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var T6=function(){function t(e,n){(0,J.Z)(this,t),this.debugName=n,this._children=[],this._parent=null,e&&(this.parent=e)}return(0,K.Z)(t,[{key:"clone",value:function(){throw new Error("Cannot clone node")}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t,t&&t.addChild(this)}},{key:"children",get:function(){return this._children}},{key:"numChildren",value:function(){return this._children.length}},{key:"addChild",value:function(t,e){this._children.includes(t)?CK("Attempt to add the same child twice."):void 0!==e?this._children.splice(e,0,t):this._children.push(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return this._children.splice(e,1),e}},{key:"remove",value:function(){var t,e=this._parent.removeChild(this),n=_6(this._children);try{for(n.s();!(t=n.n()).done;){var r=t.value;r._parent=this._parent,this._parent.addChild(r,e++)}}catch(i){n.e(i)}finally{n.f()}}},{key:"insertAsParentOf",value:function(t){var e=t.parent;e.removeChild(this),this.parent=e,t.parent=this}},{key:"swapWithParent",value:function(){var t,e=this._parent,n=e.parent,r=_6(this._children);try{for(r.s();!(t=r.n()).done;){t.value.parent=e}}catch(a){r.e(a)}finally{r.f()}this._children=[],e.removeChild(this);var i=e.parent.removeChild(e);this._parent=n,n.addChild(this,i),e.parent=this}}]),t}(),F6=function(t){(0,Q.Z)(n,t);var e=A6(n);function n(t,r,i,a){var o;return(0,J.Z)(this,n),(o=e.call(this,t,r)).type=i,o.refCounts=a,o._source=o._name=r,o.refCounts&&!(o._name in o.refCounts)&&(o.refCounts[o._name]=0),o}return(0,K.Z)(n,[{key:"clone",value:function(){var t=new this.constructor;return t.debugName="clone_".concat(this.debugName),t._source=this._source,t._name="clone_".concat(this._name),t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return void 0===this._hash&&(this._hash="Output ".concat(hq())),this._hash}},{key:"getSource",value:function(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function(){return!!this.refCounts[this._name]}},{key:"setSource",value:function(t){this._source=t}}]),n}(T6);function I6(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return P6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P6(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function P6(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function j6(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var B6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},L6=function(t){(0,Q.Z)(n,t);var e=j6(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).formula=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.formula))}},{key:"merge",value:function(t){for(var e in this.formula=Object.assign({},this.formula),t.formula)this.formula[e]||(this.formula[e]=t.formula[e]);var n,r=I6(t.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.removeChild(i),i.parent=this}}catch(a){r.e(a)}finally{r.f()}t.remove()}},{key:"removeFormulas",value:function(t){var e,n={},r=I6(JY(this.formula));try{for(r.s();!(e=r.n()).done;){var i=(0,W.Z)(e.value,2),a=i[0],o=i[1];t.has(o.as)||(n[a]=o)}}catch(u){r.e(u)}finally{r.f()}this.formula=n}},{key:"producedFields",value:function(){return new Set($Y(this.formula).map((function(t){return t.as})))}},{key:"dependentFields",value:function(){return new Set($Y(this.formula).map((function(t){return t.field})))}},{key:"hash",value:function(){return"TimeUnit ".concat(jY(this.formula))}},{key:"assemble",value:function(){var t,e=[],n=I6($Y(this.formula));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.field,a=r.as,o=XK(r.timeUnit),u=o.unit,s=o.utc,l=B6(o,["unit","utc"]);e.push(Object.assign(Object.assign(Object.assign(Object.assign({field:oq(i),type:"timeunit"},u?{units:HK(u)}:{}),s?{timezone:"utc"}:{}),l),{as:[a,"".concat(a,"_end")]}))}}catch(c){n.e(c)}finally{n.f()}return e}}],[{key:"makeFromEncoding",value:function(t,e){var r=e.reduceFieldDef((function(t,e){var n=e.field,r=e.timeUnit;if(r){var i=p1(e,{forAs:!0});t[jY({as:i,field:n,timeUnit:r})]={as:i,field:n,timeUnit:r}}return t}),{});return YY(r)?null:new n(t,r)}},{key:"makeFromTransform",value:function(t,e){var r=Object.assign({},e),i=r.timeUnit,a=B6(r,["timeUnit"]),o=XK(i),u=Object.assign(Object.assign({},a),{timeUnit:o});return new n(t,(0,Z.Z)({},jY(u),u))}}]),n}(T6);function R6(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Z6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z6(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Z6(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var N6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},z6="_tuple_fields",U6=(0,K.Z)((function t(){(0,J.Z)(this,t);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.items=n,this.hasChannel={},this.hasField={},this.hasSelectionId=!1})),H6={defined:function(){return!0},parse:function(t,e,n){var r,i=e.name,a=null!==(r=e.project)&&void 0!==r?r:e.project=new U6,o={},u={},s=new Set,l=function(t,e){for(var n="visual"===e?t.channel:t.field,r=QY("".concat(i,"_").concat(n)),a=1;s.has(r);a++)r=QY("".concat(i,"_").concat(n,"_").concat(a));return s.add(r),(0,Z.Z)({},e,r)},c=e.type,f=t.config.selection[c],h=void 0!==n.value?Ho(n.value):null,d=xo(n.select)?n.select:{},p=d.fields,g=d.encodings;if(!p&&!g&&h){var v,m=R6(h);try{for(m.s();!(v=m.n()).done;){var y=v.value;if(xo(y)){var x,b=R6(qY(y));try{for(b.s();!(x=b.n()).done;){var w=x.value;d$(w)?(g||(g=[])).push(w):"interval"===c?(CK('Interval selections should be initialized using "x" and/or "y" keys.'),g=f.encodings):(p||(p=[])).push(w)}}catch(P){b.e(P)}finally{b.f()}}}}catch(P){m.e(P)}finally{m.f()}}p||g||(g=f.encodings,"fields"in f&&(p=f.fields));var S,k=R6(null!=g?g:[]);try{for(k.s();!(S=k.n()).done;){var C=S.value,E=t.fieldDef(C);if(E){var M=E.field;if(E.aggregate){CK(HJ(C,E.aggregate));continue}if(!M){CK(UJ(C));continue}if(E.timeUnit){M=t.vgField(C);var O={timeUnit:E.timeUnit,as:M,field:E.field};u[jY(O)]=O}if(!o[M]){var A="E";if("interval"===c)jQ(t.getScaleComponent(C).get("type"))&&(A="R");else E.bin&&(A="R-RE");var _={field:M,channel:C,type:A};_.signals=Object.assign(Object.assign({},l(_,"data")),l(_,"visual")),a.items.push(o[M]=_),a.hasField[M]=a.hasChannel[C]=o[M],a.hasSelectionId=a.hasSelectionId||M===V2}}else CK(UJ(C))}}catch(P){k.e(P)}finally{k.f()}var D,T=R6(null!=p?p:[]);try{for(T.s();!(D=T.n()).done;){var F=D.value;if(!a.hasField[F]){var I={type:"E",field:F};I.signals=Object.assign({},l(I,"data")),a.items.push(I),a.hasField[F]=I,a.hasSelectionId=a.hasSelectionId||F===V2}}}catch(P){T.e(P)}finally{T.f()}h&&(e.init=h.map((function(t){return a.items.map((function(e){return xo(t)?void 0!==t[e.channel]?t[e.channel]:t[e.field]:t}))}))),YY(u)||(a.timeUnit=new L6(null,u))},signals:function(t,e,n){var r=e.name+z6,i=n.filter((function(t){return t.name===r}));return i.length>0||e.project.hasSelectionId?n:n.concat({name:r,value:e.project.items.map((function(t){t.signals,t.hasLegend;var e=N6(t,["signals","hasLegend"]);return e.field=oq(e.field),e}))})}},W6=H6;function V6(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return G6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G6(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function G6(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X6={defined:function(t){return"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind},parse:function(t,e){var n,r=e.scales=[],i=V6(e.project.items);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.channel;if(R$(o)){var u=t.getScaleComponent(o),s=u?u.get("type"):void 0;u&&jQ(s)?(u.set("selectionExtent",{param:e.name,field:a.field},!0),r.push(a)):CK("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}}}catch(l){i.e(l)}finally{i.f()}},topLevelSignals:function(t,e,n){var r=e.scales.filter((function(t){return 0===n.filter((function(e){return e.name===t.signals.data})).length}));if(!t.parent||$6(t)||0===r.length)return n;var i=n.filter((function(t){return t.name===e.name}))[0],a=i.update;if(a.indexOf(u8)>=0)i.update="{".concat(r.map((function(t){return"".concat(Su(oq(t.field)),": ").concat(t.signals.data)})).join(", "),"}");else{var o,u=V6(r);try{for(u.s();!(o=u.n()).done;){var s=o.value,l="".concat(Su(oq(s.field)),": ").concat(s.signals.data);a.includes(l)||(a="".concat(a.substring(0,a.length-1),", ").concat(l,"}"))}}catch(c){u.e(c)}finally{u.f()}i.update=a}return n.concat(r.map((function(t){return{name:t.signals.data}})))},signals:function(t,e,n){if(t.parent&&!$6(t)){var r,i=V6(e.scales);try{var a=function(){var t=r.value,e=n.filter((function(e){return e.name===t.signals.data}))[0];e.push="outer",delete e.value,delete e.update};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}return n}},Y6=X6;function q6(t,e){var n=Su(t.scaleName(e));return"domain(".concat(n,")")}function $6(t){var e;return t.parent&&xet(t.parent)&&(null!==(e=!t.parent.parent)&&void 0!==e?e:$6(t.parent.parent))}function J6(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return K6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K6(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function K6(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Q6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},t4="_brush",e4="_scale_trigger",n4={defined:function(t){return"interval"===t.type},signals:function(t,e,n){var r=e.name,i=r+z6,a=Y6.defined(e),o=e.init?e.init[0]:null,u=[],s=[];if(e.translate&&!a){var l="!event.item || event.item.mark.name !== ".concat(Su(r+t4));i4(e,(function(t,e){var n,r,i=Ho(null!==(n=(r=e.between[0]).filter)&&void 0!==n?n:r.filter=[]);return i.includes(l)||i.push(l),t}))}e.project.items.forEach((function(r,i){var a=r.channel;if(a===Sq||a===kq){var l=o?o[i]:null,c=function(t,e,n,r){var i=n.channel,a=n.signals.visual,o=n.signals.data,u=Y6.defined(e),s=Su(t.scaleName(i)),l=t.getScaleComponent(i),c=l?l.get("type"):void 0,f=function(t){return"scale(".concat(s,", ").concat(t,")")},h=t.getSizeSignalRef(i===Sq?"width":"height").signal,d="".concat(i,"(unit)"),p=i4(e,(function(t,e){return[].concat((0,X.Z)(t),[{events:e.between[0],update:"[".concat(d,", ").concat(d,"]")},{events:e,update:"[".concat(a,"[0], clamp(").concat(d,", 0, ").concat(h,")]")}])}));return p.push({events:{signal:e.name+e4},update:jQ(c)?"[".concat(f("".concat(o,"[0]")),", ").concat(f("".concat(o,"[1]")),"]"):"[0, 0]"}),u?[{name:o,on:[]}]:[Object.assign(Object.assign({name:a},r?{init:E6(r,!0,f)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:o},r?{init:E6(r)}:{}),{on:[{events:{signal:a},update:"".concat(a,"[0] === ").concat(a,"[1] ? null : invert(").concat(s,", ").concat(a,")")}]})]}(t,e,r,l),f=r.signals.data,h=r.signals.visual,d=Su(t.scaleName(a)),p=jQ(t.getScaleComponent(a).get("type"))?"+":"";n.push.apply(n,(0,X.Z)(c)),u.push(f),s.push({scaleName:t.scaleName(a),expr:"(!isArray(".concat(f,") || ")+"(".concat(p,"invert(").concat(d,", ").concat(h,")[0] === ").concat(p).concat(f,"[0] && ")+"".concat(p,"invert(").concat(d,", ").concat(h,")[1] === ").concat(p).concat(f,"[1]))")})}else CK("Interval selections only support x and y encoding channels.")})),!a&&s.length&&n.push({name:r+e4,value:{},on:[{events:s.map((function(t){return{scale:t.scaleName}})),update:"".concat(s.map((function(t){return t.expr})).join(" && ")," ? ").concat(r+e4," : {}")}]});var c="unit: ".concat(c8(t),", fields: ").concat(i,", values");return n.concat(Object.assign(Object.assign({name:r+a8},o?{init:"{".concat(c,": ").concat(E6(o),"}")}:{}),u.length?{on:[{events:[{signal:u.join(" || ")}],update:"".concat(u.join(" && ")," ? {").concat(c,": [").concat(u,"]} : null")}]}:{}))},marks:function(t,e,n){var r=e.name,i=e.project.hasChannel,a=i.x,o=i.y,u=null==a?void 0:a.signals.visual,s=null==o?void 0:o.signals.visual,l="data(".concat(Su(e.name+i8),")");if(Y6.defined(e)||!a&&!o)return n;var c={x:void 0!==a?{signal:"".concat(u,"[0]")}:{value:0},y:void 0!==o?{signal:"".concat(s,"[0]")}:{value:0},x2:void 0!==a?{signal:"".concat(u,"[1]")}:{field:{group:"width"}},y2:void 0!==o?{signal:"".concat(s,"[1]")}:{field:{group:"height"}}};if("global"===e.resolve){var f,h=J6(qY(c));try{for(h.s();!(f=h.n()).done;){var d=f.value;c[d]=[Object.assign({test:"".concat(l,".length && ").concat(l,"[0].unit === ").concat(c8(t))},c[d]),{value:0}]}}catch(b){h.e(b)}finally{h.f()}}var p=e.mark,g=p.fill,v=p.fillOpacity,m=p.cursor,y=Q6(p,["fill","fillOpacity","cursor"]),x=qY(y).reduce((function(t,e){return t[e]=[{test:[void 0!==a&&"".concat(u,"[0] !== ").concat(u,"[1]"),void 0!==o&&"".concat(s,"[0] !== ").concat(s,"[1]")].filter((function(t){return t})).join(" && "),value:y[e]},{value:null}],t}),{});return[{name:"".concat(r+t4,"_bg"),type:"rect",clip:!0,encode:{enter:{fill:{value:g},fillOpacity:{value:v}},update:c}}].concat((0,X.Z)(n),[{name:r+t4,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},m?{cursor:{value:m}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},c),x)}}])}},r4=n4;function i4(t,e){return t.events.reduce((function(t,n){return n.between?e(t,n):(CK("".concat(n," is not an ordered event stream for interval selections.")),t)}),[])}var a4={defined:function(t){return"point"===t.type},signals:function(t,e,n){var r,i=e.name,a=i+z6,o=e.project,u="(item().isVoronoi ? datum.datum : datum)",s=$Y(null!==(r=t.component.selection)&&void 0!==r?r:{}).reduce((function(t,e){return"interval"===e.type?t.concat(e.name+t4):t}),[]).map((function(t){return"indexof(item().mark.name, '".concat(t,"') < 0")})).join(" && "),l="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0".concat(s?" && ".concat(s):""),c="unit: ".concat(c8(t),", ");if(e.project.hasSelectionId)c+="".concat(V2,": ").concat(u,"[").concat(Su(V2),"]");else{var f=o.items.map((function(e){var n=t.fieldDef(e.channel);return(null==n?void 0:n.bin)?"[".concat(u,"[").concat(Su(t.vgField(e.channel,{})),"], ")+"".concat(u,"[").concat(Su(t.vgField(e.channel,{binSuffix:"end"})),"]]"):"".concat(u,"[").concat(Su(e.field),"]")})).join(", ");c+="fields: ".concat(a,", values: [").concat(f,"]")}var h=e.events;return n.concat([{name:i+a8,on:h?[{events:h,update:"".concat(l," ? {").concat(c,"} : null"),force:!0}]:[]}])}},o4=a4;function u4(t,e,n,r){var i=J0(e)&&e.condition,a=r(e);if(i){var o=Ho(i).map((function(e){var n=r(e);if(function(t){return t.param}(e)){var i=e.param,a=e.empty,o=b8(t,{param:i,empty:a});return Object.assign({test:o},n)}var u=S8(t,e.test);return Object.assign({test:u},n)}));return(0,Z.Z)({},n,[].concat((0,X.Z)(o),(0,X.Z)(void 0!==a?[a]:[])))}return void 0!==a?(0,Z.Z)({},n,a):{}}function s4(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=t.encoding[e];return u4(t,n,e,(function(e){return l4(e,t.config)}))}function l4(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(t){if(u1(t))return kJ(t.value);if(a1(t)){var r=C1(t),i=r.format,a=r.formatType;return O0({fieldOrDatumDef:t,format:i,formatType:a,expr:n,config:e})}}}function c4(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.encoding,r=t.markDef,i=t.config,a=t.stack,o=n.tooltip;if(yo(o))return{tooltip:h4({tooltip:o},a,i,e)};var u=e.reactiveGeom?"datum.datum":"datum";return u4(t,o,"tooltip",(function(t){var o=l4(t,i,u);if(o)return o;if(null!==t){var s=AJ("tooltip",r,i);return!0===s&&(s={content:"encoding"}),pu(s)?{value:s}:xo(s)?fJ(s)?s:"encoding"===s.content?h4(n,a,i,e):{signal:u}:void 0}}))}function f4(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.reactiveGeom,a={},o=i?"datum.datum":"datum",u=[];function s(r,i){var s,l=m$(i),c=o1(r)?r:Object.assign(Object.assign({},r),{type:t[l].type}),f=Ho(c.title||k1(c,n)).join(", ");if(A$(i)){var h="x"===i?"x2":"y2",d=M1(t[h]);if(tJ(c.bin)&&d){var p=p1(c,{expr:o}),g=p1(d,{expr:o}),v=C1(c);s=j0(p,g,v.format,v.formatType,n),a[h]=!0}}if((A$(i)||i===Dq||i===Aq)&&e&&e.fieldChannel===i&&"normalize"===e.offset){var m=C1(c);s=O0({fieldOrDatumDef:c,format:m.format,formatType:m.formatType,expr:o,config:n,normalizeStack:!0}).signal}null!=s||(s=l4(c,n,o).signal),u.push({channel:i,key:f,value:s})}a2(t,(function(t,e){t1(t)?s(t,e):K0(t)&&s(t.condition,e)}));for(var l={},c=0,f=u;c<f.length;c++){var h=f[c],d=h.channel,p=h.key,g=h.value;a[d]||l[p]||(l[p]=g)}return l}function h4(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.reactiveGeom,a=f4(t,e,n,{reactiveGeom:i}),o=JY(a).map((function(t){var e=(0,W.Z)(t,2),n=e[0],r=e[1];return'"'.concat(n,'": ').concat(r)}));return o.length>0?{signal:"{".concat(o.join(", "),"}")}:void 0}function d4(t){var e=AJ("aria",t.markDef,t.config);return!1===e?{}:Object.assign(Object.assign(Object.assign({},e?{aria:e}:{}),function(t){var e=t.mark,n=t.markDef,r=t.config;if(!1===r.aria)return{};var i=AJ("ariaRoleDescription",n,r);if(null!=i)return{ariaRoleDescription:{value:i}};return e in gJ?{}:{ariaRoleDescription:{value:e}}}(t)),function(t){var e=t.encoding,n=t.markDef,r=t.config,i=t.stack,a=e.description;if(a)return u4(t,a,"description",(function(e){return l4(e,t.config)}));var o=AJ("description",n,r);if(null!=o)return{description:kJ(o)};if(!1===r.aria)return{};var u=f4(e,i,r);if(YY(u))return;return{description:{signal:JY(u).map((function(t,e){var n=(0,W.Z)(t,2),r=n[0],i=n[1];return'"'.concat(e>0?"; ":"").concat(r,': " + (').concat(i,")")})).join(" + ")}}}(t))}function p4(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.markDef,i=e.encoding,a=e.config,o=n.vgChannel,u=n.defaultRef,s=n.defaultValue;void 0===u&&(null!=s||(s=AJ(t,r,a,{vgChannel:o,ignoreVgConfig:!0})),void 0!==s&&(u=kJ(s)));var l=i[t];return u4(e,l,null!=o?o:t,(function(n){return k0({channel:t,channelDef:n,markDef:r,config:a,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:u})}))}function g4(t){var e,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{filled:void 0},o=t.markDef,u=t.encoding,s=t.config,l=o.type,c=null!==(e=a.filled)&&void 0!==e?e:AJ("filled",o,s),f=LY(["bar","point","circle","square","geoshape"],l)?"transparent":void 0,h=null!==(r=null!==(n=AJ(!0===c?"color":void 0,o,s,{vgChannel:"fill"}))&&void 0!==n?n:s.mark[!0===c&&"color"])&&void 0!==r?r:f,d=null!==(i=AJ(!1===c?"color":void 0,o,s,{vgChannel:"stroke"}))&&void 0!==i?i:s.mark[!1===c&&"color"],p=c?"fill":"stroke",g=Object.assign(Object.assign({},h?{fill:kJ(h)}:{}),d?{stroke:kJ(d)}:{});return o.color&&(c?o.fill:o.stroke)&&CK(tK("property",{fill:"fill"in o,stroke:"stroke"in o})),Object.assign(Object.assign(Object.assign(Object.assign({},g),p4("color",t,{vgChannel:p,defaultValue:c?h:d})),p4("fill",t,{defaultValue:u.fill?h:void 0})),p4("stroke",t,{defaultValue:u.stroke?d:void 0}))}function v4(t){var e=t.channel,n=t.markDef,r=t.encoding,i=void 0===r?{}:r,a=t.model,o=t.bandPosition,u="".concat(e,"Offset"),s=n[u],l=i[u];if(("xOffset"===u||"yOffset"===u)&&l)return{offsetType:"encoding",offset:k0({channel:u,channelDef:l,markDef:n,config:null==a?void 0:a.config,scaleName:a.scaleName(u),scale:a.getScaleComponent(u),stack:null,defaultRef:kJ(s),bandPosition:o})};var c=n[u];return c?{offsetType:"visual",offset:c}:{}}function m4(t,e,n){var r=n.defaultPos,i=n.vgChannel,a=e.encoding,o=e.markDef,u=e.config,s=e.stack,l=a[t],c=a[x$(t)],f=e.scaleName(t),h=e.getScaleComponent(t),d=v4({channel:t,markDef:o,encoding:a,model:e,bandPosition:.5}),p=d.offset,g=d.offsetType,v=y4({model:e,defaultPos:r,channel:t,scaleName:f,scale:h}),m=!l&&A$(t)&&(a.latitude||a.longitude)?{field:e.getName(t)}:function(t){var e=t.channel,n=t.channelDef,r=t.scaleName,i=t.stack,a=t.offset,o=t.markDef;if(a1(n)&&i&&e===i.fieldChannel){if(t1(n)){var u=n.bandPosition;if(void 0!==u||"text"!==o.type||"radius"!==e&&"theta"!==e||(u=.5),void 0!==u)return S0({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:u,offset:a})}return w0(n,r,{suffix:"end"},{offset:a})}return y0(t)}({channel:t,channelDef:l,channel2Def:c,markDef:o,config:u,scaleName:f,scale:h,stack:s,offset:p,defaultRef:v,bandPosition:"encoding"===g?0:void 0});return m?(0,Z.Z)({},i||t,m):void 0}function y4(t){var e=t.model,n=t.defaultPos,r=t.channel,i=t.scaleName,a=t.scale,o=e.markDef,u=e.config;return function(){var t=m$(r),s=y$(r),l=AJ(r,o,u,{vgChannel:s});if(void 0!==l)return C0(r,l);switch(n){case"zeroOrMin":case"zeroOrMax":if(i){var c=a.get("type");if(LY([xQ,bQ,wQ],c));else if(a.domainDefinitelyIncludesZero())return{scale:i,value:0}}if("zeroOrMin"===n)return"y"===t?{field:{group:"height"}}:{value:0};switch(t){case"radius":return{signal:"min(".concat(e.width.signal,",").concat(e.height.signal,")/2")};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":var f=e[b$(r)];return Object.assign(Object.assign({},f),{mult:.5})}}}var x4={left:"x",center:"xc",right:"x2"},b4={top:"y",middle:"yc",bottom:"y2"};function w4(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle";if("radius"===t||"theta"===t)return y$(t);var i,a="x"===t?"align":"baseline",o=AJ(a,e,n);return fJ(o)?(CK(uK(a)),i=void 0):i=o,"x"===t?x4[i||("top"===r?"left":"center")]:b4[i||r]}function S4(t,e,n){var r=n.defaultPos,i=n.defaultPos2;return n.range?k4(t,e,{defaultPos:r,defaultPos2:i}):m4(t,e,{defaultPos:r})}function k4(t,e,n){var r=n.defaultPos,i=n.defaultPos2,a=e.markDef,o=e.config,u=x$(t),s=b$(t),l=function(t,e,n){var r,i=t.encoding,a=t.mark,o=t.markDef,u=t.stack,s=t.config,l=m$(n),c=b$(n),f=y$(n),h=i[l],d=t.scaleName(l),p=t.getScaleComponent(l),g=v4(n in i||n in o?{channel:n,markDef:o,encoding:i,model:t}:{channel:l,markDef:o,encoding:i,model:t}),v=g.offset;if(!h&&("x2"===n||"y2"===n)&&(i.latitude||i.longitude)){var m=b$(n),y=t.markDef[m];return null!=y?(0,Z.Z)({},m,{value:y}):(0,Z.Z)({},f,{field:t.getName(n)})}var x=function(t){var e=t.channel,n=t.channelDef,r=t.channel2Def,i=t.markDef,a=t.config,o=t.scaleName,u=t.scale,s=t.stack,l=t.offset,c=t.defaultRef;if(a1(n)&&s&&e.charAt(0)===s.fieldChannel.charAt(0))return w0(n,o,{suffix:"start"},{offset:l});return y0({channel:e,channelDef:r,scaleName:o,scale:u,stack:s,markDef:i,config:a,offset:l,defaultRef:c})}({channel:n,channelDef:h,channel2Def:i[n],markDef:o,config:s,scaleName:d,scale:p,stack:u,offset:v,defaultRef:void 0});if(void 0!==x)return(0,Z.Z)({},f,x);return C4(n,o)||C4(n,(r={},(0,Z.Z)(r,n,DJ(n,o,s.style)),(0,Z.Z)(r,c,DJ(c,o,s.style)),r))||C4(n,s[a])||C4(n,s.mark)||(0,Z.Z)({},f,y4({model:t,defaultPos:e,channel:n,scaleName:d,scale:p})())}(e,i,u),c=l[s]?w4(t,a,o):y$(t);return Object.assign(Object.assign({},m4(t,e,{defaultPos:r,vgChannel:c})),l)}function C4(t,e){var n=b$(t),r=y$(t);if(void 0!==e[r])return(0,Z.Z)({},r,C0(t,e[r]));if(void 0!==e[t])return(0,Z.Z)({},r,C0(t,e[t]));if(e[n]){var i=e[n];if(!p0(i))return(0,Z.Z)({},n,C0(t,i));CK(function(t){return"Position range does not support relative band size for ".concat(t,".")}(n))}}function E4(t,e){var n,r,i=t.config,a=t.encoding,o=t.markDef,u=o.type,s=x$(e),l=b$(e),c=a[e],f=a[s],h=t.getScaleComponent(e),d=h?h.get("type"):void 0,p=o.orient,g=null!==(r=null!==(n=a[l])&&void 0!==n?n:a.size)&&void 0!==r?r:AJ("size",o,i,{vgChannel:l}),v="bar"===u&&("x"===e?"vertical"===p:"horizontal"===p);return!t1(c)||!(Q$(c.bin)||tJ(c.bin)||c.timeUnit&&!f)||g&&!p0(g)||PQ(d)?(a1(c)&&PQ(d)||v)&&!f?function(t,e,n){var r,i=n.markDef,a=n.encoding,o=n.config,u=n.stack,s=i.orient,l=n.scaleName(e),c=n.getScaleComponent(e),f=b$(e),h=x$(e),d=function(t){switch(t){case Sq:return"xOffset";case kq:return"yOffset";case Cq:return"x2Offset";case Eq:return"y2Offset";case Dq:return"thetaOffset";case Aq:return"radiusOffset";case Tq:return"theta2Offset";case _q:return"radius2Offset"}}(e),p=n.scaleName(d),g="horizontal"===s&&"y"===e||"vertical"===s&&"x"===e;(a.size||i.size)&&(g?r=p4("size",n,{vgChannel:f,defaultRef:kJ(i.size)}):CK(function(t){return'Cannot apply size to non-oriented mark "'.concat(t,'".')}(i.type)));var v=!!r,m=q0({channel:e,fieldDef:t,markDef:i,config:o,scaleType:null==c?void 0:c.get("type"),useVlSizeChannel:g});r=r||(0,Z.Z)({},f,function(t,e,n,r,i){if(p0(i)){if(!n)return{mult:i.band,field:{group:t}};var a=n.get("type");if("band"===a){var o="bandwidth('".concat(e,"')");return 1!==i.band&&(o="".concat(i.band," * ").concat(o)),{signal:"max(0.25, ".concat(o,")")}}1!==i.band&&(CK(function(t){return"Cannot use the relative band size with ".concat(t," scale.")}(a)),i=void 0)}else{if(fJ(i))return i;if(i)return{value:i}}if(n){var u=n.get("range");if(hJ(u)&&hu(u.step))return{value:u.step-2}}var s=d3(r.view,t);return{value:s-2}}(f,p||l,c,o,m));var y="band"===(null==c?void 0:c.get("type"))&&p0(m)&&!v?"top":"middle",x=w4(e,i,o,y),b="xc"===x||"yc"===x,w=v4({channel:e,markDef:i,encoding:a,model:n,bandPosition:b?.5:0}),S=w.offset,k=w.offsetType,C=y0({channel:e,channelDef:t,markDef:i,config:o,scaleName:l,scale:c,stack:u,offset:S,defaultRef:y4({model:n,defaultPos:"mid",channel:e,scaleName:l,scale:c}),bandPosition:b?"encoding"===k?0:.5:fJ(m)?{signal:"(1-".concat(m,")/2")}:p0(m)?(1-m.band)/2:0});if(f)return Object.assign((0,Z.Z)({},x,C),r);var E,M=y$(h),O=r[f],A=S?Object.assign(Object.assign({},O),{offset:S}):O;return E={},(0,Z.Z)(E,x,C),(0,Z.Z)(E,M,yo(C)?[C[0],Object.assign(Object.assign({},C[1]),{offset:A})]:Object.assign(Object.assign({},C),{offset:A})),E}(c,e,t):k4(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function(t){var e,n,r,i,a=t.fieldDef,o=t.fieldDef2,u=t.channel,s=t.model,l=s.config,c=s.markDef,f=s.encoding,h=s.getScaleComponent(u),d=s.scaleName(u),p=h?h.get("type"):void 0,g=h.get("reverse"),v=q0({channel:u,fieldDef:a,markDef:c,config:l,scaleType:p}),m=null===(e=s.component.axes[u])||void 0===e?void 0:e[0],y=null!==(n=null==m?void 0:m.get("translate"))&&void 0!==n?n:.5,x=A$(u)&&null!==(r=AJ("binSpacing",c,l))&&void 0!==r?r:0,b=x$(u),w=y$(u),S=y$(b),k=v4({channel:u,markDef:c,encoding:f,model:s,bandPosition:0}),C=k.offset,E=fJ(v)?{signal:"(1-".concat(v.signal,")/2")}:p0(v)?(1-v.band)/2:.5;if(Q$(a.bin)||a.timeUnit)return i={},(0,Z.Z)(i,S,O4({fieldDef:a,scaleName:d,bandPosition:E,offset:M4(b,x,g,y,C)})),(0,Z.Z)(i,w,O4({fieldDef:a,scaleName:d,bandPosition:fJ(E)?{signal:"1-".concat(E.signal)}:1-E,offset:M4(u,x,g,y,C)})),i;if(tJ(a.bin)){var M,O,A=w0(a,d,{},{offset:M4(b,x,g,y,C)});if(t1(o))return M={},(0,Z.Z)(M,S,A),(0,Z.Z)(M,w,w0(o,d,{},{offset:M4(u,x,g,y,C)})),M;if(eJ(a.bin)&&a.bin.step)return O={},(0,Z.Z)(O,S,A),(0,Z.Z)(O,w,{signal:'scale("'.concat(d,'", ').concat(p1(a,{expr:"datum"})," + ").concat(a.bin.step,")"),offset:M4(u,x,g,y,C)}),O}return void CK(yK(b))}({fieldDef:c,fieldDef2:f,channel:e,model:t})}function M4(t,e,n,r,i){if(n$(t))return 0;var a="x"===t||"y2"===t?-e/2:e/2;if(fJ(n)||fJ(i)||fJ(r)){var o=MJ(n),u=MJ(i),s=MJ(r);return{signal:(s?"".concat(s," + "):"")+(o?"(".concat(o," ? -1 : 1) * "):"")+(u?"(".concat(u," + ").concat(a,")"):a)}}return i=i||0,r+(n?-i-a:+i+a)}function O4(t){var e=t.fieldDef;return S0({scaleName:t.scaleName,fieldOrDatumDef:e,bandPosition:t.bandPosition,offset:t.offset})}var A4=new Set(["aria","width","height"]);function _4(t,e){var n="include"===e.color?g4(t):{},r=n.fill,i=void 0===r?void 0:r,a=n.stroke,o=void 0===a?void 0:a;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(t,e){return pJ.reduce((function(n,r){return A4.has(r)||void 0===t[r]||"ignore"===e[r]||(n[r]=kJ(t[r])),n}),{})}(t.markDef,e)),D4(t,"fill",i)),D4(t,"stroke",o)),p4("opacity",t)),p4("fillOpacity",t)),p4("strokeOpacity",t)),p4("strokeWidth",t)),p4("strokeDash",t)),function(t){var e=t.encoding,n=t.mark,r=e.order;return!u0(n)&&u1(r)?u4(t,r,"zindex",(function(t){return kJ(t.value)})):{}}(t)),c4(t)),s4(t,"href")),d4(t))}function D4(t,e,n){var r=t.config,i=t.mark;if("hide"===AJ("invalid",t.markDef,r)&&n&&!u0(i)){var a=function(t,e){var n=e.invalid,r=void 0!==n&&n,i=e.channels.reduce((function(e,n){var r=t.getScaleComponent(n);if(r){var i=r.get("type"),a=t.vgField(n,{expr:"datum"});a&&jQ(i)&&(e[a]=!0)}return e}),{}),a=qY(i);if(a.length>0){var o=r?"||":"&&";return a.map((function(t){return b0(t,r)})).join(" ".concat(o," "))}return}(t,{invalid:!0,channels:L$});if(a)return(0,Z.Z)({},e,[{test:a,value:null}].concat((0,X.Z)(Ho(n))))}return n?(0,Z.Z)({},e,n):{}}function T4(t){var e=t.config;if(AJ("invalid",t.markDef,e)){var n=function(t,e){var n=e.invalid,r=void 0!==n&&n,i=e.channels.reduce((function(e,n){var r,i=t.getScaleComponent(n);if(i){var a=i.get("type"),o=t.vgField(n,{expr:"datum",binSuffix:(null===(r=t.stack)||void 0===r?void 0:r.impute)?"mid":void 0});o&&jQ(a)&&(e[o]=!0)}return e}),{}),a=qY(i);if(a.length>0){var o=r?"||":"&&";return a.map((function(t){return b0(t,r)})).join(" ".concat(o," "))}return}(t,{channels:O$});if(n)return{defined:{signal:n}}}return{}}function F4(t,e){if(void 0!==e)return(0,Z.Z)({},t,kJ(e))}function I4(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return P4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P4(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function P4(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var j4="voronoi",B4={defined:function(t){return"point"===t.type&&t.nearest},parse:function(t,e){if(e.events){var n,r=I4(e.events);try{for(r.s();!(n=r.n()).done;){n.value.markname=t.getName(j4)}}catch(i){r.e(i)}finally{r.f()}}},marks:function(t,e,n){var r=e.project.hasChannel,i=r.x,a=r.y,o=t.mark;if(u0(o))return CK(function(t){return'The "nearest" transform is not supported for '.concat(t," marks.")}(o)),n;var u={name:t.getName(j4),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},c4(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!a?"datum.datum.x || 0":"0"},y:{expr:a||!i?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},s=0,l=!1;return n.forEach((function(e,n){var r,i=null!==(r=e.name)&&void 0!==r?r:"";i===t.component.mark[0].name?s=n:i.indexOf(j4)>=0&&(l=!0)})),l||n.splice(s+1,0,u),n}},L4=B4,R4={defined:function(t){return"point"===t.type&&"global"===t.resolve&&t.bind&&"scales"!==t.bind&&!X2(t.bind)},parse:function(t,e,n){return h8(e,n)},topLevelSignals:function(t,e,n){var r=e.name,i=e.project,a=e.bind,o=e.init&&e.init[0],u=L4.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((function(t,i){var s,l,c=QY("".concat(r,"_").concat(t.field)),f=n.filter((function(t){return t.name===c}));f.length||n.unshift(Object.assign(Object.assign({name:c},o?{init:E6(o[i])}:{value:null}),{on:e.events?[{events:e.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(u,"[").concat(Su(t.field),"] : null")}]:[],bind:null!==(l=null!==(s=a[t.field])&&void 0!==s?s:a[t.channel])&&void 0!==l?l:a}))})),n},signals:function(t,e,n){var r=e.name,i=e.project,a=n.filter((function(t){return t.name===r+a8}))[0],o=r+z6,u=i.items.map((function(t){return QY("".concat(r,"_").concat(t.field))})),s=u.map((function(t){return"".concat(t," !== null")})).join(" && ");return u.length&&(a.update="".concat(s," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null")),delete a.value,delete a.on,n}},Z4=R4,N4="_toggle",z4={defined:function(t){return"point"===t.type&&!!t.toggle},signals:function(t,e,n){return n.concat({name:e.name+N4,value:!1,on:[{events:e.events,update:e.toggle}]})},modifyExpr:function(t,e){var n=e.name+a8,r=e.name+N4;return"".concat(r," ? null : ").concat(n,", ")+("global"===e.resolve?"".concat(r," ? null : true, "):"".concat(r," ? null : {unit: ").concat(c8(t),"}, "))+"".concat(r," ? ").concat(n," : null")}};function U4(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return H4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H4(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function H4(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var W4={defined:function(t){return void 0!==t.clear&&!1!==t.clear},parse:function(t,e){e.clear&&(e.clear=pu(e.clear)?iW(e.clear,"view"):e.clear)},topLevelSignals:function(t,e,n){if(Z4.defined(e)){var r,i=U4(e.project.items);try{var a=function(){var t=r.value,i=n.findIndex((function(n){return n.name===QY("".concat(e.name,"_").concat(t.field))}));-1!==i&&n[i].on.push({events:e.clear,update:"null"})};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}return n},signals:function(t,e,n){function r(t,r){-1!==t&&n[t].on&&n[t].on.push({events:e.clear,update:r})}if("interval"===e.type){var i,a=U4(e.project.items);try{var o=function(){var t=i.value,e=n.findIndex((function(e){return e.name===t.signals.visual}));(r(e,"[0, 0]"),-1===e)&&r(n.findIndex((function(e){return e.name===t.signals.data})),"null")};for(a.s();!(i=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}}else{var u=n.findIndex((function(t){return t.name===e.name+a8}));r(u,"null"),z4.defined(e)&&r(u=n.findIndex((function(t){return t.name===e.name+N4})),"false")}return n}};function V4(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return G4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G4(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function G4(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X4={defined:function(t){var e="global"===t.resolve&&t.bind&&X2(t.bind),n=1===t.project.items.length&&t.project.items[0].field!==V2;return e&&!n&&CK("Legend bindings are only supported for selections over an individual field or encoding channel."),e&&n},parse:function(t,e,n){var r,i=DY(n);if(i.select=pu(i.select)?{type:i.select,toggle:e.toggle}:Object.assign(Object.assign({},i.select),{toggle:e.toggle}),h8(e,i),xo(n.select)&&(n.select.on||n.select.clear)){var a,o='event.item && indexof(event.item.mark.role, "legend") < 0',u=V4(e.events);try{for(u.s();!(a=u.n()).done;){var s=a.value;s.filter=Ho(null!==(r=s.filter)&&void 0!==r?r:[]),s.filter.includes(o)||s.filter.push(o)}}catch(f){u.e(f)}finally{u.f()}}var l=Y2(e.bind)?e.bind.legend:"click",c=pu(l)?iW(l,"view"):Ho(l);e.bind={legend:{merge:c}}},topLevelSignals:function(t,e,n){var r,i=e.name,a=Y2(e.bind)&&e.bind.legend,o=function(t){return function(e){var n=DY(e);return n.markname=t,n}},u=V4(e.project.items);try{var s=function(){var t=r.value;if(!t.hasLegend)return"continue";var u="".concat(QY(t.field),"_legend"),s="".concat(i,"_").concat(u),l=n.filter((function(t){return t.name===s}));if(0===l.length){var c=a.merge.map(o("".concat(u,"_symbols"))).concat(a.merge.map(o("".concat(u,"_labels")))).concat(a.merge.map(o("".concat(u,"_entries"))));n.unshift(Object.assign(Object.assign({name:s},e.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:a.merge,update:"!event.item || !datum ? null : ".concat(s),force:!0}]}))}};for(u.s();!(r=u.n()).done;)s()}catch(l){u.e(l)}finally{u.f()}return n},signals:function(t,e,n){var r=e.name,i=e.project,a=n.find((function(t){return t.name===r+a8})),o=r+z6,u=i.items.filter((function(t){return t.hasLegend})).map((function(t){return QY("".concat(r,"_").concat(QY(t.field),"_legend"))})),s=u.map((function(t){return"".concat(t," !== null")})).join(" && "),l="".concat(s," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null");e.events&&u.length>0?a.on.push({events:u.map((function(t){return{signal:t}})),update:l}):u.length>0&&(a.update=l,delete a.value,delete a.on);var c=n.find((function(t){return t.name===r+N4})),f=Y2(e.bind)&&e.bind.legend;return c&&(e.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:f})):c.on[0].events=f),n}};var Y4="_translate_anchor",q4="_translate_delta",$4={defined:function(t){return"interval"===t.type&&t.translate},signals:function(t,e,n){var r=e.name,i=Y6.defined(e),a=r+Y4,o=e.project.hasChannel,u=o.x,s=o.y,l=iW(e.translate,"scope");return i||(l=l.map((function(t){return t.between[0].markname=r+t4,t}))),n.push({name:a,value:{},on:[{events:l.map((function(t){return t.between[0]})),update:"{x: x(unit), y: y(unit)"+(void 0!==u?", extent_x: ".concat(i?q6(t,Sq):"slice(".concat(u.signals.visual,")")):"")+(void 0!==s?", extent_y: ".concat(i?q6(t,kq):"slice(".concat(s.signals.visual,")")):"")+"}"}]},{name:r+q4,value:{},on:[{events:l,update:"{x: ".concat(a,".x - x(unit), y: ").concat(a,".y - y(unit)}")}]}),void 0!==u&&J4(t,e,u,"width",n),void 0!==s&&J4(t,e,s,"height",n),n}};function J4(t,e,n,r,i){var a,o,u=e.name,s=u+Y4,l=u+q4,c=n.channel,f=Y6.defined(e),h=i.filter((function(t){return t.name===n.signals[f?"data":"visual"]}))[0],d=t.getSizeSignalRef(r).signal,p=t.getScaleComponent(c),g=p.get("type"),v=p.get("reverse"),m=f?c===Sq?v?"":"-":v?"-":"":"",y="".concat(s,".extent_").concat(c),x="".concat(m).concat(l,".").concat(c," / ").concat(f?"".concat(d):"span(".concat(y,")")),b=f?"log"===g?"panLog":"symlog"===g?"panSymlog":"pow"===g?"panPow":"panLinear":"panLinear",w=f?"pow"===g?", ".concat(null!==(a=p.get("exponent"))&&void 0!==a?a:1):"symlog"===g?", ".concat(null!==(o=p.get("constant"))&&void 0!==o?o:1):"":"",S="".concat(b,"(").concat(y,", ").concat(x).concat(w,")");h.on.push({events:{signal:l},update:f?S:"clampRange(".concat(S,", 0, ").concat(d,")")})}var K4="_zoom_anchor",Q4="_zoom_delta",t8={defined:function(t){return"interval"===t.type&&t.zoom},signals:function(t,e,n){var r=e.name,i=Y6.defined(e),a=r+Q4,o=e.project.hasChannel,u=o.x,s=o.y,l=Su(t.scaleName(Sq)),c=Su(t.scaleName(kq)),f=iW(e.zoom,"scope");return i||(f=f.map((function(t){return t.markname=r+t4,t}))),n.push({name:r+K4,on:[{events:f,update:i?"{"+[l?"x: invert(".concat(l,", x(unit))"):"",c?"y: invert(".concat(c,", y(unit))"):""].filter((function(t){return!!t})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==u&&e8(t,e,u,"width",n),void 0!==s&&e8(t,e,s,"height",n),n}};function e8(t,e,n,r,i){var a,o,u=e.name,s=n.channel,l=Y6.defined(e),c=i.filter((function(t){return t.name===n.signals[l?"data":"visual"]}))[0],f=t.getSizeSignalRef(r).signal,h=t.getScaleComponent(s),d=h.get("type"),p=l?q6(t,s):c.name,g=u+Q4,v="".concat(u).concat(K4,".").concat(s),m=l?"log"===d?"zoomLog":"symlog"===d?"zoomSymlog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear",y=l?"pow"===d?", ".concat(null!==(a=h.get("exponent"))&&void 0!==a?a:1):"symlog"===d?", ".concat(null!==(o=h.get("constant"))&&void 0!==o?o:1):"":"",x="".concat(m,"(").concat(p,", ").concat(v,", ").concat(g).concat(y,")");c.on.push({events:{signal:g},update:l?x:"clampRange(".concat(x,", 0, ").concat(f,")")})}function n8(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r8(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function r8(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var i8="_store",a8="_tuple",o8="_modify",u8="vlSelectionResolve",s8=[o4,r4,W6,z4,Z4,Y6,X4,W4,$4,t8,L4];function l8(t){for(var e=t.parent;e&&!met(e);)e=e.parent;return e}function c8(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{escape:!0},n=e.escape,r=n?Su(t.name):t.name,i=l8(t);if(i){var a,o=i.facet,u=n8(s$);try{for(u.s();!(a=u.n()).done;){var s=a.value;o[s]&&(r+=" + '__facet_".concat(s,"_' + (facet[").concat(Su(i.vgField(s)),"])"))}}catch(l){u.e(l)}finally{u.f()}}return r}function f8(t){var e;return $Y(null!==(e=t.component.selection)&&void 0!==e?e:{}).reduce((function(t,e){return t||e.project.hasSelectionId}),!1)}function h8(t,e){!pu(e.select)&&e.select.on||delete t.events,!pu(e.select)&&e.select.clear||delete t.clear,!pu(e.select)&&e.select.toggle||delete t.toggle}function d8(t){var e=[];return"Identifier"===t.type?[t.name]:"Literal"===t.type?[t.value]:("MemberExpression"===t.type&&(e.push.apply(e,(0,X.Z)(d8(t.object))),e.push.apply(e,(0,X.Z)(d8(t.property)))),e)}function p8(t){return"MemberExpression"===t.object.type?p8(t.object):"datum"===t.object.name}function g8(t){var e=MN(t),n=new Set;return e.visit((function(t){"MemberExpression"===t.type&&p8(t)&&n.add(d8(t).slice(1).join("."))})),n}function v8(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var m8=function(t){(0,Q.Z)(n,t);var e=v8(n);function n(t,r,i){var a;return(0,J.Z)(this,n),(a=e.call(this,t)).model=r,a.filter=i,a.expr=S8(a.model,a.filter,(0,ha.Z)(a)),a._dependentFields=g8(a.expr),a}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,this.model,DY(this.filter))}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"producedFields",value:function(){return new Set}},{key:"assemble",value:function(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function(){return"Filter ".concat(this.expr)}}]),n}(T6);function y8(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return x8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x8(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function x8(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b8(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"datum",a=pu(e)?e:e.param,o=QY(a),u=Su(o+i8);try{r=t.getSelectionComponent(o,a)}catch(p){return"!!".concat(o)}if(r.project.timeUnit){var s=null!=n?n:t.component.data.raw,l=r.project.timeUnit.clone();s.parent?l.insertAsParentOf(s):s.parent=l}var c=r.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f="global"===r.resolve?")":", ".concat(Su(r.resolve),")"),h="".concat(c).concat(u,", ").concat(i).concat(f),d="length(data(".concat(u,"))");return!1===e.empty?"".concat(d," && ").concat(h):"!".concat(d," || ").concat(h)}function w8(t,e,n){var r,i=QY(e),a=n.encoding,o=n.field;try{r=t.getSelectionComponent(i,e)}catch(s){return i}if(a||o){if(a&&!o){var u=r.project.items.filter((function(t){return t.channel===a}));!u.length||u.length>1?(o=r.project.items[0].field,CK((u.length?"Multiple ":"No ")+"matching ".concat(Su(a)," encoding found for selection ").concat(Su(n.param),". ")+'Using "field": '.concat(Su(o),"."))):o=u[0].field}}else o=r.project.items[0].field,r.project.items.length>1&&CK('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(Su(o),"."));return"".concat(r.name,"[").concat(Su(oq(o)),"]")}function S8(t,e,n){return tq(e,(function(e){return pu(e)?e:function(t){return null==t?void 0:t.param}(e)?b8(t,e,n):oQ(e)}))}function k8(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return C8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C8(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function C8(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var E8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function M8(t,e){if(t)return yo(t)&&!cJ(t)?t.map((function(t){return k1(t,e)})).join(", "):t}function O8(t,e,n,r){var i,a,o,u,s;null!==(i=t.encode)&&void 0!==i||(t.encode={}),null!==(a=(u=t.encode)[e])&&void 0!==a||(u[e]={}),null!==(o=(s=t.encode[e]).update)&&void 0!==o||(s.update={}),t.encode[e].update[n]=r}function A8(t,e,n){var r,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},o=t.combine(),u=o.disable,s=o.orient,l=o.scale,c=o.labelExpr,f=o.title,h=o.zindex,d=E8(o,["disable","orient","scale","labelExpr","title","zindex"]);if(!u){for(var p in d){var g=z1[p],v=d[p];if(g&&g!==e&&"both"!==g)delete d[p];else if(Z1(v)){var m=v.condition,y=E8(v,["condition"]),x=Ho(m),b=R1[p];if(b){var w=b.vgProp,S=b.part,k=[].concat((0,X.Z)(x.map((function(t){var e=t.test,n=E8(t,["test"]);return Object.assign({test:S8(null,e)},n)}))),[y]);O8(d,S,w,k),delete d[p]}else if(null===b){var C={signal:x.map((function(t){var e=t.test,n=E8(t,["test"]);return"".concat(S8(null,e)," ? ").concat(EJ(n)," : ")})).join("")+EJ(y)};d[p]=C}}else if(fJ(v)){var E=R1[p];if(E){var M=E.vgProp,O=E.part;O8(d,O,M,v),delete d[p]}}LY(["labelAlign","labelBaseline"],p)&&null===d[p]&&delete d[p]}if("grid"===e){if(!d.grid)return;if(d.encode){var A=d.encode.grid;d.encode=Object.assign({},A?{grid:A}:{}),YY(d.encode)&&delete d.encode}return Object.assign(Object.assign({scale:l,orient:s},d),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:cq(h,0)})}if(a.header||!t.mainExtracted){if(void 0!==c){var _=c;(null===(i=null===(r=d.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&fJ(d.encode.labels.update.text)&&(_=uq(c,"datum.label",d.encode.labels.update.text.signal)),O8(d,"labels","text",{signal:_})}if(null===d.labelAlign&&delete d.labelAlign,d.encode){var D,T=k8(N1);try{for(T.s();!(D=T.n()).done;){var F=D.value;t.hasAxisPart(F)||delete d.encode[F]}}catch(P){T.e(P)}finally{T.f()}YY(d.encode)&&delete d.encode}var I=M8(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:l,orient:s,grid:!1},I?{title:I}:{}),d),!1===n.aria?{aria:!1}:{}),{zindex:cq(h,0)})}}}function _8(t){var e,n=t.component.axes,r=[],i=k8(O$);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(n[a]){var o,u=k8(n[a]);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(!s.get("disable")&&!s.get("gridScale")){var l="x"===a?"height":"width",c=t.getSizeSignalRef(l).signal;l!==c&&r.push({name:l,update:c})}}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return r}function D8(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return T8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T8(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function T8(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F8(t,e,n,r){return Object.assign.apply(null,[{}].concat((0,X.Z)(t.map((function(t){if("axisOrient"===t){var i,a="x"===n?"bottom":"left",o=e["x"===n?"axisBottom":"axisLeft"]||{},u=e["x"===n?"axisTop":"axisRight"]||{},s={},l=D8(new Set([].concat((0,X.Z)(qY(o)),(0,X.Z)(qY(u)))).values());try{for(l.s();!(i=l.n()).done;){var c=i.value;s[c]={signal:"".concat(r.signal,' === "').concat(a,'" ? ').concat(MJ(o[c])," : ").concat(MJ(u[c]))}}}catch(f){l.e(f)}finally{l.f()}return s}return e[t]})))))}function I8(t,e){var n,r,i=[{}],a=D8(t);try{for(a.s();!(r=a.n()).done;){var o=null===(n=e[r.value])||void 0===n?void 0:n.style;if(o){var u,s=D8(o=Ho(o));try{for(s.s();!(u=s.n()).done;){var l=u.value;i.push(e.style[l])}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){a.e(c)}finally{a.f()}return Object.assign.apply(null,i)}function P8(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=TJ(t,n,e);if(void 0!==a)return{configFrom:"style",configValue:a};for(var o=0,u=["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"];o<u.length;o++){var s=u[o];if(void 0!==(null===(r=i[s])||void 0===r?void 0:r[t]))return{configFrom:s,configValue:i[s][t]}}return{}}var j8={scale:function(t){var e=t.model,n=t.channel;return e.scaleName(n)},format:function(t){var e=t.fieldOrDatumDef,n=t.config,r=t.axis,i=r.format,a=r.formatType;return D0(e,e.type,i,a,n,!0)},formatType:function(t){var e=t.axis,n=t.fieldOrDatumDef,r=t.scaleType,i=e.formatType;return T0(i,n,r)},grid:function(t){var e,n=t.fieldOrDatumDef,r=t.axis,i=t.scaleType;return null!==(e=r.grid)&&void 0!==e?e:function(t,e){return!PQ(t)&&t1(e)&&!Q$(null==e?void 0:e.bin)&&!tJ(null==e?void 0:e.bin)}(i,n)},gridScale:function(t){return function(t,e){var n="x"===e?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n);return}(t.model,t.channel)},labelAlign:function(t){var e=t.axis,n=t.labelAngle,r=t.orient,i=t.channel;return e.labelAlign||R8(n,r,i)},labelAngle:function(t){return t.labelAngle},labelBaseline:function(t){var e=t.axis,n=t.labelAngle,r=t.orient,i=t.channel;return e.labelBaseline||L8(n,r,i)},labelFlush:function(t){var e,n=t.axis,r=t.fieldOrDatumDef,i=t.channel;return null!==(e=n.labelFlush)&&void 0!==e?e:function(t,e){if("x"===e&&LY(["quantitative","temporal"],t))return!0;return}(r.type,i)},labelOverlap:function(t){var e,n=t.axis,r=t.fieldOrDatumDef,i=t.scaleType;return null!==(e=n.labelOverlap)&&void 0!==e?e:function(t,e,n,r){if(n&&!xo(r)||"nominal"!==t&&"ordinal"!==t)return"log"!==e&&"symlog"!==e||"greedy";return}(r.type,i,t1(r)&&!!r.timeUnit,t1(r)?r.sort:void 0)},orient:function(t){return t.orient},tickCount:function(t){var e,n=t.channel,r=t.model,i=t.axis,a=t.fieldOrDatumDef,o=t.scaleType,u="x"===n?"width":"y"===n?"height":void 0,s=u?r.getSizeSignalRef(u):void 0;return null!==(e=i.tickCount)&&void 0!==e?e:function(t){var e,n=t.fieldOrDatumDef,r=t.scaleType,i=t.size,a=t.values;if(!a&&!PQ(r)&&"log"!==r){if(t1(n)){if(Q$(n.bin))return{signal:"ceil(".concat(i.signal,"/10)")};if(n.timeUnit&&LY(["month","hours","day","quarter"],null===(e=XK(n.timeUnit))||void 0===e?void 0:e.unit))return}return{signal:"ceil(".concat(i.signal,"/40)")}}return}({fieldOrDatumDef:a,scaleType:o,size:s,values:i.values})},title:function(t){var e=t.axis,n=t.model,r=t.channel;if(void 0!==e.title)return e.title;var i=Z8(n,r);if(void 0!==i)return i;var a=n.typedFieldDef(r),o="x"===r?"x2":"y2",u=n.fieldDef(o);return IJ(a?[G0(a)]:[],t1(u)?[G0(u)]:[])},values:function(t){return function(t,e){var n=t.values;if(yo(n))return B1(e,n);if(fJ(n))return n;return}(t.axis,t.fieldOrDatumDef)},zindex:function(t){var e,n=t.axis,r=t.fieldOrDatumDef,i=t.mark;return null!==(e=n.zindex)&&void 0!==e?e:function(t,e){if("rect"===t&&g1(e))return 1;return 0}(i,r)}};function B8(t){return"(((".concat(t.signal," % 360) + 360) % 360)")}function L8(t,e,n,r){if(void 0!==t){if("x"===n){if(fJ(t)){var i=B8(t),a=fJ(e)?"(".concat(e.signal,' === "top")'):"top"===e;return{signal:"(45 < ".concat(i," && ").concat(i," < 135) || (225 < ").concat(i," && ").concat(i,' < 315) ? "middle" :')+"(".concat(i," <= 45 || 315 <= ").concat(i,") === ").concat(a,' ? "bottom" : "top"')}}if(45<t&&t<135||225<t&&t<315)return"middle";if(fJ(e)){var o=t<=45||315<=t?"===":"!==";return{signal:"".concat(e.signal," ").concat(o,' "top" ? "bottom" : "top"')}}return(t<=45||315<=t)==("top"===e)?"bottom":"top"}if(fJ(t)){var u=B8(t),s=fJ(e)?"(".concat(e.signal,' === "left")'):"left"===e,l=r?'"middle"':"null";return{signal:"".concat(u," <= 45 || 315 <= ").concat(u," || (135 <= ").concat(u," && ").concat(u," <= 225) ? ").concat(l," : (45 <= ").concat(u," && ").concat(u," <= 135) === ").concat(s,' ? "top" : "bottom"')}}if(t<=45||315<=t||135<=t&&t<=225)return r?"middle":null;if(fJ(e)){var c=45<=t&&t<=135?"===":"!==";return{signal:"".concat(e.signal," ").concat(c,' "left" ? "top" : "bottom"')}}return(45<=t&&t<=135)==("left"===e)?"top":"bottom"}}function R8(t,e,n){if(void 0!==t){var r="x"===n,i=r?0:90,a=r?"bottom":"left";if(fJ(t)){var o=B8(t),u=fJ(e)?"(".concat(e.signal,' === "').concat(a,'")'):e===a;return{signal:"(".concat(i?"(".concat(o," + 90)"):o," % 180 === 0) ? ").concat(r?null:'"center"'," :")+"(".concat(i," < ").concat(o," && ").concat(o," < ").concat(180+i,") === ").concat(u,' ? "left" : "right"')}}if((t+i)%180==0)return r?null:"center";if(fJ(e)){var s=i<t&&t<180+i?"===":"!==",l="".concat(e.signal," ").concat(s,' "').concat(a,'"');return{signal:"".concat(l,' ? "left" : "right"')}}return(i<t&&t<180+i)==(e===a)?"left":"right"}}function Z8(t,e){var n="x"===e?"x2":"y2",r=t.fieldDef(e),i=t.fieldDef(n),a=r?r.title:void 0,o=i?i.title:void 0;return a&&o?PJ(a,o):a||(o||(void 0!==a?a:void 0!==o?o:void 0))}function N8(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var z8=function(t){(0,Q.Z)(n,t);var e=N8(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i._dependentFields=g8(i.transform.calculate),i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.as])}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function(){return"Calculate ".concat(jY(this.transform))}}],[{key:"parseAllForSortIndex",value:function(t,e){return e.forEachFieldDef((function(e,r){if(s1(e)&&z0(e.sort)){var i=e.field,a=e.timeUnit,o=e.sort,u=o.map((function(t,e){return"".concat(oQ({field:i,timeUnit:a,equal:t})," ? ").concat(e," : ")})).join("")+o.length;t=new n(t,{calculate:u,as:U8(e,r,{forAs:!0})})}})),t}}]),n}(T6);function U8(t,e,n){return p1(t,Object.assign({prefix:e,suffix:"sort_index"},null!=n?n:{}))}function H8(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return W8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W8(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function W8(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function V8(t,e){return LY(["top","bottom"],e)?"column":LY(["left","right"],e)||"row"===t?"row":"column"}function G8(t,e,n,r){var i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return cq((e||{})[t],i[t],n.header[t])}function X8(t,e,n,r){var i,a={},o=H8(t);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=G8(u,e||{},n,r);void 0!==s&&(a[u]=s)}}catch(l){o.e(l)}finally{o.f()}return a}var Y8=["row","column"],q8=["header","footer"];function $8(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return J8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J8(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function J8(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K8(t,e){var n=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,a=X8(["titleAnchor","titleAngle","titleOrient"],i.header,r,e),o=a.titleAnchor,u=a.titleAngle,s=V8(e,a.titleOrient),l=vq(u);return{name:"".concat(e,"-title"),type:"group",role:"".concat(s,"-title"),title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===e?{orient:"left"}:{}),{style:"guide-title"}),t7(l,s)),Q8(s,l,o)),u7(r,i,e,N2,R2))}}function Q8(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle";switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}var r=R8(e,"row"===t?"left":"top","row"===t?"y":"x");return r?{align:r}:{}}function t7(t,e){var n=L8(t,"row"===e?"left":"top","row"===e?"y":"x",!0);return n?{baseline:n}:{}}function e7(t,e){var n,r=t.component.layoutHeaders[e],i=[],a=$8(q8);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(r[o]){var u,s=$8(r[o]);try{for(s.s();!(u=s.n()).done;){var l=i7(t,e,o,r,u.value);null!=l&&i.push(l)}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){a.e(c)}finally{a.f()}return i}function n7(t,e){var n,r=t.sort;return N0(r)?{field:p1(r,{expr:"datum"}),order:null!==(n=r.order)&&void 0!==n?n:"ascending"}:yo(r)?{field:U8(t,e,{expr:"datum"}),order:"ascending"}:{field:p1(t,{expr:"datum"}),order:null!=r?r:"ascending"}}function r7(t,e,n){var r=X8(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,n,e),i=r.format,a=r.formatType,o=r.labelAngle,u=r.labelAnchor,s=r.labelOrient,l=r.labelExpr,c=O0({fieldOrDatumDef:t,format:i,formatType:a,expr:"parent",config:n}).signal,f=V8(e,s);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:l?uq(uq(l,"datum.label",c),"datum.value",p1(t,{expr:"parent"})):c}},"row"===e?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),t7(o,f)),Q8(f,o,u)),u7(n,t,e,z2,Z2))}function i7(t,e,n,r,i){if(i){var a=null,o=r.facetFieldDef,u=t.config?t.config:void 0;if(o&&i.labels){var s=X8(["labelOrient"],o.header,u,e).labelOrient;("row"===e&&!LY(["top","bottom"],s)||"column"===e&&!LY(["left","right"],s))&&(a=r7(o,e,u))}var l=met(t)&&!U0(t.facet),c=i.axes,f=(null==c?void 0:c.length)>0;if(a||f){var h="row"===e?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("".concat(e,"_").concat(n)),type:"group",role:"".concat(e,"-").concat(n)},r.facetFieldDef?{from:{data:t.getName("".concat(e,"_domain"))},sort:n7(o,e)}:{}),f&&l?{from:{data:t.getName("facet_domain_".concat(e))}}:{}),a?{title:a}:{}),i.sizeSignal?{encode:{update:(0,Z.Z)({},h,i.sizeSignal)}}:{}),f?{axes:c}:{})}}return null}var a7={column:{start:0,end:1},row:{start:1,end:0}};function o7(t,e){return a7[e][t]}function u7(t,e,n,r,i){var a,o={},u=$8(r);try{for(u.s();!(a=u.n()).done;){var s=a.value;if(i[s]){var l=G8(s,null==e?void 0:e.header,t,n);void 0!==l&&(o[i[s]]=l)}}}catch(c){u.e(c)}finally{u.f()}return o}function s7(t){return[].concat((0,X.Z)(l7(t,"width")),(0,X.Z)(l7(t,"height")),(0,X.Z)(l7(t,"childWidth")),(0,X.Z)(l7(t,"childHeight")))}function l7(t,e){var n="width"===e?"x":"y",r=t.component.layoutSize.get(e);if(!r||"merged"===r)return[];var i=t.getSizeSignalRef(e).signal;if("step"===r){var a=t.getScaleComponent(n);if(a){var o=a.get("type"),u=a.get("range");if(PQ(o)&&hJ(u)){var s=t.scaleName(n);if(met(t.parent))if("independent"===t.parent.component.resolve.scale[n])return[c7(s,u)];return[c7(s,u),{name:i,update:f7(s,a,"domain('".concat(s,"').length"))}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){var l=i.endsWith("width"),c=l?"containerSize()[0]":"containerSize()[1]",f=h3(t.config.view,l?"width":"height"),h="isFinite(".concat(c,") ? ").concat(c," : ").concat(f);return[{name:i,init:h,on:[{update:h,events:"window:resize"}]}]}return[{name:i,value:r}]}function c7(t,e){var n="".concat(t,"_step");return fJ(e.step)?{name:n,update:e.step.signal}:{name:n,value:e.step}}function f7(t,e,n){var r=e.get("type"),i=e.get("padding"),a=cq(e.get("paddingOuter"),i),o=e.get("paddingInner");return o="band"===r?void 0!==o?o:i:1,"bandspace(".concat(n,", ").concat(MJ(o),", ").concat(MJ(a),") * ").concat(t,"_step")}function h7(t){return"childWidth"===t?"width":"childHeight"===t?"height":t}function d7(t,e){return qY(t).reduce((function(n,r){var i=t[r];return Object.assign(Object.assign({},n),u4(e,i,r,(function(t){return kJ(t.value)})))}),{})}function p7(t,e){if(met(e))return"theta"===t?"independent":"shared";if(xet(e))return"shared";if(yet(e))return A$(t)||"theta"===t||"radius"===t?"independent":"shared";throw new Error("invalid model type for resolve")}function g7(t,e){var n=t.scale[e],r=A$(e)?"axis":"legend";return"independent"===n?("shared"===t[r][e]&&CK(function(t){return'Setting the scale to be independent for "'.concat(t,'" means we also have to set the guide (axis or legend) to be independent.')}(e)),"independent"):t[r][e]||"shared"}function v7(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var m7=Object.assign(Object.assign({},W2),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),y7=qY(m7),x7=function(t){(0,Q.Z)(n,t);var e=v7(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n)}(o6),b7={symbols:function(t,e){var n,r,i,a,o,u,s,l,c=e.fieldOrDatumDef,f=e.model,h=e.channel,d=e.legendCmpt,p=e.legendType;if("symbol"!==p)return;var g=f.markDef,v=f.encoding,m=f.config,y=f.mark,x=g.filled&&"trail"!==y,b=Object.assign(Object.assign({},function(t,e,n){var r,i=mJ(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=_J(a,e.markDef,e.config);void 0!==o&&(t[a]=kJ(o))}}catch(u){i.e(u)}finally{i.f()}return t}({},f,f0)),g4(f,{filled:x})),w=null!==(n=d.get("symbolOpacity"))&&void 0!==n?n:m.legend.symbolOpacity,S=null!==(r=d.get("symbolFillColor"))&&void 0!==r?r:m.legend.symbolFillColor,k=null!==(i=d.get("symbolStrokeColor"))&&void 0!==i?i:m.legend.symbolStrokeColor,C=void 0===w?null!==(a=w7(v.opacity))&&void 0!==a?a:g.opacity:void 0;if(b.fill)if("fill"===h||x&&h===Bq)delete b.fill;else if(b.fill.field)S?delete b.fill:(b.fill=kJ(null!==(o=m.legend.symbolBaseFillColor)&&void 0!==o?o:"black"),b.fillOpacity=kJ(null!=C?C:1));else if(yo(b.fill)){var E=null!==(l=null!==(s=S7(null!==(u=v.fill)&&void 0!==u?u:v.color))&&void 0!==s?s:g.fill)&&void 0!==l?l:x&&g.color;E&&(b.fill=kJ(E))}if(b.stroke)if("stroke"===h||!x&&h===Bq)delete b.stroke;else if(b.stroke.field||k)delete b.stroke;else if(yo(b.stroke)){var M=cq(S7(v.stroke||v.color),g.stroke,x?g.color:void 0);M&&(b.stroke={value:M})}if(h!==Uq){var O=t1(c)&&C7(f,d,c);O?b.opacity=[Object.assign({test:O},kJ(null!=C?C:1)),kJ(m.legend.unselectedOpacity)]:C&&(b.opacity=kJ(C))}return YY(b=Object.assign(Object.assign({},b),t))?void 0:b},gradient:function(t,e){var n,r=e.model,i=e.legendType,a=e.legendCmpt;if("gradient"!==i)return;var o=r.config,u=r.markDef,s=r.encoding,l={},c=null!==(n=a.get("gradientOpacity"))&&void 0!==n?n:o.legend.gradientOpacity,f=void 0===c?w7(s.opacity)||u.opacity:void 0;f&&(l.opacity=kJ(f));return YY(l=Object.assign(Object.assign({},l),t))?void 0:l},labels:function(t,e){var n=e.fieldOrDatumDef,r=e.model,i=e.channel,a=e.legendCmpt,o=r.legend(i)||{},u=r.config,s=t1(n)?C7(r,a,n):void 0,l=s?[{test:s,value:1},{value:u.legend.unselectedOpacity}]:void 0,c=o.format,f=o.formatType,h=void 0;E0(f)?h=_0({fieldOrDatumDef:n,field:"datum.value",format:c,formatType:f,config:u}):void 0===c&&void 0===f&&u.customFormatTypes&&("quantitative"===n.type&&u.numberFormatType?h=_0({fieldOrDatumDef:n,field:"datum.value",format:u.numberFormat,formatType:u.numberFormatType,config:u}):"temporal"===n.type&&u.timeFormatType&&t1(n)&&void 0===n.timeUnit&&(h=_0({fieldOrDatumDef:n,field:"datum.value",format:u.timeFormat,formatType:u.timeFormatType,config:u})));var d=Object.assign(Object.assign(Object.assign({},l?{opacity:l}:{}),h?{text:h}:{}),t);return YY(d)?void 0:d},entries:function(t,e){var n=e.legendCmpt.get("selections");return(null==n?void 0:n.length)?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}};function w7(t){return k7(t,(function(t,e){return Math.max(t,e.value)}))}function S7(t){return k7(t,(function(t,e){return cq(t,e.value)}))}function k7(t,e){return function(t){var e=null==t?void 0:t.condition;return!!e&&(yo(e)||u1(e))}(t)?Ho(t.condition).reduce(e,t.value):u1(t)?t.value:void 0}function C7(t,e,n){var r=e.get("selections");if(null==r?void 0:r.length){var i=Su(n.field);return r.map((function(t){var e=Su(QY(t)+i8);return"(!length(data(".concat(e,")) || (").concat(t,"[").concat(i,"] && indexof(").concat(t,"[").concat(i,"], datum.value) >= 0))")})).join(" || ")}}var E7={direction:function(t){return t.direction},format:function(t){var e=t.fieldOrDatumDef,n=t.legend,r=t.config,i=n.format,a=n.formatType;return D0(e,e.type,i,a,r,!1)},formatType:function(t){var e=t.legend,n=t.fieldOrDatumDef,r=t.scaleType,i=e.formatType;return T0(i,n,r)},gradientLength:function(t){var e,n,r=t.legend,i=t.legendConfig;return null!==(n=null!==(e=r.gradientLength)&&void 0!==e?e:i.gradientLength)&&void 0!==n?n:function(t){var e=t.legendConfig,n=t.model,r=t.direction,i=t.orient,a=t.scaleType,o=e.gradientHorizontalMaxLength,u=e.gradientHorizontalMinLength,s=e.gradientVerticalMaxLength,l=e.gradientVerticalMinLength;if(BQ(a))return"horizontal"===r?"top"===i||"bottom"===i?A7(n,"width",u,o):u:A7(n,"height",l,s);return}(t)},labelOverlap:function(t){var e,n,r=t.legend,i=t.legendConfig,a=t.scaleType;return null!==(n=null!==(e=r.labelOverlap)&&void 0!==e?e:i.labelOverlap)&&void 0!==n?n:function(t){if(LY(["quantile","threshold","log","symlog"],t))return"greedy";return}(a)},symbolType:function(t){var e,n=t.legend,r=t.markDef,i=t.channel,a=t.encoding;return null!==(e=n.symbolType)&&void 0!==e?e:function(t,e,n,r){var i;if("shape"!==e){var a=null!==(i=S7(n))&&void 0!==i?i:r;if(a)return a}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(r.type,i,a.shape,r.shape)},title:function(t){return w1(t.fieldOrDatumDef,t.config,{allowDisabling:!0})},type:function(t){var e=t.legendType,n=t.scaleType;if(o$(t.channel)&&BQ(n)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:function(t){var e=t.fieldOrDatumDef;return function(t,e){var n=t.values;if(yo(n))return B1(e,n);if(fJ(n))return n;return}(t.legend,e)}};function M7(t){return cq(t.legend.type,function(t){var e=t.channel,n=t.timeUnit,r=t.scaleType;if(o$(e)){if(LY(["quarter","month","day"],n))return"symbol";if(BQ(r))return"gradient"}return"symbol"}(t))}function O7(t){var e,n,r=t.legendConfig,i=t.legendType,a=t.orient;return null!==(n=null!==(e=t.legend.direction)&&void 0!==e?e:r[i?"gradientDirection":"symbolDirection"])&&void 0!==n?n:function(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===e?"horizontal":void 0}}(a,i)}function A7(t,e,n,r){var i=t.getSizeSignalRef(e).signal;return{signal:"clamp(".concat(i,", ").concat(n,", ").concat(r,")")}}function _7(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return D7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D7(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function D7(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T7(t){var e=vet(t)?function(t){for(var e=t.encoding,n={},r=0,i=[Bq].concat((0,X.Z)(H2));r<i.length;r++){var a=i[r],o=O1(e[a]);o&&t.getScaleComponent(a)&&(a===Zq&&t1(o)&&o.type===gQ||(n[a]=I7(t,a)))}return n}(t):function(t){var e,n=t.component,r=n.legends,i=n.resolve,a=_7(t.children);try{for(a.s();!(e=a.n()).done;){var o=e.value;T7(o);var u,s=_7(qY(o.component.legends));try{for(s.s();!(u=s.n()).done;){var l=u.value;i.legend[l]=g7(t.component.resolve,l),"shared"===i.legend[l]&&(r[l]=P7(r[l],o.component.legends[l]),r[l]||(i.legend[l]="independent",delete r[l]))}}catch(v){s.e(v)}finally{s.f()}}}catch(v){a.e(v)}finally{a.f()}var c,f=_7(qY(r));try{for(f.s();!(c=f.n()).done;){var h,d=c.value,p=_7(t.children);try{for(p.s();!(h=p.n()).done;){var g=h.value;g.component.legends[d]&&("shared"===i.legend[d]&&delete g.component.legends[d])}}catch(v){p.e(v)}finally{p.f()}}}catch(v){f.e(v)}finally{f.f()}return r}(t);return t.component.legends=e,e}function F7(t,e,n,r){switch(e){case"disable":return void 0!==n;case"values":return!!(null==n?void 0:n.values);case"title":if("title"===e&&t===(null==r?void 0:r.title))return!0}return t===(n||{})[e]}function I7(t,e){var n,r,i,a=t.legend(e),o=t.markDef,u=t.encoding,s=t.config,l=s.legend,c=new x7({},function(t,e){var n=t.scaleName(e);if("trail"===t.mark){if("color"===e)return{stroke:n};if("size"===e)return{strokeWidth:n}}return"color"===e?t.markDef.filled?{fill:n}:{stroke:n}:(0,Z.Z)({},e,n)}(t,e));!function(t,e,n){var r,i,a,o,u,s=null===(r=t.fieldDef(e))||void 0===r?void 0:r.field,l=V4($Y(null!==(i=t.component.selection)&&void 0!==i?i:{}));try{for(l.s();!(u=l.n()).done;){var c=u.value,f=null!==(a=c.project.hasField[s])&&void 0!==a?a:c.project.hasChannel[e];if(f&&X4.defined(c)){var h=null!==(o=n.get("selections"))&&void 0!==o?o:[];h.push(c.name),n.set("selections",h,!1),f.hasLegend=!0}}}catch(d){l.e(d)}finally{l.f()}}(t,e,c);var f=void 0!==a?!a:l.disable;if(c.set("disable",f,void 0!==a),f)return c;a=a||{};var h,d=t.getScaleComponent(e).get("type"),p=O1(u[e]),g=t1(p)?null===(n=XK(p.timeUnit))||void 0===n?void 0:n.unit:void 0,v=a.orient||s.legend.orient||"right",m=M7({legend:a,channel:e,timeUnit:g,scaleType:d}),y={legend:a,channel:e,model:t,markDef:o,encoding:u,fieldOrDatumDef:p,legendConfig:l,config:s,scaleType:d,orient:v,legendType:m,direction:O7({legend:a,legendType:m,orient:v,legendConfig:l})},x=_7(y7);try{for(x.s();!(h=x.n()).done;){var b=h.value;if(!("gradient"===m&&b.startsWith("symbol")||"symbol"===m&&b.startsWith("gradient"))){var w=b in E7?E7[b](y):a[b];if(void 0!==w){var S=F7(w,b,a,t.fieldDef(e));(S||void 0===s.legend[b])&&c.set(b,w,S)}}}}catch(F){x.e(F)}finally{x.f()}for(var k=null!==(r=null==a?void 0:a.encoding)&&void 0!==r?r:{},C=c.get("selections"),E={},M={fieldOrDatumDef:p,model:t,channel:e,legendCmpt:c,legendType:m},O=0,A=["labels","legend","title","symbols","gradient","entries"];O<A.length;O++){var _=A[O],D=d7(null!==(i=k[_])&&void 0!==i?i:{},t),T=_ in b7?b7[_](D,M):D;void 0===T||YY(T)||(E[_]=Object.assign(Object.assign(Object.assign({},(null==C?void 0:C.length)&&t1(p)?{name:"".concat(QY(p.field),"_legend_").concat(_)}:{}),(null==C?void 0:C.length)?{interactive:!!C}:{}),{update:T}))}return YY(E)||c.set("encode",E,!!(null==a?void 0:a.encoding)),c}function P7(t,e){var n,r,i,a;if(!t)return e.clone();var o=t.getWithExplicit("orient"),u=e.getWithExplicit("orient");if(!o.explicit||!u.explicit||o.value===u.value){var s,l=!1,c=_7(y7);try{var f=function(){var n=s.value,r=f6(t.getWithExplicit(n),e.getWithExplicit(n),n,"legend",(function(t,e){switch(n){case"symbolType":return function(t,e){if("circle"===e.value)return e;return t}(t,e);case"title":return jJ(t,e);case"type":return l=!0,s6("symbol")}return c6(t,e,n,"legend")}));t.setWithExplicit(n,r)};for(c.s();!(s=c.n()).done;)f()}catch(h){c.e(h)}finally{c.f()}return l&&((null===(r=null===(n=t.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)&&eq(t.implicit,["encode","gradient"]),(null===(a=null===(i=t.explicit)||void 0===i?void 0:i.encode)||void 0===a?void 0:a.gradient)&&eq(t.explicit,["encode","gradient"])),t}}function j7(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return B7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B7(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function B7(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var L7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function R7(t){var e,n=t.component.legends,r={},i=j7(qY(n));try{for(i.s();!(e=i.n()).done;){var a=e.value,o=t.getScaleComponent(a),u=PY(o.get("domains"));if(r[u]){var s,l=j7(r[u]);try{for(l.s();!(s=l.n()).done;){P7(s.value,n[a])||r[u].push(n[a])}}catch(f){l.e(f)}finally{l.f()}}else r[u]=[n[a].clone()]}}catch(f){i.e(f)}finally{i.f()}var c=$Y(r).flat().map((function(e){return function(t,e){var n,r,i,a=t.combine(),o=a.disable,u=a.labelExpr,s=(a.selections,L7(a,["disable","labelExpr","selections"]));if(o)return;!1===e.aria&&null==s.aria&&(s.aria=!1);if(null===(n=s.encode)||void 0===n?void 0:n.symbols){var l=s.encode.symbols.update;!l.fill||"transparent"===l.fill.value||l.stroke||s.stroke||(l.stroke={value:"transparent"});var c,h=j7(H2);try{for(h.s();!(c=h.n()).done;){var d=c.value;s[d]&&delete l[d]}}catch(f){h.e(f)}finally{h.f()}}s.title||delete s.title;if(void 0!==u){var p=u;(null===(i=null===(r=s.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&fJ(s.encode.labels.update.text)&&(p=uq(u,"datum.label",s.encode.labels.update.text.signal)),function(t,e,n,r){var i,a,o,u,s;null!==(i=t.encode)&&void 0!==i||(t.encode={}),null!==(a=(u=t.encode)[e])&&void 0!==a||(u[e]={}),null!==(o=(s=t.encode[e]).update)&&void 0!==o||(s.update={}),t.encode[e].update[n]=r}(s,"labels","text",{signal:p})}return s}(e,t.config)})).filter((function(t){return void 0!==t}));return c}function Z7(t){return xet(t)||yet(t)?function(t){return t.children.reduce((function(t,e){return t.concat(e.assembleProjections())}),N7(t))}(t):N7(t)}function N7(t){var e=t.component.projection;if(!e||e.merged)return[];var n=e.combine(),r=n.name;if(e.data){var i={signal:"[".concat(e.size.map((function(t){return t.signal})).join(", "),"]")},a=e.data.reduce((function(e,n){var r=fJ(n)?n.signal:"data('".concat(t.lookupDataSource(n),"')");return LY(e,r)||e.push(r),e}),[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:a.length>1?"[".concat(a.join(", "),"]"):a[0]}},n)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}var z7=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function U7(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var H7=function(t){(0,Q.Z)(n,t);var e=U7(n);function n(t,r,i,a){var o;return(0,J.Z)(this,n),(o=e.call(this,Object.assign({},r),{name:t})).specifiedProjection=r,o.size=i,o.data=a,o.merged=!1,o}return(0,K.Z)(n,[{key:"isFit",get:function(){return!!this.data}}]),n}(o6);function W7(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return V7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V7(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function V7(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G7(t){t.component.projection=vet(t)?function(t){var e;if(t.hasProjection){var n=uJ(t.specifiedProjection),r=!(n&&(null!=n.scale||null!=n.translate)),i=r?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,a=r?function(t){for(var e=[],n=t.encoding,r=0,i=[[Iq,Fq],[jq,Pq]];r<i.length;r++){var a=i[r];(O1(n[a[0]])||O1(n[a[1]]))&&e.push({signal:t.getName("geojson_".concat(e.length))})}t.channelHasField(Zq)&&t.typedFieldDef(Zq).type===gQ&&e.push({signal:t.getName("geojson_".concat(e.length))});0===e.length&&e.push(t.requestDataName(d6.Main));return e}(t):void 0,o=new H7(t.projectionName(!0),Object.assign(Object.assign({},null!==(e=uJ(t.config.projection))&&void 0!==e?e:{}),null!=n?n:{}),i,a);return o.get("type")||o.set("type","equalEarth",!1),o}return}(t):function(t){if(0===t.children.length)return;var e,n,r=W7(t.children);try{for(r.s();!(n=r.n()).done;){G7(n.value)}}catch(h){r.e(h)}finally{r.f()}var i=ZY(t.children,(function(t){var n=t.component.projection;if(n){if(e){var r=function(t,e){var n=ZY(z7,(function(n){return!ru(t.explicit,n)&&!ru(e.explicit,n)||!!(ru(t.explicit,n)&&ru(e.explicit,n)&&_Y(t.get(n),e.get(n)))})),r=_Y(t.size,e.size);if(r){if(n)return t;if(_Y(t.explicit,{}))return e;if(_Y(e.explicit,{}))return t}return null}(e,n);return r&&(e=r),!!r}return e=n,!0}return!0}));if(e&&i){var a,o=t.projectionName(!0),u=new H7(o,e.specifiedProjection,e.size,DY(e.data)),s=W7(t.children);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=l.component.projection;if(c){var f;if(c.isFit)(f=u.data).push.apply(f,(0,X.Z)(l.component.projection.data));l.renameProjection(c.get("name"),o),c.merged=!0}}}catch(h){s.e(h)}finally{s.f()}return u}return}(t)}var X7=n(84506);n(86535),n(99244);function Y7(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return q7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q7(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function q7(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $7(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var J7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function K7(t,e){return"".concat(K$(t),"_").concat(e)}function Q7(t,e,n){var r,i=K7(null!==(r=T1(n,void 0))&&void 0!==r?r:{},e);return t.getName("".concat(i,"_bins"))}function t9(t,e,n){var r,i;r=function(t){return"as"in t}(t)?pu(t.as)?[t.as,"".concat(t.as,"_end")]:[t.as[0],t.as[1]]:[p1(t,{forAs:!0}),p1(t,{binSuffix:"end",forAs:!0})];var a=Object.assign({},T1(e,void 0)),o=K7(a,t.field),u=function(t,e){return{signal:t.getName("".concat(e,"_bins")),extentSignal:t.getName("".concat(e,"_extent"))}}(n,o),s=u.signal,l=u.extentSignal;if(nJ(a.extent)){var c=a.extent;i=w8(n,c.param,c),delete a.extent}return{key:o,binComponent:Object.assign(Object.assign(Object.assign({bin:a,field:t.field,as:[r]},s?{signal:s}:{}),l?{extentSignal:l}:{}),i?{span:i}:{})}}var e9=function(t){(0,Q.Z)(n,t);var e=$7(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).bins=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.bins))}},{key:"merge",value:function(t,e){var n,r=Y7(qY(t.bins));try{for(r.s();!(n=r.n()).done;){var i=n.value;i in this.bins?(e(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=UY([].concat((0,X.Z)(this.bins[i].as),(0,X.Z)(t.bins[i].as)),jY)):this.bins[i]=t.bins[i]}}catch(s){r.e(s)}finally{r.f()}var a,o=Y7(t.children);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.removeChild(u),u.parent=this}}catch(s){o.e(s)}finally{o.f()}t.remove()}},{key:"producedFields",value:function(){return new Set($Y(this.bins).map((function(t){return t.as})).flat(2))}},{key:"dependentFields",value:function(){return new Set($Y(this.bins).map((function(t){return t.field})))}},{key:"hash",value:function(){return"Bin ".concat(jY(this.bins))}},{key:"assemble",value:function(){return $Y(this.bins).flatMap((function(t){var e=[],n=(0,X7.Z)(t.as),r=n[0],i=n.slice(1),a=t.bin,o=a.extent,u=J7(a,["extent"]),s=Object.assign(Object.assign(Object.assign({type:"bin",field:oq(t.field),as:r,signal:t.signal},nJ(o)?{extent:null}:{extent:o}),t.span?{span:{signal:"span(".concat(t.span,")")}}:{}),u);!o&&t.extentSignal&&(e.push({type:"extent",field:oq(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),e.push(s);var l,c=Y7(i);try{for(c.s();!(l=c.n()).done;)for(var f=l.value,h=0;h<2;h++)e.push({type:"formula",expr:p1({field:r[h]},{expr:"datum"}),as:f[h]})}catch(d){c.e(d)}finally{c.f()}return t.formula&&e.push({type:"formula",expr:t.formula,as:t.formulaAs}),e}))}}],[{key:"makeFromEncoding",value:function(t,e){var r=e.reduceFieldDef((function(t,n,r){if(o1(n)&&Q$(n.bin)){var i=t9(n,n.bin,e),a=i.key,o=i.binComponent;t[a]=Object.assign(Object.assign(Object.assign({},o),t[a]),function(t,e,n,r){var i,a;if(L1(e,n)){var o=vet(t)&&null!==(a=null!==(i=t.axis(n))&&void 0!==i?i:t.legend(n))&&void 0!==a?a:{},u=p1(e,{expr:"datum"}),s=p1(e,{expr:"datum",binSuffix:"end"});return{formulaAs:p1(e,{binSuffix:"range",forAs:!0}),formula:j0(u,s,o.format,o.formatType,r)}}return{}}(e,n,r,e.config))}return t}),{});return YY(r)?null:new n(t,r)}},{key:"makeFromTransform",value:function(t,e,r){var i=t9(e,e.bin,r),a=i.key,o=i.binComponent;return new n(t,(0,Z.Z)({},a,o))}}]),n}(T6);function n9(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}function r9(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i9(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function i9(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a9(t,e,n,r){var i,a=vet(r)?r.encoding[x$(e)]:void 0;if(o1(n)&&vet(r)&&$0(n,a,r.markDef,r.config))t.add(p1(n,{})),t.add(p1(n,{suffix:"end"})),n.bin&&L1(n,e)&&t.add(p1(n,{binSuffix:"range"}));else if(function(t){return t in r$}(e)){var o=function(t){switch(t){case Fq:return"y";case Pq:return"y2";case Iq:return"x";case jq:return"x2"}}(e);t.add(r.getName(o))}else t.add(p1(n));return s1(n)&&function(t){return xo(t)&&"field"in t}(null===(i=n.scale)||void 0===i?void 0:i.range)&&t.add(n.scale.range.field),t}var o9=function(t){(0,Q.Z)(n,t);var e=n9(n);function n(t,r,i){var a;return(0,J.Z)(this,n),(a=e.call(this,t)).dimensions=r,a.measures=i,a}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,new Set(this.dimensions),DY(this.measures))}},{key:"groupBy",get:function(){return this.dimensions}},{key:"merge",value:function(t){return WY(this.dimensions,t.dimensions)?(function(t,e){var n,r,i=r9(qY(e));try{for(i.s();!(r=i.n()).done;){var a,o=r.value,u=e[o],s=r9(qY(u));try{for(s.s();!(a=s.n()).done;){var l=a.value;o in t?t[o][l]=new Set([].concat((0,X.Z)(null!==(n=t[o][l])&&void 0!==n?n:[]),(0,X.Z)(u[l]))):t[o]=(0,Z.Z)({},l,u[l])}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}}(this.measures,t.measures),!0):(function(){var t;(t=wK).debug.apply(t,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function(t){t.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function(){return new Set([].concat((0,X.Z)(this.dimensions),(0,X.Z)(qY(this.measures))))}},{key:"producedFields",value:function(){var t,e=new Set,n=r9(qY(this.measures));try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=r9(qY(this.measures[i]));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=this.measures[i][o];0===u.size?e.add("".concat(o,"_").concat(i)):u.forEach(e.add,e)}}catch(s){a.e(s)}finally{a.f()}}}catch(s){n.e(s)}finally{n.f()}return e}},{key:"hash",value:function(){return"Aggregate ".concat(jY({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function(){var t,e=[],n=[],r=[],i=r9(qY(this.measures));try{for(i.s();!(t=i.n()).done;){var a,o=t.value,u=r9(qY(this.measures[o]));try{for(u.s();!(a=u.n()).done;){var s,l=a.value,c=r9(this.measures[o][l]);try{for(c.s();!(s=c.n()).done;){var f=s.value;r.push(f),e.push(l),n.push("*"===o?null:oq(o))}}catch(h){c.e(h)}finally{c.f()}}}catch(h){u.e(h)}finally{u.f()}}}catch(h){i.e(h)}finally{i.f()}return{type:"aggregate",groupby:(0,X.Z)(this.dimensions).map(oq),ops:e,fields:n,as:r}}}],[{key:"makeFromEncoding",value:function(t,e){var r=!1;e.forEachFieldDef((function(t){t.aggregate&&(r=!0)}));var i={},a=new Set;return r?(e.forEachFieldDef((function(t,n){var r,o,u,s,l=t.aggregate,c=t.field;if(l)if("count"===l)null!==(r=i["*"])&&void 0!==r||(i["*"]={}),i["*"].count=new Set([p1(t,{forAs:!0})]);else{if(V$(l)||G$(l)){var f=V$(l)?"argmin":"argmax",h=l[f];null!==(o=i[h])&&void 0!==o||(i[h]={}),i[h][f]=new Set([p1({op:f,field:h},{forAs:!0})])}else null!==(u=i[c])&&void 0!==u||(i[c]={}),i[c][l]=new Set([p1(t,{forAs:!0})]);R$(n)&&"unaggregated"===e.scaleDomain(n)&&(null!==(s=i[c])&&void 0!==s||(i[c]={}),i[c].min=new Set([p1({field:c,aggregate:"min"},{forAs:!0})]),i[c].max=new Set([p1({field:c,aggregate:"max"},{forAs:!0})]))}else a9(a,n,t,e)})),a.size+qY(i).length===0?null:new n(t,a,i)):null}},{key:"makeFromTransform",value:function(t,e){var r,i,a,o,u=new Set,s={},l=r9(e.aggregate);try{for(l.s();!(o=l.n()).done;){var c=o.value,f=c.op,h=c.field,d=c.as;f&&("count"===f?(null!==(r=s["*"])&&void 0!==r||(s["*"]={}),s["*"].count=new Set([d||p1(c,{forAs:!0})])):(null!==(i=s[h])&&void 0!==i||(s[h]={}),s[h][f]=new Set([d||p1(c,{forAs:!0})])))}}catch(m){l.e(m)}finally{l.f()}var p,g=r9(null!==(a=e.groupby)&&void 0!==a?a:[]);try{for(g.s();!(p=g.n()).done;){var v=p.value;u.add(v)}}catch(m){g.e(m)}finally{g.f()}return u.size+qY(s).length===0?null:new n(t,u,s)}}]),n}(T6);function u9(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s9(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function s9(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l9(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var c9=function(t){(0,Q.Z)(n,t);var e=l9(n);function n(t,r,i,a){var o;(0,J.Z)(this,n),(o=e.call(this,t)).model=r,o.name=i,o.data=a;var u,s=u9(s$);try{for(s.s();!(u=s.n()).done;){var l=u.value,c=r.facet[l];if(c){var f=c.bin,h=c.sort;o[l]=Object.assign({name:r.getName("".concat(l,"_domain")),fields:[p1(c)].concat((0,X.Z)(Q$(f)?[p1(c,{binSuffix:"end"})]:[]))},N0(h)?{sortField:h}:yo(h)?{sortIndexField:U8(c,l)}:{})}}}catch(d){s.e(d)}finally{s.f()}return o.childModel=r.child,o}return(0,K.Z)(n,[{key:"hash",value:function(){var t,e="Facet",n=u9(s$);try{for(n.s();!(t=n.n()).done;){var r=t.value;this[r]&&(e+=" ".concat(r.charAt(0),":").concat(jY(this[r])))}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"fields",get:function(){var t,e,n=[],r=u9(s$);try{for(r.s();!(e=r.n()).done;){var i=e.value;(null===(t=this[i])||void 0===t?void 0:t.fields)&&n.push.apply(n,(0,X.Z)(this[i].fields))}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"dependentFields",value:function(){var t,e=new Set(this.fields),n=u9(s$);try{for(n.s();!(t=n.n()).done;){var r=t.value;this[r]&&(this[r].sortField&&e.add(this[r].sortField.field),this[r].sortIndexField&&e.add(this[r].sortIndexField))}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"producedFields",value:function(){return new Set}},{key:"getSource",value:function(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function(){var t,e={},n=u9(O$);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this.childModel.component.scales[r];if(i&&!i.merged){var a=i.get("type"),o=i.get("range");if(PQ(a)&&hJ(o)){var u=Itt(Ptt(this.childModel,r));u?e[r]=u:CK(zJ(r))}}}}catch(s){n.e(s)}finally{n.f()}return e}},{key:"assembleRowColumnHeaderData",value:function(t,e,n){var r={row:"y",column:"x",facet:void 0}[t],i=[],a=[],o=[];r&&n&&n[r]&&(e?(i.push("distinct_".concat(n[r])),a.push("max")):(i.push(n[r]),a.push("distinct")),o.push("distinct_".concat(n[r])));var u=this[t],s=u.sortField,l=u.sortIndexField;if(s){var c=s.op,f=void 0===c?B0:c,h=s.field;i.push(h),a.push(f),o.push(p1(s,{forAs:!0}))}else l&&(i.push(l),a.push("max"),o.push(l));return{name:this[t].name,source:null!=e?e:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},i.length?{fields:i,ops:a,as:o}:{})]}}},{key:"assembleFacetHeaderData",value:function(t){var e,n,r,i=this.model.layout.columns,a=this.model.component.layoutHeaders,o=[],u={},s=u9(Y8);try{for(s.s();!(r=s.n()).done;){var l,c=r.value,f=u9(q8);try{for(f.s();!(l=f.n()).done;){var h,d=l.value,p=u9(null!==(e=a[c]&&a[c][d])&&void 0!==e?e:[]);try{for(p.s();!(h=p.n()).done;){if((null===(n=h.value.axes)||void 0===n?void 0:n.length)>0){u[c]=!0;break}}}catch(x){p.e(x)}finally{p.f()}}}catch(x){f.e(x)}finally{f.f()}if(u[c]){var g='length(data("'.concat(this.facet.name,'"))'),v="row"===c?i?{signal:"ceil(".concat(g," / ").concat(i,")")}:1:i?{signal:"min(".concat(g,", ").concat(i,")")}:{signal:g};o.push({name:"".concat(this.facet.name,"_").concat(c),transform:[{type:"sequence",start:0,stop:v}]})}}}catch(x){s.e(x)}finally{s.f()}var m=u.row,y=u.column;return(m||y)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,t)),o}},{key:"assemble",value:function(){var t,e,n=[],r=null,i=this.getChildIndependentFieldsWithStep(),a=this.column,o=this.row,u=this.facet;if(a&&o&&(i.x||i.y)){r="cross_".concat(this.column.name,"_").concat(this.row.name);var s=[].concat(null!==(t=i.x)&&void 0!==t?t:[],null!==(e=i.y)&&void 0!==e?e:[]),l=s.map((function(){return"distinct"}));n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:l}]})}for(var c=0,f=[bq,xq];c<f.length;c++){var h=f[c];this[h]&&n.push(this.assembleRowColumnHeaderData(h,r,i))}if(u){var d=this.assembleFacetHeaderData(i);d&&n.push.apply(n,(0,X.Z)(d))}return n}}]),n}(T6);function f9(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}function h9(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d9(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function d9(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p9(t){return t.startsWith("'")&&t.endsWith("'")||t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function g9(t,e){var n=rq(t);if("number"===e)return"toNumber(".concat(n,")");if("boolean"===e)return"toBoolean(".concat(n,")");if("string"===e)return"toString(".concat(n,")");if("date"===e)return"toDate(".concat(n,")");if("flatten"===e)return n;if(e.startsWith("date:")){var r=p9(e.slice(5,e.length));return"timeParse(".concat(n,",'").concat(r,"')")}if(e.startsWith("utc:")){var i=p9(e.slice(4,e.length));return"utcParse(".concat(n,",'").concat(i,"')")}return CK('Unrecognized parse "'.concat(e,'".')),null}function v9(t){var e={};return EY(t.filter,(function(t){var n;if(rQ(t)){var r=null;qK(t)?r=wJ(t.equal):JK(t)?r=wJ(t.lte):$K(t)?r=wJ(t.lt):KK(t)?r=wJ(t.gt):QK(t)?r=wJ(t.gte):tQ(t)?r=t.range[0]:eQ(t)&&(r=(null!==(n=t.oneOf)&&void 0!==n?n:t.in)[0]),r&&(OK(r)?e[t.field]="date":hu(r)?e[t.field]="number":pu(r)&&(e[t.field]="string")),t.timeUnit&&(e[t.field]="date")}})),e}function m9(t){var e={};function n(t){var n;P1(t)?e[t.field]="date":"quantitative"===t.type&&(pu(n=t.aggregate)&&LY(["min","max"],n))?e[t.field]="number":lq(t.field)>1?t.field in e||(e[t.field]="flatten"):s1(t)&&N0(t.sort)&&lq(t.sort.field)>1&&(t.sort.field in e||(e[t.sort.field]="flatten"))}if((vet(t)||met(t))&&t.forEachFieldDef((function(e,r){if(o1(e))n(e);else{var i=m$(r),a=t.fieldDef(i);n(Object.assign(Object.assign({},e),{type:a.type}))}})),vet(t)){var r=t.mark,i=t.markDef,a=t.encoding;if(u0(r)&&!t.encoding.order){var o=a["horizontal"===i.orient?"y":"x"];t1(o)&&"quantitative"===o.type&&!(o.field in e)&&(e[o.field]="number")}}return e}var y9=function(t){(0,Q.Z)(n,t);var e=f9(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t))._parse=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this._parse))}},{key:"hash",value:function(){return"Parse ".concat(jY(this._parse))}},{key:"parse",get:function(){return this._parse}},{key:"merge",value:function(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}},{key:"assembleFormatParse",value:function(){var t,e={},n=h9(qY(this._parse));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this._parse[r];1===lq(r)&&(e[r]=i)}}catch(a){n.e(a)}finally{n.f()}return e}},{key:"producedFields",value:function(){return new Set(qY(this._parse))}},{key:"dependentFields",value:function(){return new Set(qY(this._parse))}},{key:"assembleTransforms",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return qY(this._parse).filter((function(t){return!e||lq(t)>1})).map((function(e){var n=g9(e,t._parse[e]);return n?{type:"formula",expr:n,as:sq(e)}:null})).filter((function(t){return null!==t}))}}],[{key:"makeExplicit",value:function(t,e,n){var r,i={},a=e.data;return!y6(a)&&(null===(r=null==a?void 0:a.format)||void 0===r?void 0:r.parse)&&(i=a.format.parse),this.makeWithAncestors(t,i,{},n)}},{key:"makeWithAncestors",value:function(t,e,r,i){var a,o=h9(qY(r));try{for(o.s();!(a=o.n()).done;){var u=a.value,s=i.getWithExplicit(u);void 0!==s.value&&(s.explicit||s.value===r[u]||"derived"===s.value||"flatten"===r[u]?delete r[u]:CK(XJ(u,r[u],s.value)))}}catch(x){o.e(x)}finally{o.f()}var l,c=h9(qY(e));try{for(c.s();!(l=c.n()).done;){var f=l.value,h=i.get(f);void 0!==h&&(h===e[f]?delete e[f]:CK(XJ(f,e[f],h)))}}catch(x){c.e(x)}finally{c.f()}var d=new o6(e,r);i.copyAll(d);var p,g={},v=h9(qY(d.combine()));try{for(v.s();!(p=v.n()).done;){var m=p.value,y=d.get(m);null!==y&&(g[m]=y)}}catch(x){v.e(x)}finally{v.f()}return 0===qY(g).length||i.parseNothing?null:new n(t,g)}}]),n}(T6);function x9(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var b9=function(t){(0,Q.Z)(n,t);var e=x9(n);function n(t){return(0,J.Z)(this,n),e.call(this,t)}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set([V2])}},{key:"hash",value:function(){return"Identifier"}},{key:"assemble",value:function(){return{type:"identifier",as:V2}}}]),n}(T6);function w9(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var S9=function(t){(0,Q.Z)(n,t);var e=w9(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).params=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"hash",value:function(){return"Graticule ".concat(jY(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),n}(T6);function k9(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var C9=function(t){(0,Q.Z)(n,t);var e=k9(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).params=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){var t;return new Set([null!==(t=this.params.as)&&void 0!==t?t:"data"])}},{key:"hash",value:function(){return"Hash ".concat(jY(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"sequence"},this.params)}}]),n}(T6);function E9(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var M9=function(t){(0,Q.Z)(n,t);var e=E9(n);function n(t){var r,i;if((0,J.Z)(this,n),r=e.call(this,null),null!=t||(t={name:"source"}),y6(t)||(i=t.format?Object.assign({},IY(t.format,["parse"])):{}),v6(t))r._data={values:t.values};else if(g6(t)){if(r._data={url:t.url},!i.type){var a=/(?:\.([^.]+))?$/.exec(t.url)[1];LY(["json","csv","tsv","dsv","topojson"],a)||(a="json"),i.type=a}}else b6(t)?r._data={values:[{type:"Sphere"}]}:(m6(t)||y6(t))&&(r._data={});return r._generator=y6(t),t.name&&(r._name=t.name),i&&!YY(i)&&(r._data.format=i),r}return(0,K.Z)(n,[{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"data",get:function(){return this._data}},{key:"hasName",value:function(){return!!this._name}},{key:"isGenerator",get:function(){return this._generator}},{key:"dataName",get:function(){return this._name},set:function(t){this._name=t}},{key:"parent",set:function(t){throw new Error("Source nodes have to be roots.")}},{key:"remove",value:function(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}]),n}(T6);function O9(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return A9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A9(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function A9(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _9(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var D9,T9=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},F9=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};function I9(t){return t instanceof M9||t instanceof S9||t instanceof C9}var P9=function(){function t(){(0,J.Z)(this,t),D9.set(this,void 0),T9(this,D9,!1,"f")}return(0,K.Z)(t,[{key:"setModified",value:function(){T9(this,D9,!0,"f")}},{key:"modifiedFlag",get:function(){return F9(this,D9,"f")}}]),t}();D9=new WeakMap;var j9=function(t){(0,Q.Z)(n,t);var e=_9(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"getNodeDepths",value:function(t,e,n){n.set(t,e);var r,i=O9(t.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.getNodeDepths(a,e+1,n)}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"optimize",value:function(t){var e,n=this.getNodeDepths(t,0,new Map),r=(0,X.Z)(n.entries()).sort((function(t,e){return e[1]-t[1]})),i=O9(r);try{for(i.s();!(e=i.n()).done;){var a=e.value;this.run(a[0])}}catch(o){i.e(o)}finally{i.f()}return this.modifiedFlag}}]),n}(P9),B9=function(t){(0,Q.Z)(n,t);var e=_9(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"optimize",value:function(t){this.run(t);var e,n=O9(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.optimize(r)}}catch(i){n.e(i)}finally{n.f()}return this.modifiedFlag}}]),n}(P9);function L9(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return R9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R9(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function R9(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Z9(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var N9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"mergeNodes",value:function(t,e){var n,r=e.shift(),i=L9(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.removeChild(a),a.parent=r,a.remove()}}catch(o){i.e(o)}finally{i.f()}}},{key:"run",value:function(t){for(var e=t.children.map((function(t){return t.hash()})),n={},r=0;r<e.length;r++)void 0===n[e[r]]?n[e[r]]=[t.children[r]]:n[e[r]].push(t.children[r]);var i,a=L9(qY(n));try{for(a.s();!(i=a.n()).done;){var o=i.value;n[o].length>1&&(this.setModified(),this.mergeNodes(t,n[o]))}}catch(u){a.e(u)}finally{a.f()}}}]),n}(B9),z9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(t){var r;return(0,J.Z)(this,n),(r=e.call(this)).requiresSelectionId=t&&f8(t),r}return(0,K.Z)(n,[{key:"run",value:function(t){t instanceof b9&&(this.requiresSelectionId&&(I9(t.parent)||t.parent instanceof o9||t.parent instanceof y9)||(this.setModified(),t.remove()))}}]),n}(B9),U9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"optimize",value:function(t){return this.run(t,new Set),this.modifiedFlag}},{key:"run",value:function(t,e){var n=new Set;t instanceof L6&&VY(n=t.producedFields(),e)&&(this.setModified(),t.removeFormulas(e),0===t.producedFields.length&&t.remove());var r,i=L9(t.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.run(a,new Set([].concat((0,X.Z)(e),(0,X.Z)(n))))}}catch(o){i.e(o)}finally{i.f()}}}]),n}(P9),H9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(){return(0,J.Z)(this,n),e.call(this)}return(0,K.Z)(n,[{key:"run",value:function(t){t instanceof F6&&!t.isRequired()&&(this.setModified(),t.remove())}}]),n}(B9),W9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"run",value:function(t){if(!(I9(t)||t.numChildren()>1)){var e,n=L9(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof y9)if(t instanceof y9)this.setModified(),t.merge(r);else{if(XY(t.producedFields(),r.dependentFields()))continue;this.setModified(),r.swapWithParent()}}}catch(i){n.e(i)}finally{n.f()}}}}]),n}(j9),V9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"run",value:function(t){var e=(0,X.Z)(t.children),n=t.children.filter((function(t){return t instanceof y9}));if(t.numChildren()>1&&n.length>=1){var r,i={},a=new Set,o=L9(n);try{for(o.s();!(r=o.n()).done;){var u,s=r.value.parse,l=L9(qY(s));try{for(l.s();!(u=l.n()).done;){var c=u.value;c in i?i[c]!==s[c]&&a.add(c):i[c]=s[c]}}catch(b){l.e(b)}finally{l.f()}}}catch(b){o.e(b)}finally{o.f()}var f,h=L9(a);try{for(h.s();!(f=h.n()).done;){delete i[f.value]}}catch(b){h.e(b)}finally{h.f()}if(!YY(i)){this.setModified();var d,p=new y9(t,i),g=L9(e);try{for(g.s();!(d=g.n()).done;){var v=d.value;if(v instanceof y9){var m,y=L9(qY(i));try{for(y.s();!(m=y.n()).done;){var x=m.value;delete v.parse[x]}}catch(b){y.e(b)}finally{y.f()}}t.removeChild(v),v.parent=p,v instanceof y9&&0===qY(v.parse).length&&v.remove()}}catch(b){g.e(b)}finally{g.f()}}}}}]),n}(j9),G9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"run",value:function(t){t instanceof F6||t.numChildren()>0||t instanceof c9||t instanceof M9||(this.setModified(),t.remove())}}]),n}(j9),X9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"run",value:function(t){var e,n=t.children.filter((function(t){return t instanceof L6})),r=n.pop(),i=L9(n);try{for(i.s();!(e=i.n()).done;){var a=e.value;this.setModified(),r.merge(a)}}catch(o){i.e(o)}finally{i.f()}}}]),n}(j9),Y9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"run",value:function(t){var e,n={},r=L9(t.children.filter((function(t){return t instanceof o9})));try{for(r.s();!(e=r.n()).done;){var i=e.value,a=jY(i.groupBy);a in n||(n[a]=[]),n[a].push(i)}}catch(d){r.e(d)}finally{r.f()}var o,u=L9(qY(n));try{for(u.s();!(o=u.n()).done;){var s=n[o.value];if(s.length>1){var l,c=s.pop(),f=L9(s);try{for(f.s();!(l=f.n()).done;){var h=l.value;c.merge(h)&&(t.removeChild(h),h.parent=c,h.remove(),this.setModified())}}catch(d){f.e(d)}finally{f.f()}}}}catch(d){u.e(d)}finally{u.f()}}}]),n}(j9),q9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(t){var r;return(0,J.Z)(this,n),(r=e.call(this)).model=t,r}return(0,K.Z)(n,[{key:"run",value:function(t){var e,n=!(I9(t)||t instanceof m8||t instanceof y9||t instanceof b9),r=[],i=[],a=L9(t.children);try{for(a.s();!(e=a.n()).done;){var o=e.value;o instanceof e9&&(n&&!XY(t.producedFields(),o.dependentFields())?r.push(o):i.push(o))}}catch(g){a.e(g)}finally{a.f()}if(r.length>0){var u,s=r.pop(),l=L9(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;s.merge(c,this.model.renameSignal.bind(this.model))}}catch(g){l.e(g)}finally{l.f()}this.setModified(),t instanceof e9?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){var f,h=i.pop(),d=L9(i);try{for(d.s();!(f=d.n()).done;){var p=f.value;h.merge(p,this.model.renameSignal.bind(this.model))}}catch(g){d.e(g)}finally{d.f()}this.setModified()}}}]),n}(j9),$9=function(t){(0,Q.Z)(n,t);var e=Z9(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"run",value:function(t){var e=(0,X.Z)(t.children),n=RY(e,(function(t){return t instanceof F6}));if(n&&!(t.numChildren()<=1)){var r,i,a=[],o=L9(e);try{for(o.s();!(i=o.n()).done;){var u=i.value;if(u instanceof F6){for(var s=u;1===s.numChildren();){var l=(0,W.Z)(s.children,1)[0];if(!(l instanceof F6))break;s=l}a.push.apply(a,(0,X.Z)(s.children)),r?(t.removeChild(u),u.parent=r.parent,r.parent.removeChild(r),r.parent=s,this.setModified()):r=s}else a.push(u)}}catch(d){o.e(d)}finally{o.f()}if(a.length){this.setModified();var c,f=L9(a);try{for(f.s();!(c=f.n()).done;){var h=c.value;h.parent.removeChild(h),h.parent=r}}catch(d){f.e(d)}finally{f.f()}}}}}]),n}(j9);function J9(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return K9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K9(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function K9(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q9(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var ttt=function(t){(0,Q.Z)(n,t);var e=Q9(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"addDimensions",value:function(t){this.transform.groupby=UY(this.transform.groupby.concat(t),(function(t){return t}))}},{key:"dependentFields",value:function(){var t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map((function(t){return t.field})).filter((function(t){return void 0!==t})).forEach(t.add,t),t}},{key:"producedFields",value:function(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function(t){var e;return null!==(e=t.as)&&void 0!==e?e:p1(t)}},{key:"hash",value:function(){return"JoinAggregateTransform ".concat(jY(this.transform))}},{key:"assemble",value:function(){var t,e=[],n=[],r=[],i=J9(this.transform.joinaggregate);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(a.op),r.push(this.getDefaultName(a)),e.push(void 0===a.field?null:a.field)}}catch(u){i.e(u)}finally{i.f()}var o=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:e},void 0!==o?{groupby:o}:{})}}]),n}(T6);function ett(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ntt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ntt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function ntt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rtt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var itt=function(t){(0,Q.Z)(n,t);var e=rtt(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t))._stack=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this._stack))}},{key:"stack",get:function(){return this._stack}},{key:"addDimensions",value:function(t){var e;(e=this._stack.facetby).push.apply(e,(0,X.Z)(t))}},{key:"dependentFields",value:function(){var t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}},{key:"producedFields",value:function(){return new Set(this._stack.as)}},{key:"hash",value:function(){return"Stack ".concat(jY(this._stack))}},{key:"getGroupbyFields",value:function(){var t=this._stack,e=t.dimensionFieldDefs,n=t.impute,r=t.groupby;return e.length>0?e.map((function(t){return t.bin?n?[p1(t,{binSuffix:"mid"})]:[p1(t,{}),p1(t,{binSuffix:"end"})]:[p1(t)]})).flat():null!=r?r:[]}},{key:"assemble",value:function(){var t=[],e=this._stack,n=e.facetby,r=e.dimensionFieldDefs,i=e.stackField,a=e.stackby,o=e.sort,u=e.offset,s=e.impute,l=e.as;if(s){var c,f=ett(r);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=h.bandPosition,p=void 0===d?.5:d;if(h.bin){var g=p1(h,{expr:"datum"}),v=p1(h,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:"".concat(p,"*").concat(g,"+").concat(1-p,"*").concat(v),as:p1(h,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[].concat((0,X.Z)(a),(0,X.Z)(n)),key:p1(h,{binSuffix:"mid"}),method:"value",value:0})}}catch(m){f.e(m)}finally{f.f()}}return t.push({type:"stack",groupby:[].concat((0,X.Z)(this.getGroupbyFields()),(0,X.Z)(n)),field:i,sort:o,as:l,offset:u}),t}}],[{key:"makeFromTransform",value:function(t,e){var r=e.stack,i=e.groupby,a=e.as,o=e.offset,u=void 0===o?"zero":o,s=[],l=[];if(void 0!==e.sort){var c,f=ett(e.sort);try{for(f.s();!(c=f.n()).done;){var h=c.value;s.push(h.field),l.push(cq(h.order,"ascending"))}}catch(g){f.e(g)}finally{f.f()}}var d,p={field:s,order:l};return d=function(t){return yo(t)&&t.every((function(t){return pu(t)}))&&t.length>1}(a)?a:pu(a)?[a,"".concat(a,"_end")]:["".concat(e.stack,"_start"),"".concat(e.stack,"_end")],new n(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:u,sort:p,facetby:[],as:d})}},{key:"makeFromEncoding",value:function(t,e){var r=e.stack,i=e.encoding;if(!r)return null;var a,o=r.groupbyChannels,u=r.fieldChannel,s=r.offset,l=r.impute,c=o.map((function(t){return M1(i[t])})).filter((function(t){return!!t})),f=function(t){return t.stack.stackBy.reduce((function(t,e){var n=p1(e.fieldDef);return n&&t.push(n),t}),[])}(e),h=e.encoding.order;return a=yo(h)||t1(h)?FJ(h):f.reduce((function(t,e){return t.field.push(e),t.order.push("y"===u?"descending":"ascending"),t}),{field:[],order:[]}),new n(t,{dimensionFieldDefs:c,stackField:e.vgField(u),facetby:[],stackby:f,sort:a,offset:s,impute:l,as:[e.vgField(u,{suffix:"start",forAs:!0}),e.vgField(u,{suffix:"end",forAs:!0})]})}}]),n}(T6);function att(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ott(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ott(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function ott(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function utt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var stt=function(t){(0,Q.Z)(n,t);var e=utt(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"addDimensions",value:function(t){this.transform.groupby=UY(this.transform.groupby.concat(t),(function(t){return t}))}},{key:"dependentFields",value:function(){var t,e,n=new Set;return(null!==(t=this.transform.groupby)&&void 0!==t?t:[]).forEach(n.add,n),(null!==(e=this.transform.sort)&&void 0!==e?e:[]).forEach((function(t){return n.add(t.field)})),this.transform.window.map((function(t){return t.field})).filter((function(t){return void 0!==t})).forEach(n.add,n),n}},{key:"producedFields",value:function(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function(t){var e;return null!==(e=t.as)&&void 0!==e?e:p1(t)}},{key:"hash",value:function(){return"WindowTransform ".concat(jY(this.transform))}},{key:"assemble",value:function(){var t,e,n=[],r=[],i=[],a=[],o=att(this.transform.window);try{for(o.s();!(e=o.n()).done;){var u=e.value;r.push(u.op),i.push(this.getDefaultName(u)),a.push(void 0===u.param?null:u.param),n.push(void 0===u.field?null:u.field)}}catch(m){o.e(m)}finally{o.f()}var s=this.transform.frame,l=this.transform.groupby;if(s&&null===s[0]&&null===s[1]&&r.every((function(t){return X$(t)})))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:n},void 0!==l?{groupby:l}:{});var c=[],f=[];if(void 0!==this.transform.sort){var h,d=att(this.transform.sort);try{for(d.s();!(h=d.n()).done;){var p=h.value;c.push(p.field),f.push(null!==(t=p.order)&&void 0!==t?t:"ascending")}}catch(m){d.e(m)}finally{d.f()}}var g={field:c,order:f},v=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:a,as:i,ops:r,fields:n,sort:g},void 0!==v?{ignorePeers:v}:{}),void 0!==l?{groupby:l}:{}),void 0!==s?{frame:s}:{})}}]),n}(T6);function ltt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ctt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ctt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function ctt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ftt(t){if(t instanceof c9)if(1!==t.numChildren()||t.children[0]instanceof F6){var e=t.model.component.data.main;htt(e);var n,r=(o=t,function t(e){if(!(e instanceof c9)){var n=e.clone();if(n instanceof F6){var r=gtt+n.getSource();n.setSource(r),o.model.component.data.outputNodes[r]=n}else(n instanceof o9||n instanceof itt||n instanceof stt||n instanceof ttt)&&n.addDimensions(o.fields);var i,a=ltt(e.children.flatMap(t));try{for(a.s();!(i=a.n()).done;)i.value.parent=n}catch(u){a.e(u)}finally{a.f()}return[n]}return e.children.flatMap(t)}),i=ltt(t.children.map(r).flat());try{for(i.s();!(n=i.n()).done;){n.value.parent=e}}catch(u){i.e(u)}finally{i.f()}}else{var a=t.children[0];(a instanceof o9||a instanceof itt||a instanceof stt||a instanceof ttt)&&a.addDimensions(t.fields),a.swapWithParent(),ftt(t)}else t.children.map(ftt);var o}function htt(t){if(t instanceof F6&&t.type===d6.Main&&1===t.numChildren()){var e=t.children[0];e instanceof c9||(e.swapWithParent(),htt(t))}}function dtt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ptt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ptt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function ptt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gtt="scale_";function vtt(t){var e,n=dtt(t);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,a=dtt(i.children);try{for(a.s();!(r=a.n()).done;){if(r.value.parent!==i)return!1}}catch(o){a.e(o)}finally{a.f()}if(!vtt(i.children))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}function mtt(t,e){var n,r=!1,i=dtt(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=t.optimize(a)||r}}catch(o){i.e(o)}finally{i.f()}return r}function ytt(t,e,n){var r=t.sources,i=!1;return i=mtt(new H9,r)||i,i=mtt(new z9(e),r)||i,r=r.filter((function(t){return t.numChildren()>0})),i=mtt(new G9,r)||i,r=r.filter((function(t){return t.numChildren()>0})),n||(i=mtt(new W9,r)||i,i=mtt(new q9(e),r)||i,i=mtt(new U9,r)||i,i=mtt(new V9,r)||i,i=mtt(new Y9,r)||i,i=mtt(new X9,r)||i,i=mtt(new N9,r)||i,i=mtt(new $9,r)||i),t.sources=r,i}function xtt(t,e){vtt(t.sources);for(var n=0,r=0,i=0;i<5&&ytt(t,e,!0);i++)n++;t.sources.map(ftt);for(var a=0;a<5&&ytt(t,e,!1);a++)r++;vtt(t.sources),5===Math.max(n,r)&&CK("Maximum optimization runs(".concat(5,") reached."))}var btt=function(){function t(e){(0,J.Z)(this,t),Object.defineProperty(this,"signal",{enumerable:!0,get:e})}return(0,K.Z)(t,null,[{key:"fromName",value:function(e,n){return new t((function(){return e(n)}))}}]),t}();function wtt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Stt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Stt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Stt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ktt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Ctt(t){vet(t)?function(t){var e,n=t.component.scales,r=wtt(qY(n));try{for(r.s();!(e=r.n()).done;){var i=e.value,a=Ett(t,i);if(n[i].setWithExplicit("domains",a),_tt(t,i),t.component.data.isFaceted){for(var o=t;!met(o)&&o.parent;)o=o.parent;if("shared"===o.component.resolve.scale[i]){var u,s=wtt(a.value);try{for(s.s();!(u=s.n()).done;){var l=u.value;dJ(l)&&(l.data=gtt+l.data.replace(gtt,""))}}catch(c){s.e(c)}finally{s.f()}}}}}catch(c){r.e(c)}finally{r.f()}}(t):function(t){var e,n=wtt(t.children);try{for(n.s();!(e=n.n()).done;){Ctt(e.value)}}catch(d){n.e(d)}finally{n.f()}var r,i=t.component.scales,a=wtt(qY(i));try{for(a.s();!(r=a.n()).done;){var o,u=r.value,s=void 0,l=null,c=wtt(t.children);try{for(c.s();!(o=c.n()).done;){var f=o.value.component.scales[u];if(f){s=void 0===s?f.getWithExplicit("domains"):f6(s,f.getWithExplicit("domains"),"domains","scale",Ttt);var h=f.get("selectionExtent");l&&h&&l.param!==h.param&&CK(VJ),l=h}}}catch(d){c.e(d)}finally{c.f()}i[u].setWithExplicit("domains",s),l&&i[u].set("selectionExtent",l,!0)}}catch(d){a.e(d)}finally{a.f()}}(t)}function Ett(t,e){var n=t.getScaleComponent(e).get("type"),r=t.encoding,i=function(t,e,n,r){if("unaggregated"===t){var i=Dtt(e,n),a=i.valid,o=i.reason;if(!a)return void CK(o)}else if(void 0===t&&r.useUnaggregatedDomain&&Dtt(e,n).valid)return"unaggregated";return t}(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return i!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign(Object.assign({},t.specifiedScales[e]),{domain:i})),"x"===e&&O1(r.x2)?O1(r.x)?f6(Ott(n,i,t,"x"),Ott(n,i,t,"x2"),"domain","scale",Ttt):Ott(n,i,t,"x2"):"y"===e&&O1(r.y2)?O1(r.y)?f6(Ott(n,i,t,"y"),Ott(n,i,t,"y2"),"domain","scale",Ttt):Ott(n,i,t,"y2"):Ott(n,i,t,e)}function Mtt(t,e,n){var r,i=null===(r=XK(n))||void 0===r?void 0:r.unit;return"temporal"===e||i?function(t,e,n){return t.map((function(t){var r=j1(t,{timeUnit:n,type:e});return{signal:"{data: ".concat(r,"}")}}))}(t,e,i):[t]}function Ott(t,e,n,r){var i=O1(n.encoding[r]),a=i.type,o=i.timeUnit;if(function(t){return null==t?void 0:t.unionWith}(e)){var u=Ott(t,void 0,n,r),s=Mtt(e.unionWith,a,o);return u6([].concat((0,X.Z)(s),(0,X.Z)(u.value)))}if(fJ(e))return u6([e]);if(e&&"unaggregated"!==e&&!RQ(e))return u6(Mtt(e,a,o));var l=n.stack;if(l&&r===l.fieldChannel){if("normalize"===l.offset)return s6([[0,1]]);var c=n.requestDataName(d6.Main);return s6([{data:c,field:n.vgField(r,{suffix:"start"})},{data:c,field:n.vgField(r,{suffix:"end"})}])}var f=R$(r)&&t1(i)?function(t,e,n){if(!PQ(n))return;var r=t.fieldDef(e),i=r.sort;if(z0(i))return{op:"min",field:U8(r,e),order:"ascending"};var a=t.stack,o=a?new Set([].concat((0,X.Z)(a.groupbyFields),(0,X.Z)(a.stackBy.map((function(t){return t.fieldDef.field}))))):void 0;if(N0(i))return Att(i,a&&!o.has(i.field));if(Z0(i)){var u=i.encoding,s=i.order,l=t.fieldDef(u),c=l.aggregate,f=l.field,h=a&&!o.has(f);if(V$(c)||G$(c))return Att({field:p1(l),order:s},h);if(X$(c)||!c)return Att({op:c,field:f,order:s},h)}else{if("descending"===i)return{op:"min",field:t.vgField(e),order:"descending"};if(LY(["ascending",void 0],i))return!0}return}(n,r,t):void 0;if(n1(i))return s6(Mtt([i.datum],a,o));var h=i;if("unaggregated"===e){var d=n.requestDataName(d6.Main),p=i.field;return s6([{data:d,field:p1({field:p,aggregate:"min"})},{data:d,field:p1({field:p,aggregate:"max"})}])}if(Q$(h.bin)){if(PQ(t))return s6("bin-ordinal"===t?[]:[{data:KY(f)?n.requestDataName(d6.Main):n.requestDataName(d6.Raw),field:n.vgField(r,L1(h,r)?{binSuffix:"range"}:{}),sort:!0!==f&&xo(f)?f:{field:n.vgField(r,{}),op:"min"}}]);var g=h.bin;if(Q$(g)){var v=Q7(n,h.field,g);return s6([new btt((function(){var t=n.getSignalName(v);return"[".concat(t,".start, ").concat(t,".stop]")}))])}return s6([{data:n.requestDataName(d6.Main),field:n.vgField(r,{})}])}if(h.timeUnit&&LY(["time","utc"],t)&&$0(h,vet(n)?n.encoding[x$(r)]:void 0,n.markDef,n.config)){var m=n.requestDataName(d6.Main);return s6([{data:m,field:n.vgField(r)},{data:m,field:n.vgField(r,{suffix:"end"})}])}return s6(f?[{data:KY(f)?n.requestDataName(d6.Main):n.requestDataName(d6.Raw),field:n.vgField(r),sort:f}]:[{data:n.requestDataName(d6.Main),field:n.vgField(r)}])}function Att(t,e){var n=t.op,r=t.field,i=t.order;return Object.assign(Object.assign({op:null!=n?n:e?"sum":B0},r?{field:oq(r)}:{}),i?{order:i}:{})}function _tt(t,e){var n,r=t.component.scales[e],i=t.specifiedScales[e].domain,a=null===(n=t.fieldDef(e))||void 0===n?void 0:n.bin,o=RQ(i)&&i,u=eJ(a)&&nJ(a.extent)&&a.extent;(o||u)&&r.set("selectionExtent",null!=o?o:u,!0)}function Dtt(t,e){var n=t.aggregate,r=t.type;return n?pu(n)&&!J$.has(n)?{valid:!1,reason:lK(n)}:"quantitative"===r&&"log"===e?{valid:!1,reason:cK(t)}:{valid:!0}:{valid:!1,reason:sK(t)}}function Ttt(t,e,n,r){return t.explicit&&e.explicit&&CK(function(t,e,n,r){return"Conflicting ".concat(e.toString(),' property "').concat(t.toString(),'" (').concat(PY(n)," and ").concat(PY(r),"). Using the union of the two domains.")}(n,r,t.value,e.value)),{explicit:t.explicit,value:[].concat((0,X.Z)(t.value),(0,X.Z)(e.value))}}function Ftt(t){var e=UY(t.map((function(t){if(dJ(t)){t.sort;return ktt(t,["sort"])}return t})),jY),n=UY(t.map((function(t){if(dJ(t)){var e=t.sort;return void 0===e||KY(e)||("op"in e&&"count"===e.op&&delete e.field,"ascending"===e.order&&delete e.order),e}})).filter((function(t){return void 0!==t})),jY);if(0!==e.length){if(1===e.length){var r=t[0];if(dJ(r)&&n.length>0){var i=n[0];if(n.length>1)CK(gK),i=!0;else if(xo(i)&&"field"in i){var a=i.field;r.field===a&&(i=!i.order||{order:i.order})}return Object.assign(Object.assign({},r),{sort:i})}return r}var o,u=UY(n.map((function(t){return KY(t)||!("op"in t)||pu(t.op)&&t.op in W$?t:(CK(function(t){return"Dropping sort property ".concat(PY(t),' as unioned domains only support boolean or op "count", "min", and "max".')}(t)),!0)})),jY);1===u.length?o=u[0]:u.length>1&&(CK(gK),o=!0);var s=UY(t.map((function(t){return dJ(t)?t.data:null})),(function(t){return t}));return 1===s.length&&null!==s[0]?Object.assign({data:s[0],fields:e.map((function(t){return t.field}))},o?{sort:o}:{}):Object.assign({fields:e},o?{sort:o}:{})}}function Itt(t){if(dJ(t)&&pu(t.field))return t.field;if(function(t){return!yo(t)&&"fields"in t&&!("data"in t)}(t)){var e,n,r=wtt(t.fields);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(dJ(i)&&pu(i.field))if(e){if(e!==i.field)return CK("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),e}else e=i.field}}catch(o){r.e(o)}finally{r.f()}return CK("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),e}if(function(t){return!yo(t)&&"fields"in t&&"data"in t}(t)){CK("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");var a=t.fields[0];return pu(a)?a:void 0}}function Ptt(t,e){var n=t.component.scales[e].get("domains").map((function(e){return dJ(e)&&(e.data=t.lookupDataSource(e.data)),e}));return Ftt(n)}var jtt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Btt(t){return xet(t)||yet(t)?t.children.reduce((function(t,e){return t.concat(Btt(e))}),Ltt(t)):Ltt(t)}function Ltt(t){return qY(t.component.scales).reduce((function(e,n){var r=t.component.scales[n];if(r.merged)return e;var i=r.combine(),a=i.name,o=i.type,u=i.selectionExtent,s=(i.domains,i.range,i.reverse),l=jtt(i,["name","type","selectionExtent","domains","range","reverse"]),c=function(t,e,n,r){if(A$(n)){if(hJ(t))return{step:{signal:"".concat(e,"_step")}}}else if(xo(t)&&dJ(t))return Object.assign(Object.assign({},t),{data:r.lookupDataSource(t.data)});return t}(i.range,a,n,t),f=Ptt(t,n),h=u?function(t,e,n,r){var i=w8(t,e.param,e);return{signal:jQ(n.get("type"))&&yo(r)&&r[0]>r[1]?"isValid(".concat(i,") && reverse(").concat(i,")"):i}}(t,u,r,f):null;return e.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:a,type:o},f?{domain:f}:{}),h?{domainRaw:h}:{}),{range:c}),void 0!==s?{reverse:s}:{}),l)),e}),[])}function Rtt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Ztt=function(t){(0,Q.Z)(n,t);var e=Rtt(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,{},{name:t})).merged=!1,i.setWithExplicit("type",r),i}return(0,K.Z)(n,[{key:"domainDefinitelyIncludesZero",value:function(){return!1!==this.get("zero")||RY(this.get("domains"),(function(t){return yo(t)&&2===t.length&&t[0]<=0&&t[1]>=0}))}}]),n}(o6);function Ntt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ztt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ztt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function ztt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Utt=["range","scheme"];function Htt(t,e){var n=t.fieldDef(e);if(null==n?void 0:n.bin){var r=n.bin,i=n.field,a=b$(e),o=t.getName(a);if(xo(r)&&r.binned&&void 0!==r.step)return new btt((function(){var n=t.scaleName(e),i='(domain("'.concat(n,'")[1] - domain("').concat(n,'")[0]) / ').concat(r.step);return"".concat(t.getSignalName(o)," / (").concat(i,")")}));if(Q$(r)){var u=Q7(t,i,r);return new btt((function(){var e=t.getSignalName(u),n="(".concat(e,".stop - ").concat(e,".start) / ").concat(e,".step");return"".concat(t.getSignalName(o)," / (").concat(n,")")}))}}}function Wtt(t,e){var n,r=e.specifiedScales[t],i=e.size,a=e.getScaleComponent(t).get("type"),o=Ntt(Utt);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(void 0!==r[u]){var s=UQ(a,u),l=HQ(t,u);if(s)if(l)CK(l);else switch(u){case"range":var c=r.range;if(yo(c)){if(A$(t))return u6(c.map((function(t){if("width"===t||"height"===t){var n=e.getName(t),r=e.getSignalName.bind(e);return btt.fromName(r,n)}return t})))}else if(xo(c))return u6({data:e.requestDataName(d6.Main),field:c.field,sort:{op:"min",field:e.vgField(t)}});return u6(c);case"scheme":return u6(Vtt(r[u]))}else CK(dK(a,u,t))}}}catch(x){o.e(x)}finally{o.f()}var f=t===Sq||"xOffset"===t?"width":"height",h=i[f];if(o3(h))if(A$(t))if(PQ(a)){var d=Gtt(h,e,t);if(d)return u6({step:d})}else CK(pK(f));else if(I$(t)){var p=t===Mq?"x":"y";if("band"===e.getScaleComponent(p).get("type")){var g=Xtt(h,a);if(g)return u6(g)}}var v=r.rangeMin,m=r.rangeMax,y=function(t,e){var n=e.size,r=e.config,i=e.mark,a=e.encoding,o=e.getSignalName.bind(e),u=O1(a[t]),s=u.type,l=e.getScaleComponent(t),c=l.get("type"),f=e.specifiedScales[t],h=f.domain,d=f.domainMid;switch(t){case Sq:case kq:if(LY(["point","band"],c)){var p=Ytt(t,n,r.view);if(o3(p))return{step:Gtt(p,e,t)}}var g=b$(t),v=e.getName(g);return t===kq&&jQ(c)?[btt.fromName(o,v),0]:[0,btt.fromName(o,v)];case Mq:case Oq:return function(t,e,n){var r=t===Mq?"x":"y",i=e.getScaleComponent(r),a=i.get("type"),o=e.scaleName(r);if("band"===a){var u=Ytt(r,e.size,e.config.view);if(o3(u)){var s=Xtt(u,n);if(s)return s}return[0,{signal:"bandwidth('".concat(o,"')")}]}return TY("Cannot use ".concat(t," scale if ").concat(r," scale is not discrete."))}(t,e,c);case Nq:var m=qtt(i,e.component.scales[t].get("zero"),r),y=function(t,e,n,r){var i={x:Htt(n,"x"),y:Htt(n,"y")};switch(t){case"bar":case"tick":if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;var a=Jtt(e,i,r.view);return hu(a)?a-1:new btt((function(){return"".concat(a.signal," - 1")}));case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":if(r.scale.maxSize)return r.scale.maxSize;var o=Jtt(e,i,r.view);return hu(o)?Math.pow($tt*o,2):new btt((function(){return"pow(".concat($tt," * ").concat(o.signal,", 2)")}))}throw new Error(nK("size",t))}(i,n,e,r);return LQ(c)?function(t,e,n){var r=function(){var r=MJ(e),i=MJ(t),a="(".concat(r," - ").concat(i,") / (").concat(n," - 1)");return"sequence(".concat(i,", ").concat(r," + ").concat(a,", ").concat(a,")")};return fJ(e)?new btt(r):{signal:r()}}(m,y,function(t,e,n,r){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return void 0!==n&&yo(n)?n.length+1:(CK(function(t){return"Domain for ".concat(t," is required for threshold scale.")}(r)),3)}}(c,r,h,t)):[m,y];case Dq:return[0,2*Math.PI];case zq:return[0,360];case Aq:return[0,new btt((function(){var t=e.getSignalName("width"),n=e.getSignalName("height");return"min(".concat(t,",").concat(n,")/2")}))];case Vq:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Gq:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Zq:return"symbol";case Bq:case Lq:case Rq:return"ordinal"===c?"nominal"===s?"category":"ordinal":void 0!==d?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case Uq:case Hq:case Wq:return[r.scale.minOpacity,r.scale.maxOpacity]}}(t,e);return(void 0!==v||void 0!==m)&&UQ(a,"rangeMin")&&yo(y)&&2===y.length?u6([null!=v?v:y[0],null!=m?m:y[1]]):s6(y)}function Vtt(t){return function(t){return!pu(t)&&!!t.name}(t)?Object.assign({scheme:t.name},IY(t,["name"])):{scheme:t}}function Gtt(t,e,n){var r,i,a,o,u,s=e.encoding,l=e.getScaleComponent(n),c=w$(n),f=s[c];if("offset"===a3({step:t,offsetIsDiscrete:a1(f)&&cQ(f.type)})&&K1(s,c)){var h=e.getScaleComponent(c),d=e.scaleName(c),p="domain('".concat(d,"').length");if("band"===h.get("type")){var g=null!==(i=null!==(r=h.get("paddingInner"))&&void 0!==r?r:h.get("padding"))&&void 0!==i?i:0,v=null!==(o=null!==(a=h.get("paddingOuter"))&&void 0!==a?a:h.get("padding"))&&void 0!==o?o:0;p="bandspace(".concat(p,", ").concat(g,", ").concat(v,")")}var m=null!==(u=l.get("paddingInner"))&&void 0!==u?u:l.get("padding");return{signal:"".concat(t.step," * ").concat(p," / (1-").concat(CJ(m),")")}}return t.step}function Xtt(t,e){if("offset"===a3({step:t,offsetIsDiscrete:PQ(e)}))return{step:t.step}}function Ytt(t,e,n){var r=t===Sq?"width":"height",i=e[r];return i||p3(n,r)}function qtt(t,e,n){if(e)return fJ(e)?{signal:"".concat(e.signal," ? 0 : ").concat(qtt(t,!1,n))}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(nK("size",t))}var $tt=.95;function Jtt(t,e,n){var r=o3(t.width)?t.width.step:d3(n,"width"),i=o3(t.height)?t.height.step:d3(n,"height");return e.x||e.y?new btt((function(){var t=[e.x?e.x.signal:r,e.y?e.y.signal:i];return"min(".concat(t.join(", "),")")})):Math.min(r,i)}function Ktt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Qtt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qtt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Qtt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tet(t,e){vet(t)?function(t,e){var n,r=t.component.scales,i=t.config,a=t.encoding,o=t.markDef,u=t.specifiedScales,s=Ktt(qY(r));try{for(s.s();!(n=s.n()).done;){var l=n.value,c=u[l],f=r[l],h=t.getScaleComponent(l),d=O1(a[l]),p=c[e],g=h.get("type"),v=h.get("padding"),m=h.get("paddingInner"),y=UQ(g,e),x=HQ(l,e);if(void 0!==p&&(y?x&&CK(x):CK(dK(g,e,l))),y&&void 0===x)if(void 0!==p){var b=d.timeUnit,w=d.type;switch(e){case"domainMax":case"domainMin":OK(c[e])||"temporal"===w||b?f.set(e,{signal:j1(c[e],{type:w,timeUnit:b})},!0):f.set(e,c[e],!0);break;default:f.copyKeyFromObject(e,c)}}else{var S=e in eet?eet[e]({model:t,channel:l,fieldOrDatumDef:d,scaleType:g,scalePadding:v,scalePaddingInner:m,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:o,config:i,hasNestedOffsetScale:Q1(a,l),hasSecondaryRangeChannel:!!a[x$(l)]}):i.scale[e];void 0!==S&&f.set(e,S,!1)}}}catch(k){s.e(k)}finally{s.f()}}(t,e):ret(t,e)}var eet={bins:function(t){var e=t.model,n=t.fieldOrDatumDef;return t1(n)?function(t,e){var n=e.bin;if(Q$(n)){var r=Q7(t,e.field,n);return new btt((function(){return t.getSignalName(r)}))}if(tJ(n)&&eJ(n)&&void 0!==n.step)return{step:n.step};return}(e,n):void 0},interpolate:function(t){return function(t,e){if(LY([Bq,Lq,Rq],t)&&"nominal"!==e)return"hcl";return}(t.channel,t.fieldOrDatumDef.type)},nice:function(t){return function(t,e,n,r,i,a){var o;if((null===(o=M1(a))||void 0===o?void 0:o.bin)||yo(n)||null!=i||null!=r||LY([bQ,wQ],t))return;return!!A$(e)||void 0}(t.scaleType,t.channel,t.domain,t.domainMin,t.domainMax,t.fieldOrDatumDef)},padding:function(t){var e=t.channel,n=t.scaleType,r=t.fieldOrDatumDef,i=t.markDef,a=t.config;return function(t,e,n,r,i,a){if(A$(t)){if(BQ(e)){if(void 0!==n.continuousPadding)return n.continuousPadding;var o=i.type,u=i.orient;if("bar"===o&&(!t1(r)||!r.bin&&!r.timeUnit)&&("vertical"===u&&"x"===t||"horizontal"===u&&"y"===t))return a.continuousBandSize}if(e===SQ)return n.pointPadding}return}(e,n,a.scale,r,i,a.bar)},paddingInner:function(t){var e=t.scalePadding,n=t.channel,r=t.markDef,i=t.scaleType,a=t.config,o=t.hasNestedOffsetScale;return function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(void 0!==t)return;if(A$(e)){var o=i.bandPaddingInner,u=i.barBandPaddingInner,s=i.rectBandPaddingInner,l=i.bandWithNestedOffsetPaddingInner;return a?l:cq(o,"bar"===n?u:s)}if(I$(e)&&r===kQ)return i.offsetBandPaddingInner;return}(e,n,r.type,i,a.scale,o)},paddingOuter:function(t){var e=t.scalePadding,n=t.channel,r=t.scaleType,i=t.scalePaddingInner,a=t.config,o=t.hasNestedOffsetScale;return function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(void 0!==t)return;if(A$(e)){var o=i.bandPaddingOuter,u=i.bandWithNestedOffsetPaddingOuter;if(a)return u;if(n===kQ)return cq(o,fJ(r)?{signal:"".concat(r.signal,"/2")}:r/2)}else if(I$(e)){if(n===SQ)return.5;if(n===kQ)return i.offsetBandPaddingOuter}return}(e,n,r,i,a.scale,o)},reverse:function(t){var e=t.fieldOrDatumDef,n=t.scaleType,r=t.channel,i=t.config;return function(t,e,n,r){if("x"===n&&void 0!==r.xReverse)return jQ(t)&&"descending"===e?fJ(r.xReverse)?{signal:"!".concat(r.xReverse.signal)}:!r.xReverse:r.xReverse;if(jQ(t)&&"descending"===e)return!0;return}(n,t1(e)?e.sort:void 0,r,i.scale)},zero:function(t){var e=t.channel,n=t.fieldOrDatumDef,r=t.domain,i=t.markDef,a=t.scaleType,o=t.config,u=t.hasSecondaryRangeChannel;return function(t,e,n,r,i,a,o){if(n&&"unaggregated"!==n&&jQ(i)){if(yo(n)){var u=n[0],s=n[n.length-1];if(u<=0&&s>=0)return!0}return!1}if("size"===t&&"quantitative"===e.type&&!LQ(i))return!0;if((!t1(e)||!e.bin)&&LY([].concat((0,X.Z)(O$),(0,X.Z)(D$)),t)){var l=r.orient,c=r.type;return(!LY(["bar","area","line","trail"],c)||!("horizontal"===l&&"y"===t||"vertical"===l&&"x"===t))&&(!(!LY(["bar","area"],c)||o)||(null==a?void 0:a.zero))}return!1}(e,n,r,i,a,o.scale,u)}};function net(t){vet(t)?function(t){var e,n=t.component.scales,r=Ntt(L$);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=n[i];if(a){var o=Wtt(i,t);a.setWithExplicit("range",o)}}}catch(u){r.e(u)}finally{r.f()}}(t):ret(t,"range")}function ret(t,e){var n,r=t.component.scales,i=Ktt(t.children);try{for(i.s();!(n=i.n()).done;){var a=n.value;"range"===e?net(a):tet(a,e)}}catch(d){i.e(d)}finally{i.f()}var o,u=Ktt(qY(r));try{for(u.s();!(o=u.n()).done;){var s,l=o.value,c=void 0,f=Ktt(t.children);try{for(f.s();!(s=f.n()).done;){var h=s.value.component.scales[l];if(h)c=f6(c,h.getWithExplicit(e),e,"scale",l6((function(t,n){return"range"===e&&t.step&&n.step?t.step-n.step:0})))}}catch(d){f.e(d)}finally{f.f()}r[l].setWithExplicit(e,c)}}catch(d){u.e(d)}finally{u.f()}}function iet(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=aet(e,n,r,i),o=t.type;return R$(e)?void 0!==o?VQ(e,o)?t1(n)&&!WQ(o,n.type)?(CK(hK(o,a)),a):o:(CK(fK(e,o,a)),a):a:null}function aet(t,e,n,r){var i;switch(e.type){case"nominal":case"ordinal":if(o$(t)||"discrete"===U$(t))return"shape"===t&&"ordinal"===e.type&&CK(oK(t,"ordinal")),"ordinal";if(A$(t)||I$(t)){if(LY(["rect","bar","image","rule"],n.type))return"band";if(r)return"band"}else if("arc"===n.type&&t in _$)return"band";return p0(n[b$(t)])||l1(e)&&(null===(i=e.axis)||void 0===i?void 0:i.tickBand)?"band":"point";case"temporal":return o$(t)?"time":"discrete"===U$(t)?(CK(oK(t,"temporal")),"ordinal"):t1(e)&&e.timeUnit&&XK(e.timeUnit).utc?"utc":"time";case"quantitative":return o$(t)?t1(e)&&Q$(e.bin)?"bin-ordinal":"linear":"discrete"===U$(t)?(CK(oK(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(JJ(e.type))}function oet(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return uet(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uet(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function uet(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function set(t){vet(t)?t.component.scales=function(t){var e,n=t.encoding,r=t.mark,i=t.markDef,a={},o=oet(L$);try{for(o.s();!(e=o.n()).done;){var u=e.value,s=O1(n[u]);if(!s||r!==o0||u!==Zq||s.type!==gQ){var l=s&&s.scale;if(I$(u))if(!Q1(n,S$(u))){l&&CK(rK(u));continue}if(s&&null!==l&&!1!==l){null!=l||(l={});var c=iet(l,u,s,i,Q1(n,u));a[u]=new Ztt(t.scaleName("".concat(u),!0),{value:c,explicit:l.type===c})}}}}catch(f){o.e(f)}finally{o.f()}return a}(t):t.component.scales=function(t){var e,n,r,i=t.component.scales={},a={},o=t.component.resolve,u=oet(t.children);try{for(u.s();!(r=u.n()).done;){var s=r.value;set(s);var l,c=oet(qY(s.component.scales));try{for(c.s();!(l=c.n()).done;){var f=l.value;if(null!==(e=(n=o.scale)[f])&&void 0!==e||(n[f]=p7(f,t)),"shared"===o.scale[f]){var h=a[f],d=s.component.scales[f].getWithExplicit("type");h?EQ(h.value,d.value)?a[f]=f6(h,d,"type","scale",cet):(o.scale[f]="independent",delete a[f]):a[f]=d}}}catch(k){c.e(k)}finally{c.f()}}}catch(k){u.e(k)}finally{u.f()}var p,g=oet(qY(a));try{for(g.s();!(p=g.n()).done;){var v=p.value,m=t.scaleName(v,!0),y=a[v];i[v]=new Ztt(m,y);var x,b=oet(t.children);try{for(b.s();!(x=b.n()).done;){var w=x.value,S=w.component.scales[v];S&&(w.renameScale(S.get("name"),m),S.merged=!0)}}catch(k){b.e(k)}finally{b.f()}}}catch(k){g.e(k)}finally{g.f()}return i}(t)}var cet=l6((function(t,e){return OQ(t)-OQ(e)}));function fet(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}function het(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return det(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return det(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function det(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var pet=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},get=function(){function t(){(0,J.Z)(this,t),this.nameMap={}}return(0,K.Z)(t,[{key:"rename",value:function(t,e){this.nameMap[t]=e}},{key:"has",value:function(t){return void 0!==this.nameMap[t]}},{key:"get",value:function(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}]),t}();function vet(t){return"unit"===(null==t?void 0:t.type)}function met(t){return"facet"===(null==t?void 0:t.type)}function yet(t){return"concat"===(null==t?void 0:t.type)}function xet(t){return"layer"===(null==t?void 0:t.type)}var bet=function(){function t(e,n,r,i,a,o,u){var s,l,c=this;(0,J.Z)(this,t),this.type=n,this.parent=r,this.config=a,this.correctDataNames=function(t){var e,n,r;return(null===(e=t.from)||void 0===e?void 0:e.data)&&(t.from.data=c.lookupDataSource(t.from.data)),(null===(r=null===(n=t.from)||void 0===n?void 0:n.facet)||void 0===r?void 0:r.data)&&(t.from.facet.data=c.lookupDataSource(t.from.facet.data)),t},this.parent=r,this.config=a,this.view=uJ(u),this.name=null!==(s=e.name)&&void 0!==s?s:i,this.title=cJ(e.title)?{text:e.title}:e.title?uJ(e.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new get,this.projectionNameMap=r?r.projectionNameMap:new get,this.signalNameMap=r?r.signalNameMap:new get,this.data=e.data,this.description=e.description,this.transforms=function(t){return t.map((function(t){return d5(t)?{filter:MY(t.filter,sQ)}:t}))}(null!==(l=e.transform)&&void 0!==l?l:[]),this.layout="layer"===n||"unit"===n?{}:function(t,e,n){var r,i,a=n[e],o={},u=a.spacing,s=a.columns;void 0!==u&&(o.spacing=u),void 0!==s&&(W0(t)&&!U0(t.facet)||t3(t))&&(o.columns=s),e3(t)&&(o.columns=1);var l,c=r3(s3);try{for(c.s();!(l=c.n()).done;){var f=l.value;if(void 0!==t[f])if("spacing"===f){var h=t[f];o[f]=hu(h)?h:{row:null!==(r=h.row)&&void 0!==r?r:u,column:null!==(i=h.column)&&void 0!==i?i:u}}else o[f]=t[f]}}catch(d){c.e(d)}finally{c.f()}return o}(e,n,a),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:W0(e)||(null==r?void 0:r.component.data.isFaceted)&&void 0===e.data},layoutSize:new o6,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?DY(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return(0,K.Z)(t,[{key:"width",get:function(){return this.getSizeSignalRef("width")}},{key:"height",get:function(){return this.getSizeSignalRef("height")}},{key:"parse",value:function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function(){!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.ignoreRange;set(t),Ctt(t);var r,i=oet(zQ);try{for(i.s();!(r=i.n()).done;){tet(t,r.value)}}catch(a){i.e(a)}finally{i.f()}n||net(t)}(this)}},{key:"parseProjection",value:function(){G7(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function(){T7(this)}},{key:"assembleEncodeFromView",value:function(t){t.style;var e,n=pet(t,["style"]),r={},i=het(qY(n));try{for(i.s();!(e=i.n()).done;){var a=e.value,o=n[a];void 0!==o&&(r[a]=kJ(o))}}catch(u){i.e(u)}finally{i.f()}return r}},{key:"assembleGroupEncodeEntry",value:function(t){var e={};return this.view&&(e=this.assembleEncodeFromView(this.view)),t||(this.description&&(e.description=kJ(this.description)),"unit"!==this.type&&"layer"!==this.type)?YY(e)?void 0:e:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!=e?e:{})}},{key:"assembleLayout",value:function(){if(this.layout){var t=this.layout,e=t.spacing,n=pet(t,["spacing"]),r=this.component,i=this.config,a=function(t,e){var n,r={},i=$8(s$);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t[a];if(null==o?void 0:o.facetFieldDef){var u=X8(["titleAnchor","titleOrient"],o.facetFieldDef.header,e,a),s=u.titleAnchor,l=V8(a,u.titleOrient),c=o7(s,l);void 0!==c&&(r[l]=c)}}}catch(f){i.e(f)}finally{i.f()}return YY(r)?void 0:r}(r.layoutHeaders,i);return Object.assign(Object.assign(Object.assign({padding:e},this.assembleDefaultLayout()),n),a?{titleBand:a}:{})}}},{key:"assembleDefaultLayout",value:function(){return{}}},{key:"assembleHeaderMarks",value:function(){var t,e=this.component.layoutHeaders,n=[],r=het(s$);try{for(r.s();!(t=r.n()).done;){var i=t.value;e[i].title&&n.push(K8(this,i))}}catch(s){r.e(s)}finally{r.f()}var a,o=het(Y8);try{for(o.s();!(a=o.n()).done;){var u=a.value;n=n.concat(e7(this,u))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"assembleAxes",value:function(){return function(t,e){var n=t.x,r=void 0===n?[]:n,i=t.y,a=void 0===i?[]:i;return[].concat((0,X.Z)(r.map((function(t){return A8(t,"grid",e)}))),(0,X.Z)(a.map((function(t){return A8(t,"grid",e)}))),(0,X.Z)(r.map((function(t){return A8(t,"main",e)}))),(0,X.Z)(a.map((function(t){return A8(t,"main",e)})))).filter((function(t){return t}))}(this.component.axes,this.config)}},{key:"assembleLegends",value:function(){return R7(this)}},{key:"assembleProjections",value:function(){return Z7(this)}},{key:"assembleTitle",value:function(){var t,e,n,r=null!==(t=this.title)&&void 0!==t?t:{},i=r.encoding,a=pet(r,["encoding"]),o=Object.assign(Object.assign(Object.assign({},lJ(this.config.title).nonMarkTitleProperties),a),i?{encode:{update:i}}:{});if(o.text)return LY(["unit","layer"],this.type)?LY(["middle",void 0],o.anchor)&&(null!==(e=o.frame)&&void 0!==e||(o.frame="group")):null!==(n=o.anchor)&&void 0!==n||(o.anchor="start"),YY(o)?void 0:o}},{key:"assembleGroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};(t=t.concat(this.assembleSignals())).length>0&&(e.signals=t);var n=this.assembleLayout();n&&(e.layout=n),e.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||met(this.parent)?Btt(this):[];r.length>0&&(e.scales=r);var i=this.assembleAxes();i.length>0&&(e.axes=i);var a=this.assembleLegends();return a.length>0&&(e.legends=a),e}},{key:"getName",value:function(t){return QY((this.name?"".concat(this.name,"_"):"")+t)}},{key:"getDataName",value:function(t){return this.getName(d6[t].toLowerCase())}},{key:"requestDataName",value:function(t){var e=this.getDataName(t),n=this.component.data.outputNodeRefCounts;return n[e]=(n[e]||0)+1,e}},{key:"getSizeSignalRef",value:function(t){if(met(this.parent)){var e=T$(h7(t)),n=this.component.scales[e];if(n&&!n.merged){var r=n.get("type"),i=n.get("range");if(PQ(r)&&hJ(i)){var a=n.get("name"),o=Itt(Ptt(this,e));return o?{signal:f7(a,n,p1({aggregate:"distinct",field:o},{expr:"datum"}))}:(CK(zJ(e)),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}},{key:"lookupDataSource",value:function(t){var e=this.component.data.outputNodes[t];return e?e.getSource():t}},{key:"getSignalName",value:function(t){return this.signalNameMap.get(t)}},{key:"renameSignal",value:function(t,e){this.signalNameMap.rename(t,e)}},{key:"renameScale",value:function(t,e){this.scaleNameMap.rename(t,e)}},{key:"renameProjection",value:function(t,e){this.projectionNameMap.rename(t,e)}},{key:"scaleName",value:function(t,e){return e?this.getName(t):p$(t)&&R$(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}},{key:"projectionName",value:function(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");var e=this.component.scales[t];return e&&!e.merged?e:this.parent?this.parent.getScaleComponent(t):void 0}},{key:"getSelectionComponent",value:function(t,e){var n=this.component.selection[t];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(t,e)),!n)throw new Error('Cannot find a selection named "'.concat(e,'".'));return n}},{key:"hasAxisOrientSignalRef",value:function(){var t,e;return(null===(t=this.component.axes.x)||void 0===t?void 0:t.some((function(t){return t.hasOrientSignalRef()})))||(null===(e=this.component.axes.y)||void 0===e?void 0:e.some((function(t){return t.hasOrientSignalRef()})))}}]),t}(),wet=function(t){(0,Q.Z)(n,t);var e=fet(n);function n(){return(0,J.Z)(this,n),e.apply(this,arguments)}return(0,K.Z)(n,[{key:"vgField",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fieldDef(t);if(n)return p1(n,e)}},{key:"reduceFieldDef",value:function(t,e){return function(t,e,n,r){return t?qY(t).reduce((function(n,i){var a=t[i];return yo(a)?a.reduce((function(t,n){return e.call(r,t,n,i)}),n):e.call(r,n,a,i)}),n):n}(this.getMapping(),(function(e,n,r){var i=M1(n);return i?t(e,i,r):e}),e)}},{key:"forEachFieldDef",value:function(t,e){a2(this.getMapping(),(function(e,n){var r=M1(e);r&&t(r,n)}),e)}}]),n}(bet);function ket(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Cet=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Eet=function(t){(0,Q.Z)(n,t);var e=ket(n);function n(t,r){var i,a,o,u;(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i.transform=DY(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[null!==(o=s[0])&&void 0!==o?o:"value",null!==(u=s[1])&&void 0!==u?u:"density"],r.groupby&&null==r.minsteps&&null==r.maxsteps&&null==r.steps&&(i.transform.steps=200),i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.density].concat((0,X.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"DensityTransform ".concat(jY(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.density,n=Cet(t,["density"]);return Object.assign({type:"kde",field:e},n)}}]),n}(T6);function Met(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Oet=function(t){(0,Q.Z)(n,t);var e=Met(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).filter=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,Object.assign({},this.filter))}},{key:"dependentFields",value:function(){return new Set(qY(this.filter))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"FilterInvalid ".concat(jY(this.filter))}},{key:"assemble",value:function(){var t=this,e=qY(this.filter).reduce((function(e,n){var r=t.filter[n],i=p1(r,{expr:"datum"});return null!==r&&("temporal"===r.type?e.push("(isDate(".concat(i,") || (isValid(").concat(i,") && isFinite(+").concat(i,")))")):"quantitative"===r.type&&(e.push("isValid(".concat(i,")")),e.push("isFinite(+".concat(i,")")))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}],[{key:"make",value:function(t,e){var r=e.config,i=e.mark;if("filter"!==AJ("invalid",e.markDef,r))return null;var a=e.reduceFieldDef((function(t,n,r){var a=R$(r)&&e.getScaleComponent(r);a&&(jQ(a.get("type"))&&"count"!==n.aggregate&&!u0(i)&&(t[n.field]=n));return t}),{});return qY(a).length?new n(t,a):null}}]),n}(T6);function Aet(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var _et=function(t){(0,Q.Z)(n,t);var e=Aet(n);function n(t,r){var i;(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i.transform=DY(r);var a=i.transform,o=a.flatten,u=a.as,s=void 0===u?[]:u;return i.transform.as=o.map((function(t,e){var n;return null!==(n=s[e])&&void 0!==n?n:t})),i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(this.parent,DY(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.flatten)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FlattenTransform ".concat(jY(this.transform))}},{key:"assemble",value:function(){var t=this.transform;return{type:"flatten",fields:t.flatten,as:t.as}}}]),n}(T6);function Det(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Tet=function(t){(0,Q.Z)(n,t);var e=Det(n);function n(t,r){var i,a,o,u;(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i.transform=DY(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[null!==(o=s[0])&&void 0!==o?o:"key",null!==(u=s[1])&&void 0!==u?u:"value"],i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.fold)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FoldTransform ".concat(jY(this.transform))}},{key:"assemble",value:function(){var t=this.transform;return{type:"fold",fields:t.fold,as:t.as}}}]),n}(T6);function Fet(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Iet=function(t){(0,Q.Z)(n,t);var e=Fet(n);function n(t,r,i,a){var o;return(0,J.Z)(this,n),(o=e.call(this,t)).fields=r,o.geojson=i,o.signal=a,o}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.fields),this.geojson,this.signal)}},{key:"dependentFields",value:function(){var t,e=(null!==(t=this.fields)&&void 0!==t?t:[]).filter(pu);return new Set([].concat((0,X.Z)(this.geojson?[this.geojson]:[]),(0,X.Z)(e)))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(jY(this.fields))}},{key:"assemble",value:function(){return[].concat((0,X.Z)(this.geojson?[{type:"filter",expr:'isValid(datum["'.concat(this.geojson,'"])')}]:[]),[Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})])}}],[{key:"parseAll",value:function(t,e){if(e.component.projection&&!e.component.projection.isFit)return t;for(var r=0,i=0,a=[[Iq,Fq],[jq,Pq]];i<a.length;i++){var o=a[i].map((function(t){var n=O1(e.encoding[t]);return t1(n)?n.field:n1(n)?{expr:"".concat(n.datum)}:u1(n)?{expr:"".concat(n.value)}:void 0}));(o[0]||o[1])&&(t=new n(t,o,null,e.getName("geojson_".concat(r++))))}if(e.channelHasField(Zq)){var u=e.typedFieldDef(Zq);u.type===gQ&&(t=new n(t,null,u.field,e.getName("geojson_".concat(r++))))}return t}}]),n}(T6);function Pet(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var jet=function(t){(0,Q.Z)(n,t);var e=Pet(n);function n(t,r,i,a){var o;return(0,J.Z)(this,n),(o=e.call(this,t)).projection=r,o.fields=i,o.as=a,o}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,this.projection,DY(this.fields),DY(this.as))}},{key:"dependentFields",value:function(){return new Set(this.fields.filter(pu))}},{key:"producedFields",value:function(){return new Set(this.as)}},{key:"hash",value:function(){return"Geopoint ".concat(this.projection," ").concat(jY(this.fields)," ").concat(jY(this.as))}},{key:"assemble",value:function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function(t,e){if(!e.projectionName())return t;for(var r=0,i=[[Iq,Fq],[jq,Pq]];r<i.length;r++){var a=i[r],o=a.map((function(t){var n=O1(e.encoding[t]);return t1(n)?n.field:n1(n)?{expr:"".concat(n.datum)}:u1(n)?{expr:"".concat(n.value)}:void 0})),u=a[0]===jq?"2":"";(o[0]||o[1])&&(t=new n(t,e.projectionName(),o,[e.getName("x".concat(u)),e.getName("y".concat(u))]))}return t}}]),n}(T6);function Bet(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Let=function(t){(0,Q.Z)(n,t);var e=Bet(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.impute,this.transform.key].concat((0,X.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set([this.transform.impute])}},{key:"processSequence",value:function(t){var e=t.start,n=void 0===e?0:e,r=t.stop,i=t.step,a=[n,r].concat((0,X.Z)(i?[i]:[])).join(",");return{signal:"sequence(".concat(a,")")}}},{key:"hash",value:function(){return"Impute ".concat(jY(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.impute,n=t.key,r=t.keyvals,i=t.method,a=t.groupby,o=t.value,u=t.frame,s=void 0===u?[null,null]:u,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:e,key:n},r?{keyvals:p5(r)?this.processSequence(r):r}:{}),{method:"value"}),a?{groupby:a}:{}),{value:i&&"value"!==i?null:o});return i&&"value"!==i?[l,Object.assign({type:"window",as:["imputed_".concat(e,"_value")],ops:[i],fields:[e],frame:s,ignorePeers:!1},a?{groupby:a}:{}),{type:"formula",expr:"datum.".concat(e," === null ? datum.imputed_").concat(e,"_value : datum.").concat(e),as:e}]:[l]}}],[{key:"makeFromTransform",value:function(t,e){return new n(t,e)}},{key:"makeFromEncoding",value:function(t,e){var r=e.encoding,i=r.x,a=r.y;if(t1(i)&&t1(a)){var o=i.impute?i:a.impute?a:void 0;if(void 0===o)return;var u=i.impute?a:a.impute?i:void 0,s=o.impute,l=s.method,c=s.value,f=s.frame,h=s.keyvals,d=o2(e.mark,r);return new n(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:u.field},l?{method:l}:{}),void 0!==c?{value:c}:{}),f?{frame:f}:{}),void 0!==h?{keyvals:h}:{}),d.length?{groupby:d}:{}))}return null}}]),n}(T6);function Ret(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Zet=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Net=function(t){(0,Q.Z)(n,t);var e=Ret(n);function n(t,r){var i,a,o,u;(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i.transform=DY(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[null!==(o=s[0])&&void 0!==o?o:r.on,null!==(u=s[1])&&void 0!==u?u:r.loess],i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.loess,this.transform.on].concat((0,X.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"LoessTransform ".concat(jY(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.loess,n=t.on,r=Zet(t,["loess","on"]);return Object.assign({type:"loess",x:n,y:e},r)}}]),n}(T6);function zet(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Uet=function(t){(0,Q.Z)(n,t);var e=zet(n);function n(t,r,i){var a;return(0,J.Z)(this,n),(a=e.call(this,t)).transform=r,a.secondary=i,a}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform),this.secondary)}},{key:"dependentFields",value:function(){return new Set([this.transform.lookup])}},{key:"producedFields",value:function(){return new Set(this.transform.as?Ho(this.transform.as):this.transform.from.fields)}},{key:"hash",value:function(){return"Lookup ".concat(jY({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function(){var t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Ho(this.transform.as)}:{});else{var e=this.transform.as;pu(e)||(CK('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),e="_lookup"),t={as:[e]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function(t,e,r,i){var a=e.component.data.sources,o=r.from,u=null;if(function(t){return"data"in t}(o)){var s=wnt(o.data,a);s||(s=new M9(o.data),a.push(s));var l=e.getName("lookup_".concat(i));u=new F6(s,l,d6.Lookup,e.component.data.outputNodeRefCounts),e.component.data.outputNodes[l]=u}else if(function(t){return"param"in t}(o)){var c,f=o.param;r=Object.assign({as:f},r);try{c=e.getSelectionComponent(QY(f),f)}catch(h){throw new Error('Lookups can only be performed on selection parameters. "'.concat(f,'" is a variable parameter.'))}if(!(u=c.materialized))throw new Error(function(t){return'Cannot define and lookup the "'.concat(t,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?"}(f))}return new n(t,r,u.getSource())}}]),n}(T6);function Het(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Wet=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Vet=function(t){(0,Q.Z)(n,t);var e=Het(n);function n(t,r){var i,a,o,u;(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i.transform=DY(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[null!==(o=s[0])&&void 0!==o?o:"prob",null!==(u=s[1])&&void 0!==u?u:"value"],i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.quantile].concat((0,X.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"QuantileTransform ".concat(jY(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.quantile,n=Wet(t,["quantile"]);return Object.assign({type:"quantile",field:e},n)}}]),n}(T6);function Get(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Xet=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Yet=function(t){(0,Q.Z)(n,t);var e=Get(n);function n(t,r){var i,a,o,u;(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i.transform=DY(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[null!==(o=s[0])&&void 0!==o?o:r.on,null!==(u=s[1])&&void 0!==u?u:r.regression],i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.regression,this.transform.on].concat((0,X.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"RegressionTransform ".concat(jY(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.regression,n=t.on,r=Xet(t,["regression","on"]);return Object.assign({type:"regression",x:n,y:e},r)}}]),n}(T6);function qet(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var $et=function(t){(0,Q.Z)(n,t);var e=qet(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"addDimensions",value:function(t){var e;this.transform.groupby=UY((null!==(e=this.transform.groupby)&&void 0!==e?e:[]).concat(t),(function(t){return t}))}},{key:"producedFields",value:function(){}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.pivot,this.transform.value].concat((0,X.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"hash",value:function(){return"PivotTransform ".concat(jY(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.pivot,n=t.value,r=t.groupby,i=t.limit,a=t.op;return Object.assign(Object.assign(Object.assign({type:"pivot",field:e,value:n},void 0!==i?{limit:i}:{}),void 0!==a?{op:a}:{}),void 0!==r?{groupby:r}:{})}}]),n}(T6);function Jet(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Ket=function(t){(0,Q.Z)(n,t);var e=Jet(n);function n(t,r){var i;return(0,J.Z)(this,n),(i=e.call(this,t)).transform=r,i}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(null,DY(this.transform))}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"SampleTransform ".concat(jY(this.transform))}},{key:"assemble",value:function(){return{type:"sample",size:this.transform.sample}}}]),n}(T6);function Qet(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return tnt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tnt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function tnt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ent(t){var e=0;return function n(r,i){var a,o,u,s;if(r instanceof M9&&(r.isGenerator||g6(r.data)||(t.push(i),i={name:null,source:i.name,transform:[]})),r instanceof y9&&(r.parent instanceof M9&&!i.source?(i.format=Object.assign(Object.assign({},null!==(a=i.format)&&void 0!==a?a:{}),{parse:r.assembleFormatParse()}),(o=i.transform).push.apply(o,(0,X.Z)(r.assembleTransforms(!0)))):(u=i.transform).push.apply(u,(0,X.Z)(r.assembleTransforms()))),r instanceof c9)return i.name||(i.name="data_".concat(e++)),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source,void t.push.apply(t,(0,X.Z)(r.assemble()));if((r instanceof S9||r instanceof C9||r instanceof Oet||r instanceof m8||r instanceof z8||r instanceof jet||r instanceof o9||r instanceof Uet||r instanceof stt||r instanceof ttt||r instanceof Tet||r instanceof _et||r instanceof Eet||r instanceof Net||r instanceof Vet||r instanceof Yet||r instanceof b9||r instanceof Ket||r instanceof $et)&&i.transform.push(r.assemble()),(r instanceof e9||r instanceof L6||r instanceof Let||r instanceof itt||r instanceof Iet)&&(s=i.transform).push.apply(s,(0,X.Z)(r.assemble())),r instanceof F6)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof F6)r.setSource(i.name);else{if(i.name||(i.name="data_".concat(e++)),r.setSource(i.name),1===r.numChildren())t.push(i),i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof F6&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(r.children[0],i);break;default:i.name||(i.name="data_".concat(e++));var l=i.name;!i.source||i.transform.length>0?t.push(i):l=i.source;var c,f=Qet(r.children);try{for(f.s();!(c=f.n()).done;){n(c.value,{name:null,source:l,transform:[]})}}catch(h){f.e(h)}finally{f.f()}}}}function nnt(t,e){var n,r,i,a=[],o=ent(a),u=0,s=Qet(t.sources);try{for(s.s();!(i=s.n()).done;){var l=i.value;l.hasName()||(l.dataName="source_".concat(u++));var c=l.assemble();o(l,c)}}catch(A){s.e(A)}finally{s.f()}for(var f=0,h=a;f<h.length;f++){var d=h[f];0===d.transform.length&&delete d.transform}var p,g=0,v=Qet(a.entries());try{for(v.s();!(p=v.n()).done;){var m=(0,W.Z)(p.value,2),y=m[0],x=m[1];0!==(null!==(n=x.transform)&&void 0!==n?n:[]).length||x.source||a.splice(g++,0,a.splice(y,1)[0])}}catch(A){v.e(A)}finally{v.f()}for(var b=0,w=a;b<w.length;b++){var S,k=Qet(null!==(r=w[b].transform)&&void 0!==r?r:[]);try{for(k.s();!(S=k.n()).done;){var C=S.value;"lookup"===C.type&&(C.from=t.outputNodes[C.from].getSource())}}catch(A){k.e(A)}finally{k.f()}}for(var E=0,M=a;E<M.length;E++){var O=M[E];O.name in e&&(O.values=e[O.name])}return a}function rnt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return int(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return int(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function int(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ant(t){return"top"===t||"left"===t||fJ(t)?"header":"footer"}function ont(t,e){var n,r=t.facet,i=t.config,a=t.child,o=t.component;if(t.channelHasField(e)){var u=r[e],s=G8("title",null,i,e),l=w1(u,i,{allowDisabling:!0,includeDefault:void 0===s||!!s});a.component.layoutHeaders[e].title&&(l=yo(l)?l.join(", "):l,l+=" / ".concat(a.component.layoutHeaders[e].title),a.component.layoutHeaders[e].title=null);var c=G8("labelOrient",u.header,i,e),f=null!==u.header&&cq(null===(n=u.header)||void 0===n?void 0:n.labels,i.header.labels,!0),h=LY(["bottom","right"],c)?"footer":"header";o.layoutHeaders[e]=(0,Z.Z)({title:null!==u.header?l:null,facetFieldDef:u},h,"facet"===e?[]:[unt(t,e,f)])}}function unt(t,e,n){var r="row"===e?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function snt(t,e){var n,r=t.child;if(r.component.axes[e]){var i=t.component,a=i.layoutHeaders,o=i.resolve;if(o.axis[e]=g7(o,e),"shared"===o.axis[e]){var u,s="x"===e?"column":"row",l=a[s],c=rnt(r.component.axes[e]);try{for(c.s();!(u=c.n()).done;){var f=u.value,h=ant(f.get("orient"));null!==(n=l[h])&&void 0!==n||(l[h]=[unt(t,s,!1)]);var d=A8(f,"main",t.config,{header:!0});d&&l[h][0].axes.push(d),f.mainExtracted=!0}}catch(p){c.e(p)}finally{c.f()}}}}function lnt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return cnt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cnt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function cnt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fnt(t){var e,n=lnt(t.children);try{for(n.s();!(e=n.n()).done;){e.value.parseLayoutSize()}}catch(r){n.e(r)}finally{n.f()}}function hnt(t,e){var n,r,i,a=h7(e),o=T$(a),u=t.component.resolve,s=t.component.layoutSize,l=lnt(t.children);try{for(l.s();!(i=l.n()).done;){var c=i.value.component.layoutSize.getWithExplicit(a),f=null!==(n=u.scale[o])&&void 0!==n?n:p7(o,t);if("independent"===f&&"step"===c.value){r=void 0;break}if(r){if("independent"===f&&r.value!==c.value){r=void 0;break}r=f6(r,c,a,"")}else r=c}}catch(g){l.e(g)}finally{l.f()}if(r){var h,d=lnt(t.children);try{for(d.s();!(h=d.n()).done;){var p=h.value;t.renameSignal(p.getName(a),t.getName(e)),p.component.layoutSize.set(a,"merged",!1)}}catch(g){d.e(g)}finally{d.f()}s.setWithExplicit(e,r)}else s.setWithExplicit(e,{explicit:!1,value:void 0})}function dnt(t,e){var n="width"===e?"x":"y",r=t.config,i=t.getScaleComponent(n);if(i){var a=i.get("type"),o=i.get("range");if(PQ(a)){var u=p3(r.view,e);return hJ(o)||o3(u)?"step":u}return h3(r.view,e)}if(t.hasProjection||"arc"===t.mark)return h3(r.view,e);var s=p3(r.view,e);return o3(s)?s.step:s}function pnt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return gnt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gnt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function gnt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vnt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}function mnt(t,e,n){return p1(e,Object.assign({suffix:"by_".concat(p1(t))},null!=n?n:{}))}var ynt=function(t){(0,Q.Z)(n,t);var e=vnt(n);function n(t,r,i,a){var o;return(0,J.Z)(this,n),(o=e.call(this,t,"facet",r,i,a,t.resolve)).child=vrt(t.spec,(0,ha.Z)(o),o.getName("child"),void 0,a),o.children=[o.child],o.facet=o.initFacet(t.facet),o}return(0,K.Z)(n,[{key:"initFacet",value:function(t){if(!U0(t))return{facet:this.initFacetFieldDef(t,"facet")};var e,n={},r=pnt(qY(t));try{for(r.s();!(e=r.n()).done;){var i=e.value;if(![xq,bq].includes(i)){CK(nK(i,"facet"));break}var a=t[i];if(void 0===a.field){CK(eK(a,i));break}n[i]=this.initFacetFieldDef(a,i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"initFacetFieldDef",value:function(t,e){var n=D1(t,e);return n.header?n.header=uJ(n.header):null===n.header&&(n.header=null),n}},{key:"channelHasField",value:function(t){return!!this.facet[t]}},{key:"fieldDef",value:function(t){return this.facet[t]}},{key:"parseData",value:function(){this.component.data=Snt(this),this.child.parseData()}},{key:"parseLayoutSize",value:function(){fnt(this)}},{key:"parseSelections",value:function(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function(){this.child.parseAxesAndHeaders(),function(t){var e,n=rnt(s$);try{for(n.s();!(e=n.n()).done;)ont(t,e.value)}catch(r){n.e(r)}finally{n.f()}snt(t,"x"),snt(t,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.child.assembleSelectionTopLevelSignals(t)}},{key:"assembleSignals",value:function(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function(t){return this.child.assembleSelectionData(t)}},{key:"getHeaderLayoutMixins",value:function(){var t,e,n,r,i={},a=pnt(s$);try{for(a.s();!(r=a.n()).done;){var o,u=r.value,s=pnt(q8);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=this.component.layoutHeaders[u],f=c[l],h=c.facetFieldDef;if(h){var d=G8("titleOrient",h.header,this.config,u);if(["right","bottom"].includes(d)){var p=V8(u,d);null!==(t=i.titleAnchor)&&void 0!==t||(i.titleAnchor={}),i.titleAnchor[p]="end"}}if(null==f?void 0:f[0]){var g="row"===u?"height":"width",v="header"===l?"headerBand":"footerBand";"facet"===u||this.child.component.layoutSize.get(g)||(null!==(e=i[v])&&void 0!==e||(i[v]={}),i[v][u]=.5),c.title&&(null!==(n=i.offset)&&void 0!==n||(i.offset={}),i.offset["row"===u?"rowTitle":"columnTitle"]=10)}}}catch(m){s.e(m)}finally{s.f()}}}catch(m){a.e(m)}finally{a.f()}return i}},{key:"assembleDefaultLayout",value:function(){var t=this.facet,e=t.column,n=t.row,r=e?this.columnDistinctSignal():n?1:void 0,i="all";return(n||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}},{key:"assembleLayoutSignals",value:function(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function(){if(!(this.parent&&this.parent instanceof n)){var t=this.getName("column_domain");return{signal:"length(data('".concat(t,"'))")}}}},{key:"assembleGroupStyle",value:function(){}},{key:"assembleGroup",value:function(t){return this.parent&&this.parent instanceof n?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:p1(this.facet.column,{prefix:"distinct"})}}}}:{}),fw((0,pa.Z)(n.prototype),"assembleGroup",this).call(this,t)):fw((0,pa.Z)(n.prototype),"assembleGroup",this).call(this,t)}},{key:"getCardinalityAggregateForChild",value:function(){var t=[],e=[],r=[];if(this.child instanceof n){if(this.child.channelHasField("column")){var i=p1(this.child.facet.column);t.push(i),e.push("distinct"),r.push("distinct_".concat(i))}}else{var a,o=pnt(O$);try{for(o.s();!(a=o.n()).done;){var u=a.value,s=this.child.component.scales[u];if(s&&!s.merged){var l=s.get("type"),c=s.get("range");if(PQ(l)&&hJ(c)){var f=Itt(Ptt(this.child,u));f?(t.push(f),e.push("distinct"),r.push("distinct_".concat(f))):CK(zJ(u))}}}}catch(h){o.e(h)}finally{o.f()}}return{fields:t,ops:e,as:r}}},{key:"assembleFacet",value:function(){var t,e=this.component.data.facetRoot,n=e.name,r=e.data,i=this.facet,a=i.row,o=i.column,u=this.getCardinalityAggregateForChild(),s=u.fields,l=u.ops,c=u.as,f=[],h=pnt(s$);try{for(h.s();!(t=h.n()).done;){var d=t.value,p=this.facet[d];if(p){f.push(p1(p));var g=p.bin,v=p.sort;if(Q$(g)&&f.push(p1(p,{binSuffix:"end"})),N0(v)){var m=v.field,y=v.op,x=void 0===y?B0:y,b=mnt(p,v);a&&o?(s.push(b),l.push("max"),c.push(b)):(s.push(m),l.push(x),c.push(b))}else if(yo(v)){var w=U8(p,d);s.push(w),l.push("max"),c.push(w)}}}}catch(k){h.e(k)}finally{h.f()}var S=!!a&&!!o;return Object.assign({name:n,data:r,groupby:f},S||s.length>0?{aggregate:Object.assign(Object.assign({},S?{cross:S}:{}),s.length?{fields:s,ops:l,as:c}:{})}:{})}},{key:"facetSortFields",value:function(t){var e=this.facet[t];return e?N0(e.sort)?[mnt(e,e.sort,{expr:"datum"})]:yo(e.sort)?[U8(e,t,{expr:"datum"})]:[p1(e,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function(t){var e=this.facet[t];if(e){var n=e.sort;return[(N0(n)?n.order:!yo(n)&&n)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function(){var t,e=this.facet,n=this.config;if(e.facet)return r7(e.facet,"facet",n);var r,i={row:["top","bottom"],column:["left","right"]},a=pnt(Y8);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(e[o]){var u=G8("labelOrient",null===(t=e[o])||void 0===t?void 0:t.header,n,o);if(i[o].includes(u))return r7(e[o],o,n)}}}catch(s){a.e(s)}finally{a.f()}}},{key:"assembleMarks",value:function(){var t=this,e=this.child,n=function(t){var e,n=[],r=ent(n),i=Qet(t.children);try{for(i.s();!(e=i.n()).done;)r(e.value,{source:t.name,name:null,transform:[]})}catch(a){i.e(a)}finally{i.f()}return n}(this.component.data.facetRoot),r=e.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||e.assembleTitle(),a=e.assembleGroupStyle(),o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},i?{title:i}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:s$.map((function(e){return t.facetSortFields(e)})).flat(),order:s$.map((function(e){return t.facetSortOrder(e)})).flat()}}),n.length>0?{data:n}:{}),r?{encode:{update:r}}:{}),e.assembleGroup(function(t,e){if(t.component.selection&&qY(t.component.selection).length){var n=Su(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:iW("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(n,").datum")}]})}return O6(e)}(this,[])));return[o]}},{key:"getMapping",value:function(){return this.facet}}]),n}(wet);function xnt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return bnt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bnt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function bnt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wnt(t,e){var n,r,i,a,o,u=xnt(e);try{for(u.s();!(o=u.n()).done;){var s=o.value,l=s.data;if(!t.name||!s.hasName()||t.name===s.dataName){var c=null===(n=t.format)||void 0===n?void 0:n.mesh,f=null===(r=l.format)||void 0===r?void 0:r.feature;if(!c||!f){var h=null===(i=t.format)||void 0===i?void 0:i.feature;if(!h&&!f||h===f){var d=null===(a=l.format)||void 0===a?void 0:a.mesh;if(!c&&!d||c===d)if(v6(t)&&v6(l)){if(_Y(t.values,l.values))return s}else if(g6(t)&&g6(l)){if(t.url===l.url)return s}else if(m6(t)&&t.name===s.dataName)return s}}}}}catch(p){u.e(p)}finally{u.f()}return null}function Snt(t){var e,n,r,i,a,o,u,s,l,c,f=function(t,e){if(t.data||!t.parent){if(null===t.data){var n=new M9({values:[]});return e.push(n),n}var r=wnt(t.data,e);if(r)return y6(t.data)||(r.data.format=NY({},t.data.format,r.data.format)),!r.hasName()&&t.data.name&&(r.dataName=t.data.name),r;var i=new M9(t.data);return e.push(i),i}return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}(t,t.component.data.sources),h=t.component.data,d=h.outputNodes,p=h.outputNodeRefCounts,g=t.data,v=!(g&&(y6(g)||g6(g)||v6(g)))&&t.parent?t.parent.component.data.ancestorParse.clone():new p6;y6(g)?(x6(g)?f=new C9(f,g.sequence):w6(g)&&(f=new S9(f,g.graticule)),v.parseNothing=!0):null===(null===(e=null==g?void 0:g.format)||void 0===e?void 0:e.parse)&&(v.parseNothing=!0),f=null!==(n=y9.makeExplicit(f,t,v))&&void 0!==n?n:f,f=new b9(f);var m=t.parent&&xet(t.parent);(vet(t)||met(t))&&m&&(f=null!==(r=e9.makeFromEncoding(f,t))&&void 0!==r?r:f),t.transforms.length>0&&(f=function(t,e,n){var r,i,a,o=0,u=xnt(e.transforms);try{for(u.s();!(a=u.n()).done;){var s=a.value,l=void 0,c=void 0;if(E5(s))c=t=new z8(t,s),l="derived";else if(d5(s)){var f=v9(s);c=t=null!==(r=y9.makeWithAncestors(t,{},f,n))&&void 0!==r?r:t,t=new m8(t,e,s.filter)}else if(M5(s))c=t=e9.makeFromTransform(t,s,e),l="number";else if(A5(s))l="date",void 0===n.getWithExplicit(s.field).value&&(t=new y9(t,(0,Z.Z)({},s.field,l)),n.set(s.field,l,!1)),c=t=L6.makeFromTransform(t,s);else if(_5(s))c=t=o9.makeFromTransform(t,s),l="number",f8(e)&&(t=new b9(t));else if(g5(s))c=t=Uet.make(t,e,s,o++),l="derived";else if(S5(s))c=t=new stt(t,s),l="number";else if(k5(s))c=t=new ttt(t,s),l="number";else if(D5(s))c=t=itt.makeFromTransform(t,s),l="derived";else if(T5(s))c=t=new Tet(t,s),l="derived";else if(C5(s))c=t=new _et(t,s),l="derived";else if(v5(s))c=t=new $et(t,s),l="derived";else if(w5(s))t=new Ket(t,s);else if(O5(s))c=t=Let.makeFromTransform(t,s),l="derived";else if(m5(s))c=t=new Eet(t,s),l="derived";else if(y5(s))c=t=new Vet(t,s),l="derived";else if(x5(s))c=t=new Yet(t,s),l="derived";else{if(!b5(s)){CK(YJ(s));continue}c=t=new Net(t,s),l="derived"}if(c&&void 0!==l){var h,d=xnt(null!==(i=c.producedFields())&&void 0!==i?i:[]);try{for(d.s();!(h=d.n()).done;){var p=h.value;n.set(p,l,!1)}}catch(g){d.e(g)}finally{d.f()}}}}catch(g){u.e(g)}finally{u.f()}return t}(f,t,v));var y=function(t){var e={};if(vet(t)&&t.component.selection){var n,r=h9(qY(t.component.selection));try{for(r.s();!(n=r.n()).done;){var i,a=n.value,o=h9(t.component.selection[a].project.items);try{for(o.s();!(i=o.n()).done;){var u=i.value;!u.channel&&lq(u.field)>1&&(e[u.field]="flatten")}}catch(s){o.e(s)}finally{o.f()}}}catch(s){r.e(s)}finally{r.f()}}return e}(t),x=m9(t);f=null!==(i=y9.makeWithAncestors(f,{},Object.assign(Object.assign({},y),x),v))&&void 0!==i?i:f,vet(t)&&(f=Iet.parseAll(f,t),f=jet.parseAll(f,t)),(vet(t)||met(t))&&(m||(f=null!==(a=e9.makeFromEncoding(f,t))&&void 0!==a?a:f),f=null!==(o=L6.makeFromEncoding(f,t))&&void 0!==o?o:f,f=z8.parseAllForSortIndex(f,t));var b=t.getDataName(d6.Raw),w=new F6(f,b,d6.Raw,p);if(d[b]=w,f=w,vet(t)){var S=o9.makeFromEncoding(f,t);S&&(f=S,f8(t)&&(f=new b9(f))),f=null!==(u=Let.makeFromEncoding(f,t))&&void 0!==u?u:f,f=null!==(s=itt.makeFromEncoding(f,t))&&void 0!==s?s:f}vet(t)&&(f=null!==(l=Oet.make(f,t))&&void 0!==l?l:f);var k=t.getDataName(d6.Main),C=new F6(f,k,d6.Main,p);d[k]=C,f=C,vet(t)&&function(t,e){var n,r,i=y8(JY(null!==(n=t.component.selection)&&void 0!==n?n:{}));try{for(i.s();!(r=i.n()).done;){var a=(0,W.Z)(r.value,2),o=a[0],u=a[1],s=t.getName("lookup_".concat(o));t.component.data.outputNodes[s]=u.materialized=new F6(new m8(e,t,{param:o}),s,d6.Lookup,t.component.data.outputNodeRefCounts)}}catch(l){i.e(l)}finally{i.f()}}(t,C);var E=null;if(met(t)){var M=t.getName("facet");f=null!==(c=function(t,e){var n=e.row,r=e.column;if(n&&r){for(var i=null,a=0,o=[n,r];a<o.length;a++){var u=o[a];if(N0(u.sort)){var s=u.sort,l=s.field,c=s.op;t=i=new ttt(t,{joinaggregate:[{op:void 0===c?B0:c,field:l,as:mnt(u,u.sort,{forAs:!0})}],groupby:[p1(u)]})}}return i}return null}(f,t.facet))&&void 0!==c?c:f,E=new c9(f,t,M,C.getSource()),d[M]=E}return Object.assign(Object.assign({},t.component.data),{outputNodes:d,outputNodeRefCounts:p,raw:w,main:C,facetRoot:E,ancestorParse:v})}function knt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Cnt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cnt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Cnt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ent(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Mnt=function(t){(0,Q.Z)(n,t);var e=Ent(n);function n(t,r,i,a){var o,u,s,l,c;return(0,J.Z)(this,n),o=e.call(this,t,"concat",r,i,a,t.resolve),"shared"!==(null===(s=null===(u=t.resolve)||void 0===u?void 0:u.axis)||void 0===s?void 0:s.x)&&"shared"!==(null===(c=null===(l=t.resolve)||void 0===l?void 0:l.axis)||void 0===c?void 0:c.y)||CK("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),o.children=o.getChildren(t).map((function(t,e){return vrt(t,(0,ha.Z)(o),o.getName("concat_".concat(e)),void 0,a)})),o}return(0,K.Z)(n,[{key:"parseData",value:function(){this.component.data=Snt(this);var t,e=knt(this.children);try{for(e.s();!(t=e.n()).done;){t.value.parseData()}}catch(n){e.e(n)}finally{e.f()}}},{key:"parseSelections",value:function(){this.component.selection={};var t,e=knt(this.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.parseSelections();var r,i=knt(qY(n.component.selection));try{for(i.s();!(r=i.n()).done;){var a=r.value;this.component.selection[a]=n.component.selection[a]}}catch(o){i.e(o)}finally{i.f()}}}catch(o){e.e(o)}finally{e.f()}}},{key:"parseMarkGroup",value:function(){var t,e=knt(this.children);try{for(e.s();!(t=e.n()).done;){t.value.parseMarkGroup()}}catch(n){e.e(n)}finally{e.f()}}},{key:"parseAxesAndHeaders",value:function(){var t,e=knt(this.children);try{for(e.s();!(t=e.n()).done;){t.value.parseAxesAndHeaders()}}catch(n){e.e(n)}finally{e.f()}}},{key:"getChildren",value:function(t){return e3(t)?t.vconcat:n3(t)?t.hconcat:t.concat}},{key:"parseLayoutSize",value:function(){!function(t){fnt(t);var e=1===t.layout.columns?"width":"childWidth",n=void 0===t.layout.columns?"height":"childHeight";hnt(t,e),hnt(t,n)}(this)}},{key:"parseAxisGroup",value:function(){return null}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionTopLevelSignals(t)}),t)}},{key:"assembleSignals",value:function(){return this.children.forEach((function(t){return t.assembleSignals()})),[]}},{key:"assembleLayoutSignals",value:function(){var t,e=s7(this),n=knt(this.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push.apply(e,(0,X.Z)(r.assembleLayoutSignals()))}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"assembleSelectionData",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionData(t)}),t)}},{key:"assembleMarks",value:function(){return this.children.map((function(t){var e=t.assembleTitle(),n=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},e?{title:e}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup())}))}},{key:"assembleGroupStyle",value:function(){}},{key:"assembleDefaultLayout",value:function(){var t=this.layout.columns;return Object.assign(Object.assign({},null!=t?{columns:t}:{}),{bounds:"full",align:"each"})}}]),n}(bet);function Ont(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var Ant=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},U1),{labelExpr:1,encode:1}),_nt=qY(Ant),Dnt=function(t){(0,Q.Z)(n,t);var e=Ont(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,J.Z)(this,n),(t=e.call(this)).explicit=r,t.implicit=i,t.mainExtracted=a,t}return(0,K.Z)(n,[{key:"clone",value:function(){return new n(DY(this.explicit),DY(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!function(t){return!1===t||null===t}(this.get(t)))}},{key:"hasOrientSignalRef",value:function(){return fJ(this.explicit.orient)}}]),n}(o6);function Tnt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Fnt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fnt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Fnt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Int={bottom:"top",top:"bottom",left:"right",right:"left"};function Pnt(t,e){if(!t)return e.map((function(t){return t.clone()}));if(t.length===e.length){for(var n=t.length,r=0;r<n;r++){var i=t[r],a=e[r];if(!!i!=!!a)return;if(i&&a){var o=i.getWithExplicit("orient"),u=a.getWithExplicit("orient");if(o.explicit&&u.explicit&&o.value!==u.value)return;t[r]=jnt(i,a)}}return t}}function jnt(t,e){var n,r=Tnt(_nt);try{var i=function(){var r=n.value,i=f6(t.getWithExplicit(r),e.getWithExplicit(r),r,"axis",(function(t,e){switch(r){case"title":return jJ(t,e);case"gridScale":return{explicit:t.explicit,value:cq(t.value,e.value)}}return c6(t,e,r,"axis")}));t.setWithExplicit(r,i)};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return t}function Bnt(t,e,n,r,i){if("disable"===e)return void 0!==n;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(fJ(n.labelAngle)?n.labelAngle:vq(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===Z8(r,i))return!0}return t===n[e]}var Lnt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Rnt(t,e){var n,r,i,a=e.axis(t),o=new Dnt,u=O1(e.encoding[t]),s=e.mark,l=e.config,c=(null==a?void 0:a.orient)||(null===(n=l["x"===t?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(r=l.axis)||void 0===r?void 0:r.orient)||function(t){return"x"===t?"bottom":"left"}(t),f=e.getScaleComponent(t).get("type"),h=function(t,e,n,r){var i="band"===e?["axisDiscrete","axisBand"]:"point"===e?["axisDiscrete","axisPoint"]:DQ(e)?["axisQuantitative"]:"time"===e||"utc"===e?["axisTemporal"]:[],a="x"===t?"axisX":"axisY",o=fJ(n)?"axisOrient":"axis".concat(nq(n)),u=[].concat(i,(0,X.Z)(i.map((function(t){return a+t.substr(4)})))),s=["axis",o,a];return{vlOnlyAxisConfig:F8(u,r,t,n),vgAxisConfig:F8(s,r,t,n),axisConfigStyle:I8([].concat(s,(0,X.Z)(u)),r)}}(t,f,c,e.config),d=void 0!==a?!a:P8("disable",l.style,null==a?void 0:a.style,h).configValue;if(o.set("disable",d,void 0!==a),d)return o;var p,g=function(t,e,n,r,i){var a=null==e?void 0:e.labelAngle;if(void 0!==a)return fJ(a)?a:vq(a);var o=P8("labelAngle",r,null==e?void 0:e.style,i).configValue;return void 0!==o?vq(o):n!==Sq||!LY([pQ,hQ],t.type)||t1(t)&&t.timeUnit?void 0:270}(u,a=a||{},t,l.style,h),v={fieldOrDatumDef:u,axis:a,channel:t,model:e,scaleType:f,orient:c,labelAngle:g,mark:s,config:l},m=Tnt(_nt);try{for(m.s();!(p=m.n()).done;){var y=p.value,x=y in j8?j8[y](v):W1(y)?a[y]:void 0,b=void 0!==x,w=Bnt(x,y,a,e,t);if(b&&w)o.set(y,x,w);else{var S=W1(y)&&"values"!==y?P8(y,l.style,a.style,h):{},k=S.configValue,C=void 0===k?void 0:k,E=S.configFrom,M=void 0===E?void 0:E,O=void 0!==C;b&&!O?o.set(y,x,w):("vgAxisConfig"!==M||Lnt.has(y)&&O||Z1(C)||fJ(C))&&o.set(y,C,!1)}}}catch(D){m.e(D)}finally{m.f()}var A=null!==(i=a.encoding)&&void 0!==i?i:{},_=N1.reduce((function(n,r){var i;if(!o.hasAxisPart(r))return n;var a=d7(null!==(i=A[r])&&void 0!==i?i:{},e),u="labels"===r?function(t,e,n){var r,i=t.encoding,a=t.config,o=null!==(r=O1(i[e]))&&void 0!==r?r:O1(i[x$(e)]),u=t.axis(e)||{},s=u.format,l=u.formatType;if(E0(l))return Object.assign({text:_0({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:l,config:a})},n);if(void 0===s&&void 0===l&&a.customFormatTypes){if("quantitative"===e1(o)){if(l1(o)&&"normalize"===o.stack&&a.normalizedNumberFormatType)return Object.assign({text:_0({fieldOrDatumDef:o,field:"datum.value",format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,config:a})},n);if(a.numberFormatType)return Object.assign({text:_0({fieldOrDatumDef:o,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a})},n)}if("temporal"===e1(o)&&a.timeFormatType&&t1(o)&&!o.timeUnit)return Object.assign({text:_0({fieldOrDatumDef:o,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})},n)}return n}(e,t,a):a;return void 0===u||YY(u)||(n[r]={update:u}),n}),{});return YY(_)||o.set("encode",_,!!a.encoding||void 0!==a.labelAngle),o}function Znt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Nnt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nnt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Nnt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function znt(t){var e,n=t.encoding,r=t.size,i=Znt(O$);try{for(i.s();!(e=i.n()).done;){var a=e.value,o=b$(a);o3(r[o])&&r1(n[a])&&(delete r[o],CK(pK(o)))}}catch(u){i.e(u)}finally{i.f()}return r}function Unt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Hnt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hnt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Hnt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wnt(t,e,n){var r,i,a=uJ(t),o=AJ("orient",a,n);if(a.orient=function(t,e,n){switch(t){case KQ:case i0:case a0:case e0:case QQ:case $Q:return}var r=e.x,i=e.y,a=e.x2,o=e.y2;switch(t){case qQ:if(t1(r)&&(tJ(r.bin)||t1(i)&&i.aggregate&&!r.aggregate))return"vertical";if(t1(i)&&(tJ(i.bin)||t1(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||a){if(n)return n;if(!a)return(t1(r)&&r.type===fQ&&!Q$(r.bin)||i1(r))&&t1(i)&&tJ(i.bin)?"horizontal":"vertical";if(!o)return(t1(i)&&i.type===fQ&&!Q$(i.bin)||i1(i))&&t1(r)&&tJ(r.bin)?"vertical":"horizontal"}case t0:if(a&&(!t1(r)||!tJ(r.bin))&&o&&(!t1(i)||!tJ(i.bin)))return;case YQ:if(o)return t1(i)&&tJ(i.bin)?"horizontal":"vertical";if(a)return t1(r)&&tJ(r.bin)?"vertical":"horizontal";if(t===t0){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case JQ:case n0:var u=r1(r),s=r1(i);if(n)return n;if(u&&!s)return"tick"!==t?"horizontal":"vertical";if(!u&&s)return"tick"!==t?"vertical":"horizontal";if(u&&s){var l=r,c=i,f=l.type===dQ,h=c.type===dQ;return f&&!h?"tick"!==t?"vertical":"horizontal":!f&&h?"tick"!==t?"horizontal":"vertical":!l.aggregate&&c.aggregate?"tick"!==t?"vertical":"horizontal":l.aggregate&&!c.aggregate&&"tick"!==t?"horizontal":"vertical"}return}return"vertical"}(a.type,e,o),void 0!==o&&o!==a.orient&&CK((r=a.orient,i=o,'Specified orient "'.concat(r,'" overridden with "').concat(i,'".'))),"bar"===a.type&&a.orient){var u=AJ("cornerRadiusEnd",a,n);if(void 0!==u){var s,l=Unt("horizontal"===a.orient&&e.x2||"vertical"===a.orient&&e.y2?["cornerRadius"]:g0[a.orient]);try{for(l.s();!(s=l.n()).done;){a[s.value]=u}}catch(c){l.e(c)}finally{l.f()}void 0!==a.cornerRadiusEnd&&delete a.cornerRadiusEnd}}return void 0===AJ("opacity",a,n)&&(a.opacity=function(t,e){if(LY([KQ,n0,i0,a0],t)&&!t2(e))return.7;return}(a.type,e)),void 0===AJ("cursor",a,n)&&(a.cursor=function(t,e,n){if(e.href||t.href||AJ("href",t,n))return"pointer";return t.cursor}(a,e,n)),a}function Vnt(t,e,n){if(n.graticule)return!1;var r=_J("filled",t,e),i=t.type;return cq(r,i!==KQ&&i!==JQ&&i!==t0)}function Gnt(t,e){t.config;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),m4("x",t,{defaultPos:"mid"})),m4("y",t,{defaultPos:"mid"})),p4("size",t)),p4("angle",t)),function(t,e,n){if(n)return{shape:{value:n}};return p4("shape",t)}(t,0,e))}var Xnt={vgMark:"rule",encodeEntry:function(t){var e=t.markDef.orient;return t.encoding.x||t.encoding.y||t.encoding.latitude||t.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),S4("x",t,{defaultPos:"horizontal"===e?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==e})),S4("y",t,{defaultPos:"vertical"===e?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==e})),p4("size",t,{vgChannel:"strokeWidth"})):{}}},Ynt={vgMark:"text",encodeEntry:function(t){var e=t.config;t.encoding;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_4(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),m4("x",t,{defaultPos:"mid"})),m4("y",t,{defaultPos:"mid"})),s4(t)),p4("size",t,{vgChannel:"fontSize"})),p4("angle",t)),F4("align",function(t,e,n){var r=AJ("align",t,n);if(void 0===r)return"center";return}(t.markDef,0,e))),F4("baseline",function(t,e,n){var r=AJ("baseline",t,n);if(void 0===r)return"middle";return}(t.markDef,0,e))),m4("radius",t,{defaultPos:null})),m4("theta",t,{defaultPos:null}))}};var qnt={vgMark:"rect",encodeEntry:function(t){var e=t.config,n=t.markDef,r=n.orient,i="horizontal"===r?"width":"height",a="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),m4("x",t,{defaultPos:"mid",vgChannel:"xc"})),m4("y",t,{defaultPos:"mid",vgChannel:"yc"})),p4("size",t,{defaultValue:$nt(t),vgChannel:i})),(0,Z.Z)({},a,kJ(AJ("thickness",n,e))))}};function $nt(t){var e,n=t.config,r=t.markDef,i=r.orient,a="horizontal"===i?"width":"height",o=t.getScaleComponent("horizontal"===i?"x":"y"),u=null!==(e=AJ("size",r,n,{vgChannel:a}))&&void 0!==e?e:n.tick.bandSize;if(void 0!==u)return u;var s=o?o.get("range"):void 0;return s&&hJ(s)&&hu(s.step)?3*s.step/4:3*d3(n.view,a)/4}function Jnt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Knt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Knt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Knt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Qnt={arc:{vgMark:"arc",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),m4("x",t,{defaultPos:"mid"})),m4("y",t,{defaultPos:"mid"})),E4(t,"radius")),E4(t,"theta"))}},area:{vgMark:"area",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),S4("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===t.markDef.orient})),S4("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===t.markDef.orient})),T4(t))}},bar:{vgMark:"rect",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),E4(t,"x")),E4(t,"y"))}},circle:{vgMark:"symbol",encodeEntry:function(t){return Gnt(t,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function(t){return Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}))},postEncodingTransform:function(t){var e=t.encoding.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},e&&t1(e)&&e.type===gQ?{field:p1(e,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),E4(t,"x")),E4(t,"y")),s4(t,"url"))}},line:{vgMark:"line",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),m4("x",t,{defaultPos:"mid"})),m4("y",t,{defaultPos:"mid"})),p4("size",t,{vgChannel:"strokeWidth"})),T4(t))}},point:{vgMark:"symbol",encodeEntry:function(t){return Gnt(t)}},rect:{vgMark:"rect",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),E4(t,"x")),E4(t,"y"))}},rule:Xnt,square:{vgMark:"symbol",encodeEntry:function(t){return Gnt(t,"square")}},text:Ynt,tick:qnt,trail:{vgMark:"trail",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_4(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),m4("x",t,{defaultPos:"mid"})),m4("y",t,{defaultPos:"mid"})),p4("size",t)),T4(t))}}};function trt(t){if(LY([JQ,YQ,r0],t.mark)){var e=o2(t.mark,t.encoding);if(e.length>0)return function(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:ert+t.requestDataName(d6.Main),data:t.requestDataName(d6.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:irt(t,{fromPrefix:ert})}]}(t,e)}else if(t.mark===qQ){var n=vJ.some((function(e){return AJ(e,t.markDef,t.config)}));if(t.stack&&!t.fieldDef("size")&&n)return function(t){var e,n,r,i=irt(t,{fromPrefix:nrt}),a=(0,W.Z)(i,1)[0],o=t.scaleName(t.stack.fieldChannel),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.vgField(t.stack.fieldChannel,e)},s=function(t,e){var n=[u({prefix:"min",suffix:"start",expr:e}),u({prefix:"max",suffix:"start",expr:e}),u({prefix:"min",suffix:"end",expr:e}),u({prefix:"max",suffix:"end",expr:e})];return"".concat(t,"(").concat(n.map((function(t){return"scale('".concat(o,"',").concat(t,")")})).join(","),")")};"x"===t.stack.fieldChannel?(n=Object.assign(Object.assign({},FY(a.encode.update,["y","yc","y2","height"].concat((0,X.Z)(vJ)))),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),r={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},a.encode.update=Object.assign(Object.assign({},IY(a.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(n=Object.assign(Object.assign({},FY(a.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),r={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},a.encode.update=Object.assign(Object.assign({},IY(a.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));var l,c=Jnt(vJ);try{for(c.s();!(l=c.n()).done;){var f=l.value,h=_J(f,t.markDef,t.config);a.encode.update[f]?(n[f]=a.encode.update[f],delete a.encode.update[f]):h&&(n[f]=kJ(h)),h&&(a.encode.update[f]={value:0})}}catch(x){c.e(x)}finally{c.f()}var d=[];if((null===(e=t.stack.groupbyChannels)||void 0===e?void 0:e.length)>0){var p,g=Jnt(t.stack.groupbyChannels);try{for(g.s();!(p=g.n()).done;){var v=p.value,m=t.fieldDef(v),y=p1(m);y&&d.push(y),((null==m?void 0:m.bin)||(null==m?void 0:m.timeUnit))&&d.push(p1(m,{binSuffix:"end"}))}}catch(x){g.e(x)}finally{g.f()}}n=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((function(e,n){if(a.encode.update[n])return Object.assign(Object.assign({},e),(0,Z.Z)({},n,a.encode.update[n]));var r=_J(n,t.markDef,t.config);return void 0!==r?Object.assign(Object.assign({},e),(0,Z.Z)({},n,kJ(r))):e}),n),n.stroke&&(n.strokeForeground={value:!0},n.strokeOffset={value:0});return[{type:"group",from:{facet:{data:t.requestDataName(d6.Main),name:nrt+t.requestDataName(d6.Main),groupby:d,aggregate:{fields:[u({suffix:"start"}),u({suffix:"start"}),u({suffix:"end"}),u({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:n},marks:[{type:"group",encode:{update:r},marks:[a]}]}]}(t)}return irt(t)}var ert="faceted_path_";var nrt="stack_group_";function rrt(t){var e,n=t.encoding,r=t.stack,i=t.mark,a=t.markDef,o=t.config,u=n.order;if(!(!yo(u)&&u1(u)&&BY(u.value)||!u&&BY(AJ("order",a,o)))){if((yo(u)||t1(u))&&!r)return FJ(u,{expr:"datum"});if(u0(i)){var s="horizontal"===a.orient?"y":"x",l=n[s];if(t1(l)){var c=l.sort;return yo(c)?{field:p1(l,{prefix:s,suffix:"sort_index",expr:"datum"})}:N0(c)?{field:p1({aggregate:t2(t.encoding)?c.op:void 0,field:c.field},{expr:"datum"})}:Z0(c)?{field:p1(t.fieldDef(c.encoding),{expr:"datum"}),order:c.order}:null===c?void 0:{field:p1(l,{binSuffix:(null===(e=t.stack)||void 0===e?void 0:e.impute)?"mid":void 0,expr:"datum"})}}}else;}}function irt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},n=t.mark,r=t.markDef,i=t.encoding,a=t.config,o=cq(r.clip,art(t),ort(t)),u=OJ(r),s=i.key,l=rrt(t),c=urt(t),f=AJ("aria",r,a),h=Qnt[n].postEncodingTransform?Qnt[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:Qnt[n].vgMark},o?{clip:!0}:{}),u?{style:u}:{}),s?{key:s.field}:{}),l?{sort:l}:{}),c||{}),!1===f?{aria:f}:{}),{from:{data:e.fromPrefix+t.requestDataName(d6.Main)},encode:{update:Qnt[n].encodeEntry(t)}}),h?{transform:h}:{})]}function art(t){var e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return!(!(null==e?void 0:e.get("selectionExtent"))&&!(null==n?void 0:n.get("selectionExtent")))||void 0}function ort(t){var e=t.component.projection;return!(!e||e.isFit)||void 0}function urt(t){if(!t.component.selection)return null;for(var e=qY(t.component.selection).length,n=e,r=t.parent;r&&0===n;)n=qY(r.component.selection).length,r=r.parent;return n?{interactive:e>0||!!t.encoding.tooltip}:null}function srt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return lrt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lrt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function lrt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function crt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var frt=function(t){(0,Q.Z)(n,t);var e=crt(n);function n(t,r,i){var a,o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;(0,J.Z)(this,n),(a=e.call(this,t,"unit",r,i,s,void 0,u3(t)?t.view:void 0)).specifiedScales={},a.specifiedAxes={},a.specifiedLegends={},a.specifiedProjection={},a.selection=[],a.children=[];var l=c0(t.mark)?Object.assign({},t.mark):{type:t.mark},c=l.type;void 0===l.filled&&(l.filled=Vnt(l,s,{graticule:t.data&&w6(t.data)}));var f=a.encoding=n2(t.encoding||{},c,l.filled,s);return a.markDef=Wnt(l,f,s),a.size=znt({encoding:f,size:u3(t)?Object.assign(Object.assign(Object.assign({},u),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):u}),a.stack=U3(c,f),a.specifiedScales=a.initScales(c,f),a.specifiedAxes=a.initAxes(f),a.specifiedLegends=a.initLegends(f),a.specifiedProjection=t.projection,a.selection=(null!==(o=t.params)&&void 0!==o?o:[]).filter((function(t){return q2(t)})),a}return(0,K.Z)(n,[{key:"hasProjection",get:function(){var t=this.encoding,e=this.mark===o0,n=t&&i$.some((function(e){return a1(t[e])}));return e||n}},{key:"scaleDomain",value:function(t){var e=this.specifiedScales[t];return e?e.domain:void 0}},{key:"axis",value:function(t){return this.specifiedAxes[t]}},{key:"legend",value:function(t){return this.specifiedLegends[t]}},{key:"initScales",value:function(t,e){var n=this;return L$.reduce((function(t,r){var i,a=O1(e[r]);return a&&(t[r]=n.initScale(null!==(i=a.scale)&&void 0!==i?i:{})),t}),{})}},{key:"initScale",value:function(t){var e=t.domain,n=t.range,r=uJ(t);return yo(e)&&(r.domain=e.map(wJ)),yo(n)&&(r.range=n.map(wJ)),r}},{key:"initAxes",value:function(t){var e=this;return O$.reduce((function(n,r){var i=t[r];if(a1(i)||r===Sq&&a1(t.x2)||r===kq&&a1(t.y2)){var a=a1(i)?i.axis:void 0;n[r]=a?e.initAxis(Object.assign({},a)):a}return n}),{})}},{key:"initAxis",value:function(t){var e,n={},r=srt(qY(t));try{for(r.s();!(e=r.n()).done;){var i=e.value,a=t[i];n[i]=Z1(a)?bJ(a):wJ(a)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"initLegends",value:function(t){return j$.reduce((function(e,n){var r=O1(t[n]);if(r&&function(t){switch(t){case Bq:case Lq:case Rq:case Nq:case Zq:case Uq:case Vq:case Gq:return!0;case Hq:case Wq:case zq:return!1}}(n)){var i=r.legend;e[n]=i?uJ(i):i}return e}),{})}},{key:"parseData",value:function(){this.component.data=Snt(this)}},{key:"parseLayoutSize",value:function(){!function(t){var e,n=t.size,r=t.component,i=lnt(O$);try{for(i.s();!(e=i.n()).done;){var a=b$(e.value);if(n[a]){var o=n[a];r.layoutSize.set(a,o3(o)?"step":o,!0)}else{var u=dnt(t,a);r.layoutSize.set(a,u,!1)}}}catch(s){i.e(s)}finally{i.f()}}(this)}},{key:"parseSelections",value:function(){this.component.selection=function(t,e){var n,r={},i=t.config.selection;if(!e||!e.length)return r;var a,o=y8(e);try{for(o.s();!(a=o.n()).done;){var u=a.value,s=QY(u.name),l=u.select,c=pu(l)?l:l.type,f=xo(l)?DY(l):{type:c},h=i[c];for(var d in h)"fields"!==d&&"encodings"!==d&&("mark"===d&&(f[d]=Object.assign(Object.assign({},h[d]),f[d])),void 0!==f[d]&&!0!==f[d]||(f[d]=null!==(n=h[d])&&void 0!==n?n:f[d]));var p,g=r[s]=Object.assign(Object.assign({},f),{name:s,type:c,init:u.value,bind:u.bind,events:pu(f.on)?iW(f.on,"scope"):Ho(DY(f.on))}),v=y8(s8);try{for(v.s();!(p=v.n()).done;){var m=p.value;m.defined(g)&&m.parse&&m.parse(t,g,u)}}catch(y){v.e(y)}finally{v.f()}}}catch(y){o.e(y)}finally{o.f()}return r}(this,this.selection)}},{key:"parseMarkGroup",value:function(){this.component.mark=trt(this)}},{key:"parseAxesAndHeaders",value:function(){var t;this.component.axes=(t=this,O$.reduce((function(e,n){return t.component.scales[n]&&(e[n]=[Rnt(n,t)]),e}),{}))}},{key:"assembleSelectionTopLevelSignals",value:function(t){return function(t,e){var n,r,i=!1,a=S6($Y(null!==(n=t.component.selection)&&void 0!==n?n:{}));try{var o=function(){var n=r.value,a=n.name,o=Su(a+i8),u=e.filter((function(t){return t.name===a}));if(0===u.length){var s="global"===n.resolve?"union":n.resolve,l="point"===n.type?", true, true)":")";e.push({name:n.name,update:"".concat(u8,"(").concat(o,", ").concat(Su(s)).concat(l)})}i=!0;var c,f=S6(s8);try{for(f.s();!(c=f.n()).done;){var h=c.value;h.defined(n)&&h.topLevelSignals&&(e=h.topLevelSignals(t,n,e))}}catch(d){f.e(d)}finally{f.f()}};for(a.s();!(r=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}if(i){var u=e.filter((function(t){return"unit"===t.name}));0===u.length&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return O6(e)}(this,t)}},{key:"assembleSignals",value:function(){return[].concat((0,X.Z)(_8(this)),(0,X.Z)(function(t,e){var n,r,i=S6($Y(null!==(n=t.component.selection)&&void 0!==n?n:{}));try{for(i.s();!(r=i.n()).done;){var a,o=r.value,u=o.name,s="".concat(u).concat(a8,", ").concat("global"===o.resolve?"true":"{unit: ".concat(c8(t),"}")),l=S6(s8);try{for(l.s();!(a=l.n()).done;){var c=a.value;c.defined(o)&&(c.signals&&(e=c.signals(t,o,e)),c.modifyExpr&&(s=c.modifyExpr(t,o,s)))}}catch(f){l.e(f)}finally{l.f()}e.push({name:u+o8,on:[{events:{signal:o.name+a8},update:"modify(".concat(Su(o.name+i8),", ").concat(s,")")}]})}}catch(f){i.e(f)}finally{i.f()}return O6(e)}(this,[])))}},{key:"assembleSelectionData",value:function(t){return function(t,e){var n,r,i=(0,X.Z)(e),a=c8(t,{escape:!1}),o=S6($Y(null!==(n=t.component.selection)&&void 0!==n?n:{}));try{var u=function(){var t=r.value,e={name:t.name+i8};if(t.project.hasSelectionId&&(e.transform=[{type:"collect",sort:{field:V2}}]),t.init){var n=t.project.items.map((function(t){return t.signals,C6(t,["signals"])}));e.values=t.project.hasSelectionId?t.init.map((function(t){return(0,Z.Z)({unit:a},V2,E6(t,!1)[0])})):t.init.map((function(t){return{unit:a,fields:n,values:E6(t,!1)}}))}i.filter((function(e){return e.name===t.name+i8})).length||i.push(e)};for(o.s();!(r=o.n()).done;)u()}catch(s){o.e(s)}finally{o.f()}return i}(this,t)}},{key:"assembleLayout",value:function(){return null}},{key:"assembleLayoutSignals",value:function(){return s7(this)}},{key:"assembleMarks",value:function(){var t,e=null!==(t=this.component.mark)&&void 0!==t?t:[];return this.parent&&xet(this.parent)||(e=M6(this,e)),e.map(this.correctDataNames)}},{key:"assembleGroupStyle",value:function(){var t=(this.view||{}).style;return void 0!==t?t:this.encoding.x||this.encoding.y?"cell":void 0}},{key:"getMapping",value:function(){return this.encoding}},{key:"mark",get:function(){return this.markDef.type}},{key:"channelHasField",value:function(t){return J1(this.encoding,t)}},{key:"fieldDef",value:function(t){return M1(this.encoding[t])}},{key:"typedFieldDef",value:function(t){var e=this.fieldDef(t);return o1(e)?e:null}}]),n}(wet);function hrt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return drt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return drt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function drt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function prt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}var grt=function(t){(0,Q.Z)(n,t);var e=prt(n);function n(t,r,i,a,o){var u;(0,J.Z)(this,n),u=e.call(this,t,"layer",r,i,o,t.resolve,t.view);var s=Object.assign(Object.assign(Object.assign({},a),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});return u.children=t.layer.map((function(t,e){if(F3(t))return new n(t,(0,ha.Z)(u),u.getName("layer_".concat(e)),s,o);if(G1(t))return new frt(t,(0,ha.Z)(u),u.getName("layer_".concat(e)),s,o);throw new Error(BJ(t))})),u}return(0,K.Z)(n,[{key:"parseData",value:function(){this.component.data=Snt(this);var t,e=hrt(this.children);try{for(e.s();!(t=e.n()).done;){t.value.parseData()}}catch(n){e.e(n)}finally{e.f()}}},{key:"parseLayoutSize",value:function(){var t;fnt(t=this),hnt(t,"width"),hnt(t,"height")}},{key:"parseSelections",value:function(){this.component.selection={};var t,e=hrt(this.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.parseSelections();var r,i=hrt(qY(n.component.selection));try{for(i.s();!(r=i.n()).done;){var a=r.value;this.component.selection[a]=n.component.selection[a]}}catch(o){i.e(o)}finally{i.f()}}}catch(o){e.e(o)}finally{e.f()}}},{key:"parseMarkGroup",value:function(){var t,e=hrt(this.children);try{for(e.s();!(t=e.n()).done;){t.value.parseMarkGroup()}}catch(n){e.e(n)}finally{e.f()}}},{key:"parseAxesAndHeaders",value:function(){!function(t){var e,n,r=t.component,i=r.axes,a=r.resolve,o={top:0,bottom:0,right:0,left:0},u=Tnt(t.children);try{for(u.s();!(n=u.n()).done;){var s=n.value;s.parseAxesAndHeaders();var l,c=Tnt(qY(s.component.axes));try{for(c.s();!(l=c.n()).done;){var f=l.value;a.axis[f]=g7(t.component.resolve,f),"shared"===a.axis[f]&&(i[f]=Pnt(i[f],s.component.axes[f]),i[f]||(a.axis[f]="independent",delete i[f]))}}catch(A){c.e(A)}finally{c.f()}}}catch(A){u.e(A)}finally{u.f()}var h,d=Tnt(O$);try{for(d.s();!(h=d.n()).done;){var p,g=h.value,v=Tnt(t.children);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(m.component.axes[g]){if("independent"===a.axis[g]){i[g]=(null!==(e=i[g])&&void 0!==e?e:[]).concat(m.component.axes[g]);var y,x=Tnt(m.component.axes[g]);try{for(x.s();!(y=x.n()).done;){var b=y.value,w=b.getWithExplicit("orient"),S=w.value,k=w.explicit;if(!fJ(S)){if(o[S]>0&&!k){var C=Int[S];o[S]>o[C]&&b.set("orient",C,!1)}o[S]++}}}catch(A){x.e(A)}finally{x.f()}}delete m.component.axes[g]}}}catch(A){v.e(A)}finally{v.f()}if("independent"===a.axis[g]&&i[g]&&i[g].length>1){var E,M=Tnt(i[g]);try{for(M.s();!(E=M.n()).done;){var O=E.value;O.get("grid")&&!O.explicit.grid&&(O.implicit.grid=!1)}}catch(A){M.e(A)}finally{M.f()}}}}catch(A){d.e(A)}finally{d.f()}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionTopLevelSignals(t)}),t)}},{key:"assembleSignals",value:function(){return this.children.reduce((function(t,e){return t.concat(e.assembleSignals())}),_8(this))}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce((function(t,e){return t.concat(e.assembleLayoutSignals())}),s7(this))}},{key:"assembleSelectionData",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionData(t)}),t)}},{key:"assembleGroupStyle",value:function(){var t,e=new Set,n=hrt(this.children);try{for(n.s();!(t=n.n()).done;){var r,i=hrt(Ho(t.value.assembleGroupStyle()));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.add(a)}}catch(u){i.e(u)}finally{i.f()}}}catch(u){n.e(u)}finally{n.f()}var o=Array.from(e);return o.length>1?o:1===o.length?o[0]:void 0}},{key:"assembleTitle",value:function(){var t=fw((0,pa.Z)(n.prototype),"assembleTitle",this).call(this);if(t)return t;var e,r=hrt(this.children);try{for(r.s();!(e=r.n()).done;){if(t=e.value.assembleTitle())return t}}catch(i){r.e(i)}finally{r.f()}}},{key:"assembleLayout",value:function(){return null}},{key:"assembleMarks",value:function(){return function(t,e){var n,r=S6(t.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;vet(i)&&(e=M6(i,e))}}catch(a){r.e(a)}finally{r.f()}return e}(this,this.children.flatMap((function(t){return t.assembleMarks()})))}},{key:"assembleLegends",value:function(){return this.children.reduce((function(t,e){return t.concat(e.assembleLegends())}),R7(this))}}]),n}(bet);function vrt(t,e,n,r,i){if(W0(t))return new ynt(t,e,n,i);if(F3(t))return new grt(t,e,n,r,i);if(G1(t))return new frt(t,e,n,r,i);if(function(t){return e3(t)||n3(t)||t3(t)}(t))return new Mnt(t,e,n,i);throw new Error(BJ(t))}var mrt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function yrt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.logger&&SK(e.logger),e.fieldTitle&&x1(e.fieldTitle);try{var n=M3(wo(e.config,t.config)),r=q5(t,n),i=vrt(r,null,"",void 0,n);i.parse(),xtt(i.component.data,i);var a=brt(i,xrt(t,r.autosize,n,i),t.datasets,t.usermeta);return{spec:a,normalized:r}}finally{e.logger&&kK(),e.fieldTitle&&b1()}}function xrt(t,e,n,r){var i,a=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(void 0===e?(e={type:"pad"},r.hasAxisOrientSignalRef()&&(e.resize=!0)):pu(e)&&(e={type:e}),a&&o&&("fit"===(i=e.type)||"fit-x"===i||"fit-y"===i))if("step"===a&&"step"===o)CK(NJ()),e.type="pad";else if("step"===a||"step"===o){var u="step"===a?"width":"height";CK(NJ(T$(u)));var s="width"===u?"height":"width";e.type=function(t){return t?"fit-".concat(T$(t)):"fit"}(s)}return Object.assign(Object.assign(Object.assign({},1===qY(e).length&&e.type?"pad"===e.type?{}:{autosize:e.type}:{autosize:e}),r6(n,!1)),r6(t,!0))}function brt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=t.config?D3(t.config):void 0,a=[].concat(t.assembleSelectionData([]),nnt(t.component.data,n)),o=t.assembleProjections(),u=t.assembleTitle(),s=t.assembleGroupStyle(),l=t.assembleGroupEncodeEntry(!0),c=t.assembleLayoutSignals();c=c.filter((function(t){return"width"!==t.name&&"height"!==t.name||void 0===t.value||(e[t.name]=+t.value,!1)}));var f=e.params,h=mrt(e,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),h),u?{title:u}:{}),s?{style:s}:{}),l?{encode:{update:l}}:{}),{data:a}),o.length>0?{projections:o}:{}),t.assembleGroup([].concat((0,X.Z)(c),(0,X.Z)(t.assembleSelectionTopLevelSignals([])),(0,X.Z)(Q2(f))))),i?{config:i}:{}),r?{usermeta:r}:{})}var wrt="5.5.0";var Srt=function(t){var e=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3),n=(0,W.Z)(e,2);return{library:n[0],version:n[1]}},krt="2.10.0",Crt="#fff",Ert={background:"#333",title:{color:Crt,subtitleColor:Crt},style:{"guide-label":{fill:Crt},"guide-title":{fill:Crt}},axis:{domainColor:Crt,gridColor:"#888",tickColor:Crt}},Mrt="#4572a7",Ort={background:"#fff",arc:{fill:Mrt},area:{fill:Mrt},line:{stroke:Mrt,strokeWidth:2},path:{stroke:Mrt},rect:{fill:Mrt},shape:{stroke:Mrt},symbol:{fill:Mrt,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Art="#30a2da",_rt="#cbcbcb",Drt="#f0f0f0",Trt="#333",Frt={arc:{fill:Art},area:{fill:Art},axis:{domainColor:_rt,grid:!0,gridColor:_rt,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:_rt,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Drt,group:{fill:Drt},legend:{labelColor:Trt,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Trt,titleFontSize:14,titlePadding:10},line:{stroke:Art,strokeWidth:2},path:{stroke:Art,strokeWidth:.5},rect:{fill:Art},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Art},bar:{binSpacing:2,fill:Art,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Irt="#000",Prt={group:{fill:"#e5e5e5"},arc:{fill:Irt},area:{fill:Irt},line:{stroke:Irt},path:{stroke:Irt},rect:{fill:Irt},shape:{stroke:Irt},symbol:{fill:Irt,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},jrt="Benton Gothic, sans-serif",Brt="#82c6df",Lrt="Benton Gothic Bold, sans-serif",Rrt="normal",Zrt={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Nrt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Lrt,fontSize:22,fontWeight:"normal"},arc:{fill:Brt},area:{fill:Brt},line:{stroke:Brt,strokeWidth:2},path:{stroke:Brt},rect:{fill:Brt},shape:{stroke:Brt},symbol:{fill:Brt,size:30},axis:{labelFont:jrt,labelFontSize:11.5,labelFontWeight:"normal",titleFont:Lrt,titleFontSize:13,titleFontWeight:Rrt},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:jrt,labelFontSize:11.5,symbolType:"square",titleFont:Lrt,titleFontSize:13,titleFontWeight:Rrt},range:{category:Zrt["category-6"],diverging:Zrt["fireandice-6"],heatmap:Zrt["fire-7"],ordinal:Zrt["fire-7"],ramp:Zrt["fire-7"]}},zrt="#ab5787",Urt="#979797",Hrt={background:"#f9f9f9",arc:{fill:zrt},area:{fill:zrt},line:{stroke:zrt},path:{stroke:zrt},rect:{fill:zrt},shape:{stroke:zrt},symbol:{fill:zrt,size:30},axis:{domainColor:Urt,domainWidth:.5,gridWidth:.2,labelColor:Urt,tickColor:Urt,tickWidth:.2,titleColor:Urt},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Wrt="#3e5c69",Vrt={background:"#fff",arc:{fill:Wrt},area:{fill:Wrt},line:{stroke:Wrt},path:{stroke:Wrt},rect:{fill:Wrt},shape:{stroke:Wrt},symbol:{fill:Wrt},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Grt="#1696d2",Xrt="#000000",Yrt="Lato",qrt="Lato",$rt={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Jrt={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:Yrt},axisX:{domain:!0,domainColor:Xrt,domainWidth:1,grid:!1,labelFontSize:12,labelFont:qrt,labelAngle:0,tickColor:Xrt,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Yrt},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:qrt,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Yrt,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:qrt,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Yrt,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:$rt["six-groups-cat-1"],diverging:$rt["diverging-colors"],heatmap:$rt["diverging-colors"],ordinal:$rt["six-groups-seq"],ramp:$rt["shades-blue"]},area:{fill:Grt},rect:{fill:Grt},line:{color:Grt,stroke:Grt,strokeWidth:5},trail:{color:Grt,stroke:Grt,strokeWidth:0,size:1},path:{stroke:Grt,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Grt,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Grt,stroke:null}},arc:{fill:Grt},shape:{stroke:Grt},symbol:{fill:Grt,size:30}},Krt="#3366CC",Qrt="#ccc",tit="Arial, sans-serif",eit={arc:{fill:Krt},area:{fill:Krt},path:{stroke:Krt},rect:{fill:Krt},shape:{stroke:Krt},symbol:{stroke:Krt},circle:{fill:Krt},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:tit,fontSize:12},"guide-title":{font:tit,fontSize:12},"group-title":{font:tit,fontSize:12}},title:{font:tit,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Qrt,tickColor:Qrt,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},nit=function(t){return t*(1/3+1)},rit=nit(9),iit=nit(10),ait=nit(12),oit="Segoe UI",uit="wf_standard-font, helvetica, arial, sans-serif",sit="#252423",lit="#605E5C",cit="transparent",fit="#118DFF",hit="#DEEFFF",dit=[hit,fit],pit={view:{stroke:cit},background:cit,font:oit,header:{titleFont:uit,titleFontSize:ait,titleColor:sit,labelFont:oit,labelFontSize:iit,labelColor:lit},axis:{ticks:!1,grid:!1,domain:!1,labelColor:lit,labelFontSize:rit,titleFont:uit,titleColor:sit,titleFontSize:ait,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:fit},line:{stroke:fit,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:oit,fontSize:rit,fill:lit},arc:{fill:fit},area:{fill:fit,line:!0,opacity:.6},path:{stroke:fit},rect:{fill:fit},point:{fill:fit,filled:!0,size:75},shape:{stroke:fit},symbol:{fill:fit,strokeWidth:1.5,size:50},legend:{titleFont:oit,titleFontWeight:"bold",titleColor:lit,labelFont:oit,labelFontSize:iit,labelColor:lit,symbolType:"circle",symbolSize:75},range:{category:[fit,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:dit,heatmap:dit,ordinal:[hit,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",fit]}},git=krt;function vit(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return mit(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mit(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function mit(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yit(t,e){return JSON.stringify(t,function(t){var e=[];return function(n,r){if("object"!=typeof r||null===r)return r;var i=e.indexOf(this)+1;return e.length=i,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}(e))}var xit="vg-tooltip-element",bit={offsetX:10,offsetY:10,id:xit,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function(t,e,n){if(yo(t))return"[".concat(t.map((function(t){return e(pu(t)?t:yit(t,n))})).join(", "),"]");if(xo(t)){var r="",i=t,a=i.title,o=i.image,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(i,["title","image"]);a&&(r+="<h2>".concat(e(a),"</h2>")),o&&(r+='<img src="'.concat(e(o),'">'));var s=Object.keys(u);if(s.length>0){r+="<table>";var l,c=vit(s);try{for(c.s();!(l=c.n()).done;){var f=l.value,h=u[f];void 0!==h&&(xo(h)&&(h=yit(h,n)),r+='<tr><td class="key">'.concat(e(f),':</td><td class="value">').concat(e(h),"</td></tr>"))}}catch(d){c.e(d)}finally{c.f()}r+="</table>"}return r||"{}"}return e(t)}};var wit=function(){function t(e){(0,J.Z)(this,t),this.options=Object.assign(Object.assign({},bit),e);var n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element img {\n  max-width: 200px;\n  max-height: 200px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n".toString().replace(xit,t)}(n);var i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}return(0,K.Z)(t,[{key:"tooltipHandler",value:function(t,e,n,r){var i;(this.el=document.getElementById(this.options.id),this.el)||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(null!==(i=document.fullscreenElement)&&void 0!==i?i:document.body).appendChild(this.el));if(null!=r&&""!==r){this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var a=function(t,e,n,r){var i=t.clientX+n;i+e.width>window.innerWidth&&(i=+t.clientX-n-e.width);var a=t.clientY+r;return a+e.height>window.innerHeight&&(a=+t.clientY-r-e.height),{x:i,y:a}}(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),o=a.x,u=a.y;this.el.setAttribute("style","top: ".concat(u,"px; left: ").concat(o,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),t}();function Sit(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kit(t,e,n,r,i,a,o){try{var u=t[a](o),s=u.value}catch(l){return void n(l)}u.done?e(s):Promise.resolve(s).then(r,i)}function Cit(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){kit(a,r,i,o,u,"next",t)}function u(t){kit(a,r,i,o,u,"throw",t)}o(void 0)}))}}var Eit,Mit=Object.prototype,Oit=Mit.hasOwnProperty,Ait="function"==typeof Symbol?Symbol:{},_it=Ait.iterator||"@@iterator",Dit=Ait.asyncIterator||"@@asyncIterator",Tit=Ait.toStringTag||"@@toStringTag";function Fit(t,e,n,r){var i=e&&e.prototype instanceof Zit?e:Zit,a=Object.create(i.prototype),o=new Kit(r||[]);return a._invoke=function(t,e,n){var r=Pit;return function(i,a){if(r===Bit)throw new Error("Generator is already running");if(r===Lit){if("throw"===i)throw a;return tat()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=qit(o,n);if(u){if(u===Rit)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===Pit)throw r=Lit,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=Bit;var s=Iit(t,e,n);if("normal"===s.type){if(r=n.done?Lit:jit,s.arg===Rit)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=Lit,n.method="throw",n.arg=s.arg)}}}(t,n,o),a}function Iit(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}var Pit="suspendedStart",jit="suspendedYield",Bit="executing",Lit="completed",Rit={};function Zit(){}function Nit(){}function zit(){}var Uit={};Uit[_it]=function(){return this};var Hit=Object.getPrototypeOf,Wit=Hit&&Hit(Hit(Qit([])));Wit&&Wit!==Mit&&Oit.call(Wit,_it)&&(Uit=Wit);var Vit=zit.prototype=Zit.prototype=Object.create(Uit);function Git(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function Xit(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===Nit||"GeneratorFunction"===(e.displayName||e.name))}function Yit(t,e){function n(r,i,a,o){var u=Iit(t[r],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&Oit.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,o)}),(function(t){n("throw",t,a,o)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,o)}))}o(u.arg)}var r;this._invoke=function(t,i){function a(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(a,a):a()}}function qit(t,e){var n=t.iterator[e.method];if(n===Eit){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=Eit,qit(t,e),"throw"===e.method))return Rit;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return Rit}var r=Iit(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,Rit;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=Eit),e.delegate=null,Rit):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,Rit)}function $it(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function Jit(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Kit(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($it,this),this.reset(!0)}function Qit(t){if(t){var e=t[_it];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(Oit.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=Eit,e.done=!0,e};return r.next=r}}return{next:tat}}function tat(){return{value:Eit,done:!0}}Nit.prototype=Vit.constructor=zit,zit.constructor=Nit,zit[Tit]=Nit.displayName="GeneratorFunction",Git(Yit.prototype),Yit.prototype[Dit]=function(){return this},Git(Vit),Vit[Tit]="Generator",Vit[_it]=function(){return this},Vit.toString=function(){return"[object Generator]"},Kit.prototype={constructor:Kit,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=Eit,this.done=!1,this.delegate=null,this.method="next",this.arg=Eit,this.tryEntries.forEach(Jit),!t)for(var e in this)"t"===e.charAt(0)&&Oit.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=Eit)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=Eit),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var o=Oit.call(i,"catchLoc"),u=Oit.call(i,"finallyLoc");if(o&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&Oit.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,Rit):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),Rit},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),Jit(n),Rit}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;Jit(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:Qit(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=Eit),Rit}};var eat={wrap:Fit,isGeneratorFunction:Xit,AsyncIterator:Yit,mark:function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,zit):(t.__proto__=zit,Tit in t||(t[Tit]="GeneratorFunction")),t.prototype=Object.create(Vit),t},awrap:function(t){return{__await:t}},async:function(t,e,n,r,i){void 0===i&&(i=Promise);var a=new Yit(Fit(t,e,n,r),i);return Xit(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},keys:function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},values:Qit},nat=rat;function rat(t){var e=this;if(e instanceof rat||(e=new rat),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}function iat(t,e,n){var r=e===t.head?new uat(n,null,e,t):new uat(n,e,e.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function aat(t,e){t.tail=new uat(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function oat(t,e){t.head=new uat(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function uat(t,e,n,r){if(!(this instanceof uat))return new uat(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}rat.Node=uat,rat.create=rat,rat.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e},rat.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},rat.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},rat.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)aat(this,arguments[t]);return this.length},rat.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)oat(this,arguments[t]);return this.length},rat.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},rat.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},rat.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;null!==n;r++)t.call(e,n.value,r,this),n=n.next},rat.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;null!==n;r--)t.call(e,n.value,r,this),n=n.prev},rat.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},rat.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},rat.prototype.map=function(t,e){e=e||this;for(var n=new rat,r=this.head;null!==r;)n.push(t.call(e,r.value,this)),r=r.next;return n},rat.prototype.mapReverse=function(t,e){e=e||this;for(var n=new rat,r=this.tail;null!==r;)n.push(t.call(e,r.value,this)),r=r.prev;return n},rat.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=t(n,r.value,i),r=r.next;return n},rat.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=t(n,r.value,i),r=r.prev;return n},rat.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},rat.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},rat.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new rat;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;null!==i&&r<t;r++)i=i.next;for(;null!==i&&r<e;r++,i=i.next)n.push(i.value);return n},rat.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new rat;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;null!==i&&r>e;r--)i=i.prev;for(;null!==i&&r>t;r--,i=i.prev)n.push(i.value);return n},rat.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,r=this.head;null!==r&&n<t;n++)r=r.next;var i=[];for(n=0;r&&n<e;n++)i.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=iat(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return i},rat.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};try{rat.prototype[Symbol.iterator]=eat.mark((function t(){var e;return eat.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.head;case 1:if(!e){t.next=7;break}return t.next=4,e.value;case 4:e=e.next,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))}catch(fRt){}var sat=nat,lat=Symbol("max"),cat=Symbol("length"),fat=Symbol("lengthCalculator"),hat=Symbol("allowStale"),dat=Symbol("maxAge"),pat=Symbol("dispose"),gat=Symbol("noDisposeOnSet"),vat=Symbol("lruList"),mat=Symbol("cache"),yat=Symbol("updateAgeOnGet"),xat=function(){return 1},bat=function(){function t(e){if((0,J.Z)(this,t),"number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[lat]=e.max||1/0;var n=e.length||xat;if(this[fat]="function"!=typeof n?xat:n,this[hat]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[dat]=e.maxAge||0,this[pat]=e.dispose,this[gat]=e.noDisposeOnSet||!1,this[yat]=e.updateAgeOnGet||!1,this.reset()}return(0,K.Z)(t,[{key:"max",get:function(){return this[lat]},set:function(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[lat]=t||1/0,kat(this)}},{key:"allowStale",get:function(){return this[hat]},set:function(t){this[hat]=!!t}},{key:"maxAge",get:function(){return this[dat]},set:function(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[dat]=t,kat(this)}},{key:"lengthCalculator",get:function(){return this[fat]},set:function(t){var e=this;"function"!=typeof t&&(t=xat),t!==this[fat]&&(this[fat]=t,this[cat]=0,this[vat].forEach((function(t){t.length=e[fat](t.value,t.key),e[cat]+=t.length}))),kat(this)}},{key:"length",get:function(){return this[cat]}},{key:"itemCount",get:function(){return this[vat].length}},{key:"rforEach",value:function(t,e){e=e||this;for(var n=this[vat].tail;null!==n;){var r=n.prev;Mat(this,t,n,e),n=r}}},{key:"forEach",value:function(t,e){e=e||this;for(var n=this[vat].head;null!==n;){var r=n.next;Mat(this,t,n,e),n=r}}},{key:"keys",value:function(){return this[vat].toArray().map((function(t){return t.key}))}},{key:"values",value:function(){return this[vat].toArray().map((function(t){return t.value}))}},{key:"reset",value:function(){var t=this;this[pat]&&this[vat]&&this[vat].length&&this[vat].forEach((function(e){return t[pat](e.key,e.value)})),this[mat]=new Map,this[vat]=new sat,this[cat]=0}},{key:"dump",value:function(){var t=this;return this[vat].map((function(e){return!Sat(t,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}})).toArray().filter((function(t){return t}))}},{key:"dumpLru",value:function(){return this[vat]}},{key:"set",value:function(t,e,n){if((n=n||this[dat])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");var r=n?Date.now():0,i=this[fat](e,t);if(this[mat].has(t)){if(i>this[lat])return Cat(this,this[mat].get(t)),!1;var a=this[mat].get(t).value;return this[pat]&&(this[gat]||this[pat](t,a.value)),a.now=r,a.maxAge=n,a.value=e,this[cat]+=i-a.length,a.length=i,this.get(t),kat(this),!0}var o=new Eat(t,e,i,r,n);return o.length>this[lat]?(this[pat]&&this[pat](t,e),!1):(this[cat]+=o.length,this[vat].unshift(o),this[mat].set(t,this[vat].head),kat(this),!0)}},{key:"has",value:function(t){if(!this[mat].has(t))return!1;var e=this[mat].get(t).value;return!Sat(this,e)}},{key:"get",value:function(t){return wat(this,t,!0)}},{key:"peek",value:function(t){return wat(this,t,!1)}},{key:"pop",value:function(){var t=this[vat].tail;return t?(Cat(this,t),t.value):null}},{key:"del",value:function(t){Cat(this,this[mat].get(t))}},{key:"load",value:function(t){this.reset();for(var e=Date.now(),n=t.length-1;n>=0;n--){var r=t[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{var a=i-e;a>0&&this.set(r.k,r.v,a)}}}},{key:"prune",value:function(){var t=this;this[mat].forEach((function(e,n){return wat(t,n,!1)}))}}]),t}(),wat=function(t,e,n){var r=t[mat].get(e);if(r){var i=r.value;if(Sat(t,i)){if(Cat(t,r),!t[hat])return}else n&&(t[yat]&&(r.value.now=Date.now()),t[vat].unshiftNode(r));return i.value}},Sat=function(t,e){if(!e||!e.maxAge&&!t[dat])return!1;var n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[dat]&&n>t[dat]},kat=function(t){if(t[cat]>t[lat])for(var e=t[vat].tail;t[cat]>t[lat]&&null!==e;){var n=e.prev;Cat(t,e),e=n}},Cat=function(t,e){if(e){var n=e.value;t[pat]&&t[pat](n.key,n.value),t[cat]-=n.length,t[mat].delete(n.key),t[vat].removeNode(e)}},Eat=(0,K.Z)((function t(e,n,r,i,a){(0,J.Z)(this,t),this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=a||0})),Mat=function(t,e,n,r){var i=n.value;Sat(t,i)&&(Cat(t,n),t[hat]||(i=void 0)),i&&e.call(r,i.value,i.key,t)},Oat=bat,Aat=["includePrerelease","loose","rtl"],_at=function(t){return t?"object"!=typeof t?{loose:!0}:Aat.filter((function(e){return t[e]})).reduce((function(t,e){return t[e]=!0,t}),{}):{}},Dat={exports:{}},Tat={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},Fat="object"==typeof process&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=console).error.apply(t,["SEMVER"].concat(n))}:function(){},Iat=Fat;!function(t,e){var n=Tat.MAX_SAFE_COMPONENT_LENGTH,r=Iat,i=(e=t.exports={}).re=[],a=e.src=[],o=e.t={},u=0,s=function(t,e,n){var s=u++;r(t,s,e),o[t]=s,a[s]=e,i[s]=new RegExp(e,n?"g":void 0)};s("NUMERICIDENTIFIER","0|[1-9]\\d*"),s("NUMERICIDENTIFIERLOOSE","[0-9]+"),s("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),s("MAINVERSION","(".concat(a[o.NUMERICIDENTIFIER],")\\.")+"(".concat(a[o.NUMERICIDENTIFIER],")\\.")+"(".concat(a[o.NUMERICIDENTIFIER],")")),s("MAINVERSIONLOOSE","(".concat(a[o.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(a[o.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(a[o.NUMERICIDENTIFIERLOOSE],")")),s("PRERELEASEIDENTIFIER","(?:".concat(a[o.NUMERICIDENTIFIER],"|").concat(a[o.NONNUMERICIDENTIFIER],")")),s("PRERELEASEIDENTIFIERLOOSE","(?:".concat(a[o.NUMERICIDENTIFIERLOOSE],"|").concat(a[o.NONNUMERICIDENTIFIER],")")),s("PRERELEASE","(?:-(".concat(a[o.PRERELEASEIDENTIFIER],"(?:\\.").concat(a[o.PRERELEASEIDENTIFIER],")*))")),s("PRERELEASELOOSE","(?:-?(".concat(a[o.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(a[o.PRERELEASEIDENTIFIERLOOSE],")*))")),s("BUILDIDENTIFIER","[0-9A-Za-z-]+"),s("BUILD","(?:\\+(".concat(a[o.BUILDIDENTIFIER],"(?:\\.").concat(a[o.BUILDIDENTIFIER],")*))")),s("FULLPLAIN","v?".concat(a[o.MAINVERSION]).concat(a[o.PRERELEASE],"?").concat(a[o.BUILD],"?")),s("FULL","^".concat(a[o.FULLPLAIN],"$")),s("LOOSEPLAIN","[v=\\s]*".concat(a[o.MAINVERSIONLOOSE]).concat(a[o.PRERELEASELOOSE],"?").concat(a[o.BUILD],"?")),s("LOOSE","^".concat(a[o.LOOSEPLAIN],"$")),s("GTLT","((?:<|>)?=?)"),s("XRANGEIDENTIFIERLOOSE","".concat(a[o.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),s("XRANGEIDENTIFIER","".concat(a[o.NUMERICIDENTIFIER],"|x|X|\\*")),s("XRANGEPLAIN","[v=\\s]*(".concat(a[o.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(a[o.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(a[o.XRANGEIDENTIFIER],")")+"(?:".concat(a[o.PRERELEASE],")?").concat(a[o.BUILD],"?")+")?)?"),s("XRANGEPLAINLOOSE","[v=\\s]*(".concat(a[o.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(a[o.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(a[o.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(a[o.PRERELEASELOOSE],")?").concat(a[o.BUILD],"?")+")?)?"),s("XRANGE","^".concat(a[o.GTLT],"\\s*").concat(a[o.XRANGEPLAIN],"$")),s("XRANGELOOSE","^".concat(a[o.GTLT],"\\s*").concat(a[o.XRANGEPLAINLOOSE],"$")),s("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),s("COERCERTL",a[o.COERCE],!0),s("LONETILDE","(?:~>?)"),s("TILDETRIM","(\\s*)".concat(a[o.LONETILDE],"\\s+"),!0),e.tildeTrimReplace="$1~",s("TILDE","^".concat(a[o.LONETILDE]).concat(a[o.XRANGEPLAIN],"$")),s("TILDELOOSE","^".concat(a[o.LONETILDE]).concat(a[o.XRANGEPLAINLOOSE],"$")),s("LONECARET","(?:\\^)"),s("CARETTRIM","(\\s*)".concat(a[o.LONECARET],"\\s+"),!0),e.caretTrimReplace="$1^",s("CARET","^".concat(a[o.LONECARET]).concat(a[o.XRANGEPLAIN],"$")),s("CARETLOOSE","^".concat(a[o.LONECARET]).concat(a[o.XRANGEPLAINLOOSE],"$")),s("COMPARATORLOOSE","^".concat(a[o.GTLT],"\\s*(").concat(a[o.LOOSEPLAIN],")$|^$")),s("COMPARATOR","^".concat(a[o.GTLT],"\\s*(").concat(a[o.FULLPLAIN],")$|^$")),s("COMPARATORTRIM","(\\s*)".concat(a[o.GTLT],"\\s*(").concat(a[o.LOOSEPLAIN],"|").concat(a[o.XRANGEPLAIN],")"),!0),e.comparatorTrimReplace="$1$2$3",s("HYPHENRANGE","^\\s*(".concat(a[o.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(a[o.XRANGEPLAIN],")")+"\\s*$"),s("HYPHENRANGELOOSE","^\\s*(".concat(a[o.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(a[o.XRANGEPLAINLOOSE],")")+"\\s*$"),s("STAR","(<|>)?=?\\s*\\*"),s("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),s("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Dat,Dat.exports);var Pat,jat,Bat,Lat,Rat=/^[0-9]+$/,Zat=function(t,e){var n=Rat.test(t),r=Rat.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},Nat=Zat,zat=Iat,Uat=Tat.MAX_LENGTH,Hat=Tat.MAX_SAFE_INTEGER,Wat=Dat.exports.re,Vat=Dat.exports.t,Gat=_at,Xat=Nat,Yat=function(){function t(e,n){if((0,J.Z)(this,t),n=Gat(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: ".concat(e));if(e.length>Uat)throw new TypeError("version is longer than ".concat(Uat," characters"));zat("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var r=e.trim().match(n.loose?Wat[Vat.LOOSE]:Wat[Vat.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Hat||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Hat||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Hat||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<Hat)return e}return t})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}return(0,K.Z)(t,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(e){if(zat("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if("string"==typeof e&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}},{key:"compareMain",value:function(e){return e instanceof t||(e=new t(e,this.options)),Xat(this.major,e.major)||Xat(this.minor,e.minor)||Xat(this.patch,e.patch)}},{key:"comparePre",value:function(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],i=e.prerelease[n];if(zat("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return Xat(r,i)}while(++n)}},{key:"compareBuild",value:function(e){e instanceof t||(e=new t(e,this.options));var n=0;do{var r=this.build[n],i=e.build[n];if(zat("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return Xat(r,i)}while(++n)}},{key:"inc",value:function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}e&&(0===Xat(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: ".concat(t))}return this.format(),this.raw=this.version,this}}]),t}(),qat=Yat,$at=qat,Jat=function(t,e,n){return new $at(t,n).compare(new $at(e,n))},Kat=Jat,Qat=function(t,e,n){return 0===Kat(t,e,n)},tot=Jat,eot=function(t,e,n){return 0!==tot(t,e,n)},not=Jat,rot=function(t,e,n){return not(t,e,n)>0},iot=Jat,aot=function(t,e,n){return iot(t,e,n)>=0},oot=Jat,uot=function(t,e,n){return oot(t,e,n)<0},sot=Jat,lot=function(t,e,n){return sot(t,e,n)<=0},cot=Qat,fot=eot,hot=rot,dot=aot,pot=uot,got=lot,vot=function(t,e,n,r){switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t===n;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return cot(t,n,r);case"!=":return fot(t,n,r);case">":return hot(t,n,r);case">=":return dot(t,n,r);case"<":return pot(t,n,r);case"<=":return got(t,n,r);default:throw new TypeError("Invalid operator: ".concat(e))}};function mot(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return yot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yot(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function yot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xot(){if(Lat)return Bat;Lat=1;var t=function(){function t(e,i){var a=this;if((0,J.Z)(this,t),i=n(i),e instanceof t)return e.loose===!!i.loose&&e.includePrerelease===!!i.includePrerelease?e:new t(e.raw,i);if(e instanceof r)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease,this.raw=e,this.set=e.split("||").map((function(t){return a.parseRange(t.trim())})).filter((function(t){return t.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(e));if(this.set.length>1){var o=this.set[0];if(this.set=this.set.filter((function(t){return!f(t[0])})),0===this.set.length)this.set=[o];else if(this.set.length>1){var u,s=mot(this.set);try{for(s.s();!(u=s.n()).done;){var l=u.value;if(1===l.length&&h(l[0])){this.set=[l];break}}}catch(c){s.e(c)}finally{s.f()}}}this.format()}return(0,K.Z)(t,[{key:"format",value:function(){return this.range=this.set.map((function(t){return t.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(t){var n=this;t=t.trim();var a=Object.keys(this.options).join(","),h="parseRange:".concat(a,":").concat(t),d=e.get(h);if(d)return d;var g=this.options.loose,v=g?o[u.HYPHENRANGELOOSE]:o[u.HYPHENRANGE];t=t.replace(v,C(this.options.includePrerelease)),i("hyphen replace",t),t=t.replace(o[u.COMPARATORTRIM],s),i("comparator trim",t);var m=(t=(t=(t=t.replace(o[u.TILDETRIM],l)).replace(o[u.CARETTRIM],c)).split(/\s+/).join(" ")).split(" ").map((function(t){return p(t,n.options)})).join(" ").split(/\s+/).map((function(t){return k(t,n.options)}));g&&(m=m.filter((function(t){return i("loose invalid filter",t,n.options),!!t.match(o[u.COMPARATORLOOSE])}))),i("range list",m);var y,x=new Map,b=m.map((function(t){return new r(t,n.options)})),w=mot(b);try{for(w.s();!(y=w.n()).done;){var S=y.value;if(f(S))return[S];x.set(S.value,S)}}catch(M){w.e(M)}finally{w.f()}x.size>1&&x.has("")&&x.delete("");var E=(0,X.Z)(x.values());return e.set(h,E),E}},{key:"intersects",value:function(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((function(t){return d(t,n)&&e.set.some((function(e){return d(e,n)&&t.every((function(t){return e.every((function(e){return t.intersects(e,n)}))}))}))}))}},{key:"test",value:function(t){if(!t)return!1;if("string"==typeof t)try{t=new a(t,this.options)}catch(fRt){return!1}for(var e=0;e<this.set.length;e++)if(E(this.set[e],t,this.options))return!0;return!1}}]),t}();Bat=t;var e=new Oat({max:1e3}),n=_at,r=function(){if(jat)return Pat;jat=1;var t=Symbol("SemVer ANY"),e=function(){function e(r,i){if((0,J.Z)(this,e),i=n(i),r instanceof e){if(r.loose===!!i.loose)return r;r=r.value}o("comparator",r,i),this.options=i,this.loose=!!i.loose,this.parse(r),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}return(0,K.Z)(e,[{key:"parse",value:function(e){var n=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],a=e.match(n);if(!a)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==a[1]?a[1]:"","="===this.operator&&(this.operator=""),a[2]?this.semver=new u(a[2],this.options.loose):this.semver=t}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(e){if(o("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(fRt){return!1}return a(e,this.operator,this.semver,this.options)}},{key:"intersects",value:function(t,n){if(!(t instanceof e))throw new TypeError("a Comparator is required");if(n&&"object"==typeof n||(n={loose:!!n,includePrerelease:!1}),""===this.operator)return""===this.value||new s(t.value,n).test(this.value);if(""===t.operator)return""===t.value||new s(this.value,n).test(t.semver);var r=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),o=this.semver.version===t.semver.version,u=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),l=a(this.semver,"<",t.semver,n)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),c=a(this.semver,">",t.semver,n)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||i||o&&u||l||c}}],[{key:"ANY",get:function(){return t}}]),e}();Pat=e;var n=_at,r=Dat.exports.re,i=Dat.exports.t,a=vot,o=Iat,u=qat,s=xot();return Pat}(),i=Iat,a=qat,o=Dat.exports.re,u=Dat.exports.t,s=Dat.exports.comparatorTrimReplace,l=Dat.exports.tildeTrimReplace,c=Dat.exports.caretTrimReplace,f=function(t){return"<0.0.0-0"===t.value},h=function(t){return""===t.value},d=function(t,e){for(var n=!0,r=t.slice(),i=r.pop();n&&r.length;)n=r.every((function(t){return i.intersects(t,e)})),i=r.pop();return n},p=function(t,e){return i("comp",t,e),t=y(t,e),i("caret",t),t=v(t,e),i("tildes",t),t=b(t,e),i("xrange",t),t=S(t,e),i("stars",t),t},g=function(t){return!t||"x"===t.toLowerCase()||"*"===t},v=function(t,e){return t.trim().split(/\s+/).map((function(t){return m(t,e)})).join(" ")},m=function(t,e){var n=e.loose?o[u.TILDELOOSE]:o[u.TILDE];return t.replace(n,(function(e,n,r,a,o){var u;return i("tilde",t,e,n,r,a,o),g(n)?u="":g(r)?u=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):g(a)?u=">=".concat(n,".").concat(r,".0 <").concat(n,".").concat(+r+1,".0-0"):o?(i("replaceTilde pr",o),u=">=".concat(n,".").concat(r,".").concat(a,"-").concat(o," <").concat(n,".").concat(+r+1,".0-0")):u=">=".concat(n,".").concat(r,".").concat(a," <").concat(n,".").concat(+r+1,".0-0"),i("tilde return",u),u}))},y=function(t,e){return t.trim().split(/\s+/).map((function(t){return x(t,e)})).join(" ")},x=function(t,e){i("caret",t,e);var n=e.loose?o[u.CARETLOOSE]:o[u.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(function(e,n,a,o,u){var s;return i("caret",t,e,n,a,o,u),g(n)?s="":g(a)?s=">=".concat(n,".0.0").concat(r," <").concat(+n+1,".0.0-0"):g(o)?s="0"===n?">=".concat(n,".").concat(a,".0").concat(r," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".0").concat(r," <").concat(+n+1,".0.0-0"):u?(i("replaceCaret pr",u),s="0"===n?"0"===a?">=".concat(n,".").concat(a,".").concat(o,"-").concat(u," <").concat(n,".").concat(a,".").concat(+o+1,"-0"):">=".concat(n,".").concat(a,".").concat(o,"-").concat(u," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".").concat(o,"-").concat(u," <").concat(+n+1,".0.0-0")):(i("no pr"),s="0"===n?"0"===a?">=".concat(n,".").concat(a,".").concat(o).concat(r," <").concat(n,".").concat(a,".").concat(+o+1,"-0"):">=".concat(n,".").concat(a,".").concat(o).concat(r," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".").concat(o," <").concat(+n+1,".0.0-0")),i("caret return",s),s}))},b=function(t,e){return i("replaceXRanges",t,e),t.split(/\s+/).map((function(t){return w(t,e)})).join(" ")},w=function(t,e){t=t.trim();var n=e.loose?o[u.XRANGELOOSE]:o[u.XRANGE];return t.replace(n,(function(n,r,a,o,u,s){i("xRange",t,n,r,a,o,u,s);var l=g(a),c=l||g(o),f=c||g(u),h=f;return"="===r&&h&&(r=""),s=e.includePrerelease?"-0":"",l?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(c&&(o=0),u=0,">"===r?(r=">=",c?(a=+a+1,o=0,u=0):(o=+o+1,u=0)):"<="===r&&(r="<",c?a=+a+1:o=+o+1),"<"===r&&(s="-0"),n="".concat(r+a,".").concat(o,".").concat(u).concat(s)):c?n=">=".concat(a,".0.0").concat(s," <").concat(+a+1,".0.0-0"):f&&(n=">=".concat(a,".").concat(o,".0").concat(s," <").concat(a,".").concat(+o+1,".0-0")),i("xRange return",n),n}))},S=function(t,e){return i("replaceStars",t,e),t.trim().replace(o[u.STAR],"")},k=function(t,e){return i("replaceGTE0",t,e),t.trim().replace(o[e.includePrerelease?u.GTE0PRE:u.GTE0],"")},C=function(t){return function(e,n,r,i,a,o,u,s,l,c,f,h,d){return n=g(r)?"":g(i)?">=".concat(r,".0.0").concat(t?"-0":""):g(a)?">=".concat(r,".").concat(i,".0").concat(t?"-0":""):o?">=".concat(n):">=".concat(n).concat(t?"-0":""),s=g(l)?"":g(c)?"<".concat(+l+1,".0.0-0"):g(f)?"<".concat(l,".").concat(+c+1,".0-0"):h?"<=".concat(l,".").concat(c,".").concat(f,"-").concat(h):t?"<".concat(l,".").concat(c,".").concat(+f+1,"-0"):"<=".concat(s),"".concat(n," ").concat(s).trim()}},E=function(t,e,n){for(var a=0;a<t.length;a++)if(!t[a].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(var o=0;o<t.length;o++)if(i(t[o].semver),t[o].semver!==r.ANY&&t[o].semver.prerelease.length>0){var u=t[o].semver;if(u.major===e.major&&u.minor===e.minor&&u.patch===e.patch)return!0}return!1}return!0};return Bat}var bot=xot(),wot=function(t,e,n){try{e=new bot(e,n)}catch(fRt){return!1}return e.test(t)};function Sot(t,e,n){var r=t.open(e),i=new URL(e).origin,a=40;t.addEventListener("message",(function e(n){n.source===r&&(a=0,t.removeEventListener("message",e,!1))}),!1),setTimeout((function t(){a<=0||(r.postMessage(n,i),setTimeout(t,250),a-=1)}),250)}var kot='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function Cot(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];Eot(t,o)}return t}function Eot(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];So(t,i,e[i],!0)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t});var Mot;function Oot(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Aot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aot(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Aot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Dot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_ot(Object(n),!0).forEach((function(e){Sit(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tot=m,Fot=y,Iot="undefined"!=typeof window?window:void 0;void 0===Fot&&null!=Iot&&null!==(Mot=Iot.vl)&&void 0!==Mot&&Mot.compile&&(Fot=Iot.vl);var Pot={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},jot={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Bot={vega:"Vega","vega-lite":"Vega-Lite"},Lot={vega:Tot.version,"vega-lite":Fot?Fot.version:"not available"},Rot={vega:function(t){return t},"vega-lite":function(t,e){return Fot.compile(t,{config:e}).spec}},Zot='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Not="chart-wrapper";function zot(t){return"function"==typeof t}function Uot(t,e,n,r){var i="<html><head>".concat(e,'</head><body><pre><code class="json">'),a="</code></pre>".concat(n,"</body></html>"),o=window.open("");o.document.write(i+t+a),o.document.title="".concat(Bot[r]," JSON Source")}function Hot(t,e){if(t.$schema){var n,r=Srt(t.$schema);if(e&&e!==r.library)console.warn("The given visualization spec is written in ".concat(Bot[r.library],", but mode argument sets ").concat(null!==(n=Bot[e])&&void 0!==n?n:e,"."));var i=r.library;return wot(Lot[i],"^".concat(r.version.slice(1)))||console.warn("The input spec uses ".concat(Bot[i]," ").concat(r.version,", but the current version of ").concat(Bot[i]," is v").concat(Lot[i],".")),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":null!=e?e:"vega"}function Wot(t){return(e=t)&&"load"in e?t:Tot.loader(t);var e}function Vot(t){var e,n,r=null!==(e=null===(n=t.usermeta)||void 0===n?void 0:n.embedOptions)&&void 0!==e?e:{};return pu(r.defaultStyle)&&(r.defaultStyle=!1),r}function Got(){return Got=Cit(eat.mark((function t(e,n){var r,i,a,o,u,s,l,c,f,h,d,p=arguments;return eat.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=p.length>2&&void 0!==p[2]?p[2]:{},!pu(n)){t.next=10;break}return u=Wot(a.loader),t.t0=JSON,t.next=6,u.load(n);case 6:t.t1=t.sent,o=t.t0.parse.call(t.t0,t.t1),t.next=11;break;case 10:o=n;case 11:return s=Vot(o),l=s.loader,u&&!l||(u=Wot(null!==(c=a.loader)&&void 0!==c?c:l)),t.next=16,Xot(s,u);case 16:return f=t.sent,t.next=19,Xot(a,u);case 19:return h=t.sent,d=Dot(Dot({},Cot(h,f)),{},{config:wo(null!==(r=h.config)&&void 0!==r?r:{},null!==(i=f.config)&&void 0!==i?i:{})}),t.next=23,$ot(e,o,d,u);case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}}),t)}))),Got.apply(this,arguments)}function Xot(t,e){return Yot.apply(this,arguments)}function Yot(){return Yot=Cit(eat.mark((function t(e,n){var r,i,a;return eat.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!pu(e.config)){t.next=8;break}return t.t1=JSON,t.next=4,n.load(e.config);case 4:t.t2=t.sent,t.t0=t.t1.parse.call(t.t1,t.t2),t.next=9;break;case 8:t.t0=null!==(r=e.config)&&void 0!==r?r:{};case 9:if(i=t.t0,!pu(e.patch)){t.next=18;break}return t.t4=JSON,t.next=14,n.load(e.patch);case 14:t.t5=t.sent,t.t3=t.t4.parse.call(t.t4,t.t5),t.next=19;break;case 18:t.t3=e.patch;case 19:return a=t.t3,t.abrupt("return",Dot(Dot(Dot({},e),a?{patch:a}:{}),i?{config:i}:{}));case 21:case"end":return t.stop()}}),t)}))),Yot.apply(this,arguments)}function qot(t){var e,n=t.getRootNode?t.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(e=document.head)&&void 0!==e?e:document.body}}function $ot(t,e){return Jot.apply(this,arguments)}function Jot(){return Jot=Cit(eat.mark((function t(e,n){var r,i,a,o,u,s,l,c,f,h,d,p,g,v,m,y,b,w,S,k,C,E,M,O,A,_,D,T,F,I,P,j,B,L,R,Z,N,z,U,H,W,V,G,X,Y,q,$,J,K,Q,tt,et=arguments;return eat.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(tt=function(){z&&document.removeEventListener("click",z),j.finalize()},c=et.length>2&&void 0!==et[2]?et[2]:{},f=et.length>3?et[3]:void 0,h=c.theme?wo(x[c.theme],null!==(r=c.config)&&void 0!==r?r:{}):c.config,d=lu(c.actions)?c.actions:Cot({},Pot,null!==(i=c.actions)&&void 0!==i?i:{}),p=Dot(Dot({},jot),c.i18n),g=null!==(a=c.renderer)&&void 0!==a?a:"canvas",v=null!==(o=c.logLevel)&&void 0!==o?o:Tot.Warn,m=null!==(u=c.downloadFileName)&&void 0!==u?u:"visualization",y="string"==typeof e?document.querySelector(e):e){t.next=12;break}throw new Error("".concat(e," does not exist"));case 12:if(!1!==c.defaultStyle&&(b="vega-embed-style",w=qot(y),S=w.root,k=w.rootContainer,S.getElementById(b)||((C=document.createElement("style")).id=b,C.innerHTML=void 0===c.defaultStyle||!0===c.defaultStyle?kot.toString():c.defaultStyle,k.appendChild(C))),E=Hot(n,c.mode),M=Rot[E](n,h),"vega-lite"===E&&M.$schema&&(O=Srt(M.$schema),wot(Lot.vega,"^".concat(O.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(O.version,", but current version is v").concat(Lot.vega,"."))),y.classList.add("vega-embed"),d&&y.classList.add("has-actions"),y.innerHTML="",A=y,d&&((_=document.createElement("div")).classList.add(Not),y.appendChild(_),A=_),(D=c.patch)&&(M=D instanceof Function?D(M):Pa(M,D,!0,!1).newDocument),c.formatLocale&&Tot.formatLocale(c.formatLocale),c.timeFormatLocale&&Tot.timeFormatLocale(c.timeFormatLocale),c.expressionFunctions)for(T in c.expressionFunctions)"fn"in(F=c.expressionFunctions[T])?Tot.expressionFunction(T,F.fn,F.visitor):F instanceof Function&&Tot.expressionFunction(T,F);return I=c.ast,P=Tot.parse(M,"vega-lite"===E?{}:h,{ast:I}),(j=new(c.viewClass||Tot.View)(P,Dot({loader:f,logLevel:v,renderer:g},I?{expr:null!==(s=null!==(l=Tot.expressionInterpreter)&&void 0!==l?l:c.expr)&&void 0!==s?s:dY}:{}))).addSignalListener("autosize",(function(t,e){var n=e.type;"fit-x"==n?(A.classList.add("fit-x"),A.classList.remove("fit-y")):"fit-y"==n?(A.classList.remove("fit-x"),A.classList.add("fit-y")):"fit"==n?A.classList.add("fit-x","fit-y"):A.classList.remove("fit-x","fit-y")})),!1!==c.tooltip&&(B=zot(c.tooltip)?c.tooltip:new wit(!0===c.tooltip?{}:c.tooltip).call,j.tooltip(B)),void 0===(L=c.hover)&&(L="vega"===E),L&&(Z=(R="boolean"==typeof L?{}:L).hoverSet,N=R.updateSet,j.hover(Z,N)),c&&(null!=c.width&&j.width(c.width),null!=c.height&&j.height(c.height),null!=c.padding&&j.padding(c.padding)),t.next=37,j.initialize(A,c.bind).runAsync();case 37:if(!1!==d){if(U=y,!1!==c.defaultStyle&&((H=document.createElement("details")).title=p.CLICK_TO_VIEW_ACTIONS,y.append(H),U=H,(W=document.createElement("summary")).innerHTML=Zot,H.append(W),z=function(t){H.contains(t.target)||H.removeAttribute("open")},document.addEventListener("click",z)),V=document.createElement("div"),U.append(V),V.classList.add("vega-actions"),!0===d||!1!==d.export){G=Oot(["svg","png"]);try{for(Y=function(){var t=X.value;if(!0===d||!0===d.export||d.export[t]){var e=p["".concat(t.toUpperCase(),"_ACTION")],n=document.createElement("a");n.text=e,n.href="#",n.target="_blank",n.download="".concat(m,".").concat(t),n.addEventListener("mousedown",function(){var e=Cit(eat.mark((function e(n){var r;return eat.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,j.toImageURL(t,c.scaleFactor);case 3:r=e.sent,this.href=r;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),V.append(n)}},G.s();!(X=G.n()).done;)Y()}catch(nt){G.e(nt)}finally{G.f()}}!0!==d&&!1===d.source||((q=document.createElement("a")).text=p.SOURCE_ACTION,q.href="#",q.addEventListener("click",(function(t){var e,r;Uot(Ya()(n),null!==(e=c.sourceHeader)&&void 0!==e?e:"",null!==(r=c.sourceFooter)&&void 0!==r?r:"",E),t.preventDefault()})),V.append(q)),"vega-lite"!==E||!0!==d&&!1===d.compiled||(($=document.createElement("a")).text=p.COMPILED_ACTION,$.href="#",$.addEventListener("click",(function(t){var e,n;Uot(Ya()(M),null!==(e=c.sourceHeader)&&void 0!==e?e:"",null!==(n=c.sourceFooter)&&void 0!==n?n:"","vega"),t.preventDefault()})),V.append($)),!0!==d&&!1===d.editor||(K=null!==(J=c.editorUrl)&&void 0!==J?J:"https://vega.github.io/editor/",(Q=document.createElement("a")).text=p.EDITOR_ACTION,Q.href="#",Q.addEventListener("click",(function(t){Sot(window,K,{config:h,mode:E,renderer:g,spec:Ya()(n)}),t.preventDefault()})),V.append(Q))}return t.abrupt("return",{view:j,spec:n,vgSpec:M,finalize:tt,embedOptions:c});case 39:case"end":return t.stop()}}),t)}))),Jot.apply(this,arguments)}function Kot(t,e){Object.keys(e).forEach((function(n){!function(t,e,n){var r;n&&((r=n)&&"[object Function]"==={}.toString.call(r)?n(t.data(e)):t.change(e,Tot.changeset().remove((function(){return!0})).insert(n)))}(t,n,e[n])}))}var Qot=n(45697),tut=n.n(Qot);function eut(t){var e=new Set;return t.forEach((function(t){Object.keys(t).forEach((function(t){e.add(t)}))})),e}var nut=function(){};function rut(t,e){var n=Object.keys(e);return n.forEach((function(n){try{t.addSignalListener(n,e[n])}catch(r){console.warn("Cannot add invalid signal listener.",r)}})),n.length>0}function iut(t,e){var n=Object.keys(e);return n.forEach((function(n){try{t.removeSignalListener(n,e[n])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}})),n.length>0}function aut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function out(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?aut(Object(n),!0).forEach((function(e){(0,Z.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function uut(t){var e=t.spec,n=t.width,r=t.height;return void 0!==n&&void 0!==r?out(out({},e),{},{width:n,height:r}):void 0!==n?out(out({},e),{},{width:n}):void 0!==r?out(out({},e),{},{height:r}):e}var sut=["spec","onNewView","signalListeners","width","height"];function lut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}function cut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fut=function(t){(0,Q.Z)(n,t);var e=lut(n);function n(){var t;return(0,J.Z)(this,n),t=e.apply(this,arguments),cut((0,ha.Z)(t),"containerRef",I.createRef()),cut((0,ha.Z)(t),"resultPromise",void 0),cut((0,ha.Z)(t),"handleError",(function(e){var n=t.props.onError;(void 0===n?nut:n)(e,t.containerRef.current),console.warn(e)})),cut((0,ha.Z)(t),"modifyView",(function(e){t.resultPromise&&t.resultPromise.then((function(t){return t&&e(t.view),!0})).catch(t.handleError)})),t}return(0,K.Z)(n,[{key:"componentDidMount",value:function(){this.createView()}},{key:"componentDidUpdate",value:function(t){var e=this,n=eut([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some((function(n){return e.props[n]!==t[n]})))this.clearView(),this.createView();else{var r=function(t,e){if(t===e)return!1;var n={width:!1,height:!1,isExpensive:!1},r=eut([t,e]);return!r.has("width")||"width"in t&&"width"in e&&t.width===e.width||("width"in t&&"number"==typeof t.width?n.width=t.width:n.isExpensive=!0),!r.has("height")||"height"in t&&"height"in e&&t.height===e.height||("height"in t&&"number"==typeof t.height?n.height=t.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),(0,X.Z)(r).some((function(n){return!(n in t)||!(n in e)||!mY()(t[n],e[n])}))&&(n.isExpensive=!0),!(!1===n.width&&!1===n.height&&!n.isExpensive)&&n}(uut(this.props),uut(t)),i=this.props.signalListeners,a=t.signalListeners;if(r)if(r.isExpensive)this.clearView(),this.createView();else{var o=!va(i,a);this.modifyView((function(t){!1!==r.width&&t.width(r.width),!1!==r.height&&t.height(r.height),o&&(a&&iut(t,a),i&&rut(t,i)),t.run()}))}else va(i,a)||this.modifyView((function(t){a&&iut(t,a),i&&rut(t,i),t.run()}))}}},{key:"componentWillUnmount",value:function(){this.clearView()}},{key:"createView",value:function(){var t=this.props,e=(t.spec,t.onNewView),n=t.signalListeners,r=void 0===n?{}:n,i=(t.width,t.height,(0,j.Z)(t,sut));if(this.containerRef.current){var a=uut(this.props);this.resultPromise=function(t,e){return Got.apply(this,arguments)}(this.containerRef.current,a,i).then((function(t){if(t){var e=t.view;rut(e,r)&&e.run()}return t})).catch(this.handleError),e&&this.modifyView(e)}}},{key:"clearView",value:function(){return this.resultPromise&&this.resultPromise.then((function(t){t&&t.finalize()})).catch(this.handleError),this.resultPromise=void 0,this}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.style;return I.createElement("div",{ref:this.containerRef,className:e,style:n})}}]),n}(I.PureComponent);cut(fut,"propTypes",{className:tut().string,onError:tut().func});var hut=["data"];function dut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,pa.Z)(t);if(e){var i=(0,pa.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,da.Z)(this,n)}}function put(){return put=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},put.apply(this,arguments)}function gut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vut=function(t){(0,Q.Z)(n,t);var e=dut(n);function n(){var t;return(0,J.Z)(this,n),t=e.apply(this,arguments),gut((0,ha.Z)(t),"vegaEmbed",I.createRef()),gut((0,ha.Z)(t),"handleNewView",(function(e){t.update();var n=t.props.onNewView;(void 0===n?nut:n)(e)})),t}return(0,K.Z)(n,[{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(t){va(this.props.data,t.data)||this.update()}},{key:"update",value:function(){var t=this.props.data;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView((function(e){Kot(e,t),e.resize().run()}))}},{key:"render",value:function(){var t=this.props,e=(t.data,(0,j.Z)(t,hut));return I.createElement(fut,put({ref:this.vegaEmbed},e,{onNewView:this.handleNewView}))}}]),n}(I.PureComponent);gut(vut,"defaultProps",{data:{}});var mut=n(86406),yut=n(82637),xut=n(45107),but=function(t){var e=t.spec,n=t.code,r=t.error,i=t.status,a=[];return null!==e&&a.push({label:I.createElement("div",null," ",I.createElement(rr,{className:"inline-block h-4"})," Vega-Lite Spec"),key:"1",children:I.createElement("div",{className:"w-full overflow-hidden"},I.createElement(ur.d,{code:JSON.stringify(e,null,2),language:"javascript",wrapLines:!0,maxHeight:"280px"}))}),a.push({label:I.createElement("div",null," ",I.createElement(yut.Z,{className:"inline-block h-4"})," Python Code"),key:"2",children:I.createElement("div",{className:"w-full overflow-hidden"},I.createElement(ur.d,{code:n,language:"python",wrapLines:!0,maxHeight:"280px"}))}),!1===i&&r&&a.push({label:I.createElement("div",{className:""}," ",I.createElement(xut.Z,{className:"inline-block h-4 text-orange-400"})," ","Error"),key:"3",children:I.createElement("div",{className:"w-full overflow-hidden"},I.createElement("div",{className:"text-xs mb-2 text-primary mt-2 "}," Error Message "),I.createElement(ur.d,{code:r.message,language:"javascript",wrapLines:!0}),I.createElement("div",{className:"text-xs mb-2 text-primary mt-2"}," Traceback "),I.createElement(ur.d,{code:r.traceback,language:"javascript",wrapLines:!0}))}),I.createElement("div",{className:"w-full p-3 border rounded  text-primary  "},I.createElement(fa.Z,{defaultActiveKey:"1",onChange:function(){},items:a}))},wut=function(t){var e=t.vizData,n=t.vizConfig,r=I.useState(!1),i=r[0],a=r[1],o=I.useState(null),u=(o[0],o[1]),s=I.useState([]),l=s[0],c=s[1],f=I.useRef(null);I.useEffect((function(){c([])}),[e]);var h=null==l?void 0:l.map((function(t,e){var n="accessibility"===t.section_name;return I.createElement("div",{className:"mb-4",key:"explanationsrow"+e},I.createElement("div",{className:"font-semibold text-lg"}," ","Step ",e+1,": ",t.section_name),I.createElement("div",{className:"flex gap-4"},I.createElement("div",{className:(n?"":" w-1/2")+" "},t.explanation),!n&&I.createElement("div",{className:"w-1/2"},I.createElement(ur.d,{code:"# "+t.rationale+" \n"+t.code,language:"python",wrapLines:!0}))))}));return I.createElement("div",{className:"text-primary"},I.createElement("div",{onClick:function(){return function(){u(null),a(!0),c([]),setTimeout((function(){(0,R.kI)(f)}),600);var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e.code,library:n.library})};(0,R.ZV)("/api/visualize/explain",t,(function(t){t&&t.status?(console.log("Explanation data",t),c(t.explanations),Vn.ZP.success(t.message),setTimeout((function(){(0,R.kI)(f)}),400)):(Vn.ZP.error(t.message),u(t)),a(!1)}),(function(t){Vn.ZP.error(t.message),a(!1),u(t)}))}()},role:"button",className:"px-5 bg-accent duration-300 hover:brightness-110 text-white inline-block  rounded p-2 "+(i?"opacity-50 pointer-events-none":"")+" "},!i&&I.createElement(sa.Z,{className:"w-5 h-5 mr-1  inline-block"}),i&&I.createElement(or.rH,{className:"text-white inline-block"})," Explain the chart."),i&&I.createElement("div",{className:"mt-4"},I.createElement(or.rH,{className:"text-accent",subtitle:"loading explanations .."}),I.createElement(Gn.Z,{active:!0,className:"mt-4",paragraph:{rows:12}})),I.createElement("div",{ref:f,className:"mt-4"},h))},Sut=n(11005),kut=["title","titleId"];var Cut,Eut,Mut,Out=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,kut);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z",clipRule:"evenodd"}))})),Aut=n(79900),_ut=n(48238);!function(t){t.FORE="fore",t.MID="mid",t.BG="bg"}(Cut||(Cut={})),function(t){t.TOP="top",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.RIGHT="right",t.RIGHT_TOP="right-top",t.RIGHT_BOTTOM="right-bottom",t.LEFT="left",t.LEFT_TOP="left-top",t.LEFT_BOTTOM="left-bottom",t.BOTTOM="bottom",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_RIGHT="bottom-right",t.RADIUS="radius",t.CIRCLE="circle",t.NONE="none"}(Eut||(Eut={})),function(t){t.AXIS="axis",t.GRID="grid",t.LEGEND="legend",t.TOOLTIP="tooltip",t.ANNOTATION="annotation",t.SLIDER="slider",t.SCROLLBAR="scrollbar",t.OTHER="other"}(Mut||(Mut={}));var Dut,Tut,Fut,Iut,Put=3,jut=2,But=1;!function(t){t.BEFORE_RENDER="beforerender",t.AFTER_RENDER="afterrender",t.BEFORE_PAINT="beforepaint",t.AFTER_PAINT="afterpaint",t.BEFORE_CHANGE_DATA="beforechangedata",t.AFTER_CHANGE_DATA="afterchangedata",t.BEFORE_CLEAR="beforeclear",t.AFTER_CLEAR="afterclear",t.BEFORE_DESTROY="beforedestroy",t.BEFORE_CHANGE_SIZE="beforechangesize",t.AFTER_CHANGE_SIZE="afterchangesize"}(Dut||(Dut={})),function(t){t.BEFORE_DRAW_ANIMATE="beforeanimate",t.AFTER_DRAW_ANIMATE="afteranimate",t.BEFORE_RENDER_LABEL="beforerenderlabel",t.AFTER_RENDER_LABEL="afterrenderlabel"}(Tut||(Tut={})),function(t){t.MOUSE_ENTER="plot:mouseenter",t.MOUSE_DOWN="plot:mousedown",t.MOUSE_MOVE="plot:mousemove",t.MOUSE_UP="plot:mouseup",t.MOUSE_LEAVE="plot:mouseleave",t.TOUCH_START="plot:touchstart",t.TOUCH_MOVE="plot:touchmove",t.TOUCH_END="plot:touchend",t.TOUCH_CANCEL="plot:touchcancel",t.CLICK="plot:click",t.DBLCLICK="plot:dblclick",t.CONTEXTMENU="plot:contextmenu",t.LEAVE="plot:leave",t.ENTER="plot:enter"}(Fut||(Fut={})),function(t){t.ACTIVE="active",t.INACTIVE="inactive",t.SELECTED="selected",t.DEFAULT="default"}(Iut||(Iut={}));var Lut,Rut,Zut,Nut,zut=["color","shape","size"],Uut="_origin",Hut={};function Wut(t,e){Hut[t]=e}function Vut(t){Lut||(Lut=document.createElement("table"),Rut=document.createElement("tr"),Zut=/^\s*<(\w+|!)[^>]*>/,Nut={tr:document.createElement("tbody"),tbody:Lut,thead:Lut,tfoot:Lut,td:Rut,th:Rut,"*":document.createElement("div")});var e=Zut.test(t)&&RegExp.$1;e&&e in Nut||(e="*");var n=Nut[e];t="string"==typeof t?t.replace(/(^\s*)|(\s*$)/g,""):t,n.innerHTML=""+t;var r=n.childNodes[0];return r&&n.contains(r)&&n.removeChild(r),r}function Gut(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}function Xut(t){return"number"==typeof t&&!isNaN(t)}function Yut(t,e,n,r){var i=n,a=r;if(e){var o=function(t){var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}(t);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(Xut(i)?i:1,1),height:Math.max(Xut(a)?a:1,1)}}var qut=n(81819),$ut=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=e.visible,i=void 0===r||r;return n.visible=i,n}return(0,Aut.ZT)(e,t),e.prototype.show=function(){this.visible||this.changeVisible(!0)},e.prototype.hide=function(){this.visible&&this.changeVisible(!1)},e.prototype.destroy=function(){this.off(),this.destroyed=!0},e.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},e}(qut.Z),Jut=$ut,Kut=n(82854),Qut=function(){function t(t){var e=t.xField,n=t.yField,r=t.adjustNames,i=void 0===r?["x","y"]:r,a=t.dimValuesMap;this.adjustNames=i,this.xField=e,this.yField=n,this.dimValuesMap=a}return t.prototype.isAdjust=function(t){return this.adjustNames.indexOf(t)>=0},t.prototype.getAdjustRange=function(t,e,n){var r,i,a=this.yField,o=n.indexOf(e),u=n.length;return!a&&this.isAdjust("y")?(r=0,i=1):u>1?(r=n[0===o?0:o-1],i=n[o===u-1?u-1:o+1],0!==o?r+=(e-r)/2:r-=(i-e)/2,o!==u-1?i-=(i-e)/2:i+=(e-n[u-2])/2):(r=0===e?0:e-.5,i=0===e?1:e+.5),{pre:r,next:i}},t.prototype.adjustData=function(t,e){var n=this,r=this.getDimValues(e);_ut.S6(t,(function(t,e){_ut.S6(r,(function(r,i){n.adjustDim(i,r,t,e)}))}))},t.prototype.groupData=function(t,e){return _ut.S6(t,(function(t){void 0===t[e]&&(t[e]=0)})),_ut.vM(t,e)},t.prototype.adjustDim=function(t,e,n,r){},t.prototype.getDimValues=function(t){var e=this.xField,n=this.yField,r=_ut.f0({},this.dimValuesMap),i=[];if(e&&this.isAdjust("x")&&i.push(e),n&&this.isAdjust("y")&&i.push(n),i.forEach((function(e){r&&r[e]||(r[e]=_ut.I(t,e).sort((function(t,e){return t-e})))})),!n&&this.isAdjust("y")){r.y=[0,1]}return r},t}(),tst=Qut,est={},nst=function(t){return est[t.toLowerCase()]},rst=function(t,e){if(nst(t))throw new Error("Adjust type '"+t+"' existed.");est[t.toLowerCase()]=e},ist=function(t,e){return ist=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ist(t,e)};function ast(t,e){function n(){this.constructor=t}ist(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ost=function(){return ost=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ost.apply(this,arguments)};var ust=function(t){function e(e){var n=t.call(this,e)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var r=e.marginRatio,i=void 0===r?.5:r,a=e.dodgeRatio,o=void 0===a?.5:a,u=e.dodgeBy,s=e.intervalPadding,l=e.dodgePadding,c=e.xDimensionLength,f=e.groupNum,h=e.defaultSize,d=e.maxColumnWidth,p=e.minColumnWidth,g=e.columnWidthRatio,v=e.customOffset;return n.marginRatio=i,n.dodgeRatio=o,n.dodgeBy=u,n.intervalPadding=s,n.dodgePadding=l,n.xDimensionLegenth=c,n.groupNum=f,n.defaultSize=h,n.maxColumnWidth=d,n.minColumnWidth=p,n.columnWidthRatio=g,n.customOffset=v,n}return ast(e,t),e.prototype.process=function(t){var e=_ut.d9(t),n=_ut.xH(e),r=this.dodgeBy,i=r?_ut.ru(n,r):e;return this.cacheMap={},this.adjustDataArray=i,this.mergeData=n,this.adjustData(i,n),this.adjustDataArray=[],this.mergeData=[],e},e.prototype.adjustDim=function(t,e,n,r){var i=this,a=this.customOffset,o=this.getDistribution(t),u=this.groupData(n,t);return _ut.S6(u,(function(n,u){var s;s=1===e.length?{pre:e[0]-1,next:e[0]+1}:i.getAdjustRange(t,parseFloat(u),e),_ut.S6(n,(function(e){var n=e[t],u=o[n],l=u.indexOf(r);if(_ut.UM(a))e[t]=i.getDodgeOffset(s,l,u.length);else{var c=s.pre,f=s.next;e[t]=_ut.mf(a)?a(e,s):(c+f)/2+a}}))})),[]},e.prototype.getDodgeOffset=function(t,e,n){var r,i=this,a=i.dodgeRatio,o=i.marginRatio,u=i.intervalPadding,s=i.dodgePadding,l=t.pre,c=t.next,f=c-l;if(!_ut.UM(u)&&_ut.UM(s)&&u>=0)r=l+this.getIntervalOnlyOffset(n,e);else if(!_ut.UM(s)&&_ut.UM(u)&&s>=0){r=l+this.getDodgeOnlyOffset(n,e)}else if(!_ut.UM(u)&&!_ut.UM(s)&&u>=0&&s>=0){r=l+this.getIntervalAndDodgeOffset(n,e)}else{var h=f*a/n,d=o*h;r=(l+c)/2+(.5*(f-n*h-(n-1)*d)+((e+1)*h+e*d)-.5*h-.5*f)}return r},e.prototype.getIntervalOnlyOffset=function(t,e){var n=this,r=n.defaultSize,i=n.intervalPadding,a=n.xDimensionLegenth,o=n.groupNum,u=n.dodgeRatio,s=n.maxColumnWidth,l=n.minColumnWidth,c=n.columnWidthRatio,f=i/a,h=(1-(o-1)*f)/o*u/(t-1),d=((1-f*(o-1))/o-h*(t-1))/t;if(d=_ut.UM(c)?d:1/o/t*c,!_ut.UM(s)){var p=s/a;d=Math.min(d,p)}if(!_ut.UM(l)){var g=l/a;d=Math.max(d,g)}return((.5+e)*(d=r?r/a:d)+e*(h=((1-(o-1)*f)/o-t*d)/(t-1))+.5*f)*o-f/2},e.prototype.getDodgeOnlyOffset=function(t,e){var n=this,r=n.defaultSize,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,u=n.marginRatio,s=n.maxColumnWidth,l=n.minColumnWidth,c=n.columnWidthRatio,f=i/a,h=1*u/(o-1),d=((1-h*(o-1))/o-f*(t-1))/t;if(d=c?1/o/t*c:d,!_ut.UM(s)){var p=s/a;d=Math.min(d,p)}if(!_ut.UM(l)){var g=l/a;d=Math.max(d,g)}return((.5+e)*(d=r?r/a:d)+e*f+.5*(h=(1-(d*t+f*(t-1))*o)/(o-1)))*o-h/2},e.prototype.getIntervalAndDodgeOffset=function(t,e){var n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.xDimensionLegenth,o=n.groupNum,u=r/a,s=i/a;return((.5+e)*(((1-u*(o-1))/o-s*(t-1))/t)+e*s+.5*u)*o-u/2},e.prototype.getDistribution=function(t){var e=this.adjustDataArray,n=this.cacheMap,r=n[t];return r||(r={},_ut.S6(e,(function(e,n){var i=_ut.I(e,t);i.length||i.push(0),_ut.S6(i,(function(t){r[t]||(r[t]=[]),r[t].push(n)}))})),n[t]=r),r},e}(tst),sst=ust;var lst=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ast(e,t),e.prototype.process=function(t){var e=_ut.d9(t),n=_ut.xH(e);return this.adjustData(e,n),e},e.prototype.adjustDim=function(t,e,n){var r=this,i=this.groupData(n,t);return _ut.S6(i,(function(n,i){return r.adjustGroup(n,t,parseFloat(i),e)}))},e.prototype.getAdjustOffset=function(t){var e=t.pre,n=t.next,r=.05*(n-e);return function(t,e){return(e-t)*Math.random()+t}(e+r,n-r)},e.prototype.adjustGroup=function(t,e,n,r){var i=this,a=this.getAdjustRange(e,n,r);return _ut.S6(t,(function(t){t[e]=i.getAdjustOffset(a)})),t},e}(tst),cst=lst,fst=_ut.Ct,hst=function(t){function e(e){var n=t.call(this,e)||this,r=e.adjustNames,i=void 0===r?["y"]:r,a=e.height,o=void 0===a?NaN:a,u=e.size,s=void 0===u?10:u,l=e.reverseOrder,c=void 0!==l&&l;return n.adjustNames=i,n.height=o,n.size=s,n.reverseOrder=c,n}return ast(e,t),e.prototype.process=function(t){var e=this.yField,n=this.reverseOrder,r=e?this.processStack(t):this.processOneDimStack(t);return n?this.reverse(r):r},e.prototype.reverse=function(t){return t.slice(0).reverse()},e.prototype.processStack=function(t){var e=this,n=e.xField,r=e.yField,i=e.reverseOrder?this.reverse(t):t,a=new fst,o=new fst;return i.map((function(t){return t.map((function(t){var e,i=_ut.U2(t,n,0),u=_ut.U2(t,[r]),s=i.toString();if(u=_ut.kJ(u)?u[1]:u,!_ut.UM(u)){var l=u>=0?a:o;l.has(s)||l.set(s,0);var c=l.get(s),f=u+c;return l.set(s,f),ost(ost({},t),((e={})[r]=[c,f],e))}return t}))}))},e.prototype.processOneDimStack=function(t){var e=this,n=this,r=n.xField,i=n.height,a=n.reverseOrder,o=a?this.reverse(t):t,u=new fst;return o.map((function(t){return t.map((function(t){var n,a=e.size,o=t[r],s=2*a/i;u.has(o)||u.set(o,s/2);var l=u.get(o);return u.set(o,l+s),ost(ost({},t),((n={}).y=l,n))}))}))},e}(tst),dst=hst,pst=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ast(e,t),e.prototype.process=function(t){var e=_ut.xH(t),n=this.xField,r=this.yField,i=this.getXValuesMaxMap(e),a=Math.max.apply(Math,Object.keys(i).map((function(t){return i[t]})));return _ut.UI(t,(function(t){return _ut.UI(t,(function(t){var e,o,u=t[r],s=t[n];if(_ut.kJ(u)){var l=(a-i[s])/2;return ost(ost({},t),((e={})[r]=_ut.UI(u,(function(t){return l+t})),e))}var c=(a-u)/2;return ost(ost({},t),((o={})[r]=[c,u+c],o))}))}))},e.prototype.getXValuesMaxMap=function(t){var e=this,n=this.xField,r=this.yField,i=_ut.vM(t,(function(t){return t[n]}));return _ut.Q8(i,(function(t){return e.getDimMaxValue(t,r)}))},e.prototype.getDimMaxValue=function(t,e){var n=_ut.UI(t,(function(t){return _ut.U2(t,e,[])})),r=_ut.xH(n);return Math.max.apply(Math,r)},e}(tst),gst=pst;rst("Dodge",sst),rst("Jitter",cst),rst("Stack",dst),rst("Symmetric",gst);var vst=function(t,e){return(0,_ut.HD)(e)?e:t.invert(t.scale(e))},mst=function(){function t(t){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(t)}return t.prototype.mapping=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.map((function(e,n){return t._toOriginParam(e,t.scales[n])}));return this.callback.apply(this,r)},t.prototype.getLinearValue=function(t){var e=this.values.length-1,n=Math.floor(e*t),r=e*t-n,i=this.values[n];return i+((n===e?i:this.values[n+1])-i)*r},t.prototype.getNames=function(){for(var t=this.scales,e=this.names,n=Math.min(t.length,e.length),r=[],i=0;i<n;i+=1)r.push(e[i]);return r},t.prototype.getFields=function(){return this.scales.map((function(t){return t.field}))},t.prototype.getScale=function(t){return this.scales[this.names.indexOf(t)]},t.prototype.defaultCallback=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this.values:e.map((function(e,n){var r=t.scales[n];return"identity"===r.type?r.values[0]:t._getAttributeValue(r,e)}))},t.prototype._parseCfg=function(t){var e=this,n=t.type,r=void 0===n?"base":n,i=t.names,a=void 0===i?[]:i,o=t.scales,u=void 0===o?[]:o,s=t.values,l=void 0===s?[]:s,c=t.callback;this.type=r,this.scales=u,this.values=l,this.names=a,this.callback=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(c){var r=c.apply(void 0,t);if(!(0,_ut.UM)(r))return[r]}return e.defaultCallback.apply(e,t)}},t.prototype._getAttributeValue=function(t,e){if(t.isCategory&&!this.linear){var n=t.translate(e);return this.values[n%this.values.length]}var r=t.scale(e);return this.getLinearValue(r)},t.prototype._toOriginParam=function(t,e){return e.isLinear?t:(0,_ut.kJ)(t)?t.map((function(t){return vst(e,t)})):vst(e,t)},t}(),yst=mst,xst=function(t,e){return xst=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},xst(t,e)};function bst(t,e){function n(){this.constructor=t}xst(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var wst=/rgba?\(([\s.,0-9]+)\)/,Sst=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,kst=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Cst=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,Est=function(t,e,n,r){return t[r]+(e[r]-t[r])*n};function Mst(t){return"#"+_st(t[0])+_st(t[1])+_st(t[2])}var Ost,Ast=function(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]},_st=function(t){var e=Math.round(t).toString(16);return 1===e.length?"0"+e:e},Dst=function(t){if("#"===t[0]&&7===t.length)return t;Ost||(Ost=function(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t}()),Ost.style.color=t;var e=document.defaultView.getComputedStyle(Ost,"").getPropertyValue("color"),n=wst.exec(e)[1].split(/\s*,\s*/).map((function(t){return Number(t)}));return e=Mst(n)},Tst={rgb2arr:Ast,gradient:function(t){var e=(0,_ut.HD)(t)?t.split("-"):t,n=(0,_ut.UI)(e,(function(t){return Ast(-1===t.indexOf("#")?Dst(t):t)}));return function(t){return function(t,e){var n=isNaN(Number(e))||e<0?0:e>1?1:Number(e),r=t.length-1,i=Math.floor(r*n),a=r*n-i,o=t[i],u=i===r?o:t[i+1];return Mst([Est(o,u,a,0),Est(o,u,a,1),Est(o,u,a,2)])}(n,t)}},toRGB:(0,_ut.HP)(Dst),toCSSGradient:function(t){if(/^[r,R,L,l]{1}[\s]*\(/.test(t)){var e,n=void 0;if("l"===t[0]){var r=+(i=Sst.exec(t))[1]+90;n=i[2],e="linear-gradient("+r+"deg, "}else if("r"===t[0]){var i;e="radial-gradient(",n=(i=kst.exec(t))[4]}var a=n.match(Cst);return(0,_ut.S6)(a,(function(t,n){var r=t.split(":");e+=r[1]+" "+100*r[0]+"%",n!==a.length-1&&(e+=", ")})),e+=")"}return t}},Fst=function(t){function e(e){var n=t.call(this,e)||this;return n.type="color",n.names=["color"],(0,_ut.HD)(n.values)&&(n.linear=!0),n.gradient=Tst.gradient(n.values),n}return bst(e,t),e.prototype.getLinearValue=function(t){return this.gradient(t)},e}(yst),Ist=Fst,Pst=function(t){function e(e){var n=t.call(this,e)||this;return n.type="opacity",n.names=["opacity"],n}return bst(e,t),e}(yst),jst=Pst,Bst=function(t){function e(e){var n=t.call(this,e)||this;return n.names=["x","y"],n.type="position",n}return bst(e,t),e.prototype.mapping=function(t,e){var n=this.scales,r=n[0],i=n[1];return(0,_ut.UM)(t)||(0,_ut.UM)(e)?[]:[(0,_ut.kJ)(t)?t.map((function(t){return r.scale(t)})):r.scale(t),(0,_ut.kJ)(e)?e.map((function(t){return i.scale(t)})):i.scale(e)]},e}(yst),Lst=Bst,Rst=function(t){function e(e){var n=t.call(this,e)||this;return n.type="shape",n.names=["shape"],n}return bst(e,t),e.prototype.getLinearValue=function(t){var e=Math.round((this.values.length-1)*t);return this.values[e]},e}(yst),Zst=Rst,Nst=function(t){function e(e){var n=t.call(this,e)||this;return n.type="size",n.names=["size"],n}return bst(e,t),e}(yst),zst=Nst,Ust={};function Hst(t,e){Ust[t]=e}var Wst=function(){function t(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return t.prototype.translate=function(t){return t},t.prototype.change=function(t){(0,_ut.f0)(this.__cfg__,t),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var t=this;return(0,_ut.UI)(this.ticks,(function(e,n){return(0,_ut.Kn)(e)?e:{text:t.getText(e,n),tickValue:e,value:t.scale(e)}}))},t.prototype.getText=function(t,e){var n=this.formatter,r=n?n(t,e):t;return(0,_ut.UM)(r)||!(0,_ut.mf)(r.toString)?"":r.toString()},t.prototype.getConfig=function(t){return this.__cfg__[t]},t.prototype.init=function(){(0,_ut.f0)(this,this.__cfg__),this.setDomain(),(0,_ut.xb)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if((0,_ut.HD)(t)){var n=function(t){return Ust[t]}(t);if(!n)throw new Error("There is no method to to calculate ticks!");e=n(this)}else(0,_ut.mf)(t)&&(e=t(this));return e},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(t,e,n){return(0,_ut.hj)(t)?(t-e)/(n-e):NaN},t.prototype.calcValue=function(t,e,n){return e+t*(n-e)},t}(),Vst=Wst,Gst=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return(0,Aut.ZT)(e,t),e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var e=this.translateIndexMap.get(t);return void 0===e&&(e=(0,_ut.hj)(t)?t:NaN),e},e.prototype.scale=function(t){var e=this.translate(t),n=this.calcPercent(e,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var e=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),r=Math.round(e*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},e.prototype.getText=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=e;return(0,_ut.hj)(e)&&!this.values.includes(e)&&(i=this.values[i]),t.prototype.getText.apply(this,(0,Aut.pr)([i],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,_ut.UM)(this.getConfig("min"))&&(this.min=0),(0,_ut.UM)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(Vst),Xst=Gst,Yst=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,qst="\\d\\d?",$st="\\d\\d",Jst="[^\\s]+",Kst=/\[([^]*?)\]/gm;function Qst(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}var tlt=function(t){return function(e,n){var r=n[t].map((function(t){return t.toLowerCase()})),i=r.indexOf(e.toLowerCase());return i>-1?i:null}};function elt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var a=i[r];for(var o in a)t[o]=a[o]}return t}var nlt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rlt=["January","February","March","April","May","June","July","August","September","October","November","December"],ilt=Qst(rlt,3),alt={dayNamesShort:Qst(nlt,3),dayNames:nlt,monthNamesShort:ilt,monthNames:rlt,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},olt=elt({},alt),ult=function(t){return olt=elt(olt,t)},slt=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},llt=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},clt={D:function(t){return String(t.getDate())},DD:function(t){return llt(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return llt(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return llt(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return llt(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return llt(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return llt(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return llt(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return llt(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return llt(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return llt(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return llt(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+llt(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+llt(Math.floor(Math.abs(e)/60),2)+":"+llt(Math.abs(e)%60,2)}},flt=function(t){return+t-1},hlt=[null,qst],dlt=[null,Jst],plt=["isPm",Jst,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],glt=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?n:-n}return 0}],vlt={D:["day",qst],DD:["day",$st],Do:["day",qst+Jst,function(t){return parseInt(t,10)}],M:["month",qst,flt],MM:["month",$st,flt],YY:["year",$st,function(t){var e=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+t>68?e-1:e)+t)}],h:["hour",qst,void 0,"isPm"],hh:["hour",$st,void 0,"isPm"],H:["hour",qst],HH:["hour",$st],m:["minute",qst],mm:["minute",$st],s:["second",qst],ss:["second",$st],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond",$st,function(t){return 10*+t}],SSS:["millisecond","\\d{3}"],d:hlt,dd:hlt,ddd:dlt,dddd:dlt,MMM:["month",Jst,tlt("monthNamesShort")],MMMM:["month",Jst,tlt("monthNames")],a:plt,A:plt,ZZ:glt,Z:glt},mlt={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},ylt=function(t){return elt(mlt,t)},xlt=function(t,e,n){if(void 0===e&&(e=mlt.default),void 0===n&&(n={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");var r=[];e=(e=mlt[e]||e).replace(Kst,(function(t,e){return r.push(e),"@@@"}));var i=elt(elt({},olt),n);return(e=e.replace(Yst,(function(e){return clt[e](t,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function blt(t,e,n){if(void 0===n&&(n={}),"string"!=typeof e)throw new Error("Invalid format in fecha parse");if(e=mlt[e]||e,t.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],a=[],o=e.replace(Kst,(function(t,e){return a.push(slt(e)),"@@@"})),u={},s={};o=slt(o).replace(Yst,(function(t){var e=vlt[t],n=e[0],r=e[1],a=e[3];if(u[n])throw new Error("Invalid format. "+n+" specified twice in format");return u[n]=!0,a&&(s[a]=!0),i.push(e),"("+r+")"})),Object.keys(s).forEach((function(t){if(!u[t])throw new Error("Invalid format. "+t+" is required in specified format")})),o=o.replace(/@@@/g,(function(){return a.shift()}));var l=t.match(new RegExp(o,"i"));if(!l)return null;for(var c,f=elt(elt({},olt),n),h=1;h<l.length;h++){var d=i[h-1],p=d[0],g=d[2],v=g?g(l[h],f):+l[h];if(null==v)return null;r[p]=v}if(1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0),null==r.timezoneOffset){c=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond);for(var m=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(h=0,m.length);h<y;h++)if(u[m[h][0]]&&r[m[h][0]]!==c[m[h][1]]())return null}else if(c=new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond)),r.month>11||r.month<0||r.day>31||r.day<1||r.hour>23||r.hour<0||r.minute>59||r.minute<0||r.second>59||r.second<0)return null;return c}var wlt={format:xlt,parse:blt,defaultI18n:alt,setGlobalDateI18n:ult,setGlobalDateMasks:ylt};var Slt="format";function klt(t,e){return(b[Slt]||wlt[Slt])(t,e)}function Clt(t){return(0,_ut.HD)(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),(0,_ut.J_)(t)&&(t=t.getTime()),t}var Elt=1e3,Mlt=6e4,Olt=36e5,Alt=24*Olt,_lt=26784e5,Dlt=31536e6,Tlt=[["HH:mm:ss",Elt],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",Mlt],["HH:mm",6e5],["HH:mm",18e5],["HH",Olt],["HH",6*Olt],["HH",12*Olt],["YYYY-MM-DD",Alt],["YYYY-MM-DD",3456e5],["YYYY-WW",6048e5],["YYYY-MM",_lt],["YYYY-MM",107136e5],["YYYY-MM",160704e5],["YYYY",32832e6]];function Flt(t,e,n){var r=(e-t)/n,i=function(t){return function(e,n,r,i){for(var a=(0,_ut.UM)(r)?0:r,o=(0,_ut.UM)(i)?e.length:i;a<o;){var u=a+o>>>1;t(e[u])>n?o=u:a=u+1}return a}}((function(t){return t[1]}))(Tlt,r)-1,a=Tlt[i];return i<0?a=Tlt[0]:i>=Tlt.length&&(a=(0,_ut.Z$)(Tlt)),a}var Ilt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="timeCat",e}return(0,Aut.ZT)(e,t),e.prototype.translate=function(t){t=Clt(t);var e=this.values.indexOf(t);return-1===e&&(e=(0,_ut.hj)(t)&&t<this.values.length?t:NaN),e},e.prototype.getText=function(t,e){var n=this.translate(t);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,e):klt(r,this.mask)}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var e=this.values;(0,_ut.S6)(e,(function(t,n){e[n]=Clt(t)})),e.sort((function(t,e){return t-e})),t.prototype.setDomain.call(this)},e}(Xst),Plt=Ilt,jlt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return(0,Aut.ZT)(e,t),e.prototype.scale=function(t){if((0,_ut.UM)(t))return NaN;var e=this.rangeMin(),n=this.rangeMax();return this.max===this.min?e:e+this.getScalePercent(t)*(n-e)},e.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,n=(0,_ut.YM)(e),r=(0,_ut.Z$)(e);n<this.min&&(this.min=n),r>this.max&&(this.max=r),(0,_ut.UM)(this.minLimit)||(this.min=n),(0,_ut.UM)(this.maxLimit)||(this.max=r)},e.prototype.setDomain=function(){var t=(0,_ut.rx)(this.values),e=t.min,n=t.max;(0,_ut.UM)(this.min)&&(this.min=e),(0,_ut.UM)(this.max)&&(this.max=n),this.min>this.max&&(this.min=e,this.max=n)},e.prototype.calculateTicks=function(){var e=this,n=t.prototype.calculateTicks.call(this);return this.nice||(n=(0,_ut.hX)(n,(function(t){return t>=e.min&&t<=e.max}))),n},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;return(t-n)/(e-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(Vst),Blt=jlt,Llt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return(0,Aut.ZT)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t);return this.min+e*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(Blt),Rlt=Llt;function Zlt(t,e){var n=Math.E;return e>=0?Math.pow(n,Math.log(e)/t):-1*Math.pow(n,Math.log(-e)/t)}function Nlt(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function zlt(t,e,n){(0,_ut.UM)(n)&&(n=Math.max.apply(null,t));var r=n;return(0,_ut.S6)(t,(function(t){t>0&&t<r&&(r=t)})),r===n&&(r=n/e),r>1&&(r=1),r}var Ult=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e}return(0,Aut.ZT)(e,t),e.prototype.invert=function(t){var e,n=this.base,r=Nlt(n,this.max),i=this.rangeMin(),a=this.rangeMax()-i,o=this.positiveMin;if(o){if(0===t)return 0;var u=1/(r-(e=Nlt(n,o/n)))*a;if(t<u)return t/u*o}else e=Nlt(n,this.min);var s=(t-i)/a*(r-e)+e;return Math.pow(n,s)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=zlt(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;if(t<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),t<i?t/i/(Nlt(r,e)-Nlt(r,n)):(Nlt(r,t)-Nlt(r,n))/(Nlt(r,e)-Nlt(r,n))},e}(Blt),Hlt=Ult,Wlt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pow",e}return(0,Aut.ZT)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t),n=this.exponent,r=Zlt(n,this.max),i=Zlt(n,this.min),a=e*(r-i)+i,o=a>=0?1:-1;return Math.pow(a,n)*o},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;var r=this.exponent;return(Zlt(r,t)-Zlt(r,n))/(Zlt(r,e)-Zlt(r,n))},e}(Blt),Vlt=Wlt,Glt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="time",e}return(0,Aut.ZT)(e,t),e.prototype.getText=function(t,e){var n=this.translate(t),r=this.formatter;return r?r(n,e):klt(n,this.mask)},e.prototype.scale=function(e){var n=e;return((0,_ut.HD)(n)||(0,_ut.J_)(n))&&(n=this.translate(n)),t.prototype.scale.call(this,n)},e.prototype.translate=function(t){return Clt(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,e=this.getConfig("min"),n=this.getConfig("max");if((0,_ut.UM)(e)&&(0,_ut.hj)(e)||(this.min=this.translate(this.min)),(0,_ut.UM)(n)&&(0,_ut.hj)(n)||(this.max=this.translate(this.max)),t&&t.length){var r=[],i=1/0,a=i,o=0;(0,_ut.S6)(t,(function(t){var e=Clt(t);if(isNaN(e))throw new TypeError("Invalid Time: "+t+" in time scale!");i>e?(a=i,i=e):a>e&&(a=e),o<e&&(o=e),r.push(e)})),t.length>1&&(this.minTickInterval=a-i),(0,_ut.UM)(e)&&(this.min=i),(0,_ut.UM)(n)&&(this.max=o)}},e}(Rlt),Xlt=Glt,Ylt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantize",e}return(0,Aut.ZT)(e,t),e.prototype.invert=function(t){var e=this.ticks,n=e.length,r=this.getInvertPercent(t),i=Math.floor(r*(n-1));if(i>=n-1)return(0,_ut.Z$)(e);if(i<0)return(0,_ut.YM)(e);var a=e[i],o=i/(n-1);return a+(r-o)/((i+1)/(n-1)-o)*(e[i+1]-a)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||((0,_ut.Z$)(e)!==this.max&&e.push(this.max),(0,_ut.YM)(e)!==this.min&&e.unshift(this.min)),e},e.prototype.getScalePercent=function(t){var e=this.ticks;if(t<(0,_ut.YM)(e))return 0;if(t>(0,_ut.Z$)(e))return 1;var n=0;return(0,_ut.S6)(e,(function(e,r){if(!(t>=e))return!1;n=r})),n/(e.length-1)},e}(Blt),qlt=Ylt,$lt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantile",e}return(0,Aut.ZT)(e,t),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(qlt),Jlt=$lt,Klt={};function Qlt(t){return Klt[t]}function tct(t,e){if(Qlt(t))throw new Error("type '"+t+"' existed.");Klt[t]=e}var ect=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return(0,Aut.ZT)(e,t),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,_ut.hj)(t)?t:this.range[0]},e.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},e}(Vst),nct=ect;function rct(t){var e=t.values,n=t.tickInterval,r=t.tickCount,i=t.showLast;if((0,_ut.hj)(n)){var a=(0,_ut.hX)(e,(function(t,e){return e%n==0})),o=(0,_ut.Z$)(e);return i&&(0,_ut.Z$)(a)!==o&&a.push(o),a}var u=e.length,s=t.min,l=t.max;if((0,_ut.UM)(s)&&(s=0),(0,_ut.UM)(l)&&(l=e.length-1),!(0,_ut.hj)(r)||r>=u)return e.slice(s,l+1);if(r<=0||l<=0)return[];for(var c=1===r?u:Math.floor(u/(r-1)),f=[],h=s,d=0;d<r&&!(h>=l);d++)h=Math.min(s+d*c,l),d===r-1&&i?f.push(e[l]):f.push(e[h]);return f}var ict=Math.sqrt(50),act=Math.sqrt(10),oct=Math.sqrt(2),uct=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var e,n;void 0===t&&(t=5);var r,i=this._domain.slice(),a=0,o=this._domain.length-1,u=this._domain[a],s=this._domain[o];return s<u&&(u=(e=[s,u])[0],s=e[1],a=(n=[o,a])[0],o=n[1]),(r=sct(u,s,t))>0?r=sct(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,t):r<0&&(r=sct(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,t)),r>0?(i[a]=Math.floor(u/r)*r,i[o]=Math.ceil(s/r)*r,this.domain(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[o]=Math.floor(s*r)/r,this.domain(i)),this},t.prototype.ticks=function(t){return void 0===t&&(t=5),function(t,e,n){var r,i,a,o,u=-1;if(e=+e,n=+n,(t=+t)===e&&n>0)return[t];(r=e<t)&&(i=t,t=e,e=i);if(0===(o=sct(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++u<i;)a[u]=(t+u)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++u<i;)a[u]=(t-u)/o;r&&a.reverse();return a}(this._domain[0],this._domain[this._domain.length-1],t||5)},t}();function sct(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=ict?10:a>=act?5:a>=oct?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=ict?10:a>=act?5:a>=oct?2:1)}function lct(t,e,n){return("ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e))*e}function cct(t,e,n){var r=lct(t,n,"floor"),i=lct(e,n,"ceil");r=(0,_ut.ri)(r,n),i=(0,_ut.ri)(i,n);for(var a=[],o=Math.max((i-r)/(Math.pow(2,12)-1),n),u=r;u<=i;u+=o){var s=(0,_ut.ri)(u,o);a.push(s)}return{min:r,max:i,ticks:a}}function fct(t,e,n){var r,i=t.minLimit,a=t.maxLimit,o=t.min,u=t.max,s=t.tickCount,l=void 0===s?5:s,c=(0,_ut.UM)(i)?(0,_ut.UM)(e)?o:e:i,f=(0,_ut.UM)(a)?(0,_ut.UM)(n)?u:n:a;if(c>f&&(f=(r=[c,f])[0],c=r[1]),l<=2)return[c,f];for(var h=(f-c)/(l-1),d=[],p=0;p<l;p++)d.push(c+h*p);return d}function hct(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var dct=[1,5,2,2.5,4,3],pct=100*Number.EPSILON;function gct(t,e,n,r,i,a){var o=(0,_ut.dp)(e),u=(0,_ut.cq)(e,t),s=0,l=function(t,e){return(t%e+e)%e}(r,a);return(l<pct||a-l<pct)&&r<=0&&i>=0&&(s=1),1-u/(o-1)-n+s}function vct(t,e,n){var r=(0,_ut.dp)(e);return 1-(0,_ut.cq)(e,t)/(r-1)-n+1}function mct(t,e,n,r,i,a){var o=(t-1)/(a-i),u=(e-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(o/u,u/o)}function yct(t,e){return t>=e?2-(t-1)/(e-1):1}function xct(t,e,n,r){var i=e-t;return 1-.5*(Math.pow(e-r,2)+Math.pow(t-n,2))/Math.pow(.1*i,2)}function bct(t,e,n){var r=e-t;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function wct(t,e,n,r,i,a){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=dct),void 0===a&&(a=[.25,.2,.5,.05]);var o=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||"number"!=typeof t||"number"!=typeof e||!o)return{min:0,max:0,ticks:[]};if(e-t<1e-15||1===o)return{min:t,max:e,ticks:[t]};if(e-t>1e148){var u=(e-t)/(w=n||5);return{min:t,max:e,ticks:Array(w).fill(null).map((function(e,n){return hct(t+u*n)}))}}for(var s={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var c=0;c<i.length;c+=1){var f=i[c],h=vct(f,i,l);if(a[0]*h+a[1]+a[2]+a[3]<s.score){l=1/0;break}for(var d=2;d<1/0;){var p=yct(d,o);if(a[0]*h+a[1]+a[2]*p+a[3]<s.score)break;for(var g=(e-t)/(d+1)/l/f,v=Math.ceil(Math.log10(g));v<1/0;){var m=l*f*Math.pow(10,v),y=bct(t,e,m*(d-1));if(a[0]*h+a[1]*y+a[2]*p+a[3]<s.score)break;var x=Math.floor(e/m)*l-(d-1)*l,b=Math.ceil(t/m)*l;if(x<=b)for(var w=b-x,S=0;S<=w;S+=1){var k=(x+S)*(m/l),C=k+m*(d-1),E=m,M=gct(f,i,l,k,C,E),O=xct(t,e,k,C),A=mct(d,o,t,e,k,C),_=a[0]*M+a[1]*O+a[2]*A+1*a[3];_>s.score&&(!r||k<=t&&C>=e)&&(s.lmin=k,s.lmax=C,s.lstep=E,s.score=_)}v+=1}d+=1}}l+=1}var D=hct(s.lmax),T=hct(s.lmin),F=hct(s.lstep),I=Math.floor(function(t){return Math.round(1e12*t)/1e12}((D-T)/F))+1,P=new Array(I);P[0]=hct(T);for(c=1;c<I;c++)P[c]=hct(P[c-1]+F);return{min:Math.min(t,(0,_ut.YM)(P)),max:Math.max(e,(0,_ut.Z$)(P)),ticks:P}}function Sct(t,e,n){if(void 0===n&&(n=5),t===e)return{max:e,min:t,ticks:[t]};var r=n<0?0:Math.round(n);if(0===r)return{max:e,min:t,ticks:[]};var i=(e-t)/r,a=Math.pow(10,Math.floor(Math.log10(i))),o=a;2*a-i<1.5*(i-o)&&5*a-i<2.75*(i-(o=2*a))&&10*a-i<1.5*(i-(o=5*a))&&(o=10*a);for(var u=Math.ceil(e/o),s=Math.floor(t/o),l=Math.max(u*o,e),c=Math.min(s*o,t),f=Math.floor((l-c)/o)+1,h=new Array(f),d=0;d<f;d++)h[d]=hct(c+d*o);return{min:c,max:l,ticks:h}}function kct(t,e){var n=t.length*e;return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function Cct(t){return new Date(t).getFullYear()}function Ect(t){return new Date(t,0,1).getTime()}function Mct(t){return new Date(t).getMonth()}function Oct(t,e){return new Date(t,e,1).getTime()}Hst("cat",rct),Hst("time-cat",(function(t){return rct((0,Aut.pi)({showLast:!0},t))})),Hst("wilkinson-extended",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.nice,a=t.tickInterval,o=t.minLimit,u=t.maxLimit,s=wct(e,n,r,i).ticks;return(0,_ut.UM)(o)&&(0,_ut.UM)(u)?a?cct(e,n,a).ticks:s:fct(t,(0,_ut.YM)(s),(0,_ut.Z$)(s))})),Hst("r-pretty",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.tickInterval,a=t.minLimit,o=t.maxLimit,u=Sct(e,n,r).ticks;return(0,_ut.UM)(a)&&(0,_ut.UM)(o)?i?cct(e,n,i).ticks:u:fct(t,(0,_ut.YM)(u),(0,_ut.Z$)(u))})),Hst("time",(function(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickInterval,a=t.tickCount;if(i)a=Math.ceil((n-e)/i);else{var o=(n-e)/(i=Flt(e,n,a)[1])/a;o>1&&(i*=Math.ceil(o)),r&&i<r&&(i=r)}i=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),i);for(var u=[],s=e;s<n+i;s+=i)u.push(s);return u})),Hst("time-pretty",(function(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickCount,a=t.tickInterval,o=[];a||(a=(n-e)/i,r&&a<r&&(a=r)),a=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),a);var u=Cct(e);if(a>Dlt)for(var s=Cct(n),l=Math.ceil(a/Dlt),c=u;c<=s+l;c+=l)o.push(Ect(c));else if(a>_lt){var f=Math.ceil(a/_lt),h=Mct(e),d=function(t,e){var n=Cct(t),r=Cct(e),i=Mct(t);return 12*(r-n)+(Mct(e)-i)%12}(e,n);for(c=0;c<=d+f;c+=f)o.push(Oct(u,c+h))}else if(a>Alt){var p=(x=new Date(e)).getFullYear(),g=x.getMonth(),v=x.getDate(),m=Math.ceil(a/Alt),y=function(t,e){return Math.ceil((e-t)/Alt)}(e,n);for(c=0;c<y+m;c+=m)o.push(new Date(p,g,v+c).getTime())}else if(a>Olt){p=(x=new Date(e)).getFullYear(),g=x.getMonth(),m=x.getDate();var x,b=x.getHours(),w=Math.ceil(a/Olt),S=function(t,e){return Math.ceil((e-t)/Olt)}(e,n);for(c=0;c<=S+w;c+=w)o.push(new Date(p,g,m,b+c).getTime())}else if(a>Mlt){var k=function(t,e){return Math.ceil((e-t)/6e4)}(e,n),C=Math.ceil(a/Mlt);for(c=0;c<=k+C;c+=C)o.push(e+c*Mlt)}else{var E=a;E<Elt&&(E=Elt);var M=Math.floor(e/Elt)*Elt,O=Math.ceil((n-e)/Elt),A=Math.ceil(E/Elt);for(c=0;c<O+A;c+=A)o.push(M+c*Elt)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o})),Hst("log",(function(t){var e,n=t.base,r=t.tickCount,i=t.min,a=t.max,o=t.values,u=Nlt(n,a);if(i>0)e=Math.floor(Nlt(n,i));else{var s=zlt(o,n,a);e=Math.floor(Nlt(n,s))}for(var l=u-e,c=Math.ceil(l/r),f=[],h=e;h<u+c;h+=c)f.push(Math.pow(n,h));return i<=0&&f.unshift(0),f})),Hst("pow",(function(t){var e=t.exponent,n=t.tickCount,r=Math.ceil(Zlt(e,t.max));return Sct(Math.floor(Zlt(e,t.min)),r,n).ticks.map((function(t){var n=t>=0?1:-1;return Math.pow(t,e)*n}))})),Hst("quantile",(function(t){var e=t.tickCount,n=t.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(t,e){return t-e})),i=[],a=0;a<e;a++){var o=a/(e-1);i.push(kct(r,o))}return i})),Hst("d3-linear",(function(t){var e=t.min,n=t.max,r=t.tickInterval,i=t.minLimit,a=t.maxLimit,o=function(t){var e=t.min,n=t.max,r=t.nice,i=t.tickCount,a=new uct;return a.domain([e,n]),r&&a.nice(i),a.ticks(i)}(t);return(0,_ut.UM)(i)&&(0,_ut.UM)(a)?r?cct(e,n,r).ticks:o:fct(t,(0,_ut.YM)(o),(0,_ut.Z$)(o))})),tct("cat",Xst),tct("category",Xst),tct("identity",nct),tct("linear",Rlt),tct("log",Hlt),tct("pow",Vlt),tct("time",Xlt),tct("timeCat",Plt),tct("quantize",qlt),tct("quantile",Jlt);var Act={},_ct=function(t){return Act[t.toLowerCase()]},Dct=function(t,e){if(_ct(t))throw new Error("Attribute type '"+t+"' existed.");Act[t.toLowerCase()]=e};Dct("Color",Ist),Dct("Opacity",jst),Dct("Position",Lst),Dct("Shape",Zst),Dct("Size",zst);var Tct=n(30739);function Fct(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}!function(){var t,e=(t=new Tct.WT(3),Tct.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t)}();var Ict=n(20593),Pct=n(12579),jct=function(){function t(t){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var e=t.start,n=t.end,r=t.matrix,i=void 0===r?[1,0,0,0,1,0,0,0,1]:r,a=t.isTransposed,o=void 0!==a&&a;this.start=e,this.end=n,this.matrix=i,this.originalMatrix=(0,Aut.ev)([],i),this.isTransposed=o}return t.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},t.prototype.update=function(t){(0,_ut.f0)(this,t),this.initial()},t.prototype.convertDim=function(t,e){var n,r=this[e],i=r.start,a=r.end;return this.isReflect(e)&&(i=(n=[a,i])[0],a=n[1]),i+t*(a-i)},t.prototype.invertDim=function(t,e){var n,r=this[e],i=r.start,a=r.end;return this.isReflect(e)&&(i=(n=[a,i])[0],a=n[1]),(t-i)/(a-i)},t.prototype.applyMatrix=function(t,e,n){void 0===n&&(n=0);var r=[t,e,n];return Fct(r,r,this.matrix),r},t.prototype.invertMatrix=function(t,e,n){void 0===n&&(n=0);var r=this.matrix,i=Ict.U_([0,0,0,0,0,0,0,0,0],r),a=[t,e,n];return i&&Fct(a,a,i),a},t.prototype.convert=function(t){var e=this.convertPoint(t),n=e.x,r=e.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},t.prototype.invert=function(t){var e=this.invertMatrix(t.x,t.y,1);return this.invertPoint({x:e[0],y:e[1]})},t.prototype.rotate=function(t){var e=this.matrix,n=this.center;return Pct.m$(e,e,[-n.x,-n.y]),Pct.zu(e,e,t),Pct.m$(e,e,[n.x,n.y]),this},t.prototype.reflect=function(t){return"x"===t?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},t.prototype.scale=function(t,e){var n=this.matrix,r=this.center;return Pct.m$(n,n,[-r.x,-r.y]),Pct.lh(n,n,[t,e]),Pct.m$(n,n,[r.x,r.y]),this},t.prototype.translate=function(t,e){var n=this.matrix;return Pct.m$(n,n,[t,e]),this},t.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},t.prototype.getCenter=function(){return this.center},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRadius=function(){return this.radius},t.prototype.isReflect=function(t){return"x"===t?this.isReflectX:this.isReflectY},t.prototype.resetMatrix=function(t){this.matrix=t||(0,Aut.ev)([],this.originalMatrix)},t}(),Bct=jct,Lct=function(t){function e(e){var n=t.call(this,e)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return(0,Aut.ZT)(e,t),e.prototype.initial=function(){t.prototype.initial.call(this);var e=this.start,n=this.end;this.x={start:e.x,end:n.x},this.y={start:e.y,end:n.y}},e.prototype.convertPoint=function(t){var e,n=t.x,r=t.y;return this.isTransposed&&(n=(e=[r,n])[0],r=e[1]),{x:this.convertDim(n,"x"),y:this.convertDim(r,"y")}},e.prototype.invertPoint=function(t){var e,n=this.invertDim(t.x,"x"),r=this.invertDim(t.y,"y");return this.isTransposed&&(n=(e=[r,n])[0],r=e[1]),{x:n,y:r}},e}(Bct),Rct=Lct,Zct=n(17647),Nct=function(t){function e(e){var n=t.call(this,e)||this;n.isHelix=!0,n.type="helix";var r=e.startAngle,i=void 0===r?1.25*Math.PI:r,a=e.endAngle,o=void 0===a?7.25*Math.PI:a,u=e.innerRadius,s=void 0===u?0:u,l=e.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=s,n.radius=l,n.initial(),n}return(0,Aut.ZT)(e,t),e.prototype.initial=function(){t.prototype.initial.call(this);var e=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n*=this.radius),this.d=Math.floor(n*(1-this.innerRadius)/e),this.a=this.d/(2*Math.PI),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+.99*this.d}},e.prototype.convertPoint=function(t){var e,n=t.x,r=t.y;this.isTransposed&&(n=(e=[r,n])[0],r=e[1]);var i=this.convertDim(n,"x"),a=this.a*i,o=this.convertDim(r,"y");return{x:this.center.x+Math.cos(i)*(a+o),y:this.center.y+Math.sin(i)*(a+o)}},e.prototype.invertPoint=function(t){var e,n=this.d+this.y.start,r=Zct.$X([0,0],[t.x,t.y],[this.center.x,this.center.y]),i=Pct.Dg(r,[1,0],!0),a=i*this.a;Zct.kE(r)<a&&(a=Zct.kE(r)),i=2*Math.floor((Zct.kE(r)-a)/n)*Math.PI+i;var o=this.a*i,u=Zct.kE(r)-o;u=(0,_ut.vQ)(u,0)?0:u;var s=this.invertDim(i,"x"),l=this.invertDim(u,"y");return s=(0,_ut.vQ)(s,0)?0:s,l=(0,_ut.vQ)(l,0)?0:l,this.isTransposed&&(s=(e=[l,s])[0],l=e[1]),{x:s,y:l}},e}(Bct),zct=Nct,Uct=function(t){function e(e){var n=t.call(this,e)||this;n.isPolar=!0,n.type="polar";var r=e.startAngle,i=void 0===r?-Math.PI/2:r,a=e.endAngle,o=void 0===a?3*Math.PI/2:a,u=e.innerRadius,s=void 0===u?0:u,l=e.radius;return n.startAngle=i,n.endAngle=o,n.innerRadius=s,n.radius=l,n.initial(),n}return(0,Aut.ZT)(e,t),e.prototype.initial=function(){for(t.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=2*Math.PI;var e,n=this.getOneBox(),r=n.maxX-n.minX,i=n.maxY-n.minY,a=Math.abs(n.minX)/r,o=Math.abs(n.minY)/i;this.height/i>this.width/r?(e=this.width/r,this.circleCenter={x:this.center.x-(.5-a)*this.width,y:this.center.y-(.5-o)*e*i}):(e=this.height/i,this.circleCenter={x:this.center.x-(.5-a)*e*r,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=e*this.radius:(this.radius<=0||this.radius>e)&&(this.polarRadius=e):this.polarRadius=e,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},e.prototype.getRadius=function(){return this.polarRadius},e.prototype.convertPoint=function(t){var e,n=this.getCenter(),r=t.x,i=t.y;return this.isTransposed&&(r=(e=[i,r])[0],i=e[1]),r=this.convertDim(r,"x"),i=this.convertDim(i,"y"),{x:n.x+Math.cos(r)*i,y:n.y+Math.sin(r)*i}},e.prototype.invertPoint=function(t){var e,n=this.getCenter(),r=[t.x-n.x,t.y-n.y],i=this.startAngle,a=this.endAngle;this.isReflect("x")&&(i=(e=[a,i])[0],a=e[1]);var o=[1,0,0,0,1,0,0,0,1];Pct.zu(o,o,i);var u=[1,0,0];Fct(u,u,o);var s=[u[0],u[1]],l=Pct.Dg(s,r,a<i);(0,_ut.vQ)(l,2*Math.PI)&&(l=0);var c=Zct.kE(r),f=l/(a-i);f=a-i>0?f:-f;var h=this.invertDim(c,"y"),d={x:0,y:0};return d.x=this.isTransposed?h:f,d.y=this.isTransposed?f:h,d},e.prototype.getCenter=function(){return this.circleCenter},e.prototype.getOneBox=function(){var t=this.startAngle,e=this.endAngle;if(Math.abs(e-t)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(t),Math.cos(e)],r=[0,Math.sin(t),Math.sin(e)],i=Math.min(t,e);i<Math.max(t,e);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}},e}(Bct),Hct=Uct,Wct={},Vct=function(t,e){Wct[t.toLowerCase()]=e};function Gct(t,e,n){var r=new Kut.Event(e,n);r.target=t,r.propagationPath.push(t),t.emitDelegation(e,r);for(var i=t.getParent();i;)i.emitDelegation(e,r),r.propagationPath.push(i),i=i.getParent()}Vct("rect",Rct),Vct("cartesian",Rct),Vct("polar",Hct),Vct("helix",zct);var Xct=[1,0,0,0,1,0,0,0,1];function Yct(t,e,n){return void 0===n&&(n=Xct),e?Pct.vs(n,[["t",-t.x,-t.y],["r",e],["t",t.x,t.y]]):null}function qct(t,e){return t.x||t.y?Pct.vs(e||Xct,[["t",t.x,t.y]]):null}function $ct(t,e){var n=[0,0];return Zct.kK(n,e,t),n}function Jct(t,e,n,r){if(e){var i=Yct({x:n,y:r},e,t.getMatrix());t.setMatrix(i)}}function Kct(t,e,n){var r=qct({x:e,y:n});t.attr("matrix",r)}function Qct(t){var e=0,n=0,r=0,i=0;return(0,_ut.hj)(t)?e=n=r=i=t:(0,_ut.kJ)(t)&&(e=t[0],r=(0,_ut.UM)(t[1])?t[0]:t[1],i=(0,_ut.UM)(t[2])?t[0]:t[2],n=(0,_ut.UM)(t[3])?r:t[3]),[e,r,i,n]}function tft(t){for(var e=t.childNodes,n=e.length-1;n>=0;n--)t.removeChild(e[n])}function eft(t){var e=t.start,n=t.end,r=Math.min(e.x,n.x),i=Math.min(e.y,n.y),a=Math.max(e.x,n.x),o=Math.max(e.y,n.y);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}function nft(t,e,n,r){var i=t+n,a=e+r;return{x:t,y:e,width:n,height:r,minX:t,minY:e,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function rft(t,e,n){return(1-n)*t+e*n}function ift(t,e,n){return{x:t.x+Math.cos(n)*e,y:t.y+Math.sin(n)*e}}var aft=function(t,e,n){return void 0===n&&(n=Math.pow(Number.EPSILON,.5)),[t,e].includes(1/0)?Math.abs(t)===Math.abs(e):Math.abs(t-e)<n};function oft(t){var e,n,r,i,a,o=t.getClip(),u=o&&o.getBBox();if(t.isGroup()){var s=1/0,l=-1/0,c=1/0,f=-1/0,h=t.getChildren();h.length>0?(0,_ut.S6)(h,(function(t){if(t.get("visible")){if(t.isGroup()&&0===t.get("children").length)return!0;var e=oft(t),n=t.applyToMatrix([e.minX,e.minY,1]),r=t.applyToMatrix([e.minX,e.maxY,1]),i=t.applyToMatrix([e.maxX,e.minY,1]),a=t.applyToMatrix([e.maxX,e.maxY,1]),o=Math.min(n[0],r[0],i[0],a[0]),u=Math.max(n[0],r[0],i[0],a[0]),h=Math.min(n[1],r[1],i[1],a[1]),d=Math.max(n[1],r[1],i[1],a[1]);o<s&&(s=o),u>l&&(l=u),h<c&&(c=h),d>f&&(f=d)}})):(s=0,l=0,c=0,f=0),e=nft(s,c,l-s,f-c)}else e=t.getBBox();return u?(n=e,r=u,i=Math.max(n.minX,r.minX),a=Math.max(n.minY,r.minY),nft(i,a,Math.min(n.maxX,r.maxX)-i,Math.min(n.maxY,r.maxY)-a)):e}function uft(t){return t+"px"}function sft(t,e,n,r){var i,a,o,u,s=r/(i=t,o=(a=e).x-i.x,u=a.y-i.y,Math.sqrt(o*o+u*u)),l=0;return"start"===n?l=0-s:"end"===n&&(l=1+s),{x:rft(t.x,e.x,l),y:rft(t.y,e.y,l)}}var lft={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},cft=function(t){function e(e){var n=t.call(this,e)||this;return n.initCfg(),n}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},e.prototype.clear=function(){},e.prototype.update=function(t){var e=this,n=this.get("defaultCfg")||{};(0,_ut.S6)(t,(function(t,r){var i=t;e.get(r)!==t&&((0,_ut.Kn)(t)&&n[r]&&(i=(0,_ut.b$)({},n[r],t)),e.set(r,i))})),this.updateInner(t),this.afterUpdate(t)},e.prototype.updateInner=function(t){},e.prototype.afterUpdate=function(t){(0,_ut.wH)(t,"visible")&&(t.visible?this.show():this.hide()),(0,_ut.wH)(t,"capture")&&this.setCapture(t.capture)},e.prototype.getLayoutBBox=function(){return this.getBBox()},e.prototype.getLocationType=function(){return this.get("locationType")},e.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},e.prototype.setOffset=function(t,e){this.update({offsetX:t,offsetY:e})},e.prototype.setLocation=function(t){var e=(0,Aut.pi)({},t);this.update(e)},e.prototype.getLocation=function(){var t=this,e={},n=this.get("locationType"),r=lft[n];return(0,_ut.S6)(r,(function(n){e[n]=t.get(n)})),e},e.prototype.isList=function(){return!1},e.prototype.isSlider=function(){return!1},e.prototype.init=function(){},e.prototype.initCfg=function(){var t=this,e=this.get("defaultCfg");(0,_ut.S6)(e,(function(e,n){var r=t.get(n);if((0,_ut.Kn)(r)){var i=(0,_ut.b$)({},e,r);t.set(n,i)}}))},e}(Kut.Base),fft=cft,hft="update_status",dft=["visible","tip","delegateObject"],pft=["container","group","shapesMap","isRegister","isUpdating","destroyed"],gft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},e.prototype.remove=function(){this.clear(),this.get("group").remove()},e.prototype.clear=function(){this.get("group").clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},e.prototype.getChildComponentById=function(t){var e=this.getElementById(t);return e&&e.get("component")},e.prototype.getElementById=function(t){return this.get("shapesMap")[t]},e.prototype.getElementByLocalId=function(t){var e=this.getElementId(t);return this.getElementById(e)},e.prototype.getElementsByName=function(t){var e=[];return(0,_ut.S6)(this.get("shapesMap"),(function(n){n.get("name")===t&&e.push(n)})),e},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},e.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var e=this.get("group");this.updateElements(t,e),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},e.prototype.show=function(){this.get("group").show(),this.set("visible",!0)},e.prototype.hide=function(){this.get("group").hide(),this.set("visible",!1)},e.prototype.setCapture=function(t){this.get("group").set("capture",t),this.set("capture",t)},e.prototype.destroy=function(){this.removeEvent(),this.remove(),t.prototype.destroy.call(this)},e.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},e.prototype.getLayoutBBox=function(){var t=this.get("group"),e=this.getInnerLayoutBBox(),n=t.getTotalMatrix();return n&&(e=function(t,e){var n=$ct(t,[e.minX,e.minY]),r=$ct(t,[e.maxX,e.minY]),i=$ct(t,[e.minX,e.maxY]),a=$ct(t,[e.maxX,e.maxY]),o=Math.min(n[0],r[0],i[0],a[0]),u=Math.max(n[0],r[0],i[0],a[0]),s=Math.min(n[1],r[1],i[1],a[1]),l=Math.max(n[1],r[1],i[1],a[1]);return{x:o,y:s,minX:o,minY:s,maxX:u,maxY:l,width:u-o,height:l-s}}(n,e)),e},e.prototype.on=function(t,e,n){return this.get("group").on(t,e,n),this},e.prototype.off=function(t,e){var n=this.get("group");return n&&n.off(t,e),this},e.prototype.emit=function(t,e){this.get("group").emit(t,e)},e.prototype.init=function(){t.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},e.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},e.prototype.delegateEmit=function(t,e){var n=this.get("group");e.target=n,n.emit(t,e),Gct(n,t,e)},e.prototype.createOffScreenGroup=function(){return new(this.get("group").getGroupBase())({delegateObject:this.getDelegateObject()})},e.prototype.applyOffset=function(){var t=this.get("offsetX"),e=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:e})},e.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},e.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",oft(t)),t},e.prototype.addGroup=function(t,e){this.appendDelegateObject(t,e);var n=t.addGroup(e);return this.get("isRegister")&&this.registerElement(n),n},e.prototype.addShape=function(t,e){this.appendDelegateObject(t,e);var n=t.addShape(e);return this.get("isRegister")&&this.registerElement(n),n},e.prototype.addComponent=function(t,e){var n=e.id,r=e.component,i=(0,Aut._T)(e,["id","component"]),a=new r((0,Aut.pi)((0,Aut.pi)({},i),{id:n,container:t,updateAutoRender:this.get("updateAutoRender")}));return a.init(),a.render(),this.get("isRegister")&&this.registerElement(a.get("group")),a},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){this.get("group").off()},e.prototype.getElementId=function(t){return this.get("id")+"-"+this.get("name")+"-"+t},e.prototype.registerElement=function(t){var e=t.get("id");this.get("shapesMap")[e]=t},e.prototype.unregisterElement=function(t){var e=t.get("id");delete this.get("shapesMap")[e]},e.prototype.moveElementTo=function(t,e){var n=qct(e);t.attr("matrix",n)},e.prototype.addAnimation=function(t,e,n){var r=e.attr("opacity");(0,_ut.UM)(r)&&(r=1),e.attr("opacity",0),e.animate({opacity:r},n)},e.prototype.removeAnimation=function(t,e,n){e.animate({opacity:0},n)},e.prototype.updateAnimation=function(t,e,n,r){e.animate(n,r)},e.prototype.updateElements=function(t,e){var n,r=this,i=this.get("animate"),a=this.get("animateOption"),o=t.getChildren().slice(0);(0,_ut.S6)(o,(function(t){var o=t.get("id"),u=r.getElementById(o),s=t.get("name");if(u)if(t.get("isComponent")){var l=t.get("component"),c=u.get("component"),f=(0,_ut.ei)(l.cfg,(0,_ut.e5)((0,_ut.XP)(l.cfg),pft));c.update(f),u.set(hft,"update")}else{var h=r.getReplaceAttrs(u,t);i&&a.update?r.updateAnimation(s,u,h,a.update):u.attr(h),t.isGroup()&&r.updateElements(t,u),(0,_ut.S6)(dft,(function(e){u.set(e,t.get(e))})),function(t,e){if(t.getClip()||e.getClip()){var n=e.getClip();if(n){var r={type:n.get("type"),attrs:n.attr()};t.setClip(r)}else t.setClip(null)}}(u,t),n=u,u.set(hft,"update")}else{e.add(t);var d=e.getChildren();if(d.splice(d.length-1,1),n){var p=d.indexOf(n);d.splice(p+1,0,t)}else d.unshift(t);if(r.registerElement(t),t.set(hft,"add"),t.get("isComponent"))(l=t.get("component")).set("container",e);else t.isGroup()&&r.registerNewGroup(t);if(n=t,i){var g=r.get("isInit")?a.appear:a.enter;g&&r.addAnimation(s,t,g)}}}))},e.prototype.clearUpdateStatus=function(t){var e=t.getChildren();(0,_ut.S6)(e,(function(t){t.set(hft,null)}))},e.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},e.prototype.getDelegateObject=function(){var t;return(t={})[this.get("name")]=this,t.component=this,t},e.prototype.appendDelegateObject=function(t,e){var n=t.get("delegateObject");e.delegateObject||(e.delegateObject={}),(0,_ut.CD)(e.delegateObject,n)},e.prototype.getReplaceAttrs=function(t,e){var n=t.attr(),r=e.attr();return(0,_ut.S6)(n,(function(t,e){void 0===r[e]&&(r[e]=void 0)})),r},e.prototype.registerNewGroup=function(t){var e=this,n=t.getChildren();(0,_ut.S6)(n,(function(t){e.registerElement(t),t.set(hft,"add"),t.isGroup()&&e.registerNewGroup(t)}))},e.prototype.deleteElements=function(){var t=this,e=this.get("shapesMap"),n=[];(0,_ut.S6)(e,(function(t,e){!t.get(hft)||t.destroyed?n.push([e,t]):t.set(hft,null)}));var r=this.get("animate"),i=this.get("animateOption");(0,_ut.S6)(n,(function(n){var a=n[0],o=n[1];if(!o.destroyed){var u=o.get("name");if(r&&i.leave){var s=(0,_ut.CD)({callback:function(){t.removeElement(o)}},i.leave);t.removeAnimation(u,o,s)}else t.removeElement(o)}delete e[a]}))},e.prototype.removeElement=function(t){if(t.get("isGroup")){var e=t.get("component");e&&e.destroy()}t.remove()},e}(fft),vft=gft;function mft(t,e){return t.charCodeAt(e)>0&&t.charCodeAt(e)<128?1:2}function yft(t){if(t.length>400)return function(t){for(var e=t.map((function(t){var e=t.attr("text");return(0,_ut.UM)(e)?"":""+e})),n=0,r=0,i=0;i<e.length;i+=1){for(var a=0,o=0;o<=e[i].length;o+=1){var u=e[i].charCodeAt(o);a+=u>=19968&&u<=40869?2:1}a>n&&(n=a,r=i)}return t[r].getBBox().width}(t);var e=0;return(0,_ut.S6)(t,(function(t){var n=t.getBBox().width;e<n&&(e=n)})),e}function xft(t,e,n,r){var i;void 0===r&&(r="tail");var a=null!==(i=e.attr("text"))&&void 0!==i?i:"";if("tail"===r){var o=(0,_ut.ei)(e.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),u=(0,_ut.Lo)(a,n,o,"…");return a!==u?(e.attr("text",u),e.set("tip",a),!0):(e.set("tip",null),!1)}var s=function(t,e){var n=e.getCanvasBBox();return t?n.width:n.height}(t,e),l=function(t){for(var e=0,n=0;n<t.length;n++)e+=mft(t,n);return e}(a),c=!1;if(n<s){var f=Math.floor(n/s*l)-2,h=void 0;h=f>=0?function(t,e,n){void 0===n&&(n="tail");var r=t.length,i="";if("tail"===n){for(var a=0,o=0;a<e&&a+mft(t,o)<=e;)i+=t[o],a+=mft(t,o),o++;i+="…"}else if("head"===n){for(a=0,o=r-1;a<e&&a+mft(t,o)<=e;)i+=t[o],a+=mft(t,o),o--;i="…"+i}else{for(var u="",s="",l=(a=0,0),c=r-1;a<e;){var f=mft(t,l),h=!1;f+a<=e&&(u+=t[l],l++,a+=f,h=!0);var d=mft(t,c);if(d+a<=e&&(s=t[c]+s,a+=d,c--,h=!0),!h)break}i=u+"…"+s}return i}(a,f,r):"…",h&&(e.attr("text",h),c=!0)}return c?e.set("tip",a):e.set("tip",null),c}function bft(t,e){var n=e.x,r=e.y,i=e.content,a=e.style,o=e.id,u=e.name,s=e.rotate,l=e.maxLength,c=e.autoEllipsis,f=e.isVertical,h=e.ellipsisPosition,d=e.background,p=t.addGroup({id:o+"-group",name:u+"-group",attrs:{x:n,y:r}}),g=p.addShape({type:"text",id:o,name:u,attrs:(0,Aut.pi)({x:0,y:0,text:i},a)}),v=Qct((0,_ut.U2)(d,"padding",0));l&&c&&xft(!f,g,l-(v[1]+v[3]),h);if(d){var m=(0,_ut.U2)(d,"style",{}),y=g.getCanvasBBox(),x=y.minX,b=y.minY,w=y.width,S=y.height;p.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:(0,Aut.pi)({x:x-v[3],y:b-v[0],width:w+v[1]+v[3],height:S+v[0]+v[2]},m)}).toBack()}Kct(p,n,r),Jct(p,s,n,r)}var wft={fontFamily:'\n  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"',textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"},Sft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:wft.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:wft.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:wft.lineColor,lineWidth:1}}}})},e.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},e.prototype.renderLine=function(t){var e=this.get("start"),n=this.get("end"),r=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,Aut.pi)({x1:e.x,y1:e.y,x2:n.x,y2:n.y},r)})},e.prototype.getLabelPoint=function(t,e,n){var r;return((r="start"===n?0:"center"===n?.5:(0,_ut.HD)(n)&&-1!==n.indexOf("%")?parseInt(n,10)/100:(0,_ut.hj)(n)?n:1)>1||r<0)&&(r=1),{x:rft(t.x,e.x,r),y:rft(t.y,e.y,r)}},e.prototype.renderLabel=function(t){var e=this.get("text"),n=this.get("start"),r=this.get("end"),i=e.position,a=e.content,o=e.style,u=e.offsetX,s=e.offsetY,l=e.autoRotate,c=e.maxLength,f=e.autoEllipsis,h=e.ellipsisPosition,d=e.background,p=e.isVertical,g=void 0!==p&&p,v=this.getLabelPoint(n,r,i),m=v.x+u,y=v.y+s,x={id:this.getElementId("line-text"),name:"annotation-line-text",x:m,y:y,content:a,style:o,maxLength:c,autoEllipsis:f,ellipsisPosition:h,background:d,isVertical:g};if(l){var b=[r.x-n.x,r.y-n.y];x.rotate=Math.atan2(b[1],b[0])}bft(t,x)},e}(vft),kft=Sft,Cft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:wft.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:wft.fontFamily}}})},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.renderInner=function(t){var e=this.getLocation(),n=e.x,r=e.y,i=this.get("content"),a=this.get("style");bft(t,{id:this.getElementId("text"),name:this.get("name")+"-text",x:n,y:r,content:i,style:a,maxLength:this.get("maxLength"),autoEllipsis:this.get("autoEllipsis"),isVertical:this.get("isVertical"),ellipsisPosition:this.get("ellipsisPosition"),background:this.get("background"),rotate:this.get("rotate")})},e.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var e=this.getLocation(),n=e.x,r=e.y,i=this.get("rotate");Kct(t,n,r),Jct(t,i,n,r)}},e}(vft),Eft=Cft,Mft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,style:{stroke:"#999",lineWidth:1}})},e.prototype.renderInner=function(t){this.renderArc(t)},e.prototype.getArcPath=function(){var t=this.getLocation(),e=t.center,n=t.radius,r=t.startAngle,i=t.endAngle,a=ift(e,n,r),o=ift(e,n,i),u=i-r>Math.PI?1:0,s=[["M",a.x,a.y]];if(i-r==2*Math.PI){var l=ift(e,n,r+Math.PI);s.push(["A",n,n,0,u,1,l.x,l.y]),s.push(["A",n,n,0,u,1,o.x,o.y])}else s.push(["A",n,n,0,u,1,o.x,o.y]);return s},e.prototype.renderArc=function(t){var e=this.getArcPath(),n=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,Aut.pi)({path:e},n)})},e}(vft),Oft=Mft,Aft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:wft.regionColor,opacity:.4}}})},e.prototype.renderInner=function(t){this.renderRegion(t)},e.prototype.renderRegion=function(t){var e=this.get("start"),n=this.get("end"),r=this.get("style"),i=eft({start:e,end:n});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,Aut.pi)({x:i.x,y:i.y,width:i.width,height:i.height},r)})},e}(vft),_ft=Aft,Dft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},e.prototype.renderInner=function(t){this.renderImage(t)},e.prototype.getImageAttrs=function(){var t=this.get("start"),e=this.get("end"),n=this.get("style"),r=eft({start:t,end:e}),i=this.get("src");return(0,Aut.pi)({x:r.x,y:r.y,img:i,width:r.width,height:r.height},n)},e.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},e}(vft),Tft=Dft,Fft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:wft.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:wft.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:wft.fontFamily}}}})},e.prototype.renderInner=function(t){(0,_ut.U2)(this.get("line"),"display")&&this.renderLine(t),(0,_ut.U2)(this.get("text"),"display")&&this.renderText(t),(0,_ut.U2)(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},e.prototype.renderPoint=function(t){var e=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:e})},e.prototype.renderLine=function(t){var e=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:e})},e.prototype.renderText=function(t){var e=this.getShapeAttrs().text,n=e.x,r=e.y,i=e.text,a=(0,Aut._T)(e,["x","y","text"]),o=this.get("text"),u=o.background,s=o.maxLength,l=o.autoEllipsis,c=o.isVertival,f=o.ellipsisPosition;bft(t,{x:n,y:r,id:this.getElementId("text"),name:"annotation-text",content:i,style:a,background:u,maxLength:s,autoEllipsis:l,isVertival:c,ellipsisPosition:f})},e.prototype.autoAdjust=function(t){var e=this.get("direction"),n=this.get("x"),r=this.get("y"),i=(0,_ut.U2)(this.get("line"),"length",0),a=this.get("coordinateBBox"),o=t.getBBox(),u=o.minX,s=o.maxX,l=o.minY,c=o.maxY,f=t.findById(this.getElementId("text-group")),h=t.findById(this.getElementId("text")),d=t.findById(this.getElementId("line"));if(a){if(f){if(n+u<=a.minX){var p=a.minX-(n+u);Kct(f,f.attr("x")+p,f.attr("y"))}if(n+s>=a.maxX){p=n+s-a.maxX;Kct(f,f.attr("x")-p,f.attr("y"))}}if("upward"===e&&r+l<=a.minY||"upward"!==e&&r+c>=a.maxY){var g=void 0,v=void 0;"upward"===e&&r+l<=a.minY?(g="top",v=1):(g="bottom",v=-1),h.attr("textBaseline",g),d&&d.attr("path",[["M",0,0],["L",0,i*v]]),Kct(f,f.attr("x"),(i+2)*v)}}},e.prototype.getShapeAttrs=function(){var t=(0,_ut.U2)(this.get("line"),"display"),e=(0,_ut.U2)(this.get("point"),"style",{}),n=(0,_ut.U2)(this.get("line"),"style",{}),r=(0,_ut.U2)(this.get("text"),"style",{}),i=this.get("direction"),a=t?(0,_ut.U2)(this.get("line"),"length",0):0,o="upward"===i?-1:1;return{point:(0,Aut.pi)({x:0,y:0},e),line:(0,Aut.pi)({path:[["M",0,0],["L",0,a*o]]},n),text:(0,Aut.pi)({x:0,y:(a+2)*o,text:(0,_ut.U2)(this.get("text"),"content",""),textBaseline:"upward"===i?"bottom":"top"},r)}},e}(vft),Ift=Fft,Pft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:wft.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:wft.textColor,fontFamily:wft.fontFamily}}}})},e.prototype.renderInner=function(t){var e=(0,_ut.U2)(this.get("region"),"style",{}),n=((0,_ut.U2)(this.get("text"),"style",{}),this.get("lineLength")||0),r=this.get("points");if(r.length){var i=function(t){var e=t.map((function(t){return t.x})),n=t.map((function(t){return t.y})),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),a=Math.max.apply(Math,e),o=Math.max.apply(Math,n);return{x:r,y:i,minX:r,minY:i,maxX:a,maxY:o,width:a-r,height:o-i}}(r),a=[];a.push(["M",r[0].x,i.minY-n]),r.forEach((function(t){a.push(["L",t.x,t.y])})),a.push(["L",r[r.length-1].x,r[r.length-1].y-n]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,Aut.pi)({path:a},e)}),bft(t,(0,Aut.pi)({id:this.getElementId("text"),name:"annotation-text",x:(i.minX+i.maxX)/2,y:i.minY-n},this.get("text")))}},e}(vft),jft=Pft,Bft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},e.prototype.renderInner=function(t){var e=this,n=this.get("start"),r=this.get("end"),i=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});(0,_ut.S6)(this.get("shapes"),(function(t,n){var r=t.get("type"),a=(0,_ut.d9)(t.attr());e.adjustShapeAttrs(a),e.addShape(i,{id:e.getElementId("shape-"+r+"-"+n),capture:!1,type:r,attrs:a})}));var a=eft({start:n,end:r});i.setClip({type:"rect",attrs:{x:a.minX,y:a.minY,width:a.width,height:a.height}})},e.prototype.adjustShapeAttrs=function(t){var e=this.get("color");t.fill&&(t.fill=t.fillStyle=e),t.stroke=t.strokeStyle=e},e}(vft),Lft=Bft,Rft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"annotation",type:"shape",draw:_ut.ZT})},e.prototype.renderInner=function(t){var e=this.get("render");(0,_ut.mf)(e)&&e(t)},e}(vft),Zft=Rft;function Nft(t,e,n){var r;try{r=window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.style[e]}catch(i){}finally{r=void 0===r?n:r}return r}function zft(t,e){var n=function(t,e){var n=Nft(t,"width",e);return"auto"===n&&(n=t.offsetWidth),parseFloat(n)}(t,e),r=parseFloat(Nft(t,"borderLeftWidth"))||0,i=parseFloat(Nft(t,"paddingLeft"))||0,a=parseFloat(Nft(t,"paddingRight"))||0,o=parseFloat(Nft(t,"borderRightWidth"))||0,u=parseFloat(Nft(t,"marginRight"))||0;return n+r+o+i+a+(parseFloat(Nft(t,"marginLeft"))||0)+u}function Uft(t,e){var n=function(t,e){var n=Nft(t,"height",e);return"auto"===n&&(n=t.offsetHeight),parseFloat(n)}(t,e),r=parseFloat(Nft(t,"borderTopWidth"))||0,i=parseFloat(Nft(t,"paddingTop"))||0,a=parseFloat(Nft(t,"paddingBottom"))||0;return n+r+(parseFloat(Nft(t,"borderBottomWidth"))||0)+i+a+(parseFloat(Nft(t,"marginTop"))||0)+(parseFloat(Nft(t,"marginBottom"))||0)}var Hft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.show=function(){this.get("container").style.display="",this.set("visible",!0)},e.prototype.hide=function(){this.get("container").style.display="none",this.set("visible",!1)},e.prototype.setCapture=function(t){var e=t?"auto":"none";this.getContainer().style.pointerEvents=e,this.set("capture",t)},e.prototype.getBBox=function(){var t=this.getContainer();return nft(parseFloat(t.style.left)||0,parseFloat(t.style.top)||0,t.clientWidth,t.clientHeight)},e.prototype.clear=function(){tft(this.get("container"))},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),t.prototype.destroy.call(this)},e.prototype.init=function(){t.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},e.prototype.initCapture=function(){this.setCapture(this.get("capture"))},e.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},e.prototype.initDom=function(){},e.prototype.initContainer=function(){var t=this.get("container");if((0,_ut.UM)(t)){t=this.createDom();var e=this.get("parent");(0,_ut.HD)(e)&&(e=document.getElementById(e),this.set("parent",e)),e.appendChild(t),this.get("containerId")&&t.setAttribute("id",this.get("containerId")),this.set("container",t)}else(0,_ut.HD)(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},e.prototype.resetStyles=function(){var t=this.get("domStyles"),e=this.get("defaultStyles");t=t?(0,_ut.b$)({},e,t):e,this.set("domStyles",t)},e.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var e=this.getContainer();this.applyChildrenStyles(e,t);var n,r=this.get("containerClassName");if(r&&(n=r,e.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))))Gut(e,t[r])}},e.prototype.applyChildrenStyles=function(t,e){(0,_ut.S6)(e,(function(e,n){var r=t.getElementsByClassName(n);(0,_ut.S6)(r,(function(t){Gut(t,e)}))}))},e.prototype.applyStyle=function(t,e){Gut(e,this.get("domStyles")[t])},e.prototype.createDom=function(){return Vut(this.get("containerTpl"))},e.prototype.initEvent=function(){},e.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode&&t.parentNode.removeChild(t)},e.prototype.removeEvent=function(){},e.prototype.updateInner=function(t){(0,_ut.wH)(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},e.prototype.resetPosition=function(){},e}(fft),Wft=Hft,Vft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},e.prototype.render=function(){var t=this.getContainer(),e=this.get("html");tft(t);var n=(0,_ut.mf)(e)?e(t):e;if((0,_ut.kK)(n))t.appendChild(n);else if((0,_ut.HD)(n)||(0,_ut.hj)(n)){var r=Vut(""+n);r&&t.appendChild(r)}this.resetPosition()},e.prototype.resetPosition=function(){var t=this.getContainer(),e=this.getLocation(),n=e.x,r=e.y,i=this.get("alignX"),a=this.get("alignY"),o=this.get("offsetX"),u=this.get("offsetY"),s=zft(t),l=Uft(t),c={x:n,y:r};"middle"===i?c.x-=Math.round(s/2):"right"===i&&(c.x-=Math.round(s)),"middle"===a?c.y-=Math.round(l/2):"bottom"===a&&(c.y-=Math.round(l)),o&&(c.x+=o),u&&(c.y+=u),Gut(t,{position:"absolute",left:c.x+"px",top:c.y+"px",zIndex:this.get("zIndex")})},e}(Wft),Gft=Vft;function Xft(t,e,n){var r=e+"Style",i=null;return(0,_ut.S6)(n,(function(e,n){t[n]&&e[r]&&(i||(i={}),(0,_ut.CD)(i,e[r]))})),i}var Yft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:wft.lineColor}},tickLine:{style:{lineWidth:1,stroke:wft.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:wft.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:wft.textColor,fontFamily:wft.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:wft.textColor,textBaseline:"middle",fontFamily:wft.fontFamily,textAlign:"center"},iconStyle:{fill:wft.descriptionIconFill,stroke:wft.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:wft.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},e.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("ticks")},e.prototype.setItems=function(t){this.update({ticks:t})},e.prototype.updateItem=function(t,e){(0,_ut.CD)(t,e),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},e.prototype.setItemState=function(t,e,n){t[e]=n,this.updateTickStates(t)},e.prototype.hasState=function(t,e){return!!t[e]},e.prototype.getItemStates=function(t){var e=this.get("tickStates"),n=[];return(0,_ut.S6)(e,(function(e,r){t[r]&&n.push(r)})),n},e.prototype.clearItemsState=function(t){var e=this,n=this.getItemsByState(t);(0,_ut.S6)(n,(function(n){e.setItemState(n,t,!1)}))},e.prototype.getItemsByState=function(t){var e=this,n=this.getItems();return(0,_ut.hX)(n,(function(n){return e.hasState(n,t)}))},e.prototype.getSidePoint=function(t,e){var n=this.getSideVector(e,t);return{x:t.x+n[0],y:t.y+n[1]}},e.prototype.getTextAnchor=function(t){var e;return(0,_ut.vQ)(t[0],0)?e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e},e.prototype.getTextBaseline=function(t){var e;return(0,_ut.vQ)(t[1],0)?e="middle":t[1]>0?e="top":t[1]<0&&(e="bottom"),e},e.prototype.processOverlap=function(t){},e.prototype.drawLine=function(t){var e=this.getLinePath(),n=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,_ut.CD)({path:e},n.style)})},e.prototype.getTickLineItems=function(t){var e=this,n=[],r=this.get("tickLine"),i=r.alignTick,a=r.length,o=1;return t.length>=2&&(o=t[1].value-t[0].value),(0,_ut.S6)(t,(function(t){var r=t.point;i||(r=e.getTickPoint(t.value-o/2));var u=e.getSidePoint(r,a);n.push({startPoint:r,tickValue:t.value,endPoint:u,tickId:t.id,id:"tickline-"+t.id})})),n},e.prototype.getSubTickLineItems=function(t){var e=[],n=this.get("subTickLine"),r=n.count,i=t.length;if(i>=2)for(var a=0;a<i-1;a++)for(var o=t[a],u=t[a+1],s=0;s<r;s++){var l=(s+1)/(r+1),c=(1-l)*o.tickValue+l*u.tickValue,f=this.getTickPoint(c),h=this.getSidePoint(f,n.length);e.push({startPoint:f,endPoint:h,tickValue:c,id:"sub-"+o.id+"-"+s})}return e},e.prototype.getTickLineAttrs=function(t,e,n,r){var i=this.get(e).style,a={points:[t.startPoint,t.endPoint]},o=(0,_ut.U2)(this.get("theme"),["tickLine","style"],{});i=(0,_ut.mf)(i)?(0,_ut.CD)({},o,i(a,n,r)):i;var u=t.startPoint,s=t.endPoint;return(0,Aut.pi)({x1:u.x,y1:u.y,x2:s.x,y2:s.y},i)},e.prototype.drawTick=function(t,e,n,r,i){this.addShape(e,{type:"line",id:this.getElementId(t.id),name:"axis-"+n,attrs:this.getTickLineAttrs(t,n,r,i)})},e.prototype.drawTickLines=function(t){var e=this,n=this.get("ticks"),r=this.get("subTickLine"),i=this.getTickLineItems(n),a=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),o=this.get("tickLine");if((0,_ut.S6)(i,(function(n,r){if(o.displayWithLabel){var u=e.getElementId("label-"+n.tickId);t.findById(u)&&e.drawTick(n,a,"tickLine",r,i)}else e.drawTick(n,a,"tickLine",r,i)})),r){var u=this.getSubTickLineItems(i);(0,_ut.S6)(u,(function(t,n){e.drawTick(t,a,"subTickLine",n,u)}))}},e.prototype.processTicks=function(){var t=this,e=this.get("ticks");(0,_ut.S6)(e,(function(e){e.point=t.getTickPoint(e.value),(0,_ut.UM)(e.id)&&(e.id=e.name)}))},e.prototype.drawTicks=function(t){var e=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var n=this.get("ticks");(0,_ut.S6)(n,(function(n){e.applyTickStates(n,t)}))},e.prototype.optimizeTicks=function(){var t=this.get("optimize"),e=this.get("ticks");if(t&&t.enable&&t.threshold>0){var n=(0,_ut.dp)(e);if(n>t.threshold){var r=Math.ceil(n/t.threshold),i=e.filter((function(t,e){return e%r==0}));this.set("ticks",i),this.set("originalTicks",e)}}},e.prototype.getLabelAttrs=function(t,e,n){var r=this.get("label"),i=r.offset,a=r.offsetX,o=r.offsetY,u=r.rotate,s=r.formatter,l=this.getSidePoint(t.point,i),c=this.getSideVector(i,l),f=s?s(t.name,t,e):t.name,h=r.style;h=(0,_ut.mf)(h)?(0,_ut.U2)(this.get("theme"),["label","style"],{}):h;var d=(0,_ut.CD)({x:l.x+a,y:l.y+o,text:f,textAlign:this.getTextAnchor(c),textBaseline:this.getTextBaseline(c)},h);return u&&(d.matrix=Yct(l,u)),d},e.prototype.drawLabels=function(t){var e=this,n=this.get("ticks"),r=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});(0,_ut.S6)(n,(function(t,i){e.addShape(r,{type:"text",name:"axis-label",id:e.getElementId("label-"+t.id),attrs:e.getLabelAttrs(t,i,n),delegateObject:{tick:t,item:t,index:i}})})),this.processOverlap(r);var i=r.getChildren(),a=(0,_ut.U2)(this.get("theme"),["label","style"],{}),o=this.get("label"),u=o.style,s=o.formatter;if((0,_ut.mf)(u)){var l=i.map((function(t){return(0,_ut.U2)(t.get("delegateObject"),"tick")}));(0,_ut.S6)(i,(function(t,e){var n=t.get("delegateObject").tick,r=s?s(n.name,n,e):n.name,i=(0,_ut.CD)({},a,u(r,e,l));t.attr(i)}))}},e.prototype.getTitleAttrs=function(){var t=this.get("title"),e=t.style,n=t.position,r=t.offset,i=t.spacing,a=void 0===i?0:i,o=t.autoRotate,u=e.fontSize,s=.5;"start"===n?s=0:"end"===n&&(s=1);var l=this.getTickPoint(s),c=this.getSidePoint(l,r||a+u/2),f=(0,_ut.CD)({x:c.x,y:c.y,text:t.text},e),h=t.rotate,d=h;if((0,_ut.UM)(h)&&o){var p=this.getAxisVector(l);d=Pct.Dg(p,[1,0],!0)}if(d){var g=Yct(c,d);f.matrix=g}return f},e.prototype.drawTitle=function(t){var e,n=this.getTitleAttrs(),r=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:n});(null===(e=this.get("title"))||void 0===e?void 0:e.description)&&this.drawDescriptionIcon(t,r,n.matrix)},e.prototype.drawDescriptionIcon=function(t,e,n){var r=this.addGroup(t,{name:"axis-description",id:this.getElementById("description")}),i=e.getBBox(),a=i.maxX,o=i.maxY,u=i.height,s=this.get("title").iconStyle,l=u/2,c=l/6,f=a+4,h=o-u/2,d=[f+l,h-l],p=d[0],g=d[1],v=[p+l,g+l],m=v[0],y=v[1],x=[p,y+l],b=x[0],w=x[1],S=[f,g+l],k=S[0],C=S[1],E=[f+l,h-u/4],M=E[0],O=E[1],A=[M,O+c],_=A[0],D=A[1],T=[_,D+c],F=T[0],I=T[1],P=[F,I+3*l/4],j=P[0],B=P[1];this.addShape(r,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:(0,Aut.pi)({path:[["M",p,g],["A",l,l,0,0,1,m,y],["A",l,l,0,0,1,b,w],["A",l,l,0,0,1,k,C],["A",l,l,0,0,1,p,g],["M",M,O],["L",_,D],["M",F,I],["L",j,B]],lineWidth:c,matrix:n},s)}),this.addShape(r,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:f,y:h-u/2,width:u,height:u,stroke:"#000",fill:"#000",opacity:0,matrix:n,cursor:"pointer"}})},e.prototype.applyTickStates=function(t,e){if(this.getItemStates(t).length){var n=this.get("tickStates"),r=this.getElementId("label-"+t.id),i=e.findById(r);if(i){var a=Xft(t,"label",n);a&&i.attr(a)}var o=this.getElementId("tickline-"+t.id),u=e.findById(o);if(u){var s=Xft(t,"tickLine",n);s&&u.attr(s)}}},e.prototype.updateTickStates=function(t){var e=this.getItemStates(t),n=this.get("tickStates"),r=this.get("label"),i=this.getElementByLocalId("label-"+t.id),a=this.get("tickLine"),o=this.getElementByLocalId("tickline-"+t.id);if(e.length){if(i){var u=Xft(t,"label",n);u&&i.attr(u)}if(o){var s=Xft(t,"tickLine",n);s&&o.attr(s)}}else i&&i.attr(r.style),o&&o.attr(a.style)},e}(vft),qft=Yft;function $ft(t,e,n,r){var i=e.getChildren(),a=!1;return(0,_ut.S6)(i,(function(e){var i=xft(t,e,n,r);a=a||i})),a}function Jft(){return Qft}function Kft(t,e,n){return $ft(t,e,n,"head")}function Qft(t,e,n){return $ft(t,e,n,"tail")}function tht(t,e,n){return $ft(t,e,n,"middle")}function eht(t){var e=function(t){var e=t.attr("matrix");return e&&1!==e[0]}(t)?function(t){var e=[0,0,0];return Fct(e,[1,0,0],t),Math.atan2(e[1],e[0])}(t.attr("matrix")):0;return e%360}function nht(t,e,n,r){var i=!1,a=eht(e),o=t?Math.abs(n.attr("y")-e.attr("y")):Math.abs(n.attr("x")-e.attr("x")),u=(t?n.attr("y")>e.attr("y"):n.attr("x")>e.attr("x"))?e.getBBox():n.getBBox();if(t){var s=Math.abs(Math.cos(a));i=aft(s,0,Math.PI/180)?u.width+r>o:u.height/s+r>o}else{s=Math.abs(Math.sin(a));i=aft(s,0,Math.PI/180)?u.width+r>o:u.height/s+r>o}return i}function rht(t,e,n,r){var i=(null==r?void 0:r.minGap)||0,a=e.getChildren().slice().filter((function(t){return t.get("visible")}));if(!a.length)return!1;var o=!1;n&&a.reverse();for(var u=a.length,s=a[0],l=1;l<u;l++){var c=a[l];c.getBBox();nht(t,s,c,i)?(c.hide(),o=!0):s=c}return o}function iht(t,e,n){var r=(null==n?void 0:n.minGap)||0,i=e.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],u=o.getBBox(),s=i[1],l=i.length,c=eht(o),f=t?Math.abs(s.attr("y")-o.attr("y")):Math.abs(s.attr("x")-o.attr("x")),h=0;if(t){var d=Math.abs(Math.cos(c));if(aft(d,0,Math.PI/180))h=(yft(i)+r)/f;else h=(u.height/d+r)/f}else{d=Math.abs(Math.sin(c));if(aft(d,0,Math.PI/180))h=(yft(i)+r)/f;else h=(u.height/d+r)/f}if(h>1){h=Math.ceil(h);for(var p=0;p<l;p++)p%h!=0&&(i[p].hide(),a=!0)}return a}function aht(){return lht}function oht(t,e,n,r){return rht(t,e,!1,r)}function uht(t,e,n,r){return rht(t,e,!0,r)}function sht(t,e,n,r){var i=(null==r?void 0:r.minGap)||0,a=e.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,u=a.length,s=a[0],l=a[u-1],c=s,f=1;f<u-1;f++){var h=a[f];h.getBBox();nht(t,c,h,i)?(h.hide(),o=!0):c=h}return nht(t,c,l,i)&&(c.hide(),o=!0),o}function lht(t,e,n,r){var i=iht(t,e,r);return rht(t,e,!1)&&(i=!0),i}function cht(t,e,n,r){var i=e.getChildren().slice(),a=iht(t,e,r);if(i.length>2){var o=i[0],u=i[i.length-1];o.get("visible")||(o.show(),rht(t,e,!1,r)&&(a=!0)),u.get("visible")||(u.show(),rht(t,e,!0,r)&&(a=!0))}return a}function fht(t,e,n,r){var i=e.getChildren();if(!i.length)return!1;if(!t&&i.length<2)return!1;var a=yft(i),o=!1;t?o=!!n&&a>n:o=a>Math.abs(i[1].attr("x")-i[0].attr("x"));o&&function(t,e){(0,_ut.S6)(t,(function(t){var n=Yct({x:t.attr("x"),y:t.attr("y")},e);t.attr("matrix",n)}))}(i,r(n,a));return o}function hht(){return dht}function dht(t,e,n,r){return fht(t,e,n,(function(){return(0,_ut.hj)(r)?r:t?wft.verticalAxisRotate:wft.horizontalAxisRotate}))}function pht(t,e,n){return fht(t,e,n,(function(e,n){if(!e)return t?wft.verticalAxisRotate:wft.horizontalAxisRotate;if(t)return-Math.acos(e/n);var r=0;return(e>n||(r=Math.asin(e/n))>Math.PI/4)&&(r=Math.PI/4),r}))}var ght,vht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getLinePath=function(){var t=this.get("start"),e=this.get("end"),n=[];return n.push(["M",t.x,t.y]),n.push(["L",e.x,e.y]),n},e.prototype.getInnerLayoutBBox=function(){var e=this.get("start"),n=this.get("end"),r=t.prototype.getInnerLayoutBBox.call(this),i=Math.min(e.x,n.x,r.x),a=Math.min(e.y,n.y,r.y),o=Math.max(e.x,n.x,r.maxX),u=Math.max(e.y,n.y,r.maxY);return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:u,width:o-i,height:u-a}},e.prototype.isVertical=function(){var t=this.get("start"),e=this.get("end");return(0,_ut.vQ)(t.x,e.x)},e.prototype.isHorizontal=function(){var t=this.get("start"),e=this.get("end");return(0,_ut.vQ)(t.y,e.y)},e.prototype.getTickPoint=function(t){var e=this.get("start"),n=this.get("end"),r=n.x-e.x,i=n.y-e.y;return{x:e.x+r*t,y:e.y+i*t}},e.prototype.getSideVector=function(t){var e=this.getAxisVector(),n=Zct.Fv([0,0],e),r=this.get("verticalFactor"),i=[n[1],-1*n[0]];return Zct.bA([0,0],i,t*r)},e.prototype.getAxisVector=function(){var t=this.get("start"),e=this.get("end");return[e.x-t.x,e.y-t.y]},e.prototype.processOverlap=function(t){var e=this,n=this.isVertical(),r=this.isHorizontal();if(n||r){var i=this.get("label"),a=this.get("title"),o=this.get("verticalLimitLength"),u=i.offset,s=o,l=0,c=0;a&&(l=a.style.fontSize,c=a.spacing),s&&(s=s-u-c-l);var f=this.get("overlapOrder");if((0,_ut.S6)(f,(function(n){i[n]&&e.canProcessOverlap(n)&&e.autoProcessOverlap(n,i[n],t,s)})),a&&(0,_ut.UM)(a.offset)){var h=t.getCanvasBBox(),d=n?h.width:h.height;a.offset=u+d+c+l/2}}},e.prototype.canProcessOverlap=function(t){var e=this.get("label");return"autoRotate"!==t||(0,_ut.UM)(e.rotate)},e.prototype.autoProcessOverlap=function(t,e,n,r){var i=this,a=this.isVertical(),o=!1,u=E[t];if(!0===e){this.get("label");o=u.getDefault()(a,n,r)}else if((0,_ut.mf)(e))o=e(a,n,r);else if((0,_ut.Kn)(e)){var s=e;u[s.type]&&(o=u[s.type](a,n,r,s.cfg))}else u[e]&&(o=u[e](a,n,r));if("autoRotate"===t){if(o){var l=n.getChildren(),c=this.get("verticalFactor");(0,_ut.S6)(l,(function(t){if("center"===t.attr("textAlign")){var e=c>0?"end":"start";t.attr("textAlign",e)}}))}}else if("autoHide"===t){var f=n.getChildren().slice(0);(0,_ut.S6)(f,(function(t){t.get("visible")||(i.get("isRegister")&&i.unregisterElement(t),t.remove())}))}},e}(qft),mht=vht,yht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},e.prototype.getLinePath=function(){var t=this.get("center"),e=t.x,n=t.y,r=this.get("radius"),i=r,a=this.get("startAngle"),o=this.get("endAngle"),u=[];if(Math.abs(o-a)===2*Math.PI)u=[["M",e,n-i],["A",r,i,0,1,1,e,n+i],["A",r,i,0,1,1,e,n-i],["Z"]];else{var s=this.getCirclePoint(a),l=this.getCirclePoint(o),c=Math.abs(o-a)>Math.PI?1:0,f=a>o?0:1;u=[["M",e,n],["L",s.x,s.y],["A",r,i,0,c,f,l.x,l.y],["L",e,n]]}return u},e.prototype.getTickPoint=function(t){var e=this.get("startAngle"),n=e+(this.get("endAngle")-e)*t;return this.getCirclePoint(n)},e.prototype.getSideVector=function(t,e){var n=this.get("center"),r=[e.x-n.x,e.y-n.y],i=this.get("verticalFactor"),a=Zct.kE(r);return Zct.bA(r,r,i*t/a),r},e.prototype.getAxisVector=function(t){var e=this.get("center"),n=[t.x-e.x,t.y-e.y];return[n[1],-1*n[0]]},e.prototype.getCirclePoint=function(t,e){var n=this.get("center");return e=e||this.get("radius"),{x:n.x+Math.cos(t)*e,y:n.y+Math.sin(t)*e}},e.prototype.canProcessOverlap=function(t){var e=this.get("label");return"autoRotate"!==t||(0,_ut.UM)(e.rotate)},e.prototype.processOverlap=function(t){var e=this,n=this.get("label"),r=this.get("title"),i=this.get("verticalLimitLength"),a=n.offset,o=i,u=0,s=0;r&&(u=r.style.fontSize,s=r.spacing),o&&(o=o-a-s-u);var l=this.get("overlapOrder");if((0,_ut.S6)(l,(function(r){n[r]&&e.canProcessOverlap(r)&&e.autoProcessOverlap(r,n[r],t,o)})),r&&(0,_ut.UM)(r.offset)){var c=t.getCanvasBBox().height;r.offset=a+c+s+u/2}},e.prototype.autoProcessOverlap=function(t,e,n,r){var i=this,a=!1,o=E[t];if(r>0)if(!0===e)a=o.getDefault()(!1,n,r);else if((0,_ut.mf)(e))a=e(!1,n,r);else if((0,_ut.Kn)(e)){var u=e;o[u.type]&&(a=o[u.type](!1,n,r,u.cfg))}else o[e]&&(a=o[e](!1,n,r));if("autoRotate"===t){if(a){var s=n.getChildren(),l=this.get("verticalFactor");(0,_ut.S6)(s,(function(t){if("center"===t.attr("textAlign")){var e=l>0?"end":"start";t.attr("textAlign",e)}}))}}else if("autoHide"===t){var c=n.getChildren().slice(0);(0,_ut.S6)(c,(function(t){t.get("visible")||(i.get("isRegister")&&i.unregisterElement(t),t.remove())}))}},e}(qft),xht=yht,bht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:wft.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:wft.textColor,textAlign:"center",textBaseline:"middle",fontFamily:wft.fontFamily}},textBackground:{padding:5,style:{stroke:wft.lineColor}}}})},e.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},e.prototype.renderText=function(t){var e=this.get("text"),n=e.style,r=e.autoRotate,i=e.content;if(!(0,_ut.UM)(i)){var a=this.getTextPoint(),o=null;if(r)o=Yct(a,this.getRotateAngle());this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},a),{text:i,matrix:o}),n)})}},e.prototype.renderLine=function(t){var e=this.getLinePath(),n=this.get("line").style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,Aut.pi)({path:e},n)})},e.prototype.renderBackground=function(t){var e=this.getElementId("text"),n=t.findById(e),r=this.get("textBackground");if(r&&n){var i=n.getBBox(),a=Qct(r.padding),o=r.style;this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,Aut.pi)({x:i.x-a[3],y:i.y-a[0],width:i.width+a[1]+a[3],height:i.height+a[0]+a[2],matrix:n.attr("matrix")},o)}).toBack()}},e}(vft),wht=bht,Sht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text").position,i=Math.atan2(n.y-e.y,n.x-e.x);return"start"===r?i-Math.PI/2:i+Math.PI/2},e.prototype.getTextPoint=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text");return sft(e,n,r.position,r.offset)},e.prototype.getLinePath=function(){var t=this.getLocation(),e=t.start,n=t.end;return[["M",e.x,e.y],["L",n.x,n.y]]},e}(wht),kht=Sht,Cht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),e=t.startAngle,n=t.endAngle;return"start"===this.get("text").position?e+Math.PI/2:n-Math.PI/2},e.prototype.getTextPoint=function(){var t=this.get("text"),e=t.position,n=t.offset,r=this.getLocation(),i=r.center,a=r.radius,o=r.startAngle,u=r.endAngle,s="start"===e?o:u,l=this.getRotateAngle()-Math.PI,c=ift(i,a,s),f=Math.cos(l)*n,h=Math.sin(l)*n;return{x:c.x+f,y:c.y+h}},e.prototype.getLinePath=function(){var t=this.getLocation(),e=t.center,n=t.radius,r=t.startAngle,i=t.endAngle,a=null;if(i-r==2*Math.PI){var o=e.x,u=e.y;a=[["M",o,u-n],["A",n,n,0,1,1,o,u+n],["A",n,n,0,1,1,o,u-n],["Z"]]}else{var s=ift(e,n,r),l=ift(e,n,i),c=Math.abs(i-r)>Math.PI?1:0,f=r>i?0:1;a=[["M",s.x,s.y],["A",n,n,0,c,f,l.x,l.y]]}return a},e}(wht),Eht=Cht,Mht="g2-crosshair",Oht=Mht+"-line",Aht=Mht+"-text",_ht=((ght={})[""+Mht]={position:"relative"},ght[""+Oht]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},ght[""+Aht]={position:"absolute",color:wft.textColor,fontFamily:wft.fontFamily},ght),Dht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+Mht+'"></div>',crosshairTpl:'<div class="'+Oht+'"></div>',textTpl:'<span class="'+Aht+'">{content}</span>',domStyles:null,containerClassName:Mht,defaultStyles:_ht,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},e.prototype.render=function(){this.resetText(),this.resetPosition()},e.prototype.initCrossHair=function(){var t=this.getContainer(),e=Vut(this.get("crosshairTpl"));t.appendChild(e),this.applyStyle(Oht,e),this.set("crosshairEl",e)},e.prototype.getTextPoint=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text");return sft(e,n,r.position,r.offset)},e.prototype.resetText=function(){var t=this.get("text"),e=this.get("textEl");if(t){var n=t.content;if(!e){var r=this.getContainer();e=Vut((0,_ut.ng)(this.get("textTpl"),t)),r.appendChild(e),this.applyStyle(Aht,e),this.set("textEl",e)}e.innerHTML=n}else e&&e.remove()},e.prototype.isVertical=function(t,e){return t.x===e.x},e.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var e=this.get("start"),n=this.get("end"),r=Math.min(e.x,n.x),i=Math.min(e.y,n.y);this.isVertical(e,n)?Gut(t,{width:"1px",height:uft(Math.abs(n.y-e.y))}):Gut(t,{height:"1px",width:uft(Math.abs(n.x-e.x))}),Gut(t,{top:uft(i),left:uft(r)}),this.alignText()},e.prototype.alignText=function(){var t=this.get("textEl");if(t){var e=this.get("text").align,n=t.clientWidth,r=this.getTextPoint();switch(e){case"center":r.x=r.x-n/2;break;case"right":r.x=r.x-n}Gut(t,{top:uft(r.y),left:uft(r.x)})}},e.prototype.updateInner=function(e){(0,_ut.wH)(e,"text")&&this.resetText(),t.prototype.updateInner.call(this,e)},e}(Wft),Tht=Dht,Fht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:wft.lineColor}}}})},e.prototype.getLineType=function(){return(this.get("line")||this.get("defaultCfg").line).type},e.prototype.renderInner=function(t){this.drawGrid(t)},e.prototype.getAlternatePath=function(t,e){var n=this.getGridPath(t),r=e.slice(0).reverse(),i=this.getGridPath(r,!0);return this.get("closed")?n=n.concat(i):(i[0][0]="L",(n=n.concat(i)).push(["Z"])),n},e.prototype.getPathStyle=function(){return this.get("line").style},e.prototype.drawGrid=function(t){var e=this,n=this.get("line"),r=this.get("items"),i=this.get("alternateColor"),a=null;(0,_ut.S6)(r,(function(o,u){var s=o.id||u;if(n){var l=e.getPathStyle();l=(0,_ut.mf)(l)?l(o,u,r):l;var c=e.getElementId("line-"+s),f=e.getGridPath(o.points);e.addShape(t,{type:"path",name:"grid-line",id:c,attrs:(0,_ut.CD)({path:f},l)})}if(i&&u>0){var h=e.getElementId("region-"+s),d=u%2==0;if((0,_ut.HD)(i))d&&e.drawAlternateRegion(h,t,a.points,o.points,i);else{var p=d?i[1]:i[0];e.drawAlternateRegion(h,t,a.points,o.points,p)}}a=o}))},e.prototype.drawAlternateRegion=function(t,e,n,r,i){var a=this.getAlternatePath(n,r);this.addShape(e,{type:"path",id:t,name:"grid-region",attrs:{path:a,fill:i}})},e}(vft),Iht=Fht;var Pht,jht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{type:"circle",center:null,closed:!0})},e.prototype.getGridPath=function(t,e){var n=this.getLineType(),r=this.get("closed"),i=[];if(t.length)if("circle"===n){var a=this.get("center"),o=t[0],u=function(t,e,n,r){var i=n-t,a=r-e;return Math.sqrt(i*i+a*a)}(a.x,a.y,o.x,o.y),s=e?0:1;r?(i.push(["M",a.x,a.y-u]),i.push(["A",u,u,0,0,s,a.x,a.y+u]),i.push(["A",u,u,0,0,s,a.x,a.y-u]),i.push(["Z"])):(0,_ut.S6)(t,(function(t,e){0===e?i.push(["M",t.x,t.y]):i.push(["A",u,u,0,0,s,t.x,t.y])}))}else(0,_ut.S6)(t,(function(t,e){0===e?i.push(["M",t.x,t.y]):i.push(["L",t.x,t.y])})),r&&i.push(["Z"]);return i},e}(Iht),Bht=jht,Lht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{type:"line"})},e.prototype.getGridPath=function(t){var e=[];return(0,_ut.S6)(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},e}(Iht),Rht=Lht,Zht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},e.prototype.getLayoutBBox=function(){var e=t.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),r=this.get("maxHeight"),i=e.width,a=e.height;return n&&(i=Math.min(i,n)),r&&(a=Math.min(a,r)),nft(e.minX,e.minY,i,a)},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.resetLocation=function(){var t=this.get("x"),e=this.get("y"),n=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+n,y:e+r})},e.prototype.applyOffset=function(){this.resetLocation()},e.prototype.getDrawPoint=function(){return this.get("currentPoint")},e.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},e.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},e.prototype.drawBackground=function(t){var e=this.get("background"),n=t.getBBox(),r=Qct(e.padding),i=(0,Aut.pi)({x:0,y:0,width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},e.style);this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:i}).toBack()},e.prototype.drawTitle=function(t){var e=this.get("currentPoint"),n=this.get("title"),r=n.spacing,i=n.style,a=n.text,o=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,Aut.pi)({text:a,x:e.x,y:e.y},i)}).getBBox();this.set("currentPoint",{x:e.x,y:o.maxY+r})},e.prototype.resetDraw=function(){var t=this.get("background"),e={x:0,y:0};if(t){var n=Qct(t.padding);e.x=n[3],e.y=n[0]}this.set("currentPoint",e)},e}(vft),Nht=Zht,zht={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},Uht={fill:wft.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:wft.fontFamily,fontWeight:"normal",lineHeight:12},Hht="navigation-arrow-right",Wht="navigation-arrow-left",Vht={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},Ght=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentPageIndex=1,e.totalPagesCnt=1,e.pageWidth=0,e.pageHeight=0,e.startX=0,e.startY=0,e.onNavigationBack=function(){var t=e.getElementByLocalId("item-group");if(e.currentPageIndex>1){e.currentPageIndex-=1,e.updateNavigation();var n=e.getCurrentNavigationMatrix();e.get("animate")?t.animate({matrix:n},100):t.attr({matrix:n})}},e.onNavigationAfter=function(){var t=e.getElementByLocalId("item-group");if(e.currentPageIndex<e.totalPagesCnt){e.currentPageIndex+=1,e.updateNavigation();var n=e.getCurrentNavigationMatrix();e.get("animate")?t.animate({matrix:n},100):t.attr({matrix:n})}},e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:wft.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:wft.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:zht,itemName:{spacing:16,style:Uht},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:Uht,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:wft.uncheckedColor},markerStyle:{fill:wft.uncheckedColor,stroke:wft.uncheckedColor}},inactive:{nameStyle:{fill:wft.uncheckedColor},markerStyle:{opacity:.2}}}}})},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("items")},e.prototype.setItems=function(t){this.update({items:t})},e.prototype.updateItem=function(t,e){(0,_ut.CD)(t,e),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},e.prototype.setItemState=function(t,e,n){t[e]=n;var r=this.getElementByLocalId("item-"+t.id);if(r){var i=this.getItems().indexOf(t),a=this.createOffScreenGroup(),o=this.drawItem(t,i,this.getItemHeight(),a);this.updateElements(o,r),this.clearUpdateStatus(r)}},e.prototype.hasState=function(t,e){return!!t[e]},e.prototype.getItemStates=function(t){var e=this.get("itemStates"),n=[];return(0,_ut.S6)(e,(function(e,r){t[r]&&n.push(r)})),n},e.prototype.clearItemsState=function(t){var e=this,n=this.getItemsByState(t);(0,_ut.S6)(n,(function(n){e.setItemState(n,t,!1)}))},e.prototype.getItemsByState=function(t){var e=this,n=this.getItems();return(0,_ut.hX)(n,(function(n){return e.hasState(n,t)}))},e.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},e.prototype.processItems=function(){var t=this.get("items");(0,_ut.S6)(t,(function(t){t.id||(t.id=t.name)}))},e.prototype.drawItems=function(t){var e=this,n=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),r=this.addGroup(n,{id:this.getElementId("item-group"),name:"legend-item-group"}),i=this.getItemHeight(),a=this.get("itemWidth"),o=this.get("itemSpacing"),u=this.get("itemMarginBottom"),s=this.get("currentPoint"),l=s.x,c=s.y,f=this.get("layout"),h=this.get("items"),d=!1,p=0,g=this.get("maxWidth"),v=this.get("maxHeight");(0,_ut.S6)(h,(function(t,n){var h=e.drawItem(t,n,i,r),m=h.getBBox(),y=a||m.width;y>p&&(p=y),"horizontal"===f?(g&&g<s.x+y-l&&(d=!0,s.x=l,s.y+=i+u),e.moveElementTo(h,s),s.x+=y+o):(v&&v<s.y+i+u-c&&(d=!0,s.x+=p+o,s.y=c,p=0),e.moveElementTo(h,s),s.y+=i+u)})),d&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=l,this.startY=c,this.adjustNavigation(t,r))},e.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var e=(this.get("itemName")||{}).style;if((0,_ut.mf)(e)){var n=this.getItems();n.forEach((function(r,i){var a=(0,Aut.pi)((0,Aut.pi)({},Uht),e(r,i,n)).fontSize;t<a&&(t=a)}))}else e&&(t=e.fontSize)}return t},e.prototype.drawMarker=function(t,e,n,r){var i=(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({x:0,y:r/2},e.style),{symbol:(0,_ut.U2)(n.marker,"symbol","circle")}),(0,_ut.U2)(n.marker,"style",{})),a=this.addShape(t,{type:"marker",id:this.getElementId("item-"+n.id+"-marker"),name:"legend-item-marker",attrs:i}),o=a.getBBox();a.attr("x",o.width/2);var u=a.attr(),s=u.stroke,l=u.fill;return s&&a.set("isStroke",!0),l&&a.set("isFill",!0),a},e.prototype.drawItemText=function(t,e,n,r,i,a,o){var u=n.formatter,s=n.style,l=(0,Aut.pi)((0,Aut.pi)({x:a,y:i/2,text:u?u(r[e],r,o):r[e]},Uht),(0,_ut.mf)(s)?s(r,o,this.getItems()):s);return this.addShape(t,{type:"text",id:this.getElementId("item-"+r.id+"-"+e),name:"legend-item-"+e,attrs:l})},e.prototype.drawRadio=function(t,e,n,r,i){var a,o,u=e.style||{},s=null!==(a=u.r)&&void 0!==a?a:r/2,l=3.6*s/8,c=[i+s,r/2-s],f=c[0],h=c[1],d=[f+s,h+s],p=d[0],g=d[1],v=[f,g+s],m=v[0],y=v[1],x=[i,h+s],b=x[0],w=x[1],S=n.showRadio,k=(0,Aut.pi)((0,Aut.pi)({path:[["M",f,h],["A",s,s,0,0,1,p,g],["L",p-l,g],["L",p,g],["A",s,s,0,0,1,m,y],["L",m,y-l],["L",m,y],["A",s,s,0,0,1,b,w],["L",b+l,w],["L",b,w],["A",s,s,0,0,1,f,h],["L",f,h+l]],stroke:"#000000",fill:"#ffffff"},u),{opacity:S?null!==(o=null==u?void 0:u.opacity)&&void 0!==o?o:.45:0}),C=this.addShape(t,{type:"path",id:this.getElementId("item-"+n.id+"-radio"),name:"legend-item-radio",attrs:k});return C.set("tip",e.tip),C},e.prototype.drawItem=function(t,e,n,r){var i="item-"+t.id,a=this.addGroup(r,{name:"legend-item-container",id:this.getElementId("item-container-"+i),delegateObject:{item:t,index:e}}),o=this.addGroup(a,{name:"legend-item",id:this.getElementId(i),delegateObject:{item:t,index:e}}),u=this.get("marker"),s=this.get("itemName"),l=this.get("itemValue"),c=this.get("itemBackground"),f=this.get("radio"),h=this.getLimitItemWidth(),d=0;if(u){var p=this.drawMarker(o,u,t,n),g=u.spacing,v=(0,_ut.U2)(t,["marker","spacing"]);(0,_ut.hj)(v)&&(g=v),d=p.getBBox().maxX+g}if(s){var m=this.drawItemText(o,"name",s,t,n,d,e);h&&xft(!0,m,(0,_ut.uZ)(h-d,0,h)),d=m.getBBox().maxX+s.spacing}if(l){var y=this.drawItemText(o,"value",l,t,n,d,e);h&&(l.alignRight?(y.attr({textAlign:"right",x:h}),xft(!0,y,(0,_ut.uZ)(h-d,0,h),"head")):xft(!0,y,(0,_ut.uZ)(h-d,0,h))),d=y.getBBox().maxX+l.spacing}if(f&&this.drawRadio(o,f,t,n,d),c){var x=o.getBBox();this.addShape(o,{type:"rect",name:"legend-item-background",id:this.getElementId(i+"-background"),attrs:(0,Aut.pi)({x:0,y:0,width:x.width,height:n},c.style)}).toBack()}return this.applyItemStates(t,o),o},e.prototype.adjustNavigation=function(t,e){var n=this,r=this.startX,i=this.startY,a=this.get("layout"),o=e.findAll((function(t){return"legend-item"===t.get("name")})),u=this.get("maxWidth"),s=this.get("maxHeight"),l=this.get("itemWidth"),c=this.get("itemSpacing"),f=this.getItemHeight(),h=(0,_ut.b$)({},zht,this.get("pageNavigator")),d=this.drawNavigation(t,a,"00/00",h),p=d.getBBox(),g={x:r,y:i},v=1,m=0,y=0,x=0,b=this.get("itemMarginBottom");if("horizontal"===a){var w=this.get("maxRow")||1,S=f+(1===w?0:b);this.pageHeight=S*w,(0,_ut.S6)(o,(function(t){var e=t.getBBox(),i=l||e.width;(m&&m<g.x+i+c||u<g.x+i+c+p.width)&&(1===v&&(m=g.x+c,n.pageWidth=m,n.moveElementTo(d,{x:u-c-p.width-p.minX,y:g.y+f/2-p.height/2-p.minY})),v+=1,g.x=r,g.y+=S),n.moveElementTo(t,g),t.getParent().setClip({type:"rect",attrs:{x:g.x,y:g.y,width:i+c,height:f}}),g.x+=i+c}))}else{(0,_ut.S6)(o,(function(t){var e=t.getBBox();e.width>y&&(y=e.width)})),x=y,y+=c,u&&(y=Math.min(u,y),x=Math.min(u,x)),this.pageWidth=y,this.pageHeight=s-Math.max(p.height,f+b);var k=Math.floor(this.pageHeight/(f+b));(0,_ut.S6)(o,(function(t,e){0!==e&&e%k==0&&(v+=1,g.x+=y,g.y=i),n.moveElementTo(t,g),t.getParent().setClip({type:"rect",attrs:{x:g.x,y:g.y,width:y,height:f}}),g.y+=f+b})),this.totalPagesCnt=v,this.moveElementTo(d,{x:r+x/2-p.width/2-p.minX,y:s-p.height-p.minY})}this.pageHeight&&this.pageWidth&&e.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),"horizontal"===a&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(v/this.get("maxRow")):this.totalPagesCnt=v,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(d),e.attr("matrix",this.getCurrentNavigationMatrix())},e.prototype.drawNavigation=function(t,e,n,r){var i={x:0,y:0},a=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),o=(0,_ut.U2)(r.marker,"style",{}),u=o.size,s=void 0===u?12:u,l=(0,Aut._T)(o,["size"]),c=this.drawArrow(a,i,Wht,"horizontal"===e?"up":"left",s,l);c.on("click",this.onNavigationBack);var f=c.getBBox();i.x+=f.width+2;var h=this.addShape(a,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:(0,Aut.pi)({x:i.x,y:i.y+s/2,text:n,textBaseline:"middle"},(0,_ut.U2)(r.text,"style"))}).getBBox();return i.x+=h.width+2,this.drawArrow(a,i,Hht,"horizontal"===e?"down":"right",s,l).on("click",this.onNavigationAfter),a},e.prototype.updateNavigation=function(t){var e=(0,_ut.b$)({},zht,this.get("pageNavigator")).marker.style,n=e.fill,r=e.opacity,i=e.inactiveFill,a=e.inactiveOpacity,o=this.currentPageIndex+"/"+this.totalPagesCnt,u=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),s=t?t.findById(this.getElementId(Wht)):this.getElementByLocalId(Wht),l=t?t.findById(this.getElementId(Hht)):this.getElementByLocalId(Hht);u.attr("text",o),s.attr("opacity",1===this.currentPageIndex?a:r),s.attr("fill",1===this.currentPageIndex?i:n),s.attr("cursor",1===this.currentPageIndex?"not-allowed":"pointer"),l.attr("opacity",this.currentPageIndex===this.totalPagesCnt?a:r),l.attr("fill",this.currentPageIndex===this.totalPagesCnt?i:n),l.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var c=s.getBBox().maxX+2;u.attr("x",c),c+=u.getBBox().width+2,this.updateArrowPath(l,{x:c,y:0})},e.prototype.drawArrow=function(t,e,n,r,i,a){var o=e.x,u=e.y,s=this.addShape(t,{type:"path",id:this.getElementId(n),name:n,attrs:(0,Aut.pi)({size:i,direction:r,path:[["M",o+i/2,u],["L",o,u+i],["L",o+i,u+i],["Z"]],cursor:"pointer"},a)});return s.attr("matrix",Yct({x:o+i/2,y:u+i/2},Vht[r])),s},e.prototype.updateArrowPath=function(t,e){var n=e.x,r=e.y,i=t.attr(),a=i.size,o=i.direction,u=Yct({x:n+a/2,y:r+a/2},Vht[o]);t.attr("path",[["M",n+a/2,r],["L",n,r+a],["L",n+a,r+a],["Z"]]),t.attr("matrix",u)},e.prototype.getCurrentNavigationMatrix=function(){var t=this,e=t.currentPageIndex,n=t.pageWidth,r=t.pageHeight;return qct("horizontal"===this.get("layout")?{x:0,y:r*(1-e)}:{x:n*(1-e),y:0})},e.prototype.applyItemStates=function(t,e){if(this.getItemStates(t).length>0){var n=e.getChildren(),r=this.get("itemStates");(0,_ut.S6)(n,(function(e){var n=e.get("name").split("-")[2],i=Xft(t,n,r);i&&(e.attr(i),"marker"!==n||e.get("isStroke")&&e.get("isFill")||(e.get("isStroke")&&e.attr("fill",null),e.get("isFill")&&e.attr("stroke",null)))}))}},e.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),e=this.get("maxItemWidth");return e?t&&(e=t<=e?t:e):t&&(e=t),e},e}(Nht),Xht=Ght,Yht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:wft.textColor,textBaseline:"middle",fontFamily:wft.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:wft.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},e.prototype.isSlider=function(){return!0},e.prototype.getValue=function(){return this.getCurrentValue()},e.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},e.prototype.setRange=function(t,e){this.update({min:t,max:e})},e.prototype.setValue=function(t){var e=this.getValue();this.set("value",t);var n=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(n),this.delegateEmit("valuechanged",{originValue:e,value:t})},e.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},e.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},e.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},e.prototype.bindHandlersEvent=function(t){var e=this;t.on("legend-handler-min:drag",(function(t){var n=e.getValueByCanvasPoint(t.x,t.y),r=e.getCurrentValue()[1];r<n&&(r=n),e.setValue([n,r])})),t.on("legend-handler-max:drag",(function(t){var n=e.getValueByCanvasPoint(t.x,t.y),r=e.getCurrentValue()[0];r>n&&(r=n),e.setValue([r,n])}))},e.prototype.bindRailEvent=function(t){},e.prototype.bindTrackEvent=function(t){var e=this,n=null;t.on("legend-track:dragstart",(function(t){n={x:t.x,y:t.y}})),t.on("legend-track:drag",(function(t){if(n){var r=e.getValueByCanvasPoint(n.x,n.y),i=e.getValueByCanvasPoint(t.x,t.y),a=e.getCurrentValue(),o=a[1]-a[0],u=e.getRange(),s=i-r;s<0?a[0]+s>u.min?e.setValue([a[0]+s,a[1]+s]):e.setValue([u.min,u.min+o]):s>0&&(s>0&&a[1]+s<u.max?e.setValue([a[0]+s,a[1]+s]):e.setValue([u.max-o,u.max])),n={x:t.x,y:t.y}}})),t.on("legend-track:dragend",(function(t){n=null}))},e.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},e.prototype.drawLabel=function(t,e){var n=this.get("label"),r=n.style,i=n.align,a=n.formatter,o=this.get(t),u=this.getLabelAlignAttrs(t,i),s="label-"+t;this.addShape(e,{type:"text",id:this.getElementId(s),name:"legend-label-"+t,attrs:(0,Aut.pi)((0,Aut.pi)({x:0,y:0,text:(0,_ut.mf)(a)?a(o):o},r),u)})},e.prototype.getLabelAlignAttrs=function(t,e){var n="center",r="middle";return this.isVertical()?(n="start",r="rail"!==e?"min"===t?"top":"bottom":"top"):"rail"!==e?(r="top",n="min"===t?"start":"end"):(n="start",r="middle"),{textAlign:n,textBaseline:r}},e.prototype.getRailPath=function(t,e,n,r){var i=this.get("rail"),a=i.size,o=i.defaultLength,u=i.type,s=this.isVertical(),l=n,c=r;l||(l=s?a:o),c||(c=s?o:a);var f=[];return"color"===u?(f.push(["M",t,e]),f.push(["L",t+l,e]),f.push(["L",t+l,e+c]),f.push(["L",t,e+c]),f.push(["Z"])):(f.push(["M",t+l,e]),f.push(["L",t+l,e+c]),f.push(["L",t,e+c]),f.push(["Z"])),f},e.prototype.drawRail=function(t){var e=this.get("rail").style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,Aut.pi)({path:this.getRailPath(0,0)},e)})},e.prototype.getTrackColor=function(t){var e,n=t.length;if(!n)return null;if(1===n)return t[0];e=this.isVertical()?"l(90)":"l(0)";for(var r=0;r<n;r++){e+=" "+r/(n-1)+":"+t[r]}return e},e.prototype.getTrackPath=function(t){var e=this.getRailShape(t).attr("path");return(0,_ut.d9)(e)},e.prototype.getClipTrackAttrs=function(t){var e,n,r,i,a=this.getCurrentValue(),o=a[0],u=a[1],s=this.getRailBBox(t),l=this.getPointByValue(o,t),c=this.getPointByValue(u,t);return this.isVertical()?(e=s.minX,n=l.y,r=s.width,i=c.y-l.y):(e=l.x,n=s.minY,r=c.x-l.x,i=s.height),{x:e,y:n,width:r,height:i}},e.prototype.getTrackAttrs=function(t){var e=this.get("track"),n=this.get("colors"),r=this.getTrackPath(t);return(0,_ut.CD)({path:r,fill:this.getTrackColor(n)},e.style)},e.prototype.resetTrackClip=function(t){var e=t||this.get("group"),n=this.getElementId("track"),r=e.findById(n),i=r.getClip(),a=this.getClipTrackAttrs(t);i?i.attr(a):r.setClip({type:"rect",attrs:a})},e.prototype.resetTrack=function(t){var e=this.getElementId("track"),n=t.findById(e),r=this.getTrackAttrs(t);n?n.attr(r):this.addShape(t,{type:"path",id:e,draggable:this.get("slidable"),name:"legend-track",attrs:r})},e.prototype.getPointByValue=function(t,e){var n=this.getRange(),r=n.min,i=(t-r)/(n.max-r),a=this.getRailBBox(e),o={x:0,y:0};return this.isVertical()?(o.x=a.minX+a.width/2,o.y=rft(a.minY,a.maxY,i)):(o.x=rft(a.minX,a.maxX,i),o.y=a.minY+a.height/2),o},e.prototype.getRailShape=function(t){return(t||this.get("group")).findById(this.getElementId("rail"))},e.prototype.getRailBBox=function(t){return this.getRailShape(t).getBBox()},e.prototype.getRailCanvasBBox=function(){return this.get("group").findById(this.getElementId("rail")).getCanvasBBox()},e.prototype.isVertical=function(){return"vertical"===this.get("layout")},e.prototype.getValueByCanvasPoint=function(t,e){var n=this.getRange(),r=n.min,i=n.max,a=this.getRailCanvasBBox(),o=this.isVertical(),u=this.get("step"),s=rft(r,i,o?(e-a.minY)/a.height:(t-a.minX)/a.width);u&&(s=r+Math.round((s-r)/u)*u);return s>i&&(s=i),s<r&&(s=r),s},e.prototype.getCurrentValue=function(){var t=this.get("value");if(!t){var e=this.get("values");return e?[Math.max(Math.min.apply(Math,(0,Aut.pr)(e,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,(0,Aut.pr)(e,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return t},e.prototype.resetHandlers=function(t){var e=this.getCurrentValue(),n=e[0],r=e[1];this.resetHandler(t,"min",n),this.resetHandler(t,"max",r)},e.prototype.getHandlerPath=function(t,e){var n=this.isVertical(),r=[],i=t.size,a=e.x,o=e.y,u=1.4*i,s=i/2,l=i/6;if(n){var c=a+.4*u;r.push(["M",a,o]),r.push(["L",c,o+s]),r.push(["L",a+u,o+s]),r.push(["L",a+u,o-s]),r.push(["L",c,o-s]),r.push(["Z"]),r.push(["M",c,o+l]),r.push(["L",a+u-2,o+l]),r.push(["M",c,o-l]),r.push(["L",a+u-2,o-l])}else{var f=o+.4*u;r.push(["M",a,o]),r.push(["L",a-s,f]),r.push(["L",a-s,o+u]),r.push(["L",a+s,o+u]),r.push(["L",a+s,f]),r.push(["Z"]),r.push(["M",a-l,f]),r.push(["L",a-l,o+u-2]),r.push(["M",a+l,f]),r.push(["L",a+l,o+u-2])}return r},e.prototype.resetHandler=function(t,e,n){var r=this.getPointByValue(n,t),i=this.get("handler"),a=this.getHandlerPath(i,r),o=this.getElementId("handler-"+e),u=t.findById(o),s=this.isVertical();u?u.attr("path",a):this.addShape(t,{type:"path",name:"legend-handler-"+e,draggable:!0,id:o,attrs:(0,Aut.pi)((0,Aut.pi)({path:a},i.style),{cursor:s?"ns-resize":"ew-resize"})})},e.prototype.fixedElements=function(t){var e=t.findById(this.getElementId("rail")),n=t.findById(this.getElementId("label-min")),r=t.findById(this.getElementId("label-max")),i=this.getDrawPoint();this.isVertical()?this.fixedVertail(n,r,e,i):this.fixedHorizontal(n,r,e,i)},e.prototype.fitRailLength=function(t,e,n,r){var i=this.isVertical()?"height":"width",a=this.get("label"),o=a.align,u=a.spacing,s=this.get("max"+(0,_ut.jC)(i));if(s){var l=("rail"===o?n[i]+t[i]+e[i]+2*u:n[i])-s;l>0&&this.changeRailLength(r,i,n[i]-l)}},e.prototype.changeRailLength=function(t,e,n){var r,i=t.getBBox();r="height"===e?this.getRailPath(i.x,i.y,i.width,n):this.getRailPath(i.x,i.y,n,i.height),t.attr("path",r)},e.prototype.changeRailPosition=function(t,e,n){var r=t.getBBox(),i=this.getRailPath(e,n,r.width,r.height);t.attr("path",i)},e.prototype.fixedHorizontal=function(t,e,n,r){var i=this.get("label"),a=i.align,o=i.spacing,u=n.getBBox(),s=t.getBBox(),l=e.getBBox(),c=u.height;this.fitRailLength(s,l,u,n),u=n.getBBox(),"rail"===a?(t.attr({x:r.x,y:r.y+c/2}),this.changeRailPosition(n,r.x+s.width+o,r.y),e.attr({x:r.x+s.width+u.width+2*o,y:r.y+c/2})):"top"===a?(t.attr({x:r.x,y:r.y}),e.attr({x:r.x+u.width,y:r.y}),this.changeRailPosition(n,r.x,r.y+s.height+o)):(this.changeRailPosition(n,r.x,r.y),t.attr({x:r.x,y:r.y+u.height+o}),e.attr({x:r.x+u.width,y:r.y+u.height+o}))},e.prototype.fixedVertail=function(t,e,n,r){var i=this.get("label"),a=i.align,o=i.spacing,u=n.getBBox(),s=t.getBBox(),l=e.getBBox();if(this.fitRailLength(s,l,u,n),u=n.getBBox(),"rail"===a)t.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x,r.y+s.height+o),e.attr({x:r.x,y:r.y+s.height+u.height+2*o});else if("right"===a)t.attr({x:r.x+u.width+o,y:r.y}),this.changeRailPosition(n,r.x,r.y),e.attr({x:r.x+u.width+o,y:r.y+u.height});else{var c=Math.max(s.width,l.width);t.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x+c+o,r.y),e.attr({x:r.x,y:r.y+u.height})}},e}(Nht),qht=Yht,$ht="g2-tooltip",Jht="g2-tooltip-title",Kht="g2-tooltip-list",Qht="g2-tooltip-list-item",tdt="g2-tooltip-marker",edt="g2-tooltip-value",ndt="g2-tooltip-name",rdt="g2-tooltip-crosshair-x",idt="g2-tooltip-crosshair-y",adt=((Pht={})[""+$ht]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:wft.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},Pht[""+Jht]={marginBottom:"4px"},Pht[""+Kht]={margin:"0px",listStyleType:"none",padding:"0px"},Pht[""+Qht]={listStyleType:"none",marginBottom:"4px"},Pht[""+tdt]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},Pht[""+edt]={display:"inline-block",float:"right",marginLeft:"30px"},Pht[""+rdt]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Pht[""+idt]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Pht);var odt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+$ht+'"><div class="'+Jht+'"></div><ul class="'+Kht+'"></ul></div>',itemTpl:'<li class="'+Qht+'" data-index={index}>\n          <span class="'+tdt+'" style="background:{color}"></span>\n          <span class="'+ndt+'">{name}</span>:\n          <span class="'+edt+'">{value}</span>\n        </li>',xCrosshairTpl:'<div class="'+rdt+'"></div>',yCrosshairTpl:'<div class="'+idt+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:$ht,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:adt})},e.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},e.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},e.prototype.show=function(){var t=this.getContainer();t&&!this.destroyed&&(this.set("visible",!0),Gut(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},e.prototype.hide=function(){var t=this.getContainer();t&&!this.destroyed&&(this.set("visible",!1),Gut(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},e.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},e.prototype.setCrossHairsVisible=function(t){var e=t?"":"none",n=this.get("xCrosshairDom"),r=this.get("yCrosshairDom");n&&Gut(n,{display:e}),r&&Gut(r,{display:e})},e.prototype.initContainer=function(){if(t.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var e=this.getHtmlContentNode();this.get("parent").appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()}},e.prototype.updateInner=function(e){this.get("customContent")?this.renderCustomContent():(function(t,e){var n=!1;return(0,_ut.S6)(e,(function(e){if((0,_ut.wH)(t,e))return n=!0,!1})),n}(e,["title","showTitle"])&&this.resetTitle(),(0,_ut.wH)(e,"items")&&this.renderItems()),t.prototype.updateInner.call(this,e)},e.prototype.initDom=function(){this.cacheDoms()},e.prototype.removeDom=function(){t.prototype.removeDom.call(this),this.clearCrosshairs()},e.prototype.resetPosition=function(){var t,e=this.get("x"),n=this.get("y"),r=this.get("offset"),i=this.getOffset(),a=i.offsetX,o=i.offsetY,u=this.get("position"),s=this.get("region"),l=this.getContainer(),c=this.getBBox(),f=c.width,h=c.height;s&&(t=eft(s));var d=function(t,e,n,r,i,a,o){var u=function(t,e,n,r,i,a){var o=t,u=e;switch(a){case"left":o=t-r-n,u=e-i/2;break;case"right":o=t+n,u=e-i/2;break;case"top":o=t-r/2,u=e-i-n;break;case"bottom":o=t-r/2,u=e+n;break;default:o=t+n,u=e-i-n}return{x:o,y:u}}(t,e,n,r,i,a);if(o){var s=function(t,e,n,r,i){return{left:t<i.x,right:t+n>i.x+i.width,top:e<i.y,bottom:e+r>i.y+i.height}}(u.x,u.y,r,i,o);"auto"===a?(s.right&&(u.x=Math.max(0,t-r-n)),s.top&&(u.y=Math.max(0,e-i-n))):"top"===a||"bottom"===a?(s.left&&(u.x=o.x),s.right&&(u.x=o.x+o.width-r),"top"===a&&s.top&&(u.y=e+n),"bottom"===a&&s.bottom&&(u.y=e-i-n)):(s.top&&(u.y=o.y),s.bottom&&(u.y=o.y+o.height-i),"left"===a&&s.left&&(u.x=t+n),"right"===a&&s.right&&(u.x=t-r-n))}return u}(e,n,r,f,h,u,t);Gut(l,{left:uft(d.x+a),top:uft(d.y+o)}),this.resetCrosshairs()},e.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),e=this.get("parent"),n=this.get("container");n&&n.parentNode===e?e.replaceChild(t,n):e.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},e.prototype.getHtmlContentNode=function(){var t,e=this.get("customContent");if(e){var n=e(this.get("title"),this.get("items"));t=(0,_ut.kK)(n)?n:Vut(n)}return t},e.prototype.cacheDoms=function(){var t=this.getContainer(),e=t.getElementsByClassName(Jht)[0],n=t.getElementsByClassName(Kht)[0];this.set("titleDom",e),this.set("listDom",n)},e.prototype.resetTitle=function(){var t=this.get("title");this.get("showTitle")&&t?this.setTitle(t):this.setTitle("")},e.prototype.setTitle=function(t){var e=this.get("titleDom");e&&(e.innerText=t)},e.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),e=this.get("crosshairs");if(t&&e){var n=eft(t),r=this.get("xCrosshairDom"),i=this.get("yCrosshairDom");"x"===e?(this.resetCrosshair("x",n),i&&(i.remove(),this.set("yCrosshairDom",null))):"y"===e?(this.resetCrosshair("y",n),r&&(r.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",n),this.resetCrosshair("y",n)),this.setCrossHairsVisible(this.get("visible"))}else this.clearCrosshairs()},e.prototype.resetCrosshair=function(t,e){var n=this.checkCrosshair(t),r=this.get(t);Gut(n,"x"===t?{left:uft(r),top:uft(e.y),height:uft(e.height)}:{top:uft(r),left:uft(e.x),width:uft(e.width)})},e.prototype.checkCrosshair=function(t){var e=t+"CrosshairDom",n=t+"CrosshairTpl",r="CROSSHAIR_"+t.toUpperCase(),i=O[r],a=this.get(e),o=this.get("parent");return a||(a=Vut(this.get(n)),this.applyStyle(i,a),o.appendChild(a),this.set(e,a)),a},e.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),e=this.get("itemTpl"),n=this.get("listDom");n&&((0,_ut.S6)(t,(function(t){var r=Tst.toCSSGradient(t.color),i=(0,Aut.pi)((0,Aut.pi)({},t),{color:r}),a=Vut((0,_ut.ng)(e,i));n.appendChild(a)})),this.applyChildrenStyles(n,this.get("domStyles")))},e.prototype.clearItemDoms=function(){this.get("listDom")&&tft(this.get("listDom"))},e.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),e=this.get("yCrosshairDom");t&&t.remove(),e&&e.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},e}(Wft),udt=odt,sdt={opacity:0},ldt={stroke:"#C5C5C5",strokeOpacity:.85},cdt={fill:"#CACED4",opacity:.85},fdt=n(85687);function hdt(t){return function(t){return(0,_ut.UI)(t,(function(t,e){return[0===e?"M":"L",t[0],t[1]]}))}(t)}function ddt(t,e,n,r){void 0===r&&(r=!0);var i=new Rlt({values:t}),a=new Xst({values:(0,_ut.UI)(t,(function(t,e){return e}))}),o=(0,_ut.UI)(t,(function(t,r){return[a.scale(r)*e,n-i.scale(t)*n]}));return r?function(t){if(t.length<=2)return hdt(t);var e=[];(0,_ut.S6)(t,(function(t){(0,_ut.Xy)(t,e.slice(e.length-2))||e.push(t[0],t[1])}));var n=(0,fdt.e9)(e,!1),r=(0,_ut.YM)(t),i=r[0],a=r[1];return n.unshift(["M",i,a]),n}(o):hdt(o)}function pdt(t,e,n,r){var i=(0,Aut.pr)(t),a=function(t,e){var n=new Rlt({values:t}),r=n.max<0?n.max:Math.max(0,n.min);return e-n.scale(r)*e}(r,n);return i.push(["L",e,a]),i.push(["L",0,a]),i.push(["Z"]),i}var gdt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:sdt,lineStyle:ldt,areaStyle:cdt})},e.prototype.renderInner=function(t){var e=this.cfg,n=e.width,r=e.height,i=e.data,a=e.smooth,o=e.isArea,u=e.backgroundStyle,s=e.lineStyle,l=e.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,Aut.pi)({x:0,y:0,width:n,height:r},u)});var c=ddt(i,n,r,a);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:(0,Aut.pi)({path:c},s)}),o){var f=pdt(c,n,r,i);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:(0,Aut.pi)({path:f},l)})}},e.prototype.applyOffset=function(){var t=this.cfg,e=t.x,n=t.y;this.moveElementTo(this.get("group"),{x:e,y:n})},e}(vft),vdt={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},mdt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"handler",x:0,y:0,width:10,height:24,style:vdt})},e.prototype.renderInner=function(t){var e=this.cfg,n=e.width,r=e.height,i=e.style,a=i.fill,o=i.stroke,u=i.radius,s=i.opacity,l=i.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:n,height:r,fill:a,stroke:o,radius:u,opacity:s,cursor:l}});var c=1/3*n,f=2/3*n,h=1/4*r,d=3/4*r;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:c,y1:h,x2:c,y2:d,stroke:o,cursor:l}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:f,y1:h,x2:f,y2:d,stroke:o,cursor:l}})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",(function(){var e=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",e),t.draw()})),this.get("group").on("mouseleave",(function(){var e=t.get("style").fill;t.getElementByLocalId("background").attr("fill",e),t.draw()}))},e.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},e}(vft),ydt={fill:"#416180",opacity:.05},xdt={fill:"#5B8FF9",opacity:.15,cursor:"move"},bdt={width:10,height:24},wdt={textBaseline:"middle",fill:"#000",opacity:.45},Sdt="sliderchange",kdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onMouseDown=function(t){return function(n){e.currentTarget=t;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),e.prevX=(0,_ut.U2)(r,"touches.0.pageX",r.pageX),e.prevY=(0,_ut.U2)(r,"touches.0.pageY",r.pageY);var i=e.getContainerDOM();i.addEventListener("mousemove",e.onMouseMove),i.addEventListener("mouseup",e.onMouseUp),i.addEventListener("mouseleave",e.onMouseUp),i.addEventListener("touchmove",e.onMouseMove),i.addEventListener("touchend",e.onMouseUp),i.addEventListener("touchcancel",e.onMouseUp)}},e.onMouseMove=function(t){var n=e.cfg.width,r=[e.get("start"),e.get("end")];t.stopPropagation(),t.preventDefault();var i=(0,_ut.U2)(t,"touches.0.pageX",t.pageX),a=(0,_ut.U2)(t,"touches.0.pageY",t.pageY),o=i-e.prevX,u=e.adjustOffsetRange(o/n);e.updateStartEnd(u),e.updateUI(e.getElementByLocalId("foreground"),e.getElementByLocalId("minText"),e.getElementByLocalId("maxText")),e.prevX=i,e.prevY=a,e.draw(),e.emit(Sdt,[e.get("start"),e.get("end")].sort()),e.delegateEmit("valuechanged",{originValue:r,value:[e.get("start"),e.get("end")]})},e.onMouseUp=function(){e.currentTarget&&(e.currentTarget=void 0);var t=e.getContainerDOM();t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))},e}return(0,Aut.ZT)(e,t),e.prototype.setRange=function(t,e){this.set("minLimit",t),this.set("maxLimit",e);var n=this.get("start"),r=this.get("end"),i=(0,_ut.uZ)(n,t,e),a=(0,_ut.uZ)(r,t,e);this.get("isInit")||n===i&&r===a||this.setValue([i,a])},e.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},e.prototype.setValue=function(t){var e=this.getRange();if((0,_ut.kJ)(t)&&2===t.length){var n=[this.get("start"),this.get("end")];this.update({start:(0,_ut.uZ)(t[0],e.min,e.max),end:(0,_ut.uZ)(t[1],e.min,e.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:n,value:t})}},e.prototype.getValue=function(){return[this.get("start"),this.get("end")]},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:ydt,foregroundStyle:xdt,handlerStyle:bdt,textStyle:wdt}})},e.prototype.update=function(e){var n=e.start,r=e.end,i=(0,Aut.pi)({},e);(0,_ut.UM)(n)||(i.start=(0,_ut.uZ)(n,0,1)),(0,_ut.UM)(r)||(i.end=(0,_ut.uZ)(r,0,1)),t.prototype.update.call(this,i),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},e.prototype.init=function(){this.set("start",(0,_ut.uZ)(this.get("start"),0,1)),this.set("end",(0,_ut.uZ)(this.get("end"),0,1)),t.prototype.init.call(this)},e.prototype.render=function(){t.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},e.prototype.renderInner=function(t){var e=this.cfg,n=(e.start,e.end,e.width),r=e.height,i=e.trendCfg,a=void 0===i?{}:i,o=e.minText,u=e.maxText,s=e.backgroundStyle,l=void 0===s?{}:s,c=e.foregroundStyle,f=void 0===c?{}:c,h=e.textStyle,d=void 0===h?{}:h,p=(0,_ut.b$)({},vdt,this.cfg.handlerStyle);(0,_ut.dp)((0,_ut.U2)(a,"data"))&&(this.trend=this.addComponent(t,(0,Aut.pi)({component:gdt,id:this.getElementId("trend"),x:0,y:0,width:n,height:r},a))),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,Aut.pi)({x:0,y:0,width:n,height:r},l)});this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:(0,Aut.pi)({y:r/2,textAlign:"right",text:o,silent:!1},d)}),this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:(0,Aut.pi)({y:r/2,textAlign:"left",text:u,silent:!1},d)}),this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,Aut.pi)({y:0,height:r},f)});var g=(0,_ut.U2)(p,"width",10),v=(0,_ut.U2)(p,"height",24);this.minHandler=this.addComponent(t,{component:mdt,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(r-v)/2,width:g,height:v,cursor:"ew-resize",style:p}),this.maxHandler=this.addComponent(t,{component:mdt,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(r-v)/2,width:g,height:v,cursor:"ew-resize",style:p})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.updateUI=function(t,e,n){var r=this.cfg,i=r.start,a=r.end,o=r.width,u=r.minText,s=r.maxText,l=r.handlerStyle,c=r.height,f=i*o,h=a*o;this.trend&&(this.trend.update({width:o,height:c}),this.get("updateAutoRender")||this.trend.render()),t.attr("x",f),t.attr("width",h-f);var d=(0,_ut.U2)(l,"width",10);e.attr("text",u),n.attr("text",s);var p=this._dodgeText([f,h],e,n),g=p[0],v=p[1];this.minHandler&&(this.minHandler.update({x:f-d/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,_ut.S6)(g,(function(t,n){return e.attr(n,t)})),this.maxHandler&&(this.maxHandler.update({x:h-d/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,_ut.S6)(v,(function(t,e){return n.attr(e,t)}))},e.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var e=t.findById(this.getElementId("foreground"));e.on("mousedown",this.onMouseDown("foreground")),e.on("touchstart",this.onMouseDown("foreground"))},e.prototype.adjustOffsetRange=function(t){var e=this.cfg,n=e.start,r=e.end;switch(this.currentTarget){case"minHandler":var i=0-n,a=1-n;return Math.min(a,Math.max(i,t));case"maxHandler":i=0-r,a=1-r;return Math.min(a,Math.max(i,t));case"foreground":i=0-n,a=1-r;return Math.min(a,Math.max(i,t))}},e.prototype.updateStartEnd=function(t){var e=this.cfg,n=e.start,r=e.end;switch(this.currentTarget){case"minHandler":n+=t;break;case"maxHandler":r+=t;break;case"foreground":n+=t,r+=t}this.set("start",n),this.set("end",r)},e.prototype._dodgeText=function(t,e,n){var r,i,a=this.cfg,o=a.handlerStyle,u=a.width,s=(0,_ut.U2)(o,"width",10),l=t[0],c=t[1],f=!1;l>c&&(l=(r=[c,l])[0],c=r[1],e=(i=[n,e])[0],n=i[1],f=!0);var h=e.getBBox(),d=n.getBBox(),p=h.width>l-2?{x:l+s/2+2,textAlign:"left"}:{x:l-s/2-2,textAlign:"right"},g=d.width>u-c-2?{x:c-s/2-2,textAlign:"right"}:{x:c+s/2+2,textAlign:"left"};return f?[g,p]:[p,g]},e.prototype.draw=function(){var t=this.get("container"),e=t&&t.get("canvas");e&&e.draw()},e.prototype.getContainerDOM=function(){var t=this.get("container"),e=t&&t.get("canvas");return e&&e.get("container")},e}(vft);function Cdt(t,e,n){if(t){if("function"==typeof t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if("function"==typeof t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}var Edt={default:{trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},hover:{thumbColor:"rgba(0,0,0,0.2)"}},Mdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clearEvents=_ut.ZT,e.onStartEvent=function(t){return function(n){e.isMobile=t,n.originalEvent.preventDefault();var r=t?(0,_ut.U2)(n.originalEvent,"touches.0.clientX"):n.clientX,i=t?(0,_ut.U2)(n.originalEvent,"touches.0.clientY"):n.clientY;e.startPos=e.cfg.isHorizontal?r:i,e.bindLaterEvent()}},e.bindLaterEvent=function(){var t=e.getContainerDOM(),n=[];n=e.isMobile?[Cdt(t,"touchmove",e.onMouseMove),Cdt(t,"touchend",e.onMouseUp),Cdt(t,"touchcancel",e.onMouseUp)]:[Cdt(t,"mousemove",e.onMouseMove),Cdt(t,"mouseup",e.onMouseUp),Cdt(t,"mouseleave",e.onMouseUp)],e.clearEvents=function(){n.forEach((function(t){t.remove()}))}},e.onMouseMove=function(t){var n=e.cfg,r=n.isHorizontal,i=n.thumbOffset;t.preventDefault();var a=e.isMobile?(0,_ut.U2)(t,"touches.0.clientX"):t.clientX,o=e.isMobile?(0,_ut.U2)(t,"touches.0.clientY"):t.clientY,u=r?a:o,s=u-e.startPos;e.startPos=u,e.updateThumbOffset(i+s)},e.onMouseUp=function(t){t.preventDefault(),e.clearEvents()},e.onTrackClick=function(t){var n=e.cfg,r=n.isHorizontal,i=n.x,a=n.y,o=n.thumbLen,u=e.getContainerDOM().getBoundingClientRect(),s=t.clientX,l=t.clientY,c=r?s-u.left-i-o/2:l-u.top-a-o/2,f=e.validateRange(c);e.updateThumbOffset(f)},e.onThumbMouseOver=function(){var t=e.cfg.theme.hover.thumbColor;e.getElementByLocalId("thumb").attr("stroke",t),e.draw()},e.onThumbMouseOut=function(){var t=e.cfg.theme.default.thumbColor;e.getElementByLocalId("thumb").attr("stroke",t),e.draw()},e}return(0,Aut.ZT)(e,t),e.prototype.setRange=function(t,e){this.set("minLimit",t),this.set("maxLimit",e);var n=this.getValue(),r=(0,_ut.uZ)(n,t,e);n===r||this.get("isInit")||this.setValue(r)},e.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},e.prototype.setValue=function(t){var e=this.getRange(),n=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,_ut.uZ)(t,e.min,e.max)}),this.delegateEmit("valuechange",{originalValue:n,value:this.getValue()})},e.prototype.getValue=function(){return(0,_ut.uZ)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:Edt})},e.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.renderTrackShape=function(t){var e=this.cfg,n=e.trackLen,r=e.theme,i=void 0===r?{default:{}}:r,a=(0,_ut.b$)({},Edt,i).default,o=a.lineCap,u=a.trackColor,s=a.size,l=(0,_ut.U2)(this.cfg,"size",s),c=this.get("isHorizontal")?{x1:0+l/2,y1:l/2,x2:n-l/2,y2:l/2,lineWidth:l,stroke:u,lineCap:o}:{x1:l/2,y1:0+l/2,x2:l/2,y2:n-l/2,lineWidth:l,stroke:u,lineCap:o};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:c})},e.prototype.renderThumbShape=function(t){var e=this.cfg,n=e.thumbOffset,r=e.thumbLen,i=e.theme,a=(0,_ut.b$)({},Edt,i).default,o=a.size,u=a.lineCap,s=a.thumbColor,l=(0,_ut.U2)(this.cfg,"size",o),c=this.get("isHorizontal")?{x1:n+l/2,y1:l/2,x2:n+r-l/2,y2:l/2,lineWidth:l,stroke:s,lineCap:u,cursor:"default"}:{x1:l/2,y1:n+l/2,x2:l/2,y2:n+r-l/2,lineWidth:l,stroke:s,lineCap:u,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:c})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp),t.findById(this.getElementId("track")).on("click",this.onTrackClick);var e=t.findById(this.getElementId("thumb"));e.on("mouseover",this.onThumbMouseOver),e.on("mouseout",this.onThumbMouseOut)},e.prototype.getContainerDOM=function(){var t=this.get("container"),e=t&&t.get("canvas");return e&&e.get("container")},e.prototype.validateRange=function(t){var e=this.cfg,n=e.thumbLen,r=e.trackLen,i=t;return t+n>r?i=r-n:t+n<n&&(i=0),i},e.prototype.draw=function(){var t=this.get("container"),e=t&&t.get("canvas");e&&e.draw()},e.prototype.updateThumbOffset=function(t){var e=this.cfg,n=e.thumbOffset,r=e.isHorizontal,i=e.thumbLen,a=e.size,o=this.validateRange(t);if(o!==n){var u=this.getElementByLocalId("thumb");r?u.attr({x1:o+a/2,x2:o+i-a/2}):u.attr({y1:o+a/2,y2:o+i-a/2}),this.emitOffsetChange(o)}},e.prototype.emitOffsetChange=function(t){var e=this.cfg,n=e.thumbOffset,r=e.trackLen,i=e.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:(0,_ut.uZ)(t/(r-i),0,1)}),this.delegateEmit("valuechange",{originalValue:n,value:t})},e}(vft),Odt=mht,Adt=xht,_dt=Rht,Ddt=Bht,Tdt=Xht,Fdt=qht,Idt=udt;function Pdt(t){return 1===Array.from(new Set(t)).length}function jdt(t){return((0,_ut.VV)(t)+(0,_ut.Fp)(t))/2}function Bdt(t,e,n,r){return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}}function Ldt(t,e,n,r,i,a){void 0===a&&(a=0);var o=Bdt(t,e,n,r),u=Bdt(t,e,n,i),s=Bdt(t,e,a,r),l=Bdt(t,e,a,i);if(i-r==2*Math.PI){var c=Bdt(t,e,n,r+Math.PI),f=Bdt(t,e,a,r+Math.PI),h=[["M",o.x,o.y],["A",n,n,0,1,1,c.x,c.y],["A",n,n,0,1,1,u.x,u.y],["M",s.x,s.y]];return a&&(h.push(["A",a,a,0,1,0,f.x,f.y]),h.push(["A",a,a,0,1,0,l.x,l.y])),h.push(["M",o.x,o.y]),h.push(["Z"]),h}var d=i-r<=Math.PI?0:1,p=[["M",o.x,o.y],["A",n,n,0,d,1,u.x,u.y],["L",l.x,l.y]];return a&&p.push(["A",a,a,0,d,0,s.x,s.y]),p.push(["L",o.x,o.y]),p.push(["Z"]),p}function Rdt(t,e,n,r,i){var a=Bdt(t,e,n,r),o=Bdt(t,e,n,i);if((0,_ut.vQ)(i-r,2*Math.PI)){var u=Bdt(t,e,n,r+Math.PI);return[["M",a.x,a.y],["A",n,n,0,1,1,u.x,u.y],["A",n,n,0,1,1,a.x,a.y],["A",n,n,0,1,0,u.x,u.y],["A",n,n,0,1,0,a.x,a.y],["Z"]]}var s=i-r<=Math.PI?0:1;return[["M",a.x,a.y],["A",n,n,0,s,1,o.x,o.y]]}function Zdt(t,e){var n,r,i=function(t){if((0,_ut.xb)(t))return null;var e=t[0].x,n=t[0].x,r=t[0].y,i=t[0].y;return(0,_ut.S6)(t,(function(t){e=e>t.x?t.x:e,n=n<t.x?t.x:n,r=r>t.y?t.y:r,i=i<t.y?t.y:i})),{minX:e,maxX:n,minY:r,maxY:i,centerX:(e+n)/2,centerY:(r+i)/2}}(t.points),a=e.startAngle,o=e.endAngle-a;return e.isTransposed?(n=i.maxY*o,r=i.minY*o):(n=i.maxX*o,r=i.minX*o),{startAngle:r+=a,endAngle:n+=a}}function Ndt(t,e){var n=t.attr(),r=e.attr();return(0,_ut.S6)(n,(function(t,e){void 0===r[e]&&(r[e]=void 0)})),r}function zdt(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}function Udt(t,e){return"object"==typeof t&&e.forEach((function(e){delete t[e]})),t}function Hdt(t,e,n){var r,i;void 0===e&&(e=[]),void 0===n&&(n=new Map);try{for(var a=(0,Aut.XA)(t),o=a.next();!o.done;o=a.next()){var u=o.value;n.has(u)||(e.push(u),n.set(u,!0))}}catch(s){r={error:s}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return e}var Wdt=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.height=r,this.width=n}return t.fromRange=function(e,n,r,i){return new t(e,n,r-e,i-n)},t.fromObject=function(e){return new t(e.minX,e.minY,e.width,e.height)},Object.defineProperty(t.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},t.prototype.contains=function(t){return t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.clone();return(0,_ut.S6)(t,(function(t){n.x=Math.min(t.x,n.x),n.y=Math.min(t.y,n.y),n.width=Math.max(t.maxX,n.maxX)-n.x,n.height=Math.max(t.maxY,n.maxY)-n.y})),n},t.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.clone();return(0,_ut.S6)(t,(function(t){n.x=Math.max(t.x,n.x),n.y=Math.max(t.y,n.y),n.width=Math.min(t.maxX,n.maxX)-n.x,n.height=Math.min(t.maxY,n.maxY)-n.y})),n},t.prototype.cut=function(e,n){var r=e.width,i=e.height;switch(n){case Eut.TOP:case Eut.TOP_LEFT:case Eut.TOP_RIGHT:return t.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case Eut.RIGHT:case Eut.RIGHT_TOP:case Eut.RIGHT_BOTTOM:return t.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case Eut.BOTTOM:case Eut.BOTTOM_LEFT:case Eut.BOTTOM_RIGHT:return t.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case Eut.LEFT:case Eut.LEFT_TOP:case Eut.LEFT_BOTTOM:return t.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},t.prototype.shrink=function(e){var n=(0,Aut.CR)(e,4),r=n[0],i=n[1],a=n[2],o=n[3];return new t(this.x+o,this.y+r,this.width-o-i,this.height-r-a)},t.prototype.expand=function(e){var n=(0,Aut.CR)(e,4),r=n[0],i=n[1],a=n[2],o=n[3];return new t(this.x-o,this.y-r,this.width+o+i,this.height+r+a)},t.prototype.exceed=function(t){return[Math.max(-this.minY+t.minY,0),Math.max(this.maxX-t.maxX,0),Math.max(this.maxY-t.maxY,0),Math.max(-this.minX+t.minX,0)]},t.prototype.collide=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.size=function(){return this.width*this.height},t.prototype.isPointIn=function(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY},t}();function Vdt(t){if(t.isPolar&&!t.isTransposed)return(t.endAngle-t.startAngle)*t.getRadius();var e=t.convert({x:0,y:0}),n=t.convert({x:1,y:0});return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Gdt(t,e){var n=t.getCenter();return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Xdt(t,e){var n=t.getCenter();return Math.atan2(e.y-n.y,e.x-n.x)}function Ydt(t,e){void 0===e&&(e=0);var n,r=t.start,i=t.end,a=t.getWidth(),o=t.getHeight();if(t.isPolar){var u=t.startAngle,s=t.endAngle,l=t.getCenter(),c=t.getRadius();return{type:"path",startState:{path:Ldt(l.x,l.y,c+e,u,u)},endState:function(t){var n=(s-u)*t+u;return{path:Ldt(l.x,l.y,c+e,u,n)}},attrs:{path:Ldt(l.x,l.y,c+e,u,s)}}}return n=t.isTransposed?{height:o+2*e}:{width:a+2*e},{type:"rect",startState:{x:r.x-e,y:i.y-e,width:t.isTransposed?a+2*e:0,height:t.isTransposed?0:o+2*e},endState:n,attrs:{x:r.x-e,y:i.y-e,width:a+2*e,height:o+2*e}}}var qdt=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function $dt(t,e,n,r){return void 0===e&&(e={}),e.type?e.type:"identity"!==t.type&&zut.includes(n)&&["interval"].includes(r)||t.isCategory?"cat":t.type}function Jdt(t,e,n){var r=e||[];if((0,_ut.hj)(t)||(0,_ut.UM)((0,_ut.Wx)(r,t))&&(0,_ut.xb)(n))return new(Qlt("identity"))({field:t.toString(),values:[t]});var i=(0,_ut.I)(r,t),a=(0,_ut.U2)(n,"type",function(t){var e="linear";return qdt.test(t)?e="timeCat":(0,_ut.HD)(t)&&(e="cat"),e}(i[0]));return new(Qlt(a))((0,Aut.pi)({field:t,values:i},n))}function Kdt(t){return t.alias||t.field}function Qdt(t,e,n){var r,i=t.values.length;if(1===i)r=[.5,1];else{var a=0;r=function(t){if(t.isPolar){var e=t.startAngle;return t.endAngle-e==2*Math.PI}return!1}(e)?e.isTransposed?[(a=1/i*(0,_ut.U2)(n,"widthRatio.multiplePie",1/1.3))/2,1-a/2]:[0,1-1/i]:[a=1/i/2,1-a]}return r}function tpt(t){var e=t.values.filter((function(t){return!(0,_ut.UM)(t)&&!isNaN(t)}));return Math.max.apply(Math,(0,Aut.ev)((0,Aut.ev)([],(0,Aut.CR)(e),!1),[(0,_ut.UM)(t.max)?-1/0:t.max],!1))}function ept(t,e){var n={start:{x:0,y:0},end:{x:0,y:0}};t.isRect?n=function(t){var e,n;switch(t){case Eut.TOP:e={x:0,y:1},n={x:1,y:1};break;case Eut.RIGHT:e={x:1,y:0},n={x:1,y:1};break;case Eut.BOTTOM:e={x:0,y:0},n={x:1,y:0};break;case Eut.LEFT:e={x:0,y:0},n={x:0,y:1};break;default:e=n={x:0,y:0}}return{start:e,end:n}}(e):t.isPolar&&(n=function(t){var e,n;return t.isTransposed?(e={x:0,y:0},n={x:1,y:0}):(e={x:0,y:0},n={x:0,y:1}),{start:e,end:n}}(t));var r=n.start,i=n.end;return{start:t.convert(r),end:t.convert(i)}}function npt(t){var e=t.start,n=t.end;return e.x===n.x}function rpt(t,e){var n=t.start,r=t.end;return npt(t)?(n.y-r.y)*(e.x-n.x)>0?1:-1:(r.x-n.x)*(n.y-e.y)>0?-1:1}function ipt(t,e){var n=(0,_ut.U2)(t,["components","axis"],{});return(0,_ut.b$)({},(0,_ut.U2)(n,["common"],{}),(0,_ut.b$)({},(0,_ut.U2)(n,[e],{})))}function apt(t,e,n){var r=(0,_ut.U2)(t,["components","axis"],{});return(0,_ut.b$)({},(0,_ut.U2)(r,["common","title"],{}),(0,_ut.b$)({},(0,_ut.U2)(r,[e,"title"],{})),n)}function opt(t){var e=t.x,n=t.y,r=t.circleCenter,i=n.start>n.end,a=t.isTransposed?t.convert({x:i?0:1,y:0}):t.convert({x:0,y:i?0:1}),o=[a.x-r.x,a.y-r.y],u=[1,0],s=a.y>r.y?Zct.EU(o,u):-1*Zct.EU(o,u),l=s+(e.end-e.start);return{center:r,radius:Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2)),startAngle:s,endAngle:l}}function upt(t,e){return(0,_ut.jn)(t)?!1!==t&&{}:(0,_ut.U2)(t,[e])}function spt(t,e){return(0,_ut.U2)(t,"position",e)}function lpt(t,e){return(0,_ut.U2)(e,["title","text"],Kdt(t))}var cpt=function(){function t(t,e){this.destroyed=!1,this.facets=[],this.view=t,this.cfg=(0,_ut.b$)({},this.getDefaultCfg(),e)}return t.prototype.init=function(){this.container||(this.container=this.createContainer());var t=this.view.getData();this.facets=this.generateFacets(t)},t.prototype.render=function(){this.renderViews()},t.prototype.update=function(){},t.prototype.clear=function(){this.clearFacetViews()},t.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},t.prototype.facetToView=function(t){var e=t.region,n=t.data,r=t.padding,i=void 0===r?this.cfg.padding:r,a=this.view.createView({region:e,padding:i});a.data(n||[]),t.view=a,this.beforeEachView(a,t);var o=this.cfg.eachView;return o&&o(a,t),this.afterEachView(a,t),a},t.prototype.createContainer=function(){return this.view.getLayer(Cut.FORE).addGroup()},t.prototype.renderViews=function(){this.createFacetViews()},t.prototype.createFacetViews=function(){var t=this;return this.facets.map((function(e){return t.facetToView(e)}))},t.prototype.clearFacetViews=function(){var t=this;(0,_ut.S6)(this.facets,(function(e){e.view&&(t.view.removeView(e.view),e.view=void 0)}))},t.prototype.parseSpacing=function(){var t=this.view.viewBBox,e=t.width,n=t.height;return this.cfg.spacing.map((function(t,r){return(0,_ut.hj)(t)?t/(0===r?e:n):parseFloat(t)/100}))},t.prototype.getFieldValues=function(t,e){var n=[],r={};return(0,_ut.S6)(t,(function(t){var i=t[e];(0,_ut.UM)(i)||r[i]||(n.push(i),r[i]=!0)})),n},t.prototype.getRegion=function(t,e,n,r){var i=(0,Aut.CR)(this.parseSpacing(),2),a=i[0],o=i[1],u=(1+a)/(0===e?1:e)-a,s=(1+o)/(0===t?1:t)-o,l={x:(u+a)*n,y:(s+o)*r};return{start:l,end:{x:l.x+u,y:l.y+s}}},t.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},t.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:"#666",fontFamily:this.view.getTheme().fontFamily}}},t.prototype.processAxis=function(t,e){var n=t.getOptions(),r=n.coordinate,i=t.geometries;if("rect"===(0,_ut.U2)(r,"type","rect")&&i.length){(0,_ut.UM)(n.axes)&&(n.axes={});var a=n.axes,o=(0,Aut.CR)(i[0].getXYFields(),2),u=o[0],s=o[1],l=upt(a,u),c=upt(a,s);!1!==l&&(n.axes[u]=this.getXAxisOption(u,a,l,e)),!1!==c&&(n.axes[s]=this.getYAxisOption(s,a,c,e))}},t.prototype.getFacetDataFilter=function(t){return function(e){return(0,_ut.yW)(t,(function(t){var n=t.field,r=t.value;return!(!(0,_ut.UM)(r)&&n)||e[n]===r}))}},t}(),fpt={},hpt=function(t,e){fpt[(0,_ut.vl)(t)]=e},dpt=function(){function t(t,e){this.context=t,this.cfg=e,t.addAction(this)}return t.prototype.applyCfg=function(t){(0,_ut.f0)(this,t)},t.prototype.init=function(){this.applyCfg(this.cfg)},t.prototype.destroy=function(){this.context.removeAction(this),this.context=null},t}(),ppt=dpt,gpt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.execute=function(){this.callback&&this.callback(this.context)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.callback=null},e}(ppt),vpt=gpt,mpt={};function ypt(t){var e=mpt[t];return(0,_ut.U2)(e,"ActionClass")}function xpt(t,e,n){mpt[t]={ActionClass:e,cfg:n}}function bpt(t,e){var n=new vpt(e);return n.callback=t,n.name="callback",n}function wpt(t,e){for(var n=[t[0]],r=1,i=t.length;r<i;r+=2){var a=e.convert({x:t[r],y:t[r+1]});n.push(a.x,a.y)}return n}function Spt(t,e){var n=e.isTransposed,r=t[1],i=t[6],a=t[7],o=e.convert({x:i,y:a});return["A",r,r,0,0,n?0:1,o.x,o.y]}function kpt(t,e,n){for(var r=!!e,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);var u,s,l,c=function(t,e,n,r){var i,a,o,u,s,l,c,f,h=[],d=!!r;if(d){u=(i=(0,Aut.CR)(r,2))[0],s=i[1];for(var p=0,g=t.length;p<g;p++){var v=t[p];u=Zct.VV([0,0],u,v),s=Zct.Fp([0,0],s,v)}}p=0;for(var m=t.length;p<m;p++)if(v=t[p],0!==p||n)if(p!==m-1||n){a=t[n?p?p-1:m-1:p-1],o=t[n?(p+1)%m:p+1];var y=[0,0];y=Zct.lu(y,o,a),y=Zct.bA(y,y,e);var x=Zct.TE(v,a),b=Zct.TE(v,o),w=x+b;0!==w&&(x/=w,b/=w);var S=Zct.bA([0,0],y,-x),k=Zct.bA([0,0],y,b);c=Zct.IH([0,0],v,S),l=Zct.IH([0,0],v,k),l=Zct.VV([0,0],l,Zct.Fp([0,0],o,v)),l=Zct.Fp([0,0],l,Zct.VV([0,0],o,v)),S=Zct.lu([0,0],l,v),S=Zct.bA([0,0],S,-x/b),c=Zct.IH([0,0],v,S),c=Zct.VV([0,0],c,Zct.Fp([0,0],a,v)),c=Zct.Fp([0,0],c,Zct.VV([0,0],a,v)),k=Zct.lu([0,0],v,c),k=Zct.bA([0,0],k,b/x),l=Zct.IH([0,0],v,k),d&&(c=Zct.Fp([0,0],c,u),c=Zct.VV([0,0],c,s),l=Zct.Fp([0,0],l,u),l=Zct.VV([0,0],l,s)),h.push(f),h.push(c),f=l}else c=v,h.push(f),h.push(c);else f=v;return n&&h.push(h.shift()),h}(i,.4,r,n),f=i.length,h=[];for(a=0;a<f-1;a++)u=c[2*a],s=c[2*a+1],l=i[a+1],h.push(["C",u[0],u[1],s[0],s[1],l[0],l[1]]);return r&&(u=c[f],s=c[f+1],l=i[0],h.push(["C",u[0],u[1],s[0],s[1],l[0],l[1]])),h}function Cpt(t,e){return function(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var a=t[r];n.push(["L",a.x,a.y])}e&&n.push(["Z"])}return n}(t,e)}function Ept(t,e,n){var r=[],i=t[0],a=null;if(t.length<=2)return Cpt(t,e);for(var o=0,u=t.length;o<u;o++){var s=t[o];a&&a.x===s.x&&a.y===s.y||(r.push(s.x),r.push(s.y),a=s)}var l=kpt(r,e,n||[[0,0],[1,1]]);return l.unshift(["M",i.x,i.y]),l}function Mpt(t,e){var n,r,i,a=[];return(0,_ut.S6)(e,(function(o,u){switch(o[0].toLowerCase()){case"m":case"c":case"q":a.push(wpt(o,t));break;case"l":n=e[u-1],r=o,i=t.isTransposed,(i?n[n.length-2]===r[1]:n[n.length-1]===r[2])?a=a.concat(function(t,e,n){var r=n.isTransposed,i=n.startAngle,a=n.endAngle,o="a"===t[0].toLowerCase()?{x:t[6],y:t[7]}:{x:t[1],y:t[2]},u={x:e[1],y:e[2]},s=[],l=r?"y":"x",c=Math.abs(u[l]-o[l])*(a-i),f=u[l]>=o[l]?1:0,h=c>Math.PI?1:0,d=n.convert(u),p=Gdt(n,d);if(p>=.5)if(c===2*Math.PI){var g={x:(u.x+o.x)/2,y:(u.y+o.y)/2},v=n.convert(g);s.push(["A",p,p,0,h,f,v.x,v.y]),s.push(["A",p,p,0,h,f,d.x,d.y])}else s.push(["A",p,p,0,h,f,d.x,d.y]);return s}(n,r,t)):a.push(wpt(o,t));break;case"a":a.push(Spt(o,t));break;default:a.push(o)}})),function(t){(0,_ut.S6)(t,(function(e,n){if("a"===e[0].toLowerCase()){var r=t[n-1],i=t[n+1];i&&"a"===i[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&i&&"l"===i[0].toLowerCase()&&(i[0]="M")}}))}(a),a}function Opt(t,e){var n=t.event.target.getCanvasBBox();return n.width>=e||n.height>=e?n:null}function Apt(t){var e,n=t.event.target;return n&&(e=n.get("element")),e}function _pt(t){var e,n=t.event.target;return n&&(e=n.get("delegateObject")),e}function Dpt(t){var e=t.event.gEvent;return!(e&&e.fromShape&&e.toShape&&e.fromShape.get("element")===e.toShape.get("element"))}function Tpt(t){return t&&t.component&&t.component.isList()}function Fpt(t){return t&&t.component&&t.component.isSlider()}function Ipt(t){var e=t.event.target;return e&&"mask"===e.get("name")}function Ppt(t,e){if("path"===t.event.target.get("type")){var n=function(t,e){var n=t.event.target,r=n.getCanvasBBox();return r.width>=e||r.height>=e?n.attr("path"):null}(t,e);if(!n)return;return function(t,e){var n=Bpt(t),r=Npt(e),i=n.filter((function(t){var e,n,i=t.shape;if("path"===i.get("type"))e=Npt(i.attr("path"));else{var a=i.getCanvasBBox();e=[[(n=a).minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY]]}return(0,fdt.Wq)(r,e)}));return i}(t.view,n)}var r=Opt(t,e);return r?Zpt(t.view,r):null}function jpt(t,e,n){var r=Opt(t,n);if(!r)return null;var i=t.view,a=Vpt(i,e,{x:r.x,y:r.y}),o=Vpt(i,e,{x:r.maxX,y:r.maxY});return Zpt(e,{minX:a.x,minY:a.y,maxX:o.x,maxY:o.y})}function Bpt(t){var e=t.geometries,n=[];return(0,_ut.S6)(e,(function(t){var e=t.elements;n=n.concat(e)})),t.views&&t.views.length&&(0,_ut.S6)(t.views,(function(t){n=n.concat(Bpt(t))})),n}function Lpt(t,e){var n=t.geometries,r=[];return(0,_ut.S6)(n,(function(t){var n=t.getElementsBy((function(t){return t.hasState(e)}));r=r.concat(n)})),r}function Rpt(t,e){var n=t.getModel().data;return(0,_ut.kJ)(n)?n[0][e]:n[e]}function Zpt(t,e){var n=Bpt(t),r=[];return(0,_ut.S6)(n,(function(t){var n,i,a=t.shape.getCanvasBBox();n=e,(i=a).minX>n.maxX||i.maxX<n.minX||i.minY>n.maxY||i.maxY<n.minY||r.push(t)})),r}function Npt(t){var e=[];return(0,_ut.S6)(t,(function(t){if("A"!==t[0])for(var n=1;n<t.length;n+=2)e.push([t[n],t[n+1]]);else{var r=t.length;e.push([t[r-2],t[r-1]])}})),e}function zpt(t){return t.getComponents().map((function(t){return t.component}))}function Upt(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function Hpt(t,e){return t.x<=e.x&&t.maxX>=e.x&&t.y<=e.y&&t.maxY>e.y}function Wpt(t){var e=t.parent,n=null;return e&&(n=e.views.filter((function(e){return e!==t}))),n}function Vpt(t,e,n){var r=function(t,e){return t.getCoordinate().invert(e)}(t,n);return e.getCoordinate().convert(r)}function Gpt(t,e,n,r){var i=!1;return(0,_ut.S6)(t,(function(t){if(t[n]===e[n]&&t[r]===e[r])return i=!0,!1})),i}function Xpt(t,e){var n=t.getScaleByField(e);return!n&&t.views&&(0,_ut.S6)(t.views,(function(t){if(n=Xpt(t,e))return!1})),n}var Ypt=function(){function t(t){this.actions=[],this.event=null,this.cacheMap={},this.view=t}return t.prototype.cache=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length)return this.cacheMap[t[0]];2===t.length&&(this.cacheMap[t[0]]=t[1])},t.prototype.getAction=function(t){return this.actions.find((function(e){return e.name===t}))},t.prototype.addAction=function(t){this.actions.push(t)},t.prototype.removeAction=function(t){var e=this.actions,n=this.actions.indexOf(t);n>=0&&e.splice(n,1)},t.prototype.getCurrentPoint=function(){var t=this.event;return t?t.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(t.clientX,t.clientY):{x:t.x,y:t.y}:null},t.prototype.getCurrentShape=function(){return(0,_ut.U2)(this.event,["gEvent","shape"])},t.prototype.isInPlot=function(){var t=this.getCurrentPoint();return!!t&&this.view.isPointInPlot(t)},t.prototype.isInShape=function(t){var e=this.getCurrentShape();return!!e&&e.get("name")===t},t.prototype.isInComponent=function(t){var e=zpt(this.view),n=this.getCurrentPoint();return!!n&&!!e.find((function(e){var r=e.getBBox();return t?e.get("name")===t&&Hpt(r,n):Hpt(r,n)}))},t.prototype.destroy=function(){(0,_ut.S6)(this.actions.slice(),(function(t){t.destroy()})),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},t}(),qpt=Ypt,$pt=function(){function t(t,e){this.view=t,this.cfg=e}return t.prototype.init=function(){this.initEvents()},t.prototype.initEvents=function(){},t.prototype.clearEvents=function(){},t.prototype.destroy=function(){this.clearEvents()},t}();function Jpt(t,e,n){var r=t.split(":"),i=r[0],a=e.getAction(i)||function(t,e){var n=mpt[t],r=null;return n&&((r=new(0,n.ActionClass)(e,n.cfg)).name=t,r.init()),r}(i,e);if(!a)throw new Error("There is no action named ".concat(i));return{action:a,methodName:r[1],arg:n}}function Kpt(t){var e=t.action,n=t.methodName,r=t.arg;if(!e[n])throw new Error("Action(".concat(e.name,") doesn't have a method called ").concat(n));e[n](r)}var Qpt="start",tgt="showEnable",egt="end",ngt="rollback",rgt="processing",igt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.callbackCaches={},r.emitCaches={},r.steps=n,r}return(0,Aut.ZT)(e,t),e.prototype.init=function(){this.initContext(),t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},e.prototype.initEvents=function(){var t=this;(0,_ut.S6)(this.steps,(function(e,n){(0,_ut.S6)(e,(function(e){var r=t.getActionCallback(n,e);r&&t.bindEvent(e.trigger,r)}))}))},e.prototype.clearEvents=function(){var t=this;(0,_ut.S6)(this.steps,(function(e,n){(0,_ut.S6)(e,(function(e){var r=t.getActionCallback(n,e);r&&t.offEvent(e.trigger,r)}))}))},e.prototype.initContext=function(){var t=this.view,e=new qpt(t);this.context=e;var n=this.steps;(0,_ut.S6)(n,(function(t){(0,_ut.S6)(t,(function(t){if((0,_ut.mf)(t.action))t.actionObject={action:bpt(t.action,e),methodName:"execute"};else if((0,_ut.HD)(t.action))t.actionObject=Jpt(t.action,e,t.arg);else if((0,_ut.kJ)(t.action)){var n=t.action,r=(0,_ut.kJ)(t.arg)?t.arg:[t.arg];t.actionObject=[],(0,_ut.S6)(n,(function(n,i){t.actionObject.push(Jpt(n,e,r[i]))}))}}))}))},e.prototype.isAllowStep=function(t){var e=this.currentStepName,n=this.steps;if(e===t)return!0;if(t===tgt)return!0;if(t===rgt)return e===Qpt;if(t===Qpt)return e!==rgt;if(t===egt)return e===rgt||e===Qpt;if(t===ngt){if(n[egt])return e===egt;if(e===Qpt)return!0}return!1},e.prototype.isAllowExecute=function(t,e){if(this.isAllowStep(t)){var n=this.getKey(t,e);return(!e.once||!this.emitCaches[n])&&(!e.isEnable||e.isEnable(this.context))}return!1},e.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},e.prototype.afterExecute=function(t,e){t!==tgt&&this.currentStepName!==t&&this.enterStep(t);var n=this.getKey(t,e);this.emitCaches[n]=!0},e.prototype.getKey=function(t,e){return t+e.trigger+e.action},e.prototype.getActionCallback=function(t,e){var n=this,r=this.context,i=this.callbackCaches,a=e.actionObject;if(e.action&&a){var o=this.getKey(t,e);if(!i[o]){var u=function(i){r.event=i,n.isAllowExecute(t,e)?((0,_ut.kJ)(a)?(0,_ut.S6)(a,(function(t){r.event=i,Kpt(t)})):(r.event=i,Kpt(a)),n.afterExecute(t,e),e.callback&&(r.event=i,e.callback(r))):r.event=null};e.debounce?i[o]=(0,_ut.Ds)(u,e.debounce.wait,e.debounce.immediate):e.throttle?i[o]=(0,_ut.P2)(u,e.throttle.wait,{leading:e.throttle.leading,trailing:e.throttle.trailing}):i[o]=u}return i[o]}return null},e.prototype.bindEvent=function(t,e){var n=t.split(":");"window"===n[0]?window.addEventListener(n[1],e):"document"===n[0]?document.addEventListener(n[1],e):this.view.on(t,e)},e.prototype.offEvent=function(t,e){var n=t.split(":");"window"===n[0]?window.removeEventListener(n[1],e):"document"===n[0]?document.removeEventListener(n[1],e):this.view.off(t,e)},e}($pt),agt=igt,ogt={};function ugt(t,e){ogt[(0,_ut.vl)(t)]=e}function sgt(t,e,n){var r=function(t){return ogt[(0,_ut.vl)(t)]}(t);if(!r)return null;if((0,_ut.PO)(r)){var i=(0,_ut.CD)((0,_ut.d9)(r),n);return new agt(e,i)}return new r(e,n)}function lgt(t){var e,n={point:{default:{fill:t.pointFillColor,r:t.pointSize,stroke:t.pointBorderColor,lineWidth:t.pointBorder,fillOpacity:t.pointFillOpacity},active:{stroke:t.pointActiveBorderColor,lineWidth:t.pointActiveBorder},selected:{stroke:t.pointSelectedBorderColor,lineWidth:t.pointSelectedBorder},inactive:{fillOpacity:t.pointInactiveFillOpacity,strokeOpacity:t.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:t.hollowPointFillColor,lineWidth:t.hollowPointBorder,stroke:t.hollowPointBorderColor,strokeOpacity:t.hollowPointBorderOpacity,r:t.hollowPointSize},active:{stroke:t.hollowPointActiveBorderColor,strokeOpacity:t.hollowPointActiveBorderOpacity},selected:{lineWidth:t.hollowPointSelectedBorder,stroke:t.hollowPointSelectedBorderColor,strokeOpacity:t.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:t.hollowPointInactiveBorderOpacity}},area:{default:{fill:t.areaFillColor,fillOpacity:t.areaFillOpacity,stroke:null},active:{fillOpacity:t.areaActiveFillOpacity},selected:{fillOpacity:t.areaSelectedFillOpacity},inactive:{fillOpacity:t.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:t.hollowAreaBorderColor,lineWidth:t.hollowAreaBorder,strokeOpacity:t.hollowAreaBorderOpacity},active:{fill:null,lineWidth:t.hollowAreaActiveBorder},selected:{fill:null,lineWidth:t.hollowAreaSelectedBorder},inactive:{strokeOpacity:t.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:t.intervalFillColor,fillOpacity:t.intervalFillOpacity},active:{stroke:t.intervalActiveBorderColor,lineWidth:t.intervalActiveBorder},selected:{stroke:t.intervalSelectedBorderColor,lineWidth:t.intervalSelectedBorder},inactive:{fillOpacity:t.intervalInactiveFillOpacity,strokeOpacity:t.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:t.hollowIntervalFillColor,stroke:t.hollowIntervalBorderColor,lineWidth:t.hollowIntervalBorder,strokeOpacity:t.hollowIntervalBorderOpacity},active:{stroke:t.hollowIntervalActiveBorderColor,lineWidth:t.hollowIntervalActiveBorder,strokeOpacity:t.hollowIntervalActiveBorderOpacity},selected:{stroke:t.hollowIntervalSelectedBorderColor,lineWidth:t.hollowIntervalSelectedBorder,strokeOpacity:t.hollowIntervalSelectedBorderOpacity},inactive:{stroke:t.hollowIntervalInactiveBorderColor,lineWidth:t.hollowIntervalInactiveBorder,strokeOpacity:t.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:t.lineBorderColor,lineWidth:t.lineBorder,strokeOpacity:t.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:t.lineActiveBorder},selected:{lineWidth:t.lineSelectedBorder},inactive:{strokeOpacity:t.lineInactiveBorderOpacity}}},r=function(t){return{title:{autoRotate:!0,position:"center",spacing:t.axisTitleSpacing,style:{fill:t.axisTitleTextFillColor,fontSize:t.axisTitleTextFontSize,lineHeight:t.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:t.fontFamily},iconStyle:{fill:t.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:t.axisLabelOffset,style:{fill:t.axisLabelFillColor,fontSize:t.axisLabelFontSize,lineHeight:t.axisLabelLineHeight,fontFamily:t.fontFamily}},line:{style:{lineWidth:t.axisLineBorder,stroke:t.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:t.axisGridBorderColor,lineWidth:t.axisGridBorder,lineDash:t.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:t.axisTickLineBorder,stroke:t.axisTickLineBorderColor},alignTick:!0,length:t.axisTickLineLength},subTickLine:null,animate:!0}}(t),i=function(t){return{title:null,marker:{symbol:"circle",spacing:t.legendMarkerSpacing,style:{r:t.legendCircleMarkerSize,fill:t.legendMarkerColor}},itemName:{spacing:5,style:{fill:t.legendItemNameFillColor,fontFamily:t.fontFamily,fontSize:t.legendItemNameFontSize,lineHeight:t.legendItemNameLineHeight,fontWeight:t.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:t.legendPageNavigatorMarkerSize,inactiveFill:t.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:t.legendPageNavigatorMarkerInactiveFillOpacity,fill:t.legendPageNavigatorMarkerFillColor,opacity:t.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:t.legendPageNavigatorTextFillColor,fontSize:t.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:t.legendItemSpacing,itemMarginBottom:t.legendItemMarginBottom,padding:t.legendPadding}}(t);return{background:t.backgroundColor,defaultColor:t.brandColor,subColor:t.subColor,semanticRed:t.paletteSemanticRed,semanticGreen:t.paletteSemanticGreen,padding:"auto",fontFamily:t.fontFamily,columnWidthRatio:.5,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:t.paletteQualitative10,colors20:t.paletteQualitative20,sequenceColors:t.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:function(t){var e=t.geometry.coordinate;if(e.isPolar&&e.isTransposed){var r=Zdt(t.getModel(),e),i=(r.startAngle+r.endAngle)/2,a=7.5*Math.cos(i),o=7.5*Math.sin(i);return{matrix:Pct.vs(null,[["t",a,o]])}}return n.interval.selected}}},"hollow-rect":{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},line:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},tick:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},funnel:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}},pyramid:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},line:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},dot:{default:{style:(0,Aut.pi)((0,Aut.pi)({},n.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:(0,Aut.pi)((0,Aut.pi)({},n.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:(0,Aut.pi)((0,Aut.pi)({},n.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:(0,Aut.pi)((0,Aut.pi)({},n.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:(0,Aut.pi)((0,Aut.pi)({},n.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:(0,Aut.pi)((0,Aut.pi)({},n.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:(0,Aut.pi)((0,Aut.pi)({},n.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:(0,Aut.pi)((0,Aut.pi)({},n.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hvh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},polygon:{polygon:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},point:{circle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},square:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},bowtie:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},diamond:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},hexagon:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},triangle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"triangle-down":{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"hollow-circle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-square":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-bowtie":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-diamond":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-hexagon":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle-down":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},cross:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},tick:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},plus:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},hyphen:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},line:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}}},area:{area:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},smooth:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},line:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"smooth-line":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}},schema:{candle:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},box:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}}},edge:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},arc:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},violin:{violin:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hollow:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"hollow-smooth":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}}},components:{axis:{common:r,top:{position:"top",grid:null,title:null,verticalLimitLength:.5},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:.5},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:(0,_ut.b$)({},r.grid,{line:{type:"line"}})},radius:{title:null,grid:(0,_ut.b$)({},r.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:t.legendVerticalPadding},left:{layout:"vertical",padding:t.legendVerticalPadding},top:{layout:"horizontal",padding:t.legendHorizontalPadding},bottom:{layout:"horizontal",padding:t.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:t.sliderRailHeight,defaultLength:t.sliderRailWidth,style:{fill:t.sliderRailFillColor,stroke:t.sliderRailBorderColor,lineWidth:t.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:t.sliderLabelTextFillColor,fontSize:t.sliderLabelTextFontSize,lineHeight:t.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:t.fontFamily}},handler:{size:t.sliderHandlerWidth,style:{fill:t.sliderHandlerFillColor,stroke:t.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:t.tooltipCrosshairsBorderColor,lineWidth:t.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(e={},e["".concat($ht)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:t.tooltipContainerFillColor,opacity:t.tooltipContainerFillOpacity,boxShadow:t.tooltipContainerShadow,borderRadius:"".concat(t.tooltipContainerBorderRadius,"px"),color:t.tooltipTextFillColor,fontSize:"".concat(t.tooltipTextFontSize,"px"),fontFamily:t.fontFamily,lineHeight:"".concat(t.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},e["".concat(Jht)]={marginBottom:"12px",marginTop:"12px"},e["".concat(Kht)]={margin:0,listStyleType:"none",padding:0},e["".concat(Qht)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},e["".concat(tdt)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},e["".concat(edt)]={display:"inline-block",float:"right",marginLeft:"30px"},e)},annotation:{arc:{style:{stroke:t.annotationArcBorderColor,lineWidth:t.annotationArcBorder},animate:!0},line:{style:{stroke:t.annotationLineBorderColor,lineDash:t.annotationLineDash,lineWidth:t.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,textAlign:"start",fontFamily:t.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:t.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:t.annotationRegionBorder,stroke:t.annotationRegionBorderColor,fill:t.annotationRegionFillColor,fillOpacity:t.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:t.brandColor,lineWidth:2}},line:{style:{stroke:t.annotationLineBorderColor,lineWidth:t.annotationLineBorder},length:t.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,fontFamily:t.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:t.annotationRegionFillColor,fillOpacity:t.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,fontFamily:t.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:t.cSliderBackgroundFillColor,opacity:t.cSliderBackgroundFillOpacity},foregroundStyle:{fill:t.cSliderForegroundFillColor,opacity:t.cSliderForegroundFillOpacity},handlerStyle:{width:t.cSliderHandlerWidth,height:t.cSliderHandlerHeight,fill:t.cSliderHandlerFillColor,opacity:t.cSliderHandlerFillOpacity,stroke:t.cSliderHandlerBorderColor,lineWidth:t.cSliderHandlerBorder,radius:t.cSliderHandlerBorderRadius,highLightFill:t.cSliderHandlerHighlightFillColor},textStyle:{fill:t.cSliderTextFillColor,opacity:t.cSliderTextFillOpacity,fontSize:t.cSliderTextFontSize,lineHeight:t.cSliderTextLineHeight,fontWeight:t.cSliderTextFontWeight,stroke:t.cSliderTextBorderColor,lineWidth:t.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:t.scrollbarTrackFillColor,thumbColor:t.scrollbarThumbFillColor}},hover:{style:{thumbColor:t.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:t.labelFillColor,fontSize:t.labelFontSize,fontFamily:t.fontFamily,stroke:t.labelBorderColor,lineWidth:t.labelBorder},fillColorDark:t.labelFillColorDark,fillColorLight:t.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:t.innerLabelFillColor,fontSize:t.innerLabelFontSize,fontFamily:t.fontFamily,stroke:t.innerLabelBorderColor,lineWidth:t.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:t.overflowLabelFillColor,fontSize:t.overflowLabelFontSize,fontFamily:t.fontFamily,stroke:t.overflowLabelBorderColor,lineWidth:t.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:t.labelLineBorder}},autoRotate:!0}}}var cgt="#000",fgt="#595959",hgt="#8C8C8C",dgt="#BFBFBF",pgt="#D9D9D9",ggt="#F0F0F0",vgt="#FFFFFF",mgt="#D9D9D9",ygt=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],xgt=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],bgt=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],wgt=function(t){void 0===t&&(t={});var e=t.paletteQualitative10,n=void 0===e?ygt:e,r=t.paletteQualitative20,i=void 0===r?xgt:r,a=t.brandColor,o=void 0===a?n[0]:a,u={backgroundColor:"transparent",brandColor:o,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:n,paletteQualitative20:i,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:bgt,fontFamily:'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"',axisLineBorderColor:dgt,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:fgt,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:mgt,axisTickLineBorderColor:dgt,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:pgt,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:hgt,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:pgt,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:hgt,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:o,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:fgt,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:cgt,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:cgt,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:hgt,legendPageNavigatorTextFontSize:12,sliderRailFillColor:pgt,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:hgt,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:ggt,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:dgt,annotationArcBorderColor:pgt,annotationArcBorder:1,annotationLineBorderColor:dgt,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:fgt,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:cgt,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:dgt,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:fgt,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:fgt,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:vgt,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:fgt,overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:vgt,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:dgt,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:o,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:vgt,pointBorderOpacity:1,pointActiveBorderColor:cgt,pointSelectedBorder:2,pointSelectedBorderColor:cgt,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:o,hollowPointBorderOpacity:.95,hollowPointFillColor:vgt,hollowPointActiveBorder:1,hollowPointActiveBorderColor:cgt,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:cgt,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:o,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:o,areaFillOpacity:.25,areaActiveFillColor:o,areaActiveFillOpacity:.5,areaSelectedFillColor:o,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:o,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:cgt,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:cgt,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:o,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:cgt,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:cgt,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:o,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:vgt,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:cgt,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:cgt,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,Aut.pi)((0,Aut.pi)({},u),t)};wgt();function Sgt(t){var e=t.styleSheet,n=void 0===e?{}:e,r=(0,Aut._T)(t,["styleSheet"]),i=wgt(n);return(0,_ut.b$)({},lgt(i),r)}var kgt={default:Sgt({})};function Cgt(t){return(0,_ut.U2)(kgt,(0,_ut.vl)(t),kgt.default)}function Egt(t,e,n){var r=n.translate(t),i=n.translate(e);return(0,_ut.vQ)(r,i)}function Mgt(t,e,n){var r=n.coordinate,i=n.getYScale(),a=i.field,o=r.invert(e),u=i.invert(o.y);return(0,_ut.sE)(t,(function(t){var e=t[Uut];return e[a][0]<=u&&e[a][1]>=u}))||t[t.length-1]}var Ogt=(0,_ut.HP)((function(t){if(t.isCategory)return 1;for(var e=t.values,n=e.length,r=t.translate(e[0]),i=r,a=0;a<n;a++){var o=e[a],u=t.translate(o);u<r&&(r=u),u>i&&(i=u)}return(i-r)/(n-1)}));function Agt(t){var e,n,r,i=function(t){var e=(0,_ut.VO)(t.attributes);return(0,_ut.hX)(e,(function(t){return(0,_ut.FX)(zut,t.type)}))}(t);try{for(var a=(0,Aut.XA)(i),o=a.next();!o.done;o=a.next()){var u=o.value,s=u.getScale(u.type);if(s&&s.isLinear)if("cat"!==$dt(s,(0,_ut.U2)(t.scaleDefs,s.field),u.type,t.type)){r=s;break}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}var l=t.getXScale(),c=t.getYScale();return r||c||l}function _gt(t,e,n){if(0===e.length)return null;var r=n.type,i=n.getXScale(),a=n.getYScale(),o=i.field,u=a.field,s=null;if("heatmap"===r||"point"===r){for(var l=n.coordinate.invert(t),c=i.invert(l.x),f=a.invert(l.y),h=1/0,d=0;d<e.length;d++){var p=e[d],g=p[Uut],v=Math.pow(g[o]-c,2)+Math.pow(g[u]-f,2);v<h&&(h=v,s=p)}return s}var m=e[0],y=e[e.length-1],x=function(t,e){var n=e.coordinate,r=e.getXScale(),i=r.range,a=i[i.length-1],o=i[0],u=n.invert(t).x;return n.isPolar&&u>(1+a)/2&&(u=o),r.translate(r.invert(u))}(t,n),b=m[Uut][o],w=m[Uut][u],S=y[Uut][o],k=a.isLinear&&(0,_ut.kJ)(w);if((0,_ut.kJ)(b)){for(d=0;d<e.length;d++){g=(_=e[d])[Uut];if(i.translate(g[o][0])<=x&&i.translate(g[o][1])>=x){if(!k){s=_;break}(0,_ut.kJ)(s)||(s=[]),s.push(_)}}(0,_ut.kJ)(s)&&(s=Mgt(s,t,n))}else{var C=void 0;if(i.isLinear||"timeCat"===i.type){if((x>i.translate(S)||x<i.translate(b))&&(x>i.max||x<i.min))return null;for(var E=0,M=e.length-1,O=void 0;E<=M;){var A=e[O=Math.floor((E+M)/2)][Uut][o];if(Egt(A,x,i))return e[O];i.translate(A)<=i.translate(x)?(E=O+1,y=e[O],C=e[O+1]):(0===M&&(y=e[0]),M=O-1)}}else{for(d=0;d<e.length;d++){var _;if(Egt((g=(_=e[d])[Uut])[o],x,i)){if(!k){s=_;break}(0,_ut.kJ)(s)||(s=[]),s.push(_)}else i.translate(g[o])<=x&&(y=_,C=e[d+1])}(0,_ut.kJ)(s)&&(s=Mgt(s,t,n))}y&&C&&Math.abs(i.translate(y[Uut][o])-x)>Math.abs(i.translate(C[Uut][o])-x)&&(y=C)}var D=Ogt(n.getXScale());return!s&&Math.abs(i.translate(y[Uut][o])-x)<=D/2&&(s=y),s}function Dgt(t,e,n,r){var i,a;void 0===n&&(n=""),void 0===r&&(r=!1);var o,u,s=t[Uut],l=function(t,e,n){var r=e.getAttribute("position").getFields(),i=e.scales,a=(0,_ut.mf)(n)||!n?r[0]:n,o=i[a],u=o?o.getText(t[a]):t[a]||a;return(0,_ut.mf)(n)?n(u,t):u}(s,e,n),c=e.tooltipOption,f=e.theme.defaultColor,h=[];function d(e,n){if(r||!(0,_ut.UM)(n)&&""!==n){var i={title:l,data:s,mappingData:t,name:e,value:n,color:t.color||f,marker:!0};h.push(i)}}if((0,_ut.Kn)(c)){var p=c.fields,g=c.callback;if(g){var v=p.map((function(e){return t[Uut][e]})),m=g.apply(void 0,(0,Aut.ev)([],(0,Aut.CR)(v),!1)),y=(0,Aut.pi)({data:t[Uut],mappingData:t,title:l,color:t.color||f,marker:!0},m);h.push(y)}else{var x=e.scales;try{for(var b=(0,Aut.XA)(p),w=b.next();!w.done;w=b.next()){var S=w.value;if(!(0,_ut.UM)(s[S])){var k=x[S];d(o=Kdt(k),u=k.getText(s[S]))}}}catch(E){i={error:E}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}}}else{var C=Agt(e);u=function(t,e){var n=t[e.field];return(0,_ut.kJ)(n)?n.map((function(t){return e.getText(t)})).join("-"):e.getText(n)}(s,C),o=function(t,e){var n,r=e.getGroupScales();if(r.length&&(n=r[0]),n){var i=n.field;return n.getText(t[i])}return Kdt(Agt(e))}(s,e),d(o,u)}return h}function Tgt(t,e,n,r){var i,a,o=r.showNil,u=[],s=t.dataArray;if(!(0,_ut.xb)(s)){t.sort(s);try{for(var l=(0,Aut.XA)(s),c=l.next();!c.done;c=l.next()){var f=_gt(e,c.value,t);if(f){var h=t.getElementId(f),d=t.elementsMap[h];if("heatmap"===t.type||d.visible){var p=Dgt(f,t,n,o);p.length&&u.push(p)}}}}catch(g){i={error:g}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}}return u}function Fgt(t,e,n,r){var i=r.showNil,a=[],o=t.container.getShape(e.x,e.y);if(o&&o.get("visible")&&o.get("origin")){var u=Dgt(o.get("origin").mappingData,t,n,i);u.length&&a.push(u)}return a}function Igt(t,e,n){var r,i,a=[],o=t.geometries,u=n.shared,s=n.title,l=n.reversed;try{for(var c=(0,Aut.XA)(o),f=c.next();!f.done;f=c.next()){var h=f.value;if(h.visible&&!1!==h.tooltipOption){var d=h.type,p=void 0;(p=["point","edge","polygon"].includes(d)?Fgt(h,e,s,n):["area","line","path","heatmap"].includes(d)||!1!==u?Tgt(h,e,s,n):Fgt(h,e,s,n)).length&&(l&&p.reverse(),a.push(p))}}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a}function Pgt(t){void 0===t&&(t=0);var e=(0,_ut.kJ)(t)?t:[t];switch(e.length){case 0:e=[0,0,0,0];break;case 1:e=new Array(4).fill(e[0]);break;case 2:e=(0,Aut.ev)((0,Aut.ev)([],(0,Aut.CR)(e),!1),(0,Aut.CR)(e),!1);break;case 3:e=(0,Aut.ev)((0,Aut.ev)([],(0,Aut.CR)(e),!1),[e[1]],!1);break;default:e=e.slice(0,4)}return e}var jgt={};function Bgt(t,e){jgt[t]=e}var Lgt=function(){function t(t){this.option=this.wrapperOption(t)}return t.prototype.update=function(t){return this.option=this.wrapperOption(t),this},t.prototype.hasAction=function(t){var e=this.option.actions;return(0,_ut.G)(e,(function(e){return e[0]===t}))},t.prototype.create=function(t,e){var n=this.option,r=n.type,i=n.cfg,a="theta"===r,o=(0,Aut.pi)({start:t,end:e},i),u=function(t){return Wct[t.toLowerCase()]}(a?"polar":r);return this.coordinate=new u(o),this.coordinate.type=r,a&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},t.prototype.adjust=function(t,e){return this.coordinate.update({start:t,end:e}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},t.prototype.rotate=function(t){return this.option.actions.push(["rotate",t]),this},t.prototype.reflect=function(t){return this.option.actions.push(["reflect",t]),this},t.prototype.scale=function(t,e){return this.option.actions.push(["scale",t,e]),this},t.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},t.prototype.getOption=function(){return this.option},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.wrapperOption=function(t){return(0,Aut.pi)({type:"rect",actions:[],cfg:{}},t)},t.prototype.execActions=function(t){var e=this,n=this.option.actions;(0,_ut.S6)(n,(function(n){var r,i=(0,Aut.CR)(n),a=i[0],o=i.slice(1);(!!(0,_ut.UM)(t)||t.includes(a))&&(r=e.coordinate)[a].apply(r,(0,Aut.ev)([],(0,Aut.CR)(o),!1))}))},t}(),Rgt=Lgt,Zgt=function(){function t(t,e,n){this.view=t,this.gEvent=e,this.data=n,this.type=e.type}return t.fromData=function(e,n,r){return new t(e,new Kut.Event(n,{}),r)},Object.defineProperty(t.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},t.prototype.clone=function(){return new t(this.view,this.gEvent,this.data)},t}(),Ngt=Zgt;function zgt(t){var e=t.getController("axis"),n=t.getController("legend"),r=t.getController("annotation");[e,t.getController("slider"),t.getController("scrollbar"),n,r].forEach((function(t){t&&t.layout()}))}var Ugt=function(){function t(){this.scales=new Map,this.syncScales=new Map}return t.prototype.createScale=function(t,e,n,r){var i=n,a=this.getScaleMeta(r);if(0===e.length&&a){var o=a.scale,u={type:o.type};o.isCategory&&(u.values=o.values),i=(0,_ut.b$)(u,a.scaleDef,n)}var s=Jdt(t,e,i);return this.cacheScale(s,n,r),s},t.prototype.sync=function(t,e){var n=this;this.syncScales.forEach((function(r,i){var a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,u=[];(0,_ut.S6)(r,(function(t){var e=n.getScale(t);o=(0,_ut.hj)(e.max)?Math.max(o,e.max):o,a=(0,_ut.hj)(e.min)?Math.min(a,e.min):a,(0,_ut.S6)(e.values,(function(t){u.includes(t)||u.push(t)}))})),(0,_ut.S6)(r,(function(r){var i=n.getScale(r);if(i.isContinuous)i.change({min:a,max:o,values:u});else if(i.isCategory){var s=i.range,l=n.getScaleMeta(r);u&&!(0,_ut.U2)(l,["scaleDef","range"])&&(s=Qdt((0,_ut.b$)({},i,{values:u}),t,e)),i.change({values:u,range:s})}}))}))},t.prototype.cacheScale=function(t,e,n){var r=this.getScaleMeta(n);r&&r.scale.type===t.type?(!function(t,e){if("identity"!==t.type&&"identity"!==e.type){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);t.change(n)}}(r.scale,t),r.scaleDef=e):(r={key:n,scale:t,scaleDef:e},this.scales.set(n,r));var i=this.getSyncKey(r);if(r.syncKey=i,this.removeFromSyncScales(n),i){var a=this.syncScales.get(i);a||(a=[],this.syncScales.set(i,a)),a.push(n)}},t.prototype.getScale=function(t){var e=this.getScaleMeta(t);if(!e){var n=(0,_ut.Z$)(t.split("-")),r=this.syncScales.get(n);r&&r.length&&(e=this.getScaleMeta(r[0]))}return e&&e.scale},t.prototype.deleteScale=function(t){var e=this.getScaleMeta(t);if(e){var n=e.syncKey,r=this.syncScales.get(n);if(r&&r.length){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}this.scales.delete(t)},t.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},t.prototype.removeFromSyncScales=function(t){var e=this;this.syncScales.forEach((function(n,r){var i=n.indexOf(t);if(-1!==i)return n.splice(i,1),0===n.length&&e.syncScales.delete(r),!1}))},t.prototype.getSyncKey=function(t){var e=t.scale,n=t.scaleDef,r=e.field,i=(0,_ut.U2)(n,["sync"]);return!0===i?r:!1===i?void 0:i},t.prototype.getScaleMeta=function(t){return this.scales.get(t)},t}(),Hgt=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=t,this.right=e,this.bottom=n,this.left=r}return t.instance=function(e,n,r,i){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),new t(e,n,r,i)},t.prototype.max=function(t){var e=(0,Aut.CR)(t,4),n=e[0],r=e[1],i=e[2],a=e[3];return this.top=Math.max(this.top,n),this.right=Math.max(this.right,r),this.bottom=Math.max(this.bottom,i),this.left=Math.max(this.left,a),this},t.prototype.shrink=function(t){var e=(0,Aut.CR)(t,4),n=e[0],r=e[1],i=e[2],a=e[3];return this.top+=n,this.right+=r,this.bottom+=i,this.left+=a,this},t.prototype.inc=function(t,e){var n=t.width,r=t.height;switch(e){case Eut.TOP:case Eut.TOP_LEFT:case Eut.TOP_RIGHT:this.top+=r;break;case Eut.RIGHT:case Eut.RIGHT_TOP:case Eut.RIGHT_BOTTOM:this.right+=n;break;case Eut.BOTTOM:case Eut.BOTTOM_LEFT:case Eut.BOTTOM_RIGHT:this.bottom+=r;break;case Eut.LEFT:case Eut.LEFT_TOP:case Eut.LEFT_BOTTOM:this.left+=n}return this},t.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},t.prototype.clone=function(){return new(t.bind.apply(t,(0,Aut.ev)([void 0],(0,Aut.CR)(this.getPadding()),!1)))},t}();function Wgt(t){var e=t.padding;if(!function(t){return!(0,_ut.hj)(t)&&!(0,_ut.kJ)(t)}(e))return new(Hgt.bind.apply(Hgt,(0,Aut.ev)([void 0],(0,Aut.CR)(Pgt(e)),!1)));var n=t.viewBBox,r=new Hgt,i=[],a=[],o=[];return(0,_ut.S6)(t.getComponents(),(function(t){var e=t.type;e===Mut.AXIS?i.push(t):[Mut.LEGEND,Mut.SLIDER,Mut.SCROLLBAR].includes(e)?a.push(t):e!==Mut.GRID&&e!==Mut.TOOLTIP&&o.push(t)})),(0,_ut.S6)(i,(function(t){var e=t.component.getLayoutBBox(),i=new Wdt(e.x,e.y,e.width,e.height).exceed(n);r.max(i)})),(0,_ut.S6)(a,(function(t){var e=t.component,n=t.direction,i=e.getLayoutBBox(),a=e.get("padding"),o=new Wdt(i.x,i.y,i.width,i.height).expand(a);r.inc(o,n)})),(0,_ut.S6)(o,(function(t){var e=t.component,n=t.direction,i=e.getLayoutBBox(),a=new Wdt(i.x,i.y,i.width,i.height);r.inc(a,n)})),r}function Vgt(t,e,n){var r=n.instance();e.forEach((function(t){t.autoPadding=r.max(t.autoPadding.getPadding())}))}var Ggt=function(t){function e(e){var n=t.call(this,{visible:e.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=Object.keys(jgt),n.scalePool=new Ugt,n.layoutFunc=zgt,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(t){var e=t.name;if(!e.includes(":")){var r=n.createViewEvent(t);n.doPlotEvent(r),n.emit(e,r)}},n.onDelegateEvents=function(t){var e=t.name;if(e.includes(":")){var r=n.createViewEvent(t);n.emit(e,r)}};var r=e.id,i=void 0===r?(0,_ut.EL)("view"):r,a=e.parent,o=e.canvas,u=e.backgroundGroup,s=e.middleGroup,l=e.foregroundGroup,c=e.region,f=void 0===c?{start:{x:0,y:0},end:{x:1,y:1}}:c,h=e.padding,d=e.appendPadding,p=e.theme,g=e.options,v=e.limitInPlot,m=e.syncViewPadding;return n.parent=a,n.canvas=o,n.backgroundGroup=u,n.middleGroup=s,n.foregroundGroup=l,n.region=f,n.padding=h,n.appendPadding=d,n.options=(0,Aut.pi)((0,Aut.pi)({},n.options),g),n.limitInPlot=v,n.id=i,n.syncViewPadding=m,n.themeObject=(0,_ut.Kn)(p)?(0,_ut.b$)({},Cgt("default"),Sgt(p)):Cgt(p),n.init(),n}return(0,Aut.ZT)(e,t),e.prototype.setLayout=function(t){this.layoutFunc=t},e.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},e.prototype.render=function(t,e){void 0===t&&(t=!1),this.emit(Dut.BEFORE_RENDER,Ngt.fromData(this,Dut.BEFORE_RENDER,e)),this.paint(t),this.emit(Dut.AFTER_RENDER,Ngt.fromData(this,Dut.AFTER_RENDER,e)),!1===this.visible&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this;this.emit(Dut.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var e=this.geometries,n=0;n<e.length;n++)e[n].clear(),e[n].container.remove(!0),e[n].labelsContainer.remove(!0);this.geometries=[];var r=this.controllers;for(n=0;n<r.length;n++)"annotation"===r[n].name?r[n].clear(!0):r[n].clear();this.createdScaleKeys.forEach((function(e,n){t.getRootView().scalePool.deleteScale(n)})),this.createdScaleKeys.clear();var i=this.views;for(n=0;n<i.length;n++)i[n].clear();this.emit(Dut.AFTER_CLEAR)},e.prototype.destroy=function(){this.emit(Dut.BEFORE_DESTROY);var e=this.interactions;(0,_ut.S6)(e,(function(t){t&&t.destroy()})),this.clear();for(var n=this.controllers,r=0,i=n.length;r<i;r++){n[r].destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),t.prototype.destroy.call(this)},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e);for(var n=this.geometries,r=0,i=n.length;r<i;r++){n[r].changeVisible(e)}var a=this.controllers;for(r=0,i=a.length;r<i;r++){a[r].changeVisible(e)}return this.foregroundGroup.set("visible",e),this.middleGroup.set("visible",e),this.backgroundGroup.set("visible",e),this.getCanvas().draw(),this},e.prototype.data=function(t){return(0,_ut.t8)(this.options,"data",t),this.isDataChanged=!0,this},e.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},e.prototype.filter=function(t,e){return(0,_ut.mf)(e)?((0,_ut.t8)(this.options,["filters",t],e),this):(!e&&(0,_ut.U2)(this.options,["filters",t])&&delete this.options.filters[t],this)},e.prototype.axis=function(t,e){return(0,_ut.jn)(t)?(0,_ut.t8)(this.options,["axes"],t):(0,_ut.t8)(this.options,["axes",t],e),this},e.prototype.legend=function(t,e){return(0,_ut.jn)(t)?(0,_ut.t8)(this.options,["legends"],t):(0,_ut.HD)(t)?((0,_ut.t8)(this.options,["legends",t],e),(0,_ut.PO)(e)&&(null==e?void 0:e.selected)&&(0,_ut.t8)(this.options,["filters",t],(function(t){var n;return null===(n=null==e?void 0:e.selected[t])||void 0===n||n}))):(0,_ut.t8)(this.options,["legends"],t),this},e.prototype.scale=function(t,e){var n=this;return(0,_ut.HD)(t)?(0,_ut.t8)(this.options,["scales",t],e):(0,_ut.Kn)(t)&&(0,_ut.S6)(t,(function(t,e){(0,_ut.t8)(n.options,["scales",e],t)})),this},e.prototype.tooltip=function(t){return(0,_ut.t8)(this.options,"tooltip",t),this},e.prototype.annotation=function(){return this.getController("annotation")},e.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},e.prototype.coordinate=function(t,e){return(0,_ut.HD)(t)?(0,_ut.t8)(this.options,"coordinate",{type:t,cfg:e}):(0,_ut.t8)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},e.prototype.coord=function(t,e){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,e)},e.prototype.facet=function(t,e){this.facetInstance&&this.facetInstance.destroy();var n=function(t){return fpt[(0,_ut.vl)(t)]}(t);if(!n)throw new Error("facet '".concat(t,"' is not exist!"));return this.facetInstance=new n(this,(0,Aut.pi)((0,Aut.pi)({},e),{type:t})),this},e.prototype.animate=function(t){return(0,_ut.t8)(this.options,"animate",t),this},e.prototype.updateOptions=function(t){return this.clear(),(0,_ut.CD)(this.options,t),this.views.forEach((function(t){return t.destroy()})),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},e.prototype.option=function(t,n){if(e.prototype[t])throw new Error("Can't use built in variable name \"".concat(t,'", please change another one.'));return(0,_ut.t8)(this.options,t,n),this},e.prototype.theme=function(t){return this.themeObject=(0,_ut.Kn)(t)?(0,_ut.b$)({},this.themeObject,Sgt(t)):Cgt(t),this},e.prototype.interaction=function(t,e){var n=this.interactions[t];n&&n.destroy();var r=sgt(t,this,e);return r&&(r.init(),this.interactions[t]=r),this},e.prototype.removeInteraction=function(t){var e=this.interactions[t];e&&(e.destroy(),this.interactions[t]=void 0)},e.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(Dut.BEFORE_CHANGE_DATA,Ngt.fromData(this,Dut.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].changeData(t)}this.emit(Dut.AFTER_CHANGE_DATA,Ngt.fromData(this,Dut.AFTER_CHANGE_DATA,null))},e.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:(0,_ut.d9)(this.options.scales),axes:(0,_ut.d9)(this.options.axes),coordinate:(0,_ut.d9)(this.coordinateController.getOption()),tooltip:(0,_ut.d9)(this.options.tooltip),legends:(0,_ut.d9)(this.options.legends),animate:this.options.animate,visible:this.visible},r=new e((0,Aut.pi)((0,Aut.pi)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:But}),middleGroup:this.middleGroup.addGroup({zIndex:jut}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:Put}),theme:this.themeObject,padding:this.padding},t),{options:(0,Aut.pi)((0,Aut.pi)({},n),(0,_ut.U2)(t,"options",{}))}));return this.views.push(r),r},e.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},e.prototype.removeView=function(t){var e=(0,_ut.Od)(this.views,(function(e){return e===t}))[0];return e&&e.destroy(),e},e.prototype.getCoordinate=function(){return this.coordinateInstance},e.prototype.getTheme=function(){return this.themeObject},e.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},e.prototype.getYScales=function(){var t={},e=[];return this.geometries.forEach((function(n){var r=n.getYScale(),i=r.field;t[i]||(t[i]=!0,e.push(r))})),e},e.prototype.getScalesByDim=function(t){for(var e=this.geometries,n={},r=0,i=e.length;r<i;r++){var a=e[r],o="x"===t?a.getXScale():a.getYScale();o&&!n[o.field]&&(n[o.field]=o)}return n},e.prototype.getScale=function(t,e){var n=e||this.getScaleKey(t);return this.getRootView().scalePool.getScale(n)},e.prototype.getScaleByField=function(t,e){return this.getScale(t,e)},e.prototype.getOptions=function(){return this.options},e.prototype.getData=function(){return this.filteredData},e.prototype.getOriginalData=function(){return this.options.data},e.prototype.getPadding=function(){return this.autoPadding.getPadding()},e.prototype.getGeometries=function(){return this.geometries},e.prototype.getElements=function(){return(0,_ut.u4)(this.geometries,(function(t,e){return t.concat(e.getElements())}),[])},e.prototype.getElementsBy=function(t){return this.getElements().filter((function(e){return t(e)}))},e.prototype.getLayer=function(t){return t===Cut.BG?this.backgroundGroup:t===Cut.MID?this.middleGroup:(Cut.FORE,this.foregroundGroup)},e.prototype.isPointInPlot=function(t){return function(t,e){var n=!1;if(t)if("theta"===t.type){var r=t.start,i=t.end;n=zdt(e.x,r.x,i.x)&&zdt(e.y,r.y,i.y)}else{var a=t.invert(e);n=zdt(a.x,0,1)&&zdt(a.y,0,1)}return n}(this.getCoordinate(),t)},e.prototype.getLegendAttributes=function(){return(0,_ut.xH)(this.geometries.map((function(t){return t.getGroupAttributes()})))},e.prototype.getGroupScales=function(){var t=this.geometries.map((function(t){return t.getGroupScales()}));return Hdt((0,_ut.xH)(t))},e.prototype.getCanvas=function(){return this.getRootView().canvas},e.prototype.getRootView=function(){for(var t=this;t.parent;)t=t.parent;return t},e.prototype.getXY=function(t){var e,n,r=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y");if((0,_ut.S6)(t,(function(t,r){i[r]&&(e=i[r].scale(t)),a[r]&&(n=a[r].scale(t))})),!(0,_ut.UM)(e)&&!(0,_ut.UM)(n))return r.convert({x:e,y:n})},e.prototype.getController=function(t){return(0,_ut.sE)(this.controllers,(function(e){return e.name===t}))},e.prototype.showTooltip=function(t){var e=this.getController("tooltip");return e&&e.showTooltip(t),this},e.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},e.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},e.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},e.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},e.prototype.getTooltipItems=function(t){var e=this.getController("tooltip");return e?e.getTooltipItems(t):[]},e.prototype.getSnapRecords=function(t){for(var e=this.geometries,n=[],r=0,i=e.length;r<i;r++){var a=e[r],o=a.dataArray;a.sort(o);for(var u=void 0,s=0,l=o.length;s<l;s++){(u=_gt(t,o[s],a))&&n.push(u)}}var c=this.views;for(r=0,i=c.length;r<i;r++){var f=c[r].getSnapRecords(t);n=n.concat(f)}return n},e.prototype.getComponents=function(){for(var t=[],e=this.controllers,n=0,r=e.length;n<r;n++){var i=e[n];t=t.concat(i.getComponents())}return t},e.prototype.filterData=function(t){var e=this.options.filters;return 0===(0,_ut.dp)(e)?t:(0,_ut.hX)(t,(function(t,n){return Object.keys(e).every((function(r){return(0,e[r])(t[r],t,n)}))}))},e.prototype.filterFieldData=function(t,e){var n=this.options.filters,r=(0,_ut.U2)(n,t);return(0,_ut.o8)(r)?e:e.filter((function(e,n){return r(e[t],e,n)}))},e.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),e=t.start,n=t.end,r=this.coordinateBBox.bl,i=this.coordinateBBox.tr;(0,_ut.Xy)(e,r)&&(0,_ut.Xy)(n,i)?this.isCoordinateChanged=!1:(this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(r,i))},e.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(Dut.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(Dut.AFTER_PAINT),this.isDataChanged=!1},e.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,_ut.U2)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var e=this.viewBBox,n=e.x,r=e.y,i=e.width,a=e.height;this.backgroundStyleRectShape.attr({fill:t,x:n,y:r,width:i,height:a})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},e.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=Wgt(this).shrink(Pgt(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();var e=this.controllers.find((function(t){return"tooltip"===t.name}));e.update();for(var n=this.views,r=0,i=n.length;r<i;r++){n[r].renderPaddingRecursive(t)}},e.prototype.renderLayoutRecursive=function(t){var e=!0===this.syncViewPadding?Vgt:(0,_ut.mf)(this.syncViewPadding)?this.syncViewPadding:void 0;e&&(e(this,this.views,Hgt),this.views.forEach((function(t){t.coordinateBBox=t.viewBBox.shrink(t.autoPadding.getPadding()),t.adjustCoordinate()}))),this.doLayout();for(var n=this.views,r=0,i=n.length;r<i;r++){n[r].renderLayoutRecursive(t)}},e.prototype.renderPaintRecursive=function(t){var e=this.middleGroup;if(this.limitInPlot){var n=Ydt(this.coordinateInstance),r=n.type,i=n.attrs;e.setClip({type:r,attrs:i})}else e.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var a=this.views,o=0,u=a.length;o<u;o++){a[o].renderPaintRecursive(t)}},e.prototype.createScale=function(t,e,n,r){var i=(0,_ut.U2)(this.options.scales,[t]),a=(0,Aut.pi)((0,Aut.pi)({},i),n);return this.parent?this.parent.createScale(t,e,a,r):this.scalePool.createScale(t,e,a,r)},e.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].renderDataRecursive(t)}},e.prototype.calculateViewBBox=function(){var t,e,n,r;if(this.parent){var i=this.parent.coordinateBBox;t=i.x,e=i.y,n=i.width,r=i.height}else t=0,e=0,n=this.canvas.get("width"),r=this.canvas.get("height");var a=this.region,o=a.start,u=a.end,s=new Wdt(t+n*o.x,e+r*o.y,n*(u.x-o.x),r*(u.y-o.y));this.viewBBox&&this.viewBBox.isEqual(s)||(this.viewBBox=new Wdt(t+n*o.x,e+r*o.y,n*(u.x-o.x),r*(u.y-o.y))),this.coordinateBBox=this.viewBBox},e.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},e.prototype.initComponentController=function(){for(var t=this.usedControllers,e=0,n=t.length;e<n;e++){var r=t[e],i=jgt[r];i&&this.controllers.push(new i(this))}},e.prototype.createViewEvent=function(t){var e=t.shape,n=t.name,r=e?e.get("origin"):null,i=new Ngt(this,t,r);return i.type=n,i},e.prototype.doPlotEvent=function(t){var e=t.type,n={x:t.x,y:t.y};if(["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"].includes(e)){var r=this.isPointInPlot(n),i=t.clone();if(r){var a="plot:".concat(e);i.type=a,this.emit(a,i),"mouseleave"!==e&&"touchend"!==e||(this.isPreMouseInPlot=!1)}"mousemove"===e||"touchmove"===e?(this.isPreMouseInPlot&&!r?("mousemove"===e&&(i.type=Fut.MOUSE_LEAVE,this.emit(Fut.MOUSE_LEAVE,i)),i.type=Fut.LEAVE,this.emit(Fut.LEAVE,i)):!this.isPreMouseInPlot&&r&&("mousemove"===e&&(i.type=Fut.MOUSE_ENTER,this.emit(Fut.MOUSE_ENTER,i)),i.type=Fut.ENTER,this.emit(Fut.ENTER,i)),this.isPreMouseInPlot=r):"mouseleave"!==e&&"touchend"!==e||this.isPreMouseInPlot&&("mouseleave"===e&&(i.type=Fut.MOUSE_LEAVE,this.emit(Fut.MOUSE_LEAVE,i)),i.type=Fut.LEAVE,this.emit(Fut.LEAVE,i),this.isPreMouseInPlot=!1)}},e.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},e.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var e=this.getCoordinate(),n=(0,_ut.U2)(this.options,"scales",{}),r=this.geometries,i=0,a=r.length;i<a;i++){var o=r[i];o.scales=this.getGeometryScales();var u={coordinate:e,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?o.update(u):o.init(u)}this.adjustScales()},e.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),e=this.getGroupedFields(),n=this.getOptions(),r=n.data,i=n.scales,a=void 0===i?{}:i,o=this.filteredData,u=0,s=t.length;u<s;u++){var l=t[u],c=a[l],f=this.getScaleKey(l);this.createScale(l,e.includes(l)?r:o,c,f),this.createdScaleKeys.set(f,!0)}},e.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},e.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),e={},n=0;n<t.length;n++){var r=t[n];e[r]=this.getScaleByField(r)}return e},e.prototype.getScaleFields=function(){for(var t=[],e=new Map,n=this.geometries,r=0;r<n.length;r++){Hdt(n[r].getScaleFields(),t,e)}return t},e.prototype.getGroupedFields=function(){for(var t=[],e=new Map,n=this.geometries,r=0;r<n.length;r++){Hdt(n[r].getGroupFields(),t,e)}return t},e.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},e.prototype.adjustCategoryScaleRange=function(){var t=this,e=(0,Aut.ev)([this.getXScale()],(0,Aut.CR)(this.getYScales()),!1).filter((function(t){return!!t})),n=this.getCoordinate(),r=this.options.scales;(0,_ut.S6)(e,(function(e){var i=e.field,a=e.values,o=e.isCategory,u=e.isIdentity;(o||u)&&a&&!(0,_ut.U2)(r,[i,"range"])&&(e.range=Qdt(e,n,t.theme))}))},e.prototype.initComponents=function(t){for(var e=this.controllers,n=0;n<e.length;n++){var r=e[n];t?r.update():(r.clear(),r.render())}},e.prototype.doLayout=function(){this.layoutFunc(this)},e.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,e=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,e)},e.prototype.paintGeometries=function(t){for(var e=this.options.animate,n=this.getCoordinate(),r={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},i=this.geometries,a=0;a<i.length;a++){var o=i[a];o.coordinate=n,o.canvasRegion=r,e||o.animate(!1),o.paint(t)}},e.prototype.renderComponents=function(t){for(var e=this.getComponents(),n=0;n<e.length;n++){e[n].component.render()}},e.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},e.prototype.initOptions=function(){var t=this,e=this.options,n=e.geometries,r=void 0===n?[]:n,i=e.interactions,a=void 0===i?[]:i,o=e.views,u=void 0===o?[]:o,s=e.annotations,l=void 0===s?[]:s,c=e.coordinate,f=e.events,h=e.facets;this.coordinateController?c&&this.coordinateController.update(c):this.coordinateController=new Rgt(c);for(var d=0;d<r.length;d++){var p=r[d];this.createGeometry(p)}for(var g=0;g<a.length;g++){var v=a[g],m=v.type,y=v.cfg;this.interaction(m,y)}for(var x=0;x<u.length;x++){var b=u[x];this.createView(b)}for(var w=this.getController("annotation"),S=0;S<l.length;S++){var k=l[S];w.annotation(k)}f&&(0,_ut.S6)(f,(function(e,n){t.on(n,e)})),h&&(0,_ut.S6)(h,(function(e){var n=e.type,r=(0,Aut._T)(e,["type"]);t.facet(n,r)}))},e.prototype.createGeometry=function(t){var e=t.type,n=t.cfg,r=void 0===n?{}:n;if(this[e]){var i=this[e](r);(0,_ut.S6)(t,(function(t,e){(0,_ut.mf)(i[e])&&i[e](t)}))}},e.prototype.getScaleKey=function(t){return"".concat(this.id,"-").concat(t)},e}(Jut);function Xgt(t,e){Ggt.prototype[t.toLowerCase()]=function(t){void 0===t&&(t={});var n=(0,Aut.pi)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),r=new e(n);return this.geometries.push(r),r}}var Ygt=function(t){function e(e){var n=this,r=e.container,i=e.width,a=e.height,o=e.autoFit,u=void 0!==o&&o,s=e.padding,l=e.appendPadding,c=e.renderer,f=void 0===c?"canvas":c,h=e.pixelRatio,d=e.localRefresh,p=void 0===d||d,g=e.visible,v=void 0===g||g,m=e.supportCSSTransform,y=void 0!==m&&m,x=e.defaultInteractions,b=void 0===x?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:x,w=e.options,S=e.limitInPlot,k=e.theme,C=e.syncViewPadding,E=(0,_ut.HD)(r)?document.getElementById(r):r,M=Vut('<div style="position:relative;"></div>');E.appendChild(M);var O=Yut(E,u,i,a),A=new(function(t){var e=Hut[t];if(!e)throw new Error("G engine '".concat(t,"' is not exist, please register it at first."));return e}(f).Canvas)((0,Aut.pi)({container:M,pixelRatio:h,localRefresh:p,supportCSSTransform:y},O));return(n=t.call(this,{parent:null,canvas:A,backgroundGroup:A.addGroup({zIndex:But}),middleGroup:A.addGroup({zIndex:jut}),foregroundGroup:A.addGroup({zIndex:Put}),padding:s,appendPadding:l,visible:v,options:w,limitInPlot:S,theme:k,syncViewPadding:C})||this).onResize=(0,_ut.Ds)((function(){n.forceFit()}),300),n.ele=E,n.canvas=A,n.width=O.width,n.height=O.height,n.autoFit=u,n.localRefresh=p,n.renderer=f,n.wrapperElement=M,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(b),n}return(0,Aut.ZT)(e,t),e.prototype.initDefaultInteractions=function(t){var e=this;(0,_ut.S6)(t,(function(t){e.interaction(t)}))},e.prototype.aria=function(t){var e="aria-label";!1===t?this.ele.removeAttribute(e):this.ele.setAttribute(e,t.label)},e.prototype.changeSize=function(t,e){return this.width===t&&this.height===e||(this.emit(Dut.BEFORE_CHANGE_SIZE),this.width=t,this.height=e,this.canvas.changeSize(t,e),this.render(!0),this.emit(Dut.AFTER_CHANGE_SIZE)),this},e.prototype.clear=function(){t.prototype.clear.call(this),this.aria(!1)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),function(t){var e=t.parentNode;e&&e.removeChild(t)}(this.wrapperElement),this.wrapperElement=null},e.prototype.changeVisible=function(e){return t.prototype.changeVisible.call(this,e),this.wrapperElement.style.display=e?"":"none",this},e.prototype.forceFit=function(){if(!this.destroyed){var t=Yut(this.ele,!0,this.width,this.height),e=t.width,n=t.height;this.changeSize(e,n)}},e.prototype.updateCanvasStyle=function(){Gut(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},e.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},e.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},e}(Ggt),qgt=Ygt,$gt=function(){function t(t){this.visible=!0,this.components=[],this.view=t}return t.prototype.clear=function(t){(0,_ut.S6)(this.components,(function(t){t.component.destroy()})),this.components=[]},t.prototype.destroy=function(){this.clear()},t.prototype.getComponents=function(){return this.components},t.prototype.changeVisible=function(t){this.visible!==t&&(this.components.forEach((function(e){t?e.component.show():e.component.hide()})),this.visible=t)},t}();var Jgt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLocked=!1,e}return(0,Aut.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.isVisible=function(){return!1!==this.view.getOptions().tooltip},e.prototype.render=function(){},e.prototype.showTooltip=function(t){if(this.point=t,this.isVisible()){var e=this.view,n=this.getTooltipItems(t);if(n.length){var r=this.getTitle(n),i={x:n[0].x,y:n[0].y};e.emit("tooltip:show",Ngt.fromData(e,"tooltip:show",(0,Aut.pi)({items:n,title:r},t)));var a=this.getTooltipCfg(),o=a.follow,u=a.showMarkers,s=a.showCrosshairs,l=a.showContent,c=a.marker,f=this.items,h=this.title;if((0,_ut.Xy)(h,r)&&(0,_ut.Xy)(f,n)?(this.tooltip&&o&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()):(e.emit("tooltip:change",Ngt.fromData(e,"tooltip:change",(0,Aut.pi)({items:n,title:r},t))),((0,_ut.mf)(l)?l(n):l)&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,_ut.CD)({},a,{items:this.getItemsAfterProcess(n),title:r},o?t:{})),this.tooltip.show()),u&&this.renderTooltipMarkers(n,c)),this.items=n,this.title=r,s){var d=(0,_ut.U2)(a,["crosshairs","follow"],!1);this.renderCrosshairs(d?t:i,a)}}else this.hideTooltip()}},e.prototype.hideTooltip=function(){if(this.getTooltipCfg().follow){var t=this.tooltipMarkersGroup;t&&t.hide();var e=this.xCrosshair,n=this.yCrosshair;e&&e.hide(),n&&n.hide();var r=this.tooltip;r&&r.hide(),this.view.emit("tooltip:hide",Ngt.fromData(this.view,"tooltip:hide",{})),this.point=null}else this.point=null},e.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},e.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},e.prototype.isTooltipLocked=function(){return this.isLocked},e.prototype.clear=function(){var t=this,e=t.tooltip,n=t.xCrosshair,r=t.yCrosshair,i=t.tooltipMarkersGroup;e&&(e.hide(),e.clear()),n&&n.clear(),r&&r.clear(),i&&i.clear(),(null==e?void 0:e.get("customContent"))&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},e.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},e.prototype.changeVisible=function(t){if(this.visible!==t){var e=this,n=e.tooltip,r=e.tooltipMarkersGroup,i=e.xCrosshair,a=e.yCrosshair;t?(n&&n.show(),r&&r.show(),i&&i.show(),a&&a.show()):(n&&n.hide(),r&&r.hide(),i&&i.hide(),a&&a.hide()),this.visible=t}},e.prototype.getTooltipItems=function(t){var e,n,r,i,a,o,u=this.findItemsFromView(this.view,t);if(u.length){u=(0,_ut.xH)(u);try{for(var s=(0,Aut.XA)(u),l=s.next();!l.done;l=s.next()){var c=l.value;try{for(var f=(r=void 0,(0,Aut.XA)(c)),h=f.next();!h.done;h=f.next()){var d=h.value,p=d.mappingData,g=p.x,v=p.y;d.x=(0,_ut.kJ)(g)?g[g.length-1]:g,d.y=(0,_ut.kJ)(v)?v[v.length-1]:v}}catch(k){r={error:k}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}}catch(C){e={error:C}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}if(!1===this.getTooltipCfg().shared&&u.length>1){var m=u[0],y=Math.abs(t.y-m[0].y);try{for(var x=(0,Aut.XA)(u),b=x.next();!b.done;b=x.next()){var w=b.value,S=Math.abs(t.y-w[0].y);S<=y&&(m=w,y=S)}}catch(E){a={error:E}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}u=[m]}return function(t){for(var e=[],n=function(n){var r=t[n];(0,_ut.sE)(e,(function(t){return t.color===r.color&&t.name===r.name&&t.value===r.value&&t.title===r.title}))||e.push(r)},r=0;r<t.length;r++)n(r);return e}((0,_ut.xH)(u))}return[]},e.prototype.layout=function(){},e.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},e.prototype.isCursorEntered=function(t){if(this.tooltip){var e=this.tooltip.getContainer(),n=this.tooltip.get("capture");if(e&&n){var r=e.getBoundingClientRect(),i=r.x,a=r.y,o=r.width,u=r.height;return new Wdt(i,a,o,u).isPointIn(t)}}return!1},e.prototype.getTooltipCfg=function(){var t=this.view,e=t.getOptions().tooltip,n=this.processCustomContent(e),r=t.getTheme(),i=(0,_ut.U2)(r,["components","tooltip"],{}),a=(0,_ut.U2)(n,"enterable",i.enterable);return(0,_ut.b$)({},i,n,{capture:!(!a&&!this.isLocked)})},e.prototype.processCustomContent=function(t){if((0,_ut.jn)(t)||!(0,_ut.U2)(t,"customContent"))return t;var e=t.customContent;return(0,Aut.pi)((0,Aut.pi)({},t),{customContent:function(t,n){var r=e(t,n)||"";return(0,_ut.HD)(r)?'<div class="g2-tooltip">'+r+"</div>":r}})},e.prototype.getTitle=function(t){var e=t[0].title||t[0].name;return this.title=e,e},e.prototype.renderTooltip=function(){var t=this.view.getCanvas(),e={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},n=this.getTooltipCfg(),r=new Idt((0,Aut.pi)((0,Aut.pi)({parent:t.get("el").parentNode,region:e},n),{visible:!1,crosshairs:null}));r.init(),this.tooltip=r},e.prototype.renderTooltipMarkers=function(t,e){var n,r,i=this.getTooltipMarkersGroup(),a=this.view.getRootView(),o=a.limitInPlot;try{for(var u=(0,Aut.XA)(t),s=u.next();!s.done;s=u.next()){var l=s.value,c=l.x,f=l.y;if(o||(null==i?void 0:i.getClip())){var h=Ydt(a.getCoordinate()),d=h.type,p=h.attrs;null==i||i.setClip({type:d,attrs:p})}else null==i||i.setClip(void 0);var g=this.view.getTheme(),v=(0,_ut.U2)(g,["components","tooltip","marker"],{}),m=(0,Aut.pi)((0,Aut.pi)({fill:l.color,symbol:"circle",shadowColor:l.color},(0,_ut.mf)(e)?(0,Aut.pi)((0,Aut.pi)({},v),e(l)):e),{x:c,y:f});i.addShape("marker",{attrs:m})}}catch(y){n={error:y}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}},e.prototype.renderCrosshairs=function(t,e){var n=(0,_ut.U2)(e,["crosshairs","type"],"x");"x"===n?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,e)):"y"===n?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,e)):"xy"===n&&(this.renderXCrosshairs(t,e),this.renderYCrosshairs(t,e))},e.prototype.renderXCrosshairs=function(t,e){var n,r,i=this.getViewWithGeometry(this.view).getCoordinate();if(i.isRect)i.isTransposed?(n={x:i.start.x,y:t.y},r={x:i.end.x,y:t.y}):(n={x:t.x,y:i.end.y},r={x:t.x,y:i.start.y});else{var a=Xdt(i,t),o=i.getCenter(),u=i.getRadius();r=Bdt(o.x,o.y,u,a),n=o}var s=(0,_ut.b$)({start:n,end:r,container:this.getTooltipCrosshairsGroup()},(0,_ut.U2)(e,"crosshairs",{}),this.getCrosshairsText("x",t,e));delete s.type;var l=this.xCrosshair;l?l.update(s):(l=new kht(s)).init(),l.render(),l.show(),this.xCrosshair=l},e.prototype.renderYCrosshairs=function(t,e){var n,r,i=this.getViewWithGeometry(this.view).getCoordinate();if(i.isRect){var a=void 0,o=void 0;i.isTransposed?(a={x:t.x,y:i.end.y},o={x:t.x,y:i.start.y}):(a={x:i.start.x,y:t.y},o={x:i.end.x,y:t.y}),n={start:a,end:o},r="Line"}else n={center:i.getCenter(),radius:Gdt(i,t),startAngle:i.startAngle,endAngle:i.endAngle},r="Circle";delete(n=(0,_ut.b$)({container:this.getTooltipCrosshairsGroup()},n,(0,_ut.U2)(e,"crosshairs",{}),this.getCrosshairsText("y",t,e))).type;var u=this.yCrosshair;u?i.isRect&&"circle"===u.get("type")||!i.isRect&&"line"===u.get("type")?(u=new M[r](n)).init():u.update(n):(u=new M[r](n)).init(),u.render(),u.show(),this.yCrosshair=u},e.prototype.getCrosshairsText=function(t,e,n){var r=(0,_ut.U2)(n,["crosshairs","text"]),i=(0,_ut.U2)(n,["crosshairs","follow"]),a=this.items;if(r){var o=this.getViewWithGeometry(this.view),u=a[0],s=o.getXScale(),l=o.getYScales()[0],c=void 0,f=void 0;if(i){var h=this.view.getCoordinate().invert(e);c=s.invert(h.x),f=l.invert(h.y)}else c=u.data[s.field],f=u.data[l.field];var d="x"===t?c:f;return(0,_ut.mf)(r)?r=r(t,d,a,e):r.content=d,{text:r}}},e.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},e.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):((t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"})).toFront(),this.tooltipMarkersGroup=t),t},e.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||((t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1})).toBack(),this.tooltipCrosshairsGroup=t),t},e.prototype.findItemsFromView=function(t,e){var n,r;if(!1===t.getOptions().tooltip)return[];var i=Igt(t,e,this.getTooltipCfg());try{for(var a=(0,Aut.XA)(t.views),o=a.next();!o.done;o=a.next()){var u=o.value;i=i.concat(this.findItemsFromView(u,e))}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},e.prototype.getViewWithGeometry=function(t){var e=this;return t.geometries.length?t:(0,_ut.sE)(t.views,(function(t){return e.getViewWithGeometry(t)}))},e.prototype.getItemsAfterProcess=function(t){var e=this.getTooltipCfg().customItems,n=e||function(t){return t};return n(t)},e}($gt),Kgt=Jgt,Qgt={};function tvt(t){return Qgt[t.toLowerCase()]}function evt(t,e){Qgt[t.toLowerCase()]=e}var nvt={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},rvt={interval:function(t){return{enter:{animation:t.isRect?t.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:t.isPolar&&t.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},ivt={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(t){var e;return t.isRect?e=t.isTransposed?"grow-in-x":"grow-in-y":(e="grow-in-xy",t.isPolar&&t.isTransposed&&(e="wave-in")),{animation:e}},schema:function(t){return{animation:t.isRect?t.isTransposed?"grow-in-x":"grow-in-y":"grow-in-xy"}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function avt(t,e,n){var r=rvt[t];return r&&((0,_ut.mf)(r)&&(r=r(e)),r=(0,_ut.b$)({},nvt,r),n)?r[n]:r}function ovt(t,e,n){var r=(0,_ut.U2)(t.get("origin"),"data",Uut),i=e.animation,a=function(t,e){return{delay:(0,_ut.mf)(t.delay)?t.delay(e):t.delay,easing:(0,_ut.mf)(t.easing)?t.easing(e):t.easing,duration:(0,_ut.mf)(t.duration)?t.duration(e):t.duration,callback:t.callback,repeat:t.repeat}}(e,r);if(i){var o=tvt(i);o&&o(t,a,n)}else t.animate(n.toAttrs,a)}var uvt="element-background",svt=function(t){function e(e){var n=t.call(this,e)||this;n.labelShape=[],n.states=[];var r=e.shapeFactory,i=e.container,a=e.offscreenGroup,o=e.elementIndex,u=e.visible,s=void 0===u||u;return n.shapeFactory=r,n.container=i,n.offscreenGroup=a,n.visible=s,n.elementIndex=o,n}return(0,Aut.ZT)(e,t),e.prototype.draw=function(t,e){void 0===e&&(e=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,e),!1===this.visible&&this.changeVisible(!1)},e.prototype.update=function(t){var e=this.shapeFactory,n=this.shape;if(n){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(n,t);var r=this.getOffscreenGroup(),i=e.drawShape(this.shapeType,t,r);i.cfg.data=this.data,i.cfg.origin=t,i.cfg.element=this,this.syncShapeStyle(n,i,this.getStates(),this.getAnimateCfg("update"))}},e.prototype.destroy=function(){var e=this.shapeFactory,n=this.shape;if(n){var r=this.getAnimateCfg("leave");r?ovt(n,r,{coordinate:e.coordinate,toAttrs:(0,Aut.pi)({},n.attr())}):n.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,t.prototype.destroy.call(this)},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e),e?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach((function(t){t.show()}))):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach((function(t){t.hide()})))},e.prototype.setState=function(t,e){var n=this,r=n.states,i=n.shapeFactory,a=n.model,o=n.shape,u=n.shapeType,s=r.indexOf(t);if(e){if(s>-1)return;r.push(t),"active"!==t&&"selected"!==t||null==o||o.toFront()}else{if(-1===s)return;if(r.splice(s,1),"active"===t||"selected"===t){var l=this.geometry,c=l.sortZIndex,f=l.zIndexReversed?this.geometry.elements.length-this.elementIndex:this.elementIndex;c?o.setZIndex(f):o.set("zIndex",f)}}var h=i.drawShape(u,a,this.getOffscreenGroup());r.length?this.syncShapeStyle(o,h,r,null):this.syncShapeStyle(o,h,["reset"],null),h.remove(!0);var d={state:t,stateStatus:e,element:this,target:this.container};this.container.emit("statechange",d),Gct(this.shape,"statechange",d)},e.prototype.clearStates=function(){var t=this,e=this.states;(0,_ut.S6)(e,(function(e){t.setState(e,!1)})),this.states=[]},e.prototype.hasState=function(t){return this.states.includes(t)},e.prototype.getStates=function(){return this.states},e.prototype.getData=function(){return this.data},e.prototype.getModel=function(){return this.model},e.prototype.getBBox=function(){var t=this.shape,e=this.labelShape,n={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return t&&(n=t.getCanvasBBox()),e&&e.forEach((function(t){var e=t.getCanvasBBox();n.x=Math.min(e.x,n.x),n.y=Math.min(e.y,n.y),n.minX=Math.min(e.minX,n.minX),n.minY=Math.min(e.minY,n.minY),n.maxX=Math.max(e.maxX,n.maxX),n.maxY=Math.max(e.maxY,n.maxY)})),n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n},e.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,e=t.shapeType,n=t.geometry,r=t.shapeFactory,i=n.stateOption,a=r.defaultShapeType,o=r.theme[e]||r.theme[a];this.statesStyle=(0,_ut.b$)({},o,i)}return this.statesStyle},e.prototype.getStateStyle=function(t,e){var n=this.getStatesStyle(),r=(0,_ut.U2)(n,[t,"style"],{}),i=r[e]||r;return(0,_ut.mf)(i)?i(this):i},e.prototype.getAnimateCfg=function(t){var e=this,n=this.animate;if(n){var r=n[t];return r?(0,Aut.pi)((0,Aut.pi)({},r),{callback:function(){var t;(0,_ut.mf)(r.callback)&&r.callback(),null===(t=e.geometry)||void 0===t||t.emit(Tut.AFTER_DRAW_ANIMATE)}}):r}return null},e.prototype.drawShape=function(t,e){var n;void 0===e&&(e=!1);var r=this,i=r.shapeFactory,a=r.container,o=r.shapeType;if(this.shape=i.drawShape(o,t,a),this.shape){this.setShapeInfo(this.shape,t);var u=this.shape.cfg.name;u?(0,_ut.HD)(u)&&(this.shape.cfg.name=["element",u]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var s=e?"enter":"appear",l=this.getAnimateCfg(s);l&&(null===(n=this.geometry)||void 0===n||n.emit(Tut.BEFORE_DRAW_ANIMATE),ovt(this.shape,l,{coordinate:i.coordinate,toAttrs:(0,Aut.pi)({},this.shape.attr())}))}},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.setShapeInfo=function(t,e){var n=this;(t.cfg.origin=e,t.cfg.element=this,t.isGroup())&&t.get("children").forEach((function(t){n.setShapeInfo(t,e)}))},e.prototype.syncShapeStyle=function(t,e,n,r,i){var a,o=this;if(void 0===n&&(n=[]),void 0===i&&(i=0),t&&e){var u=t.get("clipShape"),s=e.get("clipShape");if(this.syncShapeStyle(u,s,n,r),t.isGroup())for(var l=t.get("children"),c=e.get("children"),f=0;f<l.length;f++)this.syncShapeStyle(l[f],c[f],n,r,i+f);else{if(!(0,_ut.xb)(n)&&!(0,_ut.Xy)(n,["reset"])){var h=t.get("name");(0,_ut.kJ)(h)&&(h=h[1]),(0,_ut.S6)(n,(function(t){if(e.get("name")!==uvt){var n=o.getStateStyle(t,h||i);e.attr(n)}}))}var d=Ndt(t,e);this.animate?r?(null===(a=this.geometry)||void 0===a||a.emit(Tut.BEFORE_DRAW_ANIMATE),ovt(t,r,{coordinate:this.shapeFactory.coordinate,toAttrs:d,shapeModel:this.model})):(0,_ut.xb)(n)?t.attr(d):(t.stopAnimate(),t.animate(d,{duration:300})):t.attr(d)}}},e.prototype.getShapeType=function(t){var e=(0,_ut.U2)(t,"shape");return(0,_ut.kJ)(e)?e[0]:e},e}(Jut),lvt=svt,cvt={},fvt={};function hvt(t,e){cvt[t.toLowerCase()]=e}function dvt(t,e){fvt[t.toLowerCase()]=e}var pvt={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(t,e){var n=this.getShape(t);return n.getPoints?n.getPoints(e):this.getDefaultPoints(e)},getShape:function(t){var e=this[t]||this[this.defaultShapeType];return e.coordinate=this.coordinate,e},getDefaultPoints:function(){return[]},getDefaultStyle:function(t){return(0,_ut.U2)(t,[this.defaultShapeType,"default","style"],{})},getMarker:function(t,e){var n=this.getShape(t);if(!n.getMarker){var r=this.defaultShapeType;n=this.getShape(r)}var i=this.theme,a=(0,_ut.U2)(i,[t,"default"],{}),o=n.getMarker(e);return(0,_ut.b$)({},a,o)},drawShape:function(t,e,n){return this.getShape(t).draw(e,n)}},gvt={coordinate:null,parsePath:function(t){var e=this.coordinate,n=(0,fdt.tr)(t);return n=e.isPolar?Mpt(e,n):function(t,e){var n=[];return(0,_ut.S6)(e,(function(e){switch(e[0].toLowerCase()){case"m":case"l":case"c":n.push(wpt(e,t));break;case"a":n.push(Spt(e,t));break;default:n.push(e)}})),n}(e,n),n},parsePoint:function(t){return this.coordinate.convert(t)},parsePoints:function(t){var e=this.coordinate;return t.map((function(t){return e.convert(t)}))},draw:function(t,e){}},vvt={};function mvt(t,e){var n=(0,_ut.jC)(t),r=(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},pvt),e),{geometryType:t});return vvt[n]=r,r}function yvt(t,e,n){var r=(0,_ut.jC)(t),i=vvt[r],a=(0,Aut.pi)((0,Aut.pi)({},gvt),n);return i[e]=a,a}function xvt(t){var e=(0,_ut.jC)(t);return vvt[e]}function bvt(t,e){return(0,_ut.G)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],(function(n){return!(0,_ut.Xy)(t[n],e[n])}))}function wvt(t){return(0,_ut.kJ)(t)?t:t.split("*")}function Svt(t,e){for(var n=[],r=[],i=[],a=new Map,o=0;o<e.length;o++){var u=e[o];t[u]?r.push(u):n.push(u),a.set(u,!0)}return Object.keys(t).forEach((function(t){a.has(t)||i.push(t)})),{added:n,updated:r,removed:i}}var kvt=function(t){function e(e){var n=t.call(this,e)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var r=e.container,i=e.labelsContainer,a=e.coordinate,o=e.data,u=e.sortable,s=void 0!==u&&u,l=e.visible,c=void 0===l||l,f=e.theme,h=e.scales,d=void 0===h?{}:h,p=e.scaleDefs,g=void 0===p?{}:p,v=e.intervalPadding,m=e.dodgePadding,y=e.maxColumnWidth,x=e.minColumnWidth,b=e.columnWidthRatio,w=e.roseWidthRatio,S=e.multiplePieWidthRatio,k=e.zIndexReversed,C=e.sortZIndex,E=e.useDeferredLabel;return n.container=r,n.labelsContainer=i,n.coordinate=a,n.data=o,n.sortable=s,n.visible=c,n.userTheme=f,n.scales=d,n.scaleDefs=g,n.intervalPadding=v,n.dodgePadding=m,n.maxColumnWidth=y,n.minColumnWidth=x,n.columnWidthRatio=b,n.roseWidthRatio=w,n.multiplePieWidthRatio=S,n.zIndexReversed=k,n.sortZIndex=C,n.useDeferredLabel=E?"number"==typeof E?E:1/0:null,n}return(0,Aut.ZT)(e,t),e.prototype.position=function(t){var e=t;(0,_ut.PO)(t)||(e={fields:wvt(t)});var n=(0,_ut.U2)(e,"fields");return 1===n.length&&(n.unshift("1"),(0,_ut.t8)(e,"fields",n)),(0,_ut.t8)(this.attributeOption,"position",e),this},e.prototype.color=function(t,e){return this.createAttrOption("color",t,e),this},e.prototype.shape=function(t,e){return this.createAttrOption("shape",t,e),this},e.prototype.size=function(t,e){return this.createAttrOption("size",t,e),this},e.prototype.adjust=function(t){var e=t;return((0,_ut.HD)(t)||(0,_ut.PO)(t))&&(e=[t]),(0,_ut.S6)(e,(function(t,n){(0,_ut.Kn)(t)||(e[n]={type:t})})),this.adjustOption=e,this},e.prototype.style=function(t,e){if((0,_ut.HD)(t)){var n=wvt(t);this.styleOption={fields:n,callback:e}}else{var r=t,i=(n=r.fields,r.callback),a=r.cfg;this.styleOption=n||i||a?t:{cfg:t}}return this},e.prototype.tooltip=function(t,e){if((0,_ut.HD)(t)){var n=wvt(t);this.tooltipOption={fields:n,callback:e}}else this.tooltipOption=t;return this},e.prototype.animate=function(t){return this.animateOption=t,this},e.prototype.label=function(t,e,n){if((0,_ut.HD)(t)){var r={},i=wvt(t);r.fields=i,(0,_ut.mf)(e)?r.callback=e:(0,_ut.PO)(e)&&(r.cfg=e),n&&(r.cfg=n),this.labelOption=r}else this.labelOption=t;return this},e.prototype.state=function(t){return this.stateOption=t,this},e.prototype.customInfo=function(t){return this.customOption=t,this},e.prototype.init=function(t){void 0===t&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},e.prototype.update=function(t){void 0===t&&(t={});var e=t.data,n=t.isDataChanged,r=t.isCoordinateChanged,i=this.attributeOption,a=this.lastAttributeOption;(0,_ut.Xy)(i,a)?!e||!n&&(0,_ut.Xy)(e,this.data)?this.setCfg(t):(this.setCfg(t),this.initAttributes(),this.processData(e)):this.init(t),this.adjustScale(),this.isCoordinateChanged=r},e.prototype.paint=function(t){var e=this;void 0===t&&(t=!1),this.animateOption&&(this.animateOption=(0,_ut.b$)({},avt(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[],this.getOffscreenGroup().clear();var n=this.beforeMappingData,r=this.beforeMapping(n);this.dataArray=new Array(r.length);for(var i=0;i<r.length;i++){var a=r[i];this.dataArray[i]=this.mapping(a)}if(this.updateElements(this.dataArray,t),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(t)){var o=this.container,u=this.type,s=this.coordinate,l=(0,_ut.U2)(this.animateOption,"appear"),c=this.getYScale(),f=s.convert({x:0,y:c.scale(this.getYMinValue())});!function(t,e,n,r,i){if(ivt[n]){var a=ivt[n](r),o=tvt((0,_ut.U2)(a,"animation",""));if(o){var u=(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},nvt.appear),a),e);t.stopAnimate(),o(t,u,{coordinate:r,minYPoint:i,toAttrs:null})}}}(o,l,u,s,f)}if(this.labelOption){var h=this.useDeferredLabel,d=function(){return e.renderLabels((0,_ut.xH)(e.dataArray),t)}.bind(this);if("number"==typeof h){var p="number"==typeof h&&h!==1/0?h:0;if(window.requestIdleCallback){var g=p&&p!==1/0?{timeout:p}:void 0;window.requestIdleCallback(d,g)}else setTimeout(d,p)}else d()}this.lastAttributeOption=(0,Aut.pi)({},this.attributeOption),!1===this.visible&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this,e=t.container,n=t.geometryLabel,r=t.offscreenGroup;e&&e.clear(),n&&n.clear(),r&&r.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},e.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,t.prototype.destroy.call(this)},e.prototype.getGroupScales=function(){return this.groupScales},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},e.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},e.prototype.getGroupAttributes=function(){var t=[];return(0,_ut.S6)(this.attributes,(function(e){zut.includes(e.type)&&t.push(e)})),t},e.prototype.getDefaultValue=function(t){var e,n=this.getAttribute(t);return n&&(0,_ut.xb)(n.scales)&&(e=n.values[0]),e},e.prototype.getAttributeValues=function(t,e){for(var n=[],r=t.scales,i=0,a=r.length;i<a;i++){var o=r[i],u=o.field;o.isIdentity?n.push(o.values):n.push(e[u])}return t.mapping.apply(t,(0,Aut.ev)([],(0,Aut.CR)(n),!1))},e.prototype.getAdjust=function(t){return this.adjusts[t]},e.prototype.getCoordinate=function(){return this.coordinate},e.prototype.getData=function(){return this.data},e.prototype.getShapeMarker=function(t,e){return this.getShapeFactory().getMarker(t,e)},e.prototype.getElementsBy=function(t){return this.elements.filter((function(e){return t(e)}))},e.prototype.getElements=function(){return this.elements},e.prototype.getElementId=function(t){var e=(t=(0,_ut.kJ)(t)?t[0]:t)[Uut];if(this.idFields.length){for(var n=e[this.idFields[0]],r=1;r<this.idFields.length;r++)n+="-"+e[this.idFields[r]];return n}var i,a,o=this.type,u=this.getXScale(),s=this.getYScale(),l=u.field||"x",c=e[s.field||"y"];i="identity"===u.type?u.values[0]:e[l],a="interval"===o||"schema"===o?"".concat(i):"line"===o||"area"===o||"path"===o?o:"".concat(i,"-").concat(c);for(var f=this.groupScales,h=(r=0,f.length);r<h;r++){var d=f[r].field;a="".concat(a,"-").concat(e[d])}var p=this.getAdjust("dodge");if(p){var g=p.dodgeBy;g&&(a="".concat(a,"-").concat(e[g]))}return this.getAdjust("jitter")&&(a="".concat(a,"-").concat(t.x,"-").concat(t.y)),a},e.prototype.getScaleFields=function(){var t=[],e=new Map,n=this,r=n.attributeOption,i=n.labelOption,a=n.tooltipOption;for(var o in r)if(r.hasOwnProperty(o)){var u=r[o];u.fields?Hdt(u.fields,t,e):u.values&&Hdt(u.values,t,e)}return i&&i.fields&&Hdt(i.fields,t,e),(0,_ut.Kn)(a)&&a.fields&&Hdt(a.fields,t,e),t},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e);for(var n=this.elements,r=0,i=n.length;r<i;r++){n[r].changeVisible(e)}e?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},e.prototype.getFields=function(){var t=new Map,e=[];return Object.values(this.attributeOption).forEach((function(n){((null==n?void 0:n.fields)||[]).forEach((function(n){t.has(n)||e.push(n),t.set(n,!0)}))}),[]),e},e.prototype.getGroupFields=function(){for(var t=[],e=new Map,n=0,r=zut.length;n<r;n++){var i=zut[n],a=this.attributeOption[i];a&&a.fields&&Hdt(a.fields,t,e)}return t},e.prototype.getXYFields=function(){var t=(0,Aut.CR)(this.attributeOption.position.fields,2);return[t[0],t[1]]},e.prototype.getXField=function(){return(0,_ut.U2)(this.getXYFields(),[0])},e.prototype.getYField=function(){return(0,_ut.U2)(this.getXYFields(),[1])},e.prototype.getShapes=function(){return this.elements.map((function(t){return t.shape}))},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.sort=function(t){if(!this.hasSorted)for(var e=this.getXScale(),n=e.field,r=0;r<t.length;r++){t[r].sort((function(t,r){return e.translate(t[Uut][n])-e.translate(r[Uut][n])}))}this.hasSorted=!0},e.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},e.prototype.getShapeFactory=function(){var t=this.shapeType;if(xvt(t))return this.shapeFactory||(this.shapeFactory=(0,_ut.d9)(xvt(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},e.prototype.createShapePointsCfg=function(t){var e=this.getXScale(),n=this.getYScale();return{x:this.normalizeValues(t[e.field],e),y:n?this.normalizeValues(t[n.field],n):t.y?t.y:.1,y0:n?n.scale(this.getYMinValue()):void 0}},e.prototype.createElement=function(t,e,n){void 0===n&&(n=!1);var r=this.container,i=this.getDrawCfg(t),a=this.getShapeFactory(),o=new lvt({shapeFactory:a,container:r,offscreenGroup:this.getOffscreenGroup(),elementIndex:e});return o.animate=this.animateOption,o.geometry=this,o.draw(i,n),o},e.prototype.getDrawCfg=function(t){var e=t[Uut],n={mappingData:t,data:e,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},r=t.shape;!r&&this.getShapeFactory()&&(r=this.getShapeFactory().defaultShapeType),n.shape=r;var i=this.theme.geometries[this.shapeType];n.defaultStyle=(0,_ut.U2)(i,[r,"default"],{}).style,!n.defaultStyle&&this.getShapeFactory()&&(n.defaultStyle=this.getShapeFactory().getDefaultStyle(i));var a=this.styleOption;return a&&(n.style=this.getStyleCfg(a,e)),this.generatePoints&&(n.points=t.points,n.nextPoints=t.nextPoints),n},e.prototype.updateElements=function(t,e){var n,r,i,a,o,u;void 0===e&&(e=!1);for(var s=new Map,l=[],c=new Map,f=0,h=0;h<t.length;h++)for(var d=t[h],p=0;p<d.length;p++){var g=d[p],v=this.getElementId(g),m=s.has(v)?"".concat(v,"-").concat(h,"-").concat(p):v;l.push(m),s.set(m,g),c.set(m,f),f++}this.elements=new Array(f);var y=Svt(this.lastElementsMap,l),x=y.added,b=y.updated,w=y.removed;try{for(var S=(0,Aut.XA)(x),k=S.next();!k.done;k=S.next()){v=k.value,g=s.get(v),h=c.get(v);var C=this.createElement(g,h,e);this.elements[h]=C,this.elementsMap[v]=C,C.shape&&C.shape.set("zIndex",this.zIndexReversed?this.elements.length-h:h)}}catch(T){n={error:T}}finally{try{k&&!k.done&&(r=S.return)&&r.call(S)}finally{if(n)throw n.error}}try{for(var E=(0,Aut.XA)(b),M=E.next();!M.done;M=E.next()){v=M.value,C=this.lastElementsMap[v],g=s.get(v);var O=this.getDrawCfg(g),A=C.getModel();h=c.get(v);(this.isCoordinateChanged||bvt(O,A))&&(C.animate=this.animateOption,C.update(O)),this.elements[h]=C,this.elementsMap[v]=C,C.shape&&C.shape.set("zIndex",this.zIndexReversed?this.elements.length-h:h)}}catch(F){i={error:F}}finally{try{M&&!M.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}this.container&&this.container.sort();try{for(var _=(0,Aut.XA)(w),D=_.next();!D.done;D=_.next()){v=D.value;(C=this.lastElementsMap[v]).animate=this.animateOption,C.destroy()}}catch(I){o={error:I}}finally{try{D&&!D.done&&(u=_.return)&&u.call(_)}finally{if(o)throw o.error}}},e.prototype.getLabelType=function(){var t=this,e=t.labelOption,n=t.coordinate,r=t.type,i=n.type,a=n.isTransposed,o=(0,_ut.U2)(e,["cfg","type"]);return o||(o="polar"===i?a?"pie":"polar":"theta"===i?"pie":"interval"===r||"polygon"===r?"interval":"base"),o},e.prototype.getYMinValue=function(){var t=this.getYScale(),e=t.min,n=t.max;return e>=0?e:n<=0?n:0},e.prototype.createAttrOption=function(t,e,n){if((0,_ut.UM)(e)||(0,_ut.Kn)(e))(0,_ut.Kn)(e)&&(0,_ut.Xy)(Object.keys(e),["values"])?(0,_ut.t8)(this.attributeOption,t,{fields:e.values}):(0,_ut.t8)(this.attributeOption,t,e);else{var r={};(0,_ut.hj)(e)?r.values=[e]:r.fields=wvt(e),n&&((0,_ut.mf)(n)?r.callback=n:r.values=n),(0,_ut.t8)(this.attributeOption,t,r)}},e.prototype.initAttributes=function(){var t=this,e=this,n=e.attributes,r=e.attributeOption,i=e.theme,a=e.shapeType;this.groupScales=[];var o={},u=function(e){if(r.hasOwnProperty(e)){var u=r[e];if(!u)return{value:void 0};var s=(0,Aut.pi)({},u),l=s.callback,c=s.values,f=s.fields,h=(void 0===f?[]:f).map((function(n){var r=t.scales[n];!o[n]&&zut.includes(e)&&("cat"===$dt(r,(0,_ut.U2)(t.scaleDefs,n),e,t.type)&&(t.groupScales.push(r),o[n]=!0));return r}));s.scales=h,"position"!==e&&1===h.length&&"identity"===h[0].type?s.values=h[0].values:l||c||("size"===e?s.values=i.sizes:"shape"===e?s.values=i.shapes[a]||[]:"color"===e&&(h.length?s.values=h[0].values.length<=10?i.colors10:i.colors20:s.values=i.colors10));var d=_ct(e);n[e]=new d(s)}};for(var s in r){var l=u(s);if("object"==typeof l)return l.value}},e.prototype.processData=function(t){var e,n;this.hasSorted=!1;for(var r=this.getAttribute("position").scales.filter((function(t){return t.isCategory})),i=this.groupData(t),a=[],o=0,u=i.length;o<u;o++){for(var s=i[o],l=[],c=0,f=s.length;c<f;c++){var h=s[c],d={};for(var p in h)d[p]=h[p];d[Uut]=h;try{for(var g=(e=void 0,(0,Aut.XA)(r)),v=g.next();!v.done;v=g.next()){var m=v.value,y=m.field;d[y]=m.translate(d[y])}}catch(b){e={error:b}}finally{try{v&&!v.done&&(n=g.return)&&n.call(g)}finally{if(e)throw e.error}}l.push(d)}a.push(l)}var x=this.adjustData(a);return this.beforeMappingData=x,x},e.prototype.adjustData=function(t){var e=this.adjustOption,n=this,r=n.intervalPadding,i=n.dodgePadding,a=n.theme,o=this.maxColumnWidth||a.maxColumnWidth,u=this.minColumnWidth||a.minColumnWidth,s=this.columnWidthRatio||a.columnWidthRatio,l=t;if(e){var c=this.getXScale(),f=this.getYScale(),h=c.field,d=f?f.field:null,p=Vdt(this.coordinate),g=c.values.length,v=this.getAttribute("size"),m=void 0;v&&(m=v.values[0]);for(var y=0,x=e.length;y<x;y++){var b=e[y],w=(0,Aut.pi)({xField:h,yField:d,intervalPadding:r,dodgePadding:i,xDimensionLength:p,groupNum:g,defaultSize:m,maxColumnWidth:o,minColumnWidth:u,columnWidthRatio:s},b),S=b.type;if("dodge"===S){var k=[];if(c.isCategory||"identity"===c.type)k.push("x");else{if(f)throw new Error("dodge is not support linear attribute, please use category attribute!");k.push("y")}w.adjustNames=k,w.dodgeRatio=s}else if("stack"===S){var C=this.coordinate;if(!f){w.height=C.getHeight();var E=this.getDefaultValue("size")||3;w.size=E}!C.isTransposed&&(0,_ut.UM)(w.reverseOrder)&&(w.reverseOrder=!0)}var M=nst(S);w.dimValuesMap={},c&&c.values&&(w.dimValuesMap[c.field]=c.values.map((function(t){return c.translate(t)})));var O=new M(w);l=O.process(l),this.adjusts[S]=O}}return l},e.prototype.groupData=function(t){for(var e=this.getGroupScales(),n=this.scaleDefs,r={},i=[],a=0;a<e.length;a++){var o=e[a].field;i.push(o),(0,_ut.U2)(n,[o,"values"])&&(r[o]=n[o].values)}return function(t,e,n){var r,i;if(void 0===n&&(n={}),!e)return[t];var a=(0,_ut.Ms)(t,e),o=[];if(1===e.length&&n[e[0]]){var u=n[e[0]];try{for(var s=(0,Aut.XA)(u),l=s.next();!l.done;l=s.next()){var c=l.value,f=a["_".concat(c)];f&&o.push(f)}}catch(p){r={error:p}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}else for(var h in a)if(a.hasOwnProperty(h)){var d=a[h];o.push(d)}return o}(t,i,r)},e.prototype.updateStackRange=function(t,e){for(var n=(0,_ut.xH)(e),r=t.field,i=t.min,a=t.max,o=0;o<n.length;o++){var u=n[o],s=Math.min.apply(null,u[r]),l=Math.max.apply(null,u[r]);s<i&&(i=s),l>a&&(a=l)}var c=this.scaleDefs,f={};i<t.min&&!(0,_ut.U2)(c,[r,"min"])&&(f.min=i),a>t.max&&!(0,_ut.U2)(c,[r,"max"])&&(f.max=a),t.change(f)},e.prototype.beforeMapping=function(t){var e=t;if(this.sortable&&this.sort(e),this.generatePoints)for(var n=0,r=e.length;n<r;n++){var i=e[n];this.generateShapePoints(i);var a=e[n+1];a&&(this.generateShapePoints(a),i[0].nextPoints=a[0].points)}return e},e.prototype.generateShapePoints=function(t){for(var e=this.getShapeFactory(),n=this.getAttribute("shape"),r=0;r<t.length;r++){var i=t[r],a=this.createShapePointsCfg(i),o=n?this.getAttributeValues(n,i):null,u=e.getShapePoints(o,a);i.points=u}},e.prototype.normalizeValues=function(t,e){var n=[];if((0,_ut.kJ)(t))for(var r=0;r<t.length;r++){var i=t[r];n.push(e.scale(i))}else n=e.scale(t);return n},e.prototype.mapping=function(t){for(var e=this.attributes,n=[],r=0;r<t.length;r++){var i=t[r],a={_origin:i[Uut],points:i.points,nextPoints:i.nextPoints};for(var o in e)if(e.hasOwnProperty(o)){var u=e[o],s=u.names,l=this.getAttributeValues(u,i);if(s.length>1)for(var c=0;c<l.length;c+=1){var f=l[c];a[s[c]]=(0,_ut.kJ)(f)&&1===f.length?f[0]:f}else a[s[0]]=1===l.length?l[0]:l}this.convertPoint(a),n.push(a)}return n},e.prototype.convertPoint=function(t){var e,n,r,i=t.x,a=t.y,o=this.coordinate;if((0,_ut.kJ)(i)&&(0,_ut.kJ)(a)){e=[],n=[];for(var u=0,s=0,l=i.length,c=a.length;u<l&&s<c;u+=1,s+=1)r=o.convert({x:i[u],y:a[s]}),e.push(r.x),n.push(r.y)}else if((0,_ut.kJ)(a)){n=[];for(var f=0;f<a.length;f++){var h=a[f];r=o.convert({x:i,y:h}),e&&e!==r.x?((0,_ut.kJ)(e)||(e=[e]),e.push(r.x)):e=r.x,n.push(r.y)}}else if((0,_ut.kJ)(i)){e=[];for(f=0;f<i.length;f++){var d=i[f];r=o.convert({x:d,y:a}),n&&n!==r.y?((0,_ut.kJ)(n)||(n=[n]),n.push(r.y)):n=r.y,e.push(r.x)}}else{var p=o.convert({x:i,y:a});e=p.x,n=p.y}t.x=e,t.y=n},e.prototype.getStyleCfg=function(t,e){var n=t.fields,r=void 0===n?[]:n,i=t.callback,a=t.cfg;if(a)return a;var o=r.map((function(t){return e[t]}));return i.apply(void 0,(0,Aut.ev)([],(0,Aut.CR)(o),!1))},e.prototype.setCfg=function(t){var e=this,n=t.coordinate,r=t.data,i=t.theme,a=t.scaleDefs;n&&(this.coordinate=n),r&&(this.data=r),a&&(this.scaleDefs=a,this.idFields=[],(0,_ut.S6)(a,(function(t,n){t&&t.key&&e.idFields.push(n)}))),i&&(this.theme=this.userTheme?(0,_ut.b$)({},i,this.userTheme):i)},e.prototype.renderLabels=function(t,e){return void 0===e&&(e=!1),(0,Aut.mG)(this,void 0,void 0,(function(){var n,r,i,a,o,u,s,l,c,f,h,d,p=this;return(0,Aut.Jh)(this,(function(g){switch(g.label){case 0:return n=this.geometryLabel,this.emit(Tut.BEFORE_RENDER_LABEL),n||(r=this.getLabelType(),i=function(t){return cvt[t.toLowerCase()]}(r),n=new i(this),this.geometryLabel=n),[4,n.render(t,e)];case 1:g.sent(),a=n.labelsRenderer.shapesMap,o=new Map,(0,_ut.S6)(a,(function(t,e){for(var n=t.getChildren()||[],r=0;r<n.length;r++){var i=n[r],a=p.elementsMap[i.get("elementId")||e.split(" ")[0]];if(a){i.cfg.name=["element","label"],i.cfg.element=a;var u=o.get(a)||new Set;u.add(t),o.set(a,u)}}}));try{for(u=(0,Aut.XA)(o.entries()),s=u.next();!s.done;s=u.next())l=(0,Aut.CR)(s.value,2),c=l[0],f=l[1],c.labelShape=(0,Aut.ev)([],(0,Aut.CR)(f),!1)}catch(v){h={error:v}}finally{try{s&&!s.done&&(d=u.return)&&d.call(u)}finally{if(h)throw h.error}}return this.emit(Tut.AFTER_RENDER_LABEL),[2]}}))}))},e.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(void 0===(0,_ut.U2)(this.animateOption,"appear")||(0,_ut.U2)(this.animateOption,"appear")&&void 0===(0,_ut.U2)(this.animateOption,["appear","animation"]))},e}(Jut),Cvt=kvt,Evt=Pct.vs;function Mvt(t,e,n){var r=Evt(t.getMatrix(),[["t",e,n]]);t.setMatrix(r)}function Ovt(t,e){var n=function(t,e){var n=t.attr(),r=n.x,i=n.y;return Evt(t.getMatrix(),[["t",-r,-i],["r",e],["t",r,i]])}(t,e);t.setMatrix(n)}function Avt(t){return t.find((function(t){return"text"===t.get("type")}))}function _vt(t,e,n){void 0===n&&(n=[0,0,0,0]);var r=t&&t.getChildren()[0];if(r){var i=r.clone();(null==e?void 0:e.rotate)&&Ovt(i,-e.rotate);var a=i.getCanvasBBox(),o=a.x,u=a.y,s=a.width,l=a.height;i.destroy();var c=n;return(0,_ut.UM)(c)?c=[2,2,2,2]:(0,_ut.hj)(c)&&(c=new Array(4).fill(c)),{x:o-c[3],y:u-c[0],width:s+c[1]+c[3],height:l+c[0]+c[2],rotation:(null==e?void 0:e.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function Dvt(t,e){var n=t.getBBox();return(0,_ut.G)(e,(function(t){var e=t.getBBox();return function(t,e,n){return void 0===n&&(n=0),Math.max(0,Math.min(t.x+t.width+n,e.x+e.width+n)-Math.max(t.x-n,e.x-n))*Math.max(0,Math.min(t.y+t.height+n,e.y+e.height+n)-Math.max(t.y-n,e.y-n))}(n,e,2)>0}))}function Tvt(t,e,n){var r=n.data,i=n.origin,a=n.animateCfg,o=n.coordinate,u=(0,_ut.U2)(a,"update");t.set("data",r),t.set("origin",i),t.set("animateCfg",a),t.set("coordinate",o),t.set("visible",e.get("visible")),(t.getChildren()||[]).forEach((function(s,l){var c=e.getChildByIndex(l);if(c){s.set("data",r),s.set("origin",i),s.set("animateCfg",a),s.set("coordinate",o);var f=Ndt(s,c);u?ovt(s,u,{toAttrs:f,coordinate:o}):s.attr(f),c.isGroup()&&Tvt(s,c,n)}else t.removeChild(s),s.remove(!0)})),(0,_ut.S6)(e.getChildren(),(function(e,n){n>=t.getCount()&&(e.destroyed||t.add(e))}))}var Fvt=function(){function t(t){this.shapesMap={};var e=t.layout,n=t.container;this.layout=e,this.container=n}return t.prototype.render=function(t,e,n){return void 0===n&&(n=!1),(0,Aut.mG)(this,void 0,void 0,(function(){var r,i,a,o,u,s,l,c,f=this;return(0,Aut.Jh)(this,(function(h){switch(h.label){case 0:if(r={},i=this.createOffscreenGroup(),!t.length)return[3,2];try{for(a=(0,Aut.XA)(t),o=a.next();!o.done;o=a.next())(u=o.value)&&(r[u.id]=this.renderLabel(u,i))}catch(d){l={error:d}}finally{try{o&&!o.done&&(c=a.return)&&c.call(a)}finally{if(l)throw l.error}}return[4,this.doLayout(t,e,r)];case 1:h.sent(),this.renderLabelLine(t,r),this.renderLabelBackground(t,r),this.adjustLabel(t,r),h.label=2;case 2:return s=this.shapesMap,(0,_ut.S6)(r,(function(t,e){if(t.destroyed)delete r[e];else{if(s[e]){var i=t.get("data"),a=t.get("origin"),o=t.get("coordinate"),u=t.get("animateCfg"),l=s[e];Tvt(l,r[e],{data:i,origin:a,animateCfg:u,coordinate:o}),r[e]=l}else{if(f.container.destroyed)return;f.container.add(t);var c=(0,_ut.U2)(t.get("animateCfg"),n?"enter":"appear");c&&ovt(t,c,{toAttrs:(0,Aut.pi)({},t.attr()),coordinate:t.get("coordinate")})}delete s[e]}})),(0,_ut.S6)(s,(function(t){var e=(0,_ut.U2)(t.get("animateCfg"),"leave");e?ovt(t,e,{toAttrs:null,coordinate:t.get("coordinate")}):t.remove(!0)})),this.shapesMap=r,i.destroy(),[2]}}))}))},t.prototype.clear=function(){this.container.clear(),this.shapesMap={}},t.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},t.prototype.renderLabel=function(t,e){var n,r=t.id,i=t.elementId,a=t.data,o=t.mappingData,u=t.coordinate,s=t.animate,l=t.content,c={id:r,elementId:i,capture:t.capture,data:a,origin:(0,Aut.pi)((0,Aut.pi)({},o),{data:o[Uut]}),coordinate:u},f=e.addGroup((0,Aut.pi)({name:"label",animateCfg:!1!==this.animate&&null!==s&&!1!==s&&(0,_ut.b$)({},this.animate,s)},c));if(l.isGroup&&l.isGroup()||l.isShape&&l.isShape()){var h=l.getCanvasBBox(),d=h.width,p=h.height,g=(0,_ut.U2)(t,"textAlign","left"),v=t.x;"center"===g?v-=d/2:"right"!==g&&"end"!==g||(v-=d),Mvt(l,v,t.y-p/2),n=l,f.add(l)}else{var m=(0,_ut.U2)(t,["style","fill"]);n=f.addShape("text",(0,Aut.pi)({attrs:(0,Aut.pi)((0,Aut.pi)({x:t.x,y:t.y,textAlign:t.textAlign,textBaseline:(0,_ut.U2)(t,"textBaseline","middle"),text:t.content},t.style),{fill:(0,_ut.Ft)(m)?t.color:m})},c))}return t.rotate&&Ovt(n,t.rotate),f},t.prototype.doLayout=function(t,e,n){return(0,Aut.mG)(this,void 0,void 0,(function(){var r,i=this;return(0,Aut.Jh)(this,(function(a){switch(a.label){case 0:return this.layout?(r=(0,_ut.kJ)(this.layout)?this.layout:[this.layout],[4,Promise.all(r.map((function(r){var a=function(t){return fvt[t.toLowerCase()]}((0,_ut.U2)(r,"type",""));if(a){var o=[],u=[];return(0,_ut.S6)(n,(function(t,n){o.push(t),u.push(e[t.get("elementId")])})),a(t,o,u,i.region,r.cfg)}})))]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},t.prototype.renderLabelLine=function(t,e){(0,_ut.S6)(t,(function(t){var n=(0,_ut.U2)(t,"coordinate");if(t&&n){var r=n.getCenter(),i=n.getRadius();if(t.labelLine){var a=(0,_ut.U2)(t,"labelLine",{}),o=t.id,u=a.path;if(!u){var s=Bdt(r.x,r.y,i,t.angle);u=[["M",s.x,s.y],["L",t.x,t.y]]}var l=e[o];l.destroyed||l.addShape("path",{capture:!1,attrs:(0,Aut.pi)({path:u,stroke:t.color?t.color:(0,_ut.U2)(t,["style","fill"],"#000"),fill:null},a.style),id:o,origin:t.mappingData,data:t.data,coordinate:t.coordinate})}}}))},t.prototype.renderLabelBackground=function(t,e){(0,_ut.S6)(t,(function(t){var n=(0,_ut.U2)(t,"coordinate"),r=(0,_ut.U2)(t,"background");if(r&&n){var i=t.id,a=e[i];if(!a.destroyed){var o=a.getChildren()[0];if(o){var u=_vt(a,t,r.padding),s=u.rotation,l=(0,Aut._T)(u,["rotation"]),c=a.addShape("rect",{attrs:(0,Aut.pi)((0,Aut.pi)({},l),r.style||{}),id:i,origin:t.mappingData,data:t.data,coordinate:t.coordinate});if(c.setZIndex(-1),s){var f=o.getMatrix();c.setMatrix(f)}}}}}))},t.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},t.prototype.adjustLabel=function(t,e){(0,_ut.S6)(t,(function(t){if(t){var n=t.id,r=e[n];if(!r.destroyed){var i=r.findAll((function(t){return"path"!==t.get("type")}));(0,_ut.S6)(i,(function(e){e&&(t.offsetX&&e.attr("x",e.attr("x")+t.offsetX),t.offsetY&&e.attr("y",e.attr("y")+t.offsetY))}))}}}))},t}(),Ivt=Fvt;function Pvt(t){var e=0;return(0,_ut.S6)(t,(function(t){e+=t})),e/t.length}var jvt=function(){function t(t){this.geometry=t}return t.prototype.getLabelItems=function(t){var e=this,n=[],r=this.getLabelCfgs(t);return(0,_ut.S6)(t,(function(t,i){var a=r[i];if(!a||(0,_ut.UM)(t.x)||(0,_ut.UM)(t.y))n.push(null);else{var o=(0,_ut.kJ)(a.content)?a.content:[a.content];a.content=o;var u=o.length;(0,_ut.S6)(o,(function(r,i){if((0,_ut.UM)(r)||""===r)n.push(null);else{var o=(0,Aut.pi)((0,Aut.pi)({},a),e.getLabelPoint(a,t,i));o.textAlign||(o.textAlign=e.getLabelAlign(o,i,u)),o.offset<=0&&(o.labelLine=null),n.push(o)}}))}})),n},t.prototype.render=function(t,e){return void 0===e&&(e=!1),(0,Aut.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,Aut.Jh)(this,(function(a){switch(a.label){case 0:return n=this.getLabelItems(t),r=this.getLabelsRenderer(),i=this.getGeometryShapes(),[4,r.render(n,i,e)];case 1:return a.sent(),[2]}}))}))},t.prototype.clear=function(){var t=this.labelsRenderer;t&&t.clear()},t.prototype.destroy=function(){var t=this.labelsRenderer;t&&t.destroy(),this.labelsRenderer=null},t.prototype.getCoordinate=function(){return this.geometry.coordinate},t.prototype.getDefaultLabelCfg=function(t,e){var n=this.geometry,r=n.type,i=n.theme;return"polygon"===r||"interval"===r&&"middle"===e||t<0&&!["line","point","path"].includes(r)?(0,_ut.U2)(i,"innerLabels",{}):(0,_ut.U2)(i,"labels",{})},t.prototype.getThemedLabelCfg=function(t){var e=this.geometry,n=this.getDefaultLabelCfg(),r=e.type,i=e.theme;return"polygon"===r||t.offset<0&&!["line","point","path"].includes(r)?(0,_ut.b$)({},n,i.innerLabels,t):(0,_ut.b$)({},n,i.labels,t)},t.prototype.setLabelPosition=function(t,e,n,r){},t.prototype.getLabelOffset=function(t){var e=this.getCoordinate(),n=this.getOffsetVector(t);return e.isTransposed?n[0]:n[1]},t.prototype.getLabelOffsetPoint=function(t,e,n){var r=t.offset,i=this.getCoordinate().isTransposed,a=i?"x":"y",o=i?1:-1,u={x:0,y:0};return u[a]=e>0||1===n?r*o:r*o*-1,u},t.prototype.getLabelPoint=function(t,e,n){var r=this.getCoordinate(),i=t.content.length;function a(e,n,r){void 0===r&&(r=!1);var i=e;return(0,_ut.kJ)(i)&&(i=1===t.content.length?r?Pvt(i):i.length<=2?i[e.length-1]:Pvt(i):i[n]),i}var o={content:t.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},u=(0,_ut.kJ)(e.shape)?e.shape[0]:e.shape,s="funnel"===u||"pyramid"===u;if("polygon"===this.geometry.type){var l=function(t,e){if((0,_ut.hj)(t)&&(0,_ut.hj)(e))return[t,e];if(Pdt(t)||Pdt(e))return[jdt(t),jdt(e)];for(var n,r,i=-1,a=0,o=0,u=t.length-1,s=0;++i<t.length;)n=u,u=i,s+=r=t[n]*e[u]-t[u]*e[n],a+=(t[n]+t[u])*r,o+=(e[n]+e[u])*r;return[a/(s*=3),o/s]}(e.x,e.y);o.x=l[0],o.y=l[1]}else"interval"!==this.geometry.type||s?(o.x=a(e.x,n),o.y=a(e.y,n)):(o.x=a(e.x,n,!0),o.y=a(e.y,n));if(s){var c=(0,_ut.U2)(e,"nextPoints"),f=(0,_ut.U2)(e,"points");if(c){var h=r.convert(f[1]),d=r.convert(c[1]);o.x=(h.x+d.x)/2,o.y=(h.y+d.y)/2}else if("pyramid"===u){h=r.convert(f[1]),d=r.convert(f[2]);o.x=(h.x+d.x)/2,o.y=(h.y+d.y)/2}}t.position&&this.setLabelPosition(o,e,n,t.position);var p=this.getLabelOffsetPoint(t,n,i);return o.start={x:o.x,y:o.y},o.x+=p.x,o.y+=p.y,o.color=e.color,o},t.prototype.getLabelAlign=function(t,e,n){var r="center";if(this.getCoordinate().isTransposed){var i=t.offset;r=i<0?"right":0===i?"center":"left",n>1&&0===e&&("right"===r?r="left":"left"===r&&(r="right"))}return r},t.prototype.getLabelId=function(t){var e=this.geometry,n=e.type,r=e.getXScale(),i=e.getYScale(),a=t[Uut],o=e.getElementId(t);return"line"===n||"area"===n?o+=" ".concat(a[r.field]):"path"===n&&(o+=" ".concat(a[r.field],"-").concat(a[i.field])),o},t.prototype.getLabelsRenderer=function(){var t=this.geometry,e=t.labelsContainer,n=t.labelOption,r=t.canvasRegion,i=t.animateOption,a=this.geometry.coordinate,o=this.labelsRenderer;return o||(o=new Ivt({container:e,layout:(0,_ut.U2)(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=o),o.region=r,o.animate=!!i&&avt("label",a),o},t.prototype.getLabelCfgs=function(t){var e=this,n=this.geometry,r=n.labelOption,i=n.scales,a=n.coordinate,o=r,u=o.fields,s=o.callback,l=o.cfg,c=u.map((function(t){return i[t]})),f=[];return(0,_ut.S6)(t,(function(t,n){var r,i=t[Uut],o=e.getLabelText(i,c);if(s){var h=u.map((function(t){return i[t]}));if(r=s.apply(void 0,(0,Aut.ev)([],(0,Aut.CR)(h),!1)),(0,_ut.UM)(r))return void f.push(null)}var d=(0,Aut.pi)((0,Aut.pi)({id:e.getLabelId(t),elementId:e.geometry.getElementId(t),data:i,mappingData:t,coordinate:a},l),r);(0,_ut.mf)(d.position)&&(d.position=d.position(i,t,n));var p=e.getLabelOffset(d.offset||0),g=e.getDefaultLabelCfg(p,d.position);(d=(0,_ut.b$)({},g,d)).offset=e.getLabelOffset(d.offset||0);var v=d.content;(0,_ut.mf)(v)?d.content=v(i,t,n):(0,_ut.o8)(v)&&(d.content=o[0]),f.push(d)})),f},t.prototype.getLabelText=function(t,e){var n=[];return(0,_ut.S6)(e,(function(e){var r=t[e.field];r=(0,_ut.kJ)(r)?r.map((function(t){return e.getText(t)})):e.getText(r),(0,_ut.UM)(r)||""===r?n.push(null):n.push(r)})),n},t.prototype.getOffsetVector=function(t){void 0===t&&(t=0);var e=this.getCoordinate(),n=0;return(0,_ut.hj)(t)&&(n=t),e.isTransposed?e.applyMatrix(n,0):e.applyMatrix(0,n)},t.prototype.getGeometryShapes=function(){var t=this.geometry,e={};return(0,_ut.S6)(t.elementsMap,(function(t,n){e[n]=t.shape})),(0,_ut.S6)(t.getOffscreenGroup().getChildren(),(function(n){var r=t.getElementId(n.get("origin").mappingData);e[r]=n})),e},t}(),Bvt=jvt;function Lvt(t,e,n){if(!t)return n;var r;if(t.callback&&t.callback.length>1){var i=Array(t.callback.length-1).fill("");r=t.mapping.apply(t,(0,Aut.ev)([e],(0,Aut.CR)(i),!1)).join("")}else r=t.mapping(e).join("");return r||n}var Rvt={hexagon:function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},bowtie:function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},cross:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},tick:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},plus:function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},hyphen:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},line:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]}},Zvt=["line","cross","tick","plus","hyphen"];function Nvt(t){var e=t.symbol;(0,_ut.HD)(e)&&Rvt[e]&&(t.symbol=Rvt[e])}function zvt(t){return t.startsWith(Eut.LEFT)||t.startsWith(Eut.RIGHT)?"vertical":"horizontal"}function Uvt(t,e,n,r,i){var a=n.getScale(n.type);if(a.isCategory){var o=a.field,u=e.getAttribute("color"),s=e.getAttribute("shape"),l=t.getTheme().defaultColor,c=e.coordinate.isPolar;return a.getTicks().map((function(n,f){var h,d=n.text,p=n.value,g=d,v=a.invert(p),m=0===t.filterFieldData(o,[(h={},h[o]=v,h)]).length;(0,_ut.S6)(t.views,(function(t){var e;t.filterFieldData(o,[(e={},e[o]=v,e)]).length||(m=!0)}));var y=Lvt(u,v,l),x=Lvt(s,v,"point"),b=e.getShapeMarker(x,{color:y,isInPolar:c}),w=i;return(0,_ut.mf)(w)&&(w=w(g,f,(0,Aut.pi)({name:g,value:v},(0,_ut.b$)({},r,b)))),function(t,e){var n=t.symbol;if((0,_ut.HD)(n)&&-1!==Zvt.indexOf(n)){var r=(0,_ut.U2)(t,"style",{}),i=(0,_ut.U2)(r,"lineWidth",1),a=r.stroke||r.fill||e;t.style=(0,_ut.b$)({},t.style,{lineWidth:i,stroke:a,fill:null})}}(b=(0,_ut.b$)({},r,b,Udt((0,Aut.pi)({},w),["style"])),y),w&&w.style&&(b.style=function(t,e){return(0,_ut.mf)(e)?e(t):(0,_ut.b$)({},t,e)}(b.style,w.style)),Nvt(b),{id:v,name:g,value:v,marker:b,unchecked:m}}))}return[]}function Hvt(t,e){var n=(0,_ut.U2)(t,["components","legend"],{});return(0,_ut.b$)({},(0,_ut.U2)(n,["common"],{}),(0,_ut.b$)({},(0,_ut.U2)(n,[e],{})))}function Wvt(t){return!t&&(null==t||isNaN(t))}function Vvt(t){if((0,_ut.kJ)(t))return Wvt(t[1].y);var e=t.y;return(0,_ut.kJ)(e)?Wvt(e[0]):Wvt(e)}function Gvt(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!0),!t.length||1===t.length&&!n)return[];if(e){for(var r=[],i=0,a=t.length;i<a;i++){Vvt(s=t[i])||r.push(s)}return[r]}var o=[],u=[];for(i=0,a=t.length;i<a;i++){var s;Vvt(s=t[i])?u.length&&((1!==u.length||n)&&o.push(u),u=[]):u.push(s)}return u.length&&o.push(u),o}function Xvt(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r){var i=0===n?"M":"L";e.push([i,r.x,r.y])}}var a=t[0];return a&&(e.push(["L",a.x,a.y]),e.push(["z"])),e}function Yvt(t){for(var e=t.length/2,n=[],r=[],i=0;i<t.length;i++)i<e?n.push(t[i]):r.push(t[i]);var a=Ept(n,!1),o=Ept(r,!1);r.length&&a.push(["L",r[0].x,r[0].y]),o.shift();var u=a.concat(o);return n.length&&u.push(["L",n[0].x,n[0].y]),u.push(["z"]),u}function qvt(t,e,n,r){void 0===r&&(r="");var i=t.style,a=void 0===i?{}:i,o=t.defaultStyle,u=t.color,s=t.size,l=(0,Aut.pi)((0,Aut.pi)({},o),a);return u&&(e&&(a.stroke||(l.stroke=u)),n&&(a.fill||(l.fill=u))),r&&(0,_ut.UM)(a[r])&&!(0,_ut.UM)(s)&&(l[r]=s),l}function $vt(t){return(0,_ut.b$)({},{fill:"#CCD6EC",fillOpacity:.3},(0,_ut.U2)(t,["background","style"]))}function Jvt(t){var e=t.x;return((0,_ut.kJ)(t.y)?t.y:[t.y]).map((function(t,n){return{x:(0,_ut.kJ)(e)?e[n]:e,y:t}}))}var Kvt={line:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},dot:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},dash:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},smooth:function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},hv:function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},vh:function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},hvh:function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]},vhv:function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}};function Qvt(t,e){var n=t.color;return{symbol:Kvt[e],style:{lineWidth:2,r:6,stroke:n}}}function tmt(t,e,n,r,i){return 1===t.length?[["M",t[0].x,t[0].y-i.lineWidth/2],["L",t[0].x,t[0].y],["L",t[0].x,t[0].y+i.lineWidth/2]]:(n?(e&&t.length&&t.push({x:t[0].x,y:t[0].y}),a=Ept(t,!1,r)):(a=Cpt(t,!1),e&&a.push(["Z"])),a);var a}function emt(t,e,n,r,i,a){if(t.length){var o=t[0];return(0,_ut.kJ)(o.y)?function(t,e,n,r,i,a){var o=[],u=[];(0,_ut.S6)(t,(function(t){var e=Jvt(t);o.push(e[1]),u.push(e[0])}));var s=tmt(o,e,r,i,a),l=tmt(u,e,r,i,a);return n?s:s.concat(l)}(t,e,n,r,i,a):tmt(t,e,r,i,a)}return[]}mvt("line",{defaultShapeType:"line"});(0,_ut.S6)(["line","dot","dash","smooth"],(function(t){yvt("line",t,{draw:function(e,n){var r,i="smooth"===t;if(i){var a=this.coordinate,o=a.start,u=a.end;r=[[o.x,u.y],[u.x,o.y]]}var s=function(t,e,n){for(var r=t.isStack,i=t.connectNulls,a=t.isInCircle,o=t.showSinglePoint,u=qvt(t,!0,!1,"lineWidth"),s=Gvt(t.points,i,o),l=[],c=0,f=s.length;c<f;c++){var h=s[c];l=l.concat(emt(h,a,r,e,n,u))}return u.path=l,u}(e,i,r);return n.addShape({type:"path",attrs:s,name:"line",capture:!i})},getMarker:function(e){return Qvt(e,t)}})}));var nmt={getLegendItems:Uvt,translate:Mvt,rotate:Ovt,zoom:function(t,e){var n=t.getBBox(),r=(n.minX+n.maxX)/2,i=(n.minY+n.maxY)/2;t.applyToMatrix([r,i,1]);var a=Evt(t.getMatrix(),[["t",-r,-i],["s",e,e],["t",r,i]]);t.setMatrix(a)},transform:Evt,getAngle:Zdt,getSectorPath:Ldt,polarToCartesian:Bdt,getDelegationObject:_pt,getTooltipItems:Dgt,getMappingValue:Lvt,getPath:emt,getPathPoints:Gvt},rmt="#000",imt="#262626",amt="#BFBFBF",omt="#F0F0F0",umt="#FFFFFF",smt="#A6A6A6",lmt="#737373",cmt="#404040",fmt="#262626",hmt=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],dmt=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],pmt=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],gmt=function(t){void 0===t&&(t={});var e=t.paletteQualitative10,n=void 0===e?hmt:e,r=t.paletteQualitative20,i=void 0===r?dmt:r,a=t.brandColor,o={backgroundColor:"#141414",brandColor:void 0===a?n[0]:a,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:n,paletteQualitative20:i,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:pmt,fontFamily:'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"',axisLineBorderColor:cmt,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:smt,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:imt,axisTickLineBorderColor:cmt,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:fmt,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:lmt,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:fmt,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:lmt,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:hmt[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:smt,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:lmt,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:lmt,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:smt,legendPageNavigatorTextFontSize:12,sliderRailFillColor:fmt,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:lmt,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:omt,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:amt,annotationArcBorderColor:fmt,annotationArcBorder:1,annotationLineBorderColor:cmt,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:smt,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:umt,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:cmt,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:smt,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:smt,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:rmt,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:smt,overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:rmt,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:cmt,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:hmt[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:rmt,pointBorderOpacity:1,pointActiveBorderColor:umt,pointSelectedBorder:2,pointSelectedBorderColor:umt,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:hmt[0],hollowPointBorderOpacity:.95,hollowPointFillColor:rmt,hollowPointActiveBorder:1,hollowPointActiveBorderColor:umt,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:umt,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:hmt[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:hmt[0],areaFillOpacity:.25,areaActiveFillColor:hmt[0],areaActiveFillOpacity:.5,areaSelectedFillColor:hmt[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:hmt[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:umt,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:umt,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:hmt[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:umt,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:umt,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:hmt[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:rmt,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:umt,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:umt,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,Aut.pi)((0,Aut.pi)({},o),t)}();function vmt(t,e,n,r){var i=t-n,a=e-r;return Math.sqrt(i*i+a*a)}function mmt(t,e,n,r,i,a){return i>=t&&i<=t+n&&a>=e&&a<=e+r}function ymt(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function xmt(t,e){return t[0]===e[0]&&t[1]===e[1]}var bmt=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,wmt=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Smt=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,kmt=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Cmt(t,e){var n=t.match(kmt);(0,_ut.S6)(n,(function(t){var n=t.split(":");e.addColorStop(n[0],n[1])}))}function Emt(t,e,n){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if((0,_ut.HD)(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(t,e,n){var r,i,a=bmt.exec(n),o=parseFloat(a[1])%360*(Math.PI/180),u=a[2],s=e.getBBox();o>=0&&o<.5*Math.PI?(r={x:s.minX,y:s.minY},i={x:s.maxX,y:s.maxY}):.5*Math.PI<=o&&o<Math.PI?(r={x:s.maxX,y:s.minY},i={x:s.minX,y:s.maxY}):Math.PI<=o&&o<1.5*Math.PI?(r={x:s.maxX,y:s.maxY},i={x:s.minX,y:s.minY}):(r={x:s.minX,y:s.maxY},i={x:s.maxX,y:s.minY});var l=Math.tan(o),c=l*l,f=(i.x-r.x+l*(i.y-r.y))/(c+1)+r.x,h=l*(i.x-r.x+l*(i.y-r.y))/(c+1)+r.y,d=t.createLinearGradient(r.x,r.y,f,h);return Cmt(u,d),d}(t,e,n);if("r"===n[0])return function(t,e,n){var r=wmt.exec(n),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),u=r[4];if(0===o){var s=u.match(kmt);return s[s.length-1].split(":")[1]}var l=e.getBBox(),c=l.maxX-l.minX,f=l.maxY-l.minY,h=Math.sqrt(c*c+f*f)/2,d=t.createRadialGradient(l.minX+c*i,l.minY+f*a,0,l.minX+c/2,l.minY+f/2,o*h);return Cmt(u,d),d}(t,e,n);if("p"===n[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var r,i,a=Smt.exec(n),o=a[1],u=a[2];function s(){r=t.createPattern(i,o),e.set("pattern",r),e.set("patternSource",n)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;default:o="no-repeat"}return i=new Image,u.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=u,i.complete?s():(i.onload=s,i.src=i.src),r}(t,e,n)}return n}return n instanceof CanvasPattern?n:void 0}function Mmt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Omt(t,e){return Mmt(t)*Mmt(e)?(t[0]*e[0]+t[1]*e[1])/(Mmt(t)*Mmt(e)):1}function Amt(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Omt(t,e))}function _mt(t,e){var n=e[1],r=e[2],i=(0,_ut.wQ)((0,_ut.c$)(e[3]),2*Math.PI),a=e[4],o=e[5],u=t[0],s=t[1],l=e[6],c=e[7],f=Math.cos(i)*(u-l)/2+Math.sin(i)*(s-c)/2,h=-1*Math.sin(i)*(u-l)/2+Math.cos(i)*(s-c)/2,d=f*f/(n*n)+h*h/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var p=n*n*(h*h)+r*r*(f*f),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*h/r:0,m=n?g*-r*f/n:0,y=(u+l)/2+Math.cos(i)*v-Math.sin(i)*m,x=(s+c)/2+Math.sin(i)*v+Math.cos(i)*m,b=[(f-v)/n,(h-m)/r],w=[(-1*f-v)/n,(-1*h-m)/r],S=Amt([1,0],b),k=Amt(b,w);return Omt(b,w)<=-1&&(k=Math.PI),Omt(b,w)>=1&&(k=0),0===o&&k>0&&(k-=2*Math.PI),1===o&&k<0&&(k+=2*Math.PI),{cx:y,cy:x,rx:xmt(t,[l,c])?0:n,ry:xmt(t,[l,c])?0:r,startAngle:S,endAngle:S+k,xRotation:i,arcFlag:a,sweepFlag:o}}var Dmt=Math.sin,Tmt=Math.cos,Fmt=Math.atan2,Imt=Math.PI;function Pmt(t,e,n,r,i,a,o){var u=e.stroke,s=e.lineWidth,l=Fmt(r-a,n-i),c=new Cyt({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Tmt(Imt/6)+","+10*Dmt(Imt/6)+" L0,0 L"+10*Tmt(Imt/6)+",-"+10*Dmt(Imt/6),stroke:u,lineWidth:s}});c.translate(i,a),c.rotateAtPoint(i,a,l),t.set(o?"startArrowShape":"endArrowShape",c)}function jmt(t,e,n,r,i,a,o){var u=e.startArrow,s=e.endArrow,l=e.stroke,c=e.lineWidth,f=o?u:s,h=f.d,d=f.fill,p=f.stroke,g=f.lineWidth,v=(0,Aut._T)(f,["d","fill","stroke","lineWidth"]),m=Fmt(r-a,n-i);h&&(i-=Tmt(m)*h,a-=Dmt(m)*h);var y=new Cyt({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:(0,Aut.pi)((0,Aut.pi)({},v),{stroke:p||l,lineWidth:g||c,fill:d})});y.translate(i,a),y.rotateAtPoint(i,a,m),t.set(o?"startArrowShape":"endArrowShape",y)}function Bmt(t,e,n,r,i){var a=Fmt(r-e,n-t);return{dx:Tmt(a)*i,dy:Dmt(a)*i}}function Lmt(t,e,n,r,i,a){"object"==typeof e.startArrow?jmt(t,e,n,r,i,a,!0):e.startArrow?Pmt(t,e,n,r,i,a,!0):t.set("startArrowShape",null)}function Rmt(t,e,n,r,i,a){"object"==typeof e.endArrow?jmt(t,e,n,r,i,a,!1):e.endArrow?Pmt(t,e,n,r,i,a,!1):t.set("startArrowShape",null)}var Zmt={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Nmt(t,e){var n=e.attr();for(var r in n){var i=n[r],a=Zmt[r]?Zmt[r]:r;"matrix"===a&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===a&&t.setLineDash?(0,_ut.kJ)(i)&&t.setLineDash(i):("strokeStyle"===a||"fillStyle"===a?i=Emt(t,e,i):"globalAlpha"===a&&(i*=t.globalAlpha),t[a]=i)}}function zmt(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(t,n):i.skipDraw()}}function Umt(t,e,n){var r=t.get("refreshElements");(0,_ut.S6)(r,(function(e){if(e!==t)for(var n=e.cfg.parent;n&&n!==t&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===t?Vmt(e,n):Hmt(e,n)}function Hmt(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&Vmt(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Hmt(r.cfg.children,e);else{var i=Gmt(r,e);r.cfg.refresh=i,i&&r.isGroup()&&Hmt(r.cfg.children,e)}}}function Wmt(t){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&Wmt(n.cfg.children)}}function Vmt(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.refresh=!0,r.isGroup()&&Vmt(r.get("children"),e)}}function Gmt(t,e){var n=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&n&&ymt(n,e)}function Xmt(t,e,n,r){var i=n.path,a=n.startArrow,o=n.endArrow;if(i){var u=[0,0],s=[0,0],l={dx:0,dy:0};e.beginPath();for(var c=0;c<i.length;c++){var f=i[c],h=f[0];if(0===c&&a&&a.d)l=Bmt((d=t.getStartTangent())[0][0],d[0][1],d[1][0],d[1][1],a.d);else if(c===i.length-2&&"Z"===i[c+1][0]&&o&&o.d){if("Z"===i[c+1][0])l=Bmt((d=t.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d)}else if(c===i.length-1&&o&&o.d){var d;if("Z"!==i[0])l=Bmt((d=t.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d)}var p=l.dx,g=l.dy;switch(h){case"M":e.moveTo(f[1]-p,f[2]-g),s=[f[1],f[2]];break;case"L":e.lineTo(f[1]-p,f[2]-g);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-p,f[4]-g);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-p,f[6]-g);break;case"A":var v=void 0;r?(v=r[c])||(v=_mt(u,f),r[c]=v):v=_mt(u,f);var m=v.cx,y=v.cy,x=v.rx,b=v.ry,w=v.startAngle,S=v.endAngle,k=v.xRotation,C=v.sweepFlag;if(e.ellipse)e.ellipse(m,y,x,b,k,w,S,1-C);else{var E=x>b?x:b,M=x>b?1:x/b,O=x>b?b/x:1;e.translate(m,y),e.rotate(k),e.scale(M,O),e.arc(0,0,E,w,S,1-C),e.scale(1/M,1/O),e.rotate(-k),e.translate(-m,-y)}break;case"Z":e.closePath()}if("Z"===h)u=s;else{var A=f.length;u=[f[A-2],f[A-1]]}}}}function Ymt(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw())))}function qmt(t){var e,n,r;if(t.destroyed)e=t._cacheCanvasBBox;else{var i=t.get("cacheCanvasBBox"),a=i&&!(!i.width||!i.height),o=t.getCanvasBBox(),u=o&&!(!o.width||!o.height);a&&u?(r=o,e=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):a?e=i:u&&(e=o)}return e}var $mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.onCanvasChange=function(t){Ymt(this,t)},e.prototype.getShapeBase=function(){return A},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),Nmt(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],n=[];(0,_ut.S6)(t,(function(t){var r=t.cfg.cacheCanvasBBox;r&&t.cfg.isInView&&(e.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(e.length){var i=(0,_ut.VV)(e),a=(0,_ut.Fp)(e),o=(0,_ut.VV)(n),u=(0,_ut.Fp)(n);r={minX:i,minY:o,x:i,y:o,maxX:a,maxY:u,width:a-i,height:u-o};var s=this.cfg.canvas;if(s){var l=s.getViewRange();this.set("isInView",ymt(r,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},e.prototype.draw=function(t,e){var n=this.cfg.children,r=!e||this.cfg.refresh;n.length&&r&&(t.save(),Nmt(t,this),this._applyClip(t,this.getClip()),zmt(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Kut.AbstractGroup),Jmt=$mt,Kmt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return A},e.prototype.getGroupBase=function(){return Jmt},e.prototype.onCanvasChange=function(t){Ymt(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=(0,Kut.getBBoxMethod)(t)(this),r=e/2,i=n.x-r,a=n.y-r,o=n.x+n.width+r,u=n.y+n.height+r;return{x:i,minX:i,y:a,minY:a,width:n.width+e,height:n.height+e,maxX:o,maxY:u}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),Nmt(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!ymt(e,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),Nmt(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),n=ymt(e,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,a=e.fillOpacity;this.isFill()&&((0,_ut.UM)(a)||1===a?this.fill(t):(t.globalAlpha=a,this.fill(t),t.globalAlpha=r)),this.isStroke()&&n>0&&((0,_ut.UM)(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Kut.AbstractShape),Qmt=Kmt,tyt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var a=this.attr(),o=a.x,u=a.y,s=a.r,l=i/2,c=vmt(o,u,t,e);return r&&n?c<=s+l:r?c<=s:!!n&&(c>=s-l&&c<=s+l)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()},e}(Qmt),eyt=tyt;function nyt(t,e,n,r){return t/(n*n)+e/(r*r)}var ryt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var a=this.attr(),o=i/2,u=a.x,s=a.y,l=a.rx,c=a.ry,f=(t-u)*(t-u),h=(e-s)*(e-s);return r&&n?nyt(f,h,l+o,c+o)<=1:r?nyt(f,h,l,c)<=1:!!n&&(nyt(f,h,l-o,c-o)>=1&&nyt(f,h,l+o,c+o)<=1)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.rx,a=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,r,i,a,0,0,2*Math.PI,!1);else{var o=i>a?i:a,u=i>a?1:i/a,s=i>a?a/i:1;t.save(),t.translate(n,r),t.scale(u,s),t.arc(0,0,o,0,2*Math.PI),t.restore(),t.closePath()}},e}(Qmt),iyt=ryt;function ayt(t){return t instanceof HTMLElement&&(0,_ut.HD)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var oyt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,n=this.attrs;if((0,_ut.HD)(t)){var r=new Image;r.onload=function(){if(e.destroyed)return!1;e.attr("img",r),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},r.crossOrigin="Anonymous",r.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):ayt(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),n=e.x,r=e.y,i=e.width,a=e.height,o=e.sx,u=e.sy,s=e.swidth,l=e.sheight,c=e.img;(c instanceof Image||ayt(c))&&((0,_ut.UM)(o)||(0,_ut.UM)(u)||(0,_ut.UM)(s)||(0,_ut.UM)(l)?t.drawImage(c,n,r,i,a):t.drawImage(c,o,u,s,l,n,r,i,a))},e}(Qmt),uyt=oyt,syt=n(58609);function lyt(t,e,n,r,i,a,o){var u=Math.min(t,n),s=Math.max(t,n),l=Math.min(e,r),c=Math.max(e,r),f=i/2;return a>=u-f&&a<=s+f&&o>=l-f&&o<=c+f&&syt.x1.pointToLine(t,e,n,r,a,o)<=i/2}var cyt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,a=t.startArrow,o=t.endArrow;a&&Lmt(this,t,r,i,e,n),o&&Rmt(this,t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){if(!n||!i)return!1;var a=this.attr();return lyt(a.x1,a.y1,a.x2,a.y2,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,a=e.y2,o=e.startArrow,u=e.endArrow,s={dx:0,dy:0},l={dx:0,dy:0};o&&o.d&&(s=Bmt(n,r,i,a,e.startArrow.d)),u&&u.d&&(l=Bmt(n,r,i,a,e.endArrow.d)),t.beginPath(),t.moveTo(n+s.dx,r+s.dy),t.lineTo(i-l.dx,a-l.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return syt.x1.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,a=e.y2;return syt.x1.pointAt(n,r,i,a,t)},e}(Qmt),fyt=cyt,hyt={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},dyt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,_ut.UM)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,n,r=this.attr(),i=r.x,a=r.y,o=r.symbol||"circle",u=this._getR(r);if((0,_ut.mf)(o))n=(t=o)(i,a,u),n=(0,fdt.wb)(n);else{if(!(t=e.Symbols[o]))return console.warn(o+" marker is not supported."),null;n=t(i,a,u)}return n},e.prototype.createPath=function(t){Xmt(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=hyt,e}(Qmt),pyt=dyt;function gyt(t,e,n){var r=(0,Kut.getOffScreenContext)();return t.createPath(r),r.isPointInPath(e,n)}function vyt(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function myt(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function yyt(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],u=t[(a+1)%i];if(myt(o,u,[e,n]))return!0;vyt(o[1]-n)>0!=vyt(u[1]-n)>0&&vyt(e-(n-o[1])*(o[0]-u[0])/(o[1]-u[1])-o[0])<0&&(r=!r)}return r}function xyt(t,e,n,r,i,a,o,u){var s=(Math.atan2(u-e,o-t)+2*Math.PI)%(2*Math.PI);if(s<r||s>i)return!1;var l={x:t+n*Math.cos(s),y:e+n*Math.sin(s)};return vmt(l.x,l.y,o,u)<=a/2}var byt=Pct.vs;var wyt=(0,Aut.pi)({hasArc:function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,n=[],r=[],i=[],a=0;a<e;a++){var o=t[a],u=o[0];"M"===u?(i.length&&(r.push(i),i=[]),i.push([o[1],o[2]])):"Z"===u?i.length&&(n.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(t,e,n,r,i){for(var a=!1,o=e/2,u=0;u<t.length;u++){var s=t[u],l=s.currentPoint,c=s.params,f=s.prePoint,h=s.box;if(!h||mmt(h.x-o,h.y-o,h.width+e,h.height+e,n,r)){switch(s.command){case"L":case"Z":a=lyt(f[0],f[1],l[0],l[1],e,n,r);break;case"Q":a=syt.lD.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],n,r)<=e/2;break;case"C":a=syt.Ll.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],n,r,i)<=e/2;break;case"A":var d=s.arcParams,p=d.cx,g=d.cy,v=d.rx,m=d.ry,y=d.startAngle,x=d.endAngle,b=d.xRotation,w=[n,r,1],S=v>m?v:m;Fct(w,w,byt(null,[["t",-p,-g],["r",-b],["s",1/(v>m?1:v/m),1/(v>m?m/v:1)]])),a=xyt(0,0,S,y,x,e,w[0],w[1])}if(a)break}}return a}},Kut.PathUtil);function Syt(t,e,n){for(var r=!1,i=0;i<t.length;i++){if(r=yyt(t[i],e,n))break}return r}var kyt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=(0,fdt.wb)(t);var e=wyt.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,fdt.zx)(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t,e=this.attr(),n=e.startArrow,r=e.endArrow;n&&Lmt(this,e,(t=this.getStartTangent())[0][0],t[0][1],t[1][0],t[1][1]);r&&Rmt(this,e,(t=this.getEndTangent())[0][0],t[0][1],t[1][0],t[1][1])},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var a=this.getSegments(),o=this.get("hasArc"),u=!1;if(n){var s=this.getTotalLength();u=wyt.isPointInStroke(a,i,t,e,s)}if(!u&&r)if(o)u=gyt(this,t,e);else{var l=this.attr("path"),c=wyt.extractPolygons(l);u=Syt(c.polygons,t,e)||Syt(c.polylines,t,e)}return u},e.prototype.createPath=function(t){Xmt(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,_ut.UM)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;(0,_ut.S6)(r,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}));var a=i[n];if((0,_ut.UM)(a)||(0,_ut.UM)(n))return null;var o=a.length,u=i[n+1];return syt.Ll.pointAt(a[o-2],a[o-1],u[1],u[2],u[3],u[4],u[5],u[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",wyt.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,n,r,i=0,a=0,o=[],u=this.get("curve");u&&((0,_ut.S6)(u,(function(t,e){n=u[e+1],r=t.length,n&&(i+=syt.Ll.length(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?((0,_ut.S6)(u,(function(s,l){n=u[l+1],r=s.length,n&&((t=[])[0]=a/i,e=syt.Ll.length(s[r-2],s[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),a+=e||0,t[1]=a/i,o.push(t))})),this.set("tCache",o)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var r=e[n-2].currentPoint,i=e[n-1].currentPoint,a=e[n-1].endTangent;t=[],a?(t.push([i[0]-a[0],i[1]-a[1]]),t.push([i[0],i[1]])):(t.push([r[0],r[1]]),t.push([i[0],i[1]]))}return t},e}(Qmt),Cyt=kyt;function Eyt(t,e,n,r,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){if(lyt(t[o][0],t[o][1],t[o+1][0],t[o+1][1],e,n,r))return!0}if(i){var u=t[0],s=t[a-1];if(lyt(u[0],u[1],s[0],s[1],e,n,r))return!0}return!1}var Myt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var a=this.attr().points,o=!1;return n&&(o=Eyt(a,i,t,e,!0)),!o&&r&&(o=yyt(a,t,e)),o},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];0===n?t.moveTo(r[0],r[1]):t.lineTo(r[0],r[1])}t.closePath()}},e}(Qmt),Oyt=Myt,Ayt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=e.endArrow,a=n.length,o=n[0][0],u=n[0][1],s=n[a-1][0],l=n[a-1][1];r&&Lmt(this,t,n[1][0],n[1][1],o,u),i&&Rmt(this,t,n[a-2][0],n[a-2][1],s,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!(!n||!i)&&Eyt(this.attr().points,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=e.endArrow,a=n.length;if(!(n.length<2)){var o,u=n[0][0],s=n[0][1],l=n[a-1][0],c=n[a-1][1];if(r&&r.d)u+=(o=Bmt(u,s,n[1][0],n[1][1],r.d)).dx,s+=o.dy;if(i&&i.d)l-=(o=Bmt(n[a-2][0],n[a-2][1],l,c,i.d)).dx,c-=o.dy;t.beginPath(),t.moveTo(u,s);for(var f=0;f<a-1;f++){var h=n[f];t.lineTo(h[0],h[1])}t.lineTo(l,c)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,_ut.UM)(e)?(this.set("totalLength",syt.aH.length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,_ut.S6)(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),syt.x1.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,a=[];(0,_ut.S6)(t,(function(o,u){t[u+1]&&((n=[])[0]=i/e,r=syt.x1.length(o[0],o[1],t[u+1][0],t[u+1][1]),i+=r,n[1]=i/e,a.push(n))})),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(Qmt),_yt=Ayt;var Dyt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var a=this.attr(),o=a.x,u=a.y,s=a.width,l=a.height,c=a.radius;if(c){var f=!1;return n&&(f=function(t,e,n,r,i,a,o,u){return lyt(t+i,e,t+n-i,e,a,o,u)||lyt(t+n,e+i,t+n,e+r-i,a,o,u)||lyt(t+n-i,e+r,t+i,e+r,a,o,u)||lyt(t,e+r-i,t,e+i,a,o,u)||xyt(t+n-i,e+i,i,1.5*Math.PI,2*Math.PI,a,o,u)||xyt(t+n-i,e+r-i,i,0,.5*Math.PI,a,o,u)||xyt(t+i,e+r-i,i,.5*Math.PI,Math.PI,a,o,u)||xyt(t+i,e+i,i,Math.PI,1.5*Math.PI,a,o,u)}(o,u,s,l,c,i,t,e)),!f&&r&&(f=gyt(this,t,e)),f}var h=i/2;return r&&n?mmt(o-h,u-h,s+h,l+h,t,e):r?mmt(o,u,s,l,t,e):n?function(t,e,n,r,i,a,o){var u=i/2;return mmt(t-u,e-u,n,i,a,o)||mmt(t+n-u,e-u,i,r,a,o)||mmt(t+u,e+r-u,n,i,a,o)||mmt(t-u,e+u,i,r,a,o)}(o,u,s,l,i,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.width,a=e.height,o=e.radius;if(t.beginPath(),0===o)t.rect(n,r,i,a);else{var u=function(t){var e=0,n=0,r=0,i=0;return(0,_ut.kJ)(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,[e,n,r,i]}(o),s=u[0],l=u[1],c=u[2],f=u[3];t.moveTo(n+s,r),t.lineTo(n+i-l,r),0!==l&&t.arc(n+i-l,r+l,l,-Math.PI/2,0),t.lineTo(n+i,r+a-c),0!==c&&t.arc(n+i-c,r+a-c,c,0,Math.PI/2),t.lineTo(n+f,r+a),0!==f&&t.arc(n+f,r+a-f,f,Math.PI/2,Math.PI),t.lineTo(n,r+s),0!==s&&t.arc(n+s,r+s,s,Math.PI,1.5*Math.PI),t.closePath()}},e}(Qmt),Tyt=Dyt,Fyt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,Kut.assembleFont)(t)},e.prototype._setText=function(t){var e=null;(0,_ut.HD)(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,n){var r,i=this.attrs,a=i.textBaseline,o=i.x,u=i.y,s=1*i.fontSize,l=this._getSpaceingY(),c=(0,Kut.getTextHeight)(i.text,i.fontSize,i.lineHeight);(0,_ut.S6)(e,(function(e,i){r=u+i*(l+s)-c+s,"middle"===a&&(r+=c-s-(c-s)/2),"top"===a&&(r+=c-s),(0,_ut.UM)(e)||(n?t.fillText(e,o,r):t.strokeText(e,o,r))}))},e.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,a=this.get("textArr");if(a)this._drawTextArr(t,a,e);else{var o=n.text;(0,_ut.UM)(o)||(e?t.fillText(o,r,i):t.strokeText(o,r,i))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,a=e.fillOpacity;this.isStroke()&&n>0&&((0,_ut.UM)(i)||1===i||(t.globalAlpha=r),this.stroke(t)),this.isFill()&&((0,_ut.UM)(a)||1===a?this.fill(t):(t.globalAlpha=a,this.fill(t),t.globalAlpha=r)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(Qmt),Iyt=Fyt;function Pyt(t,e,n){var r=t.getTotalMatrix();if(r){var i=function(t,e){if(e){var n=(0,Kut.invert)(e);return(0,Kut.multiplyVec2)(n,t)}return t}([e,n,1],r);return[i[0],i[1]]}return[e,n]}function jyt(t,e,n){if(t.isCanvas&&t.isCanvas())return!0;if(!(0,Kut.isAllowCapture)(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var r=Pyt(t,e,n),i=r[0],a=r[1];if(t.isClipped(i,a))return!1}var o=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&n>=o.minY&&n<=o.maxY}function Byt(t,e,n){if(!jyt(t,e,n))return null;for(var r=null,i=t.getChildren(),a=i.length-1;a>=0;a--){var o=i[a];if(o.isGroup())r=Byt(o,e,n);else if(jyt(o,e,n)){var u=o,s=Pyt(o,e,n),l=s[0],c=s[1];u.isInShape(l,c)&&(r=o)}if(r)break}return r}var Lyt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return A},e.prototype.getGroupBase=function(){return Jmt},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var r=this.get("context"),i=this.get("el"),a=this.getPixelRatio();i.width=a*e,i.height=a*n,a>1&&r.scale(a,a)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(e,n){return this.get("quickHit")?Byt(this,e,n):t.prototype.getShape.call(this,e,n,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),n=this.getViewRange();e.length&&e[0]===this?t=n:(t=function(t){if(!t.length)return null;var e=[],n=[],r=[],i=[];return(0,_ut.S6)(t,(function(t){var a=qmt(t);a&&(e.push(a.minX),n.push(a.minY),r.push(a.maxX),i.push(a.maxY))})),{minX:(0,_ut.VV)(e),minY:(0,_ut.VV)(n),maxX:(0,_ut.Fp)(r),maxY:(0,_ut.Fp)(i)}}(e),t&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=function(t,e){return t&&e&&ymt(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}(t,n))));return t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,_ut.VS)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),Nmt(t,this),zmt(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(t.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.save(),t.beginPath(),t.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.clip(),Nmt(t,this),Umt(this,n,r),zmt(t,n,r),t.restore()):e.length&&Wmt(e),(0,_ut.S6)(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=(0,_ut.U7)((function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)})),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Kut.AbstractCanvas),Ryt=Lyt,Zyt="0.5.12",Nyt={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},zyt={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Uyt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Hyt(t){var e=Nyt[t.type],n=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var r=Uyt(e);if(t.get("id")&&(r.id=t.get("id")),t.set("el",r),t.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function Wyt(t,e){var n=t.get("el"),r=(0,_ut.qo)(n.children).sort(e),i=document.createDocumentFragment();r.forEach((function(t){i.appendChild(t)})),n.appendChild(i)}function Vyt(t){var e=t.attr().matrix;if(e){for(var n=t.cfg.el,r=[],i=0;i<9;i+=3)r.push(e[i]+","+e[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Gyt(t,e){var n=t.getClip(),r=t.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){Hyt(n),n.createPath(e);var i=e.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function Xyt(t,e){e.forEach((function(e){e.draw(t)}))}function Yyt(t,e){var n=t.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=t.getParent(),a=i?i.getChildren():[n],o=t.get("el");if("remove"===e)if(t.get("isClipShape")){var u=o&&o.parentNode,s=u&&u.parentNode;u&&s&&s.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o);else if("show"===e)o.setAttribute("visibility","visible");else if("hide"===e)o.setAttribute("visibility","hidden");else if("zIndex"===e)!function(t,e){var n=t.parentNode,r=Array.from(n.childNodes).filter((function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()})),i=r[e],a=r.indexOf(t);if(i){if(a>e)n.insertBefore(t,i);else if(a<e){var o=r[e+1];o?n.insertBefore(t,o):n.appendChild(t)}}else n.appendChild(t)}(o,a.indexOf(t));else if("sort"===e){var l=t.get("children");l&&l.length&&Wyt(t,(function(t,e){return l.indexOf(t)-l.indexOf(e)?1:0}))}else"clear"===e?o&&(o.innerHTML=""):"matrix"===e?Vyt(t):"clip"===e?Gyt(t,r):"attr"===e||"add"===e&&t.draw(r)}}var qyt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Uyt("g");this.set("el",t);var e=this.getParent();if(e){var n=e.get("el");n||(n=e.createDom(),e.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,e)}},e.prototype.onCanvasChange=function(t){Yyt(this,t)},e.prototype.getShapeBase=function(){return D},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var e=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Gyt(this,t),this.createPath(t),e.length&&Xyt(t,e))},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,_ut.S6)(e||n,(function(t,e){zyt[e]&&r.setAttribute(zyt[e],t)})),Vyt(this)},e}(Kut.AbstractGroup),$yt=qyt,Jyt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,e)}},e.prototype.getShapeBase=function(){return D},e.prototype.getGroupBase=function(){return $yt},e.prototype.onCanvasChange=function(t){Yyt(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var n=(0,Kut.getBBoxMethod)(this.get("type"));n&&(e=n(this))}if(e){var r=e.x,i=e.y,a=e.width,o=e.height,u=this.getHitLineWidth(),s=u/2,l=r-s,c=i-s;return{x:l,y:c,minX:l,minY:c,maxX:r+a+s,maxY:i+o+s,width:a+u,height:o+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),e=t.fill,n=t.fillStyle;return(e||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,n=t.strokeStyle;return(e||n)&&this.canStroke},e.prototype.draw=function(t,e){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Hyt(this),Gyt(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},e.prototype.createPath=function(t,e){},e.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),r=n.fill,i=n.fillStyle,a=n.stroke,o=n.strokeStyle,u=n.fillOpacity,s=n.strokeOpacity,l=n.lineWidth,c=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",r):"fillStyle"in n&&this._setColor(t,"fill",i):this._setColor(t,"fill",r||i),u&&c.setAttribute(zyt.fillOpacity,u)),this.canStroke&&l>0&&(e?"stroke"in n?this._setColor(t,"stroke",a):"strokeStyle"in n&&this._setColor(t,"stroke",o):this._setColor(t,"stroke",a||o),s&&c.setAttribute(zyt.strokeOpacity,s),l&&c.setAttribute(zyt.lineWidth,l))},e.prototype._setColor=function(t,e,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=t.find("gradient",n))||(i=t.addGradient(n)),r.setAttribute(zyt[e],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=t.find("pattern",n))||(i=t.addPattern(n)),r.setAttribute(zyt[e],"url(#"+i+")")}else r.setAttribute(zyt[e],n);else r.setAttribute(zyt[e],"none")},e.prototype.shadow=function(t,e){var n=this.attr(),r=e||n,i=r.shadowOffsetX,a=r.shadowOffsetY,o=r.shadowBlur,u=r.shadowColor;(i||a||o||u)&&function(t,e){var n=t.cfg.el,r=t.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var a=e.find("filter",i);a||(a=e.addShadow(i)),n.setAttribute("filter","url(#"+a+")")}else n.removeAttribute("filter")}(this,t)},e.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&Vyt(this)},e.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},e.prototype.isPointInPath=function(t,e){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=t+r.left,a=e+r.top,o=document.elementFromPoint(i,a);return!(!o||!o.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?e+n:0},e}(Kut.AbstractShape),Kyt=Jyt,Qyt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x:0,y:0,r:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,_ut.S6)(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):zyt[e]&&r.setAttribute(zyt[e],t)}))},e}(Kyt),txt=Qyt,ext=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return(0,Aut.ZT)(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");if((0,_ut.S6)(e||n,(function(t,e){zyt[e]&&r.setAttribute(zyt[e],t)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var a=r.childNodes,o=a.length-1;o>=0;o--)r.removeChild(a[o]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},e}(Kyt),nxt=ext,rxt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,_ut.S6)(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):zyt[e]&&r.setAttribute(zyt[e],t)}))},e}(Kyt),ixt=rxt,axt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");(0,_ut.S6)(e||r,(function(t,e){"img"===e?n._setImage(r.img):zyt[e]&&i.setAttribute(zyt[e],t)}))},e.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},e.prototype._setImage=function(t){var e=this.attr(),n=this.get("el");if((0,_ut.HD)(t))n.setAttribute("href",t);else if(t instanceof window.Image)e.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,_ut.HD)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+t.width),r.setAttribute("height",""+t.height),r.getContext("2d").putImageData(t,0,0),e.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",r.toDataURL())}},e}(Kyt),oxt=axt,uxt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,_ut.S6)(e||n,(function(e,i){if("startArrow"===i||"endArrow"===i)if(e){var a=(0,_ut.Kn)(e)?t.addArrow(n,zyt[i]):t.getDefaultArrow(n,zyt[i]);r.setAttribute(zyt[i],"url(#"+a+")")}else r.removeAttribute(zyt[i]);else zyt[i]&&r.setAttribute(zyt[i],e)}))},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return syt.x1.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,a=e.y2;return syt.x1.pointAt(n,r,i,a,t)},e}(Kyt),sxt=uxt,lxt={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},cxt={get:function(t){return lxt[t]},register:function(t,e){lxt[t]=e},remove:function(t){delete lxt[t]},getAll:function(){return lxt}},fxt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return(0,Aut.ZT)(e,t),e.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,_ut.kJ)(t)?t.map((function(t){return t.join(" ")})).join(""):t},e.prototype._getPath=function(){var t,e=this.attr(),n=e.x,r=e.y,i=e.r||e.radius,a=e.symbol||"circle";return(t=(0,_ut.mf)(a)?a:cxt.get(a))?t(n,r,i):(console.warn(t+" symbol is not exist."),null)},e.symbolsFactory=cxt,e}(Kyt),hxt=fxt,dxt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");(0,_ut.S6)(e||r,(function(e,a){if("path"===a&&(0,_ut.kJ)(e))i.setAttribute("d",n._formatPath(e));else if("startArrow"===a||"endArrow"===a)if(e){var o=(0,_ut.Kn)(e)?t.addArrow(r,zyt[a]):t.getDefaultArrow(r,zyt[a]);i.setAttribute(zyt[a],"url(#"+o+")")}else i.removeAttribute(zyt[a]);else zyt[a]&&i.setAttribute(zyt[a],e)}))},e.prototype._formatPath=function(t){var e=t.map((function(t){return t.join(" ")})).join("");return~e.indexOf("NaN")?"":e},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=e?e.getPointAtLength(t*n):null;return r?{x:r.x,y:r.y}:null},e}(Kyt),pxt=dxt,gxt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return(0,Aut.ZT)(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,_ut.S6)(e||n,(function(t,e){"points"===e&&(0,_ut.kJ)(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):zyt[e]&&r.setAttribute(zyt[e],t)}))},e}(Kyt),vxt=gxt,mxt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,_ut.S6)(e||n,(function(t,e){"points"===e&&(0,_ut.kJ)(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):zyt[e]&&r.setAttribute(zyt[e],t)}))},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,_ut.UM)(e)?(this.set("totalLength",syt.aH.length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,_ut.S6)(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),syt.x1.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,a=[];(0,_ut.S6)(t,(function(o,u){t[u+1]&&((n=[])[0]=i/e,r=syt.x1.length(o[0],o[1],t[u+1][0],t[u+1][1]),i+=r,n[1]=i/e,a.push(n))})),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(Kyt),yxt=mxt;var xxt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el"),a=!1,o=["x","y","width","height","radius"];(0,_ut.S6)(e||r,(function(t,e){-1===o.indexOf(e)||a?-1===o.indexOf(e)&&zyt[e]&&i.setAttribute(zyt[e],t):(i.setAttribute("d",n._assembleRect(r)),a=!0)}))},e.prototype._assembleRect=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,a=t.radius;if(!a)return"M "+e+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var o=function(t){var e=0,n=0,r=0,i=0;return(0,_ut.kJ)(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}}(a);return(0,_ut.kJ)(a)?1===a.length?o.r1=o.r2=o.r3=o.r4=a[0]:2===a.length?(o.r1=o.r3=a[0],o.r2=o.r4=a[1]):3===a.length?(o.r1=a[0],o.r2=o.r4=a[1],o.r3=a[2]):(o.r1=a[0],o.r2=a[1],o.r3=a[2],o.r4=a[3]):o.r1=o.r2=o.r3=o.r4=a,[["M "+(e+o.r1)+","+n],["l "+(r-o.r1-o.r2)+",0"],["a "+o.r2+","+o.r2+",0,0,1,"+o.r2+","+o.r2],["l 0,"+(i-o.r2-o.r3)],["a "+o.r3+","+o.r3+",0,0,1,"+-o.r3+","+o.r3],["l "+(o.r3+o.r4-r)+",0"],["a "+o.r4+","+o.r4+",0,0,1,"+-o.r4+","+-o.r4],["l 0,"+(o.r4+o.r1-i)],["a "+o.r1+","+o.r1+",0,0,1,"+o.r1+","+-o.r1],["z"]].join(" ")},e}(Kyt),bxt=xxt,wxt=n(23537),Sxt={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},kxt={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},Cxt={left:"left",start:"left",center:"middle",right:"end",end:"end"},Ext=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,Aut.pi)((0,Aut.pi)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");this._setFont(),(0,_ut.S6)(e||r,(function(t,e){"text"===e?n._setText(""+t):"matrix"===e&&t?Vyt(n):zyt[e]&&i.setAttribute(zyt[e],t)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),n=e.textBaseline,r=e.textAlign,i=(0,wxt.qY)();i&&"firefox"===i.name?t.setAttribute("dominant-baseline",kxt[n]||"alphabetic"):t.setAttribute("alignment-baseline",Sxt[n]||"baseline"),t.setAttribute("text-anchor",Cxt[r]||"left")},e.prototype._setText=function(t){var e=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,a=void 0===i?"bottom":i;if(t)if(~t.indexOf("\n")){var o=t.split("\n"),u=o.length-1,s="";(0,_ut.S6)(o,(function(t,e){0===e?"alphabetic"===a?s+='<tspan x="'+r+'" dy="'+-u+'em">'+t+"</tspan>":"top"===a?s+='<tspan x="'+r+'" dy="0.9em">'+t+"</tspan>":"middle"===a?s+='<tspan x="'+r+'" dy="'+-(u-1)/2+'em">'+t+"</tspan>":"bottom"===a?s+='<tspan x="'+r+'" dy="-'+(u+.3)+'em">'+t+"</tspan>":"hanging"===a&&(s+='<tspan x="'+r+'" dy="'+(-(u-1)-.3)+'em">'+t+"</tspan>"):s+='<tspan x="'+r+'" dy="1em">'+t+"</tspan>"})),e.innerHTML=s}else e.innerHTML=t;else e.innerHTML=""},e}(Kyt),Mxt=Ext,Oxt=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Axt=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,_xt=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Dxt(t){var e=t.match(_xt);if(!e)return"";var n="";return e.sort((function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])})),(0,_ut.S6)(e,(function(t){t=t.split(":"),n+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'})),n}var Txt=function(){function t(t){this.cfg={};var e=null,n=(0,_ut.EL)("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var n,r,i=Oxt.exec(t),a=(0,_ut.wQ)((0,_ut.c$)(parseFloat(i[1])),2*Math.PI),o=i[2];a>=0&&a<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=a&&a<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=a&&a<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var u=Math.tan(a),s=u*u,l=(r.x-n.x+u*(r.y-n.y))/(s+1)+n.x,c=u*(r.x-n.x+u*(r.y-n.y))/(s+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",l),e.setAttribute("y2",c),e.innerHTML=Dxt(o)}(t,e=Uyt("linearGradient")):function(t,e){var n=Axt.exec(t),r=parseFloat(n[1]),i=parseFloat(n[2]),a=parseFloat(n[3]),o=n[4];e.setAttribute("cx",r),e.setAttribute("cy",i),e.setAttribute("r",a),e.innerHTML=Dxt(o)}(t,e=Uyt("radialGradient")),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),Fxt=Txt,Ixt={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Pxt={x:"-40%",y:"-40%",width:"200%",height:"200%"},jxt=function(){function t(t){this.type="filter",this.cfg={},this.type="filter";var e=Uyt("filter");return(0,_ut.S6)(Pxt,(function(t,n){e.setAttribute(n,t)})),this.el=e,this.id=(0,_ut.EL)("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return t.prototype.match=function(t,e){if(this.type!==t)return!1;var n=!0,r=this.cfg;return(0,_ut.S6)(Object.keys(r),(function(t){if(r[t]!==e[t])return n=!1,!1})),n},t.prototype.update=function(t,e){var n=this.cfg;return n[Ixt[t]]=e,this._parseShadow(n,this.el),this},t.prototype._parseShadow=function(t,e){var n='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=n},t}(),Bxt=jxt,Lxt=function(){function t(t,e){this.cfg={};var n=Uyt("marker"),r=(0,_ut.EL)("marker_");n.setAttribute("id",r);var i=Uyt("path");i.setAttribute("stroke",t.stroke||"none"),i.setAttribute("fill",t.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var a=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===a?this._setDefaultPath(e,i):(this.cfg=a,this._setMarker(t.lineWidth,i)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},t.prototype._setMarker=function(t,e){var n=this.el,r=this.cfg.path,i=this.cfg.d;(0,_ut.kJ)(r)&&(r=r.map((function(t){return t.join(" ")})).join("")),e.setAttribute("d",r),n.appendChild(e),i&&n.setAttribute("refX",""+i/t)},t.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}(),Rxt=Lxt,Zxt=function(){function t(t){this.type="clip",this.cfg={};var e=Uyt("clipPath");this.el=e,this.id=(0,_ut.EL)("clip_"),e.id=this.id;var n=t.cfg.el;return e.appendChild(n),this.cfg=t,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}(),Nxt=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,zxt=function(){function t(t){this.cfg={};var e=Uyt("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=Uyt("image");e.appendChild(n);var r=(0,_ut.EL)("pattern_");e.id=r,this.el=e,this.id=r,this.cfg=t;var i=Nxt.exec(t)[2];n.setAttribute("href",i);var a=new Image;function o(){e.setAttribute("width",""+a.width),e.setAttribute("height",""+a.height)}return i.match(/^data:/i)||(a.crossOrigin="Anonymous"),a.src=i,a.complete?o():(a.onload=o,a.src=a.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),Uxt=zxt,Hxt=function(){function t(t){var e=Uyt("defs"),n=(0,_ut.EL)("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return t.prototype.find=function(t,e){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(t,e)){r=n[i].id;break}return r},t.prototype.findById=function(t){for(var e=this.children,n=null,r=0;r<e.length;r++)if(e[r].id===t){n=e[r];break}return n},t.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},t.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new Rxt(t,e);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addGradient=function(t){var e=new Fxt(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(t,e){var n=new Rxt(t,e);return this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addShadow=function(t){var e=new Bxt(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(t){var e=new Uxt(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(t){var e=new Zxt(t);return this.el.appendChild(e.el),this.add(e),e.id},t}(),Wxt=Hxt,Vxt=function(t){function e(e){return t.call(this,(0,Aut.pi)((0,Aut.pi)({},e),{autoDraw:!0,renderer:"svg"}))||this}return(0,Aut.ZT)(e,t),e.prototype.getShapeBase=function(){return D},e.prototype.getGroupBase=function(){return $yt},e.prototype.getShape=function(t,e,n){var r=n.target||n.srcElement;if(!Nyt[r.tagName]){for(var i=r.parentNode;i&&!Nyt[i.tagName];)i=i.parentNode;r=i}return this.find((function(t){return t.get("el")===r}))},e.prototype.createDom=function(){var t=Uyt("svg"),e=new Wxt(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},e.prototype.onCanvasChange=function(t){var e=this.get("context"),n=this.get("el");if("sort"===t){var r=this.get("children");r&&r.length&&Wyt(this,(function(t,e){return r.indexOf(t)-r.indexOf(e)?1:0}))}else if("clear"===t){if(n){n.innerHTML="";var i=e.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===t?Vyt(this):"clip"===t?Gyt(this,e):"changeSize"===t&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();Gyt(this,t),e.length&&Xyt(t,e)},e}(Kut.AbstractCanvas),Gxt=Vxt,Xxt="0.5.6",Yxt=function(t){function e(e){var n=t.call(this,e)||this;n.type="path",n.shapeType="line";var r=e.connectNulls,i=void 0!==r&&r,a=e.showSinglePoint,o=void 0===a||a;return n.connectNulls=i,n.showSinglePoint=o,n}return(0,Aut.ZT)(e,t),e.prototype.updateElements=function(t,e){var n,r,i,a,o,u;void 0===e&&(e=!1);for(var s=new Map,l=new Map,c=[],f=0,h=0;h<t.length;h++){var d=t[h],p=this.getElementId(d);c.push(p),s.set(p,d),l.set(p,f),f++}this.elements=new Array(f);var g=Svt(this.lastElementsMap,c),v=g.added,m=g.updated,y=g.removed;try{for(var x=(0,Aut.XA)(v),b=x.next();!b.done;b=x.next()){p=b.value,d=s.get(p);var w=this.getShapeFactory(),S=this.getShapeInfo(d);h=l.get(p);(E=new lvt({shapeFactory:w,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:h})).geometry=this,E.animate=this.animateOption,E.draw(S,e),this.elementsMap[p]=E,this.elements[h]=E}}catch(_){n={error:_}}finally{try{b&&!b.done&&(r=x.return)&&r.call(x)}finally{if(n)throw n.error}}try{for(var k=(0,Aut.XA)(m),C=k.next();!C.done;C=k.next()){p=C.value,d=s.get(p);var E=this.lastElementsMap[p],M=(h=l.get(p),S=this.getShapeInfo(d),E.getModel());(this.isCoordinateChanged||bvt(M,S))&&(E.animate=this.animateOption,E.update(S)),this.elementsMap[p]=E,this.elements[h]=E}}catch(D){i={error:D}}finally{try{C&&!C.done&&(a=k.return)&&a.call(k)}finally{if(i)throw i.error}}try{for(var O=(0,Aut.XA)(y),A=O.next();!A.done;A=O.next()){p=A.value;(E=this.lastElementsMap[p]).animate=this.animateOption,E.destroy()}}catch(T){o={error:T}}finally{try{A&&!A.done&&(u=O.return)&&u.call(O)}finally{if(o)throw o.error}}},e.prototype.getPointsAndData=function(t){for(var e=[],n=[],r=0,i=t.length;r<i;r++){var a=t[r];e.push({x:a.x,y:a.y}),n.push(a[Uut])}return{points:e,data:n}},e.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),n=this.getPointsAndData(t),r=n.points,i=n.data;return e.mappingData=t,e.data=i,e.isStack=!!this.getAdjust("stack"),e.points=r,e.connectNulls=this.connectNulls,e.showSinglePoint=this.showSinglePoint,e},e}(Cvt),qxt=Yxt;function $xt(t,e,n,r,i){var a=[];if(t.length){for(var o=[],u=[],s=0,l=t.length;s<l;s++){var c=t[s];o.push(c[1]),u.push(c[0])}u=u.reverse(),(0,_ut.S6)([o,u],(function(t,s){var l=[],c=r.parsePoints(t),f=c[0];1===o.length&&1===u.length?l=0===s?[["M",f.x-.5,f.y],["L",f.x+.5,f.y]]:[["L",f.x+.5,f.y],["L",f.x-.5,f.y]]:(e&&c.push({x:f.x,y:f.y}),l=n?Ept(c,!1,i):Cpt(c,!1),s>0&&(l[0][0]="L")),a=a.concat(l)})),a.push(["Z"])}return a}function Jxt(t,e,n,r,i){for(var a=qvt(t,e,!e,"lineWidth"),o=t.connectNulls,u=t.isInCircle,s=Gvt(t.points,o,t.showSinglePoint),l=[],c=0,f=s.length;c<f;c++){var h=s[c];l=l.concat($xt(h,u,n,r,i))}return a.path=l,a}function Kxt(t){var e=t.start,n=t.end;return[[e.x,n.y],[n.x,e.y]]}mvt("area",{defaultShapeType:"area",getDefaultPoints:function(t){var e=t.x,n=t.y0;return((0,_ut.kJ)(t.y)?t.y:[n,t.y]).map((function(t){return{x:e,y:t}}))}});yvt("area","area",{draw:function(t,e){var n=Jxt(t,!1,!1,this);return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:t.color,fillOpacity:1}}}});var Qxt=function(t){function e(e){var n=t.call(this,e)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var r=e.startOnZero,i=void 0===r||r,a=e.sortable,o=void 0!==a&&a,u=e.showSinglePoint,s=void 0!==u&&u;return n.startOnZero=i,n.sortable=o,n.showSinglePoint=s,n}return(0,Aut.ZT)(e,t),e.prototype.getPointsAndData=function(t){for(var e=[],n=[],r=0,i=t.length;r<i;r++){var a=t[r];e.push(a.points),n.push(a[Uut])}return{points:e,data:n}},e.prototype.getYMinValue=function(){return this.startOnZero?t.prototype.getYMinValue.call(this):this.getYScale().min},e}(qxt),tbt=Qxt;mvt("edge",{defaultShapeType:"line",getDefaultPoints:function(t){return Jvt(t)}});yvt("edge","line",{draw:function(t,e){var n=qvt(t,!0,!1,"lineWidth"),r=Cpt(this.parsePoints(t.points),this.coordinate.isPolar);return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});var ebt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e}return(0,Aut.ZT)(e,t),e}(Cvt),nbt=ebt,rbt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="heatmap",e.paletteCache={},e}return(0,Aut.ZT)(e,t),e.prototype.updateElements=function(t,e){void 0===e&&(e=!1);for(var n=0;n<t.length;n++){var r=t[n],i=this.prepareRange(r),a=this.prepareSize(),o=(0,_ut.U2)(this.styleOption,["cfg","shadowBlur"]);(0,_ut.hj)(o)||(o=a/2),this.prepareGreyScaleBlurredCircle(a,o),this.drawWithRange(r,i,a,o)}},e.prototype.color=function(t,e){return this.createAttrOption("color",t,"function"!=typeof e?e:""),this},e.prototype.clear=function(){t.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},e.prototype.prepareRange=function(t){var e=this.getAttribute("color").getFields()[0],n=1/0,r=-1/0;return t.forEach((function(t){var i=t[Uut][e];i>r&&(r=i),i<n&&(n=i)})),n===r&&(n=r-1),[n,r]},e.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,_ut.hj)(t)||(t=this.getDefaultSize()),t},e.prototype.prepareGreyScaleBlurredCircle=function(t,e){var n=this.getGrayScaleBlurredCanvas(),r=t+e,i=n.getContext("2d");n.width=n.height=2*r,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=e,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,t,0,2*Math.PI,!0),i.closePath(),i.fill()},e.prototype.drawWithRange=function(t,e,n,r){var i,a,o=this.coordinate,u=o.start,s=o.end,l=this.coordinate.getWidth(),c=this.coordinate.getHeight(),f=this.getAttribute("color").getFields()[0];this.clearShadowCanvasCtx();var h=this.getShadowCanvasCtx();e&&(t=t.filter((function(t){return t[Uut][f]<=e[1]&&t[Uut][f]>=e[0]})));var d=this.scales[f];try{for(var p=(0,Aut.XA)(t),g=p.next();!g.done;g=p.next()){var v=g.value,m=this.getDrawCfg(v),y=m.x,x=m.y,b=d.scale(v[Uut][f]);this.drawGrayScaleBlurredCircle(y-u.x,x-s.y,n+r,b,h)}}catch(k){i={error:k}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var w=h.getImageData(0,0,l,c);this.clearShadowCanvasCtx(),this.colorize(w),h.putImageData(w,0,0);var S=this.getImageShape();S.attr("x",u.x),S.attr("y",s.y),S.attr("width",l),S.attr("height",c),S.attr("img",h.canvas),S.set("origin",this.getShapeInfo(t))},e.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate;return Math.min(e.getWidth()/(4*t.scales[0].ticks.length),e.getHeight()/(4*t.scales[1].ticks.length))},e.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},e.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},e.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},e.prototype.drawGrayScaleBlurredCircle=function(t,e,n,r,i){var a=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(a,t-n,e-n)},e.prototype.colorize=function(t){for(var e=this.getAttribute("color"),n=t.data,r=this.paletteCache,i=3;i<n.length;i+=4){var a=n[i];if((0,_ut.hj)(a)){var o=r[a]?r[a]:Tst.rgb2arr(e.gradient(a/256));n[i-3]=o[0],n[i-2]=o[1],n[i-1]=o[2],n[i]=a}}},e.prototype.getImageShape=function(){var t=this.imageShape;return t||(t=this.container.addShape({type:"image",attrs:{}}),this.imageShape=t,t)},e.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),n=t.map((function(t){return t[Uut]}));return(0,Aut.pi)((0,Aut.pi)({},e),{mappingData:t,data:n})},e}(Cvt),ibt=rbt;function abt(t){var e,n,r,i,a,o,u=t.x,s=t.y,l=t.y0,c=t.size;(0,_ut.kJ)(s)?(r=(e=(0,Aut.CR)(s,2))[0],i=e[1]):(r=l,i=s),(0,_ut.kJ)(u)?(a=(n=(0,Aut.CR)(u,2))[0],o=n[1]):(a=u-c/2,o=u+c/2);var f=[{x:a,y:r},{x:a,y:i}];return f.push({x:o,y:i},{x:o,y:r}),f}function obt(t,e){void 0===e&&(e=!0);var n=[],r=t[0];n.push(["M",r.x,r.y]);for(var i=1,a=t.length;i<a;i++)n.push(["L",t[i].x,t[i].y]);return e&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}function ubt(t,e){var n=0,r=0,i=0,a=0;return(0,_ut.kJ)(t)?1===t.length?n=r=i=a=t[0]:2===t.length?(n=i=t[0],r=a=t[1]):3===t.length?(n=t[0],r=a=t[1],i=t[2]):(n=t[0],r=t[1],i=t[2],a=t[3]):n=r=i=a=t,n+r>e&&(r=e-(n=n?e/(1+r/n):0)),i+a>e&&(a=e-(i=i?e/(1+a/i):0)),[n||0,r||0,i||0,a||0]}function sbt(t,e,n){var r=[];if(n.isRect){var i=n.isTransposed?{x:n.start.x,y:e[0].y}:{x:e[0].x,y:n.start.y},a=n.isTransposed?{x:n.end.x,y:e[2].y}:{x:e[3].x,y:n.end.y},o=(0,_ut.U2)(t,["background","style","radius"]);if(o){var u=n.isTransposed?Math.abs(e[0].y-e[2].y):e[2].x-e[1].x,s=n.isTransposed?n.getWidth():n.getHeight(),l=(0,Aut.CR)(ubt(o,Math.min(u,s)),4),c=l[0],f=l[1],h=l[2],d=l[3],p=n.isTransposed&&n.isReflect("y"),g=p?0:1,v=function(t){return p?-t:t};r.push(["M",i.x,a.y+v(c)]),0!==c&&r.push(["A",c,c,0,0,g,i.x+c,a.y]),r.push(["L",a.x-f,a.y]),0!==f&&r.push(["A",f,f,0,0,g,a.x,a.y+v(f)]),r.push(["L",a.x,i.y-v(h)]),0!==h&&r.push(["A",h,h,0,0,g,a.x-h,i.y]),r.push(["L",i.x+d,i.y]),0!==d&&r.push(["A",d,d,0,0,g,i.x,i.y-v(d)])}else r.push(["M",i.x,i.y]),r.push(["L",a.x,i.y]),r.push(["L",a.x,a.y]),r.push(["L",i.x,a.y]),r.push(["L",i.x,i.y]);r.push(["z"])}if(n.isPolar){var m=n.getCenter(),y=Zdt(t,n),x=y.startAngle,b=y.endAngle;if("theta"===n.type||n.isTransposed){var w=function(t){return Math.pow(t,2)};c=Math.sqrt(w(m.x-e[0].x)+w(m.y-e[0].y)),f=Math.sqrt(w(m.x-e[2].x)+w(m.y-e[2].y));r=Ldt(m.x,m.y,c,n.startAngle,n.endAngle,f)}else r=Ldt(m.x,m.y,n.getRadius(),x,b)}return r}function lbt(t,e,n){var r=[];return(0,_ut.UM)(e)?n?r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",(t[2].x+t[3].x)/2,(t[2].y+t[3].y)/2],["Z"]):r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[3].x,t[3].y],["Z"]):r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",e[1].x,e[1].y],["L",e[0].x,e[0].y],["Z"]),r}function cbt(t,e){return[e,t]}mvt("interval",{defaultShapeType:"rect",getDefaultPoints:function(t){return abt(t)}});yvt("interval","rect",{draw:function(t,e){var n,r=qvt(t,!1,!0),i=e,a=null==t?void 0:t.background;if(a){i=e.addGroup({name:"interval-group"});var o=$vt(t),u=sbt(t,this.parsePoints(t.points),this.coordinate);i.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},o),{path:u}),zIndex:-1,name:uvt})}n=r.radius&&this.coordinate.isRect?function(t,e,n){var r,i,a,o,u,s,l,c=(0,Aut.CR)((0,Aut.ev)([],(0,Aut.CR)(t),!1),4),f=c[0],h=c[1],d=c[2],p=c[3],g=(0,Aut.CR)("number"==typeof n?Array(4).fill(n):n,4),v=g[0],m=g[1],y=g[2],x=g[3];e.isTransposed&&(h=(r=(0,Aut.CR)(cbt(h,p),2))[0],p=r[1]),e.isReflect("y")&&(f=(i=(0,Aut.CR)(cbt(f,h),2))[0],h=i[1],d=(a=(0,Aut.CR)(cbt(d,p),2))[0],p=a[1]),e.isReflect("x")&&(f=(o=(0,Aut.CR)(cbt(f,p),2))[0],p=o[1],h=(u=(0,Aut.CR)(cbt(h,d),2))[0],d=u[1]);var b=[],w=function(t){return Math.abs(t)};return v=(s=(0,Aut.CR)(ubt([v,m,y,x],Math.min(w(p.x-f.x),w(h.y-f.y))).map((function(t){return w(t)})),4))[0],m=s[1],y=s[2],x=s[3],e.isTransposed&&(v=(l=(0,Aut.CR)([x,v,m,y],4))[0],m=l[1],y=l[2],x=l[3]),f.y<h.y?(b.push(["M",p.x,p.y+y]),0!==y&&b.push(["A",y,y,0,0,0,p.x-y,p.y]),b.push(["L",f.x+x,f.y]),0!==x&&b.push(["A",x,x,0,0,0,f.x,f.y+x]),b.push(["L",h.x,h.y-v]),0!==v&&b.push(["A",v,v,0,0,0,h.x+v,h.y]),b.push(["L",d.x-m,d.y]),0!==m&&b.push(["A",m,m,0,0,0,d.x,d.y-m]),b.push(["L",p.x,p.y+y]),b.push(["z"])):p.x<f.x?(b.push(["M",d.x+m,d.y]),0!==m&&b.push(["A",m,m,0,0,0,d.x,d.y+m]),b.push(["L",p.x,p.y-y]),0!==y&&b.push(["A",y,y,0,0,0,p.x+y,p.y]),b.push(["L",f.x-x,f.y]),0!==x&&b.push(["A",x,x,0,0,0,f.x,f.y-x]),b.push(["L",h.x,h.y+v]),0!==v&&b.push(["A",v,v,0,0,0,h.x-v,h.y]),b.push(["L",d.x+m,d.y]),b.push(["z"])):(b.push(["M",h.x,h.y+v]),0!==v&&b.push(["A",v,v,0,0,1,h.x+v,h.y]),b.push(["L",d.x-m,d.y]),0!==m&&b.push(["A",m,m,0,0,1,d.x,d.y+m]),b.push(["L",p.x,p.y-y]),0!==y&&b.push(["A",y,y,0,0,1,p.x-y,p.y]),b.push(["L",f.x+x,f.y]),0!==x&&b.push(["A",x,x,0,0,1,f.x,f.y-x]),b.push(["L",h.x,h.y+v]),b.push(["z"])),b}(this.parsePoints(t.points),this.coordinate,r.radius):this.parsePath(function(t,e,n){var r=n.getWidth(),i=n.getHeight(),a="rect"===n.type,o=[],u=(t[2].x-t[1].x)/2,s=n.isTransposed?u*i/r:u*r/i;return"round"===e?(a?(o.push(["M",t[0].x,t[0].y+s]),o.push(["L",t[1].x,t[1].y-s]),o.push(["A",u,u,0,0,1,t[2].x,t[2].y-s]),o.push(["L",t[3].x,t[3].y+s]),o.push(["A",u,u,0,0,1,t[0].x,t[0].y+s])):(o.push(["M",t[0].x,t[0].y]),o.push(["L",t[1].x,t[1].y]),o.push(["A",u,u,0,0,1,t[2].x,t[2].y]),o.push(["L",t[3].x,t[3].y]),o.push(["A",u,u,0,0,1,t[0].x,t[0].y])),o.push(["z"])):o=obt(t),o}(t.points,r.lineCap,this.coordinate));var s=i.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},r),{path:n}),name:"interval"});return a?i:s},getMarker:function(t){var e=t.color;return t.isInPolar?{symbol:"circle",style:{r:4.5,fill:e}}:{symbol:"square",style:{r:4,fill:e}}}});function fbt(t){var e=t.theme,n=t.coordinate,r=t.getXScale(),i=r.values,a=t.beforeMappingData,o=i.length,u=Vdt(t.coordinate),s=t.intervalPadding,l=t.dodgePadding,c=t.maxColumnWidth||e.maxColumnWidth,f=t.minColumnWidth||e.minColumnWidth,h=t.columnWidthRatio||e.columnWidthRatio,d=t.multiplePieWidthRatio||e.multiplePieWidthRatio,p=t.roseWidthRatio||e.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var g=function(t,e){var n=t.length,r=t;(0,_ut.HD)(r[0])&&(r=t.map((function(t){return e.translate(t)})));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}(i,r);o=(r.max-r.min)/g,i.length>o&&(o=i.length)}var v=r.range,m=1/o,y=1;(n.isPolar?y=n.isTransposed&&o>1?d:p:(r.isLinear&&(m*=v[1]-v[0]),y=h),!(0,_ut.UM)(s)&&s>=0)?m=(1-(o-1)*(s/u))/o:m*=y;if(t.getAdjust("dodge")){var x=function(t,e){if(e){var n=(0,_ut.xH)(t);return(0,_ut.I)(n,e).length}return t.length}(a,t.getAdjust("dodge").dodgeBy);if(!(0,_ut.UM)(l)&&l>=0)m=(m-l/u*(x-1))/x;else!(0,_ut.UM)(s)&&s>=0?(m*=y,m/=x):m/=x;m=m>=0?m:0}if(!(0,_ut.UM)(c)&&c>=0){var b=c/u;m>b&&(m=b)}if(!(0,_ut.UM)(f)&&f>=0){var w=f/u;m<w&&(m=w)}return m}var hbt=function(t){function e(e){var n=t.call(this,e)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var r=e.background;return n.background=r,n}return(0,Aut.ZT)(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,e)[0],n/=Vdt(this.coordinate)):(this.defaultSize||(this.defaultSize=fbt(this)),n=this.defaultSize);return r.size=n,r},e.prototype.adjustScale=function(){t.prototype.adjustScale.call(this);var e=this.getYScale();if("theta"===this.coordinate.type)e.change({nice:!1,min:0,max:tpt(e)});else{var n=this.scaleDefs,r=e.field,i=e.min,a=e.max;"time"!==e.type&&(i>0&&!(0,_ut.U2)(n,[r,"min"])&&e.change({min:0}),a<=0&&!(0,_ut.U2)(n,[r,"max"])&&e.change({max:0}))}},e.prototype.getDrawCfg=function(e){var n=t.prototype.getDrawCfg.call(this,e);return n.background=this.background,n},e}(Cvt),dbt=hbt,pbt=function(t){function e(e){var n=t.call(this,e)||this;n.type="line";var r=e.sortable,i=void 0!==r&&r;return n.sortable=i,n}return(0,Aut.ZT)(e,t),e}(qxt),gbt=pbt,vbt=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"];function mbt(t,e,n,r,i){var a,o,u=qvt(e,i,!i,"r"),s=t.parsePoints(e.points),l=s[0];if(e.isStack)l=s[1];else if(s.length>1){var c=n.addGroup();try{for(var f=(0,Aut.XA)(s),h=f.next();!h.done;h=f.next()){var d=h.value;c.addShape({type:"marker",attrs:(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},u),{symbol:Rvt[r]||r}),d)})}}catch(p){a={error:p}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(a)throw a.error}}return c}return n.addShape({type:"marker",attrs:(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},u),{symbol:Rvt[r]||r}),l)})}mvt("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(t){return Jvt(t)}});(0,_ut.S6)(vbt,(function(t){yvt("point","hollow-".concat(t),{draw:function(e,n){return mbt(this,e,n,t,!0)},getMarker:function(e){var n=e.color;return{symbol:Rvt[t]||t,style:{r:4.5,stroke:n,fill:null}}}})}));var ybt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="point",e.shapeType="point",e.generatePoints=!0,e}return(0,Aut.ZT)(e,t),e.prototype.getDrawCfg=function(e){var n=t.prototype.getDrawCfg.call(this,e);return(0,Aut.pi)((0,Aut.pi)({},n),{isStack:!!this.getAdjust("stack")})},e}(Cvt),xbt=ybt;mvt("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(t){var e=[];return(0,_ut.S6)(t.x,(function(n,r){var i=t.y[r];e.push({x:n,y:i})})),e}});yvt("polygon","polygon",{draw:function(t,e){if(!(0,_ut.xb)(t.points)){var n=qvt(t,!0,!0),r=this.parsePath(function(t){for(var e=t[0],n=1,r=[["M",e.x,e.y]];n<t.length;){var i=t[n];i.x===t[n-1].x&&i.y===t[n-1].y||(r.push(["L",i.x,i.y]),i.x===e.x&&i.y===e.y&&n<t.length-1&&(e=t[n+1],r.push(["Z"]),r.push(["M",e.x,e.y]),n++)),n++}return(0,_ut.Xy)((0,_ut.Z$)(r),e)||r.push(["L",e.x,e.y]),r.push(["Z"]),r}(t.points));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r}),name:"polygon"})}},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}});var bbt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e}return(0,Aut.ZT)(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=r.x,a=r.y;if(!(0,_ut.kJ)(i)||!(0,_ut.kJ)(a)){var o=this.getXScale(),u=this.getYScale(),s=.5/o.values.length,l=.5/u.values.length;o.isCategory&&u.isCategory?(i=[i-s,i-s,i+s,i+s],a=[a-l,a+l,a+l,a-l]):(0,_ut.kJ)(i)?(i=[(n=i)[0],n[0],n[1],n[1]],a=[a-l/2,a+l/2,a+l/2,a-l/2]):(0,_ut.kJ)(a)&&(a=[(n=a)[0],n[1],n[1],n[0]],i=[i-s/2,i-s/2,i+s/2,i+s/2]),r.x=i,r.y=a}return r},e}(Cvt),wbt=bbt,Sbt=(mvt("schema",{defaultShapeType:""}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e}return(0,Aut.ZT)(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,e)[0],n/=Vdt(this.coordinate)):(this.defaultSize||(this.defaultSize=fbt(this)),n=this.defaultSize);return r.size=n,r},e}(Cvt)),kbt=Sbt;mvt("violin",{defaultShapeType:"violin",getDefaultPoints:function(t){var e=t.size/2,n=[],r=function(t){if(!(0,_ut.kJ)(t))return[];var e=(0,_ut.Fp)(t);return(0,_ut.UI)(t,(function(t){return t/e}))}(t._size);return(0,_ut.S6)(t.y,(function(i,a){var o=r[a]*e,u=0===a,s=a===t.y.length-1;n.push({isMin:u,isMax:s,x:t.x-o,y:i}),n.unshift({isMin:u,isMax:s,x:t.x+o,y:i})})),n}});yvt("violin","violin",{draw:function(t,e){var n=qvt(t,!0,!0),r=this.parsePath(Xvt(t.points));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r}),name:"violin"})},getMarker:function(t){return{symbol:"circle",style:{r:4,fill:t.color}}}});var Cbt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="violin",e.shapeType="violin",e.generatePoints=!0,e}return(0,Aut.ZT)(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,e)[0],n/=Vdt(this.coordinate)):(this.defaultSize||(this.defaultSize=fbt(this)),n=this.defaultSize);return r.size=n,r._size=(0,_ut.U2)(e[Uut],[this._sizeField]),r},e.prototype.initAttributes=function(){var e=this.attributeOption,n=e.size?e.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete e.size,t.prototype.initAttributes.call(this)},e}(Cvt),Ebt=Cbt;function Mbt(t,e){return["C",1*t.x/2+1*e.x/2,t.y,1*t.x/2+1*e.x/2,e.y,e.x,e.y]}function Obt(t,e){var n=[];n.push({x:e.x,y:e.y}),n.push(t);var r=["Q"];return(0,_ut.S6)(n,(function(t){r.push(t.x,t.y)})),r}yvt("area","line",{draw:function(t,e){var n=Jxt(t,!0,!1,this);return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:t.color,fill:null}}}}),yvt("area","smooth",{draw:function(t,e){var n=Jxt(t,!1,!0,this,Kxt(this.coordinate));return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:t.color,fillOpacity:1}}}}),yvt("area","smooth-line",{draw:function(t,e){var n=Jxt(t,!0,!0,this,Kxt(this.coordinate));return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:t.color,fill:null}}}}),yvt("edge","arc",{draw:function(t,e){var n,r=qvt(t,!0,!1,"lineWidth"),i=t.points,a=i.length>2?"weight":"normal";if(t.isInCircle){var o={x:0,y:1};return"normal"===a?n=function(t,e,n){var r=Obt(e,n),i=[["M",t.x,t.y]];return i.push(r),i}(i[0],i[1],o):(r.fill=r.stroke,n=function(t,e){var n=Obt(t[1],e),r=Obt(t[3],e),i=[["M",t[0].x,t[0].y]];return i.push(r),i.push(["L",t[3].x,t[3].y]),i.push(["L",t[2].x,t[2].y]),i.push(n),i.push(["L",t[1].x,t[1].y]),i.push(["L",t[0].x,t[0].y]),i.push(["Z"]),i}(i,o)),n=this.parsePath(n),e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},r),{path:n})})}if("normal"===a)return n=Rdt(((i=this.parsePoints(i))[1].x+i[0].x)/2,i[0].y,Math.abs(i[1].x-i[0].x)/2,Math.PI,2*Math.PI),e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},r),{path:n})});var u=Mbt(i[1],i[3]),s=Mbt(i[2],i[0]);return n=[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],u,["L",i[3].x,i[3].y],["L",i[2].x,i[2].y],s,["Z"]],n=this.parsePath(n),r.fill=r.stroke,e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},r),{path:n})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}}),yvt("edge","smooth",{draw:function(t,e){var n=qvt(t,!0,!1,"lineWidth"),r=t.points,i=this.parsePath(function(t,e){var n=Mbt(t,e),r=[["M",t.x,t.y]];return r.push(n),r}(r[0],r[1]));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:i})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});var Abt=1/3;yvt("edge","vhv",{draw:function(t,e){var n=qvt(t,!0,!1,"lineWidth"),r=t.points,i=this.parsePath(function(t,e){var n=[];n.push({x:t.x,y:t.y*(1-Abt)+e.y*Abt}),n.push({x:e.x,y:t.y*(1-Abt)+e.y*Abt}),n.push(e);var r=[["M",t.x,t.y]];return(0,_ut.S6)(n,(function(t){r.push(["L",t.x,t.y])})),r}(r[0],r[1]));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:i})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}}),yvt("interval","funnel",{getPoints:function(t){return t.size=2*t.size,abt(t)},draw:function(t,e){var n=qvt(t,!1,!0),r=this.parsePath(lbt(t.points,t.nextPoints,!1));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r}),name:"interval"})},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}}),yvt("interval","hollow-rect",{draw:function(t,e){var n=qvt(t,!0,!1),r=e,i=null==t?void 0:t.background;if(i){r=e.addGroup();var a=$vt(t),o=sbt(t,this.parsePoints(t.points),this.coordinate);r.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},a),{path:o}),zIndex:-1,name:uvt})}var u=this.parsePath(obt(t.points)),s=r.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:u}),name:"interval"});return i?r:s},getMarker:function(t){var e=t.color;return t.isInPolar?{symbol:"circle",style:{r:4.5,stroke:e,fill:null}}:{symbol:"square",style:{r:4,stroke:e,fill:null}}}}),yvt("interval","line",{getPoints:function(t){return function(t){var e=t.x,n=t.y,r=t.y0;return(0,_ut.kJ)(n)?n.map((function(t,n){return{x:(0,_ut.kJ)(e)?e[n]:e,y:t}})):[{x:e,y:r},{x:e,y:n}]}(t)},draw:function(t,e){var n=qvt(t,!0,!1,"lineWidth"),r=Udt((0,Aut.pi)({},n),["fill"]),i=this.parsePath(obt(t.points,!1));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},r),{path:i}),name:"interval"})},getMarker:function(t){return{symbol:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]},style:{r:5,stroke:t.color}}}}),yvt("interval","pyramid",{getPoints:function(t){return t.size=2*t.size,abt(t)},draw:function(t,e){var n=qvt(t,!1,!0),r=this.parsePath(lbt(t.points,t.nextPoints,!0));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r}),name:"interval"})},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}}),yvt("interval","tick",{getPoints:function(t){return function(t){var e,n,r,i=t.x,a=t.y,o=t.y0,u=t.size;(0,_ut.kJ)(a)?(n=(e=(0,Aut.CR)(a,2))[0],r=e[1]):(n=o,r=a);var s=i+u/2,l=i-u/2;return[{x:i,y:n},{x:i,y:r},{x:l,y:n},{x:s,y:n},{x:l,y:r},{x:s,y:r}]}(t)},draw:function(t,e){var n=qvt(t,!0,!1),r=this.parsePath(function(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y]]}(t.points));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r}),name:"interval"})},getMarker:function(t){return{symbol:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},style:{r:5,stroke:t.color}}}});function _bt(t,e){var n=Gvt(t.points,t.connectNulls,t.showSinglePoint),r=[];return(0,_ut.S6)(n,(function(t){var n=function(t,e){var n=[];return(0,_ut.S6)(t,(function(r,i){var a=t[i+1];if(n.push(r),a){var o=function(t,e,n){var r,i=t.x,a=t.y,o=e.x,u=e.y;switch(n){case"hv":r=[{x:o,y:a}];break;case"vh":r=[{x:i,y:u}];break;case"hvh":var s=(o+i)/2;r=[{x:s,y:a},{x:s,y:u}];break;case"vhv":var l=(a+u)/2;r=[{x:i,y:l},{x:o,y:l}]}return r}(r,a,e);n=n.concat(o)}})),n}(t,e);r=r.concat(function(t){return t.map((function(t,e){return 0===e?["M",t.x,t.y]:["L",t.x,t.y]}))}(n))})),(0,Aut.pi)((0,Aut.pi)({},qvt(t,!0,!1,"lineWidth")),{path:r})}function Dbt(t){var e=(0,_ut.kJ)(t)?t:[t],n=e[0],r=e[e.length-1],i=e.length>1?e[1]:n;return{min:n,max:r,min1:i,max1:e.length>3?e[3]:r,median:e.length>2?e[2]:i}}function Tbt(t,e,n){var r,i=n/2;if((0,_ut.kJ)(e)){var a=Dbt(e),o=a.min,u=a.max,s=a.median,l=a.min1,c=t-i,f=t+i;r=[[c,u],[f,u],[t,u],[t,h=a.max1],[c,l],[c,h],[f,h],[f,l],[t,l],[t,o],[c,o],[f,o],[c,s],[f,s]]}else{e=(0,_ut.UM)(e)?.5:e;var h,d=Dbt(t),p=(o=d.min,u=d.max,s=d.median,e-i),g=e+i;r=[[o,p],[o,g],[o,e],[l=d.min1,e],[l,p],[l,g],[h=d.max1,g],[h,p],[h,e],[u,e],[u,p],[u,g],[s,p],[s,g]]}return r.map((function(t){return{x:t[0],y:t[1]}}))}function Fbt(t){var e=((0,_ut.kJ)(t)?t:[t]).sort((function(t,e){return e-t}));return function(t,e,n){if((0,_ut.HD)(t))return t.padEnd(e,n);if((0,_ut.kJ)(t)){var r=t.length;if(r<e)for(var i=e-r,a=0;a<i;a++)t.push(n)}return t}(e,4,e[e.length-1])}function Ibt(t,e,n){var r=Fbt(e);return[{x:t,y:r[0]},{x:t,y:r[1]},{x:t-n/2,y:r[2]},{x:t-n/2,y:r[1]},{x:t+n/2,y:r[1]},{x:t+n/2,y:r[2]},{x:t,y:r[2]},{x:t,y:r[3]}]}function Pbt(t,e){var n=Math.abs(t[0].x-t[2].x),r=Math.abs(t[0].y-t[2].y),i=Math.min(n,r);return e&&(i=(0,_ut.uZ)(e,0,Math.min(n,r))),i/=2,{x:(t[0].x+t[2].x)/2-i,y:(t[0].y+t[2].y)/2-i,width:2*i,height:2*i}}(0,_ut.S6)(["hv","vh","hvh","vhv"],(function(t){yvt("line",t,{draw:function(e,n){var r=_bt(e,t);return n.addShape({type:"path",attrs:r,name:"line"})},getMarker:function(e){return Qvt(e,t)}})})),(0,_ut.S6)(["cross","tick","plus","hyphen","line"],(function(t){yvt("point",t,{draw:function(e,n){return mbt(this,e,n,t,!0)},getMarker:function(e){var n=e.color;return{symbol:Rvt[t],style:{r:4.5,stroke:n,fill:null}}}})})),yvt("point","image",{draw:function(t,e){var n,r,i=qvt(t,!1,!1,"r").r,a=this.parsePoints(t.points),o=a[0];if(t.isStack)o=a[1];else if(a.length>1){var u=e.addGroup();try{for(var s=(0,Aut.XA)(a),l=s.next();!l.done;l=s.next()){var c=l.value;u.addShape("image",{attrs:{x:c.x-i/2,y:c.y-i,width:i,height:i,img:t.shape[1]}})}}catch(f){n={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return u}return e.addShape("image",{attrs:{x:o.x-i/2,y:o.y-i,width:i,height:i,img:t.shape[1]}})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}}),(0,_ut.S6)(vbt,(function(t){yvt("point",t,{draw:function(e,n){return mbt(this,e,n,t,!1)},getMarker:function(e){var n=e.color;return{symbol:Rvt[t]||t,style:{r:4.5,fill:n}}}})})),yvt("schema","box",{getPoints:function(t){return Tbt(t.x,t.y,t.size)},draw:function(t,e){var n=qvt(t,!0,!1),r=this.parsePath(function(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y],["L",t[6].x,t[6].y],["L",t[7].x,t[7].y],["L",t[4].x,t[4].y],["Z"],["M",t[8].x,t[8].y],["L",t[9].x,t[9].y],["M",t[10].x,t[10].y],["L",t[11].x,t[11].y],["M",t[12].x,t[12].y],["L",t[13].x,t[13].y]]}(t.points));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r,name:"schema"})})},getMarker:function(t){return{symbol:function(t,e,n){var r=Tbt(t,[e-6,e-3,e,e+3,e+6],n);return[["M",r[0].x+1,r[0].y],["L",r[1].x-1,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x+1,r[10].y],["L",r[11].x-1,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]},style:{r:6,lineWidth:1,stroke:t.color}}}}),yvt("schema","candle",{getPoints:function(t){return Ibt(t.x,t.y,t.size)},draw:function(t,e){var n=qvt(t,!0,!0),r=this.parsePath(function(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["L",t[4].x,t[4].y],["L",t[5].x,t[5].y],["Z"],["M",t[6].x,t[6].y],["L",t[7].x,t[7].y]]}(t.points));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r,name:"schema"})})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){var r=Ibt(t,[e+7.5,e+3,e-3,e-7.5],n);return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]},style:{lineWidth:1,stroke:e,fill:e,r:6}}}}),yvt("polygon","square",{draw:function(t,e){if(!(0,_ut.xb)(t.points)){var n=qvt(t,!0,!0),r=this.parsePoints(t.points);return e.addShape("rect",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),Pbt(r,t.size)),name:"polygon"})}},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}}),yvt("violin","smooth",{draw:function(t,e){var n=qvt(t,!0,!0),r=this.parsePath(Yvt(t.points));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{stroke:null,r:4,fill:t.color}}}}),yvt("violin","hollow",{draw:function(t,e){var n=qvt(t,!0,!1),r=this.parsePath(Xvt(t.points));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{r:4,fill:null,stroke:t.color}}}}),yvt("violin","hollow-smooth",{draw:function(t,e){var n=qvt(t,!0,!1),r=this.parsePath(Yvt(t.points));return e.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{r:4,fill:null,stroke:t.color}}}});var jbt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getLabelValueDir=function(t){var e=t.points;return e[0].y<=e[2].y?1:-1},e.prototype.getLabelOffsetPoint=function(e,n,r,i){var a,o=t.prototype.getLabelOffsetPoint.call(this,e,n,r),u=this.getCoordinate(),s=u.isTransposed?"x":"y",l=this.getLabelValueDir(e.mappingData);return o=(0,Aut.pi)((0,Aut.pi)({},o),((a={})[s]=o[s]*l,a)),u.isReflect("x")&&(o=(0,Aut.pi)((0,Aut.pi)({},o),{x:-1*o.x})),u.isReflect("y")&&(o=(0,Aut.pi)((0,Aut.pi)({},o),{y:-1*o.y})),o},e.prototype.getThemedLabelCfg=function(t){var e=this.geometry,n=this.getDefaultLabelCfg(),r=e.theme;return(0,_ut.b$)({},n,r.labels,"middle"===t.position?{offset:0}:{},t)},e.prototype.setLabelPosition=function(t,e,n,r){var i,a,o,u,s=this.getCoordinate(),l=s.isTransposed,c=e.points,f=s.convert(c[0]),h=s.convert(c[2]),d=this.getLabelValueDir(e),p=(0,_ut.kJ)(e.shape)?e.shape[0]:e.shape;if("funnel"===p||"pyramid"===p){var g=(0,_ut.U2)(e,"nextPoints"),v=(0,_ut.U2)(e,"points");if(g){var m=s.convert(v[0]),y=s.convert(v[1]),x=s.convert(g[0]),b=s.convert(g[1]);l?(i=Math.min(x.y,m.y),o=Math.max(x.y,m.y),a=(y.x+b.x)/2,u=(m.x+x.x)/2):(i=Math.min((y.y+b.y)/2,(m.y+x.y)/2),o=Math.max((y.y+b.y)/2,(m.y+x.y)/2),a=b.x,u=m.x)}else i=Math.min(h.y,f.y),o=Math.max(h.y,f.y),a=h.x,u=f.x}else i=Math.min(h.y,f.y),o=Math.max(h.y,f.y),a=h.x,u=f.x;switch(r){case"right":t.x=a,t.y=(i+o)/2,t.textAlign=(0,_ut.U2)(t,"textAlign",d>0?"left":"right");break;case"left":t.x=u,t.y=(i+o)/2,t.textAlign=(0,_ut.U2)(t,"textAlign",d>0?"left":"right");break;case"bottom":l&&(t.x=(a+u)/2),t.y=o,t.textAlign=(0,_ut.U2)(t,"textAlign","center"),t.textBaseline=(0,_ut.U2)(t,"textBaseline",d>0?"bottom":"top");break;case"middle":l&&(t.x=(a+u)/2),t.y=(i+o)/2,t.textAlign=(0,_ut.U2)(t,"textAlign","center"),t.textBaseline=(0,_ut.U2)(t,"textBaseline","middle");break;case"top":l&&(t.x=(a+u)/2),t.y=i,t.textAlign=(0,_ut.U2)(t,"textAlign","center"),t.textBaseline=(0,_ut.U2)(t,"textBaseline",d>0?"bottom":"top")}},e}(Bvt),Bbt=jbt,Lbt=Math.PI/2,Rbt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getLabelOffset=function(t){var e=this.getCoordinate(),n=0;if((0,_ut.hj)(t))n=t;else if((0,_ut.HD)(t)&&-1!==t.indexOf("%")){var r=e.getRadius();e.innerRadius>0&&(r*=1-e.innerRadius),n=.01*parseFloat(t)*r}return n},e.prototype.getLabelItems=function(e){var n=t.prototype.getLabelItems.call(this,e),r=this.geometry.getYScale();return(0,_ut.UI)(n,(function(t){if(t&&r){var e=r.scale((0,_ut.U2)(t.data,r.field));return(0,Aut.pi)((0,Aut.pi)({},t),{percent:e})}return t}))},e.prototype.getLabelAlign=function(t){var e,n=this.getCoordinate();if(t.labelEmit)e=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(n.isTransposed){var r=n.getCenter(),i=t.offset;e=Math.abs(t.x-r.x)<1?"center":t.angle>Math.PI||t.angle<=0?i>0?"left":"right":i>0?"right":"left"}else e="center";return e},e.prototype.getLabelPoint=function(t,e,n){var r,i=1,a=t.content[n];this.isToMiddle(e)?r=this.getMiddlePoint(e.points):(1===t.content.length&&0===n?n=1:0===n&&(i=-1),r=this.getArcPoint(e,n));var o=t.offset*i,u=this.getPointAngle(r),s=t.labelEmit,l=this.getCirclePoint(u,o,r,s);return 0===l.r?l.content="":(l.content=a,l.angle=u,l.color=e.color),l.rotate=t.autoRotate?this.getLabelRotate(u,o,s):t.rotate,l.start={x:r.x,y:r.y},l},e.prototype.getArcPoint=function(t,e){return void 0===e&&(e=0),(0,_ut.kJ)(t.x)||(0,_ut.kJ)(t.y)?{x:(0,_ut.kJ)(t.x)?t.x[e]:t.x,y:(0,_ut.kJ)(t.y)?t.y[e]:t.y}:{x:t.x,y:t.y}},e.prototype.getPointAngle=function(t){return Xdt(this.getCoordinate(),t)},e.prototype.getCirclePoint=function(t,e,n,r){var i=this.getCoordinate(),a=i.getCenter(),o=Gdt(i,n);if(0===o)return(0,Aut.pi)((0,Aut.pi)({},a),{r:o});var u=t;i.isTransposed&&o>e&&!r?u=t+2*Math.asin(e/(2*o)):o+=e;return{x:a.x+o*Math.cos(u),y:a.y+o*Math.sin(u),r:o}},e.prototype.getLabelRotate=function(t,e,n){var r=t+Lbt;return n&&(r-=Lbt),r&&(r>Lbt?r-=Math.PI:r<-Lbt&&(r+=Math.PI)),r},e.prototype.getMiddlePoint=function(t){var e=this.getCoordinate(),n=t.length,r={x:0,y:0};return(0,_ut.S6)(t,(function(t){r.x+=t.x,r.y+=t.y})),r.x/=n,r.y/=n,r=e.convert(r)},e.prototype.isToMiddle=function(t){return t.x.length>2},e}(Bvt),Zbt=Rbt,Nbt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultLayout="distribute",e}return(0,Aut.ZT)(e,t),e.prototype.getDefaultLabelCfg=function(e,n){var r=t.prototype.getDefaultLabelCfg.call(this,e,n);return(0,_ut.b$)({},r,(0,_ut.U2)(this.geometry.theme,"pieLabels",{}))},e.prototype.getLabelOffset=function(e){return t.prototype.getLabelOffset.call(this,e)||0},e.prototype.getLabelRotate=function(t,e,n){var r;return e<0&&((r=t)>Math.PI/2&&(r-=Math.PI),r<-Math.PI/2&&(r+=Math.PI)),r},e.prototype.getLabelAlign=function(t){var e,n=this.getCoordinate().getCenter();return e=t.angle<=Math.PI/2&&t.x>=n.x?"left":"right",t.offset<=0&&(e="right"===e?"left":"right"),e},e.prototype.getArcPoint=function(t){return t},e.prototype.getPointAngle=function(t){var e,n=this.getCoordinate(),r={x:(0,_ut.kJ)(t.x)?t.x[0]:t.x,y:t.y[0]},i={x:(0,_ut.kJ)(t.x)?t.x[1]:t.x,y:t.y[1]},a=Xdt(n,r);if(t.points&&t.points[0].y===t.points[1].y)e=a;else{var o=Xdt(n,i);a>=o&&(o+=2*Math.PI),e=a+(o-a)/2}return e},e.prototype.getCirclePoint=function(t,e){var n=this.getCoordinate(),r=n.getCenter(),i=n.getRadius()+e;return(0,Aut.pi)((0,Aut.pi)({},Bdt(r.x,r.y,i,t)),{angle:t,r:i})},e}(Zbt),zbt=Nbt;function Ubt(t,e,n){var r=t.filter((function(t){return!t.invisible}));r.sort((function(t,e){return t.y-e.y}));var i,a=!0,o=n.minY,u=n.maxY,s=Math.abs(o-u),l=0,c=Number.MIN_VALUE,f=r.map((function(t){return t.y>l&&(l=t.y),t.y<c&&(c=t.y),{content:t.content,size:e,targets:[t.y-o],pos:null}}));for(c-=o,l-o>s&&(s=l-o);a;)for(f.forEach((function(t){var e=(Math.min.apply(c,t.targets)+Math.max.apply(c,t.targets))/2;t.pos=Math.min(Math.max(c,e-t.size/2),s-t.size),t.pos=Math.max(0,t.pos)})),a=!1,i=f.length;i--;)if(i>0){var h=f[i-1],d=f[i];h.pos+h.size>d.pos&&(h.size+=d.size,h.targets=h.targets.concat(d.targets),h.pos+h.size>s&&(h.pos=s-h.size),f.splice(i,1),a=!0)}i=0,f.forEach((function(t){var n=o+e/2;t.targets.forEach((function(){r[i].y=t.pos+n,n+=e,i++}))}))}var Hbt=function(){function t(t){void 0===t&&(t={}),this.bitmap={};var e=t.xGap,n=void 0===e?1:e,r=t.yGap,i=void 0===r?8:r;this.xGap=n,this.yGap=i}return t.prototype.hasGap=function(t){for(var e=!0,n=this.bitmap,r=Math.round(t.minX),i=Math.round(t.maxX),a=Math.round(t.minY),o=Math.round(t.maxY),u=r;u<=i;u+=1)if(n[u]){if(u===r||u===i){for(var s=a;s<=o;s++)if(n[u][s]){e=!1;break}}else if(n[u][a]||n[u][o]){e=!1;break}}else n[u]={};return e},t.prototype.fillGap=function(t){for(var e=this.bitmap,n=Math.round(t.minX),r=Math.round(t.maxX),i=Math.round(t.minY),a=Math.round(t.maxY),o=n;o<=r;o+=1)e[o]||(e[o]={});for(o=n;o<=r;o+=this.xGap){for(var u=i;u<=a;u+=this.yGap)e[o][u]=!0;e[o][a]=!0}if(1!==this.yGap)for(o=i;o<=a;o+=1)e[n][o]=!0,e[r][o]=!0;if(1!==this.xGap)for(o=n;o<=r;o+=1)e[o][i]=!0,e[o][a]=!0},t.prototype.destroy=function(){this.bitmap={}},t}();function Wbt(t,e,n,r){var i=t.getCanvasBBox(),a=i.width,o=i.height,u={x:e,y:n,textAlign:"center"};switch(r){case 0:u.y-=o+1,u.x+=1,u.textAlign="left";break;case 1:u.y-=o+1,u.x-=1,u.textAlign="right";break;case 2:u.y+=o+1,u.x-=1,u.textAlign="right";break;case 3:u.y+=o+1,u.x+=1,u.textAlign="left";break;case 5:u.y-=2*o+2;break;case 6:u.y+=2*o+2;break;case 7:u.x+=a+1,u.textAlign="left";break;case 8:u.x-=a+1,u.textAlign="right"}return t.attr(u),t.getCanvasBBox()}function Vbt(t){if(t.length>4)return[];var e=function(t,e){return[e.x-t.x,e.y-t.y]};return[e(t[0],t[1]),e(t[1],t[2])]}function Gbt(t,e,n){void 0===e&&(e=0),void 0===n&&(n={x:0,y:0});var r=t.x,i=t.y;return{x:(r-n.x)*Math.cos(-e)+(i-n.y)*Math.sin(-e)+n.x,y:(n.x-r)*Math.sin(-e)+(i-n.y)*Math.cos(-e)+n.y}}function Xbt(t){var e=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n=t.rotation;return n?[Gbt(e[0],n,e[0]),Gbt(e[1],n,e[0]),Gbt(e[2],n,e[0]),Gbt(e[3],n,e[0])]:e}function Ybt(t,e){if(t.length>4)return{min:0,max:0};var n=[];return t.forEach((function(t){n.push(function(t,e){return(t[0]||0)*(e[0]||0)+(t[1]||0)*(e[1]||0)+(t[2]||0)*(e[2]||0)}([t.x,t.y],e))})),{min:Math.min.apply(Math,(0,Aut.ev)([],(0,Aut.CR)(n),!1)),max:Math.max.apply(Math,(0,Aut.ev)([],(0,Aut.CR)(n),!1))}}function qbt(t,e){return t.max>e.min&&t.min<e.max}function $bt(t){return["x","y","width","height"].every((function(e){return"number"==typeof(n=t[e])&&!Number.isNaN(n)&&n!==1/0&&n!==-1/0;var n}))}function Jbt(t,e,n){if(void 0===n&&(n=0),!$bt(t)||!$bt(e))return!1;if(!t.rotation&&!e.rotation)return function(t,e,n){return void 0===n&&(n=0),!(e.x>t.x+t.width+n||e.x+e.width<t.x-n||e.y>t.y+t.height+n||e.y+e.height<t.y-n)}(t,e,n);for(var r=Xbt(t),i=Xbt(e),a=Vbt(r).concat(Vbt(i)),o=0;o<a.length;o++){var u=a[o];if(!qbt(Ybt(r,u),Ybt(i,u)))return!1}return!0}var Kbt=function(){function t(t){var e=this;this.queue=[],this.worker=new Worker(t),this.worker.onmessage=function(t){var n;null===(n=e.queue.shift())||void 0===n||n.resolve(t)},this.worker.onmessageerror=function(t){var n;console.warn("[AntV G2] Web worker is not available"),null===(n=e.queue.shift())||void 0===n||n.reject(t)}}return t.prototype.post=function(t,e){var n=this;return new Promise((function(r,i){n.queue.push({resolve:r,reject:i});try{n.worker.postMessage(t)}catch(a){console.warn("[AntV G2] Web worker is not available"),(0,_ut.mf)(e)&&e()}}))},t.prototype.destroy=function(){this.worker.terminate()},t}();var Qbt="\n   self.onmessage = ".concat(function(t){var e=function(){function t(t){if(t.length>4)return[];var e=function(t,e){return[e.x-t.x,e.y-t.y]};return[e(t[0],t[1]),e(t[1],t[2])]}function e(t,e,n){void 0===e&&(e=0),void 0===n&&(n={x:0,y:0});var r=t.x,i=t.y;return{x:(r-n.x)*Math.cos(-e)+(i-n.y)*Math.sin(-e)+n.x,y:(n.x-r)*Math.sin(-e)+(i-n.y)*Math.cos(-e)+n.y}}function n(t){var n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],r=t.rotation;return r?[e(n[0],r,n[0]),e(n[1],r,n[0]),e(n[2],r,n[0]),e(n[3],r,n[0])]:n}function r(t,e){if(t.length>4)return{min:0,max:0};var n=[];return t.forEach((function(t){n.push(function(t,e){return(t[0]||0)*(e[0]||0)+(t[1]||0)*(e[1]||0)+(t[2]||0)*(e[2]||0)}([t.x,t.y],e))})),{min:Math.min.apply(null,n),max:Math.max.apply(null,n)}}function i(t,e){return t.max>e.min&&t.min<e.max}function a(t){return["x","y","width","height"].every((function(e){return"number"==typeof(n=t[e])&&!Number.isNaN(n)&&n!==1/0&&n!==-1/0;var n}))}return{intersect:function(e,o,u){if(void 0===u&&(u=0),!a(e)||!a(o))return!1;if(!e.rotation&&!o.rotation)return function(t,e,n){return void 0===n&&(n=0),!(e.x>t.x+t.width+n||e.x+e.width<t.x-n||e.y>t.y+t.height+n||e.y+e.height<t.y-n)}(e,o,u);for(var s=n(e),l=n(o),c=t(s).concat(t(l)),f=0;f<c.length;f++){var h=c[f];if(!i(r(s,h),r(l,h)))return!1}return!0}}}().intersect;var n={"hide-overlap":function(t){for(var n=t.slice(),r=0;r<n.length;r++){var i=n[r];if(i.visible)for(var a=r+1;a<n.length;a++){var o=n[a];i!==o&&o.visible&&e(i,o)&&(o.visible=!1)}}return n}};try{var r=JSON.parse(t.data);if(!r||!r.type||!n[r.type])return;var i=r.type,a=r.items,o=n[i](a);self.postMessage(o)}catch(t){throw t}}.toString(),"\n"),twt=function(t){for(var e=t.slice(),n=0;n<e.length;n++){var r=e[n];if(r.visible)for(var i=n+1;i<e.length;i++){var a=e[i];r!==a&&a.visible&&Jbt(r,a)&&(a.visible=!1)}}return e},ewt=new Map,nwt=function(t){if("undefined"!=typeof window){var e;try{e=new Blob([t.toString()],{type:"application/javascript"})}catch(n){(e=new window.BlobBuilder).append(t.toString()),e=e.getBlob()}return new Kbt(URL.createObjectURL(e))}}(Qbt);var rwt,iwt={"#5B8FF9":!0};function awt(t,e,n){return!!t.getAdjust("stack")||e.every((function(e,r){var i=n[r];return function(t,e,n){var r=t.coordinate,i=Avt(e),a=Wdt.fromObject(i.getCanvasBBox()),o=Wdt.fromObject(n.getBBox());return r.isTransposed?o.height>=a.height:o.width>=a.width}(t,e,i)}))}function owt(t,e,n){return t.some((function(t){return n(t,e)}))}function uwt(t,e){return owt(t,e,(function(t,e){var n=Avt(t),r=Avt(e);return function(t,e,n){return void 0===n&&(n=0),Math.max(0,Math.min(t.x+t.width+n,e.x+e.width+n)-Math.max(t.x-n,e.x-n))*Math.max(0,Math.min(t.y+t.height+n,e.y+e.height+n)-Math.max(t.y-n,e.y-n))}(n.getCanvasBBox(),r.getCanvasBBox(),2)>0}))}function swt(t,e,n){return t.some((function(t){return n(t,e)}))}function lwt(t,e){return swt(t,e,(function(t,e){var n=Avt(t),r=Avt(e);return function(t,e,n){return void 0===n&&(n=0),Math.max(0,Math.min(t.x+t.width+n,e.x+e.width+n)-Math.max(t.x-n,e.x-n))*Math.max(0,Math.min(t.y+t.height+n,e.y+e.height+n)-Math.max(t.y-n,e.y-n))}(n.getCanvasBBox(),r.getCanvasBBox(),2)>0}))}function cwt(){return rwt||(rwt=document.createElement("canvas").getContext("2d")),rwt}var fwt=(0,_ut.HP)((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant,u=cwt();return u.font=[a,o,i,"".concat(n,"px"),r].join(" "),u.measureText((0,_ut.HD)(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),(0,Aut.ev)([t],(0,Aut.CR)((0,_ut.VO)(e)),!1).join("")}));function hwt(t,e,n,r,i){var a,o,u=n.start,s=n.end,l=n.getWidth(),c=n.getHeight();"y"===i?(a=u.x+l/2,o=r.y<u.y?r.y:u.y):"x"===i?(a=r.x>u.x?r.x:u.x,o=u.y+c/2):"xy"===i&&(n.isPolar?(a=n.getCenter().x,o=n.getCenter().y):(a=(u.x+s.x)/2,o=(u.y+s.y)/2));var f=function(t,e,n){var r,i=(0,Aut.CR)(e,2),a=i[0],o=i[1];return t.applyToMatrix([a,o,1]),"x"===n?(t.setMatrix(Pct.vs(t.getMatrix(),[["t",-a,-o],["s",.01,1],["t",a,o]])),r=Pct.vs(t.getMatrix(),[["t",-a,-o],["s",100,1],["t",a,o]])):"y"===n?(t.setMatrix(Pct.vs(t.getMatrix(),[["t",-a,-o],["s",1,.01],["t",a,o]])),r=Pct.vs(t.getMatrix(),[["t",-a,-o],["s",1,100],["t",a,o]])):"xy"===n&&(t.setMatrix(Pct.vs(t.getMatrix(),[["t",-a,-o],["s",.01,.01],["t",a,o]])),r=Pct.vs(t.getMatrix(),[["t",-a,-o],["s",100,100],["t",a,o]])),r}(t,[a,o],i);t.animate({matrix:f},e)}function dwt(t,e){var n,r=_mt(t,e),i=r.startAngle,a=r.endAngle;return!(0,_ut.vQ)(i,.5*-Math.PI)&&i<.5*-Math.PI&&(i+=2*Math.PI),!(0,_ut.vQ)(a,.5*-Math.PI)&&a<.5*-Math.PI&&(a+=2*Math.PI),0===e[5]&&(i=(n=(0,Aut.CR)([a,i],2))[0],a=n[1]),(0,_ut.vQ)(i,1.5*Math.PI)&&(i=-.5*Math.PI),(0,_ut.vQ)(a,-.5*Math.PI)&&!(0,_ut.vQ)(i,a)&&(a=1.5*Math.PI),{startAngle:i,endAngle:a}}function pwt(t){var e;return"M"===t[0]||"L"===t[0]?e=[t[1],t[2]]:"a"!==t[0]&&"A"!==t[0]&&"C"!==t[0]||(e=[t[t.length-2],t[t.length-1]]),e}function gwt(t){var e,n,r,i=t.filter((function(t){return"A"===t[0]||"a"===t[0]}));if(0===i.length)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var a=i[0],o=i.length>1?i[1]:i[0],u=t.indexOf(a),s=t.indexOf(o),l=pwt(t[u-1]),c=pwt(t[s-1]),f=dwt(l,a),h=f.startAngle,d=f.endAngle,p=dwt(c,o),g=p.startAngle,v=p.endAngle;(0,_ut.vQ)(h,g)&&(0,_ut.vQ)(d,v)?(n=h,r=d):(n=Math.min(h,g),r=Math.max(d,v));var m=a[1],y=i[i.length-1][1];return m<y?(m=(e=(0,Aut.CR)([y,m],2))[0],y=e[1]):m===y&&(y=0),{startAngle:n,endAngle:r,radius:m,innerRadius:y}}function vwt(t,e,n){if(t.isGroup())(0,_ut.S6)(t.getChildren(),(function(t){vwt(t,e,n)}));else{var r=t.getBBox(),i=(r.minX+r.maxX)/2,a=(r.minY+r.maxY)/2;if(t.applyToMatrix([i,a,1]),"zoomIn"===n){var o=Pct.vs(t.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);t.setMatrix(o),t.animate({matrix:Pct.vs(t.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},e)}else t.animate({matrix:Pct.vs(t.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},(0,Aut.pi)((0,Aut.pi)({},e),{callback:function(){t.remove(!0)}}))}}function mwt(t){return[Eut.TOP,Eut.BOTTOM].includes(t)?{offsetX:0,offsetY:t===Eut.TOP?-8:8,style:{textAlign:"center",textBaseline:t===Eut.TOP?"bottom":"top"}}:[Eut.LEFT,Eut.RIGHT].includes(t)?{offsetX:t===Eut.LEFT?-8:8,offsetY:0,style:{textAlign:t===Eut.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function ywt(t,e,n){return{x:t.x+e*Math.cos(n),y:t.y+e*Math.sin(n)}}var xwt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){return(0,_ut.b$)({},t.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.getRegion=function(t,e){var n=2*Math.PI/t,r=-1*Math.PI/2+n*e,i=.5/(1+1/Math.sin(n/2)),a=ywt({x:.5,y:.5},.5-i,r),o=5*Math.PI/4,u=1*Math.PI/4;return{start:ywt(a,i,o),end:ywt(a,i,u)}},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){var e=this,n=this.cfg,r=n.fields,i=n.type,a=(0,Aut.CR)(r,1)[0];if(!a)throw new Error("No `fields` specified!");var o=this.getFieldValues(t,a),u=o.length,s=[];return o.forEach((function(n,r){var l=[{field:a,value:n,values:o}],c=(0,_ut.hX)(t,e.getFacetDataFilter(l)),f={type:i,data:c,region:e.getRegion(u,r),columnValue:n,columnField:a,columnIndex:r,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};s.push(f)})),s},e.prototype.getXAxisOption=function(t,e,n,r){return n},e.prototype.getYAxisOption=function(t,e,n,r){return n},e.prototype.renderTitle=function(){var t=this;(0,_ut.S6)(this.facets,(function(e){var n=e.columnValue,r=e.view,i=(0,_ut.U2)(t.cfg.title,"formatter"),a=(0,_ut.b$)({position:["50%","0%"],content:i?i(n):n},mwt(Eut.TOP),t.cfg.title);r.annotation().text(a)}))},e}(cpt),bwt=xwt,wwt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){return(0,_ut.b$)({},t.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){var e=this,n=this.cfg.fields,r=this.cfg.cols,i=(0,Aut.CR)(n,1)[0];if(!i)throw new Error("No `fields` specified!");var a=this.getFieldValues(t,i),o=a.length;r=r||o;var u=this.getPageCount(o,r),s=[];return a.forEach((function(n,l){var c=e.getRowCol(l,r),f=c.row,h=c.col,d=[{field:i,value:n,values:a}],p=(0,_ut.hX)(t,e.getFacetDataFilter(d)),g={type:e.cfg.type,data:p,region:e.getRegion(u,r,h,f),columnValue:n,rowValue:n,columnField:i,rowField:null,columnIndex:h,rowIndex:f,columnValuesLength:r,rowValuesLength:u,total:o};s.push(g)})),s},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1&&r.columnValuesLength*r.rowIndex+r.columnIndex+1+r.columnValuesLength<=r.total?(0,Aut.pi)((0,Aut.pi)({},n),{label:null,title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.columnIndex?(0,Aut.pi)((0,Aut.pi)({},n),{title:null,label:null}):n},e.prototype.renderTitle=function(){var t=this;(0,_ut.S6)(this.facets,(function(e){var n=e.columnValue,r=e.view,i=(0,_ut.U2)(t.cfg.title,"formatter"),a=(0,_ut.b$)({position:["50%","0%"],content:i?i(n):n},mwt(Eut.TOP),t.cfg.title);r.annotation().text(a)}))},e.prototype.getPageCount=function(t,e){return Math.floor((t+e-1)/e)},e.prototype.getRowCol=function(t,e){return{row:Math.floor(t/e),col:t%e}},e}(cpt),Swt=wwt,kwt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){return(0,_ut.b$)({},t.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,Aut.pi)({},t.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,Aut.pi)({},t.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){for(var e=this.cfg,n=e.fields,r=e.type,i=n.length,a=i,o=[],u=0;u<a;u++)for(var s=n[u],l=0;l<i;l++){var c=n[l],f={type:r,data:t,region:this.getRegion(i,a,u,l),columnValue:s,rowValue:c,columnField:s,rowField:c,columnIndex:u,rowIndex:l,columnValuesLength:a,rowValuesLength:i};o.push(f)}return o},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1?(0,Aut.pi)((0,Aut.pi)({},n),{label:null,title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.columnIndex?(0,Aut.pi)((0,Aut.pi)({},n),{title:null,label:null}):n},e.prototype.renderTitle=function(){var t=this;(0,_ut.S6)(this.facets,(function(e,n){var r=e.columnIndex,i=e.rowIndex,a=e.columnValuesLength,o=(e.rowValuesLength,e.columnValue),u=e.rowValue,s=e.view;if(0===i){var l=(0,_ut.U2)(t.cfg.columnTitle,"formatter"),c=(0,_ut.b$)({position:["50%","0%"],content:l?l(o):o},mwt(Eut.TOP),t.cfg.columnTitle);s.annotation().text(c)}if(r===a-1){l=(0,_ut.U2)(t.cfg.rowTitle,"formatter"),c=(0,_ut.b$)({position:["100%","50%"],content:l?l(u):u},mwt(Eut.RIGHT),t.cfg.rowTitle);s.annotation().text(c)}}))},e}(cpt),Cwt=kwt,Ewt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getDefaultCfg=function(){return(0,_ut.b$)({},t.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this),transpose:!1})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.beforeEachView=function(t,e){this.cfg.transpose?e.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():e.rowIndex%2!=0&&t.coordinate().reflect("y")},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.generateFacets=function(t){var e,n,r=this,i=(0,Aut.CR)(this.cfg.fields,1)[0],a=[],o=1,u=1,s=[""],l=[""];return this.cfg.transpose?(e=i,s=this.getFieldValues(t,e).slice(0,2),o=s.length):(n=i,l=this.getFieldValues(t,n).slice(0,2),u=l.length),s.forEach((function(i,c){l.forEach((function(f,h){var d=[{field:e,value:i,values:s},{field:n,value:f,values:l}],p=(0,_ut.hX)(t,r.getFacetDataFilter(d)),g={type:r.cfg.type,data:p,region:r.getRegion(u,o,c,h),columnValue:i,rowValue:f,columnField:e,rowField:n,columnIndex:c,rowIndex:h,columnValuesLength:o,rowValuesLength:u};a.push(g)}))})),a},e.prototype.getXAxisOption=function(t,e,n,r){return 1===r.columnIndex||1===r.rowIndex?(0,Aut.pi)((0,Aut.pi)({},n),{label:null,title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return n},e.prototype.renderTitle=function(){var t=this;(0,_ut.S6)(this.facets,(function(e,n){var r=e.columnValue,i=e.rowValue,a=e.view,o=(0,_ut.U2)(t.cfg.title,"formatter");if(t.cfg.transpose){var u=(0,_ut.b$)({position:["50%","0%"],content:o?o(r):r},mwt(Eut.TOP),t.cfg.title);a.annotation().text(u)}else{u=(0,_ut.b$)({position:["100%","50%"],content:o?o(i):i},mwt(Eut.RIGHT),t.cfg.title);a.annotation().text(u)}}))},e}(cpt),Mwt=Ewt,Owt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.getDefaultCfg=function(){return(0,_ut.b$)({},t.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,Aut.pi)({},t.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,Aut.pi)({},t.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.generateFacets=function(t){var e=this,n=(0,Aut.CR)(this.cfg.fields,2),r=n[0],i=n[1],a=[],o=1,u=1,s=[""],l=[""];return r&&(s=this.getFieldValues(t,r),o=s.length),i&&(l=this.getFieldValues(t,i),u=l.length),s.forEach((function(n,c){l.forEach((function(f,h){var d=[{field:r,value:n,values:s},{field:i,value:f,values:l}],p=(0,_ut.hX)(t,e.getFacetDataFilter(d)),g={type:e.cfg.type,data:p,region:e.getRegion(u,o,c,h),columnValue:n,rowValue:f,columnField:r,rowField:i,columnIndex:c,rowIndex:h,columnValuesLength:o,rowValuesLength:u};a.push(g)}))})),a},e.prototype.renderTitle=function(){var t=this;(0,_ut.S6)(this.facets,(function(e,n){var r=e.columnIndex,i=e.rowIndex,a=e.columnValuesLength,o=e.columnValue,u=e.rowValue,s=e.view;if(0===i){var l=(0,_ut.U2)(t.cfg.columnTitle,"formatter"),c=(0,_ut.b$)({position:["50%","0%"],content:l?l(o):o},mwt(Eut.TOP),t.cfg.columnTitle);s.annotation().text(c)}if(r===a-1){l=(0,_ut.U2)(t.cfg.rowTitle,"formatter"),c=(0,_ut.b$)({position:["100%","50%"],content:l?l(u):u},mwt(Eut.RIGHT),t.cfg.rowTitle);s.annotation().text(c)}}))},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1?(0,Aut.pi)((0,Aut.pi)({},n),{title:null,label:null}):r.columnIndex!==Math.floor((r.columnValuesLength-1)/2)?(0,Aut.pi)((0,Aut.pi)({},n),{title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.columnIndex?(0,Aut.pi)((0,Aut.pi)({},n),{title:null,label:null}):r.rowIndex!==Math.floor((r.rowValuesLength-1)/2)?(0,Aut.pi)((0,Aut.pi)({},n),{title:null}):n},e}(cpt),Awt=Owt,_wt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.afterChartRender=function(){e.facets&&e.cfg.line&&(e.container.clear(),e.drawLines(e.facets))},e}return(0,Aut.ZT)(e,t),e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.init=function(){t.prototype.init.call(this),this.view.on(Dut.AFTER_RENDER,this.afterChartRender)},e.prototype.getDefaultCfg=function(){return(0,_ut.b$)({},t.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.generateFacets=function(t){if(!this.cfg.fields.length)throw new Error("Please specify for the fields for rootFacet!");var e=[],n={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return e.push(n),n.children=this.getChildFacets(t,1,e),this.setRegion(e),e},e.prototype.setRegion=function(t){var e=this;this.forceColIndex(t),t.forEach((function(t){t.region=e.getRegion(t.rowValuesLength,t.columnValuesLength,t.columnIndex,t.rowIndex)}))},e.prototype.getRegion=function(t,e,n,r){var i=1/e,a=1/t,o={x:i*n,y:a*r};return{start:o,end:{x:o.x+i,y:o.y+2*a/3}}},e.prototype.forceColIndex=function(t){var e,n,r=this,i=[],a=0;t.forEach((function(t){r.isLeaf(t)&&(i.push(t),t.columnIndex=a,a++)})),i.forEach((function(t){t.columnValuesLength=i.length}));for(var o=this.cfg.fields.length-1;o>=0;o--){var u=this.getFacetsByLevel(t,o);try{for(var s=(e=void 0,(0,Aut.XA)(u)),l=s.next();!l.done;l=s.next()){var c=l.value;this.isLeaf(c)||(c.originColIndex=c.columnIndex,c.columnIndex=this.getRegionIndex(c.children),c.columnValuesLength=i.length)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},e.prototype.getFacetsByLevel=function(t,e){var n=[];return t.forEach((function(t){t.rowIndex===e&&n.push(t)})),n},e.prototype.getRegionIndex=function(t){var e=t[0];return(t[t.length-1].columnIndex-e.columnIndex)/2+e.columnIndex},e.prototype.isLeaf=function(t){return!t.children||!t.children.length},e.prototype.getRows=function(){return this.cfg.fields.length+1},e.prototype.getChildFacets=function(t,e,n){var r=this,i=this.cfg.fields;if(!(i.length<e)){var a=[],o=i[e-1],u=this.getFieldValues(t,o);return u.forEach((function(i,s){var l=[{field:o,value:i,values:u}],c=t.filter(r.getFacetDataFilter(l));if(c.length){var f={type:r.cfg.type,data:c,region:null,columnValue:i,rowValue:"",columnField:o,rowField:"",columnIndex:s,rowValuesLength:r.getRows(),columnValuesLength:1,rowIndex:e,children:r.getChildFacets(c,e+1,n)};a.push(f),n.push(f)}})),a}},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.renderTitle=function(){var t=this;(0,_ut.S6)(this.facets,(function(e){var n=e.columnValue,r=e.view,i=(0,_ut.U2)(t.cfg.title,"formatter"),a=(0,_ut.b$)({position:["50%","0%"],content:i?i(n):n},mwt(Eut.TOP),t.cfg.title);r.annotation().text(a)}))},e.prototype.drawLines=function(t){var e=this;t.forEach((function(t){if(!e.isLeaf(t)){var n=t.children;e.addFacetLines(t,n)}}))},e.prototype.addFacetLines=function(t,e){var n=this,r=t.view.coordinateBBox,i={x:r.x+r.width/2,y:r.y+r.height};e.forEach((function(t){var e=t.view.coordinateBBox,r={x:e.bl.x+(e.tr.x-e.bl.x)/2,y:e.tr.y},a={x:i.x,y:i.y+(r.y-i.y)/2},o={x:r.x,y:a.y};n.drawLine([i,a,o,r])}))},e.prototype.getPath=function(t){var e=[];return this.cfg.line.smooth?(e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach((function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},e.prototype.drawLine=function(t){var e=this.getPath(t),n=this.cfg.line.style;this.container.addShape("path",{attrs:(0,_ut.f0)({path:e},n)})},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1?(0,Aut.pi)((0,Aut.pi)({},n),{title:null,label:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.originColIndex&&0!==r.columnIndex?(0,Aut.pi)((0,Aut.pi)({},n),{title:null,label:null}):n},e}(cpt),Dwt=_wt;function Twt(t){var e=(0,Aut.ev)([],(0,Aut.CR)(t),!1);e.sort((function(t,e){return t-e}));var n=e.length;return 0===n?0:n%2==1?e[(n-1)/2]:(e[n/2]+e[n/2-1])/2}function Fwt(t,e){if(!e)return null;var n;switch(t){case"start":return 0;case"center":return.5;case"end":return 1;case"median":n=e.isCategory?Twt(e.values.map((function(t,e){return e}))):Twt(e.values);break;case"mean":n=e.isCategory?(e.values.length-1)/2:function(t){var e=(0,_ut.u4)(t,(function(t,e){return t+(isNaN(e)||!(0,_ut.hj)(e)?0:e)}),0);return 0===t.length?0:e/t.length}(e.values);break;case"min":n=e.isCategory?0:e[t];break;case"max":n=e.isCategory?e.values.length-1:e[t];break;default:n=t}return e.scale(n)}var Iwt=["regionFilter","shape"],Pwt=function(t){function e(e){var n=t.call(this,e)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(Cut.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(Cut.BG).addGroup(),n.option=[],n}return(0,Aut.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.layout=function(){this.update()},e.prototype.render=function(){},e.prototype.update=function(){var t=this;this.onAfterRender((function(){var e=new Map;(0,_ut.S6)(t.option,(function(n){if((0,_ut.q9)(Iwt,n.type)){var r=t.updateOrCreate(n);r&&e.set(t.getCacheKey(n),r)}})),t.cache=t.syncCache(e)}));var e=new Map;(0,_ut.S6)(this.option,(function(n){if(!(0,_ut.q9)(Iwt,n.type)){var r=t.updateOrCreate(n);r&&e.set(t.getCacheKey(n),r)}})),this.cache=this.syncCache(e)},e.prototype.clear=function(e){void 0===e&&(e=!1),t.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),e&&(this.option=[])},e.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach((function(e){t.push(e)})),t},e.prototype.clearComponents=function(){this.getComponents().forEach((function(t){t.component.destroy()})),this.cache.clear()},e.prototype.onAfterRender=function(t){var e=!1;this.view.getOptions().animate&&this.view.geometries.forEach((function(n){n.animateOption&&(n.once(Tut.AFTER_DRAW_ANIMATE,(function(){t()})),e=!0)})),e||this.view.getRootView().once(Dut.AFTER_RENDER,(function(){t()}))},e.prototype.createAnnotation=function(t){var e=t.type,n=w[(0,_ut.jC)(e)];if(n){var r=this.getAnnotationTheme(e),i=this.getAnnotationCfg(e,t,r);return i?{component:new n(i),layer:this.isTop(i)?Cut.FORE:Cut.BG,direction:Eut.NONE,type:Mut.ANNOTATION,extra:t}:null}},e.prototype.annotation=function(t){this.option.push(t)},e.prototype.arc=function(t){return this.annotation((0,Aut.pi)({type:"arc"},t)),this},e.prototype.image=function(t){return this.annotation((0,Aut.pi)({type:"image"},t)),this},e.prototype.line=function(t){return this.annotation((0,Aut.pi)({type:"line"},t)),this},e.prototype.region=function(t){return this.annotation((0,Aut.pi)({type:"region"},t)),this},e.prototype.text=function(t){return this.annotation((0,Aut.pi)({type:"text"},t)),this},e.prototype.dataMarker=function(t){return this.annotation((0,Aut.pi)({type:"dataMarker"},t)),this},e.prototype.dataRegion=function(t){this.annotation((0,Aut.pi)({type:"dataRegion"},t))},e.prototype.regionFilter=function(t){this.annotation((0,Aut.pi)({type:"regionFilter"},t))},e.prototype.shape=function(t){this.annotation((0,Aut.pi)({type:"shape"},t))},e.prototype.html=function(t){this.annotation((0,Aut.pi)({type:"html"},t))},e.prototype.parsePosition=function(t){var e,n,r=this.view.getXScale(),i=this.view.getScalesByDim("y"),a=(0,_ut.mf)(t)?t.call(null,r,i):t,o=0,u=0;if((0,_ut.kJ)(a)){var s=(0,Aut.CR)(a,2),l=s[0],c=s[1];if((0,_ut.HD)(l)&&-1!==l.indexOf("%")&&!isNaN(l.slice(0,-1)))return this.parsePercentPosition(a);o=Fwt(l,r),u=Fwt(c,Object.values(i)[0])}else if(!(0,_ut.UM)(a))try{for(var f=(0,Aut.XA)((0,_ut.XP)(a)),h=f.next();!h.done;h=f.next()){var d=h.value,p=a[d];d===r.field&&(o=Fwt(p,r)),i[d]&&(u=Fwt(p,i[d]))}}catch(g){e={error:g}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return isNaN(o)||isNaN(u)?null:this.view.getCoordinate().convert({x:o,y:u})},e.prototype.getRegionPoints=function(t,e){var n,r=this,i=this.view.getXScale(),a=this.view.getScalesByDim("y"),o=Object.values(a)[0],u=i.field,s=this.view.getData(),l=(0,_ut.kJ)(t)?t[0]:t[u],c=(0,_ut.kJ)(e)?e[0]:e[u],f=[];return(0,_ut.S6)(s,(function(t,e){if(t[u]===l&&(n=e),e>=n){var i=r.parsePosition([t[u],t[o.field]]);i&&f.push(i)}if(t[u]===c)return!1})),f},e.prototype.parsePercentPosition=function(t){var e=parseFloat(t[0])/100,n=parseFloat(t[1])/100,r=this.view.getCoordinate(),i=r.start,a=r.end,o=Math.min(i.x,a.x),u=Math.min(i.y,a.y);return{x:r.getWidth()*e+o,y:r.getHeight()*n+u}},e.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),e=t.start,n=t.end,r=t.getWidth(),i=t.getHeight(),a={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y)};return{x:a.x,y:a.y,minX:a.x,minY:a.y,maxX:a.x+r,maxY:a.y+i,width:r,height:i}},e.prototype.getAnnotationCfg=function(t,e,n){var r=this,i=this.view.getCoordinate(),a=this.view.getCanvas(),o={};if((0,_ut.UM)(e))return null;var u=e.start,s=e.end,l=e.position,c=this.parsePosition(u),f=this.parsePosition(s),h=this.parsePosition(l);if(!(!["arc","image","line","region","regionFilter"].includes(t)||c&&f))return null;if(["text","dataMarker","html"].includes(t)&&!h)return null;if("arc"===t){var d=e,p=(d.start,d.end,(0,Aut._T)(d,["start","end"])),g=Xdt(i,c),v=Xdt(i,f);g>v&&(v=2*Math.PI+v),o=(0,Aut.pi)((0,Aut.pi)({},p),{center:i.getCenter(),radius:Gdt(i,c),startAngle:g,endAngle:v})}else if("image"===t){var m=e;m.start,m.end,p=(0,Aut._T)(m,["start","end"]);o=(0,Aut.pi)((0,Aut.pi)({},p),{start:c,end:f,src:e.src})}else if("line"===t){var y=e;y.start,y.end,p=(0,Aut._T)(y,["start","end"]);o=(0,Aut.pi)((0,Aut.pi)({},p),{start:c,end:f,text:(0,_ut.U2)(e,"text",null)})}else if("region"===t){var x=e;x.start,x.end,p=(0,Aut._T)(x,["start","end"]);o=(0,Aut.pi)((0,Aut.pi)({},p),{start:c,end:f})}else if("text"===t){var b=this.view.getData(),w=e,S=(w.position,w.content),k=(p=(0,Aut._T)(w,["position","content"]),S);(0,_ut.mf)(S)&&(k=S(b)),o=(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},h),p),{content:k})}else if("dataMarker"===t){var C=e,E=(C.position,C.point),M=C.line,O=C.text,A=C.autoAdjust,_=C.direction;p=(0,Aut._T)(C,["position","point","line","text","autoAdjust","direction"]);o=(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},p),h),{coordinateBBox:this.getCoordinateBBox(),point:E,line:M,text:O,autoAdjust:A,direction:_})}else if("dataRegion"===t){var D=e,T=D.start,F=D.end,I=D.region,P=(O=D.text,D.lineLength);p=(0,Aut._T)(D,["start","end","region","text","lineLength"]);o=(0,Aut.pi)((0,Aut.pi)({},p),{points:this.getRegionPoints(T,F),region:I,text:O,lineLength:P})}else if("regionFilter"===t){var j=e,B=(j.start,j.end,j.apply),L=j.color,R=(p=(0,Aut._T)(j,["start","end","apply","color"]),this.view.geometries),Z=[],N=function t(e){e&&(e.isGroup()?e.getChildren().forEach((function(e){return t(e)})):Z.push(e))};(0,_ut.S6)(R,(function(t){B?(0,_ut.FX)(B,t.type)&&(0,_ut.S6)(t.elements,(function(t){N(t.shape)})):(0,_ut.S6)(t.elements,(function(t){N(t.shape)}))})),o=(0,Aut.pi)((0,Aut.pi)({},p),{color:L,shapes:Z,start:c,end:f})}else if("shape"===t){var z=e,U=z.render,H=(0,Aut._T)(z,["render"]);o=(0,Aut.pi)((0,Aut.pi)({},H),{render:function(t){if((0,_ut.mf)(e.render))return U(t,r.view,{parsePosition:r.parsePosition.bind(r)})}})}else if("html"===t){var W=e,V=W.html;W.position,H=(0,Aut._T)(W,["html","position"]);o=(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},H),h),{parent:a.get("el").parentNode,html:function(t){return(0,_ut.mf)(V)?V(t,r.view):V}})}var G=(0,_ut.b$)({},n,(0,Aut.pi)((0,Aut.pi)({},o),{top:e.top,style:e.style,offsetX:e.offsetX,offsetY:e.offsetY}));return"html"!==t&&(G.container=this.getComponentContainer(G)),G.animate=this.view.getOptions().animate&&G.animate&&(0,_ut.U2)(e,"animate",G.animate),G.animateOption=(0,_ut.b$)({},nvt,G.animateOption,e.animateOption),G},e.prototype.isTop=function(t){return(0,_ut.U2)(t,"top",!0)},e.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},e.prototype.getAnnotationTheme=function(t){return(0,_ut.U2)(this.view.getTheme(),["components","annotation",t],{})},e.prototype.updateOrCreate=function(t){var e=this.cache.get(this.getCacheKey(t));if(e){var n=t.type,r=this.getAnnotationTheme(n),i=this.getAnnotationCfg(n,t,r);i&&Udt(i,["container"]),e.component.update((0,Aut.pi)((0,Aut.pi)({},i||{}),{visible:!!i})),(0,_ut.q9)(Iwt,t.type)&&e.component.render()}else(e=this.createAnnotation(t))&&(e.component.init(),(0,_ut.q9)(Iwt,t.type)&&e.component.render());return e},e.prototype.syncCache=function(t){var e=this,n=new Map(this.cache);return t.forEach((function(t,e){n.set(e,t)})),n.forEach((function(t,r){(0,_ut.sE)(e.option,(function(t){return r===e.getCacheKey(t)}))||(t.component.destroy(),n.delete(r))})),n},e.prototype.getCacheKey=function(t){return t},e}($gt),jwt=Pwt;function Bwt(t,e){var n=(0,_ut.b$)({},(0,_ut.U2)(t,["components","axis","common"]),(0,_ut.U2)(t,["components","axis",e]));return(0,_ut.U2)(n,["grid"],{})}function Lwt(t,e,n,r){var i=[],a=e.getTicks();return t.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce((function(e,a,o){var u=a.value;if(r)i.push({points:[t.convert("y"===n?{x:0,y:u}:{x:u,y:0}),t.convert("y"===n?{x:1,y:u}:{x:u,y:1})]});else if(o){var s=(e.value+u)/2;i.push({points:[t.convert("y"===n?{x:0,y:s}:{x:s,y:0}),t.convert("y"===n?{x:1,y:s}:{x:s,y:1})]})}return a}),a[0]),i}function Rwt(t,e,n,r,i){var a=e.values.length,o=[],u=n.getTicks();return u.reduce((function(e,n){var u=e?e.value:n.value,s=n.value,l=(u+s)/2;return"x"===i?o.push({points:[t.convert({x:r?s:l,y:0}),t.convert({x:r?s:l,y:1})]}):o.push({points:(0,_ut.UI)(Array(a+1),(function(e,n){return t.convert({x:n/a,y:r?s:l})}))}),n}),u[0]),o}function Zwt(t,e){var n=(0,_ut.U2)(e,"grid");if(null===n)return!1;var r=(0,_ut.U2)(t,"grid");return!(void 0===n&&null===r)}var Nwt=["container"],zwt=(0,Aut.pi)((0,Aut.pi)({},nvt),{appear:null}),Uwt=function(t){function e(e){var n=t.call(this,e)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(Cut.BG).addGroup(),n.gridForeContainer=n.view.getLayer(Cut.FORE).addGroup(),n.axisContainer=n.view.getLayer(Cut.BG).addGroup(),n.axisForeContainer=n.view.getLayer(Cut.FORE).addGroup(),n}return(0,Aut.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this,e=this.view.getCoordinate();(0,_ut.S6)(this.getComponents(),(function(n){var r,i=n.component,a=n.direction,o=n.type,u=n.extra,s=u.dim,l=u.scale,c=u.alignTick;if(o===Mut.AXIS)e.isPolar?"x"===s?r=e.isTransposed?ept(e,a):opt(e):"y"===s&&(r=e.isTransposed?opt(e):ept(e,a)):r=ept(e,a);else if(o===Mut.GRID)if(e.isPolar){r={items:e.isTransposed?"x"===s?Rwt(e,t.view.getYScales()[0],l,c,s):Lwt(e,l,s,c):"x"===s?Lwt(e,l,s,c):Rwt(e,t.view.getXScale(),l,c,s),center:t.view.getCoordinate().getCenter()}}else r={items:Lwt(e,l,s,c)};i.update(r)}))},e.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var e=new Map;this.cache.forEach((function(n,r){t.has(r)?e.set(r,n):n.component.destroy()})),this.cache=e},e.prototype.clear=function(){t.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach((function(e){t.push(e)})),t},e.prototype.updateXAxes=function(t){var e=this.view.getXScale();if(e&&!e.isIdentity){var n=upt(this.option,e.field);if(!1!==n){var r=spt(n,Eut.BOTTOM),i=Cut.BG,a="x",o=this.view.getCoordinate(),u=this.getId("axis",e.field),s=this.getId("grid",e.field);if(o.isRect){if(l=this.cache.get(u))Udt(f=this.getLineAxisCfg(e,n,r),Nwt),l.component.update(f),t.set(u,l);else l=this.createLineAxis(e,n,i,r,a),this.cache.set(u,l),t.set(u,l);if(c=this.cache.get(s))Udt(f=this.getLineGridCfg(e,n,r,a),Nwt),c.component.update(f),t.set(s,c);else(c=this.createLineGrid(e,n,i,r,a))&&(this.cache.set(s,c),t.set(s,c))}else if(o.isPolar){var l,c;if(l=this.cache.get(u)){Udt(f=o.isTransposed?this.getLineAxisCfg(e,n,Eut.RADIUS):this.getCircleAxisCfg(e,n,r),Nwt),l.component.update(f),t.set(u,l)}else{if(o.isTransposed){if((0,_ut.o8)(n))return;l=this.createLineAxis(e,n,i,Eut.RADIUS,a)}else l=this.createCircleAxis(e,n,i,r,a);this.cache.set(u,l),t.set(u,l)}if(c=this.cache.get(s)){var f;Udt(f=o.isTransposed?this.getCircleGridCfg(e,n,Eut.RADIUS,a):this.getLineGridCfg(e,n,Eut.CIRCLE,a),Nwt),c.component.update(f),t.set(s,c)}else{if(o.isTransposed){if((0,_ut.o8)(n))return;c=this.createCircleGrid(e,n,i,Eut.RADIUS,a)}else c=this.createLineGrid(e,n,i,Eut.CIRCLE,a);c&&(this.cache.set(s,c),t.set(s,c))}}}}},e.prototype.updateYAxes=function(t){var e=this,n=this.view.getYScales();(0,_ut.S6)(n,(function(n,r){if(n&&!n.isIdentity){var i=n.field,a=upt(e.option,i);if(!1!==a){var o=Cut.BG,u="y",s=e.getId("axis",i),l=e.getId("grid",i),c=e.view.getCoordinate();if(c.isRect){var f=spt(a,0===r?Eut.LEFT:Eut.RIGHT);if(h=e.cache.get(s))Udt(p=e.getLineAxisCfg(n,a,f),Nwt),h.component.update(p),t.set(s,h);else h=e.createLineAxis(n,a,o,f,u),e.cache.set(s,h),t.set(s,h);if(d=e.cache.get(l))Udt(p=e.getLineGridCfg(n,a,f,u),Nwt),d.component.update(p),t.set(l,d);else(d=e.createLineGrid(n,a,o,f,u))&&(e.cache.set(l,d),t.set(l,d))}else if(c.isPolar){var h,d;if(h=e.cache.get(s)){Udt(p=c.isTransposed?e.getCircleAxisCfg(n,a,Eut.CIRCLE):e.getLineAxisCfg(n,a,Eut.RADIUS),Nwt),h.component.update(p),t.set(s,h)}else{if(c.isTransposed){if((0,_ut.o8)(a))return;h=e.createCircleAxis(n,a,o,Eut.CIRCLE,u)}else h=e.createLineAxis(n,a,o,Eut.RADIUS,u);e.cache.set(s,h),t.set(s,h)}if(d=e.cache.get(l)){var p;Udt(p=c.isTransposed?e.getLineGridCfg(n,a,Eut.CIRCLE,u):e.getCircleGridCfg(n,a,Eut.RADIUS,u),Nwt),d.component.update(p),t.set(l,d)}else{if(c.isTransposed){if((0,_ut.o8)(a))return;d=e.createLineGrid(n,a,o,Eut.CIRCLE,u)}else d=e.createCircleGrid(n,a,o,Eut.RADIUS,u);d&&(e.cache.set(l,d),t.set(l,d))}}}}}))},e.prototype.createLineAxis=function(t,e,n,r,i){var a={component:new Odt(this.getLineAxisCfg(t,e,r)),layer:n,direction:r===Eut.RADIUS?Eut.NONE:r,type:Mut.AXIS,extra:{dim:i,scale:t}};return a.component.set("field",t.field),a.component.init(),a},e.prototype.createLineGrid=function(t,e,n,r,i){var a=this.getLineGridCfg(t,e,r,i);if(a){var o={component:new _dt(a),layer:n,direction:Eut.NONE,type:Mut.GRID,extra:{dim:i,scale:t,alignTick:(0,_ut.U2)(a,"alignTick",!0)}};return o.component.init(),o}},e.prototype.createCircleAxis=function(t,e,n,r,i){var a={component:new Adt(this.getCircleAxisCfg(t,e,r)),layer:n,direction:r,type:Mut.AXIS,extra:{dim:i,scale:t}};return a.component.set("field",t.field),a.component.init(),a},e.prototype.createCircleGrid=function(t,e,n,r,i){var a=this.getCircleGridCfg(t,e,r,i);if(a){var o={component:new Ddt(a),layer:n,direction:Eut.NONE,type:Mut.GRID,extra:{dim:i,scale:t,alignTick:(0,_ut.U2)(a,"alignTick",!0)}};return o.component.init(),o}},e.prototype.getLineAxisCfg=function(t,e,n){var r=(0,_ut.U2)(e,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=ept(i,n),o=lpt(t,e),u=ipt(this.view.getTheme(),n),s=(0,_ut.U2)(e,["title"])?(0,_ut.b$)({title:{style:{text:o}}},{title:apt(this.view.getTheme(),n,e.title)},e):e,l=(0,_ut.b$)((0,Aut.pi)((0,Aut.pi)({container:r},a),{ticks:t.getTicks().map((function(t){return{id:"".concat(t.tickValue),name:t.text,value:t.value}})),verticalFactor:i.isPolar?-1*rpt(a,i.getCenter()):rpt(a,i.getCenter()),theme:u}),u,s),c=this.getAnimateCfg(l),f=c.animate,h=c.animateOption;l.animateOption=h,l.animate=f;var d=npt(a),p=(0,_ut.U2)(l,"verticalLimitLength",d?1/3:.5);if(p<=1){var g=this.view.getCanvas().get("width"),v=this.view.getCanvas().get("height");l.verticalLimitLength=p*(d?g:v)}return l},e.prototype.getLineGridCfg=function(t,e,n,r){if(Zwt(ipt(this.view.getTheme(),n),e)){var i=Bwt(this.view.getTheme(),n),a=(0,_ut.b$)({container:(0,_ut.U2)(e,["top"])?this.gridForeContainer:this.gridContainer},i,(0,_ut.U2)(e,"grid"),this.getAnimateCfg(e));return a.items=Lwt(this.view.getCoordinate(),t,r,(0,_ut.U2)(a,"alignTick",!0)),a}},e.prototype.getCircleAxisCfg=function(t,e,n){var r=(0,_ut.U2)(e,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),a=t.getTicks().map((function(t){return{id:"".concat(t.tickValue),name:t.text,value:t.value}}));t.isCategory||Math.abs(i.endAngle-i.startAngle)!==2*Math.PI||a.pop();var o=lpt(t,e),u=ipt(this.view.getTheme(),Eut.CIRCLE),s=(0,_ut.U2)(e,["title"])?(0,_ut.b$)({title:{style:{text:o}}},{title:apt(this.view.getTheme(),n,e.title)},e):e,l=(0,_ut.b$)((0,Aut.pi)((0,Aut.pi)({container:r},opt(this.view.getCoordinate())),{ticks:a,verticalFactor:1,theme:u}),u,s),c=this.getAnimateCfg(l),f=c.animate,h=c.animateOption;return l.animate=f,l.animateOption=h,l},e.prototype.getCircleGridCfg=function(t,e,n,r){if(Zwt(ipt(this.view.getTheme(),n),e)){var i=Bwt(this.view.getTheme(),Eut.RADIUS),a=(0,_ut.b$)({container:(0,_ut.U2)(e,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},i,(0,_ut.U2)(e,"grid"),this.getAnimateCfg(e)),o=(0,_ut.U2)(a,"alignTick",!0),u="x"===r?this.view.getYScales()[0]:this.view.getXScale();return a.items=Rwt(this.view.getCoordinate(),u,t,o,r),a}},e.prototype.getId=function(t,e){var n=this.view.getCoordinate();return"".concat(t,"-").concat(e,"-").concat(n.type)},e.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&(0,_ut.U2)(t,"animate"),animateOption:t&&t.animateOption?(0,_ut.b$)({},zwt,t.animateOption):zwt}},e}($gt),Hwt=Uwt;function Wwt(t,e,n){return n===Eut.TOP?[t.minX+t.width/2-e.width/2,t.minY]:n===Eut.BOTTOM?[t.minX+t.width/2-e.width/2,t.maxY-e.height]:n===Eut.LEFT?[t.minX,t.minY+t.height/2-e.height/2]:n===Eut.RIGHT?[t.maxX-e.width,t.minY+t.height/2-e.height/2]:n===Eut.TOP_LEFT||n===Eut.LEFT_TOP?[t.tl.x,t.tl.y]:n===Eut.TOP_RIGHT||n===Eut.RIGHT_TOP?[t.tr.x-e.width,t.tr.y]:n===Eut.BOTTOM_LEFT||n===Eut.LEFT_BOTTOM?[t.bl.x,t.bl.y-e.height]:n===Eut.BOTTOM_RIGHT||n===Eut.RIGHT_BOTTOM?[t.br.x-e.width,t.br.y-e.height]:[0,0]}function Vwt(t,e){return(0,_ut.jn)(t)?!1!==t&&{}:(0,_ut.U2)(t,[e],t)}function Gwt(t){return(0,_ut.U2)(t,"position",Eut.BOTTOM)}var Xwt=function(t){function e(e){var n=t.call(this,e)||this;return n.container=n.view.getLayer(Cut.FORE).addGroup(),n}return(0,Aut.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,(0,_ut.S6)(this.components,(function(e){var n=e.component,r=e.direction,i=zvt(r),a=n.get("maxWidthRatio"),o=n.get("maxHeightRatio"),u=t.getCategoryLegendSizeCfg(i,a,o),s=n.get("maxWidth"),l=n.get("maxHeight");n.update({maxWidth:Math.min(u.maxWidth,s||0),maxHeight:Math.min(u.maxHeight,l||0)});var c=n.get("padding"),f=n.getLayoutBBox(),h=new Wdt(f.x,f.y,f.width,f.height).expand(c),d=(0,Aut.CR)(Wwt(t.view.viewBBox,h,r),2),p=d[0],g=d[1],v=(0,Aut.CR)(Wwt(t.layoutBBox,h,r),2),m=v[0],y=v[1],x=0,b=0;r.startsWith("top")||r.startsWith("bottom")?(x=p,b=y):(x=m,b=g),n.setLocation({x:x+c[3],y:b+c[0]}),t.layoutBBox=t.layoutBBox.cut(h,r)}))},e.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var e={};if((0,_ut.U2)(this.option,"custom")){var n="global-custom",r=this.getComponentById(n);if(r){var i=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Udt(i,["container"]),r.component.update(i),e[n]=!0}else{var a=this.createCustomLegend(void 0,void 0,void 0,this.option);if(a){a.init();var o=Cut.FORE,u=Gwt(this.option);this.components.push({id:n,component:a,layer:o,direction:u,type:Mut.LEGEND,extra:void 0}),e[n]=!0}}}else this.loopLegends((function(n,r,i){var a=t.getId(i.field),o=t.getComponentById(a);if(o){var u=void 0,s=Vwt(t.option,i.field);!1!==s&&((0,_ut.U2)(s,"custom")?u=t.getCategoryCfg(n,r,i,s,!0):i.isLinear?u=t.getContinuousCfg(n,r,i,s):i.isCategory&&(u=t.getCategoryCfg(n,r,i,s))),u&&(Udt(u,["container"]),o.direction=Gwt(s),o.component.update(u),e[a]=!0)}else{var l=t.createFieldLegend(n,r,i);l&&(l.component.init(),t.components.push(l),e[a]=!0)}}));var s=[];(0,_ut.S6)(this.getComponents(),(function(t){e[t.id]?s.push(t):t.component.destroy()})),this.components=s},e.prototype.clear=function(){t.prototype.clear.call(this),this.container.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.container.remove(!0)},e.prototype.getGeometries=function(t){var e=this,n=t.geometries;return(0,_ut.S6)(t.views,(function(t){n=n.concat(e.getGeometries(t))})),n},e.prototype.loopLegends=function(t){if(this.view.getRootView()===this.view){var e=this.getGeometries(this.view),n={};(0,_ut.S6)(e,(function(e){var r=e.getGroupAttributes();(0,_ut.S6)(r,(function(r){var i=r.getScale(r.type);i&&"identity"!==i.type&&!n[i.field]&&(t(e,r,i),n[i.field]=!0)}))}))}},e.prototype.createFieldLegend=function(t,e,n){var r,i=Vwt(this.option,n.field),a=Cut.FORE,o=Gwt(i);if(!1!==i&&((0,_ut.U2)(i,"custom")?r=this.createCustomLegend(t,e,n,i):n.isLinear?r=this.createContinuousLegend(t,e,n,i):n.isCategory&&(r=this.createCategoryLegend(t,e,n,i))),r)return r.set("field",n.field),{id:this.getId(n.field),component:r,layer:a,direction:o,type:Mut.LEGEND,extra:{scale:n}}},e.prototype.createCustomLegend=function(t,e,n,r){var i=this.getCategoryCfg(t,e,n,r,!0);return new Tdt(i)},e.prototype.createContinuousLegend=function(t,e,n,r){var i=this.getContinuousCfg(t,e,n,Udt(r,["value"]));return new Fdt(i)},e.prototype.createCategoryLegend=function(t,e,n,r){var i=this.getCategoryCfg(t,e,n,r);return new Tdt(i)},e.prototype.getContinuousCfg=function(t,e,n,r){var i=n.getTicks(),a=(0,_ut.sE)(i,(function(t){return 0===t.value})),o=(0,_ut.sE)(i,(function(t){return 1===t.value})),u=i.map((function(t){var r=t.value,i=t.tickValue,a=e.mapping(n.invert(r)).join("");return{value:i,attrValue:a,color:a,scaleValue:r}}));a||u.push({value:n.min,attrValue:e.mapping(n.invert(0)).join(""),color:e.mapping(n.invert(0)).join(""),scaleValue:0}),o||u.push({value:n.max,attrValue:e.mapping(n.invert(1)).join(""),color:e.mapping(n.invert(1)).join(""),scaleValue:1}),u.sort((function(t,e){return t.value-e.value}));var s={min:(0,_ut.YM)(u).value,max:(0,_ut.Z$)(u).value,colors:[],rail:{type:e.type},track:{}};"size"===e.type&&(s.track={style:{fill:"size"===e.type?this.view.getTheme().defaultColor:void 0}}),"color"===e.type&&(s.colors=u.map((function(t){return t.attrValue})));var l=this.container,c=zvt(Gwt(r)),f=(0,_ut.U2)(r,"title");return f&&(f=(0,_ut.b$)({text:Kdt(n)},f)),s.container=l,s.layout=c,s.title=f,s.animateOption=nvt,this.mergeLegendCfg(s,r,"continuous")},e.prototype.getCategoryCfg=function(t,e,n,r,i){var a=this.container,o=(0,_ut.U2)(r,"position",Eut.BOTTOM),u=Hvt(this.view.getTheme(),o),s=(0,_ut.U2)(u,["marker"]),l=(0,_ut.U2)(r,"marker"),c=zvt(o),f=(0,_ut.U2)(u,["pageNavigator"]),h=(0,_ut.U2)(r,"pageNavigator"),d=i?function(t,e,n){return n.map((function(n,r){var i=e;(0,_ut.mf)(i)&&(i=i(n.name,r,(0,_ut.b$)({},t,n)));var a=(0,_ut.mf)(n.marker)?n.marker(n.name,r,(0,_ut.b$)({},t,n)):n.marker,o=(0,_ut.b$)({},t,i,a);return Nvt(o),n.marker=o,n}))}(s,l,r.items):Uvt(this.view,t,e,s,l),p=(0,_ut.U2)(r,"title");p&&(p=(0,_ut.b$)({text:n?Kdt(n):""},p));var g=(0,_ut.U2)(r,"maxWidthRatio"),v=(0,_ut.U2)(r,"maxHeightRatio"),m=this.getCategoryLegendSizeCfg(c,g,v);m.container=a,m.layout=c,m.items=d,m.title=p,m.animateOption=nvt,m.pageNavigator=(0,_ut.b$)({},f,h);var y=this.mergeLegendCfg(m,r,o);y.reversed&&y.items.reverse();var x=(0,_ut.U2)(y,"maxItemWidth");return x&&x<=1&&(y.maxItemWidth=this.view.viewBBox.width*x),y},e.prototype.mergeLegendCfg=function(t,e,n){var r=n.split("-")[0],i=Hvt(this.view.getTheme(),r);return(0,_ut.b$)({},i,t,e)},e.prototype.getId=function(t){return"".concat(this.name,"-").concat(t)},e.prototype.getComponentById=function(t){return(0,_ut.sE)(this.components,(function(e){return e.id===t}))},e.prototype.getCategoryLegendSizeCfg=function(t,e,n){void 0===e&&(e=.25),void 0===n&&(n=.25);var r=this.view.viewBBox,i=r.width,a=r.height;return"vertical"===t?{maxWidth:i*e,maxHeight:a}:{maxWidth:i,maxHeight:a*n}},e}($gt),Ywt=Xwt,qwt=function(t){function e(e){var n=t.call(this,e)||this;return n.onChangeFn=_ut.ZT,n.resetMeasure=function(){n.clear()},n.onValueChange=function(t){var e=(0,Aut.CR)(t,2),r=e[0],i=e[1];n.start=r,n.end=i,n.changeViewData(r,i)},n.container=n.view.getLayer(Cut.FORE).addGroup(),n.onChangeFn=(0,_ut.P2)(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(Dut.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(Dut.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return(0,Aut.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.off(Dut.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Dut.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),e=t.start,n=t.end;(0,_ut.UM)(this.start)&&(this.start=e,this.end=n);var r=this.view.getOptions().data;this.option&&!(0,_ut.xb)(r)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout((function(){t.view.destroyed||t.changeViewData(t.start,t.end)}),0)),this.slider){var e=this.view.coordinateBBox.width,n=this.slider.component.get("padding"),r=(0,Aut.CR)(n,4),i=r[0],a=(r[1],r[2],r[3]),o=this.slider.component.getLayoutBBox(),u=new Wdt(o.x,o.y,Math.min(o.width,e),o.height).expand(n),s=this.getMinMaxText(this.start,this.end),l=s.minText,c=s.maxText,f=(0,Aut.CR)(Wwt(this.view.viewBBox,u,Eut.BOTTOM),2),h=(f[0],f[1]),d=(0,Aut.CR)(Wwt(this.view.coordinateBBox,u,Eut.BOTTOM),2),p=d[0];d[1];this.slider.component.update((0,Aut.pi)((0,Aut.pi)({},this.getSliderCfg()),{x:p+a,y:h+i,width:this.width,start:this.start,end:this.end,minText:l,maxText:c})),this.view.viewBBox=this.view.viewBBox.cut(u,Eut.BOTTOM)}},e.prototype.update=function(){this.render()},e.prototype.createSlider=function(){var t=this.getSliderCfg(),e=new kdt((0,Aut.pi)({container:this.container},t));return e.init(),{component:e,layer:Cut.FORE,direction:Eut.BOTTOM,type:Mut.SLIDER}},e.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var e=this.getMinMaxText(this.start,this.end),n=e.minText,r=e.maxText;t=(0,Aut.pi)((0,Aut.pi)({},t),{width:this.width,start:this.start,end:this.end,minText:n,maxText:r})}return this.slider.component.update(t),this.slider},e.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},e.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if((0,_ut.Kn)(this.option)){var e=(0,Aut.pi)({data:this.getData()},(0,_ut.U2)(this.option,"trendCfg",{}));t=(0,_ut.b$)({},t,this.getThemeOptions(),this.option),t=(0,Aut.pi)((0,Aut.pi)({},t),{trendCfg:e})}return t.start=(0,_ut.uZ)(Math.min((0,_ut.UM)(t.start)?0:t.start,(0,_ut.UM)(t.end)?1:t.end),0,1),t.end=(0,_ut.uZ)(Math.max((0,_ut.UM)(t.start)?0:t.start,(0,_ut.UM)(t.end)?1:t.end),0,1),t},e.prototype.getData=function(){var t=this.view.getOptions().data,e=(0,Aut.CR)(this.view.getYScales(),1)[0],n=this.view.getGroupScales();if(n.length){var r=n[0],i=r.field,a=r.ticks;return t.reduce((function(t,n){return n[i]===a[0]&&t.push(n[e.field]),t}),[])}return t.map((function(t){return t[e.field]||0}))},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,_ut.U2)(t,["components","slider","common"],{})},e.prototype.getMinMaxText=function(t,e){var n=this.view.getOptions().data,r=this.view.getXScale(),i=(0,_ut.I)(n,r.field);r.isLinear&&(i=i.sort());var a=i,o=(0,_ut.dp)(n);if(!r||!o)return{};var u=(0,_ut.dp)(a),s=Math.round(t*(u-1)),l=Math.round(e*(u-1)),c=(0,_ut.U2)(a,[s]),f=(0,_ut.U2)(a,[l]),h=this.getSliderCfg().formatter;return h&&(c=h(c,n[s],s),f=h(f,n[l],l)),{minText:c,maxText:f}},e.prototype.changeViewData=function(t,e){var n=this.view.getOptions().data,r=this.view.getXScale(),i=(0,_ut.dp)(n);if(r&&i){var a=(0,_ut.I)(n,r.field),o=this.view.getXScale().isLinear?a.sort((function(t,e){return Number(t)-Number(e)})):a,u=o,s=(0,_ut.dp)(u),l=Math.round(t*(s-1)),c=Math.round(e*(s-1));this.view.filter(r.field,(function(t,e){var n=u.indexOf(t);return!(n>-1)||zdt(n,l,c)})),this.view.render(!0)}},e.prototype.getComponents=function(){return this.slider?[this.slider]:[]},e.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},e}($gt),$wt=qwt,Jwt=function(t){function e(e){var n=t.call(this,e)||this;return n.onChangeFn=_ut.ZT,n.resetMeasure=function(){n.clear()},n.onValueChange=function(t){var e=t.ratio,r=n.getValidScrollbarCfg().animate;n.ratio=(0,_ut.uZ)(e,0,1);var i=n.view.getOptions().animate;r||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(i)},n.container=n.view.getLayer(Cut.FORE).addGroup(),n.onChangeFn=(0,_ut.P2)(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(Dut.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(Dut.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return(0,Aut.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.off(Dut.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Dut.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout((function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)}))),this.scrollbar){var e=this.view.coordinateBBox.width,n=this.scrollbar.component.get("padding"),r=this.scrollbar.component.getLayoutBBox(),i=new Wdt(r.x,r.y,Math.min(r.width,e),r.height).expand(n),a=this.getScrollbarComponentCfg(),o=void 0,u=void 0;if(a.isHorizontal){var s=(0,Aut.CR)(Wwt(this.view.viewBBox,i,Eut.BOTTOM),2),l=(s[0],s[1]),c=(0,Aut.CR)(Wwt(this.view.coordinateBBox,i,Eut.BOTTOM),2),f=c[0];c[1];o=f,u=l}else{var h=(0,Aut.CR)(Wwt(this.view.viewBBox,i,Eut.RIGHT),2),d=(h[0],l=h[1],(0,Aut.CR)(Wwt(this.view.viewBBox,i,Eut.RIGHT),2));f=d[0],d[1];o=f,u=l}o+=n[3],u+=n[0],this.trackLen?this.scrollbar.component.update((0,Aut.pi)((0,Aut.pi)({},a),{x:o,y:u,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update((0,Aut.pi)((0,Aut.pi)({},a),{x:o,y:u})),this.view.viewBBox=this.view.viewBBox.cut(i,a.isHorizontal?Eut.BOTTOM:Eut.RIGHT)}},e.prototype.update=function(){this.render()},e.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},e.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},e.prototype.setValue=function(t){this.onValueChange({ratio:t})},e.prototype.getValue=function(){return this.ratio},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,_ut.U2)(t,["components","scrollbar","common"],{})},e.prototype.getScrollbarTheme=function(t){var e=(0,_ut.U2)(this.view.getTheme(),["components","scrollbar"]),n=t||{},r=n.thumbHighlightColor,i=(0,Aut._T)(n,["thumbHighlightColor"]);return{default:(0,_ut.b$)({},(0,_ut.U2)(e,["default","style"],{}),i),hover:(0,_ut.b$)({},(0,_ut.U2)(e,["hover","style"],{}),{thumbColor:r})}},e.prototype.measureScrollbar=function(){var t=this.view.getXScale(),e=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var n=this.getScrollbarComponentCfg(),r=n.trackLen,i=n.thumbLen;this.trackLen=r,this.thumbLen=i,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=e},e.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,_ut.uZ)(this.ratio,0,1));return[t,Math.min(t+this.step-1,this.cnt-1)]},e.prototype.changeViewData=function(t,e){var n=this,r=(0,Aut.CR)(t,2),i=r[0],a=r[1],o="vertical"!==this.getValidScrollbarCfg().type,u=(0,_ut.I)(this.data,this.xScaleCfg.field),s=this.view.getXScale().isLinear?u.sort((function(t,e){return Number(t)-Number(e)})):u,l=o?s:s.reverse();this.yScalesCfg.forEach((function(t){n.view.scale(t.field,{formatter:t.formatter,type:t.type,min:t.min,max:t.max,tickMethod:t.tickMethod})})),this.view.filter(this.xScaleCfg.field,(function(t){var e=l.indexOf(t);return!(e>-1)||zdt(e,i,a)})),this.view.render(!0)},e.prototype.createScrollbar=function(){var t="vertical"!==this.getValidScrollbarCfg().type,e=new Mdt((0,Aut.pi)((0,Aut.pi)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return e.init(),{component:e,layer:Cut.FORE,direction:t?Eut.BOTTOM:Eut.RIGHT,type:Mut.SCROLLBAR}},e.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),e=this.trackLen?(0,Aut.pi)((0,Aut.pi)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):(0,Aut.pi)({},t);return this.scrollbar.component.update(e),this.scrollbar},e.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,e=this.getValidScrollbarCfg(),n=e.type,r=e.categorySize,i="vertical"!==n;return Math.floor((i?t.width:t.height)/r)},e.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),e=this.getScrollbarData(),n=(0,_ut.I)(e,t.field);return(0,_ut.dp)(n)},e.prototype.getScrollbarComponentCfg=function(){var t=this.view,e=t.coordinateBBox,n=t.viewBBox,r=this.getValidScrollbarCfg(),i=r.type,a=r.padding,o=r.width,u=r.height,s=r.style,l="vertical"!==i,c=(0,Aut.CR)(a,4),f=c[0],h=c[1],d=c[2],p=c[3],g=l?{x:e.minX+p,y:n.maxY-u-d}:{x:n.maxX-o-h,y:e.minY+f},v=this.getStep(),m=this.getCnt(),y=l?e.width-p-h:e.height-f-d,x=Math.max(y*(0,_ut.uZ)(v/m,0,1),20);return(0,Aut.pi)((0,Aut.pi)({},this.getThemeOptions()),{x:g.x,y:g.y,size:l?u:o,isHorizontal:l,trackLen:y,thumbLen:x,thumbOffset:0,theme:this.getScrollbarTheme(s)})},e.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:32,width:8,height:8,padding:[0,0,0,0],animate:!0,style:{}};return(0,_ut.Kn)(this.option)&&(t=(0,Aut.pi)((0,Aut.pi)({},t),this.option)),(0,_ut.Kn)(this.option)&&this.option.padding||(t.padding=(t.type,[0,0,0,0])),t},e.prototype.getScrollbarData=function(){var t=this.view.getCoordinate(),e=this.getValidScrollbarCfg(),n=this.view.getOptions().data||[];return t.isReflect("y")&&"vertical"===e.type&&(n=(0,Aut.ev)([],(0,Aut.CR)(n),!1).reverse()),n},e}($gt),Kwt=Jwt,Qwt={fill:"#CCD6EC",opacity:.3};function tSt(t,e,n){var r,i,a,o,u,s,l=function(t,e,n){var r,i,a=Igt(t,e,n);try{for(var o=(0,Aut.XA)(t.views),u=o.next();!u.done;u=o.next()){var s=u.value;a=a.concat(Igt(s,e,n))}}catch(l){r={error:l}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a}(t,e,n);if(l.length){l=(0,_ut.xH)(l);try{for(var c=(0,Aut.XA)(l),f=c.next();!f.done;f=c.next()){var h=f.value;try{for(var d=(a=void 0,(0,Aut.XA)(h)),p=d.next();!p.done;p=d.next()){var g=p.value,v=g.mappingData,m=v.x,y=v.y;g.x=(0,_ut.kJ)(m)?m[m.length-1]:m,g.y=(0,_ut.kJ)(y)?y[y.length-1]:y}}catch(E){a={error:E}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}}}catch(M){r={error:M}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}if(!1===n.shared&&l.length>1){var x=l[0],b=Math.abs(e.y-x[0].y);try{for(var w=(0,Aut.XA)(l),S=w.next();!S.done;S=w.next()){var k=S.value,C=Math.abs(e.y-k[0].y);C<=b&&(x=k,b=C)}}catch(O){u={error:O}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(u)throw u.error}}l=[x]}return(0,_ut.jj)((0,_ut.xH)(l))}return[]}var eSt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.show=function(t){var e=this.context.view,n=this.context.event,r=e.getController("tooltip").getTooltipCfg(),i=tSt(e,{x:n.x,y:n.y},r);if(!(0,_ut.Xy)(i,this.items)&&(this.items=i,i.length)){var a=e.getXScale().field,o=i[0].data[a],u=[],s=e.geometries;if((0,_ut.S6)(s,(function(t){if("interval"===t.type||"schema"===t.type){var e=t.getElementsBy((function(t){return t.getData()[a]===o}));u=u.concat(e)}})),u.length){var l=e.getCoordinate(),c=u[0].shape.getCanvasBBox(),f=u[0].shape.getCanvasBBox(),h=c;(0,_ut.S6)(u,(function(t){var e=t.shape.getCanvasBBox();l.isTransposed?(e.minY<c.minY&&(c=e),e.maxY>f.maxY&&(f=e)):(e.minX<c.minX&&(c=e),e.maxX>f.maxX&&(f=e)),h.x=Math.min(e.minX,h.minX),h.y=Math.min(e.minY,h.minY),h.width=Math.max(e.maxX,h.maxX)-h.x,h.height=Math.max(e.maxY,h.maxY)-h.y}));var d=e.backgroundGroup,p=e.coordinateBBox,g=void 0;if(l.isRect){var v=e.getXScale(),m=t||{},y=m.appendRatio,x=m.appendWidth;(0,_ut.UM)(x)&&(y=(0,_ut.UM)(y)?v.isLinear?0:.25:y,x=l.isTransposed?y*f.height:y*c.width);var b=void 0,w=void 0,S=void 0,k=void 0;l.isTransposed?(b=p.minX,w=Math.min(f.minY,c.minY)-x,S=p.width,k=h.height+2*x):(b=Math.min(c.minX,f.minX)-x,w=p.minY,S=h.width+2*x,k=p.height),g=[["M",b,w],["L",b+S,w],["L",b+S,w+k],["L",b,w+k],["Z"]]}else{var C=(0,_ut.YM)(u),E=(0,_ut.Z$)(u),M=Zdt(C.getModel(),l).startAngle,O=Zdt(E.getModel(),l).endAngle,A=l.getCenter(),_=l.getRadius(),D=l.innerRadius*_;g=Ldt(A.x,A.y,_,M,O,D)}if(this.regionPath)this.regionPath.attr("path",g),this.regionPath.show();else{var T=(0,_ut.U2)(t,"style",Qwt);this.regionPath=d.addShape({type:"path",name:"active-region",capture:!1,attrs:(0,Aut.pi)((0,Aut.pi)({},T),{path:g})})}}}},e.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},e.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),t.prototype.destroy.call(this)},e}(ppt),nSt=eSt,rSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return(0,Aut.ZT)(e,t),e.prototype.show=function(){var t=this.context,e=t.event,n=t.view;if(!n.isTooltipLocked()){var r=this.timeStamp,i=+new Date;if(i-r>(0,_ut.U2)(t.view.getOptions(),"tooltip.showDelay",16)){var a=this.location,o={x:e.x,y:e.y};a&&(0,_ut.Xy)(a,o)||this.showTooltip(n,o),this.timeStamp=i,this.location=o}}},e.prototype.hide=function(){var t=this.context.view,e=t.getController("tooltip"),n=this.context.event,r=n.clientX,i=n.clientY;e.isCursorEntered({x:r,y:i})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},e.prototype.showTooltip=function(t,e){t.showTooltip(e)},e.prototype.hideTooltip=function(t){t.hideTooltip()},e}(ppt),iSt=rSt,aSt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.showTooltip=function(t,e){var n=Wpt(t);(0,_ut.S6)(n,(function(n){var r=Vpt(t,n,e);n.showTooltip(r)}))},e.prototype.hideTooltip=function(t){var e=Wpt(t);(0,_ut.S6)(e,(function(t){t.hideTooltip()}))},e}(iSt),oSt=aSt,uSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return(0,Aut.ZT)(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.show=function(){var t=this.context.event,e=this.timeStamp,n=+new Date;if(n-e>16){var r=this.location,i={x:t.x,y:t.y};r&&(0,_ut.Xy)(r,i)||this.showTooltip(i),this.timeStamp=n,this.location=i}},e.prototype.hide=function(){this.hideTooltip(),this.location=null},e.prototype.showTooltip=function(t){var e=this.context.event.target;if(e&&e.get("tip")){this.tooltip||this.renderTooltip();var n=e.get("tip");this.tooltip.update((0,Aut.pi)({title:n},t)),this.tooltip.show()}},e.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,e=this.context.view,n=e.canvas,r={start:{x:0,y:0},end:{x:n.get("width"),y:n.get("height")}},i=e.getTheme(),a=(0,_ut.U2)(i,["components","tooltip","domStyles"],{}),o=new Idt({parent:n.get("el").parentNode,region:r,visible:!1,crosshairs:null,domStyles:(0,Aut.pi)({},(0,_ut.b$)({},a,(t={},t[$ht]={"max-width":"50%"},t[Jht]={"word-break":"break-all"},t)))});o.init(),o.setCapture(!1),this.tooltip=o},e}(ppt),sSt=uSt,lSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="",e}return(0,Aut.ZT)(e,t),e.prototype.hasState=function(t){return t.hasState(this.stateName)},e.prototype.setElementState=function(t,e){t.setState(this.stateName,e)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},e.prototype.clearViewState=function(t){var e=this,n=Lpt(t,this.stateName);(0,_ut.S6)(n,(function(t){e.setElementState(t,!1)}))},e}(ppt),cSt=lSt;function fSt(t){return(0,_ut.U2)(t.get("delegateObject"),"item")}var hSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreListItemStates=["unchecked"],e}return(0,Aut.ZT)(e,t),e.prototype.isItemIgnore=function(t,e){var n=this.ignoreListItemStates.filter((function(n){return e.hasState(t,n)}));return!!n.length},e.prototype.setStateByComponent=function(t,e,n){var r=this.context.view,i=t.get("field"),a=Bpt(r);this.setElementsStateByItem(a,i,e,n)},e.prototype.setStateByElement=function(t,e){this.setElementState(t,e)},e.prototype.isMathItem=function(t,e,n){var r=Xpt(this.context.view,e),i=Rpt(t,e);return!(0,_ut.UM)(i)&&n.name===r.getText(i)},e.prototype.setElementsStateByItem=function(t,e,n,r){var i=this;(0,_ut.S6)(t,(function(t){i.isMathItem(t,e,n)&&t.setState(i.stateName,r)}))},e.prototype.setStateEnable=function(t){var e=Apt(this.context);if(e)Dpt(this.context)&&this.setStateByElement(e,t);else{var n=_pt(this.context);if(Tpt(n)){var r=n.item,i=n.component;if(r&&i&&!this.isItemIgnore(r,i)){var a=this.context.event.gEvent;if(a&&a.fromShape&&a.toShape&&fSt(a.fromShape)===fSt(a.toShape))return;this.setStateByComponent(i,r,t)}}}},e.prototype.toggle=function(){var t=Apt(this.context);if(t){var e=t.hasState(this.stateName);this.setElementState(t,!e)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(cSt),dSt=hSt,pSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,Aut.ZT)(e,t),e.prototype.active=function(){this.setState()},e}(dSt),gSt=pSt,vSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cache={},e}return(0,Aut.ZT)(e,t),e.prototype.getColorScale=function(t,e){var n=e.geometry.getAttribute("color");return n?t.getScaleByField(n.getFields()[0]):null},e.prototype.getLinkPath=function(t,e){var n=this.context.view.getCoordinate().isTransposed,r=t.shape.getCanvasBBox(),i=e.shape.getCanvasBBox();return n?[["M",r.minX,r.minY],["L",i.minX,i.maxY],["L",i.maxX,i.maxY],["L",r.maxX,r.minY],["Z"]]:[["M",r.maxX,r.minY],["L",i.minX,i.minY],["L",i.minX,i.maxY],["L",r.maxX,r.maxY],["Z"]]},e.prototype.addLinkShape=function(t,e,n,r){var i={opacity:.4,fill:e.shape.attr("fill")};t.addShape({type:"path",attrs:(0,Aut.pi)((0,Aut.pi)({},(0,_ut.b$)({},i,(0,_ut.mf)(r)?r(i,e):r)),{path:this.getLinkPath(e,n)})})},e.prototype.linkByElement=function(t,e){var n=this,r=this.context.view,i=this.getColorScale(r,t);if(i){var a=Rpt(t,i.field);if(!this.cache[a]){var o=function(t,e,n){return Bpt(t).filter((function(t){return Rpt(t,e)===n}))}(r,i.field,a),u=this.linkGroup.addGroup();this.cache[a]=u;var s=o.length;(0,_ut.S6)(o,(function(t,r){if(r<s-1){var i=o[r+1];n.addLinkShape(u,t,i,e)}}))}}},e.prototype.removeLink=function(t){var e=this.getColorScale(this.context.view,t);if(e){var n=Rpt(t,e.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},e.prototype.link=function(t){var e=this.context;this.linkGroup||(this.linkGroup=e.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var n=Apt(e);n&&this.linkByElement(n,null==t?void 0:t.style)},e.prototype.unlink=function(){var t=Apt(this.context);t&&this.removeLink(t)},e.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},e}(ppt),mSt=vSt,ySt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.endPoint=null,e.isStarted=!1,e.effectSiblings=!1,e.effectByRecord=!1,e}return(0,Aut.ZT)(e,t),e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},e.prototype.getIntersectElements=function(){var t=null;if(Ipt(this.context))t=Ppt(this.context,10);else{var e=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!e||!n)return;var r={minX:Math.min(e.x,n.x),minY:Math.min(e.y,n.y),maxX:Math.max(e.x,n.x),maxY:Math.max(e.y,n.y)};t=Zpt(this.context.view,r)}return t},e.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var e=Bpt(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,t):this.setElementsState(n,t,e):this.clear()}},e.prototype.setSiblingsStateByRecord=function(t,e){var n=this,r=this.context.view,i=Wpt(r),a=t.map((function(t){return t.getModel().data})),o=r.getXScale().field,u=r.getYScales()[0].field;(0,_ut.S6)(i,(function(t){var r=Bpt(t),i=r.filter((function(t){var e=t.getModel().data;return Gpt(a,e,o,u)}));n.setElementsState(i,e,r)}))},e.prototype.setSiblingsState=function(t){var e=this,n=Wpt(this.context.view);Ipt(this.context)&&(0,_ut.S6)(n,(function(n){var r=Bpt(n),i=jpt(e.context,n,10);i&&i.length?e.setElementsState(i,t,r):e.clearViewState(n)}))},e.prototype.setElementsState=function(t,e,n){var r=this;(0,_ut.S6)(n,(function(n){t.includes(n)?r.setElementState(n,e):r.setElementState(n,!1)}))},e.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},e.prototype.clear=function(){var t=this,e=this.context.view;if(this.effectSiblings){var n=Wpt(e);(0,_ut.S6)(n,(function(e){t.clearViewState(e)}))}else this.clearViewState(e)},e}(cSt),xSt=ySt,bSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,Aut.ZT)(e,t),e.prototype.active=function(){this.setState()},e}(xSt),wSt=bSt,SSt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.setStateEnable=function(t){var e=Apt(this.context);if(e){if(!Dpt(this.context))return;t?(this.clear(),this.setElementState(e,!0)):this.hasState(e)&&this.setElementState(e,!1)}},e.prototype.toggle=function(){var t=Apt(this.context);if(t){var e=this.hasState(t);e||this.clear(),this.setElementState(t,!e)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(cSt),kSt=SSt,CSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,Aut.ZT)(e,t),e.prototype.active=function(){this.setState()},e}(kSt),ESt=CSt,MSt="inactive",OSt="active";function ASt(t){var e=Bpt(t);(0,_ut.S6)(e,(function(t){t.hasState(OSt)&&t.setState(OSt,!1),t.hasState(MSt)&&t.setState(MSt,!1)}))}function _St(t,e,n){(0,_ut.S6)(t,(function(t){e(t)?(t.hasState(MSt)&&t.setState(MSt,!1),t.setState(OSt,n)):(t.hasState(OSt)&&t.setState(OSt,!1),t.setState(MSt,n))}))}var DSt,TSt=Iut.INACTIVE,FSt=Iut.ACTIVE,ISt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName=FSt,e}return(0,Aut.ZT)(e,t),e.prototype.setElementsStateByItem=function(t,e,n,r){var i=this;this.setHighlightBy(t,(function(t){return i.isMathItem(t,e,n)}),r)},e.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(TSt)&&t.setState(TSt,!1),t.setState(FSt,!0)):t.hasState(FSt)||t.setState(TSt,!0)},e.prototype.setHighlightBy=function(t,e,n){var r=this;if(n)(0,_ut.S6)(t,(function(t){r.setElementHighlight(t,e)}));else{var i=Lpt(this.context.view,FSt),a=!0;(0,_ut.S6)(i,(function(t){if(!e(t))return a=!1,!1})),a?this.clear():(0,_ut.S6)(t,(function(t){e(t)&&(t.hasState(FSt)&&t.setState(FSt,!1),t.setState(TSt,!0))}))}},e.prototype.setElementState=function(t,e){var n=Bpt(this.context.view);this.setHighlightBy(n,(function(e){return t===e}),e)},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){ASt(this.context.view)},e}(dSt),PSt=ISt,jSt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.setStateByElement=function(t,e){var n=this.context.view,r=t.geometry.getAttribute("color");if(r){var i=n.getScaleByField(r.getFields()[0]),a=Rpt(t,i.field),o=Bpt(n),u=o.filter((function(t){return Rpt(t,i.field)===a}));this.setHighlightBy(o,(function(t){return u.includes(t)}),e)}},e}(PSt),BSt=jSt,LSt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(TSt)&&t.setState(TSt,!1),t.setState(FSt,!0)):(t.setState(TSt,!0),t.hasState(FSt)&&t.setState(FSt,!1))},e.prototype.setStateByElement=function(t,e){var n=this.context.view,r=n.getXScale(),i=Rpt(t,r.field),a=Bpt(n),o=a.filter((function(t){return Rpt(t,r.field)===i}));this.setHighlightBy(a,(function(t){return o.includes(t)}),e)},e.prototype.toggle=function(){var t=Apt(this.context);if(t){var e=t.hasState(this.stateName);this.setStateByElement(t,!e)}},e}(PSt),RSt=LSt;!function(t){t.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",t.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",t.BEFORE_CLEAR="element-range-highlight:beforeclear",t.AFTER_CLEAR="element-range-highlight:afterclear"}(DSt||(DSt={}));var ZSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,Aut.ZT)(e,t),e.prototype.clearViewState=function(t){ASt(t)},e.prototype.highlight=function(){var t=this.context,e=t.view,n={view:e,event:t.event,highlightElements:this.getIntersectElements()};e.emit(DSt.BEFORE_HIGHLIGHT,Ngt.fromData(e,DSt.BEFORE_HIGHLIGHT,n)),this.setState(),e.emit(DSt.AFTER_HIGHLIGHT,Ngt.fromData(e,DSt.AFTER_HIGHLIGHT,n))},e.prototype.clear=function(){var e=this.context.view;e.emit(DSt.BEFORE_CLEAR,Ngt.fromData(e,DSt.BEFORE_CLEAR,{})),t.prototype.clear.call(this),e.emit(DSt.AFTER_CLEAR,Ngt.fromData(e,DSt.AFTER_CLEAR,{}))},e.prototype.setElementsState=function(t,e,n){_St(n,(function(e){return t.indexOf(e)>=0}),e)},e}(xSt),NSt=ZSt,zSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,Aut.ZT)(e,t),e.prototype.highlight=function(){this.setState()},e.prototype.setElementState=function(t,e){_St(Bpt(this.context.view),(function(e){return t===e}),e)},e.prototype.clear=function(){ASt(this.context.view)},e}(kSt),USt=zSt,HSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,Aut.ZT)(e,t),e.prototype.selected=function(){this.setState()},e}(xSt),WSt=HSt,VSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,Aut.ZT)(e,t),e.prototype.selected=function(){this.setState()},e}(dSt),GSt=VSt,XSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,Aut.ZT)(e,t),e.prototype.selected=function(){this.setState()},e}(kSt),YSt=XSt,qSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="",e.ignoreItemStates=[],e}return(0,Aut.ZT)(e,t),e.prototype.getTriggerListInfo=function(){var t=_pt(this.context),e=null;return Tpt(t)&&(e={item:t.item,list:t.component}),e},e.prototype.getAllowComponents=function(){var t=this,e=zpt(this.context.view),n=[];return(0,_ut.S6)(e,(function(e){e.isList()&&t.allowSetStateByElement(e)&&n.push(e)})),n},e.prototype.hasState=function(t,e){return t.hasState(e,this.stateName)},e.prototype.clearAllComponentsState=function(){var t=this,e=this.getAllowComponents();(0,_ut.S6)(e,(function(e){e.clearItemsState(t.stateName)}))},e.prototype.allowSetStateByElement=function(t){var e=t.get("field");if(!e)return!1;if(this.cfg&&this.cfg.componentNames){var n=t.get("name");if(-1===this.cfg.componentNames.indexOf(n))return!1}var r=Xpt(this.context.view,e);return r&&r.isCategory},e.prototype.allowSetStateByItem=function(t,e){var n=this.ignoreItemStates;if(n.length){var r=n.filter((function(n){return e.hasState(t,n)}));return 0===r.length}return!0},e.prototype.setStateByElement=function(t,e,n){var r=t.get("field"),i=Xpt(this.context.view,r),a=Rpt(e,r),o=i.getText(a);this.setItemsState(t,o,n)},e.prototype.setStateEnable=function(t){var e=this,n=Apt(this.context);if(n){var r=this.getAllowComponents();(0,_ut.S6)(r,(function(r){e.setStateByElement(r,n,t)}))}else{var i=_pt(this.context);if(Tpt(i)){var a=i.item,o=i.component;this.allowSetStateByElement(o)&&this.allowSetStateByItem(a,o)&&this.setItemState(o,a,t)}}},e.prototype.setItemsState=function(t,e,n){var r=this,i=t.getItems();(0,_ut.S6)(i,(function(i){i.name===e&&r.setItemState(t,i,n)}))},e.prototype.setItemState=function(t,e,n){t.setItemState(e,this.stateName,n)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.reset=function(){this.setStateEnable(!1)},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,n=t.item,r=this.hasState(e,n);this.setItemState(e,n,!r)}},e.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},e}(ppt),$St=qSt,JSt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,Aut.ZT)(e,t),e.prototype.active=function(){this.setState()},e}($St),KSt=JSt,QSt="inactive",tkt="active";var ekt="inactive",nkt="active",rkt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName=nkt,e.ignoreItemStates=["unchecked"],e}return(0,Aut.ZT)(e,t),e.prototype.setItemsState=function(t,e,n){this.setHighlightBy(t,(function(t){return t.name===e}),n)},e.prototype.setItemState=function(t,e,n){t.getItems();this.setHighlightBy(t,(function(t){return t===e}),n)},e.prototype.setHighlightBy=function(t,e,n){var r=t.getItems();if(n)(0,_ut.S6)(r,(function(n){e(n)?(t.hasState(n,ekt)&&t.setItemState(n,ekt,!1),t.setItemState(n,nkt,!0)):t.hasState(n,nkt)||t.setItemState(n,ekt,!0)}));else{var i=t.getItemsByState(nkt),a=!0;(0,_ut.S6)(i,(function(t){if(!e(t))return a=!1,!1})),a?this.clear():(0,_ut.S6)(r,(function(n){e(n)&&(t.hasState(n,nkt)&&t.setItemState(n,nkt,!1),t.setItemState(n,ekt,!0))}))}},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)!function(t){var e=t.getItems();(0,_ut.S6)(e,(function(e){t.hasState(e,tkt)&&t.setItemState(e,tkt,!1),t.hasState(e,QSt)&&t.setItemState(e,QSt,!1)}))}(t.list);else{var e=this.getAllowComponents();(0,_ut.S6)(e,(function(t){t.clearItemsState(nkt),t.clearItemsState(ekt)}))}},e}($St),ikt=rkt,akt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,Aut.ZT)(e,t),e.prototype.selected=function(){this.setState()},e}($St),okt=akt,ukt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="unchecked",e}return(0,Aut.ZT)(e,t),e.prototype.unchecked=function(){this.setState()},e}($St),skt=ukt,lkt="unchecked",ckt="checked",fkt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName=ckt,e}return(0,Aut.ZT)(e,t),e.prototype.setItemState=function(t,e,n){this.setCheckedBy(t,(function(t){return t===e}),n)},e.prototype.setCheckedBy=function(t,e,n){var r=t.getItems();n&&(0,_ut.S6)(r,(function(n){e(n)?(t.hasState(n,lkt)&&t.setItemState(n,lkt,!1),t.setItemState(n,ckt,!0)):t.hasState(n,ckt)||t.setItemState(n,lkt,!0)}))},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,n=t.item,r=!(0,_ut.G)(e.getItems(),(function(t){return e.hasState(t,lkt)}));r||e.hasState(n,lkt)?this.setItemState(e,n,!0):this.reset()}},e.prototype.checked=function(){this.setState()},e.prototype.reset=function(){var t=this.getAllowComponents();(0,_ut.S6)(t,(function(t){t.clearItemsState(ckt),t.clearItemsState(lkt)}))},e}($St),hkt=fkt,dkt="unchecked",pkt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.toggle=function(){var t,e,n,r,i,a,o,u,s=this.getTriggerListInfo();if(null==s?void 0:s.item){var l=s.list,c=s.item,f=l.getItems(),h=f.filter((function(t){return!l.hasState(t,dkt)})),d=f.filter((function(t){return l.hasState(t,dkt)})),p=h[0];if(f.length===h.length)try{for(var g=(0,Aut.XA)(f),v=g.next();!v.done;v=g.next()){var m=v.value;l.setItemState(m,dkt,m.id!==c.id)}}catch(C){t={error:C}}finally{try{v&&!v.done&&(e=g.return)&&e.call(g)}finally{if(t)throw t.error}}else if(f.length-d.length==1)if(p.id===c.id)try{for(var y=(0,Aut.XA)(f),x=y.next();!x.done;x=y.next()){m=x.value;l.setItemState(m,dkt,!1)}}catch(E){n={error:E}}finally{try{x&&!x.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}else try{for(var b=(0,Aut.XA)(f),w=b.next();!w.done;w=b.next()){m=w.value;l.setItemState(m,dkt,m.id!==c.id)}}catch(M){i={error:M}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}else try{for(var S=(0,Aut.XA)(f),k=S.next();!k.done;k=S.next()){m=k.value;l.setItemState(m,dkt,m.id!==c.id)}}catch(O){o={error:O}}finally{try{k&&!k.done&&(u=S.return)&&u.call(S)}finally{if(o)throw o.error}}}},e}($St),gkt=pkt,vkt="showRadio",mkt="legend-radio-tip",ykt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return(0,Aut.ZT)(e,t),e.prototype.show=function(){var t=this.getTriggerListInfo();if(null==t?void 0:t.item){var e=t.list,n=t.item;e.setItemState(n,vkt,!0)}},e.prototype.hide=function(){var t=this.getTriggerListInfo();if(null==t?void 0:t.item){var e=t.list,n=t.item;e.setItemState(n,vkt,!1)}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.showTip=function(){var t=this.context.event,e=this.timeStamp,n=+new Date,r=this.context.event.target;if(n-e>16&&"legend-item-radio"===r.get("name")){var i=this.location,a={x:t.x,y:t.y};this.timeStamp=n,this.location=a,i&&(0,_ut.Xy)(i,a)||this.showTooltip(a)}},e.prototype.hideTip=function(){this.hideTooltip(),this.location=null},e.prototype.showTooltip=function(t){var e=this.context,n=e.event.target;if(n&&n.get("tip")){this.tooltip||this.renderTooltip();var r=e.view.getCanvas().get("el").getBoundingClientRect(),i=r.x,a=r.y;this.tooltip.update((0,Aut.pi)((0,Aut.pi)({title:n.get("tip")},t),{x:t.x+i,y:t.y+a})),this.tooltip.show()}},e.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,e=((t={})[$ht]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},t[Jht]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},t);document.getElementById(mkt)&&document.body.removeChild(document.getElementById(mkt));var n=new Idt({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:e,containerId:mkt});n.init(),n.setCapture(!1),this.tooltip=n},e}($St),xkt=ykt,bkt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskShape=null,e.points=[],e.starting=!1,e.moving=!1,e.preMovePoint=null,e.shapeType="path",e}return(0,Aut.ZT)(e,t),e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.emitEvent=function(t){var e="mask:".concat(t),n=this.context.view,r=this.context.event;n.emit(e,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},e.prototype.createMask=function(){var t=this.context.view,e=this.getMaskAttrs();return t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,Aut.pi)({fill:"#C5D4EB",opacity:.3},e)})},e.prototype.getMaskPath=function(){return[]},e.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},e.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(null==t?void 0:t.maskStyle),this.emitEvent("start")},e.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},e.prototype.move=function(){if(this.moving&&this.maskShape){var t=this.getCurrentPoint(),e=this.preMovePoint,n=t.x-e.x,r=t.y-e.y,i=this.points;(0,_ut.S6)(i,(function(t){t.x+=n,t.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},e.prototype.updateMask=function(t){var e=(0,_ut.b$)({},this.getMaskAttrs(),t);this.maskShape.attr(e)},e.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},e.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},e.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},e.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},e.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,t.prototype.destroy.call(this)},e}(ppt),wkt=bkt,Skt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeType="circle",e}return(0,Aut.ZT)(e,t),e.prototype.getMaskAttrs=function(){var t=this.points,e=(0,_ut.Z$)(this.points),n=0,r=0,i=0;if(t.length){var a=t[0];n=Upt(a,e)/2,r=(e.x+a.x)/2,i=(e.y+a.y)/2}return{x:r,y:i,r:n}},e}(wkt),kkt=Skt,Ckt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeType="rect",e}return(0,Aut.ZT)(e,t),e.prototype.getRegion=function(){var t=this.points;return{start:(0,_ut.YM)(t),end:(0,_ut.Z$)(t)}},e.prototype.getMaskAttrs=function(){var t=this.getRegion(),e=t.start,n=t.end;return{x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),width:Math.abs(n.x-e.x),height:Math.abs(n.y-e.y)}},e}(wkt),Ekt=Ckt;function Mkt(t){t.x=(0,_ut.uZ)(t.x,0,1),t.y=(0,_ut.uZ)(t.y,0,1)}var Okt,Akt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return(0,Aut.ZT)(e,t),e.prototype.getRegion=function(){var t=null,e=null,n=this.points,r=this.dim,i=this.context.view.getCoordinate(),a=i.invert((0,_ut.YM)(n)),o=i.invert((0,_ut.Z$)(n));return this.inPlot&&(Mkt(a),Mkt(o)),"x"===r?(t=i.convert({x:a.x,y:0}),e=i.convert({x:o.x,y:1})):(t=i.convert({x:0,y:a.y}),e=i.convert({x:1,y:o.y})),{start:t,end:e}},e}(Ekt),_kt=Akt,Dkt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getMaskPath=function(){var t=this.points,e=[];return t.length&&((0,_ut.S6)(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e.push(["L",t[0].x,t[0].y])),e},e.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},e.prototype.addPoint=function(){this.resize()},e}(wkt),Tkt=Dkt,Fkt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getMaskPath=function(){return function(t,e){if(t.length<=2)return Cpt(t,!1);var n=t[0],r=[];(0,_ut.S6)(t,(function(t){r.push(t.x),r.push(t.y)}));var i=kpt(r,e,null);return i.unshift(["M",n.x,n.y]),i}(this.points,!0)},e}(Tkt),Ikt=Fkt,Pkt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.setCursor=function(t){this.context.view.getCanvas().setCursor(t)},e.prototype.default=function(){this.setCursor("default")},e.prototype.pointer=function(){this.setCursor("pointer")},e.prototype.move=function(){this.setCursor("move")},e.prototype.crosshair=function(){this.setCursor("crosshair")},e.prototype.wait=function(){this.setCursor("wait")},e.prototype.help=function(){this.setCursor("help")},e.prototype.text=function(){this.setCursor("text")},e.prototype.eResize=function(){this.setCursor("e-resize")},e.prototype.wResize=function(){this.setCursor("w-resize")},e.prototype.nResize=function(){this.setCursor("n-resize")},e.prototype.sResize=function(){this.setCursor("s-resize")},e.prototype.neResize=function(){this.setCursor("ne-resize")},e.prototype.nwResize=function(){this.setCursor("nw-resize")},e.prototype.seResize=function(){this.setCursor("se-resize")},e.prototype.swResize=function(){this.setCursor("sw-resize")},e.prototype.nsResize=function(){this.setCursor("ns-resize")},e.prototype.ewResize=function(){this.setCursor("ew-resize")},e.prototype.zoomIn=function(){this.setCursor("zoom-in")},e.prototype.zoomOut=function(){this.setCursor("zoom-out")},e}(ppt),jkt=Pkt,Bkt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.filterView=function(t,e,n){var r=this;t.getScaleByField(e)&&t.filter(e,n),t.views&&t.views.length&&(0,_ut.S6)(t.views,(function(t){r.filterView(t,e,n)}))},e.prototype.filter=function(){var t=_pt(this.context);if(t){var e=this.context.view,n=t.component,r=n.get("field");if(Tpt(t)){if(r){var i=n.getItemsByState("unchecked"),a=Xpt(e,r),o=i.map((function(t){return t.name}));o.length?this.filterView(e,r,(function(t){var e=a.getText(t);return!o.includes(e)})):this.filterView(e,r,null),e.render(!0)}}else if(Fpt(t)){var u=n.getValue(),s=(0,Aut.CR)(u,2),l=s[0],c=s[1];this.filterView(e,r,(function(t){return t>=l&&t<=c})),e.render(!0)}}},e}(ppt),Lkt=Bkt;function Rkt(t,e,n,r){var i=Math.min(n[e],r[e]),a=Math.max(n[e],r[e]),o=(0,Aut.CR)(t.range,2),u=o[0],s=o[1];if(i<u&&(i=u),a>s&&(a=s),i===s&&a===s)return null;var l=t.invert(i),c=t.invert(a);if(t.isCategory){var f=t.values.indexOf(l),h=t.values.indexOf(c),d=t.values.slice(f,h+1);return function(t){return d.includes(t)}}return function(t){return t>=l&&t<=c}}!function(t){t.FILTER="brush-filter-processing",t.RESET="brush-filter-reset",t.BEFORE_FILTER="brush-filter:beforefilter",t.AFTER_FILTER="brush-filter:afterfilter",t.BEFORE_RESET="brush-filter:beforereset",t.AFTER_RESET="brush-filter:afterreset"}(Okt||(Okt={}));var Zkt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dims=["x","y"],e.startPoint=null,e.isStarted=!1,e}return(0,Aut.ZT)(e,t),e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},e.prototype.filter=function(){var t,e;if(Ipt(this.context)){var n=this.context.event.target.getCanvasBBox();t={x:n.x,y:n.y},e={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;t=this.startPoint,e=this.context.getCurrentPoint()}if(!(Math.abs(t.x-e.x)<5||Math.abs(t.x-e.y)<5)){var r=this.context,i=r.view,a={view:i,event:r.event,dims:this.dims};i.emit(Okt.BEFORE_FILTER,Ngt.fromData(i,Okt.BEFORE_FILTER,a));var o=i.getCoordinate(),u=o.invert(e),s=o.invert(t);if(this.hasDim("x")){var l=i.getXScale(),c=Rkt(l,"x",u,s);this.filterView(i,l.field,c)}if(this.hasDim("y")){var f=i.getYScales()[0];c=Rkt(f,"y",u,s);this.filterView(i,f.field,c)}this.reRender(i,{source:Okt.FILTER}),i.emit(Okt.AFTER_FILTER,Ngt.fromData(i,Okt.AFTER_FILTER,a))}},e.prototype.end=function(){this.isStarted=!1},e.prototype.reset=function(){var t=this.context.view;if(t.emit(Okt.BEFORE_RESET,Ngt.fromData(t,Okt.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var e=t.getXScale();this.filterView(t,e.field,null)}if(this.hasDim("y")){var n=t.getYScales()[0];this.filterView(t,n.field,null)}this.reRender(t,{source:Okt.RESET}),t.emit(Okt.AFTER_RESET,Ngt.fromData(t,Okt.AFTER_RESET,{}))},e.prototype.filterView=function(t,e,n){t.filter(e,n)},e.prototype.reRender=function(t,e){t.render(!0,e)},e}(ppt),Nkt=Zkt,zkt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.filterView=function(t,e,n){var r=Wpt(t);(0,_ut.S6)(r,(function(t){t.filter(e,n)}))},e.prototype.reRender=function(t){var e=Wpt(t);(0,_ut.S6)(e,(function(t){t.render(!0)}))},e}(Nkt),Ukt=zkt,Hkt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.filter=function(){var t=_pt(this.context),e=this.context.view,n=Bpt(e);if(Ipt(this.context)){var r=Ppt(this.context,10);r&&(0,_ut.S6)(n,(function(t){r.includes(t)?t.show():t.hide()}))}else if(t){var i=t.component,a=i.get("field");if(Tpt(t)){if(a){var o=i.getItemsByState("unchecked"),u=Xpt(e,a),s=o.map((function(t){return t.name}));(0,_ut.S6)(n,(function(t){var e=Rpt(t,a),n=u.getText(e);s.indexOf(n)>=0?t.hide():t.show()}))}}else if(Fpt(t)){var l=i.getValue(),c=(0,Aut.CR)(l,2),f=c[0],h=c[1];(0,_ut.S6)(n,(function(t){var e=Rpt(t,a);e>=f&&e<=h?t.show():t.hide()}))}}},e.prototype.clear=function(){var t=Bpt(this.context.view);(0,_ut.S6)(t,(function(t){t.show()}))},e.prototype.reset=function(){this.clear()},e}(ppt),Wkt=Hkt,Vkt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.byRecord=!1,e}return(0,Aut.ZT)(e,t),e.prototype.filter=function(){Ipt(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},e.prototype.filterByRecord=function(){var t=this.context.view,e=Ppt(this.context,10);if(e){var n=t.getXScale().field,r=t.getYScales()[0].field,i=e.map((function(t){return t.getModel().data})),a=Wpt(t);(0,_ut.S6)(a,(function(t){var e=Bpt(t);(0,_ut.S6)(e,(function(t){var e=t.getModel().data;Gpt(i,e,n,r)?t.show():t.hide()}))}))}},e.prototype.filterByBBox=function(){var t=this,e=Wpt(this.context.view);(0,_ut.S6)(e,(function(e){var n=jpt(t.context,e,10),r=Bpt(e);n&&(0,_ut.S6)(r,(function(t){n.includes(t)?t.show():t.hide()}))}))},e.prototype.reset=function(){var t=Wpt(this.context.view);(0,_ut.S6)(t,(function(t){var e=Bpt(t);(0,_ut.S6)(e,(function(t){t.show()}))}))},e}(ppt),Gkt=Vkt,Xkt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},e}return(0,Aut.ZT)(e,t),e.prototype.getButtonCfg=function(){return(0,_ut.b$)(this.buttonCfg,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),n=e.addShape({type:"text",name:"button-text",attrs:(0,Aut.pi)({text:t.text},t.textStyle)}).getBBox(),r=Pgt(t.padding),i=e.addShape({type:"rect",name:"button-rect",attrs:(0,Aut.pi)({x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},t.style)});i.toBack(),e.on("mouseenter",(function(){i.attr(t.activeStyle)})),e.on("mouseleave",(function(){i.attr(t.style)})),this.buttonGroup=e},e.prototype.resetPosition=function(){var t=this.context.view.getCoordinate().convert({x:1,y:1}),e=this.buttonGroup,n=e.getBBox(),r=Pct.vs(null,[["t",t.x-n.width-10,t.y+n.height+5]]);e.setMatrix(r)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),t.prototype.destroy.call(this)},e}(ppt),Ykt=Xkt,qkt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.starting=!1,e.dragStart=!1,e}return(0,Aut.ZT)(e,t),e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},e.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),e=this.context.view,n=this.context.event;this.dragStart?e.emit("drag",{target:n.target,x:n.x,y:n.y}):Upt(t,this.startPoint)>4&&(e.emit("dragstart",{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},e.prototype.end=function(){if(this.dragStart){var t=this.context.view,e=this.context.event;t.emit("dragend",{target:e.target,x:e.x,y:e.y})}this.starting=!1,this.dragStart=!1},e}(ppt),$kt=qkt,Jkt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.starting=!1,e.isMoving=!1,e.startPoint=null,e.startMatrix=null,e}return(0,Aut.ZT)(e,t),e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},e.prototype.move=function(){if(this.starting){var t=this.startPoint,e=this.context.getCurrentPoint();if(Upt(t,e)>5&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,r=Pct.vs(this.startMatrix,[["t",e.x-t.x,e.y-t.y]]);n.backgroundGroup.setMatrix(r),n.foregroundGroup.setMatrix(r),n.middleGroup.setMatrix(r)}}},e.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},e.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},e}(ppt),Kkt=Jkt,Qkt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dims=["x","y"],e.cfgFields=["dims"],e.cacheScaleDefs={},e}return(0,Aut.ZT)(e,t),e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.getScale=function(t){var e=this.context.view;return"x"===t?e.getXScale():e.getYScales()[0]},e.prototype.resetDim=function(t){var e=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var n=this.getScale(t);e.scale(n.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},e.prototype.reset=function(){this.resetDim("x"),this.resetDim("y"),this.context.view.render(!0)},e}(ppt),tCt=Qkt,eCt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.starting=!1,e.startCache={},e}return(0,Aut.ZT)(e,t),e.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var e=this.dims;(0,_ut.S6)(e,(function(e){var n=t.getScale(e),r=n.min,i=n.max,a=n.values;t.startCache[e]={min:r,max:i,values:a}}))},e.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},e.prototype.translate=function(){var t=this;if(this.starting){var e=this.startPoint,n=this.context.view.getCoordinate(),r=this.context.getCurrentPoint(),i=n.invert(e),a=n.invert(r),o=a.x-i.x,u=a.y-i.y,s=this.context.view,l=this.dims;(0,_ut.S6)(l,(function(e){t.translateDim(e,{x:-1*o,y:-1*u})})),s.render(!0)}},e.prototype.translateDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.translateLinear(t,n,e)}},e.prototype.translateLinear=function(t,e,n){var r=this.context.view,i=this.startCache[t],a=i.min,o=i.max,u=o-a,s=n[t]*u;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:a,max:o}),r.scale(e.field,{nice:!1,min:a+s,max:o+s})},e.prototype.reset=function(){t.prototype.reset.call(this),this.startPoint=null,this.starting=!1},e}(tCt),nCt=eCt,rCt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zoomRatio=.05,e}return(0,Aut.ZT)(e,t),e.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},e.prototype.zoom=function(t){var e=this,n=this.dims;(0,_ut.S6)(n,(function(n){e.zoomDim(n,t)})),this.context.view.render(!0)},e.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},e.prototype.zoomDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.zoomLinear(t,n,e)}},e.prototype.zoomLinear=function(t,e,n){var r=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:e.min,max:e.max});var i=this.cacheScaleDefs[t],a=i.max-i.min,o=e.min,u=e.max,s=n*a,l=o-s,c=u+s,f=(c-l)/a;c>l&&f<100&&f>.01&&r.scale(e.field,{nice:!1,min:o-s,max:u+s})},e}(tCt),iCt=rCt;var aCt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.scroll=function(t){var e=this.context,n=e.view,r=e.event;if(n.getOptions().scrollbar){var i=(null==t?void 0:t.wheelDelta)||1,a=n.getController("scrollbar"),o=n.getXScale(),u=n.getOptions().data,s=(0,_ut.dp)((0,_ut.I)(u,o.field)),l=(0,_ut.dp)(o.values),c=a.getValue(),f=Math.floor((s-l)*c)+(function(t){return t.gEvent.originalEvent.deltaY>0}(r)?i:-i),h=i/(s-l)/1e4,d=(0,_ut.uZ)(f/(s-l)+h,0,1);a.setValue(d)}},e}(ppt),oCt=aCt,uCt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.show=function(){var t=this.context,e=_pt(t).axis.cfg.title,n=e.description,r=e.text,i=e.descriptionTooltipStyle,a=t.event,o=a.x,u=a.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:r||"",customContent:function(){return'\n          <div class="'.concat($ht,'" style={').concat(i,'}>\n            <div class="').concat(Jht,'">\n              字段说明：').concat(n,"\n            </div>\n          </div>\n        ")},x:o,y:u}),this.tooltip.show()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,e=this.context.view.canvas,n={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},r=new Idt({parent:e.get("el").parentNode,region:n,visible:!1,containerId:"aixs-description-tooltip",domStyles:(0,Aut.pi)({},(0,_ut.b$)({},(t={},t[$ht]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},t[Jht]={"word-break":"break-all","margin-bottom":"3px"},t)))});r.init(),r.setCapture(!1),this.tooltip=r},e}(ppt),sCt=uCt;function lCt(t){return t.isInPlot()}function cCt(t){return t.gEvent.preventDefault(),t.gEvent.originalEvent.deltaY>0}!function(t,e){kgt[(0,_ut.vl)(t)]=Sgt(e)}("dark",lgt(gmt)),Wut("canvas",_),Wut("svg",T),Xgt("Polygon",wbt),Xgt("Interval",dbt),Xgt("Schema",kbt),Xgt("Path",qxt),Xgt("Point",xbt),Xgt("Line",gbt),Xgt("Area",tbt),Xgt("Edge",nbt),Xgt("Heatmap",ibt),Xgt("Violin",Ebt),hvt("base",Bvt),hvt("interval",Bbt),hvt("pie",zbt),hvt("polar",Zbt),dvt("overlap",(function(t,e,n,r){var i=new Hbt;(0,_ut.S6)(e,(function(t){for(var e=t.find((function(t){return"text"===t.get("type")})),n=e.attr(),r=n.x,a=n.y,o=!1,u=0;u<=8;u++){var s=Wbt(e,r,a,u);if(i.hasGap(s)){i.fillGap(s),o=!0;break}}o||t.remove(!0)})),i.destroy()})),dvt("distribute",(function(t,e,n,r){if(t.length&&e.length){var i=t[0]?t[0].offset:0,a=e[0].get("coordinate"),o=a.getRadius(),u=a.getCenter();if(i>0){var s=2*(o+i)+28,l={start:a.start,end:a.end},c=[[],[]];t.forEach((function(t){t&&("right"===t.textAlign?c[0].push(t):c[1].push(t))})),c.forEach((function(t,n){var r=s/14;t.length>r&&(t.sort((function(t,e){return e["..percent"]-t["..percent"]})),t.splice(r,t.length-r)),t.sort((function(t,e){return t.y-e.y})),function(t,e,n,r,i,a){var o,u,s,l=!0,c=r.start,f=r.end,h=Math.min(c.y,f.y),d=Math.abs(c.y-f.y),p=0,g=Number.MIN_VALUE,v=e.map((function(t){return t.y>p&&(p=t.y),t.y<g&&(g=t.y),{size:n,targets:[t.y-h]}}));for(g-=h,p-h>d&&(d=p-h);l;)for(v.forEach((function(t){var e=(Math.min.apply(g,t.targets)+Math.max.apply(g,t.targets))/2;t.pos=Math.min(Math.max(g,e-t.size/2),d-t.size)})),l=!1,s=v.length;s--;)if(s>0){var m=v[s-1],y=v[s];m.pos+m.size>y.pos&&(m.size+=y.size,m.targets=m.targets.concat(y.targets),m.pos+m.size>d&&(m.pos=d-m.size),v.splice(s,1),l=!0)}s=0,v.forEach((function(t){var r=h+n/2;t.targets.forEach((function(){e[s].y=t.pos+r,r+=n,s++}))}));var x={};try{for(var b=(0,Aut.XA)(t),w=b.next();!w.done;w=b.next()){var S=w.value;x[S.get("id")]=S}}catch(k){o={error:k}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(o)throw o.error}}e.forEach((function(t){var e=t.r*t.r,n=Math.pow(Math.abs(t.y-i.y),2);if(e<n)t.x=i.x;else{var r=Math.sqrt(e-n);t.x=a?i.x+r:i.x-r}var o=x[t.id];o.attr("x",t.x),o.attr("y",t.y);var u=(0,_ut.sE)(o.getChildren(),(function(t){return"text"===t.get("type")}));u&&(u.attr("y",t.y),u.attr("x",t.x))}))}(e,t,14,l,u,n)}))}(0,_ut.S6)(t,(function(t){if(t&&t.labelLine){var e=t.offset,n=t.angle,r=Bdt(u.x,u.y,o,n),i=Bdt(u.x,u.y,o+e/2,n),a=t.x+(0,_ut.U2)(t,"offsetX",0),s=t.y+(0,_ut.U2)(t,"offsetY",0),l={x:a-4*Math.cos(n),y:s-4*Math.sin(n)};(0,_ut.Kn)(t.labelLine)||(t.labelLine={}),t.labelLine.path=["M ".concat(r.x),"".concat(r.y," Q").concat(i.x),"".concat(i.y," ").concat(l.x),l.y].join(",")}}))}})),dvt("fixed-overlap",(function(t,e,n,r){var i=new Hbt;(0,_ut.S6)(e,(function(t){var e=t.find((function(t){return"text"===t.get("type")}));(function(t,e,n){void 0===n&&(n=100);var r,i=t.attr(),a=i.x,o=i.y,u=t.getCanvasBBox(),s=Math.sqrt(u.width*u.width+u.height*u.height),l=1,c=0,f=0,h=function(t){var e=.1*t;return[e*Math.cos(e),e*Math.sin(e)]};if(e.hasGap(u))return e.fillGap(u),!0;for(var d=!1,p=0,g={};Math.min(Math.abs(c),Math.abs(f))<s&&p<n;)if(c=~~(r=h(l+=-1))[0],f=~~r[1],(c||f)&&!g["".concat(c,"-").concat(f)]&&(t.attr({x:a+c,y:o+f}),c+f<0&&t.attr("textAlign","right"),p++,e.hasGap(t.getCanvasBBox()))){e.fillGap(t.getCanvasBBox()),d=!0,g["".concat(c,"-").concat(f)]=!0;break}return d})(e,i)||t.remove(!0)})),i.destroy()})),dvt("hide-overlap",(function(t,e,n,r){return(0,Aut.mG)(this,void 0,void 0,(function(){var n,r,i,a,o,u;return(0,Aut.Jh)(this,(function(s){switch(s.label){case 0:return n=e.map((function(e,n){return(0,Aut.pi)((0,Aut.pi)({},_vt(e,t[n],(0,_ut.U2)(t[n],"background.padding"))),{visible:!0})})),r=JSON.stringify(n),i=function(t){return ewt.set(r,t),(0,_ut.S6)(t,(function(t,n){var r=t.visible,i=e[n];r?null==i||i.show():null==i||i.hide()})),t},ewt.get(r)?(i(ewt.get(r)),[3,7]):[3,1];case 1:if(!nwt)return[3,6];s.label=2;case 2:return s.trys.push([2,4,,5]),a=JSON.stringify({type:"hide-overlap",items:n}),[4,nwt.post(a,(function(){return i(twt(n))}))];case 3:return o=s.sent(),i(Array.isArray(o.data)?o.data:[]),[3,5];case 4:return u=s.sent(),console.error(u),i(twt(n)),[3,5];case 5:return[3,7];case 6:i(twt(n)),s.label=7;case 7:return[2]}}))}))})),dvt("limit-in-shape",(function(t,e,n,r){(0,_ut.S6)(e,(function(t,e){var r=t.getCanvasBBox(),i=n[e].getBBox();(r.minX<i.minX||r.minY<i.minY||r.maxX>i.maxX||r.maxY>i.maxY)&&t.remove(!0)}))})),dvt("limit-in-canvas",(function(t,e,n,r){(0,_ut.S6)(e,(function(t){var e=r.minX,n=r.minY,i=r.maxX,a=r.maxY,o=t.getCanvasBBox(),u=o.minX,s=o.minY,l=o.maxX,c=o.maxY,f=o.x,h=o.y,d=o.width,p=o.height,g=f,v=h;(u<e||l<e)&&(g=e),(s<n||c<n)&&(v=n),u>i?g=i-d:l>i&&(g-=l-i),s>a?v=a-p:c>a&&(v-=c-a),g===f&&v===h||Mvt(t,g-f,v-h)}))})),dvt("limit-in-plot",(function(t,e,n,r,i){if(!(e.length<=0)){var a=(null==i?void 0:i.direction)||["top","right","bottom","left"],o=(null==i?void 0:i.action)||"translate",u=(null==i?void 0:i.margin)||0,s=e[0].get("coordinate");if(s){var l=function(t,e){void 0===e&&(e=0);var n=t.start,r=t.end,i=t.getWidth(),a=t.getHeight(),o=Math.min(n.x,r.x),u=Math.min(n.y,r.y);return Wdt.fromRange(o-e,u-e,o+i+e,u+a+e)}(s,u),c=l.minX,f=l.minY,h=l.maxX,d=l.maxY;(0,_ut.S6)(e,(function(t){var e=t.getCanvasBBox(),n=e.minX,r=e.minY,i=e.maxX,u=e.maxY,s=e.x,l=e.y,p=e.width,g=e.height,v=s,m=l;if(a.indexOf("left")>=0&&(n<c||i<c)&&(v=c),a.indexOf("top")>=0&&(r<f||u<f)&&(m=f),a.indexOf("right")>=0&&(n>h?v=h-p:i>h&&(v-=i-h)),a.indexOf("bottom")>=0&&(r>d?m=d-g:u>d&&(m-=u-d)),v!==s||m!==l){var y=v-s;if("translate"===o)Mvt(t,y,m-l);else if("ellipsis"===o){var x=t.findAll((function(t){return"text"===t.get("type")}));x.forEach((function(t){var e=(0,_ut.ei)(t.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),n=t.getCanvasBBox(),r=function(t,e,n){var r,i=fwt("...",n);r=(0,_ut.HD)(t)?t:(0,_ut.BB)(t);var a,o,u=e,s=[];if(fwt(t,n)<=e)return t;for(;a=r.substr(0,16),!((o=fwt(a,n))+i>u&&o>u);)if(s.push(a),u-=o,!(r=r.substr(16)))return s.join("");for(;a=r.substr(0,1),!((o=fwt(a,n))+i>u);)if(s.push(a),u-=o,!(r=r.substr(1)))return s.join("");return"".concat(s.join(""),"...")}(t.attr("text"),n.width-Math.abs(y),e);t.attr("text",r)}))}else t.hide()}}))}}})),dvt("pie-outer",(function(t,e,n,r){var i,a,o=(0,_ut.hX)(t,(function(t){return!(0,_ut.UM)(t)})),u=e[0]&&e[0].get("coordinate");if(u){var s=u.getCenter(),l=u.getRadius(),c={};try{for(var f=(0,Aut.XA)(e),h=f.next();!h.done;h=f.next()){var d=h.value;c[d.get("id")]=d}}catch(k){i={error:k}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var p=(0,_ut.U2)(o[0],"labelHeight",14),g=(0,_ut.U2)(o[0],"offset",0);if(!(g<=0)){var v="right",m=(0,_ut.vM)(o,(function(t){return t.x<s.x?"left":v})),y=u.start,x=u.end,b=Math.min(2*(l+g+p),u.getHeight()),w=b/2,S={minX:y.x,maxX:x.x,minY:s.y-w,maxY:s.y+w};(0,_ut.S6)(m,(function(t,e){var n=Math.floor(b/p);t.length>n&&(t.sort((function(t,e){return e.percent-t.percent})),(0,_ut.S6)(t,(function(t,e){e+1>n&&(c[t.id].set("visible",!1),t.invisible=!0)}))),Ubt(t,p,S)})),(0,_ut.S6)(m,(function(t,e){(0,_ut.S6)(t,(function(t){var n=e===v,r=c[t.id].getChildByIndex(0);if(r){var i=l+g,a=t.y-s.y,o=Math.pow(i,2),f=Math.pow(a,2),h=o-f>0?o-f:0,d=Math.sqrt(h),p=Math.abs(Math.cos(t.angle)*i);t.x=n?s.x+Math.max(d,p):s.x-Math.max(d,p)}r&&(r.attr("y",t.y),r.attr("x",t.x)),function(t,e){var n=e.getCenter(),r=e.getRadius();if(t&&t.labelLine){var i=t.angle,a=t.offset,o=Bdt(n.x,n.y,r,i),u=t.x+(0,_ut.U2)(t,"offsetX",0)*(Math.cos(i)>0?1:-1),s=t.y+(0,_ut.U2)(t,"offsetY",0)*(Math.sin(i)>0?1:-1),l={x:u-4*Math.cos(i),y:s-4*Math.sin(i)},c=t.labelLine.smooth,f=[],h=l.x-n.x,d=l.y-n.y,p=Math.atan(d/h);if(h<0&&(p+=Math.PI),!1===c){(0,_ut.Kn)(t.labelLine)||(t.labelLine={});var g=0;(i<0&&i>-Math.PI/2||i>1.5*Math.PI)&&l.y>o.y&&(g=1),i>=0&&i<Math.PI/2&&l.y>o.y&&(g=1),i>=Math.PI/2&&i<Math.PI&&o.y>l.y&&(g=1),(i<-Math.PI/2||i>=Math.PI&&i<1.5*Math.PI)&&o.y>l.y&&(g=1);var v=a/2>4?4:Math.max(a/2-1,0),m=Bdt(n.x,n.y,r+v,i),y=Bdt(n.x,n.y,r+a/2,p);f.push("M ".concat(o.x," ").concat(o.y)),f.push("L ".concat(m.x," ").concat(m.y)),f.push("A ".concat(n.x," ").concat(n.y," 0 ").concat(0," ").concat(g," ").concat(y.x," ").concat(y.y)),f.push("L ".concat(l.x," ").concat(l.y))}else{m=Bdt(n.x,n.y,r+(a/2>4?4:Math.max(a/2-1,0)),i);var x=o.x<n.x?1:-1;f.push("M ".concat(l.x," ").concat(l.y));var b=(o.y-n.y)/(o.x-n.x),w=(l.y-n.y)/(l.x-n.x);Math.abs(b-w)>Math.pow(Math.E,-16)&&f.push.apply(f,["C",l.x+4*x,l.y,2*m.x-o.x,2*m.y-o.y,o.x,o.y]),f.push("L ".concat(o.x," ").concat(o.y))}t.labelLine.path=f.join(" ")}}(t,u)}))}))}}})),dvt("adjust-color",(function(t,e,n){if(0!==n.length){var r=n[0].get("element").geometry.theme,i=r.labels||{},a=i.fillColorLight,o=i.fillColorDark;n.forEach((function(t,n){var i=e[n].find((function(t){return"text"===t.get("type")})),u=Wdt.fromObject(t.getBBox()),s=Wdt.fromObject(i.getCanvasBBox()),l=!u.contains(s),c=function(t){var e=Tst.toRGB(t).toUpperCase();if(iwt[e])return iwt[e];var n=(0,Aut.CR)(Tst.rgb2arr(e),3);return(299*n[0]+587*n[1]+114*n[2])/1e3<128}(t.attr("fill"));l?i.attr(r.overflowLabels.style):c?a&&i.attr("fill",a):o&&i.attr("fill",o)}))}})),dvt("interval-adjust-position",(function(t,e,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),a=null==i?void 0:i.geometry;if(a&&"interval"===a.type)awt(a,e,n)&&n.forEach((function(t,n){var r=e[n];!function(t,e,n){var r=t.coordinate,i=Wdt.fromObject(n.getBBox()),a=Avt(e);r.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:"center"}):a.attr({y:i.minY+i.height/2,textBaseline:"middle"})}(a,r,t)}))}})),dvt("interval-hide-overlap",(function(t,e,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),a=null==i?void 0:i.geometry;if(a&&"interval"===a.type){var o,u=function(t){var e=[],n=Math.max(Math.floor(t.length/500),1);return(0,_ut.S6)(t,(function(t,r){r%n==0?e.push(t):t.set("visible",!1)})),e}(e),s=(0,Aut.CR)(a.getXYFields(),1)[0],l=[],c=[],f=(0,_ut.vM)(u,(function(t){return t.get("data")[s]})),h=(0,_ut.jj)((0,_ut.UI)(u,(function(t){return t.get("data")[s]})));u.forEach((function(t){t.set("visible",!0)}));var d=function(t){t&&(t.length&&c.push(t.pop()),c.push.apply(c,(0,Aut.ev)([],(0,Aut.CR)(t),!1)))};for((0,_ut.dp)(h)>0&&(o=h.shift(),d(f[o])),(0,_ut.dp)(h)>0&&(o=h.pop(),d(f[o])),(0,_ut.S6)(h.reverse(),(function(t){d(f[t])}));c.length>0;){var p=c.shift();p.get("visible")&&(Dvt(p,l)?p.set("visible",!1):l.push(p))}}}})),dvt("point-adjust-position",(function(t,e,n,r,i){var a,o;if(0!==n.length){var u=null===(a=n[0])||void 0===a?void 0:a.get("element"),s=null==u?void 0:u.geometry;if(s&&"point"===s.type){var l=(0,Aut.CR)(s.getXYFields(),2),c=l[0],f=l[1],h=(0,_ut.vM)(e,(function(t){return t.get("data")[c]})),d=[],p=i&&i.offset||(null===(o=t[0])||void 0===o?void 0:o.offset)||12;(0,_ut.UI)((0,_ut.XP)(h).reverse(),(function(t){for(var e=function(t,e){var n=t.getXYFields()[1],r=[],i=e.sort((function(t,e){return t.get("data")[n]-t.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,(0,Aut.ev)([],(0,Aut.CR)(i),!1)),r}(s,h[t]);e.length;){var n=e.shift(),r=Avt(n);if(owt(d,n,(function(t,e){return t.get("data")[c]===e.get("data")[c]&&t.get("data")[f]===e.get("data")[f]})))r.set("visible",!1);else{var i=!1;uwt(d,n)&&(r.attr("y",r.attr("y")+2*p),i=uwt(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),dvt("pie-spider",(function(t,e,n,r){var i,a,o=e[0]&&e[0].get("coordinate");if(o){var u=o.getCenter(),s=o.getRadius(),l={};try{for(var c=(0,Aut.XA)(e),f=c.next();!f.done;f=c.next()){var h=f.value;l[h.get("id")]=h}}catch(k){i={error:k}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}var d=(0,_ut.U2)(t[0],"labelHeight",14),p=Math.max((0,_ut.U2)(t[0],"offset",0),4);(0,_ut.S6)(t,(function(t){if(t&&(0,_ut.U2)(l,[t.id])){var e=t.x>u.x||t.x===u.x&&t.y>u.y,n=(0,_ut.UM)(t.offsetX)?4:t.offsetX,r=Bdt(u.x,u.y,s+4,t.angle),i=p+n;t.x=u.x+(e?1:-1)*(s+i),t.y=r.y}}));var g=o.start,v=o.end,m="right",y=(0,_ut.vM)(t,(function(t){return t.x<u.x?"left":m})),x=2*(s+p)+d;(0,_ut.S6)(y,(function(t){var e=t.length*d;e>x&&(x=Math.min(e,Math.abs(g.y-v.y)))}));var b={minX:g.x,maxX:v.x,minY:u.y-x/2,maxY:u.y+x/2};(0,_ut.S6)(y,(function(t,e){var n=x/d;t.length>n&&(t.sort((function(t,e){return e.percent-t.percent})),(0,_ut.S6)(t,(function(t,e){e>n&&(l[t.id].set("visible",!1),t.invisible=!0)}))),Ubt(t,d,b)}));var w=b.minY,S=b.maxY;(0,_ut.S6)(y,(function(t,e){var n=e===m;(0,_ut.S6)(t,(function(t){var e=(0,_ut.U2)(l,t&&[t.id]);if(e)if(t.y<w||t.y>S)e.set("visible",!1);else{var r=e.getChildByIndex(0),i=r.getCanvasBBox(),a=n?i.x:i.maxX,u=i.y+i.height/2;Mvt(r,t.x-a,t.y-u),t.labelLine&&function(t,e,n){var r,i=e.getCenter(),a=e.getRadius(),o={x:t.x-(n?4:-4),y:t.y},u=Bdt(i.x,i.y,a+4,t.angle),s={x:o.x,y:o.y},l={x:u.x,y:u.y},c=Bdt(i.x,i.y,a,t.angle);if(o.y!==u.y){var f=n?4:-4;s.y=o.y,t.angle<0&&t.angle>=-Math.PI/2&&(s.x=Math.max(u.x,o.x-f),o.y<u.y?l.y=s.y:(l.y=u.y,l.x=Math.max(l.x,s.x-f))),t.angle>0&&t.angle<Math.PI/2&&(s.x=Math.max(u.x,o.x-f),o.y>u.y?l.y=s.y:(l.y=u.y,l.x=Math.max(l.x,s.x-f))),t.angle>Math.PI/2&&(s.x=Math.min(u.x,o.x-f),o.y>u.y?l.y=s.y:(l.y=u.y,l.x=Math.min(l.x,s.x-f))),t.angle<-Math.PI/2&&(s.x=Math.min(u.x,o.x-f),o.y<u.y?l.y=s.y:(l.y=u.y,l.x=Math.min(l.x,s.x-f)))}r=["M ".concat(o.x,",").concat(o.y),"L ".concat(s.x,",").concat(s.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(u.x,",").concat(u.y),"L ".concat(c.x,",").concat(c.y)].join(" "),t.labelLine=(0,_ut.b$)({},t.labelLine,{path:r})}(t,o,n)}}))}))}})),dvt("path-adjust-position",(function(t,e,n,r,i){var a,o;if(0!==n.length){var u=null===(a=n[0])||void 0===a?void 0:a.get("element"),s=null==u?void 0:u.geometry;if(s&&!(["path","line","area"].indexOf(s.type)<0)){var l=(0,Aut.CR)(s.getXYFields(),2),c=l[0],f=l[1],h=(0,_ut.vM)(e,(function(t){return t.get("data")[c]})),d=[],p=i&&i.offset||(null===(o=t[0])||void 0===o?void 0:o.offset)||12;(0,_ut.UI)((0,_ut.XP)(h).reverse(),(function(t){for(var e=function(t,e){var n=t.getXYFields()[1],r=[],i=e.sort((function(t,e){return t.get("data")[n]-t.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,(0,Aut.ev)([],(0,Aut.CR)(i),!1)),r}(s,h[t]);e.length;){var n=e.shift(),r=Avt(n);if(swt(d,n,(function(t,e){return t.get("data")[c]===e.get("data")[c]&&t.get("data")[f]===e.get("data")[f]})))r.set("visible",!1);else{var i=!1;lwt(d,n)&&(r.attr("y",r.attr("y")+2*p),i=lwt(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),evt("fade-in",(function(t,e,n){var r={fillOpacity:(0,_ut.UM)(t.attr("fillOpacity"))?1:t.attr("fillOpacity"),strokeOpacity:(0,_ut.UM)(t.attr("strokeOpacity"))?1:t.attr("strokeOpacity"),opacity:(0,_ut.UM)(t.attr("opacity"))?1:t.attr("opacity")};t.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),t.animate(r,e)})),evt("fade-out",(function(t,e,n){var r=e.easing,i=e.duration,a=e.delay;t.animate({fillOpacity:0,strokeOpacity:0,opacity:0},i,r,(function(){t.remove(!0)}),a)})),evt("grow-in-x",(function(t,e,n){hwt(t,e,n.coordinate,n.minYPoint,"x")})),evt("grow-in-xy",(function(t,e,n){hwt(t,e,n.coordinate,n.minYPoint,"xy")})),evt("grow-in-y",(function(t,e,n){hwt(t,e,n.coordinate,n.minYPoint,"y")})),evt("scale-in-x",(function(t,e,n){var r=t.getBBox(),i=t.get("origin").mappingData.points,a=i[0].y-i[1].y>0?r.maxX:r.minX,o=(r.minY+r.maxY)/2;t.applyToMatrix([a,o,1]);var u=Pct.vs(t.getMatrix(),[["t",-a,-o],["s",.01,1],["t",a,o]]);t.setMatrix(u),t.animate({matrix:Pct.vs(t.getMatrix(),[["t",-a,-o],["s",100,1],["t",a,o]])},e)})),evt("scale-in-y",(function(t,e,n){var r=t.getBBox(),i=t.get("origin").mappingData,a=(r.minX+r.maxX)/2,o=i.points,u=o[0].y-o[1].y<=0?r.maxY:r.minY;t.applyToMatrix([a,u,1]);var s=Pct.vs(t.getMatrix(),[["t",-a,-u],["s",1,.01],["t",a,u]]);t.setMatrix(s),t.animate({matrix:Pct.vs(t.getMatrix(),[["t",-a,-u],["s",1,100],["t",a,u]])},e)})),evt("wave-in",(function(t,e,n){var r=Ydt(n.coordinate,20),i=r.type,a=r.startState,o=r.endState,u=t.setClip({type:i,attrs:a});n.toAttrs&&t.attr(n.toAttrs),u.animate(o,(0,Aut.pi)((0,Aut.pi)({},e),{callback:function(){t&&!t.get("destroyed")&&t.set("clipShape",null),u.remove(!0)}}))})),evt("zoom-in",(function(t,e,n){vwt(t,e,"zoomIn")})),evt("zoom-out",(function(t,e,n){vwt(t,e,"zoomOut")})),evt("position-update",(function(t,e,n){var r=n.toAttrs,i=r.x,a=r.y;delete r.x,delete r.y,t.attr(r),t.animate({x:i,y:a},e)})),evt("sector-path-update",(function(t,e,n){var r=n.toAttrs,i=n.coordinate,a=r.path||[],o=a.map((function(t){return t[0]}));if(!(a.length<1)){var u=gwt(a),s=u.startAngle,l=u.endAngle,c=u.radius,f=u.innerRadius,h=gwt(t.attr("path")),d=h.startAngle,p=h.endAngle,g=i.getCenter(),v=s-d,m=l-p;0!==v||0!==m?t.animate((function(t){var e=d+t*v,n=p+t*m;return(0,Aut.pi)((0,Aut.pi)({},r),{path:(0,_ut.Xy)(o,["M","A","A","Z"])?Rdt(g.x,g.y,c,e,n):Ldt(g.x,g.y,c,e,n,f)})}),(0,Aut.pi)((0,Aut.pi)({},e),{callback:function(){t.attr("path",a)}})):t.attr("path",a)}})),evt("path-in",(function(t,e,n){var r=t.getTotalLength();t.attr("lineDash",[r]),t.animate((function(t){return{lineDashOffset:(1-t)*r}}),e)})),hpt("rect",Awt),hpt("mirror",Mwt),hpt("list",Swt),hpt("matrix",Cwt),hpt("circle",bwt),hpt("tree",Dwt),Bgt("axis",Hwt),Bgt("legend",Ywt),Bgt("tooltip",Kgt),Bgt("annotation",jwt),Bgt("slider",$wt),Bgt("scrollbar",Kwt),xpt("tooltip",iSt),xpt("sibling-tooltip",oSt),xpt("ellipsis-text",sSt),xpt("element-active",gSt),xpt("element-single-active",ESt),xpt("element-range-active",wSt),xpt("element-highlight",PSt),xpt("element-highlight-by-x",RSt),xpt("element-highlight-by-color",BSt),xpt("element-single-highlight",USt),xpt("element-range-highlight",NSt),xpt("element-sibling-highlight",NSt,{effectSiblings:!0,effectByRecord:!0}),xpt("element-selected",GSt),xpt("element-single-selected",YSt),xpt("element-range-selected",WSt),xpt("element-link-by-color",mSt),xpt("active-region",nSt),xpt("list-active",KSt),xpt("list-selected",okt),xpt("list-highlight",ikt),xpt("list-unchecked",skt),xpt("list-checked",hkt),xpt("list-focus",gkt),xpt("list-radio",xkt),xpt("legend-item-highlight",ikt,{componentNames:["legend"]}),xpt("axis-label-highlight",ikt,{componentNames:["axis"]}),xpt("axis-description",sCt),xpt("rect-mask",Ekt),xpt("x-rect-mask",_kt,{dim:"x"}),xpt("y-rect-mask",_kt,{dim:"y"}),xpt("circle-mask",kkt),xpt("path-mask",Tkt),xpt("smooth-path-mask",Ikt),xpt("cursor",jkt),xpt("data-filter",Lkt),xpt("brush",Nkt),xpt("brush-x",Nkt,{dims:["x"]}),xpt("brush-y",Nkt,{dims:["y"]}),xpt("sibling-filter",Ukt),xpt("sibling-x-filter",Ukt),xpt("sibling-y-filter",Ukt),xpt("element-filter",Wkt),xpt("element-sibling-filter",Gkt),xpt("element-sibling-filter-record",Gkt,{byRecord:!0}),xpt("view-drag",$kt),xpt("view-move",Kkt),xpt("scale-translate",nCt),xpt("scale-zoom",iCt),xpt("reset-button",Ykt,{name:"reset-button",text:"reset"}),xpt("mousewheel-scroll",oCt),ugt("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),ugt("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),ugt("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),ugt("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),ugt("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),ugt("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),ugt("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),ugt("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),ugt("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),ugt("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),ugt("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),ugt("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(t){return!t.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),ugt("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:lCt,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:lCt,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:lCt,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),ugt("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),ugt("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:lCt,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:lCt,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:lCt,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),ugt("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:lCt,action:"path-mask:start"},{trigger:"mousedown",isEnable:lCt,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),ugt("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),ugt("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(t){return!t.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]}),ugt("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),ugt("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),ugt("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]}),ugt("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),ugt("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]}),ugt("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(t){return cCt(t.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(t){return!cCt(t.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),ugt("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),ugt("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});var fCt,hCt=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];!function(t){t.ERROR="error",t.WARN="warn",t.INFO="log"}(fCt||(fCt={}));var dCt="AntV/G2Plot";function pCt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=0;return dCt+": "+t.replace(/%s/g,(function(){return""+e[r++]}))}function gCt(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e||console[t](pCt.apply(void 0,(0,Aut.pr)([n],r)))}function vCt(t,e){var n={};return null!==t&&"object"==typeof t&&e.forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}function mCt(t,e){if(!t)return{};var n=t.filter((function(t){var n=(0,_ut.U2)(t,[e]);return(0,_ut.hj)(n)&&!isNaN(n)})),r=n.every((function(t){return(0,_ut.U2)(t,[e])>=0})),i=n.every((function(t){return(0,_ut.U2)(t,[e])<=0}));return r?{min:0}:i?{max:0}:{}}function yCt(t,e,n,r,i){if(void 0===i&&(i=[]),!Array.isArray(t))return{nodes:[],links:[]};var a=[],o={},u=-1;return t.forEach((function(t){var s=t[e],l=t[n],c=t[r],f=vCt(t,i);o[s]||(o[s]=(0,Aut.pi)({id:++u,name:s},f)),o[l]||(o[l]=(0,Aut.pi)({id:++u,name:l},f)),a.push((0,Aut.pi)({source:o[s].id,target:o[l].id,value:c},f))})),{nodes:Object.values(o).sort((function(t,e){return t.id-e.id})),links:a}}function xCt(t,e){var n=(0,_ut.hX)(t,(function(t){var n=t[e];return null===n||"number"==typeof n&&!isNaN(n)}));return gCt(fCt.WARN,n.length===t.length,"illegal data existed in chart data."),n}var bCt,wCt={}.toString,SCt=function(t,e){return wCt.call(t)==="[object "+e+"]"},kCt=function(t){return SCt(t,"Array")},CCt=function(t){if(!function(t){return"object"==typeof t&&null!==t}(t)||!SCt(t,"Object"))return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},ECt=function t(e,n,r,i){for(var a in r=r||0,i=i||5,n)if(Object.prototype.hasOwnProperty.call(n,a)){var o=n[a];o?CCt(o)?(CCt(e[a])||(e[a]={}),r<i?t(e[a],o,r+1,i):e[a]=n[a]):kCt(o)?(e[a]=[],e[a]=e[a].concat(o)):e[a]=o:e[a]=o}},MCt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)ECt(t,e[r]);return t};function OCt(t){if(!t)return{width:0,height:0};var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function ACt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce((function(t,e){return e(t)}),e)}}function _Ct(t,e){return t.geometries.find((function(t){return t.type===e}))}function DCt(t){return(0,_ut.u4)(t.geometries,(function(t,e){return t.concat(e.elements)}),[])}function TCt(t){return(0,_ut.U2)(t,["views","length"],0)<=0?DCt(t):(0,_ut.u4)(t.views,(function(t,e){return t.concat(TCt(e))}),DCt(t))}function FCt(t){if(!(0,_ut.P9)(t,"Object"))return t;var e=(0,Aut.pi)({},t);return e.formatter&&!e.content&&(e.content=e.formatter),e}(0,_ut.HP)((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=void 0===r?"sans-serif":r,a=e.fontWeight,o=e.fontStyle,u=e.fontVariant,s=(bCt||(bCt=document.createElement("canvas").getContext("2d")),bCt);return s.font=[o,a,u,n+"px",i].join(" "),s.measureText((0,_ut.HD)(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),(0,Aut.pr)([t],(0,_ut.VO)(e)).join("")}));function ICt(t){return"number"==typeof t&&!isNaN(t)}function PCt(t){if((0,_ut.hj)(t))return[t,t,t,t];if((0,_ut.kJ)(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}function jCt(t,e,n){void 0===e&&(e="bottom"),void 0===n&&(n=25);var r=PCt(t),i=[e.startsWith("top")?n:0,e.startsWith("right")?n:0,e.startsWith("bottom")?n:0,e.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function BCt(t){var e=t.map((function(t){return PCt(t)})),n=[0,0,0,0];return e.length>0&&(n=n.map((function(t,n){return e.forEach((function(r,i){t+=e[i][n]})),t}))),n}function LCt(t,e,n){for(var r=!!e,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);var u,s,l,c=function(t,e,n,r){var i,a,o,u,s=[],l=!!r;if(l){o=[1/0,1/0],u=[-1/0,-1/0];for(var c=0,f=t.length;c<f;c++){var h=t[c];o=Zct.VV([0,0],o,h),u=Zct.Fp([0,0],u,h)}o=Zct.VV([0,0],o,r[0]),u=Zct.Fp([0,0],u,r[1])}c=0;for(var d=t.length;c<d;c++){if(h=t[c],n)i=t[c?c-1:d-1],a=t[(c+1)%d];else{if(0===c||c===d-1){s.push(h);continue}i=t[c-1],a=t[c+1]}var p=[0,0];p=Zct.lu(p,a,i),p=Zct.bA(p,p,e);var g=Zct.TE(h,i),v=Zct.TE(h,a),m=g+v;0!==m&&(g/=m,v/=m);var y=Zct.bA([0,0],p,-g),x=Zct.bA([0,0],p,v),b=Zct.IH([0,0],h,y),w=Zct.IH([0,0],h,x);l&&(b=Zct.Fp([0,0],b,o),b=Zct.VV([0,0],b,u),w=Zct.Fp([0,0],w,o),w=Zct.VV([0,0],w,u)),s.push(b),s.push(w)}return n&&s.push(s.shift()),s}(i,.4,r,n),f=i.length,h=[];for(a=0;a<f-1;a++)u=c[2*a],s=c[2*a+1],l=i[a+1],h.push(["C",u[0],u[1],s[0],s[1],l[0],l[1]]);return r&&(u=c[f],s=c[f+1],l=i[0],h.push(["C",u[0],u[1],s[0],s[1],l[0],l[1]])),h}function RCt(t){return t?t.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g).map((function(t){return t.toLowerCase()})).join("-"):t}function ZCt(t){var e={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];(0,_ut.U2)(t,"fill")&&(e.color=t.fill);var r=vCt(t,n),i=r.shadowColor,a=r.shadowBlur,o=void 0===a?0:a,u=r.shadowOffsetX,s=void 0===u?0:u,l=r.shadowOffsetY,c=void 0===l?0:l;e["text-shadow"]=""+[i,s+"px",c+"px",o+"px"].join(" ");var f=vCt(t,n),h=f.stroke,d=f.lineWidth,p=void 0===d?0:d;return e["-webkit-text-stroke"]=""+[p+"px",h].join(" "),(0,_ut.S6)(t,(function(t,r){["fontSize"].includes(r)&&(0,_ut.hj)(t)?e[RCt(r)]=t+"px":r&&!n.includes(r)&&(e[RCt(r)]=""+t)})),e}function NCt(t,e){t.style["pointer-events"]="none",(0,_ut.S6)(e,(function(e,n){n&&e&&(t.style[n]=e)}))}var zCt=function(t,e,n){var r=e.statistic,i=e.plotType,a=r.title,o=r.content;[a,o].forEach((function(e,r){if(e){var u="";u=0===r?o?"translate(-50%, -100%)":"translate(-50%, -50%)":a?"translate(-50%, 0)":"translate(-50%, -50%)";var s=(0,_ut.mf)(e.style)?e.style(n):e.style;t.annotation().html((0,Aut.pi)({position:["50%","50%"],html:function(t,r){var a=r.getCoordinate(),o=0;if("pie"===i||"ring-progress"===i)o=a.getRadius()*a.innerRadius*2;else if("liquid"===i){var l=(0,_ut.U2)(r.geometries,[0,"elements",0,"shape"]);if(l){var c=l.find((function(t){return"wrap"===t.get("name")}));o=c.getCanvasBBox().width}}else o||(o=a.getWidth());NCt(t,(0,Aut.pi)({width:o+"px",transform:u},ZCt(s)));var f=r.getData();if(e.customHtml)return e.customHtml(t,r,n,f);var h=e.content;return e.formatter&&(h=e.formatter(n,f)),h?(0,_ut.HD)(h)?h:""+h:"<div></div>"},key:(0===r?"top":"bottom")+"-statistic"},vCt(e,["offsetX","offsetY","rotate","style","formatter"])))}}))};function UCt(t,e){return e?(0,_ut.u4)(e,(function(t,e,n){return t.replace(new RegExp("{\\s*"+n+"\\s*}","g"),e)}),t):t}function HCt(t,e){return t.views.find((function(t){return t.id===e}))}function WCt(t){var e=t.parent;return e?e.views:[]}function VCt(t){return WCt(t).filter((function(e){return e!==t}))}function GCt(t,e,n){void 0===n&&(n=t.geometries),"boolean"==typeof e?t.animate(e):t.animate(!0),(0,_ut.S6)(n,(function(t){var n;n=(0,_ut.mf)(e)?e(t.type||t.shapeType,t)||!0:e,t.animate(n)}))}function XCt(){return"object"==typeof window?null===window||void 0===window?void 0:window.devicePixelRatio:2}function YCt(t,e){void 0===e&&(e=t);var n=document.createElement("canvas"),r=XCt();return n.width=t*r,n.height=e*r,n.style.width=t+"px",n.style.height=e+"px",n.getContext("2d").scale(r,r),n}function qCt(t,e,n,r){void 0===r&&(r=n);var i=e.backgroundColor,a=e.opacity;t.globalAlpha=a,t.fillStyle=i,t.beginPath(),t.fillRect(0,0,n,r),t.closePath()}function $Ct(t,e,n){var r=t+e;return n?2*r:r}function JCt(t,e){return e?[[t*(1/4),t*(1/4)],[t*(3/4),t*(3/4)]]:[[.5*t,.5*t]]}function KCt(t,e){var n=e*Math.PI/180;return{a:Math.cos(n)*(1/t),b:Math.sin(n)*(1/t),c:-Math.sin(n)*(1/t),d:Math.cos(n)*(1/t),e:0,f:0}}var QCt={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function tEt(t,e,n,r){var i=e.size,a=e.fill,o=e.lineWidth,u=e.stroke,s=e.fillOpacity;t.beginPath(),t.globalAlpha=s,t.fillStyle=a,t.strokeStyle=u,t.lineWidth=o,t.arc(n,r,i/2,0,2*Math.PI,!1),t.fill(),o&&t.stroke(),t.closePath()}var eEt={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function nEt(t){var e=MCt({},eEt,t),n=e.spacing,r=e.rotation,i=e.lineWidth,a=n+i||1,o=n+i||1,u="\n            M 0 0 L "+a+" 0\n            M 0 "+o+" L "+a+" "+o+"\n            ",s=YCt(a,o),l=s.getContext("2d");qCt(l,e,a,o),function(t,e,n){var r=e.stroke,i=e.lineWidth,a=e.strokeOpacity,o=new Path2D(n);t.globalAlpha=a,t.lineCap="square",t.strokeStyle=i?r:"transparent",t.lineWidth=i,t.stroke(o)}(l,e,u);var c=l.createPattern(s,"repeat");if(c){var f=KCt(XCt(),r);c.setTransform(f)}return c}var rEt={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function iEt(t,e,n,r){var i=e.stroke,a=e.size,o=e.fill,u=e.lineWidth,s=e.fillOpacity;t.globalAlpha=s,t.strokeStyle=i,t.lineWidth=u,t.fillStyle=o,t.strokeRect(n-a/2,r-a/2,a,a),t.fillRect(n-a/2,r-a/2,a,a)}function aEt(t){var e,n=t.type,r=t.cfg;switch(n){case"dot":e=function(t){var e=MCt({},QCt,t),n=e.size,r=e.padding,i=e.isStagger,a=e.rotation,o=$Ct(n,r,i),u=JCt(o,i),s=YCt(o,o),l=s.getContext("2d");qCt(l,e,o);for(var c=0,f=u;c<f.length;c++){var h=f[c];tEt(l,e,h[0],h[1])}var d=l.createPattern(s,"repeat");if(d){var p=KCt(XCt(),a);d.setTransform(p)}return d}(r);break;case"line":e=nEt(r);break;case"square":e=function(t){var e=MCt({},rEt,t),n=e.size,r=e.padding,i=e.isStagger,a=e.rotation,o=$Ct(n,r,i),u=JCt(o,i),s=YCt(o,o),l=s.getContext("2d");qCt(l,e,o);for(var c=0,f=u;c<f.length;c++){var h=f[c];iEt(l,e,h[0],h[1])}var d=l.createPattern(s,"repeat");if(d){var p=KCt(XCt(),a);d.setTransform(p)}return d}(r)}return e}function oEt(t){var e=this;return function(n){var r,i=n.options,a=n.chart,o=i.pattern;if(!o)return n;return MCt({},n,{options:(r={},r[t]=function(n){for(var r,u,s,l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];var f=a.getTheme().defaultColor,h=f,d=null===(u=null===(r=a.geometries)||void 0===r?void 0:r[0])||void 0===u?void 0:u.getAttribute("color");if(d){var p=d.getFields()[0],g=(0,_ut.U2)(n,p);h=nmt.getMappingValue(d,g,(null===(s=d.values)||void 0===s?void 0:s[0])||f)}var v=o;"function"==typeof o&&(v=o.call(e,n,h)),v instanceof CanvasPattern==!1&&(v=aEt(MCt({},{cfg:{backgroundColor:h}},v)));var m=i[t];return(0,Aut.pi)((0,Aut.pi)({},"function"==typeof m?m.call.apply(m,(0,Aut.pr)([e,n],l)):m||{}),{fill:v||h})},r)})}}function uEt(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.seriesField;return!1===r?e.legend(!1):(i||a)&&e.legend(i||a,r),t}function sEt(t){var e=t.chart,n=t.options.tooltip;return void 0!==n&&e.tooltip(n),t}function lEt(t){var e=t.chart,n=t.options.interactions;return(0,_ut.S6)(n,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg||{})})),t}function cEt(t){return GCt(t.chart,t.options.animation),t}function fEt(t){var e=t.chart,n=t.options.theme;return n&&e.theme(n),t}function hEt(t){var e=t.chart,n=t.options.state;return n&&(0,_ut.S6)(e.geometries,(function(t){t.state(n)})),t}function dEt(t){var e=t.chart,n=t.options.slider;return e.option("slider",n),t}function pEt(t){var e=t.chart,n=t.options.scrollbar;return e.option("scrollbar",n),t}function gEt(t,e){return function(n){var r=n.chart,i=n.options,a={};return(0,_ut.S6)(t,(function(t,e){a[e]=vCt(t,hCt)})),a=MCt({},e,i.meta,a),r.scale(a),n}}function vEt(t){return function(e){var n=e.chart,r=e.options,i=n.getController("annotation");return(0,_ut.S6)((0,Aut.pr)(r.annotations||[],t||[]),(function(t){i.annotation(t)})),e}}function mEt(t){var e=t.chart,n=t.options,r=n.yAxis,i=n.limitInPlot,a=i;return(0,_ut.Kn)(r)&&(0,_ut.UM)(i)&&(a=!!Object.values(vCt(r,["min","max","minLimit","maxLimit"])).some((function(t){return!(0,_ut.UM)(t)}))),e.limitInPlot=a,t}function yEt(t){return void 0===t&&(t="rect"),function(e){var n=e.chart,r=e.options.coordinate,i=Array.from(r||[]).map((function(t){return"reflectX"===t.type?["reflect","x"]:"reflectY"===t.type?["reflect","y"]:"transpose"===t.type?["transpose"]:null})).filter((function(t){return!!t}));return 0!==i.length&&n.coordinate({type:t,actions:i}),e}}var xEt={locale:"en-US"};var bEt={};function wEt(t,e){bEt[t]=e}function SEt(t){return{get:function(e,n){return UCt((0,_ut.U2)(bEt[t],e)||(0,_ut.U2)(bEt[xEt.locale],e)||(0,_ut.U2)(bEt["en-US"],e)||e,n)}}}function kEt(t,e){if(!1===t)return{fields:!1};var n=(0,_ut.U2)(t,"fields"),r=(0,_ut.U2)(t,"formatter");return r&&!n&&(n=e),{fields:n,formatter:r}}function CEt(t,e){var n=t.type,r=t.xField,i=t.yField,a=t.colorField,o=t.shapeField,u=t.sizeField,s=t.styleField,l=t.rawFields,c=[];if(l=((0,_ut.mf)(l)?l(n,e):l)||[],"color"===e)c=(0,Aut.pr)([a||r],l);else if("shape"===e)c=(0,Aut.pr)([o||r],l);else if("size"===e)c=(0,Aut.pr)([u||r],l);else{c=(0,Aut.pr)([r,i,a,o,u,s],l);var f=["x","y","color","shape","size","style"].indexOf(e),h=c[f];c.splice(f,1),c.unshift(h)}var d=(0,_ut.jj)(c.filter((function(t){return!!t}))),p="line"===n&&[r,i].includes(d.join("*"))?"":d.join("*");return{mappingFields:d,tileMappingField:p}}function EEt(t,e){if(e)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return t.forEach((function(t,e){i[t]=n[e]})),delete i[void 0],e(i)}}function MEt(t){var e=t.chart,n=t.options,r=n.type,i=n.args,a=n.mapping,o=n.xField,u=n.yField,s=n.colorField,l=n.shapeField,c=n.sizeField,f=n.tooltipFields,h=n.label,d=n.state,p=n.customInfo;if(!a)return t;var g=a.color,v=a.shape,m=a.size,y=a.style,x=a.tooltip,b=e[r](i).position(o+"*"+u);if((0,_ut.HD)(g))s?b.color(s,g):b.color(g);else if((0,_ut.mf)(g)){var w=CEt(n,"color"),S=w.mappingFields,k=w.tileMappingField;b.color(k,EEt(S,g))}else s&&b.color(s,g);if((0,_ut.HD)(v))l?b.shape(l,[v]):b.shape(v);else if((0,_ut.mf)(v)){var C=CEt(n,"shape");S=C.mappingFields,k=C.tileMappingField;b.shape(k,EEt(S,v))}else l&&b.shape(l,v);if((0,_ut.hj)(m))c?b.size(c,m):b.size(m);else if((0,_ut.mf)(m)){var E=CEt(n,"size");S=E.mappingFields,k=E.tileMappingField;b.size(k,EEt(S,m))}else c&&b.size(c,m);if((0,_ut.mf)(y)){var M=CEt(n,"style");S=M.mappingFields,k=M.tileMappingField;b.style(k,EEt(S,y))}else(0,_ut.Kn)(y)&&b.style(y);if(!1===f?b.tooltip(!1):(0,_ut.xb)(f)||b.tooltip(f.join("*"),EEt(f,x)),!1===h)b.label(!1);else if(h){var O=h.callback,A=h.fields,_=(0,Aut._T)(h,["callback","fields"]);b.label({fields:A||[u],callback:O,cfg:FCt(_)})}return d&&b.state(d),p&&b.customInfo(p),[o,u].filter((function(t){return t!==s})).forEach((function(t){e.legend(t,!1)})),(0,Aut.pi)((0,Aut.pi)({},t),{ext:{geometry:b}})}function OEt(t){var e=t.options,n=e.area,r=e.xField,i=e.yField,a=e.seriesField,o=e.smooth,u=e.tooltip,s=e.useDeferredLabel,l=kEt(u,[r,i,a]),c=l.fields,f=l.formatter;return n?MEt(MCt({},t,{options:{type:"area",colorField:a,tooltipFields:c,mapping:(0,Aut.pi)({shape:o?"smooth":"area",tooltip:f},n),args:{useDeferredLabel:s}}})):t}function AEt(t){var e=t.options,n=e.edge,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,u=e.useDeferredLabel,s=kEt(o,[r,i,a]),l=s.fields,c=s.formatter;return n?MEt(MCt({},t,{options:{type:"edge",colorField:a,tooltipFields:l,mapping:(0,Aut.pi)({tooltip:c},n),args:{useDeferredLabel:u}}})):t}function _Et(t){var e=t.options,n=e.xField,r=e.yField,i=e.interval,a=e.seriesField,o=e.tooltip,u=e.minColumnWidth,s=e.maxColumnWidth,l=e.columnBackground,c=e.dodgePadding,f=e.intervalPadding,h=e.useDeferredLabel,d=kEt(o,[n,r,a]),p=d.fields,g=d.formatter,v=(i?MEt(MCt({},t,{options:{type:"interval",colorField:a,tooltipFields:p,mapping:(0,Aut.pi)({tooltip:g},i),args:{dodgePadding:c,intervalPadding:f,minColumnWidth:u,maxColumnWidth:s,background:l,useDeferredLabel:h}}})):t).ext;return function(t){var e=t.chart,n=t.options,r=t.ext,i=n.seriesField,a=n.isGroup,o=n.isStack,u=n.marginRatio,s=n.widthRatio,l=n.groupField,c=n.theme,f=[];return i&&(a&&f.push({type:"dodge",dodgeBy:l||i,marginRatio:u}),o&&f.push({type:"stack",marginRatio:u})),f.length&&(null==r?void 0:r.geometry)&&(null==r?void 0:r.geometry).adjust(f),(0,_ut.UM)(s)||e.theme(MCt({},(0,_ut.Kn)(c)?c:Cgt(c),{columnWidthRatio:s})),t}((0,Aut.pi)((0,Aut.pi)({},t),{ext:v}))}function DEt(t){var e=t.options,n=e.line,r=e.stepType,i=e.xField,a=e.yField,o=e.seriesField,u=e.smooth,s=e.connectNulls,l=e.tooltip,c=e.useDeferredLabel,f=kEt(l,[i,a,o]),h=f.fields,d=f.formatter;return n?MEt(MCt({},t,{options:{type:"line",colorField:o,tooltipFields:h,mapping:(0,_ut.b$)({shape:r||(u?"smooth":"line"),tooltip:d},n),args:{connectNulls:s,useDeferredLabel:c}}})):t}function TEt(t){var e=t.options,n=e.point,r=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,u=e.shapeField,s=e.tooltip,l=e.useDeferredLabel,c=kEt(s,[r,i,a,o,u]),f=c.fields,h=c.formatter;return n?MEt(MCt({},t,{options:{type:"point",colorField:a,shapeField:u,tooltipFields:f,mapping:(0,Aut.pi)({tooltip:h},n),args:{useDeferredLabel:l}}})):t}function FEt(t){var e=t.options,n=e.polygon,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,u=e.useDeferredLabel,s=kEt(o,[r,i,a]),l=s.fields,c=s.formatter;return n?MEt(MCt({},t,{options:{type:"polygon",colorField:a,tooltipFields:l,mapping:(0,Aut.pi)({tooltip:c},n),args:{useDeferredLabel:u}}})):t}function IEt(t){var e=t.options,n=e.schema,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,u=e.useDeferredLabel,s=kEt(o,[r,i,a]),l=s.fields,c=s.formatter;return n?MEt(MCt({},t,{options:{type:"schema",colorField:a,tooltipFields:l,mapping:(0,Aut.pi)({tooltip:c},n),args:{useDeferredLabel:u}}})):t}var PEt=n(11760),jEt="data-chart-source-type",BEt=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],LEt=function(t){function e(e,n){var r=t.call(this)||this;return r.container="string"==typeof e?document.getElementById(e):e,r.options=MCt({},r.getDefaultOptions(),n),r.createG2(),r.bindEvents(),r}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},e.prototype.createG2=function(){var t=this.options,e=t.width,n=t.height,r=t.defaultInteractions;this.chart=new qgt((0,Aut.pi)((0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({container:this.container,autoFit:!1},this.getChartSize(e,n)),{localRefresh:!1}),vCt(this.options,BEt)),{defaultInteractions:r})),this.container.setAttribute(jEt,"G2Plot")},e.prototype.getChartSize=function(t,e){var n=OCt(this.container);return{width:t||n.width||400,height:e||n.height||400}},e.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",(function(e){(null==e?void 0:e.type)&&t.emit(e.type,e)}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},e.prototype.update=function(t){this.updateOption(t),this.render()},e.prototype.updateOption=function(t){this.options=MCt({},this.options,t)},e.prototype.setState=function(t,e,n){void 0===n&&(n=!0);var r=TCt(this.chart);(0,_ut.S6)(r,(function(r){e(r.getData())&&r.setState(t,n)}))},e.prototype.getStates=function(){var t=TCt(this.chart),e=[];return(0,_ut.S6)(t,(function(t){var n=t.getData(),r=t.getStates();(0,_ut.S6)(r,(function(r){e.push({data:n,state:r,geometry:t.geometry,element:t})}))})),e},e.prototype.changeData=function(t){this.update({data:t})},e.prototype.changeSize=function(t,e){this.chart.changeSize(t,e)},e.prototype.addAnnotations=function(t,e){e=e||this.chart;var n=(0,Aut.pr)(t),r=e.getController("annotation"),i=r.getComponents().map((function(t){return t.extra}));r.clear(!0);for(var a=function(t){var e=i[t],a=n.findIndex((function(t){return t.id&&t.id===e.id}));-1!==a&&(e=MCt({},e,n[a]),n.splice(a,1)),r.annotation(e)},o=0;o<i.length;o++)a(o);n.forEach((function(t){return r.annotation(t)})),e.render(!0)},e.prototype.removeAnnotations=function(t){var e=this.chart.getController("annotation"),n=e.getComponents().map((function(t){return t.extra}));e.clear(!0);for(var r=function(r){var i=n[r];t.find((function(t){return t.id&&t.id===i.id}))||e.annotation(i)},i=0;i<n.length;i++)r(i);this.chart.render(!0)},e.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(jEt)},e.prototype.execAdaptor=function(){var t=this.getSchemaAdaptor(),e=this.options,n=e.padding,r=e.appendPadding;this.chart.padding=n,this.chart.appendPadding=r,t({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var t=this;if(!this.unbind){var e=this.options.autoFit;(void 0===e||e)&&(this.unbind=(0,PEt.ak)(this.container,(function(){var e=OCt(t.container),n=e.width,r=e.height;n===t.chart.width&&r===t.chart.height||t.triggerResize()})))}},e.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},e}(qut.Z);function REt(t,e,n,r){var i=(0,_ut.u4)(t,(function(t,r){var i=r[n],a=t.has(i)?t.get(i):0,o=r[e];return a=ICt(o)?a+o:a,t.set(i,a),t}),new Map);return(0,_ut.UI)(t,(function(t){var a,o=t[e],u=t[n],s=ICt(o)&&0!==i.get(u)?o/i.get(u):0;return(0,Aut.pi)((0,Aut.pi)({},t),((a={})[r]=s,a))}))}function ZEt(t,e,n,r,i){return i?REt(t,e,n,r):t}function NEt(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.lineStyle,o=n.lineShape,u=n.point,s=n.area,l=n.seriesField,c=null==u?void 0:u.state,f=null==s?void 0:s.state;e.data(r);var h=MCt({},t,{options:{shapeField:l,line:{color:i,style:a,shape:o},point:u&&(0,Aut.pi)({color:i,shape:"circle"},u),area:s&&(0,Aut.pi)({color:i},s),label:void 0}}),d=MCt({},h,{options:{tooltip:!1,state:c}}),p=MCt({},h,{options:{tooltip:!1,state:f}});return DEt(h),TEt(d),OEt(p),t}function zEt(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,u=r.yField,s=r.data;return ACt(gEt(((e={})[o]=i,e[u]=a,e),((n={})[o]={type:"cat"},n[u]=mCt(s,u),n)))(t)}function UEt(t){var e=t.chart,n=t.options.reflect;if(n){var r=n;(0,_ut.kJ)(r)||(r=[r]);var i=r.map((function(t){return["reflect",t]}));e.coordinate({type:"rect",actions:i})}return t}function HEt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?e.axis(a,!1):e.axis(a,r),!1===i?e.axis(o,!1):e.axis(o,i),t}function WEt(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):!1===r&&e.legend(!1),t}function VEt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=_Ct(e,"line");if(r){var o=r.callback,u=(0,Aut._T)(r,["callback"]);a.label({fields:[i],callback:o,cfg:(0,Aut.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},FCt(u))})}else a.label(!1);return t}function GEt(t){var e=t.chart;return t.options.isStack&&(0,_ut.S6)(e.geometries,(function(t){t.adjust("stack")})),t}function XEt(t){return ACt(NEt,zEt,GEt,fEt,UEt,HEt,WEt,sEt,VEt,dEt,pEt,lEt,cEt,vEt(),mEt)(t)}function YEt(t){var e=t.chart,n=t.options,r=n.data,i=n.areaStyle,a=n.color,o=n.point,u=n.line,s=n.isPercent,l=n.xField,c=n.yField,f=n.tooltip,h=n.seriesField,d=n.startOnZero,p=null==o?void 0:o.state,g=ZEt(r,c,l,c,s);e.data(g);var v=s?(0,Aut.pi)({formatter:function(t){return{name:t[h]||t[l],value:(100*Number(t[c])).toFixed(2)+"%"}}},f):f,m=MCt({},t,{options:{area:{color:a,style:i},point:o&&(0,Aut.pi)({color:a},o),tooltip:v,label:void 0,args:{startOnZero:d}}}),y={chart:e,options:MCt({line:{size:2}},(0,_ut.CE)(n,["state"]),{line:u&&(0,Aut.pi)({color:a},u),sizeField:h,state:null==u?void 0:u.state,tooltip:!1,label:void 0,args:{startOnZero:d}})},x=MCt({},m,{options:{tooltip:!1,state:p}});return OEt(m),DEt(y),TEt(x),t}function qEt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=_Ct(e,"area");if(r){var o=r.callback,u=(0,Aut._T)(r,["callback"]);a.label({fields:[i],callback:o,cfg:(0,Aut.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},FCt(u))})}else a.label(!1);return t}function $Et(t){var e=t.chart,n=t.options,r=n.isStack,i=n.isPercent,a=n.seriesField;return(i||r)&&a&&(0,_ut.S6)(e.geometries,(function(t){t.adjust("stack")})),t}function JEt(t){return ACt(fEt,oEt("areaStyle"),yEt("rect"),YEt,zEt,$Et,HEt,WEt,sEt,qEt,dEt,vEt(),lEt,cEt,mEt)(t)}var KEt=MCt({},LEt.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),QEt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="area",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return KEt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.isPercent,r=e.xField,i=e.yField;zEt({chart:this.chart,options:this.options}),this.chart.changeData(ZEt(t,i,r,i,n))},e.prototype.getSchemaAdaptor=function(){return JEt},e}(LEt),tMt={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},eMt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg=(0,Aut.pi)({name:"button"},tMt),e}return(0,Aut.ZT)(e,t),e.prototype.getButtonCfg=function(){var t=this.context.view,e=(0,_ut.U2)(t,["interactions","filter-action","cfg","buttonConfig"]);return MCt(this.buttonCfg,e,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),n=this.drawText(e);this.drawBackground(e,n.getBBox()),this.buttonGroup=e},e.prototype.drawText=function(t){var e,n=this.getButtonCfg();return t.addShape({type:"text",name:"button-text",attrs:(0,Aut.pi)({text:n.text},null===(e=n.textStyle)||void 0===e?void 0:e.default)})},e.prototype.drawBackground=function(t,e){var n,r=this.getButtonCfg(),i=PCt(r.padding),a=t.addShape({type:"rect",name:"button-rect",attrs:(0,Aut.pi)({x:e.x-i[3],y:e.y-i[0],width:e.width+i[1]+i[3],height:e.height+i[0]+i[2]},null===(n=r.buttonStyle)||void 0===n?void 0:n.default)});return a.toBack(),t.on("mouseenter",(function(){var t;a.attr(null===(t=r.buttonStyle)||void 0===t?void 0:t.active)})),t.on("mouseleave",(function(){var t;a.attr(null===(t=r.buttonStyle)||void 0===t?void 0:t.default)})),a},e.prototype.resetPosition=function(){var t=this.context.view.getCoordinate().convert({x:1,y:1}),e=this.buttonGroup,n=e.getBBox(),r=nmt.transform(null,[["t",t.x-n.width-10,t.y+n.height+5]]);e.setMatrix(r)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),t.prototype.destroy.call(this)},e}(ppt);function nMt(t){return t.isInPlot()}function rMt(t,e,n){var r=n||{},i=r.mask,a=r.isStartEnable,o=e||"rect";switch(t){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||nMt,action:["brush:start",o+"-mask:start",o+"-mask:show"],arg:[null,{maskStyle:null==i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:nMt,action:[o+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:nMt,action:["brush:filter","brush:end",o+"-mask:end",o+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(t){return!!a&&!a(t)}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(t){return!t.isInShape("mask")},action:[o+"-mask:start",o+"-mask:show"],arg:[{maskStyle:null==i?void 0:i.style}]},{trigger:"mask:dragstart",action:[o+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[o+"-mask:resize"]},{trigger:"mask:drag",action:[o+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[o+"-mask:end"]},{trigger:"mask:dragend",action:[o+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",o+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||nMt,action:["brush-x:start",o+"-mask:start",o+"-mask:show"],arg:[null,{maskStyle:null==i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:nMt,action:[o+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:nMt,action:["brush-x:filter","brush-x:end",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(t){return!t.isInShape("mask")},action:[o+"-mask:start",o+"-mask:show"],arg:[{maskStyle:null==i?void 0:i.style}]},{trigger:"mask:dragstart",action:[o+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[o+"-mask:resize"]},{trigger:"mask:drag",action:[o+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[o+"-mask:end"]},{trigger:"mask:dragend",action:[o+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",o+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||nMt,action:["brush-y:start",o+"-mask:start",o+"-mask:show"],arg:[null,{maskStyle:null==i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:nMt,action:[o+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:nMt,action:["brush-y:filter","brush-y:end",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};default:return{}}}xpt("brush-reset-button",eMt,{name:"brush-reset-button"}),ugt("filter-action",{}),ugt("brush",rMt("brush")),ugt("brush-highlight",rMt("brush-highlight")),ugt("brush-x",rMt("brush-x","x-rect")),ugt("brush-y",rMt("brush-y","y-rect")),ugt("brush-x-highlight",rMt("brush-x-highlight","x-rect")),ugt("brush-y-highlight",rMt("brush-y-highlight","y-rect"));var iMt=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function aMt(t){var e=t.options,n=e.brush,r=(0,_ut.hX)(e.interactions||[],(function(t){return-1===iMt.indexOf(t.type)}));return(null==n?void 0:n.enabled)&&(iMt.forEach((function(t){var e=!1;switch(n.type){case"x-rect":e=t===("highlight"===n.action?"brush-x-highlight":"brush-x");break;case"y-rect":e=t===("highlight"===n.action?"brush-y-highlight":"brush-y");break;default:e=t===("highlight"===n.action?"brush-highlight":"brush")}var i={type:t,enable:e};n&&(i.cfg=rMt(t,n.type,n)),r.push(i)})),"highlight"!==(null==n?void 0:n.action)&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),MCt({},t,{options:{interactions:r}})}var oMt={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},uMt=function(t,e){return"hover"===t?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:e}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:e}]}]};function sMt(t,e){return(0,_ut.hj)(t)&&(0,_ut.hj)(e)?0===t&&0===e?"-":t===e?"100%":0===t?"∞":(100*e/t).toFixed(2)+"%":"-"}function lMt(t,e){return MCt({size:e?32:80,spacing:e?8:12,offset:e?32:0,arrow:!1!==t.arrow&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:!1!==t.text&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:sMt}},t)}function cMt(t,e){return(0,_ut.UI)(e.getModel().points,(function(e){return t.convertPoint(e)}))}function fMt(t,e,n){!function(t,e,n){var r=t.view,i=t.geometry,a=t.group,o=t.options,u=t.horizontal,s=o.offset,l=o.size,c=o.arrow,f=r.getCoordinate(),h=cMt(f,e)[3],d=cMt(f,n)[0],p=d.y-h.y,g=d.x-h.x;if("boolean"!=typeof c){var v,m=c.headSize,y=o.spacing;u?(g-m)/2<y?(y=Math.max(1,(g-m)/2),v=[[h.x+y,h.y-s],[h.x+y,h.y-s-l],[d.x-y,d.y-s-l/2]]):v=[[h.x+y,h.y-s],[h.x+y,h.y-s-l],[d.x-y-m,d.y-s-l],[d.x-y,d.y-s-l/2],[d.x-y-m,d.y-s]]:(p-m)/2<y?(y=Math.max(1,(p-m)/2),v=[[h.x+s,h.y+y],[h.x+s+l,h.y+y],[d.x+s+l/2,d.y-y]]):v=[[h.x+s,h.y+y],[h.x+s+l,h.y+y],[d.x+s+l,d.y-y-m],[d.x+s+l/2,d.y-y],[d.x+s,d.y-y-m]],a.addShape("polygon",{id:r.id+"-conversion-tag-arrow-"+i.getElementId(e.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:e,nextElement:n},attrs:(0,Aut.pi)((0,Aut.pi)({},c.style||{}),{points:v})})}}(t,e,n),function(t,e,n){var r,i,a,o=t.view,u=t.geometry,s=t.group,l=t.options,c=t.field,f=t.horizontal,h=l.offset,d=l.size;if("boolean"!=typeof l.text){var p=o.getCoordinate(),g=(null===(r=l.text)||void 0===r?void 0:r.formatter)&&(null===(i=l.text)||void 0===i?void 0:i.formatter(e.getData()[c],n.getData()[c])),v=cMt(p,e)[f?3:0],m=cMt(p,n)[f?0:3],y=s.addShape("text",{id:o.id+"-conversion-tag-text-"+u.getElementId(e.getModel().mappingData),name:"conversion-tag-text",origin:{element:e,nextElement:n},attrs:(0,Aut.pi)((0,Aut.pi)({},(null===(a=l.text)||void 0===a?void 0:a.style)||{}),{text:g,x:f?(v.x+m.x)/2:v.x+h+d/2,y:f?v.y-h-d/2:(v.y+m.y)/2})});if(f){var x=m.x-v.x,b=y.getBBox().width;if(b>x){var w=b/g.length,S=Math.max(1,Math.ceil(x/w)-1),k=g.slice(0,S)+"...";y.attr("text",k)}}}}(t,e,n)}function hMt(t){var e=t.options,n=e.legend,r=e.seriesField,i=e.isStack;return r?!1!==n&&(n=(0,Aut.pi)({position:i?"right-top":"top-left"},n)):n=!1,t.options.legend=n,t}function dMt(t){var e=t.chart,n=t.options,r=n.data,i=n.columnStyle,a=n.color,o=n.columnWidthRatio,u=n.isPercent,s=n.isGroup,l=n.isStack,c=n.xField,f=n.yField,h=n.seriesField,d=n.groupField,p=n.tooltip,g=n.shape,v=u&&s&&l?function(t,e,n,r){var i=(0,_ut.u4)(t,(function(t,r){var i=(0,_ut.u4)(n,(function(t,e){return""+t+r[e]}),""),a=t.has(i)?t.get(i):0,o=r[e];return a=ICt(o)?a+o:a,t.set(i,a),t}),new Map);return(0,_ut.UI)(t,(function(t){var a,o=t[e],u=(0,_ut.u4)(n,(function(e,n){return""+e+t[n]}),""),s=ICt(o)&&0!==i.get(u)?o/i.get(u):0;return(0,Aut.pi)((0,Aut.pi)({},t),((a={})[r]=s,a))}))}(r,f,[c,d],f):ZEt(r,f,c,f,u),m=[];l&&h&&!s?v.forEach((function(t){var e=m.find((function(e){return e[c]===t[c]&&e[h]===t[h]}));e?e[f]+=t[f]||0:m.push((0,Aut.pi)({},t))})):m=v,e.data(m);var y=u?(0,Aut.pi)({formatter:function(t){return{name:s&&l?t[h]+" - "+t[d]:t[h]||t[c],value:(100*Number(t[f])).toFixed(2)+"%"}}},p):p,x=MCt({},t,{options:{data:m,widthRatio:o,tooltip:y,interval:{shape:g,style:i,color:a}}});return _Et(x),x}function pMt(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,u=r.yField,s=r.data,l=r.isPercent?{max:1,min:0,minLimit:0,maxLimit:1}:{};return ACt(gEt(((e={})[o]=i,e[u]=a,e),((n={})[o]={type:"cat"},n[u]=(0,Aut.pi)((0,Aut.pi)({},mCt(s,u)),l),n)))(t)}function gMt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?e.axis(a,!1):e.axis(a,r),!1===i?e.axis(o,!1):e.axis(o,i),t}function vMt(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):!1===r&&e.legend(!1),t}function mMt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=n.isRange,o=_Ct(e,"interval");if(r){var u=r.callback,s=(0,Aut._T)(r,["callback"]);o.label({fields:[i],callback:u,cfg:(0,Aut.pi)({layout:(null==s?void 0:s.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},FCt(a?(0,Aut.pi)({content:function(t){var e;return null===(e=t[i])||void 0===e?void 0:e.join("-")}},s):s))})}else o.label(!1);return t}function yMt(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.isGroup,a=n.isStack,o=n.groupField,u=n.data,s=n.xField,l=n.yField,c=n.seriesField;if(!1===r)e.tooltip(!1);else{var f=r;if(i&&a){var h=f.customItems,d=(null==f?void 0:f.formatter)||function(t){return{name:t[c]+" - "+t[o],value:t[l]}};f=(0,Aut.pi)((0,Aut.pi)({},f),{customItems:function(t){var e=[];return(0,_ut.S6)(t,(function(t){(0,_ut.hX)(u,(function(e){return(0,_ut.BD)(e,vCt(t.data,[s,c]))})).forEach((function(n){e.push((0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},t),{value:n[l],data:n,mappingData:{_origin:n}}),d(n)))}))})),h?h(e):e}})}e.tooltip(f)}return t}function xMt(t,e){void 0===e&&(e=!1);var n,r=t.options,i=r.seriesField;return ACt(hMt,fEt,oEt("columnStyle"),hEt,yEt("rect"),dMt,pMt,gMt,vMt,yMt,dEt,pEt,mMt,aMt,lEt,cEt,vEt(),function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!1),function(r){var i=r.options,a=r.chart,o=i.conversionTag,u=i.theme;return o&&!n&&(a.theme(MCt({},(0,_ut.Kn)(u)?u:Cgt(u),{columnWidthRatio:1/3})),a.annotation().shape({render:function(n,r){var i=n.addGroup({id:a.id+"-conversion-tag-group",name:"conversion-tag-group"}),u=(0,_ut.sE)(a.geometries,(function(t){return"interval"===t.type})),s={view:r,geometry:u,group:i,field:t,horizontal:e,options:lMt(o,e)},l=u.elements;(0,_ut.S6)(l,(function(t,e){e>0&&fMt(s,l[e-1],t)}))}})),r}}(r.yField,!e,!!i),(void 0===(n=!r.isStack)&&(n=!1),function(t){var e=t.chart,r=t.options.connectedArea,i=function(){e.removeInteraction(oMt.hover),e.removeInteraction(oMt.click)};if(!n&&r){var a=r.trigger||"hover";i(),e.interaction(oMt[a],{start:uMt(a,r.style)})}else i();return t}),mEt)(t)}function bMt(t){var e=t.options,n=e.xField,r=e.yField,i=e.xAxis,a=e.yAxis,o={left:"bottom",right:"top",top:"left",bottom:"right"},u=!1!==a&&(0,Aut.pi)({position:o[(null==a?void 0:a.position)||"left"]},a),s=!1!==i&&(0,Aut.pi)({position:o[(null==i?void 0:i.position)||"bottom"]},i);return(0,Aut.pi)((0,Aut.pi)({},t),{options:(0,Aut.pi)((0,Aut.pi)({},e),{xField:r,yField:n,xAxis:u,yAxis:s})})}function wMt(t){var e=t.options.label;return e&&!e.position&&(e.position="left",e.layout||(e.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),MCt({},t,{options:{label:e}})}function SMt(t){var e=t.options,n=e.seriesField,r=e.isStack,i=e.legend;return n?!1!==i&&(i=(0,Aut.pi)({position:r?"top-left":"right-top"},i||{})):i=!1,MCt({},t,{options:{legend:i}})}function kMt(t){var e=t.options,n=[{type:"transpose"},{type:"reflectY"}].concat(e.coordinate||[]);return MCt({},t,{options:{coordinate:n}})}function CMt(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.barWidthRatio,a=n.minBarWidth,o=n.maxBarWidth,u=n.barBackground;return xMt({chart:e,options:(0,Aut.pi)((0,Aut.pi)({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:u})},!0)}function EMt(t){return ACt(bMt,wMt,SMt,sEt,kMt,CMt)(t)}ugt(oMt.hover,{start:uMt(oMt.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),ugt(oMt.click,{start:uMt(oMt.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});var MMt,OMt=MCt({},LEt.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),AMt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bar",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return OMt},e.prototype.changeData=function(t){var e,n;this.updateOption({data:t});var r=this.chart,i=this.options,a=i.isPercent,o=i.xField,u=i.yField,s=i.xAxis,l=i.yAxis;o=(e=[u,o])[0],u=e[1],s=(n=[l,s])[0],l=n[1],pMt({chart:r,options:(0,Aut.pi)((0,Aut.pi)({},i),{xField:o,yField:u,yAxis:l,xAxis:s})}),r.changeData(ZEt(t,o,u,o,a))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return EMt},e}(LEt),_Mt=MCt({},LEt.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),DMt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="column",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return _Mt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.yField,r=e.xField,i=e.isPercent;pMt({chart:this.chart,options:this.options}),this.chart.changeData(ZEt(t,n,r,n,i))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return xMt},e}(LEt),TMt="$$percentage$$",FMt="$$mappingValue$$",IMt="$$conversion$$",PMt="$$totalPercentage$$",jMt="$$x$$",BMt="$$y$$",LMt={appendPadding:[0,80],minSize:0,maxSize:1,meta:(MMt={},MMt[FMt]={min:0,max:1,nice:!1},MMt),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},RMt="CONVERSION_TAG_NAME";function ZMt(t,e,n){var r,i=n.yField,a=n.maxSize,o=n.minSize,u=(0,_ut.U2)((0,_ut.UT)(e,i),[i]),s=(0,_ut.hj)(a)?a:1,l=(0,_ut.hj)(o)?o:0;return r=(0,_ut.UI)(t,(function(e,n){var r=(e[i]||0)/u;return e[TMt]=r,e[FMt]=(s-l)*r+l,e[IMt]=[(0,_ut.U2)(t,[n-1,i]),e[i]],e})),r}function NMt(t){return function(e){var n=e.chart,r=e.options,i=r.conversionTag,a=r.filteredData||n.getOptions().data;if(i){var o=i.formatter;a.forEach((function(e,r){if(!(r<=0||Number.isNaN(e[FMt]))){var u=t(e,r,a,{top:!0,name:RMt,text:{content:(0,_ut.mf)(o)?o(e,a):o,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:(0,Aut.pi)({textAlign:"start",textBaseline:"middle"},i.style)}});n.annotation().line(u)}}))}return e}}function zMt(t){var e=t.chart,n=t.options,r=n.data,i=void 0===r?[]:r,a=ZMt(i,i,{yField:n.yField,maxSize:n.maxSize,minSize:n.minSize});return e.data(a),t}function UMt(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,u=n.label,s=n.shape,l=void 0===s?"funnel":s,c=n.funnelStyle,f=n.state,h=kEt(o,[r,i]),d=h.fields,p=h.formatter;return MEt({chart:e,options:{type:"interval",xField:r,yField:FMt,colorField:r,tooltipFields:(0,_ut.kJ)(d)&&d.concat([TMt,IMt]),mapping:{shape:l,tooltip:p,color:a,style:c},label:u,state:f}}),_Ct(t.chart,"interval").adjust("symmetric"),t}function HMt(t){var e=t.chart,n=t.options.isTransposed;return e.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),t}function WMt(t){var e=t.options,n=t.chart,r=e.maxSize,i=(0,_ut.U2)(n,["geometries","0","dataArray"],[]),a=(0,_ut.U2)(n,["options","data","length"]),o=(0,_ut.UI)(i,(function(t){return(0,_ut.U2)(t,["0","nextPoints","0","x"])*a-.5}));return NMt((function(t,e,n,i){var a=r-(r-t[FMt])/2;return(0,Aut.pi)((0,Aut.pi)({},i),{start:[o[e-1]||e-.5,a],end:[o[e-1]||e-.5,a+.05]})}))(t),t}function VMt(t){return ACt(zMt,UMt,HMt,WMt)(t)}function GMt(t){var e,n=t.chart,r=t.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return n.data(a),n.scale(((e={})[o]={sync:!0},e)),t}function XMt(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.color,u=n.compareField,s=n.isTransposed,l=n.tooltip,c=n.maxSize,f=n.minSize,h=n.label,d=n.funnelStyle,p=n.state,g=n.showFacetTitle;return e.facet("mirror",{fields:[u],transpose:!s,padding:s?0:[32,0,0,0],showTitle:g,eachView:function(t,e){var n=s?e.rowIndex:e.columnIndex;s||t.coordinate({type:"rect",actions:[["transpose"],["scale",0===n?-1:1,-1]]});var g=ZMt(e.data,r,{yField:a,maxSize:c,minSize:f});t.data(g);var v=kEt(l,[i,a,u]),m=v.fields,y=v.formatter,x=s?{offset:0===n?10:-23,position:0===n?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:0===n?"end":"start"}};MEt({chart:t,options:{type:"interval",xField:i,yField:FMt,colorField:i,tooltipFields:(0,_ut.kJ)(m)&&m.concat([TMt,IMt]),mapping:{shape:"funnel",tooltip:y,color:o,style:d},label:!1!==h&&MCt({},x,h),state:p}})}}),t}function YMt(t){var e=t.chart,n=t.index,r=t.options,i=r.conversionTag,a=r.isTransposed;((0,_ut.hj)(n)?[e]:e.views).forEach((function(t,e){var o=(0,_ut.U2)(t,["geometries","0","dataArray"],[]),u=(0,_ut.U2)(t,["options","data","length"]),s=(0,_ut.UI)(o,(function(t){return(0,_ut.U2)(t,["0","nextPoints","0","x"])*u-.5}));NMt((function(t,r,o,u){var l=0===(n||e)?-1:1;return MCt({},u,{start:[s[r-1]||r-.5,t[FMt]],end:[s[r-1]||r-.5,t[FMt]+.05],text:a?{style:{textAlign:"start"}}:{offsetX:!1!==i?l*i.offsetX:0,style:{textAlign:0===(n||e)?"end":"start"}}})}))(MCt({},{chart:t,options:r}))}))}function qMt(t){return t.chart.once("beforepaint",(function(){return YMt(t)})),t}function $Mt(t){var e=t.chart,n=t.options,r=n.data,i=void 0===r?[]:r,a=n.yField,o=(0,_ut.u4)(i,(function(t,e){return t+(e[a]||0)}),0),u=(0,_ut.UT)(i,a)[a],s=(0,_ut.UI)(i,(function(t,e){var n=[],r=[];if(t[PMt]=(t[a]||0)/o,e){var s=i[e-1][jMt],l=i[e-1][BMt];n[0]=s[3],r[0]=l[3],n[1]=s[2],r[1]=l[2]}else n[0]=-.5,r[0]=1,n[1]=.5,r[1]=1;return r[2]=r[1]-t[PMt],n[2]=(r[2]+1)/4,r[3]=r[2],n[3]=-n[2],t[jMt]=n,t[BMt]=r,t[TMt]=(t[a]||0)/u,t[IMt]=[(0,_ut.U2)(i,[e-1,a]),t[a]],t}));return e.data(s),t}function JMt(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,u=n.label,s=n.funnelStyle,l=n.state,c=kEt(o,[r,i]),f=c.fields,h=c.formatter;return MEt({chart:e,options:{type:"polygon",xField:jMt,yField:BMt,colorField:r,tooltipFields:(0,_ut.kJ)(f)&&f.concat([TMt,IMt]),label:u,state:l,mapping:{tooltip:h,color:a,style:s}}}),t}function KMt(t){var e=t.chart,n=t.options.isTransposed;return e.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),t}function QMt(t){return NMt((function(t,e,n,r){return(0,Aut.pi)((0,Aut.pi)({},r),{start:[t[jMt][1],t[BMt][1]],end:[t[jMt][1]+.05,t[BMt][1]]})}))(t),t}function tOt(t){var e,n=t.chart,r=t.options,i=r.data,a=void 0===i?[]:i,o=r.yField;return n.data(a),n.scale(((e={})[o]={sync:!0},e)),t}function eOt(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.isTransposed,a=n.showFacetTitle;return e.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],showTitle:a,eachView:function(e,n){VMt(MCt({},t,{chart:e,options:{data:n.data}}))}}),t}var nOt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rendering=!1,e}return(0,Aut.ZT)(e,t),e.prototype.change=function(t){var e=this;if(!this.rendering){var n=t.seriesField,r=t.compareField,i=r?YMt:WMt,a=this.context.view,o=n||r?a.views:[a];(0,_ut.UI)(o,(function(n,r){var a=n.getController("annotation"),o=(0,_ut.hX)((0,_ut.U2)(a,["option"],[]),(function(t){return t.name!==RMt}));a.clear(!0),(0,_ut.S6)(o,(function(t){"object"==typeof t&&n.annotation()[t.type](t)}));var u=(0,_ut.U2)(n,["filteredData"],n.getOptions().data);i({chart:n,index:r,options:(0,Aut.pi)((0,Aut.pi)({},t),{filteredData:ZMt(u,u,t)})}),n.filterData(u),e.rendering=!0,n.render(!0)}))}this.rendering=!1},e}(ppt),rOt="funnel-conversion-tag",iOt="funnel-afterrender",aOt={trigger:"afterrender",action:rOt+":change"};function oOt(t){var e,n=t.options,r=n.compareField,i=n.xField,a=n.yField,o=n.locale,u=n.funnelStyle,s=n.data,l=SEt(o),c={label:r?{fields:[i,a,r,TMt,IMt],formatter:function(t){return""+t[a]}}:{fields:[i,a,TMt,IMt],offset:0,position:"middle",formatter:function(t){return t[i]+" "+t[a]}},tooltip:{title:i,formatter:function(t){return{name:t[i],value:t[a]}}},conversionTag:{formatter:function(t){return l.get(["conversionTag","label"])+": "+sMt.apply(void 0,t[IMt])}}};return(r||u)&&(e=function(t){return MCt({},r&&{lineWidth:1,stroke:"#fff"},(0,_ut.mf)(u)?u(t):u)}),MCt({options:c},t,{options:{funnelStyle:e,data:(0,_ut.d9)(s)}})}function uOt(t){var e=t.options,n=e.compareField,r=e.dynamicHeight;return e.seriesField?function(t){return ACt(tOt,eOt)(t)}(t):n?function(t){return ACt(GMt,XMt,qMt)(t)}(t):r?function(t){return ACt($Mt,JMt,KMt,QMt)(t)}(t):VMt(t)}function sOt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ACt(gEt(((e={})[a]=r,e[o]=i,e)))(t)}function lOt(t){return t.chart.axis(!1),t}function cOt(t){var e=t.chart,n=t.options.legend;return!1===n?e.legend(!1):e.legend(n),t}function fOt(t){var e=t.chart,n=t.options,r=n.interactions,i=n.dynamicHeight;return(0,_ut.S6)(r,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg||{})})),i?e.removeInteraction(iOt):e.interaction(iOt,{start:[(0,Aut.pi)((0,Aut.pi)({},aOt),{arg:n})]}),t}function hOt(t){return ACt(oOt,uOt,sOt,lOt,sEt,fOt,cOt,cEt,fEt,vEt())(t)}xpt(rOt,nOt),ugt(iOt,{start:[aOt]});var dOt,pOt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="funnel",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return LMt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return hOt},e.prototype.setState=function(t,e,n){void 0===n&&(n=!0);var r=TCt(this.chart);(0,_ut.S6)(r,(function(r){e(r.getData())&&r.setState(t,n)}))},e.prototype.getStates=function(){var t=TCt(this.chart),e=[];return(0,_ut.S6)(t,(function(t){var n=t.getData(),r=t.getStates();(0,_ut.S6)(r,(function(r){e.push({data:n,state:r,geometry:t.geometry,element:t})}))})),e},e.CONVERSATION_FIELD=IMt,e.PERCENT_FIELD=TMt,e.TOTAL_PERCENT_FIELD=PMt,e}(LEt),gOt="range",vOt="type",mOt="percent",yOt="indicator-view",xOt="range-view",bOt={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(dOt={},dOt[gOt]={sync:"v"},dOt[mOt]={sync:"v",tickCount:5,tickInterval:.2},dOt),animation:!1};function wOt(t){var e;return[(e={},e[mOt]=(0,_ut.uZ)(t,0,1),e)]}function SOt(t,e){var n=(0,_ut.U2)(e,["ticks"],[]),r=(0,_ut.dp)(n)?(0,_ut.jj)(n):[0,(0,_ut.uZ)(t,0,1),1];return r[0]||r.shift(),function(t,e){return t.map((function(n,r){var i;return(i={})[gOt]=n-(t[r-1]||0),i[vOt]=""+r,i[mOt]=e,i}))}(r,t)}function kOt(t){var e=t.chart,n=t.options,r=n.percent,i=n.range,a=n.radius,o=n.innerRadius,u=n.startAngle,s=n.endAngle,l=n.axis,c=n.indicator,f=n.gaugeStyle,h=n.type,d=n.meter,p=i.color,g=i.width;if(c){var v=wOt(r),m=e.createView({id:yOt});m.data(v),m.point().position(mOt+"*1").shape(c.shape||"gauge-indicator").customInfo({defaultColor:e.getTheme().defaultColor,indicator:c}),m.coordinate("polar",{startAngle:u,endAngle:s,radius:o*a}),m.axis(mOt,l),m.scale(mOt,vCt(l,hCt))}var y=SOt(r,n.range),x=e.createView({id:xOt});x.data(y);var b=(0,_ut.HD)(p)?[p,"#f0f0f0"]:p;return _Et({chart:x,options:{xField:"1",yField:gOt,seriesField:vOt,rawFields:[mOt],isStack:!0,interval:{color:b,style:f,shape:"meter"===h?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:g,maxColumnWidth:g}}).ext.geometry.customInfo({meter:d}),x.coordinate("polar",{innerRadius:o,radius:a,startAngle:u,endAngle:s}).transpose(),t}function COt(t){var e;return ACt(gEt(((e={range:{min:0,max:1,maxLimit:1,minLimit:0}})[mOt]={},e)))(t)}function EOt(t,e){var n=t.chart,r=t.options,i=r.statistic,a=r.percent;if(n.getController("annotation").clear(!0),i){var o=i.content,u=void 0;o&&(u=MCt({},{content:(100*a).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),function(t,e,n){var r=e.statistic;[r.title,r.content].forEach((function(e){if(e){var r=(0,_ut.mf)(e.style)?e.style(n):e.style;t.annotation().html((0,Aut.pi)({position:["50%","100%"],html:function(t,i){var a=i.getCoordinate(),o=i.views[0].getCoordinate(),u=o.getCenter(),s=o.getRadius(),l=Math.max(Math.sin(o.startAngle),Math.sin(o.endAngle))*s,c=u.y+l-a.y.start-parseFloat((0,_ut.U2)(r,"fontSize",0)),f=a.getRadius()*a.innerRadius*2;NCt(t,(0,Aut.pi)({width:f+"px",transform:"translate(-50%, "+c+"px)"},ZCt(r)));var h=i.getData();if(e.customHtml)return e.customHtml(t,i,n,h);var d=e.content;return e.formatter&&(d=e.formatter(n,h)),d?(0,_ut.HD)(d)?d:""+d:"<div></div>"}},vCt(e,["offsetX","offsetY","rotate","style","formatter"])))}}))}(n,{statistic:(0,Aut.pi)((0,Aut.pi)({},i),{content:u})},{percent:a})}return e&&n.render(!0),t}function MOt(t){var e=t.chart,n=t.options.tooltip;return n?e.tooltip(MCt({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(t,e){return(100*(0,_ut.U2)(e,[0,"data",mOt],0)).toFixed(2)+"%"}},n)):e.tooltip(!1),t}function OOt(t){return t.chart.legend(!1),t}function AOt(t){return ACt(fEt,cEt,kOt,COt,MOt,EOt,lEt,vEt(),OOt)(t)}yvt("point","gauge-indicator",{draw:function(t,e){var n=t.customInfo,r=n.indicator,i=n.defaultColor,a=r,o=a.pointer,u=a.pin,s=e.addGroup(),l=this.parsePoint({x:0,y:0});return o&&s.addShape("line",{name:"pointer",attrs:(0,Aut.pi)({x1:l.x,y1:l.y,x2:t.x,y2:t.y,stroke:i},o.style)}),u&&s.addShape("circle",{name:"pin",attrs:(0,Aut.pi)({x:l.x,y:l.y,stroke:i},u.style)}),s}}),yvt("interval","meter-gauge",{draw:function(t,e){var n=t.customInfo.meter,r=void 0===n?{}:n,i=r.steps,a=void 0===i?50:i,o=r.stepRatio,u=void 0===o?.5:o;a=a<1?1:a,u=(0,_ut.uZ)(u,0,1);var s=this.coordinate,l=s.startAngle,c=s.endAngle,f=0;u>0&&u<1&&(f=(c-l)/a/(u/(1-u)+1-1/a));for(var h=f/(1-u)*u,d=e.addGroup(),p=this.coordinate.getCenter(),g=this.coordinate.getRadius(),v=nmt.getAngle(t,this.coordinate),m=v.startAngle,y=v.endAngle,x=m;x<y;){var b=void 0,w=(x-l)%(h+f);b=w<h?x+(h-w):(x+=h+f-w)+h;var S=nmt.getSectorPath(p.x,p.y,g,x,Math.min(b,y),g*this.coordinate.innerRadius);d.addShape("path",{name:"meter-gauge",attrs:{path:S,fill:t.color,stroke:t.color,lineWidth:.5}}),x=b+f}return d}});var _Ot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="gauge",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return bOt},e.prototype.changeData=function(t){this.chart.emit(Dut.BEFORE_CHANGE_DATA,Ngt.fromData(this.chart,Dut.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t});var e=this.chart.views.find((function(t){return t.id===yOt}));e&&e.data(wOt(t));var n=this.chart.views.find((function(t){return t.id===xOt}));n&&n.data(SOt(t,this.options.range)),EOt({chart:this.chart,options:this.options},!0),this.chart.emit(Dut.AFTER_CHANGE_DATA,Ngt.fromData(this.chart,Dut.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return AOt},e}(LEt);function DOt(t,e,n){if(1===n)return[0,e];var r=Math.floor(t/e);return[e*r,e*(r+1)]}function TOt(t,e,n,r,i){var a=(0,_ut.d9)(t);(0,_ut.MR)(a,e);var o=(0,_ut.I)(a,e),u=(0,_ut.rx)(o),s=u.max-u.min,l=n;if(!n&&r&&(l=r>1?s/(r-1):u.max),!n&&!r){var c=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}(o);l=s/c}var f={},h=(0,_ut.vM)(a,i);(0,_ut.xb)(h)?(0,_ut.S6)(a,(function(t){var n=DOt(t[e],l,r),i=n[0]+"-"+n[1];(0,_ut.wH)(f,i)||(f[i]={range:n,count:0}),f[i].count+=1})):Object.keys(h).forEach((function(t){(0,_ut.S6)(h[t],(function(n){var a=DOt(n[e],l,r),o=a[0]+"-"+a[1]+"-"+t;(0,_ut.wH)(f,o)||(f[o]={range:a,count:0},f[o][i]=t),f[o].count+=1}))}));var d=[];return(0,_ut.S6)(f,(function(t){d.push(t)})),d}var FOt="range",IOt="count",POt=MCt({},LEt.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function jOt(t){var e=t.chart,n=t.options,r=n.data,i=n.binField,a=n.binNumber,o=n.binWidth,u=n.color,s=n.stackField,l=n.legend,c=n.columnStyle,f=TOt(r,i,o,a,s);return e.data(f),_Et(MCt({},t,{options:{xField:FOt,yField:IOt,seriesField:s,isStack:!0,interval:{color:u,style:c}}})),l&&s?e.legend(s,l):e.legend(!1),t}function BOt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis;return ACt(gEt(((e={})[FOt]=r,e[IOt]=i,e)))(t)}function LOt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis;return!1===r?e.axis(FOt,!1):e.axis(FOt,r),!1===i?e.axis(IOt,!1):e.axis(IOt,i),t}function ROt(t){var e=t.chart,n=t.options.label,r=_Ct(e,"interval");if(n){var i=n.callback,a=(0,Aut._T)(n,["callback"]);r.label({fields:[IOt],callback:i,cfg:FCt(a)})}else r.label(!1);return t}function ZOt(t){return ACt(fEt,oEt("columnStyle"),jOt,BOt,LOt,hEt,ROt,sEt,lEt,cEt)(t)}var NOt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="histogram",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return POt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.binField,r=e.binNumber,i=e.binWidth,a=e.stackField;this.chart.changeData(TOt(t,n,i,r,a))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ZOt},e}(LEt),zOt=MCt({},LEt.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),UOt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.active=function(){var t=this.getView(),e=this.context.event;if(e.data){var n=e.data.items,r=t.geometries.filter((function(t){return"point"===t.type}));(0,_ut.S6)(r,(function(t){(0,_ut.S6)(t.elements,(function(t){var e=-1!==(0,_ut.cx)(n,(function(e){return e.data===t.data}));t.setState("active",e)}))}))}},e.prototype.reset=function(){var t=this.getView().geometries.filter((function(t){return"point"===t.type}));(0,_ut.S6)(t,(function(t){(0,_ut.S6)(t.elements,(function(t){t.setState("active",!1)}))}))},e.prototype.getView=function(){return this.context.view},e}(ppt);xpt("marker-active",UOt),ugt("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var HOt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return zOt},e.prototype.changeData=function(t){this.updateOption({data:t});zEt({chart:this.chart,options:this.options}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return XEt},e}(LEt),WOt=MCt({},LEt.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),VOt=[1,0,0,0,1,0,0,0,1];function GOt(t,e){var n=e?(0,Aut.pr)(e):(0,Aut.pr)(VOt);return nmt.transform(n,t)}var XOt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getActiveElements=function(){var t=nmt.getDelegationObject(this.context);if(t){var e=this.context.view,n=t.component,r=t.item,i=n.get("field");if(i)return e.geometries[0].elements.filter((function(t){return t.getModel().data[i]===r.value}))}return[]},e.prototype.getActiveElementLabels=function(){var t=this.context.view,e=this.getActiveElements();return t.geometries[0].labelsContainer.getChildren().filter((function(t){return e.find((function(e){return(0,_ut.Xy)(e.getData(),t.get("data"))}))}))},e.prototype.transfrom=function(t){void 0===t&&(t=7.5);var e=this.getActiveElements(),n=this.getActiveElementLabels();e.forEach((function(e,r){var i=n[r],a=e.geometry.coordinate;if(a.isPolar&&a.isTransposed){var o=nmt.getAngle(e.getModel(),a),u=(o.startAngle+o.endAngle)/2,s=t,l=s*Math.cos(u),c=s*Math.sin(u);e.shape.setMatrix(GOt([["t",l,c]])),i.setMatrix(GOt([["t",l,c]]))}}))},e.prototype.active=function(){this.transfrom()},e.prototype.reset=function(){this.transfrom(0)},e}(ppt);var YOt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getAnnotations=function(t){return(t||this.context.view).getController("annotation").option},e.prototype.getInitialAnnotation=function(){return this.initialAnnotation},e.prototype.init=function(){var t=this,e=this.context.view;e.removeInteraction("tooltip"),e.on("afterchangesize",(function(){var n=t.getAnnotations(e);t.initialAnnotation=n}))},e.prototype.change=function(t){var e=this.context,n=e.view,r=e.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var i=(0,_ut.U2)(r,["data","data"]);if(r.type.match("legend-item")){var a=nmt.getDelegationObject(this.context),o=n.getGroupedFields()[0];if(a&&o){var u=a.item;i=n.getData().find((function(t){return t[o]===u.value}))}}if(i){var s=(0,_ut.U2)(t,"annotations",[]),l=(0,_ut.U2)(t,"statistic",{});n.getController("annotation").clear(!0),(0,_ut.S6)(s,(function(t){"object"==typeof t&&n.annotation()[t.type](t)})),zCt(n,{statistic:l,plotType:"pie"},i),n.render(!0)}var c=function(t){var e,n=t.event.target;return n&&(e=n.get("element")),e}(this.context);c&&c.shape.toFront()},e.prototype.reset=function(){var t=this.context.view;t.getController("annotation").clear(!0);var e=this.getInitialAnnotation();(0,_ut.S6)(e,(function(e){t.annotation()[e.type](e)})),t.render(!0)},e}(ppt),qOt="pie-statistic";function $Ot(t,e){var n;switch(t){case"inner":return n="-30%",(0,_ut.HD)(e)&&e.endsWith("%")?.01*parseFloat(e)>0?n:e:e<0?e:n;case"outer":return n=12,(0,_ut.HD)(e)&&e.endsWith("%")?.01*parseFloat(e)<0?n:e:e>0?e:n;default:return e}}function JOt(t,e){return(0,_ut.yW)(xCt(t,e),(function(t){return 0===t[e]}))}function KOt(t){var e=t.chart,n=t.options,r=n.data,i=n.angleField,a=n.colorField,o=n.color,u=n.pieStyle,s=n.shape,l=xCt(r,i);if(JOt(l,i)){var c="$$percentage$$";l=l.map((function(t){var e;return(0,Aut.pi)((0,Aut.pi)({},t),((e={})[c]=1/l.length,e))})),e.data(l),_Et(MCt({},t,{options:{xField:"1",yField:c,seriesField:a,isStack:!0,interval:{color:o,shape:s,style:u},args:{zIndexReversed:!0,sortZIndex:!0}}}))}else{e.data(l),_Et(MCt({},t,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,shape:s,style:u},args:{zIndexReversed:!0,sortZIndex:!0}}}))}return t}function QOt(t){var e,n=t.chart,r=t.options,i=r.meta,a=r.colorField,o=MCt({},i);return n.scale(o,((e={})[a]={type:"cat"},e)),t}function tAt(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),t}function eAt(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,a=n.angleField,o=e.geometries[0];if(r){var u=r.callback,s=FCt((0,Aut._T)(r,["callback"]));if(s.content){var l=s.content;s.content=function(t,n,r){var o=t[i],u=t[a],s=e.getScaleByField(a),c=null==s?void 0:s.scale(u);return(0,_ut.mf)(l)?l((0,Aut.pi)((0,Aut.pi)({},t),{percent:c}),n,r):(0,_ut.HD)(l)?UCt(l,{value:u,name:o,percentage:(0,_ut.hj)(c)&&!(0,_ut.UM)(u)?(100*c).toFixed(2)+"%":null}):l}}var c=s.type?{inner:"",outer:"pie-outer",spider:"pie-spider"}[s.type]:"pie-outer",f=s.layout?(0,_ut.kJ)(s.layout)?s.layout:[s.layout]:[];s.layout=(c?[{type:c}]:[]).concat(f),o.label({fields:i?[a,i]:[a],callback:u,cfg:(0,Aut.pi)((0,Aut.pi)({},s),{offset:$Ot(s.type,s.offset),type:"pie"})})}else o.label(!1);return t}function nAt(t){var e=t.innerRadius,n=t.statistic,r=t.angleField,i=t.colorField,a=t.meta,o=SEt(t.locale);if(e&&n){var u=MCt({},WOt.statistic,n),s=u.title,l=u.content;return!1!==s&&(s=MCt({},{formatter:function(t){var e=t?t[i]:(0,_ut.UM)(s.content)?o.get(["statistic","total"]):s.content,n=(0,_ut.U2)(a,[i,"formatter"])||function(t){return t};return n(e)}},s)),!1!==l&&(l=MCt({},{formatter:function(t,e){var n=t?t[r]:function(t,e){var n=null;return(0,_ut.S6)(t,(function(t){"number"==typeof t[e]&&(n+=t[e])})),n}(e,r),i=(0,_ut.U2)(a,[r,"formatter"])||function(t){return t};return t||(0,_ut.UM)(l.content)?i(n):l.content}},l)),MCt({},{statistic:{title:s,content:l}},t)}return t}function rAt(t){var e=t.chart,n=nAt(t.options),r=n.innerRadius,i=n.statistic;return e.getController("annotation").clear(!0),ACt(vEt())(t),r&&i&&zCt(e,{statistic:i,plotType:"pie"}),t}function iAt(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.colorField,a=n.angleField,o=n.data;if(!1===r)e.tooltip(r);else if(e.tooltip(MCt({},r,{shared:!1})),JOt(o,a)){var u=(0,_ut.U2)(r,"fields"),s=(0,_ut.U2)(r,"formatter");(0,_ut.xb)((0,_ut.U2)(r,"fields"))&&(u=[i,a],s=s||function(t){return{name:t[i],value:(0,_ut.BB)(t[a])}}),e.geometries[0].tooltip(u.join("*"),EEt(u,s))}return t}function aAt(t){var e=t.chart,n=nAt(t.options),r=n.interactions,i=n.statistic,a=n.annotations;return(0,_ut.S6)(r,(function(t){var n,r;if(!1===t.enable)e.removeInteraction(t.type);else if("pie-statistic-active"===t.type){var o=[];(null===(n=t.cfg)||void 0===n?void 0:n.start)||(o=[{trigger:"element:mouseenter",action:qOt+":change",arg:{statistic:i,annotations:a}}]),(0,_ut.S6)(null===(r=t.cfg)||void 0===r?void 0:r.start,(function(t){o.push((0,Aut.pi)((0,Aut.pi)({},t),{arg:{statistic:i,annotations:a}}))})),e.interaction(t.type,MCt({},t.cfg,{start:o}))}else e.interaction(t.type,t.cfg||{})})),t}function oAt(t){return ACt(oEt("pieStyle"),KOt,QOt,fEt,tAt,uEt,iAt,eAt,hEt,rAt,aAt,cEt)(t)}xpt(qOt,YOt),ugt("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),xpt("pie-legend",XOt),ugt("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var uAt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pie",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return WOt},e.prototype.changeData=function(t){this.chart.emit(Dut.BEFORE_CHANGE_DATA,Ngt.fromData(this.chart,Dut.BEFORE_CHANGE_DATA,null));var e=this.options,n=this.options.angleField,r=xCt(e.data,n),i=xCt(t,n);JOt(r,n)||JOt(i,n)?this.update({data:t}):(this.updateOption({data:t}),this.chart.data(i),rAt({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(Dut.AFTER_CHANGE_DATA,Ngt.fromData(this.chart,Dut.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return oAt},e}(LEt),sAt=["#FAAD14","#E8EDF3"],lAt={percent:.2,color:sAt,animation:{}};function cAt(t){var e=(0,_ut.uZ)(ICt(t)?t:0,0,1);return[{current:""+e,type:"current",percent:e},{current:""+e,type:"target",percent:1}]}function fAt(t){var e=t.chart,n=t.options,r=n.percent,i=n.progressStyle,a=n.color,o=n.barWidthRatio;return e.data(cAt(r)),_Et(MCt({},t,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:o,interval:{style:i,color:(0,_ut.HD)(a)?[a,sAt[1]]:a},args:{zIndexReversed:!0,sortZIndex:!0}}})),e.tooltip(!1),e.axis(!1),e.legend(!1),t}function hAt(t){return t.chart.coordinate("rect").transpose(),t}function dAt(t){return ACt(fAt,gEt({}),hAt,cEt,fEt,vEt())(t)}var pAt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="process",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return lAt},e.prototype.changeData=function(t){this.updateOption({percent:t}),this.chart.changeData(cAt(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return dAt},e}(LEt);function gAt(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius;return e.coordinate("theta",{innerRadius:r,radius:i}),t}function vAt(t,e){var n=t.chart,r=t.options,i=r.innerRadius,a=r.statistic,o=r.percent,u=r.meta;if(n.getController("annotation").clear(!0),i&&a){var s=(0,_ut.U2)(u,["percent","formatter"])||function(t){return(100*t).toFixed(2)+"%"},l=a.content;l&&(l=MCt({},l,{content:(0,_ut.UM)(l.content)?s(o):l.content})),zCt(n,{statistic:(0,Aut.pi)((0,Aut.pi)({},a),{content:l}),plotType:"ring-progress"},{percent:o})}return e&&n.render(!0),t}function mAt(t){return ACt(fAt,gEt({}),gAt,vAt,cEt,fEt,vEt())(t)}var yAt={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},xAt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ring-process",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return yAt},e.prototype.changeData=function(t){this.chart.emit(Dut.BEFORE_CHANGE_DATA,Ngt.fromData(this.chart,Dut.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(cAt(t)),vAt({chart:this.chart,options:this.options},!0),this.chart.emit(Dut.AFTER_CHANGE_DATA,Ngt.fromData(this.chart,Dut.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return mAt},e}(LEt),bAt=n(71547),wAt={exp:bAt.regressionExp,linear:bAt.regressionLinear,loess:bAt.regressionLoess,log:bAt.regressionLog,poly:bAt.regressionPoly,pow:bAt.regressionPow,quad:bAt.regressionQuad};var SAt=function(t,e){var n=e.view,r=e.options,i=r.xField,a=r.yField,o=n.getScaleByField(i),u=n.getScaleByField(a);return function(t,e,n){var r=[],i=t[0],a=null;if(t.length<=2)return function(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var a=t[r];n.push(["L",a.x,a.y])}e&&n.push(["Z"])}return n}(t,e);for(var o=0,u=t.length;o<u;o++){var s=t[o];a&&a.x===s.x&&a.y===s.y||(r.push(s.x),r.push(s.y),a=s)}var l=LCt(r,e,n||[[0,0],[1,1]]);return l.unshift(["M",i.x,i.y]),l}(t.map((function(t){return n.getCoordinate().convert({x:o.scale(t[0]),y:u.scale(t[1])})})),!1)};function kAt(t){var e=t.data,n=void 0===e?[]:e,r=t.xField,i=t.yField;if(n.length){for(var a=!0,o=!0,u=n[0],s=void 0,l=1;l<n.length&&(s=n[l],u[r]!==s[r]&&(a=!1),u[i]!==s[i]&&(o=!1),a||o);l++)u=s;var c=[];a&&c.push(r),o&&c.push(i);var f=vCt(function(t){var e,n=t.meta,r=void 0===n?{}:n,i=t.xField,a=t.yField,o=t.data,u=o[0][i],s=o[0][a],l=u>0,c=s>0;function f(t,e){var n=(0,_ut.U2)(r,[t]);function i(t){return(0,_ut.U2)(n,t)}var a={};return"x"===e?((0,_ut.hj)(u)&&((0,_ut.hj)(i("min"))||(a.min=l?0:2*u),(0,_ut.hj)(i("max"))||(a.max=l?2*u:0)),a):((0,_ut.hj)(s)&&((0,_ut.hj)(i("min"))||(a.min=c?0:2*s),(0,_ut.hj)(i("max"))||(a.max=c?2*s:0)),a)}return(0,Aut.pi)((0,Aut.pi)({},r),((e={})[i]=(0,Aut.pi)((0,Aut.pi)({},r[i]),f(i,"x")),e[a]=(0,Aut.pi)((0,Aut.pi)({},r[a]),f(a,"y")),e))}(t),c);return MCt({},t,{meta:f})}return t}function CAt(t){var e=t.chart,n=t.options,r=n.data,i=n.type,a=n.color,o=n.shape,u=n.pointStyle,s=n.shapeField,l=n.colorField,c=n.xField,f=n.yField,h=n.sizeField,d=n.size,p=n.tooltip;h&&(d||(d=[2,8]),(0,_ut.hj)(d)&&(d=[d,d])),p&&!p.fields&&(p=(0,Aut.pi)((0,Aut.pi)({},p),{fields:[c,f,l,h,s]})),e.data(r),TEt(MCt({},t,{options:{seriesField:l,point:{color:a,shape:o,size:d,style:u},tooltip:p}}));var g=_Ct(e,"point");return i&&g.adjust(i),t}function EAt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,u=kAt(n);return ACt(gEt(((e={})[a]=r,e[o]=i,e)))(MCt({},t,{options:u}))}function MAt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return e.axis(a,r),e.axis(o,i),t}function OAt(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.shapeField,o=n.sizeField,u=n.shapeLegend,s=n.sizeLegend,l=!1!==r;return i&&e.legend(i,!!l&&r),a&&(u?e.legend(a,u):e.legend(a,!1!==u&&r)),o&&e.legend(o,s||!1),l||u||s||e.legend(!1),t}function AAt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=_Ct(e,"point");if(r){var o=r.callback,u=(0,Aut._T)(r,["callback"]);a.label({fields:[i],callback:o,cfg:FCt(u)})}else a.label(!1);return t}function _At(t){var e=t.options.quadrant,n=[];if(e){var r=e.xBaseline,i=void 0===r?0:r,a=e.yBaseline,o=void 0===a?0:a,u=e.labels,s=e.regionStyle,l=e.lineStyle,c=function(t,e){var n=10;return{regionStyle:[{position:{start:[t,"max"],end:["max",e]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[t,e]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",e],end:[t,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[t,e],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",e],offsetX:-10,offsetY:-10,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:-10,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",e],offsetX:-10,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]}}(i,o);new Array(4).join(",").split(",").forEach((function(t,e){n.push((0,Aut.pi)((0,Aut.pi)({type:"region",top:!1},c.regionStyle[e].position),{style:MCt({},c.regionStyle[e].style,null==s?void 0:s[e])}),(0,Aut.pi)({type:"text",top:!0},MCt({},c.labelStyle[e],null==u?void 0:u[e])))})),n.push({type:"line",top:!1,start:["min",o],end:["max",o],style:MCt({},c.lineStyle,l)},{type:"line",top:!1,start:[i,"min"],end:[i,"max"],style:MCt({},c.lineStyle,l)})}return ACt(vEt(n))(t)}function DAt(t){var e=t.options,n=t.chart,r=e.regressionLine;if(r){var i=r.style,a=r.top,o=void 0!==a&&a,u={stroke:"#9ba29a",lineWidth:2,opacity:.5};n.annotation().shape({top:o,render:function(t,r){var a=t.addGroup({id:n.id+"-regression-line",name:"regression-line-group"}),o=function(t){var e,n=t.options,r=n.xField,i=n.yField,a=n.data,o=n.regressionLine,u=o.type,s=void 0===u?"linear":u,l=o.algorithm;return e=l?(0,_ut.kJ)(l)?l:l(a):wAt[s]().x((function(t){return t[r]})).y((function(t){return t[i]}))(a),SAt(e,t)}({view:r,options:e});a.addShape("path",{name:"regression-line",attrs:(0,Aut.pi)((0,Aut.pi)({path:o},u),i)})}})}return t}function TAt(t){var e=t.chart,n=t.options.tooltip;return n?e.tooltip(n):!1===n&&e.tooltip(!1),t}function FAt(t){return ACt(CAt,EAt,MAt,OAt,TAt,AAt,aMt,dEt,pEt,lEt,_At,cEt,fEt,DAt)(t)}var IAt=MCt({},LEt.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});ugt("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var PAt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.type="scatter",r.on(Dut.BEFORE_RENDER,(function(t){var e,n,i=r,a=i.options,o=i.chart;if((null===(e=t.data)||void 0===e?void 0:e.source)===Okt.FILTER){var u=r.chart.filterData(r.chart.getData());EAt({chart:o,options:(0,Aut.pi)((0,Aut.pi)({},a),{data:u})})}(null===(n=t.data)||void 0===n?void 0:n.source)===Okt.RESET&&EAt({chart:o,options:a})})),r}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return IAt},e.prototype.changeData=function(t){this.updateOption(kAt(MCt({},this.options,{data:t})));var e=this.options;EAt({chart:this.chart,options:e}),this.chart.changeData(t)},e.prototype.getSchemaAdaptor=function(){return FAt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(LEt),jAt="$$stock-range$$",BAt="trend",LAt="down",RAt=MCt({},LEt.getDefaultOptions(),{tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(t,e,n){var r;if("x"===t){var i=n[0];r=i?i.title:e}else r=e;return{position:"y"===t?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function ZAt(t,e){return(0,_ut.UI)(t,(function(t){var n=t&&(0,Aut.pi)({},t);if((0,_ut.kJ)(e)&&n){var r=e[0],i=e[1],a=e[2],o=e[3];n[BAt]=n[r]<=n[i]?"up":LAt,n[jAt]=[n[r],n[i],n[a],n[o]]}return n}))}function NAt(t){var e=t.chart,n=t.options,r=n.yField,i=n.data,a=n.risingFill,o=n.fallingFill,u=n.tooltip,s=n.stockStyle;e.data(ZAt(i,r));var l=u;return!1!==l&&(l=MCt({},{fields:r},l)),IEt(MCt({},t,{options:{schema:{shape:"candle",color:[a,o],style:s},yField:jAt,seriesField:BAt,rawFields:r,tooltip:l}})),t}function zAt(t){var e,n,r=t.chart,i=t.options,a=i.meta,o=i.xAxis,u=i.yAxis,s=i.xField,l=((e={})[s]={type:"timeCat",tickCount:6},e[BAt]={values:["up",LAt]},e),c=MCt(l,a,((n={})[s]=vCt(o,hCt),n[jAt]=vCt(u,hCt),n));return r.scale(c),t}function UAt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField;return!1===r?e.axis(a,!1):e.axis(a,r),!1===i?e.axis(jAt,!1):e.axis(jAt,i),t}function HAt(t){var e=t.chart,n=t.options.tooltip;return!1!==n?e.tooltip(n):e.tooltip(!1),t}function WAt(t){var e=t.chart,n=t.options.legend;return n?e.legend(BAt,n):!1===n&&e.legend(!1),t}function VAt(t){ACt(fEt,NAt,zAt,UAt,HAt,WAt,lEt,cEt,vEt(),dEt)(t)}var GAt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="stock",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return RAt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return VAt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options.yField;this.chart.changeData(ZAt(t,e))},e}(LEt);function XAt(t){return(0,_ut.UI)(t||[],(function(t,e){return{x:""+e,y:t}}))}var YAt="x",qAt="y",$At={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return""+(0,_ut.U2)(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},JAt={appendPadding:2,tooltip:(0,Aut.pi)({},$At),animation:{}};function KAt(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.areaStyle,o=n.point,u=n.line,s=null==o?void 0:o.state,l=XAt(r);e.data(l);var c=MCt({},t,{options:{xField:YAt,yField:qAt,area:{color:i,style:a},line:u,point:o}}),f=MCt({},c,{options:{tooltip:!1}}),h=MCt({},c,{options:{tooltip:!1,state:s}});return OEt(c),DEt(f),TEt(h),e.axis(!1),e.legend(!1),t}function QAt(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=XAt(r.data);return ACt(gEt(((e={})[YAt]=i,e[qAt]=a,e),((n={})[YAt]={type:"cat"},n[qAt]=mCt(o,qAt),n)))(t)}function t_t(t){return ACt(oEt("areaStyle"),KAt,QAt,sEt,fEt,cEt,vEt())(t)}var e_t={appendPadding:2,tooltip:(0,Aut.pi)({},$At),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},n_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-area",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return e_t},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;QAt({chart:e,options:this.options}),e.changeData(XAt(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return t_t},e}(LEt);function r_t(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.columnStyle,o=n.columnWidthRatio,u=XAt(r);return e.data(u),_Et(MCt({},t,{options:{xField:YAt,yField:qAt,widthRatio:o,interval:{style:a,color:i}}})),e.axis(!1),e.legend(!1),e.interaction("element-active"),t}function i_t(t){return ACt(fEt,oEt("columnStyle"),r_t,QAt,sEt,cEt,vEt())(t)}var a_t={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return""+(0,_ut.U2)(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},o_t={appendPadding:2,tooltip:(0,Aut.pi)({},a_t),animation:{}},u_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-column",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return o_t},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;QAt({chart:e,options:this.options}),e.changeData(XAt(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return i_t},e}(LEt);function s_t(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.lineStyle,o=n.point,u=null==o?void 0:o.state,s=XAt(r);e.data(s);var l=MCt({},t,{options:{xField:YAt,yField:qAt,line:{color:i,style:a},point:o}}),c=MCt({},l,{options:{tooltip:!1,state:u}});return DEt(l),TEt(c),e.axis(!1),e.legend(!1),t}function l_t(t){return ACt(s_t,QAt,fEt,sEt,cEt,vEt())(t)}var c_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-line",e}return(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return JAt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;QAt({chart:e,options:this.options}),e.changeData(XAt(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return l_t},e}(LEt),f_t={line:XEt,pie:oAt,column:xMt,bar:EMt,area:JEt,gauge:AOt,"tiny-line":l_t,"tiny-column":i_t,"tiny-area":t_t,"ring-progress":mAt,progress:dAt,scatter:FAt,histogram:ZOt,funnel:hOt,stock:VAt},h_t={line:HOt,pie:uAt,column:DMt,bar:AMt,area:QEt,gauge:_Ot,"tiny-line":c_t,"tiny-column":u_t,"tiny-area":n_t,"ring-progress":xAt,progress:pAt,scatter:PAt,histogram:NOt,funnel:pOt,stock:GAt},d_t={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function p_t(t,e,n){var r=h_t[t];r?(0,f_t[t])({chart:e,options:MCt({},r.getDefaultOptions(),(0,_ut.U2)(d_t,t,{}),n)}):console.error("could not find "+t+" plot")}function g_t(t){var e=t.chart,n=t.options,r=n.views,i=n.legend;return(0,_ut.S6)(r,(function(t){var n=t.region,r=t.data,i=t.meta,a=t.axes,o=t.coordinate,u=t.interactions,s=t.annotations,l=t.tooltip,c=t.geometries,f=e.createView({region:n});f.data(r);var h={};a&&(0,_ut.S6)(a,(function(t,e){h[e]=vCt(t,hCt)})),h=MCt({},i,h),f.scale(h),a?(0,_ut.S6)(a,(function(t,e){f.axis(e,t)})):f.axis(!1),f.coordinate(o),(0,_ut.S6)(c,(function(t){var e=MEt({chart:f,options:t}).ext,n=t.adjust;n&&e.geometry.adjust(n)})),(0,_ut.S6)(u,(function(t){!1===t.enable?f.removeInteraction(t.type):f.interaction(t.type,t.cfg)})),(0,_ut.S6)(s,(function(t){f.annotation()[t.type]((0,Aut.pi)({},t))})),"boolean"==typeof t.animation?f.animate(!1):(f.animate(!0),(0,_ut.S6)(f.geometries,(function(e){e.animate(t.animation)}))),l&&(f.interaction("tooltip"),f.tooltip(l))})),i?(0,_ut.S6)(i,(function(t,n){e.legend(n,t)})):e.legend(!1),e.tooltip(n.tooltip),t}function v_t(t){var e=t.chart,n=t.options,r=n.plots,i=n.data,a=void 0===i?[]:i;return(0,_ut.S6)(r,(function(t){var n=t.type,r=t.region,i=t.options,o=void 0===i?{}:i,u=t.top,s=o.tooltip;if(u)p_t(n,e,(0,Aut.pi)((0,Aut.pi)({},o),{data:a}));else{var l=e.createView((0,Aut.pi)({region:r},vCt(o,BEt)));s&&l.interaction("tooltip"),p_t(n,l,(0,Aut.pi)({data:a},o))}})),t}function m_t(t){var e=t.chart,n=t.options;return e.option("slider",n.slider),t}function y_t(t){return ACt(cEt,g_t,v_t,lEt,cEt,fEt,sEt,m_t,vEt())(t)}var x_t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getAssociationItems=function(t,e){var n,r=this.context.event,i=e||{},a=i.linkField,o=i.dim,u=[];if(null===(n=r.data)||void 0===n?void 0:n.data){var s=r.data.data;(0,_ut.S6)(t,(function(t){var e,n,r=a;if("x"===o?r=t.getXScale().field:"y"===o?r=null===(e=t.getYScales().find((function(t){return t.field===r})))||void 0===e?void 0:e.field:r||(r=null===(n=t.getGroupScales()[0])||void 0===n?void 0:n.field),r){var i=(0,_ut.UI)(DCt(t),(function(e){var n=!1,i=!1,a=(0,_ut.kJ)(s)?(0,_ut.U2)(s[0],r):(0,_ut.U2)(s,r);return function(t,e){var n=t.getModel().data;return(0,_ut.kJ)(n)?n[0][e]:n[e]}(e,r)===a?n=!0:i=!0,{element:e,view:t,active:n,inactive:i}}));u.push.apply(u,i)}}))}return u},e.prototype.showTooltip=function(t){var e=VCt(this.context.view),n=this.getAssociationItems(e,t);(0,_ut.S6)(n,(function(t){if(t.active){var e=t.element.shape.getCanvasBBox();t.view.showTooltip({x:e.minX+e.width/2,y:e.minY+e.height/2})}}))},e.prototype.hideTooltip=function(){var t=VCt(this.context.view);(0,_ut.S6)(t,(function(t){t.hideTooltip()}))},e.prototype.active=function(t){var e=WCt(this.context.view),n=this.getAssociationItems(e,t);(0,_ut.S6)(n,(function(t){var e=t.active,n=t.element;e&&n.setState("active",!0)}))},e.prototype.selected=function(t){var e=WCt(this.context.view),n=this.getAssociationItems(e,t);(0,_ut.S6)(n,(function(t){var e=t.active,n=t.element;e&&n.setState("selected",!0)}))},e.prototype.highlight=function(t){var e=WCt(this.context.view),n=this.getAssociationItems(e,t);(0,_ut.S6)(n,(function(t){var e=t.inactive,n=t.element;e&&n.setState("inactive",!0)}))},e.prototype.reset=function(){var t=WCt(this.context.view);(0,_ut.S6)(t,(function(t){!function(t){var e=DCt(t);(0,_ut.S6)(e,(function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("selected")&&t.setState("selected",!1),t.hasState("inactive")&&t.setState("inactive",!1)}))}(t)}))},e}(ppt);xpt("association",x_t),ugt("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),ugt("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),ugt("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),ugt("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var b_t,w_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="mix",e}return(0,Aut.ZT)(e,t),e.prototype.getSchemaAdaptor=function(){return y_t},e}(LEt);!function(t){t.DEV="DEV",t.BETA="BETA",t.STABLE="STABLE"}(b_t||(b_t={}));!function(){function t(){}Object.defineProperty(t,"MultiView",{get:function(){var t,e;return t=b_t.STABLE,e="MultiView",console.warn(t===b_t.DEV?"Plot '"+e+"' is in DEV stage, just give us issues.":t===b_t.BETA?"Plot '"+e+"' is in BETA stage, DO NOT use it in production env.":t===b_t.STABLE?"Plot '"+e+"' is in STABLE stage, import it by \"import { "+e+" } from '@antv/g2plot'\".":"invalid Stage type."),w_t},enumerable:!1,configurable:!0})}();var S_t="first-axes-view",k_t="second-axes-view",C_t="series-field-key";function E_t(t,e,n,r,i){var a=[];e.forEach((function(e){r.forEach((function(r){var i,o=((i={})[t]=r[t],i[n]=e,i[e]=r[e],i);a.push(o)}))}));var o=Object.values((0,_ut.vM)(a,n)),u=o[0],s=void 0===u?[]:u,l=o[1],c=void 0===l?[]:l;return i?[s.reverse(),c.reverse()]:[s,c]}function M_t(t){return"vertical"!==t}function O_t(t,e,n){var r=e[0],i=e[1],a=r.autoPadding,o=i.autoPadding,u=t.__axisPosition,s=u.layout,l=u.position;if(M_t(s)&&"top"===l&&(r.autoPadding=n.instance(a.top,0,a.bottom,a.left),i.autoPadding=n.instance(o.top,a.left,o.bottom,0)),M_t(s)&&"bottom"===l&&(r.autoPadding=n.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=n.instance(o.top,o.right,o.bottom,a.right/2+5)),!M_t(s)&&"bottom"===l){var c=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,a.bottom/2+5,c),i.autoPadding=n.instance(a.bottom/2+5,o.right,o.bottom,c)}if(!M_t(s)&&"top"===l){c=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,0,c),i.autoPadding=n.instance(0,o.right,a.top,c)}}function A_t(t){var e,n,r=t.chart,i=t.options,a=i.data,o=i.xField,u=i.yField,s=i.color,l=i.barStyle,c=i.widthRatio,f=i.legend,h=i.layout,d=E_t(o,u,C_t,a,M_t(h));f?r.legend(C_t,f):!1===f&&r.legend(!1);var p=d[0],g=d[1];return M_t(h)?((e=r.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:S_t})).coordinate().transpose().reflect("x"),(n=r.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:k_t})).coordinate().transpose(),e.data(p),n.data(g)):(e=r.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:S_t}),(n=r.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:k_t})).coordinate().reflect("y"),e.data(p),n.data(g)),_Et(MCt({},t,{chart:e,options:{widthRatio:c,xField:o,yField:u[0],seriesField:C_t,interval:{color:s,style:l}}})),_Et(MCt({},t,{chart:n,options:{xField:o,yField:u[1],seriesField:C_t,widthRatio:c,interval:{color:s,style:l}}})),t}function __t(t){var e,n,r,i=t.options,a=t.chart,o=i.xAxis,u=i.yAxis,s=i.xField,l=i.yField,c=HCt(a,S_t),f=HCt(a,k_t),h={};return(0,_ut.XP)((null==i?void 0:i.meta)||{}).map((function(t){(0,_ut.U2)(null==i?void 0:i.meta,[t,"alias"])&&(h[t]=i.meta[t].alias)})),a.scale(((e={})[C_t]={sync:!0,formatter:function(t){return(0,_ut.U2)(h,t,t)}},e)),gEt(((n={})[s]=o,n[l[0]]=u[l[0]],n))(MCt({},t,{chart:c})),gEt(((r={})[s]=o,r[l[1]]=u[l[1]],r))(MCt({},t,{chart:f})),t}function D_t(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,u=n.layout,s=HCt(e,S_t),l=HCt(e,k_t);return"bottom"===(null==r?void 0:r.position)?l.axis(a,(0,Aut.pi)((0,Aut.pi)({},r),{label:{formatter:function(){return""}}})):l.axis(a,!1),!1===r?s.axis(a,!1):s.axis(a,(0,Aut.pi)({position:M_t(u)?"top":"bottom"},r)),!1===i?(s.axis(o[0],!1),l.axis(o[1],!1)):(s.axis(o[0],i[o[0]]),l.axis(o[1],i[o[1]])),e.__axisPosition={position:s.getOptions().axes[a].position,layout:u},t}function T_t(t){var e=t.chart;return lEt(MCt({},t,{chart:HCt(e,S_t)})),lEt(MCt({},t,{chart:HCt(e,k_t)})),t}function F_t(t){var e=t.chart,n=t.options,r=n.yField,i=n.yAxis;return mEt(MCt({},t,{chart:HCt(e,S_t),options:{yAxis:i[r[0]]}})),mEt(MCt({},t,{chart:HCt(e,k_t),options:{yAxis:i[r[1]]}})),t}function I_t(t){var e=t.chart;return fEt(MCt({},t,{chart:HCt(e,S_t)})),fEt(MCt({},t,{chart:HCt(e,k_t)})),fEt(t),t}function P_t(t){var e=t.chart;return cEt(MCt({},t,{chart:HCt(e,S_t)})),cEt(MCt({},t,{chart:HCt(e,k_t)})),t}function j_t(t){var e,n,r=this,i=t.chart,a=t.options,o=a.label,u=a.yField,s=a.layout,l=HCt(i,S_t),c=HCt(i,k_t),f=_Ct(l,"interval"),h=_Ct(c,"interval");if(o){var d=o.callback,p=(0,Aut._T)(o,["callback"]);p.position||(p.position="middle"),void 0===p.offset&&(p.offset=2);var g=(0,Aut.pi)({},p);if(M_t(s)){var v=(null===(e=g.style)||void 0===e?void 0:e.textAlign)||("middle"===p.position?"center":"left");p.style=MCt({},p.style,{textAlign:v});g.style=MCt({},g.style,{textAlign:{left:"right",right:"left",center:"center"}[v]})}else{var m={top:"bottom",bottom:"top",middle:"middle"};"string"==typeof p.position?p.position=m[p.position]:"function"==typeof p.position&&(p.position=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return m[p.position.apply(r,t)]});var y=(null===(n=g.style)||void 0===n?void 0:n.textBaseline)||"bottom";g.style=MCt({},g.style,{textBaseline:y});p.style=MCt({},p.style,{textBaseline:{top:"bottom",bottom:"top",middle:"middle"}[y]})}f.label({fields:[u[0]],callback:d,cfg:FCt(g)}),h.label({fields:[u[1]],callback:d,cfg:FCt(p)})}else f.label(!1),h.label(!1);return t}function B_t(t){return ACt(A_t,__t,D_t,F_t,I_t,j_t,sEt,T_t,P_t)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bidirectional-bar",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return MCt({},t.getDefaultOptions.call(this),{syncViewPadding:O_t})},e.prototype.changeData=function(t){void 0===t&&(t=[]),this.chart.emit(Dut.BEFORE_CHANGE_DATA,Ngt.fromData(this.chart,Dut.BEFORE_CHANGE_DATA,null)),this.updateOption({data:t});var e=this.options,n=e.xField,r=e.yField,i=e.layout,a=E_t(n,r,C_t,t,M_t(i)),o=a[0],u=a[1],s=HCt(this.chart,S_t),l=HCt(this.chart,k_t);s.data(o),l.data(u),this.chart.render(!0),this.chart.emit(Dut.AFTER_CHANGE_DATA,Ngt.fromData(this.chart,Dut.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return B_t},e.SERIES_FIELD_KEY=C_t}(LEt);var L_t,R_t="$$range$$",Z_t="outliers_view",N_t=MCt({},LEt.getDefaultOptions(),{meta:(L_t={},L_t[R_t]={min:0,alias:"low-q1-median-q3-high"},L_t),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),z_t=function(t,e){var n=t;if(Array.isArray(e)){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4];n=(0,_ut.UI)(t,(function(t){return t[R_t]=[t[r],t[i],t[a],t[o],t[u]],t}))}return n};function U_t(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.groupField,o=n.color,u=n.tooltip,s=n.boxStyle;e.data(z_t(n.data,i));var l=(0,_ut.kJ)(i)?R_t:i,c=i?(0,_ut.kJ)(i)?i:[i]:[],f=u;!1!==f&&(f=MCt({},{fields:(0,_ut.kJ)(i)?i:[]},f));var h=IEt(MCt({},t,{options:{xField:r,yField:l,seriesField:a,tooltip:f,rawFields:c,label:!1,schema:{shape:"box",color:o,style:s}}})).ext;return a&&h.geometry.adjust("dodge"),t}function H_t(t){var e=t.chart,n=t.options,r=n.xField,i=n.data,a=n.outliersField,o=n.outliersStyle,u=n.padding,s=n.label;if(!a)return t;var l=e.createView({padding:u,id:Z_t}),c=i.reduce((function(t,e){return e[a].forEach((function(n){var r;return t.push((0,Aut.pi)((0,Aut.pi)({},e),((r={})[a]=n,r)))})),t}),[]);return l.data(c),TEt({chart:l,options:{xField:r,yField:a,point:{shape:"circle",style:o},label:s}}),l.axis(!1),t}function W_t(t){var e,n,r=t.chart,i=t.options,a=i.meta,o=i.xAxis,u=i.yAxis,s=i.xField,l=i.yField,c=i.outliersField,f=Array.isArray(l)?R_t:l,h={};if(c){var d="$$y_outliers$$";(e={})[c]={sync:d,nice:!0},e[f]={sync:d,nice:!0},h=e}var p=MCt(h,a,((n={})[s]=vCt(o,hCt),n[f]=vCt(u,hCt),n));return r.scale(p),t}function V_t(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,u=Array.isArray(o)?R_t:o;return!1===r?e.axis(a,!1):e.axis(a,r),!1===i?e.axis(R_t,!1):e.axis(u,i),t}function G_t(t){var e=t.chart,n=t.options,r=n.legend,i=n.groupField;return i?r?e.legend(i,r):e.legend(i,{position:"bottom"}):e.legend(!1),t}function X_t(t){return ACt(U_t,H_t,W_t,V_t,G_t,sEt,vEt(),lEt,cEt,fEt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="box",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return N_t},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options.yField,n=this.chart.views.find((function(t){return t.id===Z_t}));n&&n.data(t),this.chart.changeData(z_t(t,e))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return X_t}}(LEt);function Y_t(t,e,n){return t.length>1?e+"_"+n:""+e}function q_t(t){var e=t.data,n=t.xField,r=t.measureField,i=t.rangeField,a=t.targetField,o=t.layout,u=[],s=[];e.forEach((function(t,e){var o=[t[i]].flat();o.sort((function(t,e){return t-e})),o.forEach((function(r,a){var s,l=0===a?r:o[a]-o[a-1];u.push(((s={rKey:i+"_"+a})[n]=n?t[n]:String(e),s[i]=l,s))}));var l=[t[r]].flat();l.forEach((function(i,a){var o;u.push(((o={mKey:Y_t(l,r,a)})[n]=n?t[n]:String(e),o[r]=i,o))}));var c=[t[a]].flat();c.forEach((function(r,i){var o;u.push(((o={tKey:Y_t(c,a,i)})[n]=n?t[n]:String(e),o[a]=r,o))})),s.push(t[i],t[r],t[a])}));var l=Math.min.apply(Math,s.flat(1/0)),c=Math.max.apply(Math,s.flat(1/0));return l=l>0?0:l,"vertical"===o&&u.reverse(),{min:l,max:c,ds:u}}function $_t(t){var e=t.chart,n=t.options,r=n.bulletStyle,i=n.targetField,a=n.rangeField,o=n.measureField,u=n.xField,s=n.color,l=n.layout,c=n.size,f=n.label,h=q_t(n),d=h.min,p=h.max,g=h.ds;e.data(g),_Et(MCt({},t,{options:{xField:u,yField:a,seriesField:"rKey",isStack:!0,label:(0,_ut.U2)(f,"range"),interval:{color:(0,_ut.U2)(s,"range"),style:(0,_ut.U2)(r,"range"),size:(0,_ut.U2)(c,"range")}}})),e.geometries[0].tooltip(!1),_Et(MCt({},t,{options:{xField:u,yField:o,seriesField:"mKey",isStack:!0,label:(0,_ut.U2)(f,"measure"),interval:{color:(0,_ut.U2)(s,"measure"),style:(0,_ut.U2)(r,"measure"),size:(0,_ut.U2)(c,"measure")}}}));var v=MCt({},t,{options:{xField:u,yField:i,seriesField:"tKey",label:(0,_ut.U2)(f,"target"),point:{color:(0,_ut.U2)(s,"target"),style:(0,_ut.U2)(r,"target"),size:(0,_ut.mf)((0,_ut.U2)(c,"target"))?function(t){return(0,_ut.U2)(c,"target")(t)/2}:(0,_ut.U2)(c,"target")/2,shape:"horizontal"===l?"line":"hyphen"}}});return TEt(v),"horizontal"===l&&e.coordinate().transpose(),(0,Aut.pi)((0,Aut.pi)({},t),{ext:{data:{min:d,max:p}}})}function J_t(t){var e,n,r=t.options,i=t.ext,a=r.xAxis,o=r.yAxis,u=r.targetField,s=r.rangeField,l=r.measureField,c=r.xField,f=i.data;return ACt(gEt(((e={})[c]=a,e[l]=o,e),((n={})[l]={min:null==f?void 0:f.min,max:null==f?void 0:f.max,sync:!0},n[u]={sync:""+l},n[s]={sync:""+l},n)))(t)}function K_t(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.measureField,u=n.rangeField,s=n.targetField;return e.axis(""+u,!1),e.axis(""+s,!1),!1===r?e.axis(""+a,!1):e.axis(""+a,r),!1===i?e.axis(""+o,!1):e.axis(""+o,i),t}function Q_t(t){var e=t.chart,n=t.options.legend;return e.removeInteraction("legend-filter"),e.legend(n),e.legend("rKey",!1),e.legend("mKey",!1),e.legend("tKey",!1),t}function tDt(t){var e=t.chart,n=t.options,r=n.label,i=n.measureField,a=n.targetField,o=n.rangeField,u=e.geometries,s=u[0],l=u[1],c=u[2];return(0,_ut.U2)(r,"range")?s.label(""+o,(0,Aut.pi)({layout:[{type:"limit-in-plot"}]},FCt(r.range))):s.label(!1),(0,_ut.U2)(r,"measure")?l.label(""+i,(0,Aut.pi)({layout:[{type:"limit-in-plot"}]},FCt(r.measure))):l.label(!1),(0,_ut.U2)(r,"target")?c.label(""+a,(0,Aut.pi)({layout:[{type:"limit-in-plot"}]},FCt(r.target))):c.label(!1),t}function eDt(t){ACt($_t,J_t,K_t,Q_t,fEt,tDt,sEt,lEt,cEt)(t)}var nDt=MCt({},LEt.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}}),rDt=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bullet",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return nDt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=q_t(this.options),n=e.min,r=e.max,i=e.ds;J_t({options:this.options,ext:{data:{min:n,max:r}},chart:this.chart}),this.chart.changeData(i)},e.prototype.getSchemaAdaptor=function(){return eDt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(LEt),{y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null});function iDt(t,e){var n=function(t){return(0,_ut.f0)({},rDt,t)}(t),r={},i=e.nodes,a=e.links;i.forEach((function(t){var e=n.id(t);r[e]=t})),function(t,e,n){(0,_ut.U5)(t,(function(t,r){t.inEdges=e.filter((function(t){return""+n.target(t)==""+r})),t.outEdges=e.filter((function(t){return""+n.source(t)==""+r})),t.edges=t.outEdges.concat(t.inEdges),t.frequency=t.edges.length,t.value=0,t.inEdges.forEach((function(e){t.value+=n.targetWeight(e)})),t.outEdges.forEach((function(e){t.value+=n.sourceWeight(e)}))}))}(r,a,n),function(t,e){var n={weight:function(t,e){return e.value-t.value},frequency:function(t,e){return e.frequency-t.frequency},id:function(t,n){return(""+e.id(t)).localeCompare(""+e.id(n))}},r=n[e.sortBy];!r&&(0,_ut.mf)(e.sortBy)&&(r=e.sortBy),r&&t.sort(r)}(i,n);var o=function(t,e){var n=t.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),a=e.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;t.forEach((function(t){o+=t.value})),t.forEach((function(t){t.weight=t.value/o,t.width=t.weight*(1-r),t.height=a})),t.forEach((function(n,r){for(var o=0,u=r-1;u>=0;u--)o+=t[u].width+2*i;var s=n.minX=i+o,l=n.maxX=n.minX+n.width,c=n.minY=e.y-a/2,f=n.maxY=c+a;n.x=[s,l,l,s],n.y=[c,c,f,f]}))}else{var u=1/n;t.forEach((function(t,n){t.x=(n+.5)*u,t.y=e.y}))}return t}(i,n),u=function(t,e,n){if(n.weight){var r={};(0,_ut.U5)(t,(function(t,e){r[e]=t.value})),e.forEach((function(e){var i=n.source(e),a=n.target(e),o=t[i],u=t[a];if(o&&u){var s=r[i],l=n.sourceWeight(e),c=o.minX+(o.value-s)/o.value*o.width,f=c+l/o.value*o.width;r[i]-=l;var h=r[a],d=n.targetWeight(e),p=u.minX+(u.value-h)/u.value*u.width,g=p+d/u.value*u.width;r[a]-=d;var v=n.y;e.x=[c,f,p,g],e.y=[v,v,v,v],e.source=o,e.target=u}}))}else e.forEach((function(e){var r=t[n.source(e)],i=t[n.target(e)];r&&i&&(e.x=[r.x,i.x],e.y=[r.y,i.y],e.source=r,e.target=i)}));return e}(r,a,n);return{nodes:o,links:u}}var aDt="name",oDt="source",uDt={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(t,e){return{offsetX:(t[0]+t[1])/2>.5?-4:4,content:e}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(t){return!(0,_ut.U2)(t,[0,"data","isNode"])},formatter:function(t){return{name:t.source+" -> "+t.target,value:t.value}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function sDt(t){var e=t.options,n=e.data,r=e.sourceField,i=e.targetField,a=e.weightField,o=e.nodePaddingRatio,u=e.nodeWidthRatio,s=e.rawFields,l=void 0===s?[]:s,c=iDt({weight:!0,nodePaddingRatio:o,nodeWidthRatio:u},yCt(n,r,i,a)),f=c.nodes,h=c.links,d=f.map((function(t){return(0,Aut.pi)((0,Aut.pi)({},vCt(t,(0,Aut.pr)(["id","x","y","name"],l))),{isNode:!0})})),p=h.map((function(t){return(0,Aut.pi)((0,Aut.pi)({source:t.source.name,target:t.target.name,name:t.source.name||t.target.name},vCt(t,(0,Aut.pr)(["x","y","value"],l))),{isNode:!1})}));return(0,Aut.pi)((0,Aut.pi)({},t),{ext:(0,Aut.pi)((0,Aut.pi)({},t.ext),{chordData:{nodesData:d,edgesData:p}})})}function lDt(t){var e;return t.chart.scale(((e={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}})[aDt]={sync:"color"},e[oDt]={sync:"color"},e)),t}function cDt(t){return t.chart.axis(!1),t}function fDt(t){return t.chart.legend(!1),t}function hDt(t){var e=t.chart,n=t.options.tooltip;return e.tooltip(n),t}function dDt(t){return t.chart.coordinate("polar").reflect("y"),t}function pDt(t){var e=t.chart,n=t.options,r=t.ext.chordData.nodesData,i=n.nodeStyle,a=n.label,o=n.tooltip,u=e.createView();return u.data(r),FEt({chart:u,options:{xField:"x",yField:"y",seriesField:aDt,polygon:{style:i},label:a,tooltip:o}}),t}function gDt(t){var e=t.chart,n=t.options,r=t.ext.chordData.edgesData,i=n.edgeStyle,a=n.tooltip,o=e.createView();return o.data(r),AEt({chart:o,options:{xField:"x",yField:"y",seriesField:oDt,edge:{style:i,shape:"arc"},tooltip:a}}),t}function vDt(t){var e=t.chart;return GCt(e,t.options.animation,function(t){return(0,_ut.U2)(t,["views","length"],0)<=0?t.geometries:(0,_ut.u4)(t.views,(function(t,e){return t.concat(e.geometries)}),t.geometries)}(e)),t}function mDt(t){return ACt(fEt,sDt,dDt,lDt,cDt,fDt,hDt,gDt,pDt,lEt,hEt,vDt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="chord",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return uDt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return mDt}}(LEt);var yDt=["x","y","r","name","value","path","depth"],xDt={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},bDt="drilldown-bread-crumb",wDt={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},SDt="hierarchy-data-transform-params",kDt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="drill-down",e.historyCache=[],e.breadCrumbGroup=null,e.breadCrumbCfg=wDt,e}return(0,Aut.ZT)(e,t),e.prototype.click=function(){var t=(0,_ut.U2)(this.context,["event","data","data"]);if(!t)return!1;this.drill(t),this.drawBreadCrumb()},e.prototype.resetPosition=function(){if(this.breadCrumbGroup){var t=this.context.view.getCoordinate(),e=this.breadCrumbGroup,n=e.getBBox(),r=this.getButtonCfg().position,i={x:t.start.x,y:t.end.y-(n.height+10)};t.isPolar&&(i={x:0,y:0}),"bottom-left"===r&&(i={x:t.start.x,y:t.start.y});var a=nmt.transform(null,[["t",i.x+0,i.y+n.height+5]]);e.setMatrix(a)}},e.prototype.back=function(){(0,_ut.dp)(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},e.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},e.prototype.drill=function(t){var e=this.context.view,n=(0,_ut.U2)(e,["interactions","drill-down","cfg","transformData"],(function(t){return t})),r=n((0,Aut.pi)({data:t.data},t[SDt]));e.changeData(r);for(var i=[],a=t;a;){var o=a.data;i.unshift({id:o.name+"_"+a.height+"_"+a.depth,name:o.name,children:n((0,Aut.pi)({data:o},t[SDt]))}),a=a.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(i)},e.prototype.backTo=function(t){if(t&&!(t.length<=0)){var e=this.context.view,n=(0,_ut.Z$)(t).children;e.changeData(n),t.length>1?(this.historyCache=t,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},e.prototype.getButtonCfg=function(){var t=this.context.view,e=(0,_ut.U2)(t,["interactions","drill-down","cfg","drillDownConfig"]);return MCt(this.breadCrumbCfg,null==e?void 0:e.breadCrumb,this.cfg)},e.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},e.prototype.drawBreadCrumbGroup=function(){var t=this,e=this.getButtonCfg(),n=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:bDt});var r=0;n.forEach((function(i,a){var o=t.breadCrumbGroup.addShape({type:"text",id:i.id,name:bDt+"_"+i.name+"_text",attrs:(0,Aut.pi)((0,Aut.pi)({text:0!==a||(0,_ut.UM)(e.rootText)?i.name:e.rootText},e.textStyle),{x:r,y:0})}),u=o.getBBox();if(r+=u.width+4,o.on("click",(function(e){var r,i=e.target.get("id");if(i!==(null===(r=(0,_ut.Z$)(n))||void 0===r?void 0:r.id)){var a=n.slice(0,n.findIndex((function(t){return t.id===i}))+1);t.backTo(a)}})),o.on("mouseenter",(function(t){var r;t.target.get("id")!==(null===(r=(0,_ut.Z$)(n))||void 0===r?void 0:r.id)?o.attr(e.activeTextStyle):o.attr({cursor:"default"})})),o.on("mouseleave",(function(){o.attr(e.textStyle)})),a<n.length-1){var s=t.breadCrumbGroup.addShape({type:"text",name:e.name+"_"+i.name+"_divider",attrs:(0,Aut.pi)((0,Aut.pi)({text:e.dividerText},e.textStyle),{x:r,y:0})}).getBBox();r+=s.width+4}}))},e.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},e.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),t.prototype.destroy.call(this)},e}(ppt);function CDt(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Array.from(t))).length,a=[];r<i;)e=t[r],n&&ODt(n,e)?++r:(n=_Dt(a=EDt(a,e)),r=0);return n}function EDt(t,e){var n,r;if(ADt(e,t))return[e];for(n=0;n<t.length;++n)if(MDt(e,t[n])&&ADt(DDt(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(MDt(DDt(t[n],t[r]),e)&&MDt(DDt(t[n],e),t[r])&&MDt(DDt(t[r],e),t[n])&&ADt(TDt(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function MDt(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function ODt(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function ADt(t,e){for(var n=0;n<e.length;++n)if(!ODt(t,e[n]))return!1;return!0}function _Dt(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return DDt(t[0],t[1]);case 3:return TDt(t[0],t[1],t[2])}}function DDt(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,u=e.r,s=a-n,l=o-r,c=u-i,f=Math.sqrt(s*s+l*l);return{x:(n+a+s/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+u)/2}}function TDt(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,u=e.y,s=e.r,l=n.x,c=n.y,f=n.r,h=r-o,d=r-l,p=i-u,g=i-c,v=s-a,m=f-a,y=r*r+i*i-a*a,x=y-o*o-u*u+s*s,b=y-l*l-c*c+f*f,w=d*p-h*g,S=(p*b-g*x)/(2*w)-r,k=(g*v-p*m)/w,C=(d*x-h*b)/(2*w)-i,E=(h*m-d*v)/w,M=k*k+E*E-1,O=2*(a+S*k+C*E),A=S*S+C*C-a*a,_=-(M?(O+Math.sqrt(O*O-4*M*A))/(2*M):A/O);return{x:r+S+k*_,y:i+C+E*_,r:_}}function FDt(t,e,n){var r,i,a,o,u=t.x-e.x,s=t.y-e.y,l=u*u+s*s;l?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(l+o-i)/(2*l),a=Math.sqrt(Math.max(0,o/l-r*r)),n.x=t.x-r*u-a*s,n.y=t.y-r*s+a*u):(r=(l+i-o)/(2*l),a=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*u-a*s,n.y=e.y+r*s+a*u)):(n.x=e.x+n.r,n.y=e.y)}function IDt(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function PDt(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function jDt(t){this._=t,this.next=null,this.previous=null}function BDt(t){if(!(i=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var e,n,r,i,a,o,u,s,l,c,f;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;FDt(n,e,r=t[2]),e=new jDt(e),n=new jDt(n),r=new jDt(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(u=3;u<i;++u){FDt(e._,n._,r=t[u]),r=new jDt(r),s=n.next,l=e.previous,c=n._.r,f=e._.r;do{if(c<=f){if(IDt(s._,r._)){n=s,e.next=n,n.previous=e,--u;continue t}c+=s._.r,s=s.next}else{if(IDt(l._,r._)){(e=l).next=n,n.previous=e,--u;continue t}f+=l._.r,l=l.previous}}while(s!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=PDt(e);(r=r.next)!==n;)(o=PDt(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=CDt(e),u=0;u<i;++u)(e=t[u]).x-=r.x,e.y-=r.y;return r.r}function LDt(t){return BDt(t),t}function RDt(t){return null==t?null:ZDt(t)}function ZDt(t){if("function"!=typeof t)throw new Error;return t}function NDt(){return 0}function zDt(t){return function(){return t}}function UDt(t){return Math.sqrt(t.value)}function HDt(){var t=null,e=1,n=1,r=NDt;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(WDt(t)).eachAfter(VDt(r,.5)).eachBefore(GDt(1)):i.eachBefore(WDt(UDt)).eachAfter(VDt(NDt,1)).eachAfter(VDt(r,i.r/Math.min(e,n))).eachBefore(GDt(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=RDt(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:zDt(+t),i):r},i}function WDt(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function VDt(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,u=t(n)*e||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=BDt(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function GDt(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function XDt(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function YDt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return qDt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qDt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function qDt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $Dt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return JDt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JDt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function JDt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var KDt=G().mark(QDt);function QDt(){var t,e,n,r,i,a;return G().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=[t=this];case 1:e=n.reverse(),n=[];case 2:if(!(t=e.pop())){o.next=8;break}return o.next=5,t;case 5:if(r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);o.next=2;break;case 8:if(n.length){o.next=1;break}case 9:case"end":return o.stop()}}),KDt,this)}function tTt(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=nTt)):void 0===e&&(e=eTt);for(var n,r,i,a,o,u=new aTt(t),s=[u];n=s.pop();)if((i=e(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)s.push(r=i[a]=new aTt(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(iTt)}function eTt(t){return t.children}function nTt(t){return Array.isArray(t)?t[1]:null}function rTt(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function iTt(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function aTt(t){this.data=t,this.depth=this.height=0,this.parent=null}aTt.prototype=tTt.prototype=(0,Z.Z)({constructor:aTt,count:function(){return this.eachAfter(XDt)},each:function(t,e){var n,r=-1,i=YDt(this);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.call(e,a,++r,this)}}catch(o){i.e(o)}finally{i.f()}return this},eachAfter:function(t,e){for(var n,r,i,a=this,o=[a],u=[],s=-1;a=o.pop();)if(u.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=u.pop();)t.call(e,a,++s,this);return this},eachBefore:function(t,e){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(t.call(e,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(t,e){var n,r=-1,i=$Dt(this);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t.call(e,a,++r,this))return a}}catch(o){i.e(o)}finally{i.f()}},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return tTt(this).eachBefore(rTt)}},Symbol.iterator,QDt);var oTt="nodeIndex",uTt="childNodeCount",sTt="nodeAncestor",lTt="Invalid field: it must be a string!";function cTt(t,e){var n=t.field,r=t.fields;if((0,_ut.HD)(n))return n;if((0,_ut.kJ)(n))return console.warn(lTt),n[0];if(console.warn(lTt+" will try to get fields instead."),(0,_ut.HD)(r))return r;if((0,_ut.kJ)(r)&&r.length)return r[0];if(e)return e;throw new TypeError(lTt)}function fTt(t){var e,n,r=[];t&&t.each?t.each((function(t){var i,a;t.parent!==e?(e=t.parent,n=0):n+=1;var o=(0,_ut.hX)(((null===(i=t.ancestors)||void 0===i?void 0:i.call(t))||[]).map((function(t){return r.find((function(e){return e.name===t.name}))||t})),(function(e){var n=e.depth;return n>0&&n<t.depth}));t[sTt]=o,t[uTt]=(null===(a=t.children)||void 0===a?void 0:a.length)||0,t[oTt]=n,r.push(t)})):t&&t.eachNode&&t.eachNode((function(t){r.push(t)}));return r}var hTt={field:"value",as:["x","y","r"],sort:function(t,e){return e.value-t.value}};function dTt(t){var e=t.data,n=t.hierarchyConfig,r=t.rawFields,i=void 0===r?[]:r,a=t.enableDrillDown,o=function(t,e){var n,r=(e=(0,_ut.f0)({},hTt,e)).as;if(!(0,_ut.kJ)(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');try{n=cTt(e)}catch(s){console.warn(s)}var i=function(t){return HDt().size(e.size).padding(e.padding)(tTt(t).sum((function(t){return t[n]})).sort(e.sort))}(t),a=r[0],o=r[1],u=r[2];return i.each((function(t){t[a]=t.x,t[o]=t.y,t[u]=t.r})),fTt(i)}(e,(0,Aut.pi)((0,Aut.pi)({},n),{field:"value",as:["x","y","r"]})),u=[];return o.forEach((function(t){for(var e,r=t.data.name,o=(0,Aut.pi)({},t);o.depth>1;)r=(null===(e=o.parent.data)||void 0===e?void 0:e.name)+" / "+r,o=o.parent;if(a&&t.depth>2)return null;var s=MCt({},t.data,(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},vCt(t.data,i)),{path:r}),t));s.ext=n,s[SDt]={hierarchyConfig:n,rawFields:i,enableDrillDown:a},u.push(s)})),u}function pTt(t,e,n){var r=BCt([t,e]),i=r[0],a=r[1],o=r[2],u=r[3],s=n.width-(u+a),l=n.height-(i+o),c=Math.min(s,l),f=(s-c)/2,h=(l-c)/2;return{finalPadding:[i+h,a+f,o+h,u+f],finalSize:c<0?0:c}}function gTt(t){var e=t.chart,n=Math.min(e.viewBBox.width,e.viewBBox.height);return MCt({options:{size:function(t){return t.r*n}}},t)}function vTt(t){var e=t.options,n=t.chart,r=n.viewBBox,i=e.padding,a=e.appendPadding,o=e.drilldown,u=a;(null==o?void 0:o.enabled)&&(u=BCt([jCt(n.appendPadding,(0,_ut.U2)(o,["breadCrumb","position"])),a]));var s=pTt(i,u,r).finalPadding;return n.padding=s,n.appendPadding=0,t}function mTt(t){var e=t.chart,n=t.options,r=e.padding,i=e.appendPadding,a=n.color,o=n.colorField,u=n.pointStyle,s=n.hierarchyConfig,l=n.sizeField,c=n.rawFields,f=void 0===c?[]:c,h=n.drilldown,d=dTt({data:n.data,hierarchyConfig:s,enableDrillDown:null==h?void 0:h.enabled,rawFields:f});e.data(d);var p=pTt(r,i,e.viewBBox).finalSize,g=function(t){return t.r*p};return l&&(g=function(t){return t[l]*p}),TEt(MCt({},t,{options:{xField:"x",yField:"y",seriesField:o,sizeField:l,rawFields:(0,Aut.pr)(yDt,f),point:{color:a,style:u,shape:"circle",size:g}}})),t}function yTt(t){return ACt(gEt({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(t)}function xTt(t){var e=t.chart,n=t.options.tooltip;if(!1===n)e.tooltip(!1);else{var r=n;(0,_ut.U2)(n,"fields")||(r=MCt({},{customItems:function(t){return t.map((function(t){var n=(0,_ut.U2)(e.getOptions(),"scales"),r=(0,_ut.U2)(n,["name","formatter"],(function(t){return t})),i=(0,_ut.U2)(n,["value","formatter"],(function(t){return t}));return(0,Aut.pi)((0,Aut.pi)({},t),{name:r(t.data.name),value:i(t.data.value)})}))}},r)),e.tooltip(r)}return t}function bTt(t){return t.chart.axis(!1),t}function wTt(t){var e=t.drilldown,n=t.interactions,r=void 0===n?[]:n;return(null==e?void 0:e.enabled)?MCt({},t,{interactions:(0,Aut.pr)(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:dTt,enableDrillDown:!0}}])}):t}function STt(t){return lEt({chart:t.chart,options:wTt(t.options)}),t}function kTt(t){return ACt(oEt("pointStyle"),gTt,vTt,fEt,yTt,mTt,bTt,uEt,xTt,STt,cEt,vEt())(t)}function CTt(t){var e=(0,_ut.U2)(t,["event","data","data"],{});return(0,_ut.kJ)(e.children)&&e.children.length>0}function ETt(t){var e=t.view.getCoordinate(),n=e.innerRadius;if(n){var r=t.event,i=r.x,a=r.y,o=e.center,u=o.x,s=o.y,l=e.getRadius()*n;return Math.sqrt(Math.pow(u-i,2)+Math.pow(s-a,2))<l}return!1}xpt("drill-down-action",kDt),ugt("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:CTt},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:ETt}],start:[{trigger:"element:click",isEnable:CTt,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:ETt,action:["drill-down-action:back"]}]});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle-packing",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return xDt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return kTt},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(LEt);var MTt,OTt,ATt="left-axes-view",_Tt="right-axes-view",DTt={nice:!0,label:{autoHide:!0,autoRotate:!1}},TTt=(0,Aut.pi)((0,Aut.pi)({},DTt),{position:"left"}),FTt=(0,Aut.pi)((0,Aut.pi)({},DTt),{position:"right",grid:null});function ITt(t){return(0,_ut.U2)(t,"geometry")===OTt.Line}function PTt(t){return(0,_ut.U2)(t,"geometry")===OTt.Column}function jTt(t,e,n){return PTt(n)?MCt({},{geometry:OTt.Column,label:n.label&&n.isRange?{content:function(t){var n;return null===(n=t[e])||void 0===n?void 0:n.join("-")}}:void 0},n):(0,Aut.pi)({geometry:OTt.Line},n)}function BTt(t,e){var n=t[0],r=t[1];return(0,_ut.kJ)(e)?[e[0],e[1]]:[(0,_ut.U2)(e,n),(0,_ut.U2)(e,r)]}function LTt(t,e){return e===MTt.Left?!1!==t&&MCt({},TTt,t):e===MTt.Right?!1!==t&&MCt({},FTt,t):t}function RTt(t){var e=t.view,n=t.geometryOption,r=t.yField,i=t.legend,a=(0,_ut.U2)(i,"marker"),o=_Ct(e,ITt(n)?"line":"interval");if(!n.seriesField){var u=(0,_ut.U2)(e,"options.scales."+r+".alias")||r,s=o.getAttribute("color"),l=e.getTheme().defaultColor;s&&(l=nmt.getMappingValue(s,u,(0,_ut.U2)(s,["values",0],l)));var c=((0,_ut.mf)(a)?a:!(0,_ut.xb)(a)&&MCt({},{style:{stroke:l,fill:l}},a))||(ITt(n)?{symbol:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},style:{lineWidth:2,r:6,stroke:l}}:{symbol:"square",style:{fill:l}});return[{value:r,name:u,marker:c,isGeometry:!0,viewId:e.id}]}var f=o.getGroupAttributes();return(0,_ut.u4)(f,(function(t,n){var r=nmt.getLegendItems(e,o,n,e.getTheme(),a);return t.concat(r)}),[])}!function(t){t.Left="Left",t.Right="Right"}(MTt||(MTt={})),function(t){t.Line="line",t.Column="column"}(OTt||(OTt={}));var ZTt=function(t,e){var n=e[0],r=e[1],i=t.getOptions().data,a=t.getXScale(),o=(0,_ut.dp)(i);if(a&&o){var u=(0,_ut.I)(i,a.field),s=u,l=(0,_ut.dp)(s),c=Math.floor(n*(l-1)),f=Math.floor(r*(l-1));t.filter(a.field,(function(t){var e=s.indexOf(t);return!(e>-1)||function(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}(e,c,f)})),t.getRootView().render(!0)}};function NTt(t){var e,n=t.options,r=n.geometryOptions,i=void 0===r?[]:r,a=n.xField,o=n.yField,u=(0,_ut.yW)(i,(function(t){var e=t.geometry;return e===OTt.Line||void 0===e}));return MCt({},{options:{geometryOptions:[],meta:(e={},e[a]={type:"cat",sync:!0,range:u?[0,1]:void 0},e),tooltip:{showMarkers:u,showCrosshairs:u,shared:!0,crosshairs:{type:"x"}},interactions:u?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},t,{options:{yAxis:BTt(o,n.yAxis),geometryOptions:[jTt(0,o[0],i[0]),jTt(0,o[1],i[1])],annotations:BTt(o,n.annotations)}})}function zTt(t){var e,n,r=t.chart,i=t.options.geometryOptions,a={line:0,column:1};return[{type:null===(e=i[0])||void 0===e?void 0:e.geometry,id:ATt},{type:null===(n=i[1])||void 0===n?void 0:n.geometry,id:_Tt}].sort((function(t,e){return-a[t.type]+a[e.type]})).forEach((function(t){return r.createView({id:t.id})})),t}function UTt(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.geometryOptions,o=n.data,u=n.tooltip;return[(0,Aut.pi)((0,Aut.pi)({},a[0]),{id:ATt,data:o[0],yField:i[0]}),(0,Aut.pi)((0,Aut.pi)({},a[1]),{id:_Tt,data:o[1],yField:i[1]})].forEach((function(t){var n=t.id,i=t.data,a=t.yField,o=PTt(t)&&t.isPercent,s=o?REt(i,a,r,a):i,l=HCt(e,n).data(s),c=o?(0,Aut.pi)({formatter:function(e){return{name:e[t.seriesField]||a,value:(100*Number(e[a])).toFixed(2)+"%"}}},u):u;!function(t){var e=t.options,n=t.chart,r=e.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,u=r.groupField,s=r.isGroup,l=["xField","yField"];if(ITt(r)){DEt(MCt({},t,{options:(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},vCt(e,l)),r),{line:{color:r.color,style:r.lineStyle}})})),TEt(MCt({},t,{options:(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},vCt(e,l)),r),{point:r.point&&(0,Aut.pi)({color:a,shape:"circle"},r.point)})}));var c=[];s&&c.push({type:"dodge",dodgeBy:u||o,customOffset:0}),i&&c.push({type:"stack"}),c.length&&(0,_ut.S6)(n.geometries,(function(t){t.adjust(c)}))}PTt(r)&&xMt(MCt({},t,{options:(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},vCt(e,l)),r),{widthRatio:r.columnWidthRatio,interval:(0,Aut.pi)((0,Aut.pi)({},vCt(r,["color"])),{style:r.columnStyle})})}))}({chart:l,options:{xField:r,yField:a,tooltip:c,geometryOption:t}})})),t}function HTt(t){var e,n=t.chart,r=t.options.geometryOptions,i=(null===(e=n.getTheme())||void 0===e?void 0:e.colors10)||[],a=0;return n.once("beforepaint",(function(){(0,_ut.S6)(r,(function(t,e){var r=HCt(n,0===e?ATt:_Tt);if(!t.color){var o=r.getGroupScales(),u=(0,_ut.U2)(o,[0,"values","length"],1),s=i.slice(a,a+u).concat(0===e?[]:i);r.geometries.forEach((function(e){t.seriesField?e.color(t.seriesField,s):e.color(s[0])})),a+=u}})),n.render(!0)})),t}function WTt(t){var e,n,r=t.chart,i=t.options,a=i.xAxis,o=i.yAxis,u=i.xField,s=i.yField;return gEt(((e={})[u]=a,e[s[0]]=o[0],e))(MCt({},t,{chart:HCt(r,ATt)})),gEt(((n={})[u]=a,n[s[1]]=o[1],n))(MCt({},t,{chart:HCt(r,_Tt)})),t}function VTt(t){var e=t.chart,n=t.options,r=HCt(e,ATt),i=HCt(e,_Tt),a=n.xField,o=n.yField,u=n.xAxis,s=n.yAxis;return e.axis(a,!1),e.axis(o[0],!1),e.axis(o[1],!1),r.axis(a,u),r.axis(o[0],LTt(s[0],MTt.Left)),i.axis(a,!1),i.axis(o[1],LTt(s[1],MTt.Right)),t}function GTt(t){var e=t.chart,n=t.options.tooltip,r=HCt(e,ATt),i=HCt(e,_Tt);return e.tooltip(n),r.tooltip({shared:!0}),i.tooltip({shared:!0}),t}function XTt(t){var e=t.chart;return lEt(MCt({},t,{chart:HCt(e,ATt)})),lEt(MCt({},t,{chart:HCt(e,_Tt)})),t}function YTt(t){var e=t.chart,n=t.options.annotations,r=(0,_ut.U2)(n,[0]),i=(0,_ut.U2)(n,[1]);return vEt(r)(MCt({},t,{chart:HCt(e,ATt),options:{annotations:r}})),vEt(i)(MCt({},t,{chart:HCt(e,_Tt),options:{annotations:i}})),t}function qTt(t){var e=t.chart;return fEt(MCt({},t,{chart:HCt(e,ATt)})),fEt(MCt({},t,{chart:HCt(e,_Tt)})),fEt(t),t}function $Tt(t){var e=t.chart;return cEt(MCt({},t,{chart:HCt(e,ATt)})),cEt(MCt({},t,{chart:HCt(e,_Tt)})),t}function JTt(t){var e=t.chart,n=t.options.yAxis;return mEt(MCt({},t,{chart:HCt(e,ATt),options:{yAxis:n[0]}})),mEt(MCt({},t,{chart:HCt(e,_Tt),options:{yAxis:n[1]}})),t}function KTt(t){var e=t.chart,n=t.options,r=n.legend,i=n.geometryOptions,a=n.yField,o=n.data,u=HCt(e,ATt),s=HCt(e,_Tt);if(!1===r)e.legend(!1);else if((0,_ut.Kn)(r)&&!0===r.custom)e.legend(r);else{var l=(0,_ut.U2)(i,[0,"legend"],r),c=(0,_ut.U2)(i,[1,"legend"],r);e.once("beforepaint",(function(){var t=o[0].length?RTt({view:u,geometryOption:i[0],yField:a[0],legend:l}):[],n=o[1].length?RTt({view:s,geometryOption:i[1],yField:a[1],legend:c}):[];e.legend(MCt({},r,{custom:!0,items:t.concat(n)}))})),i[0].seriesField&&u.legend(i[0].seriesField,l),i[1].seriesField&&s.legend(i[1].seriesField,c),e.on("legend-item:click",(function(t){var n=(0,_ut.U2)(t,"gEvent.delegateObject",{});if(n&&n.item){var r=n.item,i=r.value,o=r.isGeometry,u=r.viewId;if(o){if((0,_ut.cx)(a,(function(t){return t===i}))>-1){var s=(0,_ut.U2)(HCt(e,u),"geometries");(0,_ut.S6)(s,(function(t){t.changeVisible(!n.item.unchecked)}))}}else{var l=(0,_ut.U2)(e.getController("legend"),"option.items",[]);(0,_ut.S6)(e.views,(function(t){var n=t.getGroupScales();(0,_ut.S6)(n,(function(e){e.values&&e.values.indexOf(i)>-1&&t.filter(e.field,(function(t){return!(0,_ut.sE)(l,(function(e){return e.value===t})).unchecked}))})),e.render(!0)}))}}}))}return t}function QTt(t){var e=t.chart,n=t.options.slider,r=HCt(e,ATt),i=HCt(e,_Tt);return n&&(r.option("slider",n),r.on("slider:valuechanged",(function(t){var e=t.event,n=e.value,r=e.originValue;(0,_ut.Xy)(n,r)||ZTt(i,n)})),e.once("afterpaint",(function(){if(!(0,_ut.jn)(n)){var t=n.start,e=n.end;(t||e)&&ZTt(i,[t,e])}}))),t}function tFt(t){return ACt(NTt,zTt,qTt,UTt,WTt,VTt,JTt,GTt,XTt,YTt,$Tt,HTt,KTt,QTt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dual-axes",e}(0,Aut.ZT)(e,t),e.prototype.getDefaultOptions=function(){return MCt({},t.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},e.prototype.getSchemaAdaptor=function(){return tFt}}(LEt);function eFt(t){var e=t.chart,n=t.options,r=n.type,i=n.data,a=n.fields,o=n.eachView,u=(0,_ut.CE)(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return e.data(i),e.facet(r,(0,Aut.pi)((0,Aut.pi)({},u),{fields:a,eachView:function(t,e){var n=o(t,e);if(n.geometries)!function(t,e){var n=e.data,r=e.coordinate,i=e.interactions,a=e.annotations,o=e.animation,u=e.tooltip,s=e.axes,l=e.meta,c=e.geometries;n&&t.data(n);var f={};s&&(0,_ut.S6)(s,(function(t,e){f[e]=vCt(t,hCt)})),f=MCt({},l,f),t.scale(f),r&&t.coordinate(r),!1===s?t.axis(!1):(0,_ut.S6)(s,(function(e,n){t.axis(n,e)})),(0,_ut.S6)(c,(function(e){var n=MEt({chart:t,options:e}).ext,r=e.adjust;r&&n.geometry.adjust(r)})),(0,_ut.S6)(i,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg)})),(0,_ut.S6)(a,(function(e){t.annotation()[e.type]((0,Aut.pi)({},e))})),GCt(t,o),u?(t.interaction("tooltip"),t.tooltip(u)):!1===u&&t.removeInteraction("tooltip")}(t,n);else{var r=n,i=r.options;i.tooltip&&t.interaction("tooltip"),p_t(r.type,t,i)}}})),t}function nFt(t){var e=t.chart,n=t.options,r=n.axes,i=n.meta,a=n.tooltip,o=n.coordinate,u=n.theme,s=n.legend,l=n.interactions,c=n.annotations,f={};return r&&(0,_ut.S6)(r,(function(t,e){f[e]=vCt(t,hCt)})),f=MCt({},i,f),e.scale(f),e.coordinate(o),r?(0,_ut.S6)(r,(function(t,n){e.axis(n,t)})):e.axis(!1),a?(e.interaction("tooltip"),e.tooltip(a)):!1===a&&e.removeInteraction("tooltip"),e.legend(s),u&&e.theme(u),(0,_ut.S6)(l,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg)})),(0,_ut.S6)(c,(function(t){e.annotation()[t.type]((0,Aut.pi)({},t))})),t}function rFt(t){return ACt(fEt,eFt,nFt)(t)}var iFt={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="area",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return iFt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return rFt}}(LEt);function aFt(t){var e=t.chart,n=t.options,r=n.data,i=n.type,a=n.xField,o=n.yField,u=n.colorField,s=n.sizeField,l=n.sizeRatio,c=n.shape,f=n.color,h=n.tooltip,d=n.heatmapStyle,p=n.meta;e.data(r);var g="polygon";"density"===i&&(g="heatmap");var v=kEt(h,[a,o,u]),m=v.fields,y=v.formatter,x=1;return(l||0===l)&&(c||s?l<0||l>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):x=l:console.warn("sizeRatio is not in effect: Must define shape or sizeField first")),MEt(MCt({},t,{options:{type:g,colorField:u,tooltipFields:m,shapeField:s||"",label:void 0,mapping:{tooltip:y,shape:c&&(s?function(t){var e=r.map((function(t){return t[s]})),n=(null==p?void 0:p[s])||{},i=n.min,a=n.max;return i=(0,_ut.hj)(i)?i:Math.min.apply(Math,e),a=(0,_ut.hj)(a)?a:Math.max.apply(Math,e),[c,((0,_ut.U2)(t,s)-i)/(a-i),x]}:function(){return[c,1,x]}),color:f||u&&e.getTheme().sequenceColors.join("-"),style:d}}})),t}function oFt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ACt(gEt(((e={})[a]=r,e[o]=i,e)))(t)}function uFt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?e.axis(a,!1):e.axis(a,r),!1===i?e.axis(o,!1):e.axis(o,i),t}function sFt(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.sizeField,o=n.sizeLegend,u=!1!==r;return i&&e.legend(i,!!u&&r),a&&e.legend(a,void 0===o?r:o),u||o||e.legend(!1),t}function lFt(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,a=_Ct(e,"density"===n.type?"heatmap":"polygon");if(r){if(i){var o=r.callback,u=(0,Aut._T)(r,["callback"]);a.label({fields:[i],callback:o,cfg:FCt(u)})}}else a.label(!1);return t}function cFt(t){var e,n,r=t.chart,i=t.options,a=i.coordinate,o=i.reflect,u=MCt({actions:[]},null!=a?a:{type:"rect"});return o&&(null===(n=null===(e=u.actions)||void 0===e?void 0:e.push)||void 0===n||n.call(e,["reflect",o])),r.coordinate(u),t}function fFt(t){return ACt(fEt,oEt("heatmapStyle"),oFt,cFt,aFt,uFt,sFt,sEt,lFt,vEt(),lEt,cEt,hEt)(t)}var hFt=MCt({},LEt.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});yvt("polygon","circle",{draw:function(t,e){var n,r,i=t.x,a=t.y,o=this.parsePoints(t.points),u=Math.abs(o[2].x-o[1].x),s=Math.abs(o[1].y-o[0].y),l=Math.min(u,s)/2,c=Number(t.shape[1]),f=Number(t.shape[2]),h=l*Math.sqrt(f)*Math.sqrt(c),d=(null===(n=t.style)||void 0===n?void 0:n.fill)||t.color||(null===(r=t.defaultStyle)||void 0===r?void 0:r.fill);return e.addShape("circle",{attrs:(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({x:i,y:a,r:h},t.defaultStyle),t.style),{fill:d})})}}),yvt("polygon","square",{draw:function(t,e){var n,r,i=t.x,a=t.y,o=this.parsePoints(t.points),u=Math.abs(o[2].x-o[1].x),s=Math.abs(o[1].y-o[0].y),l=Math.min(u,s),c=Number(t.shape[1]),f=Number(t.shape[2]),h=l*Math.sqrt(f)*Math.sqrt(c),d=(null===(n=t.style)||void 0===n?void 0:n.fill)||t.color||(null===(r=t.defaultStyle)||void 0===r?void 0:r.fill);return e.addShape("rect",{attrs:(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({x:i-h/2,y:a-h/2,width:h,height:h},t.defaultStyle),t.style),{fill:d})})}});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="heatmap",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return hFt},e.prototype.getSchemaAdaptor=function(){return fFt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(LEt);function dFt(t){return[{percent:t,type:"liquid"}]}function pFt(t){var e=t.chart,n=t.options,r=n.percent,i=n.liquidStyle,a=n.radius,o=n.outline,u=n.wave,s=n.shape,l=n.shapeStyle,c=n.animation;e.scale({percent:{min:0,max:1}}),e.data(dFt(r));var f=n.color||e.getTheme().defaultColor,h=_Et(MCt({},t,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:f,style:i,shape:"liquid-fill-gauge"}}})).ext.geometry,d={radius:a,outline:o,wave:u,shape:s,shapeStyle:l,background:e.getTheme().background,animation:c};return h.customInfo(d),e.legend(!1),e.axis(!1),e.tooltip(!1),t}function gFt(t,e){var n=t.chart,r=t.options,i=r.statistic,a=r.percent,o=r.meta;n.getController("annotation").clear(!0);var u=(0,_ut.U2)(o,["percent","formatter"])||function(t){return(100*t).toFixed(2)+"%"},s=i.content;return s&&(s=MCt({},s,{content:(0,_ut.UM)(s.content)?u(a):s.content})),zCt(n,{statistic:(0,Aut.pi)((0,Aut.pi)({},i),{content:s}),plotType:"liquid"},{percent:a}),e&&n.render(!0),t}function vFt(t){return ACt(fEt,oEt("liquidStyle"),pFt,gFt,gEt({}),cEt,lEt)(t)}var mFt={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"};function yFt(t,e,n){return t+(e-t)*n}function xFt(t,e,n,r){return 0===e?[[t+.5*n/Math.PI/2,r/2],[t+.5*n/Math.PI,r],[t+n/4,r]]:1===e?[[t+.5*n/Math.PI/2*(Math.PI-2),r],[t+.5*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:2===e?[[t+.5*n/Math.PI/2,-r/2],[t+.5*n/Math.PI,-r],[t+n/4,-r]]:[[t+.5*n/Math.PI/2*(Math.PI-2),-r],[t+.5*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function bFt(t,e,n,r,i,a,o){for(var u=4*Math.ceil(2*t/n*4),s=[],l=r;l<2*-Math.PI;)l+=2*Math.PI;for(;l>0;)l-=2*Math.PI;var c=a-t+(l=l/Math.PI/2*n)-2*t;s.push(["M",c,e]);for(var f=0,h=0;h<u;++h){var d=xFt(h*n/4,h%4,n,i);s.push(["C",d[0][0]+c,-d[0][1]+e,d[1][0]+c,-d[1][1]+e,d[2][0]+c,-d[2][1]+e]),h===u-1&&(f=d[2][0])}return s.push(["L",f+c,o+t]),s.push(["L",c,o+t]),s.push(["Z"]),s}var wFt={pin:function(t,e,n,r){var i=2*n/3,a=Math.max(i,r),o=i/2,u=t,s=o+e-a/2,l=Math.asin(o/(.85*(a-o))),c=Math.sin(l)*o,f=Math.cos(l)*o,h=u-f,d=s+c,p=t,g=s+o/Math.sin(l);return"\n      M "+h+" "+d+"\n      A "+o+" "+o+" 0 1 1 "+(h+2*f)+" "+d+"\n      Q "+p+" "+g+" "+t+" "+(e+a/2)+"\n      Q "+p+" "+g+" "+h+" "+d+"\n      Z \n    "},circle:function(t,e,n,r){var i=n/2,a=r/2;return"\n      M "+t+" "+(e-a)+" \n      a "+i+" "+a+" 0 1 0 0 "+2*a+"\n      a "+i+" "+a+" 0 1 0 0 "+2*-a+"\n      Z\n    "},diamond:function(t,e,n,r){var i=r/2,a=n/2;return"\n      M "+t+" "+(e-i)+"\n      L "+(t+a)+" "+e+"\n      L "+t+" "+(e+i)+"\n      L "+(t-a)+" "+e+"\n      Z\n    "},triangle:function(t,e,n,r){var i=r/2,a=n/2;return"\n      M "+t+" "+(e-i)+"\n      L "+(t+a)+" "+(e+i)+"\n      L "+(t-a)+" "+(e+i)+"\n      Z\n    "},rect:function(t,e,n,r){var i=r/2,a=n/2*.618;return"\n      M "+(t-a)+" "+(e-i)+"\n      L "+(t+a)+" "+(e-i)+"\n      L "+(t+a)+" "+(e+i)+"\n      L "+(t-a)+" "+(e+i)+"\n      Z\n    "}};yvt("interval","liquid-fill-gauge",{draw:function(t,e){var n=t.customInfo,r=n,i=r.radius,a=r.shape,o=r.shapeStyle,u=r.background,s=r.animation,l=n.outline,c=n.wave,f=l.border,h=l.distance,d=c.count,p=c.length,g=(0,_ut.u4)(t.points,(function(t,e){return Math.min(t,e.x)}),1/0),v=this.parsePoint({x:.5,y:.5}),m=this.parsePoint({x:g,y:.5}),y=v.x-m.x,x=Math.min(y,m.y*i),b=function(t){var e=(0,Aut.pi)({opacity:1},t.style);return t.color&&!e.fill&&(e.fill=t.color),e}(t),w=function(t){var e=(0,_ut.CD)({},{fill:"#fff",fillOpacity:0,lineWidth:4},t.style);return t.color&&!e.stroke&&(e.stroke=t.color),(0,_ut.hj)(t.opacity)&&(e.opacity=e.strokeOpacity=t.opacity),e}((0,_ut.CD)({},t,l)),S=x-f/2,k=("function"==typeof a?a:wFt[a]||wFt.circle)(v.x,v.y,2*S,2*S);o&&e.addShape("path",{name:"shape",attrs:(0,Aut.pi)({path:k},o)});var C=e.addGroup({name:"waves"}),E=C.setClip({type:"path",attrs:{path:k}});return function(t,e,n,r,i,a,o,u,s,l){for(var c=i.fill,f=i.opacity,h=o.getBBox(),d=h.maxX-h.minX,p=h.maxY-h.minY,g=0;g<r;g++){var v=r<=1?1:g/(r-1),m=a.addShape("path",{name:"waterwave-path",attrs:{path:bFt(u,h.minY+p*n,s,0,d/32,t,e),fill:c,opacity:yFt(.2,.9,v)*f}});try{if(!1===l)return;var y=GOt([["t",s,0]]);m.stopAnimate(),m.animate({matrix:y},{duration:yFt(2500,5e3,v),repeat:!0})}catch(x){console.warn("off-screen group animate error!")}}}(v.x,v.y,1-t.points[1].y,d,b,C,E,2*x,p,s),e.addShape("path",{name:"distance",attrs:{path:k,fill:"transparent",lineWidth:f+2*h,stroke:"transparent"===u?"#fff":u}}),e.addShape("path",{name:"wrap",attrs:(0,_ut.CD)(w,{path:k,fill:"transparent",lineWidth:f})}),e}});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="liquid",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return mFt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.chart.emit(Dut.BEFORE_CHANGE_DATA,Ngt.fromData(this.chart,Dut.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(dFt(t)),gFt({chart:this.chart,options:this.options},!0),this.chart.emit(Dut.AFTER_CHANGE_DATA,Ngt.fromData(this.chart,Dut.AFTER_CHANGE_DATA,null))},e.prototype.getSchemaAdaptor=function(){return vFt}}(LEt);function SFt(t){var e=t.chart,n=t.options,r=n.data,i=n.lineStyle,a=n.color,o=n.point,u=n.area;e.data(r);var s=MCt({},t,{options:{line:{style:i,color:a},point:o?(0,Aut.pi)({color:a},o):o,area:u?(0,Aut.pi)({color:a},u):u,label:void 0}}),l=MCt({},s,{options:{tooltip:!1}}),c=(null==o?void 0:o.state)||n.state,f=MCt({},s,{options:{tooltip:!1,state:c}});return DEt(s),TEt(f),OEt(l),t}function kFt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ACt(gEt(((e={})[a]=r,e[o]=i,e)))(t)}function CFt(t){var e=t.chart,n=t.options,r=n.radius,i=n.startAngle,a=n.endAngle;return e.coordinate("polar",{radius:r,startAngle:i,endAngle:a}),t}function EFt(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis,a=n.yField,o=n.yAxis;return e.axis(r,i),e.axis(a,o),t}function MFt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=_Ct(e,"line");if(r){var o=r.callback,u=(0,Aut._T)(r,["callback"]);a.label({fields:[i],callback:o,cfg:FCt(u)})}else a.label(!1);return t}function OFt(t){return ACt(SFt,kFt,fEt,CFt,EFt,uEt,sEt,MFt,lEt,cEt,vEt())(t)}var AFt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),e.prototype.getTooltipItems=function(e){var n=this.getTooltipCfg(),r=n.shared,i=n.title,a=t.prototype.getTooltipItems.call(this,e);if(a.length>0){var o=this.view.geometries[0],u=o.dataArray,s=a[0].name,l=[];return u.forEach((function(t){t.forEach((function(t){var e=nmt.getTooltipItems(t,o)[0];if(!r&&e&&e.name===s){var n=(0,_ut.UM)(i)?s:i;l.push((0,Aut.pi)((0,Aut.pi)({},e),{name:e.title,title:n}))}else if(r&&e){n=(0,_ut.UM)(i)?e.name||s:i;l.push((0,Aut.pi)((0,Aut.pi)({},e),{name:e.title,title:n}))}}))})),l}return[]},e}(Kgt);Bgt("radar-tooltip",AFt);var _Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.init=function(){this.context.view.removeInteraction("tooltip")},e.prototype.show=function(){var t=this.context.event;this.getTooltipController().showTooltip({x:t.x,y:t.y})},e.prototype.hide=function(){this.getTooltipController().hideTooltip()},e.prototype.getTooltipController=function(){return this.context.view.getController("radar-tooltip")},e}(ppt);xpt("radar-tooltip",_Ft),ugt("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var DFt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radar",e}return(0,Aut.ZT)(e,t),e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return MCt({},t.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},e.prototype.getSchemaAdaptor=function(){return OFt},e}(LEt);function TFt(t,e,n){var r=n.map((function(t){return t[e]})).filter((function(t){return void 0!==t})),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(t)%360;return a?360*i/a:i}function FFt(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.color,a=n.tooltip,o=n.colorField,u=n.type,s=n.xField,l=n.yField,c=xCt(n.data,l);return e.data(c),_Et(MCt({},t,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:"line"===u?"line":"intervel"},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}})),"line"===u&&TEt({chart:e,options:{xField:s,yField:l,seriesField:o,point:{shape:"circle",color:i}}}),t}function IFt(t){var e,n=t.options,r=n.yField,i=n.xField,a=n.data,o=n.isStack,u=n.isGroup,s=n.colorField,l=n.maxAngle,c=o&&!u&&s?function(t,e,n){var r=[];return t.forEach((function(t){var i=r.find((function(n){return n[e]===t[e]}));i?i[n]+=t[n]||null:r.push((0,Aut.pi)({},t))})),r}(a,i,r):a,f=xCt(c,r);return ACt(gEt(((e={})[r]={min:0,max:TFt(l,r,f)},e)))(t)}function PFt(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),t}function jFt(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis;return e.axis(r,i),t}function BFt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=_Ct(e,"interval");if(r){var o=r.callback,u=(0,Aut._T)(r,["callback"]);a.label({fields:[i],callback:o,cfg:(0,Aut.pi)((0,Aut.pi)({},FCt(u)),{type:"polar"})})}else a.label(!1);return t}function LFt(t){return ACt(oEt("barStyle"),FFt,IFt,jFt,PFt,lEt,cEt,fEt,sEt,uEt,vEt(),BFt)(t)}var RFt=MCt({},LEt.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radial-bar",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return RFt},e.prototype.changeData=function(t){this.updateOption({data:t}),IFt({chart:this.chart,options:this.options}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return LFt}}(LEt);function ZFt(t){var e=t.chart,n=t.options,r=n.data,i=n.sectorStyle,a=n.color;return e.data(r),ACt(_Et)(MCt({},t,{options:{marginRatio:1,interval:{style:i,color:a}}})),t}function NFt(t){var e=t.chart,n=t.options,r=n.label,i=n.xField,a=_Ct(e,"interval");if(!1===r)a.label(!1);else if((0,_ut.Kn)(r)){var o=r.callback,u=r.fields,s=(0,Aut._T)(r,["callback","fields"]),l=s.offset,c=s.layout;(void 0===l||l>=0)&&(c=c?(0,_ut.kJ)(c)?c:[c]:[],s.layout=(0,_ut.hX)(c,(function(t){return"limit-in-shape"!==t.type})),s.layout.length||delete s.layout),a.label({fields:u||[i],callback:o,cfg:FCt(s)})}else gCt(fCt.WARN,null===r,"the label option must be an Object."),a.label({fields:[i]});return t}function zFt(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return!1===r?e.legend(!1):i&&e.legend(i,r),t}function UFt(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),t}function HFt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return ACt(gEt(((e={})[a]=r,e[o]=i,e)))(t)}function WFt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r?e.axis(a,r):e.axis(a,!1),i?e.axis(o,i):e.axis(o,!1),t}function VFt(t){ACt(oEt("sectorStyle"),ZFt,HFt,NFt,UFt,WFt,zFt,sEt,lEt,cEt,fEt,vEt(),hEt)(t)}var GFt=MCt({},LEt.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]}),XFt=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rose",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return GFt},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return VFt}}(LEt),"name"),YFt="nodes",qFt="edges";function $Ft(t,e,n){if(!(0,_ut.kJ)(t))return[];var r=[],i=function(t,e,n){var r=[];return t.forEach((function(t){var i=t[e],a=t[n];r.includes(i)||r.push(i),r.includes(a)||r.push(a)})),r}(t,e,n),a=function(t,e,n,r){var i={};return e.forEach((function(t){i[t]={},e.forEach((function(e){i[t][e]=0}))})),t.forEach((function(t){i[t[n]][t[r]]=1})),i}(t,i,e,n),o={};function u(t){o[t]=1,i.forEach((function(e){if(0!=a[t][e])if(1==o[e])r.push(t+"_"+e);else{if(-1==o[e])return;u(e)}})),o[t]=-1}return i.forEach((function(t){o[t]=0})),i.forEach((function(t){-1!=o[t]&&u(t)})),0!==r.length&&console.warn("sankey data contains circle, "+r.length+" records removed.",r),t.filter((function(t){return r.findIndex((function(r){return r===t[e]+"_"+t[n]}))<0}))}function JFt(t){return t.target.depth}function KFt(t,e){return t.sourceLinks.length?t.depth:e-1}function QFt(t){return function(){return t}}function tIt(t,e){for(var n=0,r=0;r<t.length;r++)n+=e(t[r]);return n}function eIt(t,e){for(var n=-1/0,r=0;r<t.length;r++)n=Math.max(e(t[r]),n);return n}function nIt(t,e){return iIt(t.source,e.source)||t.index-e.index}function rIt(t,e){return iIt(t.target,e.target)||t.index-e.index}function iIt(t,e){return t.y0-e.y0}function aIt(t){return t.value}function oIt(t){return t.index}function uIt(t){return t.nodes}function sIt(t){return t.links}function lIt(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function cIt(t){for(var e=0,n=t.nodes;e<n.length;e++){for(var r=n[e],i=r.y0,a=i,o=0,u=r.sourceLinks;o<u.length;o++){(c=u[o]).y0=i+c.width/2,i+=c.width}for(var s=0,l=r.targetLinks;s<l.length;s++){var c;(c=l[s]).y1=a+c.width/2,a+=c.width}}}function fIt(){var t,e,n,r,i=0,a=0,o=1,u=1,s=24,l=8,c=oIt,f=KFt,h=uIt,d=sIt,p=6;function g(g){var y={nodes:h(g),links:d(g)};return function(t){var e=t.nodes,n=t.links;e.forEach((function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]}));var i=new Map(e.map((function(t){return[c(t),t]})));if(n.forEach((function(t,e){t.index=e;var n=t.source,r=t.target;"object"!=typeof n&&(n=t.source=lIt(i,n)),"object"!=typeof r&&(r=t.target=lIt(i,r)),n.sourceLinks.push(t),r.targetLinks.push(t)})),null!=r)for(var a=0,o=e;a<o.length;a++){var u=o[a],s=u.sourceLinks,l=u.targetLinks;s.sort(r),l.sort(r)}}(y),function(t){for(var e=t.nodes,n=0,r=e;n<r.length;n++){var i=r[n];i.value=void 0===i.fixedValue?Math.max(tIt(i.sourceLinks,aIt),tIt(i.targetLinks,aIt)):i.fixedValue}}(y),function(t){var n=t.nodes,r=n.length,i=new Set(n),a=new Set,o=0;for(;i.size;){if(i.forEach((function(t){t.depth=o;for(var e=0,n=t.sourceLinks;e<n.length;e++){var r=n[e].target;a.add(r)}})),++o>r)throw new Error("circular link");i=a,a=new Set}if(e)for(var u=Math.max(eIt(n,(function(t){return t.depth}))+1,0),s=void 0,l=0;l<n.length;l++)(s=n[l]).depth=e.call(null,s,u)}(y),function(t){var e=t.nodes,n=e.length,r=new Set(e),i=new Set,a=0;for(;r.size;){if(r.forEach((function(t){t.height=a;for(var e=0,n=t.targetLinks;e<n.length;e++){var r=n[e].source;i.add(r)}})),++a>n)throw new Error("circular link");r=i,i=new Set}}(y),function(e){var r=function(t){for(var e=t.nodes,r=Math.max(eIt(e,(function(t){return t.depth}))+1,0),a=(o-i-s)/(r-1),u=new Array(r).fill(0).map((function(){return[]})),l=0,c=e;l<c.length;l++){var h=c[l],d=Math.max(0,Math.min(r-1,Math.floor(f.call(null,h,r))));h.layer=d,h.x0=i+d*a,h.x1=h.x0+s,u[d]?u[d].push(h):u[d]=[h]}if(n)for(var p=0,g=u;p<g.length;p++){g[p].sort(n)}return u}(e);t=Math.min(l,(u-a)/(eIt(r,(function(t){return t.length}))-1)),function(e){for(var n=function(t,e){for(var n=1/0,r=0;r<t.length;r++)n=Math.min(e(t[r]),n);return n}(e,(function(e){return(u-a-(e.length-1)*t)/tIt(e,aIt)})),r=0,i=e;r<i.length;r++){for(var o=i[r],s=a,l=0,c=o;l<c.length;l++){(g=c[l]).y0=s,g.y1=s+g.value*n,s=g.y1+t;for(var f=0,h=g.sourceLinks;f<h.length;f++){var d=h[f];d.width=d.value*n}}s=(u-s+t)/(o.length+1);for(var p=0;p<o.length;++p){var g;(g=o[p]).y0+=s*(p+1),g.y1+=s*(p+1)}S(o)}}(r);for(var c=0;c<p;++c){var h=Math.pow(.99,c),d=Math.max(1-h,(c+1)/p);m(r,h,d),v(r,h,d)}}(y),cIt(y),y}function v(t,e,r){for(var i=1,a=t.length;i<a;++i){for(var o=t[i],u=0,s=o;u<s.length;u++){for(var l=s[u],c=0,f=0,h=0,d=l.targetLinks;h<d.length;h++){var p=d[h],g=p.source,v=p.value*(l.layer-g.layer);c+=k(g,l)*v,f+=v}if(f>0){var m=(c/f-l.y0)*e;l.y0+=m,l.y1+=m,w(l)}}void 0===n&&o.sort(iIt),o.length&&y(o,r)}}function m(t,e,r){for(var i=t.length-2;i>=0;--i){for(var a=t[i],o=0,u=a;o<u.length;o++){for(var s=u[o],l=0,c=0,f=0,h=s.sourceLinks;f<h.length;f++){var d=h[f],p=d.target,g=d.value*(p.layer-s.layer);l+=C(s,p)*g,c+=g}if(c>0){var v=(l/c-s.y0)*e;s.y0+=v,s.y1+=v,w(s)}}void 0===n&&a.sort(iIt),a.length&&y(a,r)}}function y(e,n){var r=e.length>>1,i=e[r];b(e,i.y0-t,r-1,n),x(e,i.y1+t,r+1,n),b(e,u,e.length-1,n),x(e,a,0,n)}function x(e,n,r,i){for(;r<e.length;++r){var a=e[r],o=(n-a.y0)*i;o>1e-6&&(a.y0+=o,a.y1+=o),n=a.y1+t}}function b(e,n,r,i){for(;r>=0;--r){var a=e[r],o=(a.y1-n)*i;o>1e-6&&(a.y0-=o,a.y1-=o),n=a.y0-t}}function w(t){var e=t.sourceLinks,n=t.targetLinks;if(void 0===r){for(var i=0,a=n;i<a.length;i++){a[i].source.sourceLinks.sort(rIt)}for(var o=0,u=e;o<u.length;o++){u[o].target.targetLinks.sort(nIt)}}}function S(t){if(void 0===r)for(var e=0,n=t;e<n.length;e++){var i=n[e],a=i.sourceLinks,o=i.targetLinks;a.sort(rIt),o.sort(nIt)}}function k(e,n){for(var r=e.y0-(e.sourceLinks.length-1)*t/2,i=0,a=e.sourceLinks;i<a.length;i++){var o=a[i],u=o.target,s=o.width;if(u===n)break;r+=s+t}for(var l=0,c=n.targetLinks;l<c.length;l++){var f=c[l];u=f.source,s=f.width;if(u===e)break;r-=s}return r}function C(e,n){for(var r=n.y0-(n.targetLinks.length-1)*t/2,i=0,a=n.targetLinks;i<a.length;i++){var o=a[i],u=o.source,s=o.width;if(u===e)break;r+=s+t}for(var l=0,c=e.sourceLinks;l<c.length;l++){var f=c[l];u=f.target,s=f.width;if(u===n)break;r-=s}return r}return g.update=function(t){return cIt(t),t},g.nodeId=function(t){return arguments.length?(c="function"==typeof t?t:QFt(t),g):c},g.nodeAlign=function(t){return arguments.length?(f="function"==typeof t?t:QFt(t),g):f},g.nodeDepth=function(t){return arguments.length?(e=t,g):e},g.nodeSort=function(t){return arguments.length?(n=t,g):n},g.nodeWidth=function(t){return arguments.length?(s=+t,g):s},g.nodePadding=function(e){return arguments.length?(l=t=+e,g):l},g.nodes=function(t){return arguments.length?(h="function"==typeof t?t:QFt(t),g):h},g.links=function(t){return arguments.length?(d="function"==typeof t?t:QFt(t),g):d},g.linkSort=function(t){return arguments.length?(r=t,g):r},g.size=function(t){return arguments.length?(i=a=0,o=+t[0],u=+t[1],g):[o-i,u-a]},g.extent=function(t){return arguments.length?(i=+t[0][0],o=+t[1][0],a=+t[0][1],u=+t[1][1],g):[[i,a],[o,u]]},g.iterations=function(t){return arguments.length?(p=+t,g):p},g}var hIt={left:function(t){return t.depth},right:function(t,e){return e-1-t.height},center:function(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?(0,_ut.F)(t.sourceLinks,JFt)-1:0},justify:KFt},dIt={nodeId:function(t){return t.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function pIt(t,e){var n=function(t){return(0,_ut.f0)({},dIt,t)}(t),r=n.nodeId,i=n.nodeSort,a=n.nodeAlign,o=n.nodeWidth,u=n.nodePadding,s=n.nodeDepth,l=fIt().nodeSort(i).nodeWidth(o).nodePadding(u).nodeDepth(s).nodeAlign(function(t){return((0,_ut.HD)(t)?hIt[t]:(0,_ut.mf)(t)?t:null)||KFt}(a)).extent([[0,0],[1,1]]).nodeId(r),c=l(e),f=c.nodes.map((function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1;return t.x=[e,n,n,e],t.y=[r,r,i,i],t})).filter((function(t){return null!==t.name})),h=c.links.map((function(t){var e=t.source,n=t.target,r=e.x1,i=n.x0;t.x=[r,r,i,i];var a=t.width/2;return t.y=[t.y0+a,t.y0-a,t.y1+a,t.y1-a],t})).filter((function(t){var e=t.source,n=t.target;return null!==e.name&&null!==n.name}));return{nodes:f,links:h}}function gIt(t,e,n){return ICt(t)?t/n:e}function vIt(t,e,n){return ICt(t)?t/n:e}function mIt(t,e,n){var r,i=t.dataType,a=t.data,o=t.sourceField,u=t.targetField,s=t.weightField,l=t.nodeAlign,c=t.nodeSort,f=t.nodePadding,h=t.nodePaddingRatio,d=t.nodeWidth,p=t.nodeWidthRatio,g=t.nodeDepth,v=t.rawFields,m=void 0===v?[]:v;r=function(t){return"node-link"===t}(i)?a:yCt($Ft(a,o,u),o,u,s,m);var y=pIt({nodeAlign:l,nodePadding:vIt(f,h,n),nodeWidth:gIt(d,p,e),nodeSort:c,nodeDepth:g},r),x=y.nodes,b=y.links;return{nodes:x.map((function(t){return(0,Aut.pi)((0,Aut.pi)({},vCt(t,(0,Aut.pr)(["x","y","name"],m))),{isNode:!0})})),edges:b.map((function(t){return(0,Aut.pi)((0,Aut.pi)({source:t.source.name,target:t.target.name,name:t.source.name||t.target.name},vCt(t,(0,Aut.pr)(["x","y","value"],m))),{isNode:!1})}))}}function yIt(t){var e=t.options.rawFields,n=void 0===e?[]:e;return MCt({},{options:{tooltip:{fields:(0,_ut.jj)((0,Aut.pr)(["name","source","target","value","isNode"],n))},label:{fields:(0,_ut.jj)((0,Aut.pr)(["x","name"],n))}}},t)}function xIt(t){var e=t.chart,n=t.options,r=n.color,i=n.nodeStyle,a=n.edgeStyle,o=n.label,u=n.tooltip,s=n.nodeState,l=n.edgeState;e.legend(!1),e.tooltip(u),e.axis(!1),e.coordinate().reflect("y");var c=mIt(n,e.width,e.height),f=c.nodes,h=c.edges,d=e.createView({id:qFt});d.data(h),AEt({chart:d,options:{xField:"x",yField:"y",seriesField:XFt,edge:{color:r,style:a,shape:"arc"},tooltip:u,state:l}});var p=e.createView({id:YFt});return p.data(f),FEt({chart:p,options:{xField:"x",yField:"y",seriesField:XFt,polygon:{color:r,style:i},label:o,tooltip:u,state:s}}),e.interaction("element-active"),e.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),t}function bIt(t){var e=t.chart;return GCt(e,t.options.animation,(0,Aut.pr)(e.views[0].geometries,e.views[1].geometries)),t}function wIt(t){var e=t.chart,n="sankey-node-draggable";return t.options.nodeDraggable?e.interaction(n):e.removeInteraction(n),t}function SIt(t){var e=t.chart,n=t.options,r=n.interactions,i=void 0===r?[]:r,a=[].concat(i,n.nodeInteractions||[]),o=[].concat(i,n.edgeInteractions||[]),u=HCt(e,YFt),s=HCt(e,qFt);return a.forEach((function(t){!1===(null==t?void 0:t.enable)?u.removeInteraction(t.type):u.interaction(t.type,t.cfg||{})})),o.forEach((function(t){!1===(null==t?void 0:t.enable)?s.removeInteraction(t.type):s.interaction(t.type,t.cfg||{})})),t}function kIt(t){return ACt(yIt,xIt,SIt,wIt,bIt,fEt)(t)}var CIt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDragging=!1,e}return(0,Aut.ZT)(e,t),e.prototype.isNodeElement=function(){var t=(0,_ut.U2)(this.context,"event.target");if(t){var e=t.get("element");return e&&e.getModel().data.isNode}return!1},e.prototype.getNodeView=function(){return HCt(this.context.view,YFt)},e.prototype.getEdgeView=function(){return HCt(this.context.view,qFt)},e.prototype.getCurrentDatumIdx=function(t){return this.getNodeView().geometries[0].elements.indexOf(t)},e.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:(0,_ut.U2)(this.context,"event.x"),y:(0,_ut.U2)(this.context,"event.y")};var t=this.context.event.target.get("element"),e=this.getCurrentDatumIdx(t);if(-1===e)return;this.currentElementIdx=e,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},e.prototype.translate=function(){if(this.isDragging){var t=this.context.view,e={x:(0,_ut.U2)(this.context,"event.x"),y:(0,_ut.U2)(this.context,"event.y")},n=e.x-this.prevPoint.x,r=e.y-this.prevPoint.y,i=this.getNodeView(),a=i.geometries[0].elements[this.currentElementIdx];if(a&&a.getModel()){var o=a.getModel().data,u=i.getOptions().data,s=i.getCoordinate(),l={x:n/s.getWidth(),y:r/s.getHeight()},c=(0,Aut.pi)((0,Aut.pi)({},o),{x:o.x.map((function(t){return t+l.x})),y:o.y.map((function(t){return t+l.y}))}),f=(0,Aut.pr)(u);f[this.currentElementIdx]=c,i.data(f);var h=o.name,d=this.getEdgeView(),p=d.getOptions().data;p.forEach((function(t){t.source===h&&(t.x[0]+=l.x,t.x[1]+=l.x,t.y[0]+=l.y,t.y[1]+=l.y),t.target===h&&(t.x[2]+=l.x,t.x[3]+=l.x,t.y[2]+=l.y,t.y[3]+=l.y)})),d.data(p),this.prevPoint=e,t.render(!0)}}},e.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},e}(ppt);xpt("sankey-node-drag",CIt),ugt("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(t){return t.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="sankey",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(t){return t.name},callback:function(t){var e=1===t[1];return{style:{fill:"#545454",textAlign:e?"end":"start"},offsetX:e?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(t){return!(0,_ut.U2)(t,[0,"data","isNode"])},formatter:function(t){return{name:t.source+" -> "+t.target,value:t.value}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},e.prototype.changeData=function(t){this.updateOption({data:t});var e=mIt(this.options,this.chart.width,this.chart.height),n=e.nodes,r=e.edges,i=HCt(this.chart,YFt),a=HCt(this.chart,qFt);i.changeData(n),a.changeData(r)},e.prototype.getSchemaAdaptor=function(){return kIt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(LEt);var EIt="ancestor-node",MIt="value",OIt="path",AIt=[OIt,oTt,sTt,uTt,"name","depth","height"],_It=MCt({},LEt.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}});function DIt(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function TIt(t,e,n,r,i){for(var a,o=t.children,u=-1,s=o.length,l=t.value&&(r-e)/t.value;++u<s;)(a=o[u]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*l}function FIt(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&TIt(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,u=r.y1-n;o<i&&(i=o=(i+o)/2),u<a&&(a=u=(a+u)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=u}}(e,a)),r&&i.eachBefore(DIt),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}var IIt={field:"value",size:[1,1],round:!1,padding:0,sort:function(t,e){return e.value-t.value},as:["x","y"],ignoreParentValue:!0};function PIt(t,e){var n,r=(e=(0,_ut.f0)({},IIt,e)).as;if(!(0,_ut.kJ)(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=cTt(e)}catch(u){console.warn(u)}var i=function(t){return FIt().size(e.size).round(e.round).padding(e.padding)(tTt(t).sum((function(t){return(0,_ut.dp)(t.children)?e.ignoreParentValue?0:t[n]-(0,_ut.u4)(t.children,(function(t,e){return t+e[n]}),0):t[n]})).sort(e.sort))}(t),a=r[0],o=r[1];return i.each((function(t){var e,n;t[a]=[t.x0,t.x1,t.x1,t.x0],t[o]=[t.y1,t.y1,t.y0,t.y0],t.name=t.name||(null===(e=t.data)||void 0===e?void 0:e.name)||(null===(n=t.data)||void 0===n?void 0:n.label),t.data.name=t.name,["x0","x1","y0","y1"].forEach((function(e){-1===r.indexOf(e)&&delete t[e]}))})),fTt(i)}function jIt(t,e){return t.parent===e.parent?1:2}function BIt(t,e){return t+e.x}function LIt(t,e){return Math.max(t,e.y)}function RIt(){var t=jIt,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(BIt,0)/t.length}(n),e.y=function(t){return 1+t.reduce(LIt,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var u=function(t){for(var e;e=t.children;)t=e[0];return t}(i),s=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),l=u.x-t(u,s)/2,c=s.x+t(s,u)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-l)/(c-l)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}var ZIt={depth:-1},NIt={};function zIt(t){return t.id}function UIt(t){return t.parentId}function HIt(){var t=zIt,e=UIt;function n(n){var r,i,a,o,u,s,l,c=Array.from(n),f=c.length,h=new Map;for(i=0;i<f;++i)r=c[i],u=c[i]=new aTt(r),null!=(s=t(r,i,n))&&(s+="")&&(l=u.id=s,h.set(l,h.has(l)?NIt:u)),null!=(s=e(r,i,n))&&(s+="")&&(u.parent=s);for(i=0;i<f;++i)if(s=(u=c[i]).parent){if(!(o=h.get(s)))throw new Error("missing: "+s);if(o===NIt)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error("multiple roots");a=u}if(!a)throw new Error("no root");if(a.parent=ZIt,a.eachBefore((function(t){t.depth=t.parent.depth+1,--f})).eachBefore(iTt),a.parent=null,f>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=ZDt(e),n):t},n.parentId=function(t){return arguments.length?(e=ZDt(t),n):e},n}function WIt(t,e){return t.parent===e.parent?1:2}function VIt(t){var e=t.children;return e?e[0]:t.t}function GIt(t){var e=t.children;return e?e[e.length-1]:t.t}function XIt(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function YIt(t,e,n){return t.a.parent===e.parent?t.a:n}function qIt(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function $It(){var t=WIt,e=1,n=1,r=null;function i(i){var s=function(t){for(var e,n,r,i,a,o=new qIt(t,0),u=[o];e=u.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)u.push(n=e.children[i]=new qIt(r[i],i)),n.parent=e;return(o.parent=new qIt(null,0)).children=[o],o}(i);if(s.eachAfter(a),s.parent.m=-s.z,s.eachBefore(o),r)i.eachBefore(u);else{var l=i,c=i,f=i;i.eachBefore((function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)}));var h=l===c?1:t(l,c)/2,d=h-l.x,p=e/(c.x+h+d),g=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*g}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,u=n,s=a.parent.children[0],l=a.m,c=o.m,f=u.m,h=s.m;u=GIt(u),a=VIt(a),u&&a;)s=VIt(s),(o=GIt(o)).a=e,(i=u.z+f-a.z-l+t(u._,a._))>0&&(XIt(YIt(u,e,r),e,i),l+=i,c+=i),f+=u.m,l+=a.m,h+=s.m,c+=o.m;u&&!GIt(o)&&(o.t=u,o.m+=f-c),a&&!VIt(s)&&(s.t=a,s.m+=l-h,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function JIt(t,e,n,r,i){for(var a,o=t.children,u=-1,s=o.length,l=t.value&&(i-n)/t.value;++u<s;)(a=o[u]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*l}qIt.prototype=Object.create(aTt.prototype);var KIt=(1+Math.sqrt(5))/2;function QIt(t,e,n,r,i,a){for(var o,u,s,l,c,f,h,d,p,g,v,m=[],y=e.children,x=0,b=0,w=y.length,S=e.value;x<w;){s=i-n,l=a-r;do{c=y[b++].value}while(!c&&b<w);for(f=h=c,v=c*c*(g=Math.max(l/s,s/l)/(S*t)),p=Math.max(h/v,v/f);b<w;++b){if(c+=u=y[b].value,u<f&&(f=u),u>h&&(h=u),v=c*c*g,(d=Math.max(h/v,v/f))>p){c-=u;break}p=d}m.push(o={value:c,dice:s<l,children:y.slice(x,b)}),o.dice?TIt(o,n,r,i,S?r+=l*c/S:a):JIt(o,n,r,S?n+=s*c/S:i,a),S-=c,x=b}return m}var tPt=function t(e){function n(t,n,r,i,a){QIt(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(KIt);function ePt(){var t=tPt,e=!1,n=1,r=1,i=[0],a=NDt,o=NDt,u=NDt,s=NDt,l=NDt;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(DIt),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<c&&(c=h=(c+h)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=a(e)/2,r+=l(e)-n,c+=o(e)-n,(f-=u(e)-n)<r&&(r=f=(r+f)/2),(h-=s(e)-n)<c&&(c=h=(c+h)/2),t(e,r,c,f,h))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=ZDt(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:zDt(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:zDt(+t),c):o},c.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:zDt(+t),c):u},c.paddingBottom=function(t){return arguments.length?(s="function"==typeof t?t:zDt(+t),c):s},c.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:zDt(+t),c):l},c}function nPt(t,e,n,r,i){var a,o,u=t.children,s=u.length,l=new Array(s+1);for(l[0]=o=a=0;a<s;++a)l[a+1]=o+=u[a].value;!function t(e,n,r,i,a,o,s){if(e>=n-1){var c=u[e];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=s)}var f=l[e],h=r/2+f,d=e+1,p=n-1;for(;d<p;){var g=d+p>>>1;l[g]<h?d=g+1:p=g}h-l[d-1]<l[d]-h&&e+1<d&&--d;var v=l[d]-f,m=r-v;if(o-i>s-a){var y=r?(i*m+o*v)/r:o;t(e,d,v,i,a,y,s),t(d,n,m,y,a,o,s)}else{var x=r?(a*m+s*v)/r:s;t(e,d,v,i,a,o,x),t(d,n,m,i,x,o,s)}}(0,s,t.value,e,n,r,i)}function rPt(t,e,n,r,i){(1&t.depth?JIt:TIt)(t,e,n,r,i)}var iPt=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,u,s,l,c,f=-1,h=o.length,d=t.value;++f<h;){for(s=(u=o[f]).children,l=u.value=0,c=s.length;l<c;++l)u.value+=s[l].value;u.dice?TIt(u,n,r,i,d?r+=(a-r)*u.value/d:a):JIt(u,n,r,d?n+=(i-n)*u.value/d:i,a),d-=u.value}else t._squarify=o=QIt(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(KIt),aPt={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(t,e){return e.value-t.value},ratio:.5*(1+Math.sqrt(5))};function oPt(t,e){var n,r=(e=(0,_ut.f0)({},aPt,e)).as;if(!(0,_ut.kJ)(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=cTt(e)}catch(c){console.warn(c)}var i,a,o=(i=e.tile,a=e.ratio,"treemapSquarify"===i?F[i].ratio(a):F[i]),u=function(t){return ePt().tile(o).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(tTt(t).sum((function(t){return e.ignoreParentValue&&t.children?0:t[n]})).sort(e.sort))}(t),s=r[0],l=r[1];return u.each((function(t){t[s]=[t.x0,t.x1,t.x1,t.x0],t[l]=[t.y1,t.y1,t.y0,t.y0],["x0","x1","y0","y1"].forEach((function(e){-1===r.indexOf(e)&&delete t[e]}))})),fTt(u)}function uPt(t){var e=t.data,n=t.colorField,r=t.rawFields,i=t.hierarchyConfig,a=void 0===i?{}:i,o=a.activeDepth,u={partition:PIt,treemap:oPt},s=t.seriesField,l=t.type||"partition",c=u[l](e,(0,Aut.pi)((0,Aut.pi)({field:s||"value"},(0,_ut.CE)(a,["activeDepth"])),{type:"hierarchy."+l,as:["x","y"]})),f=[];return c.forEach((function(t){var e,i,u,l,c,h;if(0===t.depth)return null;if(o>0&&t.depth>o)return null;for(var d=t.data.name,p=(0,Aut.pi)({},t);p.depth>1;)d=(null===(i=p.parent.data)||void 0===i?void 0:i.name)+" / "+d,p=p.parent;var g=(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},vCt(t.data,(0,Aut.pr)(r||[],[a.field]))),((e={})[OIt]=d,e[EIt]=p.data.name,e)),t);s&&(g[s]=t.data[s]||(null===(l=null===(u=t.parent)||void 0===u?void 0:u.data)||void 0===l?void 0:l[s])),n&&(g[n]=t.data[n]||(null===(h=null===(c=t.parent)||void 0===c?void 0:c.data)||void 0===h?void 0:h[n])),g.ext=a,g[SDt]={hierarchyConfig:a,colorField:n,rawFields:r},f.push(g)})),f}function sPt(t){var e,n=t.chart,r=t.options,i=r.color,a=r.colorField,o=void 0===a?EIt:a,u=r.sunburstStyle,s=r.rawFields,l=void 0===s?[]:s,c=uPt(r);return n.data(c),u&&(e=function(t){return MCt({},{fillOpacity:Math.pow(.85,t.depth)},(0,_ut.mf)(u)?u(t):u)}),FEt(MCt({},t,{options:{xField:"x",yField:"y",seriesField:o,rawFields:(0,_ut.jj)((0,Aut.pr)(AIt,l)),polygon:{color:i,style:e}}})),t}function lPt(t){return t.chart.axis(!1),t}function cPt(t){var e=t.chart,n=t.options.label,r=_Ct(e,"polygon");if(n){var i=n.fields,a=void 0===i?["name"]:i,o=n.callback,u=(0,Aut._T)(n,["fields","callback"]);r.label({fields:a,callback:o,cfg:FCt(u)})}else r.label(!1);return t}function fPt(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius,a=n.reflect,o=e.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),t}function hPt(t){var e,n=t.options,r=n.hierarchyConfig,i=n.meta;return ACt(gEt({},((e={})[MIt]=(0,_ut.U2)(i,(0,_ut.U2)(r,["field"],"value")),e)))(t)}function dPt(t){var e=t.chart,n=t.options.tooltip;if(!1===n)e.tooltip(!1);else{var r=n;(0,_ut.U2)(n,"fields")||(r=MCt({},{customItems:function(t){return t.map((function(t){var n=(0,_ut.U2)(e.getOptions(),"scales"),r=(0,_ut.U2)(n,[OIt,"formatter"],(function(t){return t})),i=(0,_ut.U2)(n,[MIt,"formatter"],(function(t){return t}));return(0,Aut.pi)((0,Aut.pi)({},t),{name:r(t.data[OIt]),value:i(t.data.value)})}))}},r)),e.tooltip(r)}return t}function pPt(t){var e=t.drilldown,n=t.interactions,r=void 0===n?[]:n;return(null==e?void 0:e.enabled)?MCt({},t,{interactions:(0,Aut.pr)(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:uPt}}])}):t}function gPt(t){var e=t.chart,n=t.options,r=n.drilldown;return lEt({chart:e,options:pPt(n)}),(null==r?void 0:r.enabled)&&(e.appendPadding=jCt(e.appendPadding,(0,_ut.U2)(r,["breadCrumb","position"]))),t}function vPt(t){return ACt(fEt,oEt("sunburstStyle"),sPt,lPt,hPt,uEt,fPt,dPt,cPt,gPt,cEt,vEt())(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="sunburst",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return _It},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return vPt},e.SUNBURST_ANCESTOR_FIELD=EIt,e.SUNBURST_PATH_FIELD=OIt,e.NODE_ANCESTORS_FIELD=sTt}(LEt);function mPt(t,e){if((0,_ut.kJ)(t))return t.find((function(t){return t.type===e}))}function yPt(t,e){var n=mPt(t,e);return n&&!1!==n.enable}function xPt(t){var e=t.interactions,n=t.drilldown;return(0,_ut.U2)(n,"enabled")||yPt(e,"treemap-drill-down")}function bPt(t){var e=t.data,n=t.colorField,r=t.enableDrillDown,i=t.hierarchyConfig,a=oPt(e,(0,Aut.pi)((0,Aut.pi)({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach((function(t){if(0===t.depth)return null;if(r&&1!==t.depth)return null;if(!r&&t.children)return null;var a=t.ancestors().map((function(t){return{data:t.data,height:t.height,value:t.value}})),u=r&&(0,_ut.kJ)(e.path)?a.concat(e.path.slice(1)):a,s=Object.assign({},t.data,(0,Aut.pi)({x:t.x,y:t.y,depth:t.depth,value:t.value,path:u},t));if(!t.data[n]&&t.parent){var l=t.ancestors().find((function(t){return t.data[n]}));s[n]=null==l?void 0:l.data[n]}else s[n]=t.data[n];s[SDt]={hierarchyConfig:i,colorField:n,enableDrillDown:r},o.push(s)})),o}function wPt(t){var e=t.options.colorField;return MCt({options:{rawFields:["value"],tooltip:{fields:["name","value",e,"path"],formatter:function(t){return{name:t.name,value:t.value}}}}},t)}function SPt(t){var e=t.chart,n=t.options,r=n.color,i=n.colorField,a=n.rectStyle,o=n.hierarchyConfig,u=n.rawFields,s=bPt({data:n.data,colorField:n.colorField,enableDrillDown:xPt(n),hierarchyConfig:o});return e.data(s),FEt(MCt({},t,{options:{xField:"x",yField:"y",seriesField:i,rawFields:u,polygon:{color:r,style:a}}})),e.coordinate().reflect("y"),t}function kPt(t){return t.chart.axis(!1),t}function CPt(t){var e=t.drilldown,n=t.interactions,r=void 0===n?[]:n;return xPt(t)?MCt({},t,{interactions:(0,Aut.pr)(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:bPt}}])}):t}function EPt(t){var e=t.chart,n=t.options,r=n.interactions,i=n.drilldown;lEt({chart:e,options:CPt(n)});var a=mPt(r,"view-zoom");return a&&(!1!==a.enable?e.getCanvas().on("mousewheel",(function(t){t.preventDefault()})):e.getCanvas().off("mousewheel")),xPt(n)&&(e.appendPadding=jCt(e.appendPadding,(0,_ut.U2)(i,["breadCrumb","position"]))),t}function MPt(t){return ACt(wPt,fEt,oEt("rectStyle"),SPt,kPt,uEt,sEt,EPt,cEt,vEt())(t)}var OPt={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}},APt=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="treemap",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return OPt},e.prototype.changeData=function(t){var e=this.options,n=e.colorField,r=e.interactions,i=e.hierarchyConfig;this.updateOption({data:t});var a=bPt({data:t,colorField:n,enableDrillDown:yPt(r,"treemap-drill-down"),hierarchyConfig:i});this.chart.changeData(a),function(t){var e=t.interactions["drill-down"];if(e){var n=e.context.actions.find((function(t){return"drill-down-action"===t.name}));n.reset()}}(this.chart)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return MPt}}(LEt),"id"),_Pt="path",DPt={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(t){return{name:t.id,value:t.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function TPt(t){t&&t.geometries[0].elements.forEach((function(t){t.shape.toFront()}))}var FPt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.syncElementsPos=function(){TPt(this.context.view)},e.prototype.active=function(){t.prototype.active.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(ypt("element-active")),IPt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.syncElementsPos=function(){TPt(this.context.view)},e.prototype.highlight=function(){t.prototype.highlight.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.clear=function(){t.prototype.clear.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(ypt("element-highlight")),PPt=ypt("element-selected"),jPt=ypt("element-single-selected"),BPt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.syncElementsPos=function(){TPt(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(PPt),LPt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.syncElementsPos=function(){TPt(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(jPt);xpt("venn-element-active",FPt),xpt("venn-element-highlight",IPt),xpt("venn-element-selected",BPt),xpt("venn-element-single-selected",LPt),ugt("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),ugt("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),ugt("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),ugt("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),ugt("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),ugt("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var RPt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Aut.ZT)(e,t),e.prototype.getLabelPoint=function(t,e,n){var r=t.data,i=r.x,a=r.y,o=t.customLabelInfo,u=o.offsetX,s=o.offsetY;return{content:t.content[n],x:i+u,y:a+s}},e}(Bvt);hvt("venn",RPt),yvt("schema","venn",{draw:function(t,e){var n=t.data,r=(0,fdt.tr)(n[_Pt]),i=function(t){return MCt({},t.defaultStyle,{fill:t.color},t.style)}(t),a=e.addGroup({name:"venn-shape"});a.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},i),{path:r}),name:"venn-path"});var o=t.customInfo,u=o.offsetX,s=o.offsetY,l=nmt.transform(null,[["t",u,s]]);return a.setMatrix(l),a},getMarker:function(t){var e=t.color;return{symbol:"circle",style:{lineWidth:0,stroke:e,fill:e,r:4}}}});var ZPt={normal:function(t){return t},multiply:function(t,e){return t*e/255},screen:function(t,e){return 255*(1-(1-t/255)*(1-e/255))},overlay:function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},darken:function(t,e){return t>e?e:t},lighten:function(t,e){return t>e?t:e},dodge:function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t},burn:function(t,e){return 255===e?255:0===t?0:255*(1-Math.min(1,(1-e/255)/(t/255)))}};function NPt(t,e,n){void 0===n&&(n="normal");var r,i=(r=function(t){if(!ZPt[t])throw new Error("unknown blend mode "+t);return ZPt[t]}(n),function(t,e){var n=[];return n[0]=r(t[0],e[0]),n[1]=r(t[1],e[1]),n[2]=r(t[2],e[2]),n})(zPt(t),zPt(e)),a=zPt(t),o=a[0],u=a[1],s=a[2],l=a[3],c=zPt(e),f=c[0],h=c[1],d=c[2],p=c[3],g=Number((l+p*(1-l)).toFixed(2));return"rgba("+Math.round((l*(1-p)*(o/255)+l*p*(i[0]/255)+(1-l)*p*(f/255))/g*255)+", "+Math.round((l*(1-p)*(u/255)+l*p*(i[1]/255)+(1-l)*p*(h/255))/g*255)+", "+Math.round((l*(1-p)*(s/255)+l*p*(i[2]/255)+(1-l)*p*(d/255))/g*255)+", "+g+")"}function zPt(t){var e,n=t.replace("/s+/g","");return"string"!=typeof n||n.startsWith("rgba")||n.startsWith("#")?(n.startsWith("rgba")&&(e=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(e=Tst.rgb2arr(n).concat([1])),e.map((function(t,e){return 3===e?Number(t):0|t}))):Tst.rgb2arr(Tst.toRGB(n)).concat([1])}var UPt=n(13125),HPt=1e-10;function WPt(t,e){var n,r=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)for(var i=YPt(t[n],t[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],e.push(o)}return e}(t),i=r.filter((function(e){return function(t,e){for(var n=0;n<e.length;++n)if(GPt(t,e[n])>e[n].radius+HPt)return!1;return!0}(e,t)})),a=0,o=0,u=[];if(i.length>1){var s=qPt(i);for(n=0;n<i.length;++n){var l=i[n];l.angle=Math.atan2(l.x-s.x,l.y-s.y)}i.sort((function(t,e){return e.angle-t.angle}));var c=i[i.length-1];for(n=0;n<i.length;++n){var f=i[n];o+=(c.x+f.x)*(f.y-c.y);for(var h={x:(f.x+c.x)/2,y:(f.y+c.y)/2},d=null,p=0;p<f.parentIndex.length;++p)if(c.parentIndex.indexOf(f.parentIndex[p])>-1){var g=t[f.parentIndex[p]],v=Math.atan2(f.x-g.x,f.y-g.y),m=Math.atan2(c.x-g.x,c.y-g.y),y=m-v;y<0&&(y+=2*Math.PI);var x=m-y/2,b=GPt(h,{x:g.x+g.radius*Math.sin(x),y:g.y+g.radius*Math.cos(x)});b>2*g.radius&&(b=2*g.radius),(null===d||d.width>b)&&(d={circle:g,width:b,p1:f,p2:c})}null!==d&&(u.push(d),a+=VPt(d.circle.radius,d.width),c=f)}}else{var w=t[0];for(n=1;n<t.length;++n)t[n].radius<w.radius&&(w=t[n]);var S=!1;for(n=0;n<t.length;++n)if(GPt(t[n],w)>Math.abs(w.radius-t[n].radius)){S=!0;break}S?a=o=0:(a=w.radius*w.radius*Math.PI,u.push({circle:w,p1:{x:w.x,y:w.y+w.radius},p2:{x:w.x-HPt,y:w.y+w.radius},width:2*w.radius}))}return o/=2,e&&(e.area=a+o,e.arcArea=a,e.polygonArea=o,e.arcs=u,e.innerPoints=i,e.intersectionPoints=r),a+o}function VPt(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function GPt(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function XPt(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var r=e-(n*n-t*t+e*e)/(2*n);return VPt(t,t-(n*n-e*e+t*t)/(2*n))+VPt(e,r)}function YPt(t,e){var n=GPt(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),u=t.x+a*(e.x-t.x)/n,s=t.y+a*(e.y-t.y)/n,l=-(e.y-t.y)*(o/n),c=-(e.x-t.x)*(o/n);return[{x:u+l,y:s-c},{x:u-l,y:s+c}]}function qPt(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function $Pt(t,e,n){var r,i,a=e[0].radius-GPt(e[0],t);for(r=1;r<e.length;++r)(i=e[r].radius-GPt(e[r],t))<=a&&(a=i);for(r=0;r<n.length;++r)(i=GPt(n[r],t)-n[r].radius)<=a&&(a=i);return a}function JPt(t,e){var n,r=[];for(n=0;n<t.length;++n){var i=t[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var a=r[0],o=$Pt(r[0],t,e);for(n=1;n<r.length;++n){var u=$Pt(r[n],t,e);u>=o&&(a=r[n],o=u)}var s=(0,UPt.nelderMead)((function(n){return-1*$Pt({x:n[0],y:n[1]},t,e)}),[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,l={x:s[0],y:s[1]},c=!0;for(n=0;n<t.length;++n)if(GPt(l,t[n])>t[n].radius){c=!1;break}for(n=0;n<e.length;++n)if(GPt(l,e[n])<e[n].radius){c=!1;break}if(!c)if(1==t.length)l={x:t[0].x,y:t[0].y};else{var f={};WPt(t,f),l=0===f.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==f.arcs.length?{x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:e.length?JPt(t,[]):qPt(f.arcs.map((function(t){return t.p1})))}return l}function KPt(t,e){for(var n={},r=function(t){var e={},n=[];for(var r in t)n.push(r),e[r]=[];for(var i=0;i<n.length;i++)for(var a=t[n[i]],o=i+1;o<n.length;++o){var u=t[n[o]],s=GPt(a,u);s+u.radius<=a.radius+1e-10?e[n[o]].push(n[i]):s+a.radius<=u.radius+1e-10&&e[n[i]].push(n[o])}return e}(t),i=0;i<e.length;++i){for(var a=e[i].sets,o={},u={},s=0;s<a.length;++s){o[a[s]]=!0;for(var l=r[a[s]],c=0;c<l.length;++c)u[l[c]]=!0}var f=[],h=[];for(var d in t)d in o?f.push(t[d]):d in u||h.push(t[d]);var p=JPt(f,h);n[a]=p,p.disjoint&&e[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return n}var QPt=1e-10;function tjt(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+1e-10?Math.abs(t-e):(0,UPt.bisect)((function(r){return XPt(t,e,r)-n}),0,t+e)}function ejt(t,e){var n=function(t,e){for(var n,r=e&&e.lossFunction?e.lossFunction:njt,i={},a={},o=0;o<t.length;++o){var u=t[o];1==u.sets.length&&(n=u.sets[0],i[n]={x:1e10,y:1e10,rowid:Object.keys(i).length,size:u.size,radius:Math.sqrt(u.size/Math.PI)},a[n]=[])}t=t.filter((function(t){return 2==t.sets.length}));for(o=0;o<t.length;++o){var s=t[o],l=s.hasOwnProperty("weight")?s.weight:1,c=s.sets[0],f=s.sets[1];s.size+QPt>=Math.min(i[c].size,i[f].size)&&(l=0),a[c].push({set:f,size:s.size,weight:l}),a[f].push({set:c,size:s.size,weight:l})}var h=[];for(n in a)if(a.hasOwnProperty(n)){var d=0;for(o=0;o<a[n].length;++o)d+=a[n][o].size*a[n][o].weight;h.push({set:n,size:d})}function p(t,e){return e.size-t.size}h.sort(p);var g={};function v(t){return t.set in g}function m(t,e){i[e].x=t.x,i[e].y=t.y,g[e]=!0}m({x:0,y:0},h[0].set);for(o=1;o<h.length;++o){var y=h[o].set,x=a[y].filter(v);if(n=i[y],x.sort(p),0===x.length)throw"ERROR: missing pairwise overlap information";for(var b=[],w=0;w<x.length;++w){var S=i[x[w].set],k=tjt(n.radius,S.radius,x[w].size);b.push({x:S.x+k,y:S.y}),b.push({x:S.x-k,y:S.y}),b.push({y:S.y+k,x:S.x}),b.push({y:S.y-k,x:S.x});for(var C=w+1;C<x.length;++C)for(var E=i[x[C].set],M=tjt(n.radius,E.radius,x[C].size),O=YPt({x:S.x,y:S.y,radius:k},{x:E.x,y:E.y,radius:M}),A=0;A<O.length;++A)b.push(O[A])}var _=1e50,D=b[0];for(w=0;w<b.length;++w){i[y].x=b[w].x,i[y].y=b[w].y;var T=r(i,t);T<_&&(_=T,D=b[w])}m(D,y)}return i}(t,e),r=e.lossFunction||njt;if(t.length>=8){var i=function(t,e){e=e||{};var n,r=e.restarts||10,i=[],a={};for(n=0;n<t.length;++n){var o=t[n];1==o.sets.length&&(a[o.sets[0]]=i.length,i.push(o))}var u=function(t,e,n){var r=(0,UPt.zerosM)(e.length,e.length),i=(0,UPt.zerosM)(e.length,e.length);return t.filter((function(t){return 2==t.sets.length})).map((function(t){var a=n[t.sets[0]],o=n[t.sets[1]],u=tjt(Math.sqrt(e[a].size/Math.PI),Math.sqrt(e[o].size/Math.PI),t.size);r[a][o]=r[o][a]=u;var s=0;t.size+1e-10>=Math.min(e[a].size,e[o].size)?s=1:t.size<=1e-10&&(s=-1),i[a][o]=i[o][a]=s})),{distances:r,constraints:i}}(t,i,a),s=u.distances,l=u.constraints,c=(0,UPt.norm2)(s.map(UPt.norm2))/s.length;s=s.map((function(t){return t.map((function(t){return t/c}))}));var f,h,d=function(t,e){return function(t,e,n,r){var i,a=0;for(i=0;i<e.length;++i)e[i]=0;for(i=0;i<n.length;++i)for(var o=t[2*i],u=t[2*i+1],s=i+1;s<n.length;++s){var l=t[2*s],c=t[2*s+1],f=n[i][s],h=r[i][s],d=(l-o)*(l-o)+(c-u)*(c-u),p=Math.sqrt(d),g=d-f*f;h>0&&p<=f||h<0&&p>=f||(a+=2*g*g,e[2*i]+=4*g*(o-l),e[2*i+1]+=4*g*(u-c),e[2*s]+=4*g*(l-o),e[2*s+1]+=4*g*(c-u))}return a}(t,e,s,l)};for(n=0;n<r;++n){var p=(0,UPt.zeros)(2*s.length).map(Math.random);h=(0,UPt.conjugateGradient)(d,p,e),(!f||h.fx<f.fx)&&(f=h)}var g=f.x,v={};for(n=0;n<i.length;++n){var m=i[n];v[m.sets[0]]={x:g[2*n]*c,y:g[2*n+1]*c,radius:Math.sqrt(m.size/Math.PI)}}if(e.history)for(n=0;n<e.history.length;++n)(0,UPt.scale)(e.history[n].x,c);return v}(t,e);r(i,t)+1e-8<r(n,t)&&(n=i)}return n}function njt(t,e){var n=0;for(var r=0;r<e.length;++r){var i=e[r],a=void 0;if(1!=i.sets.length){if(2==i.sets.length){var o=t[i.sets[0]],u=t[i.sets[1]];a=XPt(o.radius,u.radius,GPt(o,u))}else a=WPt(i.sets.map((function(e){return t[e]})));n+=(i.hasOwnProperty("weight")?i.weight:1)*(a-i.size)*(a-i.size)}}return n}function rjt(t){var e=function(e){var n=Math.max.apply(null,t.map((function(t){return t[e]+t.radius}))),r=Math.min.apply(null,t.map((function(t){return t[e]-t.radius})));return{max:n,min:r}};return{xRange:e("x"),yRange:e("y")}}var ijt=(0,_ut.HP)((function(t,e,n,r){var i=new Map,a=t.length;return e.forEach((function(e,o){if(1===e[r].length)i.set(e[APt],t[(o+a)%a]);else{var u=e[r].map((function(t){return i.get(t)}));i.set(e[APt],u.slice(1).reduce((function(t,e){return NPt(t,e,n)}),u[0]))}})),i}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return JSON.stringify(t)}));function ajt(t,e,n,r){void 0===r&&(r=0);var i=t.data,a=t.setsField,o=t.sizeField;if(0===i.length)return gCt(fCt.WARN,!1,"warn: %s","数据不能为空"),[];var u=i.map((function(t){var e;return(0,Aut.pi)((0,Aut.pi)({},t),((e={sets:t[a]||[],size:t[o]})[_Pt]="",e[APt]="",e))}));u.sort((function(t,e){return t.sets.length-e.sets.length}));var s=function(t,e){(e=e||{}).maxIterations=e.maxIterations||500;var n=e.initialLayout||ejt,r=e.lossFunction||njt;t=function(t){t=t.slice();var e,n,r,i,a=[],o={};for(e=0;e<t.length;++e){var u=t[e];1==u.sets.length?a.push(u.sets[0]):2==u.sets.length&&(o[[r=u.sets[0],i=u.sets[1]]]=!0,o[[i,r]]=!0)}for(a.sort((function(t,e){return t>e?1:-1})),e=0;e<a.length;++e)for(r=a[e],n=e+1;n<a.length;++n)[r,i=a[n]]in o||t.push({sets:[r,i],size:0});return t}(t);var i,a=n(t,e),o=[],u=[];for(i in a)a.hasOwnProperty(i)&&(o.push(a[i].x),o.push(a[i].y),u.push(i));for(var s=(0,UPt.nelderMead)((function(e){for(var n={},i=0;i<u.length;++i){var o=u[i];n[o]={x:e[2*i],y:e[2*i+1],radius:a[o].radius}}return r(n,t)}),o,e),l=s.x,c=0;c<u.length;++c)i=u[c],a[i].x=l[2*c],a[i].y=l[2*c+1];return a}(u),l=function(t,e,n,r){var i=[],a=[];for(var o in t)t.hasOwnProperty(o)&&(a.push(o),i.push(t[o]));e-=2*r,n-=2*r;var u=rjt(i),s=u.xRange,l=u.yRange;if(s.max==s.min||l.max==l.min)return console.log("not scaling solution: zero size detected"),t;for(var c=e/(s.max-s.min),f=n/(l.max-l.min),h=Math.min(f,c),d=(e-(s.max-s.min)*h)/2,p=(n-(l.max-l.min)*h)/2,g={},v=0;v<i.length;++v){var m=i[v];g[a[v]]={radius:h*m.radius,x:r+d+(m.x-s.min)*h,y:r+p+(m.y-l.min)*h}}return g}(s,e,n,r),c=KPt(l,u);return u.forEach((function(t){var e=t.sets,n=e.join(",");t[APt]=n;var r=e.map((function(t){return l[t]})),i=function(t){var e={};WPt(t,e);var n=e.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return function(t,e,n){var r=[],i=t-n,a=e;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var o=n[a],u=o.circle.radius,s=o.width>u;i.push("\nA",u,u,0,s?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}(r);/[zZ]$/.test(i)||(i+=" Z"),t[_Pt]=i;var a=c[n]||{x:0,y:0};(0,_ut.f0)(t,a)})),u}function ojt(t,e,n){var r=t.chart,i=t.options,a=i.blendMode,o=i.setsField,u=r.getTheme(),s=u.colors10,l=u.colors20,c=n;(0,_ut.kJ)(c)||(c=e.filter((function(t){return 1===t[o].length})).length<=10?s:l);var f=ijt(c,e,a,o);return function(t){return f.get(t)||c[0]}}function ujt(t){var e=t.chart,n=t.options,r=n.legend,i=n.appendPadding,a=n.padding,o=PCt(i);return!1!==r&&(o=jCt(i,(0,_ut.U2)(r,"position"),40)),e.appendPadding=BCt([o,a]),t}function sjt(t){var e=t.options.data;e||(gCt(fCt.WARN,!1,"warn: %s","数据不能为空"),e=[]);var n=e.filter((function(t){return 1===t.sets.length})).map((function(t){return t.sets[0]})),r=e.filter((function(t){var e=t.sets;return function(t,e){for(var n=0;n<e.length;n++)if(!t.includes(e[n]))return!1;return!0}(n,e)}));return(0,_ut.Xy)(r,e)||gCt(fCt.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),(0,_ut.b$)({},t,{options:{data:r}})}function ljt(t){var e=t.chart,n=t.options,r=n.pointStyle,i=n.setsField,a=n.sizeField,o=PCt(e.appendPadding),u=o[0],s=o[1],l=o[2],c=o[3],f={offsetX:c,offsetY:u},h=e.viewBBox,d=h.width,p=h.height,g=ajt(n,Math.max(d-(s+c),0),Math.max(p-(u+l),0),0);e.data(g);var v=IEt(MCt({},t,{options:{xField:"x",yField:"y",sizeField:a,seriesField:APt,rawFields:[i,a],schema:{shape:"venn",style:r}}})).ext.geometry;v.customInfo(f);var m=function(t,e){var n=t.options.color;if("function"!=typeof n){var r=ojt(t,e,"string"==typeof n?[n]:n);return function(t){return r(t[APt])}}return n}(t,g);return"function"==typeof m&&v.color(APt,(function(e){var n=g.find((function(t){return t[APt]===e})),r=ojt(t,g)(e);return m(n,r)})),t}function cjt(t){var e=t.chart,n=t.options.label,r=PCt(e.appendPadding),i=r[0],a={offsetX:r[3],offsetY:i},o=_Ct(e,"schema");if(n){var u=n.callback,s=(0,Aut._T)(n,["callback"]);o.label({fields:["id"],callback:u,cfg:(0,_ut.b$)({},FCt(s),{type:"venn",customLabelInfo:a})})}else o.label(!1);return t}function fjt(t){var e=t.chart,n=t.options,r=n.legend,i=n.sizeField;return e.legend(APt,r),e.legend(i,!1),t}function hjt(t){return t.chart.axis(!1),t}function djt(t){var e=t.options,n=t.chart,r=e.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};lEt(MCt({},t,{options:{interactions:r.map((function(t){return(0,Aut.pi)((0,Aut.pi)({},t),{type:i[t.type]||t.type})}))}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),t}function pjt(t){return ACt(ujt,fEt,sjt,ljt,cjt,gEt({}),fjt,hjt,sEt,djt,cEt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="venn",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return DPt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return pjt},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(LEt);var gjt="x",vjt="violinY",mjt="minMax",yjt="quantile",xjt="median",bjt="violin_view",wjt=MCt({},LEt.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),Sjt=n(78525),kjt=n.n(Sjt);function Cjt(t,e){var n=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function Ejt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Mjt(t,e,n,r){for(n=n||0,r=r||t.length-1;r>n;){if(r-n>600){var i=r-n+1,a=e-n+1,o=Math.log(i),u=.5*Math.exp(2*o/3),s=.5*Math.sqrt(o*u*(i-u)/i);a-i/2<0&&(s*=-1),Mjt(t,e,Math.max(n,Math.floor(e-a*u/i+s)),Math.min(r,Math.floor(e+(i-a)*u/i+s)))}var l=t[e],c=n,f=r;for(Ejt(t,n,e),t[r]>l&&Ejt(t,n,r);c<f;){for(Ejt(t,c,f),c++,f--;t[c]<l;)c++;for(;t[f]>l;)f--}t[n]===l?Ejt(t,n,f):Ejt(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function Ojt(t,e){var n=t.slice();if(Array.isArray(e)){!function(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(Djt(t.length,e[r]));n.push(t.length-1),n.sort(_jt);var i=[0,n.length-1];for(;i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var u=Math.floor((o+a)/2);Ajt(t,n[u],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,u,u,a)}}}(n,e);for(var r=[],i=0;i<e.length;i++)r[i]=Cjt(n,e[i]);return r}return Ajt(n,Djt(n.length,e),0,n.length-1),Cjt(n,e)}function Ajt(t,e,n,r){e%1==0?Mjt(t,e,n,r):(Mjt(t,e=Math.floor(e),n,r),Mjt(t,e+1,e+1,r))}function _jt(t,e){return t-e}function Djt(t,e){var n=t*e;return 1===e?t-1:0===e?0:n%1!=0?Math.ceil(n)-1:t%2==0?n-.5:n}var Tjt=function(t){return{low:(0,_ut.VV)(t),high:(0,_ut.Fp)(t),q1:Ojt(t,.25),q3:Ojt(t,.75),median:Ojt(t,[.5]),minMax:[(0,_ut.VV)(t),(0,_ut.Fp)(t)],quantile:[Ojt(t,.25),Ojt(t,.75)]}},Fjt=function(t,e){var n=kjt().create(t,e);return{violinSize:n.map((function(t){return t.y})),violinY:n.map((function(t){return t.x}))}},Ijt=function(t){var e=t.xField,n=t.yField,r=t.seriesField,i=t.data,a=t.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var u=(0,_ut.vM)(i,e);return Object.keys(u).map((function(t){var e=u[t].map((function(t){return t[n]}));return(0,Aut.pi)((0,Aut.pi)({x:t},Fjt(e,o)),Tjt(e))}))}var s=[],l=(0,_ut.vM)(i,r);return Object.keys(l).forEach((function(t){var i=(0,_ut.vM)(l[t],e);return Object.keys(i).forEach((function(e){var a,u=i[e].map((function(t){return t[n]}));s.push((0,Aut.pi)((0,Aut.pi)(((a={x:e})[r]=t,a),Fjt(u,o)),Tjt(u)))}))})),s},Pjt=["low","high","q1","q3","median"],jjt=[{type:"dodge",marginRatio:1/32}];function Bjt(t){var e=t.chart,n=t.options;return e.data(Ijt(n)),t}function Ljt(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,a=n.shape,o=void 0===a?"violin":a,u=n.violinStyle,s=n.tooltip,l=n.state,c=e.createView({id:bjt});return function(t){var e=t.options,n=e.violin,r=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,u=kEt(e.tooltip,[r,i,a,o]),s=u.fields,l=u.formatter;n&&MEt(MCt({},t,{options:{type:"violin",colorField:a,tooltipFields:s,mapping:(0,Aut.pi)({tooltip:l},n)}}))}({chart:c,options:{xField:gjt,yField:vjt,seriesField:r||gjt,sizeField:"violinSize",tooltip:(0,Aut.pi)({fields:Pjt},s),violin:{style:u,color:i,shape:o},state:l}}),c.geometries[0].adjust(jjt),t}function Rjt(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,a=n.tooltip,o=n.box;if(!1===o)return t;var u=e.createView({id:"min_max_view"});_Et({chart:u,options:{xField:gjt,yField:mjt,seriesField:r||gjt,tooltip:(0,Aut.pi)({fields:Pjt},a),state:"object"==typeof o?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),u.geometries[0].adjust(jjt);var s=e.createView({id:"quantile_view"});_Et({chart:s,options:{xField:gjt,yField:yjt,seriesField:r||gjt,tooltip:(0,Aut.pi)({fields:Pjt},a),state:"object"==typeof o?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),s.geometries[0].adjust(jjt);var l=e.createView({id:"median_view"});return TEt({chart:l,options:{xField:gjt,yField:xjt,seriesField:r||gjt,tooltip:(0,Aut.pi)({fields:Pjt},a),state:"object"==typeof o?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),l.geometries[0].adjust(jjt),s.axis(!1),u.axis(!1),l.axis(!1),l.legend(!1),u.legend(!1),s.legend(!1),t}function Zjt(t){var e,n=t.chart,r=t.options,i=r.meta,a=r.xAxis,o=r.yAxis,u=MCt({},i,((e={})[gjt]=(0,Aut.pi)((0,Aut.pi)({sync:!0},vCt(a,hCt)),{type:"cat"}),e[vjt]=(0,Aut.pi)({sync:!0},vCt(o,hCt)),e[mjt]=(0,Aut.pi)({sync:vjt},vCt(o,hCt)),e[yjt]=(0,Aut.pi)({sync:vjt},vCt(o,hCt)),e[xjt]=(0,Aut.pi)({sync:vjt},vCt(o,hCt)),e));return n.scale(u),t}function Njt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=HCt(e,bjt);return!1===r?a.axis(gjt,!1):a.axis(gjt,r),!1===i?a.axis(vjt,!1):a.axis(vjt,i),e.axis(!1),t}function zjt(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField,a=n.shape;if(!1===r)e.legend(!1);else{var o=i||gjt,u=(0,_ut.CE)(r,["selected"]);a&&a.startsWith("hollow")||(0,_ut.U2)(u,["marker","style","lineWidth"])||(0,_ut.t8)(u,["marker","style","lineWidth"],0),e.legend(o,u),(0,_ut.U2)(r,"selected")&&(0,_ut.S6)(e.views,(function(t){return t.legend(o,r)}))}return t}function Ujt(t){var e=HCt(t.chart,bjt);return vEt()((0,Aut.pi)((0,Aut.pi)({},t),{chart:e})),t}function Hjt(t){var e=t.chart,n=t.options.animation;return(0,_ut.S6)(e.views,(function(t){GCt(t,n)})),t}function Wjt(t){return ACt(fEt,Bjt,Ljt,Rjt,Zjt,sEt,Njt,zjt,lEt,Ujt,Hjt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="violin",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return wjt},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(Ijt(this.options))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Wjt}}(LEt);var Vjt="$$yField$$",Gjt="$$diffField$$",Xjt="$$absoluteField$$",Yjt="$$isTotal$$",qjt={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function $jt(t,e,n,r){var i=function(t,e,n,r,i){var a,o=[];if((0,_ut.u4)(t,(function(t,e){var i;gCt(fCt.WARN,(0,_ut.hj)(e[n]),e[n]+" is not a valid number");var a=(0,_ut.o8)(e[n])?null:e[n];return o.push((0,Aut.pi)((0,Aut.pi)({},e),((i={})[r]=[t,t+a],i))),t+a}),0),o.length&&i){var u=(0,_ut.U2)(o,[[t.length-1],r,[1]]);o.push(((a={})[e]=i.label,a[n]=u,a[r]=[0,u],a))}return o}(t,e,n,Vjt,r);return i.map((function(e,n){var r;return(0,_ut.Kn)(e)?(0,Aut.pi)((0,Aut.pi)({},e),((r={})[Xjt]=e[Vjt][1],r[Gjt]=e[Vjt][1]-e[Vjt][0],r[Yjt]=n===t.length,r)):e}))}function Jjt(t){var e=t.options,n=e.locale,r=e.total,i=SEt(n).get(["waterfall","total"]);return r&&"string"!=typeof r.label&&i&&(t.options.total.label=i),t}function Kjt(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.total,u=n.leaderLine,s=n.columnWidthRatio,l=n.waterfallStyle,c=n.risingFill,f=n.fallingFill,h=n.color;e.data($jt(r,i,a,o));var d=h||function(t){return(0,_ut.U2)(t,[Yjt])?(0,_ut.U2)(o,["style","fill"],""):(0,_ut.U2)(t,[Vjt,1])-(0,_ut.U2)(t,[Vjt,0])>0?c:f};return _Et(MCt({},t,{options:{xField:i,yField:Vjt,seriesField:i,rawFields:[a,Gjt,Yjt,Vjt],widthRatio:s,interval:{style:l,shape:"waterfall",color:d}}})).ext.geometry.customInfo({leaderLine:u}),t}function Qjt(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,u=r.yField,s=r.meta,l=MCt({},{alias:u},(0,_ut.U2)(s,u));return ACt(gEt(((e={})[o]=i,e[u]=a,e[Vjt]=a,e),MCt({},s,((n={})[Vjt]=l,n[Gjt]=l,n[Xjt]=l,n))))(t)}function tBt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return!1===r?e.axis(a,!1):e.axis(a,r),!1===i?(e.axis(o,!1),e.axis(Vjt,!1)):(e.axis(o,i),e.axis(Vjt,i)),t}function eBt(t){var e=t.chart,n=t.options,r=n.legend,i=n.total,a=n.risingFill,o=n.fallingFill,u=SEt(n.locale);if(!1===r)e.legend(!1);else{var s=[{name:u.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:u.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&s.push({name:i.label||"",value:"total",marker:{symbol:"square",style:MCt({},{r:5},(0,_ut.U2)(i,"style"))}}),e.legend(MCt({},{custom:!0,position:"top",items:s},r)),e.removeInteraction("legend-filter")}return t}function nBt(t){var e=t.chart,n=t.options,r=n.label,i=n.labelMode,a=n.xField,o=_Ct(e,"interval");if(r){var u=r.callback,s=(0,Aut._T)(r,["callback"]);o.label({fields:"absolute"===i?[Xjt,a]:[Gjt,a],callback:u,cfg:FCt(s)})}else o.label(!1);return t}function rBt(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.xField,a=n.yField;if(!1!==r){e.tooltip((0,Aut.pi)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=e.geometries[0];(null==r?void 0:r.formatter)?o.tooltip(i+"*"+a,r.formatter):o.tooltip(a)}else e.tooltip(!1);return t}function iBt(t){return ACt(Jjt,fEt,Kjt,Qjt,tBt,eBt,rBt,nBt,hEt,lEt,cEt,vEt())(t)}yvt("interval","waterfall",{draw:function(t,e){var n=t.customInfo,r=t.points,i=t.nextPoints,a=e.addGroup(),o=this.parsePath(function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r){var i=0===n?"M":"L";e.push([i,r.x,r.y])}}var a=t[0];return e.push(["L",a.x,a.y]),e.push(["z"]),e}(r)),u=function(t){return MCt({},t.defaultStyle,t.style,{fill:t.color})}(t);a.addShape("path",{attrs:(0,Aut.pi)((0,Aut.pi)({},u),{path:o})});var s=(0,_ut.U2)(n,"leaderLine");if(s&&i){var l=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(l[1]=["L",i[1].x,i[1].y]),l=this.parsePath(l),a.addShape("path",{attrs:(0,Aut.pi)({path:l},s.style||{})})}return a}});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="waterfall",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return qjt},e.prototype.changeData=function(t){var e=this.options,n=e.xField,r=e.yField,i=e.total;this.updateOption({data:t}),this.chart.changeData($jt(t,n,r,i))},e.prototype.getSchemaAdaptor=function(){return iBt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(LEt);var aBt="color",oBt=MCt({},LEt.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",aBt],formatter:function(t){return{name:t.text,value:t.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),uBt={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function sBt(t,e){return function(t,e){var n=function(){var t=[256,256],e=hBt,n=pBt,r=dBt,i=gBt,a=vBt,o=wBt,u=Math.random,s=[],l=1/0,c=fBt,f=dBt,h=kBt,d={};function p(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=2048/e,t.height=cBt/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function g(e,n,r){for(var i,a,s,l=n.x,c=n.y,f=Math.sqrt(t[0]*t[0]+t[1]*t[1]),h=o(t),d=u()<.5?1:-1,p=-d;(i=h(p+=d))&&(a=~~i[0],s=~~i[1],!(Math.min(Math.abs(a),Math.abs(s))>=f));)if(n.x=l+a,n.y=c+s,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1])&&(!r||!yBt(n,e,t[0]))&&(!r||bBt(n,r))){for(var g=n.sprite,v=n.width>>5,m=t[0]>>5,y=n.x-(v<<4),x=127&y,b=32-x,w=n.y1-n.y0,S=void 0,k=(n.y+n.y0)*m+(y>>5),C=0;C<w;C++){S=0;for(var E=0;E<=v;E++)e[k+E]|=S<<b|(E<v?(S=g[C*v+E])>>>x:0);k+=m}return delete n.sprite,!0}return!1}return d.start=function(){var o=t[0],v=t[1],m=p(h()),y=d.board?d.board:SBt((t[0]>>5)*t[1]),x=s.length,b=[],w=s.map((function(t,o,u){return t.text=c.call(this,t,o,u),t.font=e.call(this,t,o,u),t.style=f.call(this,t,o,u),t.weight=r.call(this,t,o,u),t.rotate=i.call(this,t,o,u),t.size=~~n.call(this,t,o,u),t.padding=a.call(this,t,o,u),t})).sort((function(t,e){return e.size-t.size})),S=-1,k=d.board?[{x:0,y:0},{x:o,y:v}]:null;function C(){for(var e=Date.now();Date.now()-e<l&&++S<x;){var n=w[S];n.x=o*(u()+.5)>>1,n.y=v*(u()+.5)>>1,mBt(m,n,w,S),n.hasText&&g(y,n,k)&&(b.push(n),k?d.hasImage||xBt(k,n):k=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=t[0]>>1,n.y-=t[1]>>1)}d._tags=b,d._bounds=k}return C(),d},d.createMask=function(e){var n=document.createElement("canvas"),r=t[0],i=t[1];if(r&&i){var a=r>>5,o=SBt((r>>5)*i);n.width=r,n.height=i;var u=n.getContext("2d");u.drawImage(e,0,0,e.width,e.height,0,0,r,i);for(var s=u.getImageData(0,0,r,i).data,l=0;l<i;l++)for(var c=0;c<r;c++){var f=a*l+(c>>5),h=l*r+c<<2,p=s[h]>=250&&s[h+1]>=250&&s[h+2]>=250?1<<31-c%32:0;o[f]|=p}d.board=o,d.hasImage=!0}},d.timeInterval=function(t){l=null==t?1/0:t},d.words=function(t){s=t},d.size=function(e){t=[+e[0],+e[1]]},d.font=function(t){e=CBt(t)},d.fontWeight=function(t){r=CBt(t)},d.rotate=function(t){i=CBt(t)},d.spiral=function(t){o=EBt[t]||t},d.fontSize=function(t){n=CBt(t)},d.padding=function(t){a=CBt(t)},d.random=function(t){u=CBt(t)},d}();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach((function(t){(0,_ut.UM)(e[t])||n[t](e[t])})),n.words(t),e.imageMask&&n.createMask(e.imageMask);var r=n.start(),i=r._tags;i.forEach((function(t){t.x+=e.size[0]/2,t.y+=e.size[1]/2}));var a=e.size,o=a[0],u=a[1];return i.push({text:"",value:0,x:0,y:0,opacity:0}),i.push({text:"",value:0,x:o,y:u,opacity:0}),i}(t,e=(0,_ut.f0)({},uBt,e))}var lBt=Math.PI/180,cBt=2048;function fBt(t){return t.text}function hBt(){return"serif"}function dBt(){return"normal"}function pBt(t){return t.value}function gBt(){return 90*~~(2*Math.random())}function vBt(){return 1}function mBt(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,2048/a,cBt/a);var o=0,u=0,s=0,l=n.length;for(--r;++r<l;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;var c=i.measureText(e.text+"m").width*a,f=e.size<<1;if(e.rotate){var h=Math.sin(e.rotate*lBt),d=Math.cos(e.rotate*lBt),p=c*d,g=c*h,v=f*d,m=f*h;c=Math.max(Math.abs(p+m),Math.abs(p-m))+31>>5<<5,f=~~Math.max(Math.abs(g+v),Math.abs(g-v))}else c=c+31>>5<<5;if(f>s&&(s=f),o+c>=2048&&(o=0,u+=s,s=0),u+f>=cBt)break;i.translate((o+(c>>1))/a,(u+(f>>1))/a),e.rotate&&i.rotate(e.rotate*lBt),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=f,e.xoff=o,e.yoff=u,e.x1=c>>1,e.y1=f>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=c}for(var y=i.getImageData(0,0,2048/a,cBt/a).data,x=[];--r>=0;)if((e=n[r]).hasText){for(var b=(c=e.width)>>5,w=(f=e.y1-e.y0,0);w<f*b;w++)x[w]=0;if(null==(o=e.xoff))return;u=e.yoff;for(var S=0,k=-1,C=0;C<f;C++){for(w=0;w<c;w++){var E=b*C+(w>>5),M=y[2048*(u+C)+(o+w)<<2]?1<<31-w%32:0;x[E]|=M,S|=M}S?k=C:(e.y0++,f--,C--,u++)}e.y1=e.y0+k,e.sprite=x.slice(0,(e.y1-e.y0)*b)}}}function yBt(t,e,n){n>>=5;for(var r,i=t.sprite,a=t.width>>5,o=t.x-(a<<4),u=127&o,s=32-u,l=t.y1-t.y0,c=(t.y+t.y0)*n+(o>>5),f=0;f<l;f++){r=0;for(var h=0;h<=a;h++)if((r<<s|(h<a?(r=i[f*a+h])>>>u:0))&e[c+h])return!0;c+=n}return!1}function xBt(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function bBt(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function wBt(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function SBt(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function kBt(){return document.createElement("canvas")}function CBt(t){return(0,_ut.mf)(t)?t:function(){return t}}var EBt={archimedean:wBt,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}};function MBt(t){var e=t.options,n=t.chart,r=n,i=r.width,a=r.height,o=r.padding,u=r.appendPadding,s=r.ele,l=e.data,c=e.imageMask,f=e.wordField,h=e.weightField,d=e.colorField,p=e.wordStyle,g=e.timeInterval,v=e.random,m=e.spiral,y=e.autoFit,x=void 0===y||y,b=e.placementStrategy;if(!l||!l.length)return[];var w=p.fontFamily,S=p.fontWeight,k=p.padding,C=p.fontSize,E=function(t,e){return t.map((function(t){return t[e]})).filter((function(t){return"number"==typeof t&&!isNaN(t)}))}(l,h),M=[DBt(E),TBt(E)],O=l.map((function(t){return{text:t[f],value:t[h],color:t[d],datum:t}})),A={imageMask:c,font:w,fontSize:ABt(C,M),fontWeight:S,size:OBt({width:i,height:a,padding:o,appendPadding:u,autoFit:x,container:s}),padding:k,timeInterval:g,random:v,spiral:m,rotate:_Bt(e)};if((0,_ut.mf)(b)){var _=O.map((function(t,e,r){return(0,Aut.pi)((0,Aut.pi)((0,Aut.pi)({},t),{hasText:!!t.text,font:CBt(A.font)(t,e,r),weight:CBt(A.fontWeight)(t,e,r),rotate:CBt(A.rotate)(t,e,r),size:CBt(A.fontSize)(t,e,r),style:"normal"}),b.call(n,t,e,r))}));return _.push({text:"",value:0,x:0,y:0,opacity:0}),_.push({text:"",value:0,x:A.size[0],y:A.size[1],opacity:0}),_}return sBt(O,A)}function OBt(t){var e=t.width,n=t.height,r=t.container,i=t.autoFit,a=t.padding,o=t.appendPadding;if(i){var u=OCt(r);e=u.width,n=u.height}e=e||400,n=n||400;var s=function(t){var e=PCt(t.padding),n=PCt(t.appendPadding),r=e[0]+n[0],i=e[1]+n[1],a=e[2]+n[2],o=e[3]+n[3];return[r,i,a,o]}({padding:a,appendPadding:o}),l=s[0],c=s[1],f=s[2];return[e-(s[3]+c),n-(l+f)]}function ABt(t,e){if((0,_ut.mf)(t))return t;if((0,_ut.kJ)(t)){var n=t[0],r=t[1];if(!e)return function(){return(r+n)/2};var i=e[0],a=e[1];return a===i?function(){return(r+n)/2}:function(t){var e=t.value;return(r-n)/(a-i)*(e-i)+n}}return function(){return t}}function _Bt(t){var e=function(t){var e=t.wordStyle.rotationSteps;e<1&&(gCt(fCt.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),e=1);return{rotation:t.wordStyle.rotation,rotationSteps:e}}(t),n=e.rotation,r=e.rotationSteps;if(!(0,_ut.kJ)(n))return n;var i=n[0],a=n[1],o=1===r?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function DBt(t){return Math.min.apply(Math,t)}function TBt(t){return Math.max.apply(Math,t)}function FBt(t){var e=t.chart,n=t.options,r=n.colorField,i=n.color,a=MBt(t);return e.data(a),TEt(MCt({},t,{options:{xField:"x",yField:"y",seriesField:r&&aBt,rawFields:(0,_ut.mf)(i)&&(0,Aut.pr)((0,_ut.U2)(n,"rawFields",[]),["datum"]),point:{color:i,shape:"word-cloud"}}})).ext.geometry.label(!1),e.coordinate().reflect("y"),e.axis(!1),t}function IBt(t){return ACt(gEt({x:{nice:!1},y:{nice:!1}}))(t)}function PBt(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField;return!1===r?e.legend(!1):i&&e.legend(aBt,r),t}function jBt(t){ACt(FBt,IBt,sEt,PBt,lEt,cEt,fEt,hEt)(t)}function BBt(t){return{fontSize:t.data.size,text:t.data.text,textAlign:"center",fontFamily:t.data.font,fontWeight:t.data.weight,fill:t.color||t.defaultStyle.stroke,textBaseline:"alphabetic"}}yvt("point","word-cloud",{draw:function(t,e){var n=t.x,r=t.y,i=e.addShape("text",{attrs:(0,Aut.pi)((0,Aut.pi)({},BBt(t)),{x:n,y:r})}),a=t.data.rotate;return"number"==typeof a&&nmt.rotate(i,a*Math.PI/180),i}});(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="word-cloud",e}(0,Aut.ZT)(e,t),e.getDefaultOptions=function(){return oBt},e.prototype.changeData=function(t){this.updateOption({data:t}),this.options.imageMask?this.render():this.chart.changeData(MBt({chart:this.chart,options:this.options}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){var e=this;return new Promise((function(n){var r=e.options.imageMask;if(!r)return t.prototype.render.call(e),void n();var i,a=function(r){e.options=(0,Aut.pi)((0,Aut.pi)({},e.options),{imageMask:r||null}),t.prototype.render.call(e),n()};(i=r,new Promise((function(t,e){if(i instanceof HTMLImageElement)t(i);else{if((0,_ut.HD)(i)){var n=new Image;return n.crossOrigin="anonymous",n.src=i,n.onload=function(){t(n)},void(n.onerror=function(){gCt(fCt.ERROR,!1,"image %s load failed !!!",i),e()})}gCt(fCt.WARN,void 0===i,"The type of imageMask option must be String or HTMLImageElement."),e()}}))).then(a).catch(a)}))},e.prototype.getSchemaAdaptor=function(){return jBt},e.prototype.triggerResize=function(){var e=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout((function(){t.prototype.triggerResize.call(e)})))}})(LEt),function(t){function e(e,n,r,i){var a=t.call(this,e,MCt({},i,n))||this;return a.type="g2-plot",a.defaultOptions=i,a.adaptor=r,a}(0,Aut.ZT)(e,t),e.prototype.getDefaultOptions=function(){return this.defaultOptions},e.prototype.getSchemaAdaptor=function(){return this.adaptor}}(LEt);wEt("en-US",{locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}}),wEt("zh-CN",{locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}});var LBt,RBt=function(){return RBt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},RBt.apply(this,arguments)},ZBt=RBt({},wt),NBt=ZBt.version,zBt=ZBt.render;ZBt.unmountComponentAtNode;try{Number((NBt||"").split(".")[0])>=18&&(LBt=ZBt.createRoot)}catch(hRt){}function UBt(t){var e=ZBt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&"object"==typeof e&&(e.usingClientEntryPoint=t)}var HBt="__rc_react_root__";function WBt(t,e){LBt?function(t,e){UBt(!0);var n=e[HBt]||LBt(e);UBt(!1),n.render(t),e[HBt]=n}(t,e):function(t,e){zBt(t,e)}(t,e)}var VBt=new Map,GBt=function(t,e,n){var r=document.createElement("div");return"tooltip"===e&&(r.setAttribute("data-uuid",n),VBt.has(n)?r=VBt.get(n):VBt.set(n,r),r.className="g2-tooltip"),WBt(t,r),r},XBt=function(t,e){return{}.toString.call(t)==="[object ".concat(e,"]")},YBt=function t(e){return e&&"object"==typeof e?(Array.isArray(e)?n=e.map((function(e){return t(e)})):(n={},Object.keys(e).forEach((function(r){return n[r]=t(e[r])}))),n):e;var n},qBt=function(t,e){for(var n=t,r=0;r<e.length;r+=1){if(!(null==n?void 0:n[e[r]])){n=void 0;break}n=n[e[r]]}return n},$Bt=function(){return $Bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$Bt.apply(this,arguments)},JBt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function KBt(t,e){var n=(0,I.useRef)(),r=(0,I.useRef)(),i=(0,I.useRef)(null),a=e.onReady,o=e.onEvent,u=function(t,e,n,r){var i=qBt(t,e);!function(t,e,n){if(!t)return t;var r=t;e.forEach((function(t,i){i<e.length-1?r=r[t]:r[t]=n}))}(t,e,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var a=XBt(i,"Function")?i.apply(void 0,t):i;return XBt(a,"String")||XBt(a,"Number")||XBt(a,"HTMLDivElement")?a:GBt(a,n,r)}))},s=function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}));qBt(e,["statistic","content","customHtml"])&&u(e,["statistic","content","customHtml"]),qBt(e,["statistic","title","customHtml"])&&u(e,["statistic","title","customHtml"]),"object"==typeof e.tooltip&&(qBt(e,["tooltip","container"])&&u(e,["tooltip","container"],"tooltip",t),qBt(e,["tooltip","customContent"])&&u(e,["tooltip","customContent"],"tooltip",t))};return(0,I.useEffect)((function(){if(n.current&&!(0,_ut.Xy)(r.current,e)){var t=!1;if(r.current){var i=r.current,a=(i.data,i.value,i.percent,JBt(i,["data","value","percent"])),o=(e.data,e.value,e.percent,JBt(e,["data","value","percent"]));t=(0,_ut.Xy)(a,o)}if(r.current=YBt(e),t&&"Mix"!==(0,_ut.U2)(e,"chartType")){var u="data",l=Object.keys(e);["percent"].forEach((function(t){l.includes(t)&&(u=t)})),n.current.changeData((null==e?void 0:e[u])||[]),n.current.render()}else s(),n.current.update(e)}}),[e]),(0,I.useEffect)((function(){if(!i.current)return function(){return null};r.current||(r.current=YBt(e)),s();var u=new t(i.current,$Bt({},e));u.toDataURL=function(t,e){return function(t,e){var r;return void 0===t&&(t="image/png"),null===(r=n.current)||void 0===r?void 0:r.chart.canvas.cfg.el.toDataURL(t,e)}(t,e)},u.downloadImage=function(t,e,r){return function(t,e,r){var i;void 0===t&&(t="download"),void 0===e&&(e="image/png");var a=t;-1===t.indexOf(".")&&(a="".concat(t,".").concat(e.split("/")[1]));var o=null===(i=n.current)||void 0===i?void 0:i.chart.canvas.cfg.el.toDataURL(e,r),u=document.createElement("a");return u.href=o,u.download=a,document.body.appendChild(u),u.click(),document.body.removeChild(u),u=null,a}(t,e,r)},u.render(),n.current=function(t){if(!t)return t;var e={};for(var n in t)e[n]=t[n];return e}(u),a&&a(u);var l=function(t){o&&o(u,t)};return u.on("*",l),function(){n.current&&(n.current.destroy(),n.current.off("*",l),n.current=void 0)}}),[]),{chart:n,container:i}}var QBt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tLt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hasError:!1},e.renderError=function(t){var n=e.props.errorTemplate;return"function"==typeof n?n(t):n||I.createElement("h5",null,"组件出错了，请核查后重试： ",t.message)},e}return QBt(e,t),e.getDerivedStateFromError=function(t){return{hasError:!0,error:t}},e.getDerivedStateFromProps=function(t,e){return e.children!==t.children?{children:t.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):I.createElement(I.Fragment,null,this.props.children)},e}(I.Component),eLt=tLt,nLt=function(){return nLt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},nLt.apply(this,arguments)};var rLt=function(t){var e=t.animate,n=t.backgroundColor,r=t.backgroundOpacity,i=t.baseUrl,a=t.children,o=t.foregroundColor,u=t.foregroundOpacity,s=t.gradientRatio,l=t.uniqueKey,c=t.interval,f=t.rtl,h=t.speed,d=t.style,p=t.title,g=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),v=l||Math.random().toString(36).substring(6),m=v+"-diff",y=v+"-animated-diff",x=v+"-aria",b=f?{transform:"scaleX(-1)"}:null,w="0; "+c+"; 1",S=h+"s";return(0,I.createElement)("svg",nLt({"aria-labelledby":x,role:"img",style:nLt(nLt({},d),b)},g),p?(0,I.createElement)("title",{id:x},p):null,(0,I.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+i+"#"+m+")",style:{fill:"url("+i+"#"+y+")"}}),(0,I.createElement)("defs",{role:"presentation"},(0,I.createElement)("clipPath",{id:m},a),(0,I.createElement)("linearGradient",{id:y},(0,I.createElement)("stop",{offset:"0%",stopColor:n,stopOpacity:r},e&&(0,I.createElement)("animate",{attributeName:"offset",values:-s+"; "+-s+"; 1",keyTimes:w,dur:S,repeatCount:"indefinite"})),(0,I.createElement)("stop",{offset:"50%",stopColor:o,stopOpacity:u},e&&(0,I.createElement)("animate",{attributeName:"offset",values:-s/2+"; "+-s/2+"; "+(1+s/2),keyTimes:w,dur:S,repeatCount:"indefinite"})),(0,I.createElement)("stop",{offset:"100%",stopColor:n,stopOpacity:r},e&&(0,I.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+s),keyTimes:w,dur:S,repeatCount:"indefinite"})))))};rLt.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var iLt=function(t){return t.children?(0,I.createElement)(rLt,nLt({},t)):(0,I.createElement)(aLt,nLt({},t))},aLt=function(t){return(0,I.createElement)(iLt,nLt({viewBox:"0 0 476 124"},t),(0,I.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,I.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,I.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,I.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,I.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,I.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},oLt=iLt,uLt=function(t){var e=t.loadingTemplate,n=t.theme,r=void 0===n?"light":n;return I.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"dark"===r?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},e||I.createElement(oLt,{viewBox:"0 0 400 180",width:200,height:90,speed:1,backgroundColor:"dark"===r?"#262626":"#D9D9D9"},I.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),I.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),I.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),I.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),I.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),I.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),I.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),I.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),I.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),I.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"})))},sLt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},lLt=(0,I.forwardRef)((function(t,e){var n=t.chartRef,r=t.style,i=void 0===r?{height:"inherit"}:r,a=t.className,o=t.loading,u=t.loadingTemplate,s=t.errorTemplate,l=sLt(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),c=KBt(DFt,l),f=c.chart,h=c.container;return(0,I.useEffect)((function(){!function(t,e){t&&((0,_ut.mf)(t)?t(e):t.current=e)}(n,f.current)}),[f.current]),(0,I.useImperativeHandle)(e,(function(){return{getChart:function(){return f.current}}})),I.createElement(eLt,{errorTemplate:s},o&&I.createElement(uLt,{loadingTemplate:u,theme:t.theme}),I.createElement("div",{className:a,style:i,ref:h}))})),cLt=lLt;function fLt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hLt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fLt(Object(n),!0).forEach((function(e){(0,Z.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fLt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var dLt=function(t){var e={data:t.data.map((function(t){return hLt(hLt({},t),{},{score:t.score/2})})),xField:"dimension",yField:"score",appendPadding:[0,10,0,10],meta:{score:{alias:"score (out of 5)",min:0,nice:!0,formatter:function(t){return Number(t).toFixed(2)}}},xAxis:{tickLine:null},yAxis:{label:!1,grid:{alternateColor:"rgba(0, 0, 0, 0.04)"}},point:{size:2},area:{style:{fillOpacity:.3,fill:"green",stroke:"green"}}};return I.createElement("div",{className:" "},I.createElement(cLt,e))},pLt=function(t){var e,n=t.vizData,r=t.setVizData,i=t.vizConfig;e=[];var a=I.useState(!1),o=a[0],u=a[1],s=I.useState(!1),l=s[0],c=s[1],f=I.useState(null),h=(f[0],f[1]),d=I.useState(e),p=d[0],g=d[1],v="/api",m=I.useState(0),y=m[0],x=m[1],b=I.useRef(null);I.useEffect((function(){g(e),x(0)}),[n]);var w=null==p?void 0:p.map((function(t,e){var n=y===e;return I.createElement("div",{role:"button",tabIndex:0,onClick:function(){return x(e)},className:"text-primary p-1 px-2 rounded border "+(n?"border-accent  ":" border-transparent"),key:"evaluationsrow"+e},I.createElement("div",{className:"   "},I.createElement("div",{className:"flex   gap-3  "},I.createElement("div",{style:{minWidth:"170px"},className:"  text-md"}," ",function(t){for(var e=[],n=0;n<5;n++)n<t?e.push(I.createElement(Out,{key:"starticon"+n,className:"w-4 h-4 text-yellow-500 inline-block"})):e.push(I.createElement(Out,{className:"w-4 h-4 text-gray-300 inline-block"}));return e}(t.score/2)," ",I.createElement("span",{className:"inline-block ml-2"},t.dimension)),I.createElement("div",{className:"my-2 flex-1 bg-gray-200 h-1 rounded"},I.createElement("div",{style:{width:(10*t.score).toFixed(0)+"%",backgroundColor:(0,R.i5)(t.score,1,10)},className:"h-1 rounded"})))))}));return I.createElement("div",{style:{minHeight:"200px"},className:"text-primary"},I.createElement("div",{onClick:function(){return function(){h(null),u(!0),g([]),setTimeout((function(){(0,R.kI)(b)}),600);var t={code:n.code,goal:i.goal,textgen_config:i.textgen_config,library:i.library},e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};(0,R.ZV)(v+"/visualize/evaluate",e,(function(t){t&&t.status?(g(t.evaluations),Vn.ZP.success(t.message),setTimeout((function(){(0,R.kI)(b)}),400)):(Vn.ZP.error(t.message),h(t)),u(!1)}),(function(t){Vn.ZP.error(t.message),u(!1),h(t)}))}()},role:"button",className:"px-5 bg-accent duration-300 hover:brightness-110 text-white inline-block  rounded p-2 "+(o?"opacity-50 pointer-events-none":"")+" "},!o&&I.createElement(la.Z,{className:"w-5 h-5 mr-1  inline-block"}),o&&I.createElement(or.rH,{className:"text-white inline-block"})," Evaluate the chart."),o&&I.createElement("div",{className:"mt-4"},I.createElement(or.rH,{className:"text-accent",subtitle:"fetching evaluations .."}),I.createElement(Gn.Z,{active:!0,className:"mt-4",paragraph:{rows:12}})),I.createElement("div",{ref:b,className:"mt-6"},p&&p.length>0&&I.createElement(I.Fragment,null,I.createElement("div",{className:"my-2"},"The visualization has been evaluated across multiple dimensions. Select a dimension to view rationale for the score"," "),I.createElement("div",{className:" w-full grid md:grid-cols-2 sm:grid-cols-1 gap-3 "},I.createElement("div",{className:"  w-full"},I.createElement(dLt,{data:p})),I.createElement("div",{className:" mt-2  w-full"},I.createElement("div",{className:"mt-2"}," ",w),I.createElement("div",{className:"border mt-2 rounded p-2"},I.createElement("div",{className:"my-2 capitalize"},p[y].dimension," "),I.createElement("div",{className:"flex"},I.createElement("div",{style:{fontSize:"50px",color:(0,R.i5)(p[y].score,1,10)},className:"text-accent   mr-2"},(p[y].score/2).toFixed(1),I.createElement("div",{className:"text-sm text-center -mt-4 text-primary"}," ","out of 5"," ")),I.createElement("div",null," ",p[y].rationale))))))),p&&p.length>0&&I.createElement("div",{className:"p-2   text-right"}," ",I.createElement("div",{onClick:function(){return function(){h(null),c(!0),setTimeout((function(){(0,R.kI)(b)}),600);var t={code:n.code,feedback:p,textgen_config:i.textgen_config,library:i.library,summary:i.summary,goal:i.goal},e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};(0,R.ZV)(v+"/visualize/repair",e,(function(t){t&&t.status?(console.log("Repair data",t),r(t.charts[0]),Vn.ZP.success(t.message),setTimeout((function(){(0,R.kI)(b)}),400)):(Vn.ZP.error(t.message),h(t)),c(!1)}),(function(t){Vn.ZP.error(t.message),c(!1),h(t)}))}()},role:"button",className:"px-5 bg-accent duration-300 hover:brightness-110 text-white inline-block  rounded p-2 "+(l?"opacity-50 pointer-events-none":"")+" "},!l&&I.createElement(I.Fragment,null," ",I.createElement(Sut.Z,{className:"w-5 h-5 mr-1  inline-block"})," ","Auto Repair Chart."),l&&I.createElement(I.Fragment,null,I.createElement(or.rH,{className:"text-white inline-block"}),"Repairing Chart .."," ")," ")))},gLt=function(t){var e,n=t.vizspec,r=t.config,i=r.goal,a="/api",o=I.useState(!1),u=o[0],s=o[1],l=I.useState(null),c=l[0],f=l[1],h=I.useState([]),d=h[0],p=h[1],g=I.useRef(null),v=I.useRef(null),m=I.useState(n),y=m[0],x=m[1],b=y.spec,w=y.raster;b&&(delete b.config,b.width=300,b.height=320,b.actions=!1,b.data.url.includes("/api")||(b.data.url=a+b.data.url),null!==(e=b.title)&&void 0!==e&&e.subtitle&&delete b.title.subtitle);var S=d.map((function(t,e){return I.createElement("div",{className:"",key:"commandsrow"+e},I.createElement("span",{className:"text-xs"},t))})),k=[{key:"1",label:I.createElement("div",null," ",I.createElement(aa,{className:"inline-block h-4 mr-2"}),"Refine"),children:I.createElement("div",{className:"text-primary",style:{minHeight:"300px"}},I.createElement("div",{className:"text-sm text-primary mb-2"},"Modify Chart with Natural Language commands."),I.createElement("div",{className:"relative mt-2 bg-secondary rounded-b-none rounded p-2 "+(u?"pointer-event-none opacity-75":"")+" "},I.createElement("input",{ref:g,onKeyDown:function(t){var e;"Enter"===t.key&&function(t){f(null),s(!0);var e=Object.assign([],d);e.push(t);var i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:r.summary,instructions:e,code:n.code,library:r.library,textgen_config:r.textgen_config})};(0,R.ZV)(a+"/visualize/edit",i,(function(t){var n;t&&t.status?(x(t.charts[0]),Vn.ZP.success(t.message),(null===(n=g.current)||void 0===n?void 0:n.value)&&(g.current.value=""),p(e)):(Vn.ZP.error(t.message),f(t)),s(!1)}),(function(t){Vn.ZP.error(t.message),s(!1),f(t)}))}((null===(e=g.current)||void 0===e?void 0:e.value)||"")},className:"bg-white w-full text-gray-600 p-2 rounded",placeholder:"Change x axis label to Meters per Second",type:"input"}),u&&I.createElement("span",{className:"absolute left-4 top-4 text-accent"}," ",I.createElement(or.rH,{className:""})),I.createElement("div",{className:"text-sm text-orange-400 mt-1"},null==c?void 0:c.message)),I.createElement("div",{className:"text-xs p-2 border border-t-0 rounded border-secondary rounded-t-none"},d&&d.length>0&&I.createElement("div",{className:"text-right"},I.createElement("div",{role:"button",onClick:function(){p([])},className:"text-right border inline-block p-1 rounded hover:border-accent hover:text-accent duration-300"}," ",I.createElement(ua,{className:"w-5 h-5 inline-block"})," Clear Chat History"," ")),S))},{key:"2",label:I.createElement("div",null," ",I.createElement(sa.Z,{className:"inline-block h-4 mr-2"}),"Explain"),children:I.createElement(I.Fragment,null,I.createElement("div",{className:"text-sm text-primary mb-2"},"Use the explain visualization button below to generate an explanation for the chart."),I.createElement(wut,{vizData:y,vizConfig:r}))},{key:"3",label:I.createElement("div",null," ",I.createElement(la.Z,{className:"inline-block h-4 mr-2"}),"Evaluate"),children:I.createElement(I.Fragment,null,I.createElement("div",{className:"text-sm text-primary mb-2"},"Use the evaluate visualization button below to generate self-evaluation scores for the chart."),I.createElement(pLt,{vizData:y,setVizData:x,vizConfig:r}))}];return I.createElement("div",{className:"text-primary  ",ref:v},I.createElement("div",{className:"mb-4 w-full  "},I.createElement("div",{className:"text-lg font-semibold"},null==i?void 0:i.question),I.createElement("span",{className:"text-sm"},null==i?void 0:i.rationale)," ",(null==i?void 0:i.visualization)&&I.createElement("div",{className:"text-sm text-accent"},null==i?void 0:i.visualization)),I.createElement("div",{className:"md:flex gap-4   w-full"},b&&I.createElement("div",{className:" bg-white rounded p-2  "},I.createElement(vut,{spec:b,actions:!1})),w&&I.createElement(mut.Z,{raster:w,library:r.library,goal:r.goal}),I.createElement("div",{className:"flex-1  md:mt-0 mt-4      gap-3 mb-4  "},I.createElement("div",{className:"  w-full"},I.createElement("div",{className:"text-xs word-break: break-all text-primary mb-2"},I.createElement(ca.Z,{className:"h-4 w-4 inline-block mr-1"}),"How was this visualization created? See the specifications and code below."),I.createElement(but,{spec:b,code:y.code,error:y.error,status:y.status})))),I.createElement(fa.Z,{defaultActiveKey:"1",items:k}))},vLt=function(t){var e=t.vizspecs,n=t.vizConfig;return I.createElement("div",{className:" mt-4  "},I.createElement(na,{locale:{emptyText:I.createElement(ra.Z,{description:"No experiments found"})},dataSource:e,renderItem:function(t,e){return I.createElement(gLt,{vizspec:t,config:n})},pagination:{pageSize:1,size:"small",hideOnSinglePage:!0}}))};function mLt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yLt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mLt(Object(n),!0).forEach((function(e){(0,Z.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mLt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xLt=function(t){var e,n=t.config,r=n.vizConfig,i=n.setVizConfig,a=I.useState(null),o=a[0],u=a[1],s=I.useState(null),l=(s[0],s[1]),c=I.useState(!1),f=c[0],h=c[1],d=I.useRef(null),p=I.useRef(null);I.useEffect((function(){var t;d.current&&(d.current.value=(null===(t=r.goal)||void 0===t?void 0:t.question)||"");r.summary&&r.goal}),[r.goal]),I.useEffect((function(){r.summary&&r.goal&&(setTimeout((function(){(0,R.kI)(p)}),200),g(r))}),[r.library,r.goal]);var g=function(t){l(null),u(null),h(!0);var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:t.summary,goal:t.goal,library:r.library,textgen_config:r.textgen_config})};(0,R.ZV)("/api/visualize",e,(function(t){t&&t.status?(u(t.charts),Vn.ZP.success(t.message),setTimeout((function(){(0,R.kI)(p)}),600)):(Vn.ZP.error(t.message),l(t)),h(!1)}),(function(t){l(t),Vn.ZP.error(t.message),h(!1)}))};return I.createElement("div",{className:" mt-10"},r.summary&&I.createElement(I.Fragment,null,I.createElement("div",{className:"font-semibold text-xl  mb-2 text-secopndary"},I.createElement(yr.Z,{className:"inline-block h-5"})," Visualization Generation"),I.createElement("div",{className:" my-2 text-secondary text-xs"},"Select a goal above or describe a new visualization goal to generate a visualization."),I.createElement("div",{className:(f?" ":"")+" border border-secondary rounded p-3 flex gap-2"},I.createElement("input",{className:" w-full p-3 text-gray-700 flex-1 rounded border border-secondary inline-block  "+(f?"brightness-90 pointer-events-none":""),placeholder:"Enter Prompt",type:"text",defaultValue:null===(e=r.goal)||void 0===e?void 0:e.question,ref:d,onKeyDown:function(t){var e,n;"Enter"===t.key&&d.current&&!f&&i(yLt(yLt({},r),{},{goal:{index:0,question:null===(e=d.current)||void 0===e?void 0:e.value,visualization:null===(n=d.current)||void 0===n?void 0:n.value,rationale:" "}}))}}),I.createElement(or.Cw,{onClick:function(){var t,e;d.current&&i(yLt(yLt({},r),{},{goal:{index:0,question:null===(t=d.current)||void 0===t?void 0:t.value,visualization:null===(e=d.current)||void 0===e?void 0:e.value,rationale:" "}}))}},I.createElement("div",{className:"   flex relative"},f&&I.createElement("div",{className:"inline-block   "},I.createElement(br,{className:"relative -pb-2  animate-spin  inline-flex rounded-full h-7 w-7"})),!f&&I.createElement("span",{className:"inline-block "}," ",I.createElement(Sr,{className:"inline-block h-5 mr-2 -mt-1"}),"Generate"))," "))),I.createElement("div",{ref:p},f&&I.createElement(I.Fragment,null,I.createElement(or.Ff,null,I.createElement(I.Fragment,null," Working on generating interesting visualizations")),I.createElement(Gn.Z,{active:!0,className:"mt-4",paragraph:{rows:12}})),r.summary&&r.goal&&I.createElement("div",{className:"mt-4"},o&&o.length>0&&I.createElement("div",{className:"mt-4  "},I.createElement(vLt,{vizspecs:o,vizConfig:r}))),o&&0===o.length&&I.createElement("div",{className:"mt-4 p-2 rounded border-accent border"}," ",I.createElement(L,{className:"inline-block h-5 mr-2"}),"No visualizations generated"," ")))};function bLt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wLt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bLt(Object(n),!0).forEach((function(e){(0,Z.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bLt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var SLt=function(t){var e=t.config,n=e.vizConfig,r=e.setVizConfig,i=(e.error,e.setError),a="/api",o=I.useState(!1),u=o[0],s=o[1],l=I.useState(!1),c=l[0],f=l[1],h=I.useState(null),d=h[0],p=h[1],g=I.useRef(null),v=I.useRef(null),m=Wn.Dragger;I.useEffect((function(){n.summary&&(x(n.summary),setTimeout((function(){(0,R.kI)(g)}),700))}),[n.summary]);var y=function(){i(null);var t=Object.assign({},n);t.goal=null,t.summary=null,r(t)},x=function(t){var e=a+"/goal";i(null),s(!0);var o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:t,n:7})};(0,R.ZV)(e,o,(function(t){t&&t.status?(Vn.ZP.success(t.message),r(wLt(wLt({},n),{},{goal:t.data[0]})),p(t.data)):Vn.ZP.error(t.message),s(!1)}),(function(t){i(t),Vn.ZP.error(t.message),s(!1)}))},b={name:"file",multiple:!1,maxCount:1,beforeUpload:function(t){return function(t){y();var e=new FormData;e.append("file",t,t.name);var o=a+"/summarize";f(!0),fetch(o,{method:"POST",body:e}).then((function(t){return t.json()})).then((function(t){t.status?(i(null),f(!1),r(wLt(wLt({},n),{},{summary:t.summary,goal:null}))):(i({status:!1,message:t.message}),f(!1))})).catch((function(t){f(!1),console.log(t),i({status:!1,message:t+""})}))}(t),!1},onChange:function(t){var e=t.file.status;"done"===e?Vn.ZP.success(t.file.name+" file uploaded successfully."):"error"===e&&Vn.ZP.error(t.file.name+" file upload failed.")},onDrop:function(t){console.log("Dropped files",t.dataTransfer.files)}};return I.createElement("div",{className:""},I.createElement("div",{className:"mb-2 "},I.createElement("div",{className:" md:pb-2   mb-6 "},I.createElement("div",{className:"mb-2 "},I.createElement("span",{className:"font-semibold "},I.createElement(z,{className:"inline-block h-5"})," Ready?")," ",I.createElement("span",{className:"text-sm "},"Upload a file to begin.")," "),I.createElement(m,Object.assign({className:" "},b),I.createElement("p",{className:"ant-upload-drag-icon  flex justify-center"},I.createElement(H,{className:"h-10"})),I.createElement("p",{className:"px-2 ant-upload-text"},"Click or drag file to this area to upload"),I.createElement("p",{className:"px-2 ant-upload-hint"},"Upload .json or .csv files to generate a visualization."))),I.createElement(fr,{config:{setLoadingSummary:f,resetStates:y,vizConfig:n,setVizConfig:r,setError:i}}),c&&I.createElement("div",{className:"my-2 mt-6 text-xs"}," ",I.createElement("span",{className:"text-accent inline-block mr-2"}," ",I.createElement(Xn.Z,{icon:"loading",size:5}))," ","Uploading data, generating summary .."," ",I.createElement(Gn.Z,{active:!0,className:"mt-4",paragraph:{rows:12}})),I.createElement(sr,{summaryConfig:{vizConfig:n,setVizConfig:r,loadingSummary:c}}),I.createElement("div",{ref:g}),I.createElement("div",{className:"mt-10 mb-32"},u&&I.createElement("div",{className:"my-2 text-xs"}," ",I.createElement("span",{className:"text-accent inline-block mr-2"}," ",I.createElement(Xn.Z,{icon:"loading",size:5}))," ","Generating data exploration goals for the data .."," ",I.createElement(Gn.Z,{active:!0,className:"mt-4",paragraph:{rows:12}})),I.createElement("div",{ref:v},I.createElement(mr,{config:{goals:d,vizConfig:n,setVizConfig:r,loadingGoals:u}})),d&&I.createElement(xLt,{config:{vizConfig:n,setVizConfig:r}}))))},kLt=["title","titleId"];var CLt=I.forwardRef((function(t,e){var n=t.title,r=t.titleId,i=(0,j.Z)(t,kLt);return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:e,"aria-labelledby":r},i),n?I.createElement("title",{id:r},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 010 3m0-3a1.5 1.5 0 000 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 010 3m0-3a1.5 1.5 0 000 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 010 3m0-3a1.5 1.5 0 000 3m0 9.75V10.5"}))})),ELt=n(36872),MLt=n.n(ELt),OLt=n(45934),ALt=I.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0});function _Lt(t,e,n){return(t-e)/(n-e)}function DLt(t,e,n,r){var i=_Lt(e,n,r),a={};switch(t){case"rtl":a.right="".concat(100*i,"%"),a.transform="translateX(50%)";break;case"btt":a.bottom="".concat(100*i,"%"),a.transform="translateY(50%)";break;case"ttb":a.top="".concat(100*i,"%"),a.transform="translateY(-50%)";break;default:a.left="".concat(100*i,"%"),a.transform="translateX(-50%)"}return a}function TLt(t,e){return Array.isArray(t)?t[e]:t}var FLt=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],ILt=I.forwardRef((function(t,e){var n,r,i=t.prefixCls,a=t.value,o=t.valueIndex,u=t.onStartMove,s=t.style,l=t.render,c=t.dragging,f=t.onOffsetChange,h=(0,j.Z)(t,FLt),d=I.useContext(ALt),p=d.min,g=d.max,v=d.direction,m=d.disabled,y=d.range,x=d.tabIndex,b=d.ariaLabelForHandle,w=d.ariaLabelledByForHandle,S=d.ariaValueTextFormatterForHandle,k="".concat(i,"-handle"),C=function(t){m||u(t,o)},E=DLt(v,a,p,g),M=I.createElement("div",(0,$.Z)({ref:e,className:q()(k,(n={},(0,Z.Z)(n,"".concat(k,"-").concat(o+1),y),(0,Z.Z)(n,"".concat(k,"-dragging"),c),n)),style:(0,Mt.Z)((0,Mt.Z)({},E),s),onMouseDown:C,onTouchStart:C,onKeyDown:function(t){if(!m){var e=null;switch(t.which||t.keyCode){case OLt.Z.LEFT:e="ltr"===v||"btt"===v?-1:1;break;case OLt.Z.RIGHT:e="ltr"===v||"btt"===v?1:-1;break;case OLt.Z.UP:e="ttb"!==v?1:-1;break;case OLt.Z.DOWN:e="ttb"!==v?-1:1;break;case OLt.Z.HOME:e="min";break;case OLt.Z.END:e="max";break;case OLt.Z.PAGE_UP:e=2;break;case OLt.Z.PAGE_DOWN:e=-2}null!==e&&(t.preventDefault(),f(e,o))}},tabIndex:m?null:TLt(x,o),role:"slider","aria-valuemin":p,"aria-valuemax":g,"aria-valuenow":a,"aria-disabled":m,"aria-label":TLt(b,o),"aria-labelledby":TLt(w,o),"aria-valuetext":null===(r=TLt(S,o))||void 0===r?void 0:r(a)},h));return l&&(M=l(M,{index:o,prefixCls:i,value:a,dragging:c})),M}));var PLt=ILt,jLt=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],BLt=I.forwardRef((function(t,e){var n=t.prefixCls,r=t.style,i=t.onStartMove,a=t.onOffsetChange,o=t.values,u=t.handleRender,s=t.draggingIndex,l=(0,j.Z)(t,jLt),c=I.useRef({});return I.useImperativeHandle(e,(function(){return{focus:function(t){var e;null===(e=c.current[t])||void 0===e||e.focus()}}})),I.createElement(I.Fragment,null,o.map((function(t,e){return I.createElement(PLt,(0,$.Z)({ref:function(t){t?c.current[e]=t:delete c.current[e]},dragging:s===e,prefixCls:n,style:TLt(r,e),key:e,value:t,valueIndex:e,onStartMove:i,onOffsetChange:a,render:u},l))})))}));var LLt=BLt;function RLt(t){var e="touches"in t?t.touches[0]:t;return{pageX:e.pageX,pageY:e.pageY}}function ZLt(t){var e=t.prefixCls,n=t.style,r=t.start,i=t.end,a=t.index,o=t.onStartMove,u=I.useContext(ALt),s=u.direction,l=u.min,c=u.max,f=u.disabled,h=u.range,d="".concat(e,"-track"),p=_Lt(r,l,c),g=_Lt(i,l,c),v=function(t){!f&&o&&o(t,-1)},m={};switch(s){case"rtl":m.right="".concat(100*p,"%"),m.width="".concat(100*g-100*p,"%");break;case"btt":m.bottom="".concat(100*p,"%"),m.height="".concat(100*g-100*p,"%");break;case"ttb":m.top="".concat(100*p,"%"),m.height="".concat(100*g-100*p,"%");break;default:m.left="".concat(100*p,"%"),m.width="".concat(100*g-100*p,"%")}return I.createElement("div",{className:q()(d,h&&"".concat(d,"-").concat(a+1)),style:(0,Mt.Z)((0,Mt.Z)({},m),n),onMouseDown:v,onTouchStart:v})}function NLt(t){var e=t.prefixCls,n=t.style,r=t.values,i=t.startPoint,a=t.onStartMove,o=I.useContext(ALt),u=o.included,s=o.range,l=o.min,c=I.useMemo((function(){if(!s){if(0===r.length)return[];var t=null!=i?i:l,e=r[0];return[{start:Math.min(t,e),end:Math.max(t,e)}]}for(var n=[],a=0;a<r.length-1;a+=1)n.push({start:r[a],end:r[a+1]});return n}),[r,s,i,l]);return u?c.map((function(t,r){var i=t.start,o=t.end;return I.createElement(ZLt,{index:r,prefixCls:e,style:TLt(n,r),start:i,end:o,key:r,onStartMove:a})})):null}function zLt(t){var e=t.prefixCls,n=t.style,r=t.children,i=t.value,a=t.onClick,o=I.useContext(ALt),u=o.min,s=o.max,l=o.direction,c=o.includedStart,f=o.includedEnd,h=o.included,d="".concat(e,"-text"),p=DLt(l,i,u,s);return I.createElement("span",{className:q()(d,(0,Z.Z)({},"".concat(d,"-active"),h&&c<=i&&i<=f)),style:(0,Mt.Z)((0,Mt.Z)({},p),n),onMouseDown:function(t){t.stopPropagation()},onClick:function(){a(i)}},r)}function ULt(t){var e=t.prefixCls,n=t.marks,r=t.onClick,i="".concat(e,"-mark");return n.length?I.createElement("div",{className:i},n.map((function(t){var e=t.value,n=t.style,a=t.label;return I.createElement(zLt,{key:e,prefixCls:i,style:n,value:e,onClick:r},a)}))):null}function HLt(t){var e=t.prefixCls,n=t.value,r=t.style,i=t.activeStyle,a=I.useContext(ALt),o=a.min,u=a.max,s=a.direction,l=a.included,c=a.includedStart,f=a.includedEnd,h="".concat(e,"-dot"),d=l&&c<=n&&n<=f,p=(0,Mt.Z)((0,Mt.Z)({},DLt(s,n,o,u)),"function"==typeof r?r(n):r);return d&&(p=(0,Mt.Z)((0,Mt.Z)({},p),"function"==typeof i?i(n):i)),I.createElement("span",{className:q()(h,(0,Z.Z)({},"".concat(h,"-active"),d)),style:p})}function WLt(t){var e=t.prefixCls,n=t.marks,r=t.dots,i=t.style,a=t.activeStyle,o=I.useContext(ALt),u=o.min,s=o.max,l=o.step,c=I.useMemo((function(){var t=new Set;if(n.forEach((function(e){t.add(e.value)})),r&&null!==l)for(var e=u;e<=s;)t.add(e),e+=l;return Array.from(t)}),[u,s,l,r,n]);return I.createElement("div",{className:"".concat(e,"-step")},c.map((function(t){return I.createElement(HLt,{prefixCls:e,key:t,value:t,style:i,activeStyle:a})})))}var VLt=I.forwardRef((function(t,e){var n,r=t.prefixCls,i=void 0===r?"rc-slider":r,a=t.className,o=t.style,u=t.disabled,s=void 0!==u&&u,l=t.autoFocus,c=t.onFocus,f=t.onBlur,h=t.min,d=void 0===h?0:h,p=t.max,g=void 0===p?100:p,v=t.step,m=void 0===v?1:v,y=t.value,x=t.defaultValue,b=t.range,w=t.count,S=t.onChange,k=t.onBeforeChange,C=t.onAfterChange,E=t.allowCross,M=void 0===E||E,O=t.pushable,A=void 0!==O&&O,_=t.draggableTrack,D=t.reverse,T=t.vertical,F=t.included,P=void 0===F||F,j=t.startPoint,B=t.trackStyle,L=t.handleStyle,R=t.railStyle,N=t.dotStyle,z=t.activeDotStyle,U=t.marks,H=t.dots,V=t.handleRender,G=t.tabIndex,Y=void 0===G?0:G,$=t.ariaLabelForHandle,J=t.ariaLabelledByForHandle,K=t.ariaValueTextFormatterForHandle,Q=I.useRef(),tt=I.useRef(),et=I.useMemo((function(){return T?D?"ttb":"btt":D?"rtl":"ltr"}),[D,T]),rt=I.useMemo((function(){return isFinite(d)?d:0}),[d]),it=I.useMemo((function(){return isFinite(g)?g:100}),[g]),at=I.useMemo((function(){return null!==m&&m<=0?1:m}),[m]),ot=I.useMemo((function(){return!0===A?at:A>=0&&A}),[A,at]),ut=I.useMemo((function(){return Object.keys(U||{}).map((function(t){var e=U[t],n={value:Number(t)};return e&&"object"===(0,nt.Z)(e)&&!I.isValidElement(e)&&("label"in e||"style"in e)?(n.style=e.style,n.label=e.label):n.label=e,n})).filter((function(t){var e=t.label;return e||"number"==typeof e})).sort((function(t,e){return t.value-e.value}))}),[U]),st=function(t,e,n,r,i,a){var o=I.useCallback((function(n){var r=isFinite(n)?n:t;return r=Math.min(e,n),Math.max(t,r)}),[t,e]),u=I.useCallback((function(r){if(null!==n){var i=t+Math.round((o(r)-t)/n)*n,a=function(t){return(String(t).split(".")[1]||"").length},u=Math.max(a(n),a(e),a(t)),s=Number(i.toFixed(u));return t<=s&&s<=e?s:null}return null}),[n,t,e,o]),s=I.useCallback((function(i){var a=o(i),s=r.map((function(t){return t.value}));null!==n&&s.push(u(i)),s.push(t,e);var l=s[0],c=e-t;return s.forEach((function(t){var e=Math.abs(a-t);e<=c&&(l=t,c=e)})),l}),[t,e,r,n,o,u]),l=function i(a,o,s){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof o){var c,f=a[s],h=f+o,d=[];r.forEach((function(t){d.push(t.value)})),d.push(t,e),d.push(u(f));var p=o>0?1:-1;"unit"===l?d.push(u(f+p*n)):d.push(u(h)),d=d.filter((function(t){return null!==t})).filter((function(t){return o<0?t<=f:t>=f})),"unit"===l&&(d=d.filter((function(t){return t!==f})));var g="unit"===l?f:h;c=d[0];var v=Math.abs(c-g);if(d.forEach((function(t){var e=Math.abs(t-g);e<v&&(c=t,v=e)})),void 0===c)return o<0?t:e;if("dist"===l)return c;if(Math.abs(o)>1){var m=(0,X.Z)(a);return m[s]=c,i(m,o-p,s,l)}return c}return"min"===o?t:"max"===o?e:void 0},c=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",i=t[n],a=l(t,e,n,r);return{value:a,changed:a!==i}},f=function(t){return null===a&&0===t||"number"==typeof a&&t<a};return[s,function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",o=t.map(s),u=o[n],h=l(o,e,n,r);if(o[n]=h,!1===i){var d=a||0;n>0&&o[n-1]!==u&&(o[n]=Math.max(o[n],o[n-1]+d)),n<o.length-1&&o[n+1]!==u&&(o[n]=Math.min(o[n],o[n+1]-d))}else if("number"==typeof a||null===a){for(var p=n+1;p<o.length;p+=1)for(var g=!0;f(o[p]-o[p-1])&&g;){var v=c(o,1,p);o[p]=v.value,g=v.changed}for(var m=n;m>0;m-=1)for(var y=!0;f(o[m]-o[m-1])&&y;){var x=c(o,-1,m-1);o[m-1]=x.value,y=x.changed}for(var b=o.length-1;b>0;b-=1)for(var w=!0;f(o[b]-o[b-1])&&w;){var S=c(o,-1,b-1);o[b-1]=S.value,w=S.changed}for(var k=0;k<o.length-1;k+=1)for(var C=!0;f(o[k+1]-o[k])&&C;){var E=c(o,1,k+1);o[k+1]=E.value,C=E.changed}}return{value:o[n],values:o}}]}(rt,it,at,ut,M,ot),lt=(0,W.Z)(st,2),ct=lt[0],ft=lt[1],ht=(0,xt.Z)(x,{value:y}),dt=(0,W.Z)(ht,2),pt=dt[0],gt=dt[1],vt=I.useMemo((function(){var t=null==pt?[]:Array.isArray(pt)?pt:[pt],e=(0,W.Z)(t,1)[0],n=null===pt?[]:[void 0===e?rt:e];if(b){if(n=(0,X.Z)(t),w||void 0===pt){var r=w>=0?w+1:2;for(n=n.slice(0,r);n.length<r;){var i;n.push(null!==(i=n[n.length-1])&&void 0!==i?i:rt)}}n.sort((function(t,e){return t-e}))}return n.forEach((function(t,e){n[e]=ct(t)})),n}),[pt,b,rt,w,ct]),mt=I.useRef(vt);mt.current=vt;var yt=function(t){return b?t:t[0]},bt=function(t){var e=(0,X.Z)(t).sort((function(t,e){return t-e}));S&&!MLt()(e,mt.current)&&S(yt(e)),gt(e)},wt=function(t){if(!s){var e=0,n=it-rt;vt.forEach((function(r,i){var a=Math.abs(t-r);a<=n&&(n=a,e=i)}));var r=(0,X.Z)(vt);r[e]=t,b&&!vt.length&&void 0===w&&r.push(t),null==k||k(yt(r)),bt(r),null==C||C(yt(r))}},St=I.useState(null),kt=(0,W.Z)(St,2),Ct=kt[0],Et=kt[1];I.useEffect((function(){if(null!==Ct){var t=vt.indexOf(Ct);t>=0&&Q.current.focus(t)}Et(null)}),[Ct]);var Mt=I.useMemo((function(){return(!_||null!==at)&&_}),[_,at]),Ot=function(t,e,n,r,i,a,o,u,s){var l=I.useState(null),c=(0,W.Z)(l,2),f=c[0],h=c[1],d=I.useState(-1),p=(0,W.Z)(d,2),g=p[0],v=p[1],m=I.useState(n),y=(0,W.Z)(m,2),x=y[0],b=y[1],w=I.useState(n),S=(0,W.Z)(w,2),k=S[0],C=S[1],E=I.useRef(null),M=I.useRef(null);I.useEffect((function(){-1===g&&b(n)}),[n,g]),I.useEffect((function(){return function(){document.removeEventListener("mousemove",E.current),document.removeEventListener("mouseup",M.current),document.removeEventListener("touchmove",E.current),document.removeEventListener("touchend",M.current)}}),[]);var O=function(t,e){x.some((function(e,n){return e!==t[n]}))&&(void 0!==e&&h(e),b(t),o(t))},A=function(t,e){if(-1===t){var n=k[0],o=k[k.length-1],u=r-n,l=i-o,c=e*(i-r);c=Math.max(c,u),c=Math.min(c,l);var f=a(n+c);c=f-n;var h=k.map((function(t){return t+c}));O(h)}else{var d=(i-r)*e,p=(0,X.Z)(x);p[t]=k[t];var g=s(p,d,t,"dist");O(g.values,g.value)}},_=I.useRef(A);_.current=A;var D=I.useMemo((function(){var t=(0,X.Z)(n).sort((function(t,e){return t-e})),e=(0,X.Z)(x).sort((function(t,e){return t-e}));return t.every((function(t,n){return t===e[n]}))?x:n}),[n,x]);return[g,f,D,function(r,i){r.stopPropagation();var a=n[i];v(i),h(a),C(n);var o=RLt(r),s=o.pageX,l=o.pageY,c=function(n){n.preventDefault();var r,a=RLt(n),o=a.pageX,u=a.pageY,c=o-s,f=u-l,h=t.current.getBoundingClientRect(),d=h.width,p=h.height;switch(e){case"btt":r=-f/p;break;case"ttb":r=f/p;break;case"rtl":r=-c/d;break;default:r=c/d}_.current(i,r)},f=function t(e){e.preventDefault(),document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",c),document.removeEventListener("touchend",t),document.removeEventListener("touchmove",c),E.current=null,M.current=null,v(-1),u()};document.addEventListener("mouseup",f),document.addEventListener("mousemove",c),document.addEventListener("touchend",f),document.addEventListener("touchmove",c),E.current=c,M.current=f}]}(tt,et,vt,rt,it,ct,bt,(function(){null==C||C(yt(mt.current))}),ft),At=(0,W.Z)(Ot,4),_t=At[0],Dt=At[1],Tt=At[2],Ft=At[3],It=function(t,e){Ft(t,e),null==k||k(yt(mt.current))},Pt=-1!==_t;I.useEffect((function(){if(!Pt){var t=vt.lastIndexOf(Dt);Q.current.focus(t)}}),[Pt]);var jt=I.useMemo((function(){return(0,X.Z)(Tt).sort((function(t,e){return t-e}))}),[Tt]),Bt=I.useMemo((function(){return b?[jt[0],jt[jt.length-1]]:[rt,jt[0]]}),[jt,b,rt]),Lt=(0,W.Z)(Bt,2),Rt=Lt[0],Zt=Lt[1];I.useImperativeHandle(e,(function(){return{focus:function(){Q.current.focus(0)},blur:function(){var t=document.activeElement;tt.current.contains(t)&&(null==t||t.blur())}}})),I.useEffect((function(){l&&Q.current.focus(0)}),[]);var Nt=I.useMemo((function(){return{min:rt,max:it,direction:et,disabled:s,step:at,included:P,includedStart:Rt,includedEnd:Zt,range:b,tabIndex:Y,ariaLabelForHandle:$,ariaLabelledByForHandle:J,ariaValueTextFormatterForHandle:K}}),[rt,it,et,s,at,P,Rt,Zt,b,Y,$,J,K]);return I.createElement(ALt.Provider,{value:Nt},I.createElement("div",{ref:tt,className:q()(i,a,(n={},(0,Z.Z)(n,"".concat(i,"-disabled"),s),(0,Z.Z)(n,"".concat(i,"-vertical"),T),(0,Z.Z)(n,"".concat(i,"-horizontal"),!T),(0,Z.Z)(n,"".concat(i,"-with-marks"),ut.length),n)),style:o,onMouseDown:function(t){t.preventDefault();var e,n=tt.current.getBoundingClientRect(),r=n.width,i=n.height,a=n.left,o=n.top,u=n.bottom,s=n.right,l=t.clientX,c=t.clientY;switch(et){case"btt":e=(u-c)/i;break;case"ttb":e=(c-o)/i;break;case"rtl":e=(s-l)/r;break;default:e=(l-a)/r}wt(ct(rt+e*(it-rt)))}},I.createElement("div",{className:"".concat(i,"-rail"),style:R}),I.createElement(NLt,{prefixCls:i,style:B,values:jt,startPoint:j,onStartMove:Mt?It:null}),I.createElement(WLt,{prefixCls:i,marks:ut,dots:H,style:N,activeStyle:z}),I.createElement(LLt,{ref:Q,prefixCls:i,style:L,values:Tt,draggingIndex:_t,onStartMove:It,onOffsetChange:function(t,e){if(!s){var n=ft(vt,t,e);null==k||k(yt(vt)),bt(n.values),null==C||C(yt(n.values)),Et(n.value)}},onFocus:c,onBlur:f,handleRender:V}),I.createElement(ULt,{prefixCls:i,marks:ut,onClick:wt})))}));var GLt=VLt,XLt=n(10518),YLt=n(52275),qLt=I.forwardRef((function(t,e){var n=t.open,r=(0,I.useRef)(null),i=(0,I.useRef)(null);function a(){XLt.Z.cancel(i.current),i.current=null}return I.useEffect((function(){return n?i.current=(0,XLt.Z)((function(){var t;null===(t=r.current)||void 0===t||t.forcePopupAlign(),i.current=null})):a(),a}),[n,t.title]),I.createElement(Ke,Object.assign({ref:(0,YLt.sQ)(r,e)},t))})),$Lt=qLt,JLt=function(t){var e,n,r,i,a=t.componentCls,o=t.controlSize,u=t.dotSize,s=t.marginFull,l=t.marginPart,c=t.colorFillContentHover;return(0,Z.Z)({},a,Object.assign(Object.assign({},(0,Ne.Wf)(t)),(i={position:"relative",height:o,margin:"".concat(l,"px ").concat(s,"px"),padding:0,cursor:"pointer",touchAction:"none"},(0,Z.Z)(i,"&-vertical",{margin:"".concat(s,"px ").concat(l,"px")}),(0,Z.Z)(i,"".concat(a,"-rail"),{position:"absolute",backgroundColor:t.colorFillTertiary,borderRadius:t.borderRadiusXS,transition:"background-color ".concat(t.motionDurationMid)}),(0,Z.Z)(i,"".concat(a,"-track"),{position:"absolute",backgroundColor:t.colorPrimaryBorder,borderRadius:t.borderRadiusXS,transition:"background-color ".concat(t.motionDurationMid)}),(0,Z.Z)(i,"&:hover",(e={},(0,Z.Z)(e,"".concat(a,"-rail"),{backgroundColor:t.colorFillSecondary}),(0,Z.Z)(e,"".concat(a,"-track"),{backgroundColor:t.colorPrimaryBorderHover}),(0,Z.Z)(e,"".concat(a,"-dot"),{borderColor:c}),(0,Z.Z)(e,"".concat(a,"-handle::after"),{boxShadow:"0 0 0 ".concat(t.handleLineWidth,"px ").concat(t.colorPrimaryBorderHover)}),(0,Z.Z)(e,"".concat(a,"-dot-active"),{borderColor:t.colorPrimary}),e)),(0,Z.Z)(i,"".concat(a,"-handle"),(n={position:"absolute",width:t.handleSize,height:t.handleSize,outline:"none"},(0,Z.Z)(n,"".concat(a,"-dragging"),{zIndex:1}),(0,Z.Z)(n,"&::before",{content:'""',position:"absolute",insetInlineStart:-t.handleLineWidth,insetBlockStart:-t.handleLineWidth,width:t.handleSize+2*t.handleLineWidth,height:t.handleSize+2*t.handleLineWidth,backgroundColor:"transparent"}),(0,Z.Z)(n,"&::after",{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:t.handleSize,height:t.handleSize,backgroundColor:t.colorBgElevated,boxShadow:"0 0 0 ".concat(t.handleLineWidth,"px ").concat(t.colorPrimaryBorder),borderRadius:"50%",cursor:"pointer",transition:"\n            inset-inline-start ".concat(t.motionDurationMid,",\n            inset-block-start ").concat(t.motionDurationMid,",\n            width ").concat(t.motionDurationMid,",\n            height ").concat(t.motionDurationMid,",\n            box-shadow ").concat(t.motionDurationMid,"\n          ")}),(0,Z.Z)(n,"&:hover, &:active, &:focus",{"&::before":{insetInlineStart:-((t.handleSizeHover-t.handleSize)/2+t.handleLineWidthHover),insetBlockStart:-((t.handleSizeHover-t.handleSize)/2+t.handleLineWidthHover),width:t.handleSizeHover+2*t.handleLineWidthHover,height:t.handleSizeHover+2*t.handleLineWidthHover},"&::after":{boxShadow:"0 0 0 ".concat(t.handleLineWidthHover,"px ").concat(t.colorPrimary),width:t.handleSizeHover,height:t.handleSizeHover,insetInlineStart:(t.handleSize-t.handleSizeHover)/2,insetBlockStart:(t.handleSize-t.handleSizeHover)/2}}),n)),(0,Z.Z)(i,"".concat(a,"-mark"),{position:"absolute",fontSize:t.fontSize}),(0,Z.Z)(i,"".concat(a,"-mark-text"),{position:"absolute",display:"inline-block",color:t.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:t.colorText}}),(0,Z.Z)(i,"".concat(a,"-step"),{position:"absolute",background:"transparent",pointerEvents:"none"}),(0,Z.Z)(i,"".concat(a,"-dot"),{position:"absolute",width:u,height:u,backgroundColor:t.colorBgElevated,border:"".concat(t.handleLineWidth,"px solid ").concat(t.colorBorderSecondary),borderRadius:"50%",cursor:"pointer",transition:"border-color ".concat(t.motionDurationSlow),"&-active":{borderColor:t.colorPrimaryBorder}}),(0,Z.Z)(i,"&&-disabled",(r={cursor:"not-allowed"},(0,Z.Z)(r,"".concat(a,"-rail"),{backgroundColor:"".concat(t.colorFillSecondary," !important")}),(0,Z.Z)(r,"".concat(a,"-track"),{backgroundColor:"".concat(t.colorTextDisabled," !important")}),(0,Z.Z)(r,"\n          ".concat(a,"-dot\n        "),{backgroundColor:t.colorBgElevated,borderColor:t.colorTextDisabled,boxShadow:"none",cursor:"not-allowed"}),(0,Z.Z)(r,"".concat(a,"-handle::after"),{backgroundColor:t.colorBgElevated,cursor:"not-allowed",width:t.handleSize,height:t.handleSize,boxShadow:"0 0 0 ".concat(t.handleLineWidth,"px ").concat(new _n.C(t.colorTextDisabled).onBackground(t.colorBgContainer).toHexString()),insetInlineStart:0,insetBlockStart:0}),(0,Z.Z)(r,"\n          ".concat(a,"-mark-text,\n          ").concat(a,"-dot\n        "),{cursor:"not-allowed !important"}),r)),i)))},KLt=function(t,e){var n,r,i,a,o=t.componentCls,u=t.railSize,s=t.handleSize,l=t.dotSize,c=e?"paddingBlock":"paddingInline",f=e?"width":"height",h=e?"height":"width",d=e?"insetBlockStart":"insetInlineStart",p=e?"top":"insetInlineStart";return a={},(0,Z.Z)(a,c,u),(0,Z.Z)(a,h,3*u),(0,Z.Z)(a,"".concat(o,"-rail"),(n={},(0,Z.Z)(n,f,"100%"),(0,Z.Z)(n,h,u),n)),(0,Z.Z)(a,"".concat(o,"-track"),(0,Z.Z)({},h,u)),(0,Z.Z)(a,"".concat(o,"-handle"),(0,Z.Z)({},d,(3*u-s)/2)),(0,Z.Z)(a,"".concat(o,"-mark"),(r={insetInlineStart:0,top:0},(0,Z.Z)(r,p,s),(0,Z.Z)(r,f,"100%"),r)),(0,Z.Z)(a,"".concat(o,"-step"),(i={insetInlineStart:0,top:0},(0,Z.Z)(i,p,u),(0,Z.Z)(i,f,"100%"),(0,Z.Z)(i,h,u),i)),(0,Z.Z)(a,"".concat(o,"-dot"),(0,Z.Z)({position:"absolute"},d,(u-l)/2)),a},QLt=function(t){var e=t.componentCls,n=t.marginPartWithMark;return(0,Z.Z)({},"".concat(e,"-horizontal"),Object.assign(Object.assign({},KLt(t,!0)),(0,Z.Z)({},"&".concat(e,"-with-marks"),{marginBottom:n})))},tRt=function(t){var e=t.componentCls;return(0,Z.Z)({},"".concat(e,"-vertical"),Object.assign(Object.assign({},KLt(t,!1)),{height:"100%"}))},eRt=(0,Ze.Z)("Slider",(function(t){var e=(0,Re.TS)(t,{marginPart:(t.controlHeight-t.controlSize)/2,marginFull:t.controlSize/2,marginPartWithMark:t.controlHeightLG-t.controlSize});return[JLt(e),QLt(e),tRt(e)]}),(function(t){var e=t.controlHeightLG/4;return{controlSize:e,railSize:4,handleSize:e,handleSizeHover:t.controlHeightSM/2,dotSize:8,handleLineWidth:t.lineWidth+1,handleLineWidthHover:t.lineWidth+3}})),nRt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},rRt=function(t){return"number"==typeof t?t.toString():""},iRt=I.forwardRef((function(t,e){var n=t.prefixCls,r=t.range,i=t.className,a=t.tooltipPrefixCls,o=t.tipFormatter,u=t.tooltipVisible,s=t.getTooltipPopupContainer,l=t.tooltipPlacement,c=nRt(t,["prefixCls","range","className","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement"]),f=I.useContext(St.E_),h=f.getPrefixCls,d=f.direction,p=f.getPopupContainer,g=I.useState({}),v=(0,W.Z)(g,2),m=v[0],y=v[1],x=function(t,e){y((function(n){return Object.assign(Object.assign({},n),(0,Z.Z)({},t,e))}))},b=function(t,e){return t||(e?"rtl"===d?"left":"right":"top")},w=h("slider",n),S=eRt(w),k=(0,W.Z)(S,2),C=k[0],E=k[1],M=q()(i,(0,Z.Z)({},"".concat(w,"-rtl"),"rtl"===d),E);"rtl"!==d||c.vertical||(c.reverse=!c.reverse);var O=I.useMemo((function(){return r?"object"==typeof r?[!0,r.draggableTrack]:[!0,!1]:[!1]}),[r]),A=(0,W.Z)(O,2),_=A[0],D=A[1];return C(I.createElement(GLt,Object.assign({},c,{step:c.step,range:_,draggableTrack:D,className:M,ref:e,prefixCls:w,handleRender:function(e,n){var r,i,c=n.index,f=n.dragging,d=t.tooltip,g=void 0===d?{}:d,v=t.vertical,y=Object.assign({},g),S=y.open,k=y.placement,C=y.getPopupContainer,E=y.prefixCls,M=y.formatter,O=!!(i=M||null===M?M:o||null===o?o:rRt)&&(m[c]||f),A=null!==(r=null!=S?S:u)&&void 0!==r?r:void 0===S&&O,_=Object.assign(Object.assign({},e.props),{onMouseEnter:function(){return x(c,!0)},onMouseLeave:function(){return x(c,!1)}}),D=h("tooltip",null!=E?E:a);return I.createElement($Lt,{prefixCls:D,title:i?i(n.value):"",open:A,placement:b(null!=k?k:l,v),key:c,overlayClassName:"".concat(w,"-tooltip"),getPopupContainer:C||s||p},I.cloneElement(e,_))}})))}));var aRt=iRt;function oRt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function uRt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oRt(Object(n),!0).forEach((function(e){(0,Z.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oRt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var sRt=function(t){var e=t.config,n=I.useState(!1),r=n[0],i=n[1],a=e.vizConfig,o=e.setVizConfig,u=a.textgen_config,s=function(t){var e=t.title,n=t.description,r=t.value,i=t.control,a=t.className;return I.createElement("div",{className:""+a},I.createElement("div",null,I.createElement("span",{className:"text-primary inline-block"},e," "),I.createElement("span",{className:"text-xs ml-1 text-accent -mt-2 inline-block"},r)),I.createElement("div",{className:"text-secondary text-xs"}," ",n," "),i)};return I.createElement("div",{className:"text-secondary rounded p"},I.createElement(ar.Z,{title:I.createElement("span",null,I.createElement(CLt,{className:"h-4 text-accent inline-block mr-2 -mt-1"}),"Generation Settings"),open:r,onCancel:function(){i(!1)},onOk:function(){i(!1)}},I.createElement(s,{title:"Model",description:"The model to use for generation. Select only either gpt-3.5-turbo or gpt-4",value:u.model,control:I.createElement(ui.Z,{className:"mt-2 w-full",defaultValue:u.model,onChange:function(t){o(uRt(uRt({},a),{},{textgen_config:uRt(uRt({},u),{},{model:t})}))},options:[{label:"gpt-3.5-turbo",value:"gpt-3.5-turbo-0301"},{label:"gpt-4",value:"gpt-4-0314"}]})}),I.createElement(s,{title:"Max Tokens",description:"Maximum number of tokens to generate.",value:u.max_tokens,control:I.createElement(aRt,{min:128,max:2048,defaultValue:u.max_tokens,step:64,onAfterChange:function(t){o(uRt(uRt({},a),{},{textgen_config:uRt(uRt({},u),{},{max_tokens:t})}))}})}),I.createElement(s,{title:"Temperature",description:"The higher the temperature, the crazier the text.",value:u.temperature,control:I.createElement(aRt,{min:.1,max:1,defaultValue:u.temperature,step:.1,onAfterChange:function(t){o(uRt(uRt({},a),{},{textgen_config:uRt(uRt({},u),{},{temperature:t})}))}})}),I.createElement(s,{title:"Number Messages",description:"The number of responses to generate.",value:u.n,control:I.createElement(aRt,{min:1,max:10,defaultValue:u.n,step:1,onAfterChange:function(t){o(uRt(uRt({},a),{},{textgen_config:uRt(uRt({},u),{},{n:t})}))}})}),I.createElement(s,{title:"Presence Penalty",description:"Number between -2.0 and 2.0. Positive values penalize new tokens based on whether they appear in the text so far, increasing the model's likelihood to talk about new topics.",value:u.presence_penalty,control:I.createElement(aRt,{min:-2,max:2,defaultValue:u.presence_penalty,step:.1,onAfterChange:function(t){o(uRt(uRt({},a),{},{textgen_config:uRt(uRt({},u),{},{presence_penalty:t})}))}})}),I.createElement(s,{title:"Frequency Penalty",description:"Number between -2.0 and 2.0. Positive values penalize new tokens based on whether they appear in the text so far, increasing the model's likelihood to talk about new topics.",value:u.frequency_penalty,control:I.createElement(aRt,{min:-2,max:2,defaultValue:u.frequency_penalty,step:.1,onAfterChange:function(t){o(uRt(uRt({},a),{},{textgen_config:uRt(uRt({},u),{},{frequency_penalty:t})}))}})}),I.createElement("p",{className:"mt-4 text-xs text-secondary"}," ","Learn more about OpenAI model parameters"," ",I.createElement("a",{className:"border-b border-accent hover:text-accent ",target:"_blank",rel:"noopener noreferrer",href:"https://platform.openai.com/docs/api-reference/chat"},"here"),".")),I.createElement("div",{className:"mb-3 text-secondary md:flex gap-3 grid"}," ",I.createElement("div",{className:"mb-4 flex-1"},I.createElement("div",{className:"text-xs mb-2"}," ","Select a visualization library/grammar"),I.createElement(ui.Z,{defaultValue:a.library,style:{width:220},onChange:function(t){o(uRt(uRt({},a),{},{library:t}))},options:[{label:"Altair",value:"altair"},{label:"Matplotlib",value:"matplotlib"},{label:"Seaborn",value:"seaborn"},{label:"GGPlot",value:"ggplot"}]})),I.createElement("div",{className:"  text-right"},I.createElement(or.kq,{onClick:function(){i(!0)}},I.createElement(CLt,{className:"h-4 text-accent inline-block mr-2 -mt-1"}),"Generation Settings"," "),I.createElement("div",{className:"opacity-80 text-xs mt-2"},"Model: ",I.createElement("span",{className:"text-accent"}," ",u.model),", n:",I.createElement("span",{className:"text-accent"}," ",u.n),", number of Temperature:"," ",I.createElement("span",{className:"text-accent"}," ",u.temperature)," ","..."))))},lRt=function(){var t=I.useState(!1),e=(t[0],t[1],I.useRef(null),I.useRef(null),(0,R.$o)("lida_viz_config")||{goal:null,summary:null,library:"seaborn",textgen_config:{temperature:0,n:1,model:"gpt-3.5-turbo-0301",max_tokens:2048,messages:[]}}),n=(I.useRef(null),I.useRef(null)),r=I.useState(e),i=r[0],a=r[1],o=I.useState(null),u=(o[0],o[1]),s=I.useState(null),l=s[0],c=s[1];return I.useEffect((function(){null===i.summary&&((0,R.kI)(n),u(null))}),[i.summary]),I.createElement("div",{className:""},I.createElement(sRt,{config:{vizConfig:i,setVizConfig:a}})," ",I.createElement("div",{ref:n},I.createElement(SLt,{config:{vizConfig:i,setVizConfig:a,error:l,setError:c}})),l&&!l.status&&I.createElement("div",{className:"mt-6"}," ",I.createElement("div",{className:"font-semibold  pb-1 mb-2 text-red-400"},I.createElement(L,{className:"inline-block h-6 w-6 -mt-1"})," An error occurred. Please try again later."),I.createElement("div",{className:"text-secondpary border-red-400 border rounded bg-secondary p-2 px-3"}," ",l.message,".")))},cRt=function(t){var e=t.data;return I.createElement(P.Z,{meta:e.site.siteMetadata,title:"Demo",link:"/demo"},I.createElement("main",{className:""},I.createElement("div",{className:"mb-6"},I.createElement("div",null,"Lida provides a conversational interface for automatic generation of"," ",I.createElement("span",{className:"border-b border-accent"},"grammar-agnostic")," ","visualizations (and infographics) from data!."," ",I.createElement("div",{className:"text-xs mt-1"}," ","Currently being developed at MSR! (Work in Progress.)"," ",I.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"inline-block text-xs border-accent border-b pb-1",href:"mailto:victordibia@microsoft.com"},"Learn more.")))),I.createElement(lRt,null)))}}}]);
//# sourceMappingURL=component---src-pages-demo-tsx-cbe7812d1ef5893109c5.js.map